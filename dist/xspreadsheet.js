/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less ***!
  \*****************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/getUrl.js */ "./node_modules/css-loader/dist/runtime/getUrl.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__);
// Imports



var ___CSS_LOADER_URL_IMPORT_0___ = new URL(/* asset import */ __webpack_require__(/*! ../assets/sprite.svg */ "./assets/sprite.svg"), __webpack_require__.b);
var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
var ___CSS_LOADER_URL_REPLACEMENT_0___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_0___);
// Module
___CSS_LOADER_EXPORT___.push([module.id, "body {\n  margin: 0;\n}\n.x-spreadsheet {\n  font-size: 13px;\n  line-height: normal;\n  user-select: none;\n  -moz-user-select: none;\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  box-sizing: content-box;\n  background: #fff;\n  -webkit-font-smoothing: antialiased;\n}\n.x-spreadsheet textarea {\n  font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n}\n.x-spreadsheet-sheet {\n  position: relative;\n  overflow: hidden;\n}\n.x-spreadsheet-table {\n  vertical-align: bottom;\n}\n.x-spreadsheet-tooltip {\n  font-family: inherit;\n  position: absolute;\n  padding: 5px 10px;\n  color: #fff;\n  border-radius: 1px;\n  background: #000000;\n  font-size: 12px;\n  z-index: 201;\n}\n.x-spreadsheet-tooltip:before {\n  pointer-events: none;\n  position: absolute;\n  left: calc(50% - 4px);\n  top: -4px;\n  content: '';\n  width: 8px;\n  height: 8px;\n  background: inherit;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n  z-index: 1;\n  box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.3);\n}\n.x-spreadsheet-color-palette {\n  padding: 5px;\n}\n.x-spreadsheet-color-palette table {\n  margin: 0;\n  padding: 0;\n  border-collapse: separate;\n  border-spacing: 2;\n  background: #fff;\n}\n.x-spreadsheet-color-palette table td {\n  margin: 0;\n  cursor: pointer;\n  border: 1px solid transparent;\n}\n.x-spreadsheet-color-palette table td:hover {\n  border-color: #ddd;\n}\n.x-spreadsheet-color-palette table td .x-spreadsheet-color-palette-cell {\n  width: 16px;\n  height: 16px;\n}\n.x-spreadsheet-border-palette {\n  padding: 6px;\n}\n.x-spreadsheet-border-palette table {\n  margin: 0;\n  padding: 0;\n  border-collapse: separate;\n  border-spacing: 0;\n  background: #fff;\n  table-layout: fixed;\n}\n.x-spreadsheet-border-palette table td {\n  margin: 0;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left {\n  border-right: 1px solid #eee;\n  padding-right: 6px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell {\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  text-align: center;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell .x-spreadsheet-icon-img {\n  opacity: 0.8;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell:hover {\n  background-color: #eee;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right {\n  padding-left: 6px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right .x-spreadsheet-toolbar-btn {\n  margin-top: 0;\n  margin-bottom: 3px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right .x-spreadsheet-line-type {\n  position: relative;\n  left: 0;\n  top: -3px;\n}\n.x-spreadsheet-dropdown {\n  position: relative;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-content {\n  position: absolute;\n  z-index: 200;\n  background: #fff;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n}\n.x-spreadsheet-dropdown.bottom-left .x-spreadsheet-dropdown-content {\n  top: calc(100% + 5px);\n  left: 0;\n}\n.x-spreadsheet-dropdown.bottom-right .x-spreadsheet-dropdown-content {\n  top: calc(100% + 5px);\n  right: 0;\n}\n.x-spreadsheet-dropdown.top-left .x-spreadsheet-dropdown-content {\n  bottom: calc(100% + 5px);\n  left: 0;\n}\n.x-spreadsheet-dropdown.top-right .x-spreadsheet-dropdown-content {\n  bottom: calc(100% + 5px);\n  right: 0;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-title {\n  padding: 0 5px;\n  display: inline-block;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-left {\n  margin-left: 4px;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-right {\n  width: 10px;\n  margin-right: 4px;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-right .arrow-down {\n  left: -130px;\n}\n/* resizer **/\n.x-spreadsheet-resizer {\n  position: absolute;\n  z-index: 11;\n}\n.x-spreadsheet-resizer .x-spreadsheet-resizer-hover {\n  background-color: rgba(75, 137, 255, 0.25);\n}\n.x-spreadsheet-resizer .x-spreadsheet-resizer-line {\n  position: absolute;\n}\n.x-spreadsheet-resizer.horizontal {\n  cursor: row-resize;\n}\n.x-spreadsheet-resizer.horizontal .x-spreadsheet-resizer-line {\n  border-bottom: 2px dashed #4b89ff;\n  left: 0;\n  bottom: 0;\n}\n.x-spreadsheet-resizer.vertical {\n  cursor: col-resize;\n}\n.x-spreadsheet-resizer.vertical .x-spreadsheet-resizer-line {\n  border-right: 2px dashed #4b89ff;\n  top: 0;\n  right: 0;\n}\n/* scrollbar */\n.x-spreadsheet-scrollbar {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #f4f5f8;\n  opacity: 0.9;\n  z-index: 12;\n}\n.x-spreadsheet-scrollbar.horizontal {\n  right: 15px;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n.x-spreadsheet-scrollbar.horizontal > div {\n  height: 1px;\n  background: #ddd;\n}\n.x-spreadsheet-scrollbar.vertical {\n  bottom: 15px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.x-spreadsheet-scrollbar.vertical > div {\n  width: 1px;\n  background: #ddd;\n}\n/* @{css-prefix}-overlayer */\n.x-spreadsheet-overlayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 10;\n}\n.x-spreadsheet-overlayer .x-spreadsheet-overlayer-content {\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n}\n.x-spreadsheet-editor,\n.x-spreadsheet-selector {\n  box-sizing: content-box;\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n/* @{css-prefix}-selector */\n.x-spreadsheet-selector .hide-input {\n  position: absolute;\n  z-index: 0;\n}\n.x-spreadsheet-selector .hide-input input {\n  padding: 0;\n  width: 0;\n  border: none !important;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-area {\n  position: absolute;\n  border: 2px solid #4b89ff;\n  background: rgba(75, 137, 255, 0.1);\n  z-index: 5;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-clipboard,\n.x-spreadsheet-selector .x-spreadsheet-selector-autofill {\n  position: absolute;\n  background: transparent;\n  z-index: 100;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-clipboard {\n  border: 2px dashed #4b89ff;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-autofill {\n  border: 1px dashed rgba(0, 0, 0, 0.45);\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-corner {\n  pointer-events: auto;\n  position: absolute;\n  cursor: crosshair;\n  font-size: 0;\n  height: 5px;\n  width: 5px;\n  right: -5px;\n  bottom: -5px;\n  border: 2px solid #ffffff;\n  background: #4b89ff;\n}\n.x-spreadsheet-editor {\n  z-index: 20;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area {\n  position: absolute;\n  text-align: left;\n  border: 2px solid #4b89ff;\n  line-height: 0;\n  z-index: 100;\n  pointer-events: auto;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area textarea {\n  box-sizing: content-box;\n  border: none;\n  padding: 0 3px;\n  outline: none;\n  resize: none;\n  text-align: start;\n  overflow-y: hidden;\n  font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n  color: inherit;\n  white-space: normal;\n  word-wrap: break-word;\n  line-height: 22px;\n  margin: 0;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area .textline {\n  overflow: hidden;\n  visibility: hidden;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n.x-spreadsheet-item {\n  user-select: none;\n  background: 0;\n  border: 1px solid transparent;\n  outline: none;\n  height: 26px;\n  color: rgba(0, 0, 0, 0.9);\n  line-height: 26px;\n  list-style: none;\n  padding: 2px 10px;\n  cursor: default;\n  text-align: left;\n  overflow: hidden;\n}\n.x-spreadsheet-item.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-item:hover,\n.x-spreadsheet-item.active {\n  background: rgba(0, 0, 0, 0.05);\n}\n.x-spreadsheet-item.divider {\n  height: 0;\n  padding: 0;\n  margin: 5px 0;\n  border: none;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.x-spreadsheet-item .label {\n  float: right;\n  opacity: 0.65;\n  font-size: 1em;\n}\n.x-spreadsheet-item.state,\n.x-spreadsheet-header.state {\n  padding-left: 35px !important;\n  position: relative;\n}\n.x-spreadsheet-item.state:before,\n.x-spreadsheet-header.state:before {\n  content: '';\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 12px;\n  top: calc(50% - 5px);\n  background: rgba(0, 0, 0, 0.08);\n  border-radius: 2px;\n}\n.x-spreadsheet-item.state.checked:before,\n.x-spreadsheet-header.state.checked:before {\n  background: #4b89ff;\n}\n.x-spreadsheet-checkbox {\n  position: relative;\n  display: inline-block;\n  backface-visibility: hidden;\n  outline: 0;\n  vertical-align: baseline;\n  font-style: normal;\n  font-size: 1rem;\n  line-height: 1em;\n}\n.x-spreadsheet-checkbox > input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0 !important;\n  outline: 0;\n  z-index: -1;\n}\n.x-spreadsheet-suggest,\n.x-spreadsheet-contextmenu,\n.x-spreadsheet-sort-filter {\n  position: absolute;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n  background: #fff;\n  z-index: 100;\n  width: 260px;\n  pointer-events: auto;\n  overflow: auto;\n}\n.x-spreadsheet-suggest {\n  width: 200px;\n}\n.x-spreadsheet-filter {\n  border: 1px solid #e9e9e9;\n  font-size: 12px;\n  margin: 10px;\n}\n.x-spreadsheet-filter .x-spreadsheet-header {\n  padding: 0.5em 0.75em;\n  background: #f8f8f9;\n  border-bottom: 1px solid #e9e9e9;\n  border-left: 1px solid transparent;\n}\n.x-spreadsheet-filter .x-spreadsheet-body {\n  height: 200px;\n  overflow-y: auto;\n}\n.x-spreadsheet-filter .x-spreadsheet-body .x-spreadsheet-item {\n  height: 20px;\n  line-height: 20px;\n}\n.x-spreadsheet-sort-filter .x-spreadsheet-buttons {\n  margin: 10px;\n}\n.x-spreadsheet-toolbar,\n.x-spreadsheet-bottombar {\n  height: 40px;\n  padding: 0 30px;\n  text-align: left;\n  background: #f5f6f7;\n  display: flex;\n}\n.x-spreadsheet-bottombar {\n  position: relative;\n  border-top: 1px solid #e0e2e4;\n}\n.x-spreadsheet-bottombar .x-spreadsheet-menu > li {\n  line-height: 40px;\n  height: 40px;\n  padding-top: 0;\n  padding-bottom: 0;\n  vertical-align: middle;\n  border-right: 1px solid #e8eaed;\n}\n.x-spreadsheet-menu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n}\n.x-spreadsheet-menu > li {\n  float: left;\n  line-height: 1.25em;\n  padding: 0.785em 1em;\n  margin: 0;\n  vertical-align: middle;\n  text-align: left;\n  font-weight: 400;\n  color: #80868b;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-weight: bold;\n}\n.x-spreadsheet-menu > li.active {\n  background-color: #fff;\n  color: rgba(0, 0, 0, 0.65);\n}\n.x-spreadsheet-menu > li .x-spreadsheet-icon {\n  margin: 0 6px;\n}\n.x-spreadsheet-menu > li .x-spreadsheet-icon .x-spreadsheet-icon-img:hover {\n  opacity: 0.85;\n}\n.x-spreadsheet-menu > li .x-spreadsheet-dropdown {\n  display: inline-block;\n}\n.x-spreadsheet-toolbar {\n  border-bottom: 1px solid #e0e2e4;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btns {\n  display: inline-flex;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-more {\n  padding: 0 6px 6px;\n  text-align: left;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-more .x-spreadsheet-toolbar-divider {\n  margin-top: 0;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn {\n  flex: 0 0 auto;\n  display: inline-block;\n  border: 1px solid transparent;\n  height: 26px;\n  line-height: 26px;\n  min-width: 26px;\n  margin: 6px 1px 0;\n  padding: 0;\n  text-align: center;\n  border-radius: 2px;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn:hover,\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn.active {\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-toolbar-divider {\n  display: inline-block;\n  border-right: 1px solid #e0e2e4;\n  width: 0;\n  vertical-align: middle;\n  height: 18px;\n  margin: 12px 3px 0;\n}\n.x-spreadsheet-print {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.x-spreadsheet-print-bar {\n  background: #424242;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 30px;\n}\n.x-spreadsheet-print-bar .-title {\n  color: #fff;\n  font-weight: bold;\n  font-size: 1.2em;\n  float: left;\n}\n.x-spreadsheet-print-bar .-right {\n  float: right;\n  margin-top: 12px;\n}\n.x-spreadsheet-print-content {\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  background: #d0d0d0;\n  height: calc(100% - 60px);\n}\n.x-spreadsheet-print-content .-sider {\n  flex: 0 0 300px;\n  width: 300px;\n  border-left: 2px solid #ccc;\n  background: #fff;\n}\n.x-spreadsheet-print-content .-content {\n  flex: auto;\n  overflow-x: auto;\n  overflow-y: scroll;\n  height: 100%;\n}\n.x-spreadsheet-canvas-card-wraper {\n  margin: 40px 20px;\n}\n.x-spreadsheet-canvas-card {\n  background: #fff;\n  margin: auto;\n  page-break-before: auto;\n  page-break-after: always;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 3px rgba(0, 0, 0, 0.12), 0 4px 5px 0 rgba(0, 0, 0, 0.2);\n}\n.x-spreadsheet-calendar {\n  color: rgba(0, 0, 0, 0.65);\n  background: #ffffff;\n  user-select: none;\n}\n.x-spreadsheet-calendar .calendar-header {\n  font-weight: 700;\n  line-height: 30px;\n  text-align: center;\n  width: 100%;\n  float: left;\n  background: #f9fafb;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-left {\n  padding-left: 5px;\n  float: left;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right {\n  float: right;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right a {\n  padding: 3px 0;\n  margin-right: 2px;\n  border-radius: 2px;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right a:hover {\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-calendar .calendar-body {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n.x-spreadsheet-calendar .calendar-body th,\n.x-spreadsheet-calendar .calendar-body td {\n  width: 14.28571429%;\n  min-width: 32px;\n  text-align: center;\n  font-weight: 700;\n  line-height: 30px;\n  padding: 0;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell:hover {\n  background: #ecf6fd;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell.active,\n.x-spreadsheet-calendar .calendar-body td > .cell.active:hover {\n  background: #ecf6fd;\n  color: #2185d0;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-datepicker {\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\n  position: absolute;\n  left: 0;\n  top: calc(100% + 5px);\n  z-index: 10;\n  width: auto;\n}\n.x-spreadsheet-buttons {\n  display: flex;\n  justify-content: flex-end;\n}\n.x-spreadsheet-buttons .x-spreadsheet-button {\n  margin-left: 8px;\n}\n.x-spreadsheet-button {\n  display: inline-block;\n  border-radius: 3px;\n  line-height: 1em;\n  min-height: 1em;\n  white-space: nowrap;\n  text-align: center;\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: 700;\n  padding: 0.75em 1em;\n  color: rgba(0, 0, 0, 0.6);\n  background: #e0e1e2;\n  text-decoration: none;\n  font-family: 'Lato', 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;\n  outline: none;\n  vertical-align: baseline;\n  zoom: 1;\n  user-select: none;\n  transition: all 0.1s linear;\n}\n.x-spreadsheet-button.active,\n.x-spreadsheet-button:hover {\n  background-color: #c0c1c2;\n  color: rgba(0, 0, 0, 0.8);\n}\n.x-spreadsheet-button.primary {\n  color: #fff;\n  background-color: #2185d0;\n}\n.x-spreadsheet-button.primary:hover,\n.x-spreadsheet-button.primary.active {\n  color: #fff;\n  background-color: #1678c2;\n}\n.x-spreadsheet-form-input {\n  font-size: 1em;\n  position: relative;\n  font-weight: 400;\n  display: inline-flex;\n  color: rgba(0, 0, 0, 0.87);\n}\n.x-spreadsheet-form-input input {\n  z-index: 1;\n  margin: 0;\n  max-width: 100%;\n  flex: 1 0 auto;\n  outline: 0;\n  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n  text-align: left;\n  line-height: 30px;\n  height: 30px;\n  padding: 0 8px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 3px;\n  transition: box-shadow 0.1s ease, border-color 0.1s ease;\n  box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n}\n.x-spreadsheet-form-input input:focus {\n  border-color: #4b89ff;\n  box-shadow: inset 0 1px 2px rgba(75, 137, 255, 0.2);\n}\n.x-spreadsheet-form-select {\n  position: relative;\n  display: inline-block;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 2px;\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.87);\n  user-select: none;\n  box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n}\n.x-spreadsheet-form-select .input-text {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  min-width: 60px;\n  width: auto;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 8px;\n}\n.x-spreadsheet-form-fields {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.x-spreadsheet-form-fields .x-spreadsheet-form-field {\n  flex: 0 1 auto;\n}\n.x-spreadsheet-form-fields .x-spreadsheet-form-field .label {\n  display: inline-block;\n  margin: 0 10px 0 0;\n}\n.x-spreadsheet-form-field {\n  display: block;\n  vertical-align: middle;\n  margin-left: 10px;\n  margin-bottom: 10px;\n}\n.x-spreadsheet-form-field:first-child {\n  margin-left: 0;\n}\n.x-spreadsheet-form-field.error .x-spreadsheet-form-select,\n.x-spreadsheet-form-field.error input {\n  border-color: #f04134;\n}\n.x-spreadsheet-form-field .tip {\n  color: #f04134;\n  font-size: 0.9em;\n}\n.x-spreadsheet-dimmer {\n  display: none;\n  position: absolute;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 0;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation-duration: 0.5s;\n  animation-duration: 0.5s;\n  transition: background-color 0.5s linear;\n  user-select: none;\n  z-index: 1000;\n}\n.x-spreadsheet-dimmer.active {\n  display: block;\n  opacity: 1;\n}\nform fieldset {\n  border: none;\n}\nform fieldset label {\n  display: block;\n  margin-bottom: 0.5em;\n  font-size: 1em;\n  color: #666;\n}\nform fieldset select {\n  font-size: 1.1em;\n  width: 100%;\n  background-color: #fff;\n  border: none;\n  border-bottom: 2px solid #ddd;\n  padding: 0.5em 0.85em;\n  border-radius: 2px;\n}\n.x-spreadsheet-modal,\n.x-spreadsheet-toast {\n  font-size: 13px;\n  position: fixed;\n  z-index: 1001;\n  text-align: left;\n  line-height: 1.25em;\n  min-width: 360px;\n  color: rgba(0, 0, 0, 0.87);\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  border-radius: 4px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n  background-clip: padding-box;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 8px;\n}\n.x-spreadsheet-toast {\n  background-color: rgba(255, 255, 255, 0.85);\n}\n.x-spreadsheet-modal-header,\n.x-spreadsheet-toast-header {\n  font-weight: 600;\n  background-clip: padding-box;\n  background-color: rgba(255, 255, 255, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 4px 4px 0 0;\n}\n.x-spreadsheet-modal-header .x-spreadsheet-icon,\n.x-spreadsheet-toast-header .x-spreadsheet-icon {\n  position: absolute;\n  right: 0.8em;\n  top: 0.65em;\n  border-radius: 18px;\n}\n.x-spreadsheet-modal-header .x-spreadsheet-icon:hover,\n.x-spreadsheet-toast-header .x-spreadsheet-icon:hover {\n  opacity: 1;\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-toast-header {\n  color: #f2711c;\n}\n.x-spreadsheet-modal-header {\n  border-bottom: 1px solid #e0e2e4;\n  background: rgba(0, 0, 0, 0.08);\n  font-size: 1.0785em;\n}\n.x-spreadsheet-modal-header,\n.x-spreadsheet-modal-content,\n.x-spreadsheet-toast-header,\n.x-spreadsheet-toast-content {\n  padding: 0.75em 1em;\n}\n@media screen and (min-width: 320px) and (max-width: 480px) {\n  .x-spreadsheet-toolbar {\n    display: none;\n  }\n}\n.x-spreadsheet-icon {\n  width: 18px;\n  height: 18px;\n  margin: 1px 1px 2px 1px;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  line-height: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img {\n  background-image: url(" + ___CSS_LOADER_URL_REPLACEMENT_0___ + ");\n  position: absolute;\n  width: 262px;\n  height: 444px;\n  opacity: 0.56;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.undo {\n  left: 0;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.redo {\n  left: -18px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.print {\n  left: -36px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.paintformat {\n  left: -54px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.clearformat {\n  left: -72px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.font-bold {\n  left: -90px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.font-italic {\n  left: -108px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.underline {\n  left: -126px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.strike {\n  left: -144px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.color {\n  left: -162px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.bgcolor {\n  left: -180px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.merge {\n  left: -198px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-left {\n  left: -216px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-center {\n  left: -234px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-right {\n  left: 0;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-top {\n  left: -18px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-middle {\n  left: -36px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-bottom {\n  left: -54px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.textwrap {\n  left: -72px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.autofilter {\n  left: -90px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.formula {\n  left: -108px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.arrow-down {\n  left: -126px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.arrow-right {\n  left: -144px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.link {\n  left: -162px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chart {\n  left: -180px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.freeze {\n  left: -198px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.ellipsis {\n  left: -216px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.add {\n  left: -234px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-all {\n  left: 0;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-inside {\n  left: -18px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-horizontal {\n  left: -36px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-vertical {\n  left: -54px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-outside {\n  left: -72px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-left {\n  left: -90px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-top {\n  left: -108px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-right {\n  left: -126px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-bottom {\n  left: -144px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-none {\n  left: -162px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.line-color {\n  left: -180px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.line-type {\n  left: -198px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.close {\n  left: -234px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-down {\n  left: 0;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-up {\n  left: -18px;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-left {\n  left: -36px;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-right {\n  left: -54px;\n  top: -54px;\n}\n", "",{"version":3,"sources":["webpack://./src/index.less"],"names":[],"mappings":"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EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,OAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,YAAA;EACA,UAAA;AAlNN;AAoNI;EACE,OAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN;AAoNI;EACE,WAAA;EACA,UAAA;AAlNN","sourcesContent":["@css-prefix: x-spreadsheet;\n// color\n@red-color: #db2828;\n@red-hover-color: #d01919;\n@orange-color: #f2711c;\n@orange-hover-color: #f26202;\n@yellow-color: #fbbd08;\n@yellow-hover-color: #eaae00;\n@olive-color: #b5cc18;\n@olive-hover-color: #a7bd0d;\n@green-color: #21ba45;\n@green-hover-color: #16ab39;\n@teal-color: #00b5ad;\n@teal-hover-color: #009c95;\n@blue-color: #2185d0;\n@blue-hover-color: #1678c2;\n@violet-color: #6435c9;\n@violet-hover-color: #5829bb;\n@purple-color: #a333c8;\n@purple-hover-color: #9627ba;\n@pink-color: #e03997;\n@pink-hover-color: #e61a8d;\n@brown-color: #a5673f;\n@brown-hover-color: #975b33;\n@grey-color: #767676;\n@grey-hover-color: #838383;\n@dark-color: #343a40;\n@dark-hover-color: darken(@dark-color, 10%);\n@black-color: #1b1c1d;\n@black-hover-color: #27292a;\n\n// base\n@border-style: 1px solid #e0e2e4;\n@icon-size: 18px;\n@line-height: 1.25em;\n@border-color: #e9e9e9;\n@border: 1px solid @border-color;\n@input-border: @border;\n@input-padding: 0.5em 0.75em;\n@input-box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n@border-radius: 2px;\n@form-field-height: 30px;\n@primary-color: @blue-color;\n@primary-hover-color: @blue-hover-color;\n\n// method\n.type-primary() {\n  color: #fff;\n  background-color: @primary-color;\n  &:hover,\n  &.active {\n    color: #fff;\n    background-color: @primary-hover-color;\n  }\n}\n\nbody {\n  margin: 0;\n}\n\n.@{css-prefix} {\n  font-size: 13px;\n  line-height: normal;\n  user-select: none;\n  -moz-user-select: none;\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  box-sizing: content-box;\n  background: #fff;\n  -webkit-font-smoothing: antialiased;\n\n  textarea {\n    font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica,\n      sans-serif;\n  }\n}\n\n.@{css-prefix}-sheet {\n  position: relative;\n  overflow: hidden;\n}\n\n.@{css-prefix}-table {\n  // html5 bottom margin bug\n  vertical-align: bottom;\n}\n\n.@{css-prefix}-tooltip {\n  font-family: inherit;\n  position: absolute;\n  padding: 5px 10px;\n  color: #fff;\n  border-radius: 1px;\n  background: rgba(0, 0, 0, 1);\n  font-size: 12px;\n  z-index: 201;\n\n  &:before {\n    pointer-events: none;\n    position: absolute;\n    left: calc(50% - 4px);\n    top: -4px;\n    content: '';\n    width: 8px;\n    height: 8px;\n    background: inherit;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    z-index: 1;\n    box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.3);\n  }\n}\n\n.@{css-prefix}-color-palette {\n  padding: 5px;\n\n  table {\n    margin: 0;\n    padding: 0;\n    border-collapse: separate;\n    border-spacing: 2;\n    background: #fff;\n\n    td {\n      margin: 0;\n      cursor: pointer;\n      border: 1px solid transparent;\n\n      &:hover {\n        border-color: #ddd;\n      }\n\n      .@{css-prefix}-color-palette-cell {\n        width: 16px;\n        height: 16px;\n      }\n    }\n  }\n}\n\n.@{css-prefix}-border-palette {\n  padding: 6px;\n\n  table {\n    margin: 0;\n    padding: 0;\n    border-collapse: separate;\n    border-spacing: 0;\n    background: #fff;\n    table-layout: fixed;\n\n    td {\n      margin: 0;\n    }\n  }\n\n  .@{css-prefix}-border-palette-left {\n    border-right: 1px solid #eee;\n    padding-right: 6px;\n\n    .@{css-prefix}-border-palette-cell {\n      width: 30px;\n      height: 30px;\n      cursor: pointer;\n      text-align: center;\n\n      .@{css-prefix}-icon-img {\n        opacity: 0.8;\n      }\n\n      &:hover {\n        background-color: #eee;\n      }\n    }\n  }\n\n  .@{css-prefix}-border-palette-right {\n    padding-left: 6px;\n\n    .@{css-prefix}-toolbar-btn {\n      margin-top: 0;\n      margin-bottom: 3px;\n    }\n\n    .@{css-prefix}-line-type {\n      position: relative;\n      left: 0;\n      top: -3px;\n    }\n  }\n}\n\n.@{css-prefix}-dropdown {\n  position: relative;\n\n  .@{css-prefix}-dropdown-content {\n    position: absolute;\n    z-index: 200;\n    background: #fff;\n    box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n  }\n\n  &.bottom-left {\n    .@{css-prefix}-dropdown-content {\n      top: calc(~'100% + 5px');\n      left: 0;\n    }\n  }\n\n  &.bottom-right {\n    .@{css-prefix}-dropdown-content {\n      top: calc(~'100% + 5px');\n      right: 0;\n    }\n  }\n\n  &.top-left {\n    .@{css-prefix}-dropdown-content {\n      bottom: calc(~'100% + 5px');\n      left: 0;\n    }\n  }\n\n  &.top-right {\n    .@{css-prefix}-dropdown-content {\n      bottom: calc(~'100% + 5px');\n      right: 0;\n    }\n  }\n\n  .@{css-prefix}-dropdown-title {\n    padding: 0 5px;\n    display: inline-block;\n  }\n\n  .@{css-prefix}-dropdown-header {\n    .@{css-prefix}-icon.arrow-left {\n      margin-left: 4px;\n    }\n    .@{css-prefix}-icon.arrow-right {\n      width: 10px;\n      margin-right: 4px;\n      .arrow-down {\n        left: -130px;\n      }\n    }\n  }\n}\n/* resizer **/\n.@{css-prefix}-resizer {\n  position: absolute;\n  z-index: 11;\n\n  .@{css-prefix}-resizer-hover {\n    background-color: rgba(75, 137, 255, 0.25);\n  }\n  .@{css-prefix}-resizer-line {\n    position: absolute;\n  }\n\n  &.horizontal {\n    cursor: row-resize;\n    .@{css-prefix}-resizer-line {\n      border-bottom: 2px dashed rgb(75, 137, 255);\n      left: 0;\n      bottom: 0;\n    }\n  }\n  &.vertical {\n    cursor: col-resize;\n    .@{css-prefix}-resizer-line {\n      border-right: 2px dashed rgb(75, 137, 255);\n      top: 0;\n      right: 0;\n    }\n  }\n}\n/* scrollbar */\n.@{css-prefix}-scrollbar {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #f4f5f8;\n  opacity: 0.9;\n  z-index: 12;\n  &.horizontal {\n    right: 15px;\n    overflow-x: scroll;\n    overflow-y: hidden;\n    > div {\n      height: 1px;\n      background: #ddd;\n    }\n  }\n  &.vertical {\n    bottom: 15px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    > div {\n      width: 1px;\n      background: #ddd;\n    }\n  }\n  &:hover {\n    // opacity: .85;\n  }\n}\n\n/* @{css-prefix}-overlayer */\n.@{css-prefix}-overlayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 10;\n  .@{css-prefix}-overlayer-content {\n    position: absolute;\n    overflow: hidden;\n    pointer-events: none;\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.@{css-prefix}-editor,\n.@{css-prefix}-selector {\n  box-sizing: content-box;\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n/* @{css-prefix}-selector */\n.@{css-prefix}-selector {\n  .hide-input {\n    position: absolute;\n    z-index: 0;\n    input {\n      padding: 0;\n      width: 0;\n      border: none !important;\n    }\n  }\n  .@{css-prefix}-selector-area {\n    position: absolute;\n    border: 2px solid rgb(75, 137, 255);\n    background: rgba(75, 137, 255, 0.1);\n    z-index: 5;\n  }\n  .@{css-prefix}-selector-clipboard,\n  .@{css-prefix}-selector-autofill {\n    position: absolute;\n    background: transparent;\n    z-index: 100;\n  }\n  .@{css-prefix}-selector-clipboard {\n    border: 2px dashed rgb(75, 137, 255);\n  }\n  .@{css-prefix}-selector-autofill {\n    border: 1px dashed rgba(0, 0, 0, 0.45); // #606060; // rgba(0, 0, 0, .2);\n  }\n  .@{css-prefix}-selector-corner {\n    pointer-events: auto;\n    position: absolute;\n    cursor: crosshair;\n    font-size: 0;\n    height: 5px;\n    width: 5px;\n    right: -5px;\n    bottom: -5px;\n    border: 2px solid rgb(255, 255, 255);\n    background: rgb(75, 137, 255);\n  }\n}\n.@{css-prefix}-editor {\n  z-index: 20;\n  .@{css-prefix}-editor-area {\n    position: absolute;\n    text-align: left;\n    border: 2px solid rgb(75, 137, 255);\n    line-height: 0;\n    z-index: 100;\n    pointer-events: auto;\n\n    textarea {\n      box-sizing: content-box;\n      border: none;\n      padding: 0 3px;\n      outline: none;\n      resize: none;\n      text-align: start;\n      overflow-y: hidden;\n      font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica,\n        sans-serif;\n      color: inherit;\n      white-space: normal;\n      word-wrap: break-word;\n      line-height: 22px;\n      margin: 0;\n    }\n\n    .textline {\n      overflow: hidden;\n      visibility: hidden;\n      position: fixed;\n      top: 0;\n      left: 0;\n    }\n  }\n}\n\n.@{css-prefix}-item {\n  user-select: none;\n  background: 0;\n  border: 1px solid transparent;\n  outline: none;\n  height: 26px;\n  color: rgba(0, 0, 0, 0.9);\n  line-height: 26px;\n  list-style: none;\n  padding: 2px 10px;\n  cursor: default;\n  text-align: left;\n  overflow: hidden;\n\n  &.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n\n  &:hover,\n  &.active {\n    background: rgba(0, 0, 0, 0.05);\n  }\n\n  // &.active {\n  ////   background: #89aef53d;\n  // }\n\n  &.divider {\n    height: 0;\n    padding: 0;\n    margin: 5px 0;\n    border: none;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  }\n\n  .label {\n    float: right;\n    opacity: 0.65;\n    font-size: 1em;\n  }\n}\n\n.x-spreadsheet-item,\n.x-spreadsheet-header {\n  &.state {\n    padding-left: 35px !important;\n    position: relative;\n\n    &:before {\n      content: '';\n      position: absolute;\n      width: 10px;\n      height: 10px;\n      left: 12px;\n      top: calc(50% - 5px);\n      background: rgba(0, 0, 0, 0.08);\n      // border: 1px solid rgba(0, 0, 0, 0.1);\n      border-radius: 2px;\n    }\n  }\n  &.state.checked:before {\n    background: #4b89ff;\n    // content: '';\n    // position: absolute;\n    // width: 5px;\n    // height: 12px;\n    // color: #4b89ff; // #353A41;\n    // border-left: none;\n    // border-top: none;\n    // border-bottom: 2px solid;\n    // border-right: 2px solid;\n    // left: 15px;\n    // top: 6px;\n    // background: none;\n    // border-radius: 0;\n    // transform-origin: center;\n    // transform: rotate(45deg);\n    // -webkit-transform: rotate(45deg);\n  }\n}\n\n.@{css-prefix}-checkbox {\n  position: relative;\n  display: inline-block;\n  backface-visibility: hidden;\n  outline: 0;\n  vertical-align: baseline;\n  font-style: normal;\n  font-size: 1rem;\n  line-height: 1em;\n  > input {\n    position: absolute;\n    top: 0;\n    left: 0;\n    opacity: 0 !important;\n    outline: 0;\n    z-index: -1;\n  }\n}\n\n.@{css-prefix}-suggest,\n.@{css-prefix}-contextmenu,\n.@{css-prefix}-sort-filter {\n  position: absolute;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n  background: #fff;\n  z-index: 100;\n  width: 260px;\n  pointer-events: auto;\n  overflow: auto;\n}\n\n.@{css-prefix}-suggest {\n  width: 200px;\n}\n\n.@{css-prefix}-filter {\n  border: 1px solid #e9e9e9;\n  font-size: 12px;\n  margin: 10px;\n\n  .@{css-prefix}-header {\n    padding: 0.5em 0.75em;\n    background: #f8f8f9;\n    border-bottom: 1px solid #e9e9e9;\n    border-left: 1px solid transparent;\n  }\n  .@{css-prefix}-body {\n    height: 200px;\n    overflow-y: auto;\n\n    .@{css-prefix}-item {\n      height: 20px;\n      line-height: 20px;\n    }\n  }\n}\n\n.@{css-prefix}-sort-filter {\n  .@{css-prefix}-buttons {\n    margin: 10px;\n  }\n}\n\n.@{css-prefix}-toolbar,\n.@{css-prefix}-bottombar {\n  height: 40px;\n  padding: 0 30px;\n  text-align: left;\n  background: #f5f6f7;\n  display: flex;\n}\n\n.@{css-prefix}-bottombar {\n  position: relative;\n  border-top: 1px solid #e0e2e4;\n\n  .@{css-prefix}-menu > li {\n    line-height: 40px;\n    height: 40px;\n    padding-top: 0;\n    padding-bottom: 0;\n    vertical-align: middle;\n    border-right: 1px solid #e8eaed;\n  }\n}\n\n.@{css-prefix}-menu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n}\n.@{css-prefix}-menu > li {\n  float: left;\n  line-height: 1.25em;\n  padding: 0.785em 1em;\n  margin: 0;\n  vertical-align: middle;\n  text-align: left;\n  font-weight: 400;\n  color: #80868b;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-weight: bold;\n\n  &.active {\n    background-color: #fff;\n    color: rgba(0, 0, 0, 0.65);\n  }\n\n  .@{css-prefix}-icon {\n    margin: 0 6px;\n\n    .@{css-prefix}-icon-img {\n      &:hover {\n        opacity: 0.85;\n      }\n    }\n  }\n\n  .@{css-prefix}-dropdown {\n    display: inline-block;\n  }\n}\n\n.@{css-prefix}-toolbar {\n  border-bottom: 1px solid #e0e2e4;\n\n  .@{css-prefix}-toolbar-btns {\n    display: inline-flex;\n  }\n\n  .@{css-prefix}-toolbar-more {\n    padding: 0 6px 6px;\n    text-align: left;\n    .@{css-prefix}-toolbar-divider {\n      margin-top: 0;\n    }\n  }\n\n  .@{css-prefix}-toolbar-btn {\n    flex: 0 0 auto;\n    display: inline-block;\n    border: 1px solid transparent;\n    height: 26px;\n    line-height: 26px;\n    min-width: 26px;\n    margin: 6px 1px 0;\n    padding: 0;\n    text-align: center;\n    border-radius: 2px;\n\n    &.disabled {\n      pointer-events: none;\n      opacity: 0.5;\n    }\n\n    &:hover,\n    &.active {\n      background: rgba(0, 0, 0, 0.08);\n    }\n  }\n}\n\n.@{css-prefix}-toolbar-divider {\n  display: inline-block;\n  border-right: 1px solid #e0e2e4;\n  width: 0;\n  vertical-align: middle;\n  height: 18px;\n  margin: 12px 3px 0;\n}\n\n.@{css-prefix}-print {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.@{css-prefix}-print-bar {\n  background: #424242;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 30px;\n\n  .-title {\n    color: #fff;\n    font-weight: bold;\n    font-size: 1.2em;\n    float: left;\n  }\n\n  .-right {\n    float: right;\n    margin-top: 12px;\n  }\n}\n.@{css-prefix}-print-content {\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  background: #d0d0d0;\n  height: calc(100% - 60px);\n\n  .-sider {\n    flex: 0 0 300px;\n    width: 300px;\n    border-left: 2px solid #ccc;\n    background: #fff;\n  }\n\n  .-content {\n    flex: auto;\n    overflow-x: auto;\n    overflow-y: scroll;\n    height: 100%;\n  }\n}\n\n.@{css-prefix}-canvas-card-wraper {\n  margin: 40px 20px;\n}\n.@{css-prefix}-canvas-card {\n  background: #fff;\n  margin: auto;\n  page-break-before: auto;\n  page-break-after: always;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),\n    0 3px 14px 3px rgba(0, 0, 0, 0.12), 0 4px 5px 0 rgba(0, 0, 0, 0.2);\n}\n\n.@{css-prefix}-calendar {\n  color: rgba(0, 0, 0, 0.65);\n  background: #ffffff;\n  user-select: none;\n\n  .calendar-header {\n    font-weight: 700;\n    line-height: 30px;\n    text-align: center;\n    width: 100%;\n    float: left;\n    background: #f9fafb;\n\n    .calendar-header-left {\n      padding-left: 5px;\n      float: left;\n    }\n\n    .calendar-header-right {\n      float: right;\n\n      a {\n        padding: 3px 0;\n        margin-right: 2px;\n        border-radius: 2px;\n      }\n      a:hover {\n        background: rgba(0, 0, 0, 0.08);\n      }\n    }\n  }\n\n  .calendar-body {\n    border-collapse: collapse;\n    border-spacing: 0;\n\n    th,\n    td {\n      width: 100%/7;\n      min-width: 32px;\n      text-align: center;\n      font-weight: 700;\n      line-height: 30px;\n      padding: 0;\n    }\n\n    td > .cell {\n      // border: 1px solid rgba(0,0,0,.05);\n\n      &:hover {\n        background: #ecf6fd;\n      }\n\n      &.active,\n      &.active:hover {\n        background: #ecf6fd;\n        color: #2185d0;\n      }\n\n      &.disabled {\n        pointer-events: none;\n        opacity: 0.5;\n      }\n    }\n  }\n}\n\n.@{css-prefix}-datepicker {\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\n  position: absolute;\n  left: 0;\n  top: calc(100% + 5px);\n  z-index: 10;\n  width: auto;\n}\n\n.@{css-prefix}-buttons {\n  display: flex;\n  justify-content: flex-end;\n\n  .@{css-prefix}-button {\n    margin-left: 8px;\n  }\n}\n.@{css-prefix}-button {\n  display: inline-block;\n  border-radius: 3px;\n  line-height: 1em;\n  min-height: 1em;\n  white-space: nowrap;\n  text-align: center;\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: 700;\n  padding: 0.75em 1em;\n  color: rgba(0, 0, 0, 0.6);\n  background: #e0e1e2;\n  text-decoration: none;\n  font-family: 'Lato', 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;\n  //box-shadow: 0px 1px 2px -1px rgba(255,255,255,0.5) inset, 0px -2px 0px 0px rgba(0,0,0,0.1) inset;\n  //box-shadow: 0 0 0 0 rgba(0,0,0,.5) inset;\n  outline: none;\n  vertical-align: baseline;\n  zoom: 1;\n  user-select: none;\n  transition: all 0.1s linear;\n\n  &.active,\n  &:hover {\n    background-color: #c0c1c2;\n    color: rgba(0, 0, 0, 0.8);\n  }\n\n  &.primary {\n    .type-primary;\n  }\n}\n\n// form begin\n.@{css-prefix}-form-input {\n  font-size: 1em;\n  position: relative;\n  font-weight: 400;\n  display: inline-flex;\n  color: rgba(0, 0, 0, 0.87);\n\n  input {\n    z-index: 1;\n    margin: 0;\n    max-width: 100%;\n    flex: 1 0 auto;\n    outline: 0;\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n    text-align: left;\n    line-height: @form-field-height;\n    height: @form-field-height;\n    padding: 0 8px;\n    background: #fff;\n    border: 1px solid #e9e9e9;\n    border-radius: 3px;\n    transition: box-shadow 0.1s ease, border-color 0.1s ease;\n    box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n\n    &:focus {\n      border-color: rgb(75, 137, 255);\n      box-shadow: inset 0 1px 2px rgba(75, 137, 255, 0.2);\n    }\n  }\n}\n\n.@{css-prefix}-form-select {\n  position: relative;\n  display: inline-block;\n  background: #fff;\n  border: @input-border;\n  border-radius: 2px;\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.87);\n  user-select: none;\n  box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n\n  .input-text {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    min-width: 60px;\n    width: auto;\n    height: @form-field-height;\n    line-height: @form-field-height;\n    padding: 0 8px;\n  }\n}\n.@{css-prefix}-form-fields {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  .@{css-prefix}-form-field {\n    flex: 0 1 auto;\n    .label {\n      display: inline-block;\n      margin: 0 10px 0 0;\n    }\n  }\n}\n.@{css-prefix}-form-field {\n  display: block;\n  vertical-align: middle;\n  margin-left: 10px;\n  margin-bottom: 10px;\n\n  &:first-child {\n    margin-left: 0;\n  }\n\n  &.error {\n    .@{css-prefix}-form-select,\n    input {\n      border-color: #f04134;\n    }\n  }\n\n  .tip {\n    color: #f04134;\n    font-size: 0.9em;\n  }\n}\n// form end\n.@{css-prefix}-dimmer {\n  display: none;\n  position: absolute;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 0;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation-duration: 0.5s;\n  animation-duration: 0.5s;\n  transition: background-color 0.5s linear;\n  user-select: none;\n  z-index: 1000;\n\n  &.active {\n    display: block;\n    opacity: 1;\n  }\n}\n\nform fieldset {\n  border: none;\n\n  label {\n    display: block;\n    margin-bottom: 0.5em;\n    font-size: 1em;\n    color: #666;\n  }\n\n  select {\n    font-size: 1.1em;\n    width: 100%;\n    background-color: #fff;\n    border: none;\n    border-bottom: 2px solid #ddd;\n    padding: 0.5em 0.85em;\n    border-radius: 2px;\n  }\n}\n\n.@{css-prefix}-modal,\n.@{css-prefix}-toast {\n  font-size: 13px;\n  position: fixed;\n  z-index: 1001;\n  text-align: left;\n  line-height: @line-height;\n  min-width: 360px;\n  color: rgba(0, 0, 0, 0.87);\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  border-radius: 4px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n  background-clip: padding-box;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 8px;\n}\n\n.@{css-prefix}-toast {\n  background-color: rgba(255, 255, 255, 0.85);\n}\n\n.@{css-prefix}-modal-header,\n.@{css-prefix}-toast-header {\n  font-weight: 600;\n  background-clip: padding-box;\n  background-color: rgba(255, 255, 255, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 4px 4px 0 0;\n\n  .@{css-prefix}-icon {\n    position: absolute;\n    right: 0.8em;\n    top: 0.65em;\n    border-radius: 18px;\n\n    &:hover {\n      opacity: 1;\n      background: rgba(0, 0, 0, 0.08);\n    }\n  }\n}\n\n.@{css-prefix}-toast-header {\n  color: @orange-color;\n}\n\n.@{css-prefix}-modal-header {\n  border-bottom: @border-style;\n  background: rgba(0, 0, 0, 0.08);\n  font-size: 1.0785em;\n}\n\n.@{css-prefix}-modal-header,\n.@{css-prefix}-modal-content,\n.@{css-prefix}-toast-header,\n.@{css-prefix}-toast-content {\n  padding: 0.75em 1em;\n}\n\n@media screen and (min-width: 320px) and (max-width: 480px) {\n  .@{css-prefix}-toolbar {\n    display: none;\n  }\n}\n\n.@{css-prefix}-icon {\n  width: 18px;\n  height: 18px;\n  margin: 1px 1px 2px 1px;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  line-height: 0;\n\n  .@{css-prefix}-icon-img {\n    background-image: url('../assets/sprite.svg');\n    position: absolute;\n    width: 262px;\n    height: 444px;\n    opacity: 0.56;\n\n    &.undo {\n      left: 0;\n      top: 0;\n    }\n    &.redo {\n      left: -1 * @icon-size;\n      top: 0;\n    }\n    &.print {\n      left: -2 * @icon-size;\n      top: 0;\n    }\n    &.paintformat {\n      left: -3 * @icon-size;\n      top: 0;\n    }\n    &.clearformat {\n      left: -4 * @icon-size;\n      top: 0;\n    }\n    &.font-bold {\n      left: -5 * @icon-size;\n      top: 0;\n    }\n    &.font-italic {\n      left: -6 * @icon-size;\n      top: 0;\n    }\n    &.underline {\n      left: -7 * @icon-size;\n      top: 0;\n    }\n    &.strike {\n      left: -8 * @icon-size;\n      top: 0;\n    }\n    &.color {\n      left: -9 * @icon-size;\n      top: 0;\n    }\n    &.bgcolor {\n      left: -10 * @icon-size;\n      top: 0;\n    }\n    &.merge {\n      left: -11 * @icon-size;\n      top: 0;\n    }\n    &.align-left {\n      left: -12 * @icon-size;\n      top: 0;\n    }\n    &.align-center {\n      left: -13 * @icon-size;\n      top: 0;\n    }\n    &.align-right {\n      left: 0;\n      top: -1 * @icon-size;\n    }\n    &.align-top {\n      left: -1 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.align-middle {\n      left: -2 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.align-bottom {\n      left: -3 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.textwrap {\n      left: -4 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.autofilter {\n      left: -5 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.formula {\n      left: -6 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.arrow-down {\n      left: -7 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.arrow-right {\n      left: -8 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.link {\n      left: -9 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.chart {\n      left: -10 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.freeze {\n      left: -11 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.ellipsis {\n      left: -12 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.add {\n      left: -13 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.border-all {\n      left: 0;\n      top: -2 * @icon-size;\n    }\n    &.border-inside {\n      left: -1 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-horizontal {\n      left: -2 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-vertical {\n      left: -3 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-outside {\n      left: -4 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-left {\n      left: -5 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-top {\n      left: -6 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-right {\n      left: -7 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-bottom {\n      left: -8 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-none {\n      left: -9 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.line-color {\n      left: -10 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.line-type {\n      left: -11 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.close {\n      left: -13 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.chevron-down {\n      left: 0;\n      top: -3 * @icon-size;\n    }\n    &.chevron-up {\n      left: -1 * @icon-size;\n      top: -3 * @icon-size;\n    }\n    &.chevron-left {\n      left: -2 * @icon-size;\n      top: -3 * @icon-size;\n    }\n    &.chevron-right {\n      left: -3 * @icon-size;\n      top: -3 * @icon-size;\n    }\n  }\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";

      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }

      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }

      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }

      content += cssWithMappingToString(item);

      if (needLayer) {
        content += "}";
      }

      if (item[2]) {
        content += "}";
      }

      if (item[4]) {
        content += "}";
      }

      return content;
    }).join("");
  }; // import a list of modules into the list


  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }

      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }

      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }

      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/getUrl.js":
/*!********************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/getUrl.js ***!
  \********************************************************/
/***/ ((module) => {



module.exports = function (url, options) {
  if (!options) {
    options = {};
  }

  if (!url) {
    return url;
  }

  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them

  if (/^['"].*['"]$/.test(url)) {
    url = url.slice(1, -1);
  }

  if (options.hash) {
    url += options.hash;
  } // Should url be wrapped?
  // See https://drafts.csswg.org/css-values-3/#urls


  if (/["'() \t\n]|(%20)/.test(url) || options.needQuotes) {
    return "\"".concat(url.replace(/"/g, '\\"').replace(/\n/g, "\\n"), "\"");
  }

  return url;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {



module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || "").concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
  }

  return [content].join("\n");
};

/***/ }),

/***/ "./src/index.less":
/*!************************!*\
  !*** ./src/index.less ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./index.less */ "./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {



var stylesInDOM = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };

    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);

  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }

      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };

  return updater;
}

module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();

        stylesInDOM.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {



var memo = {};
/* istanbul ignore next  */

function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }

    memo[target] = styleTarget;
  }

  return memo[target];
}
/* istanbul ignore next  */


function insertBySelector(insert, style) {
  var target = getTarget(insert);

  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }

  target.appendChild(style);
}

module.exports = insertBySelector;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}

module.exports = insertStyleElement;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;

  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}

module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";

  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }

  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }

  var needLayer = typeof obj.layer !== "undefined";

  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }

  css += obj.css;

  if (needLayer) {
    css += "}";
  }

  if (obj.media) {
    css += "}";
  }

  if (obj.supports) {
    css += "}";
  }

  var sourceMap = obj.sourceMap;

  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  options.styleTagTransform(css, styleElement, options.options);
}

function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }

  styleElement.parentNode.removeChild(styleElement);
}
/* istanbul ignore next  */


function domAPI(options) {
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}

module.exports = domAPI;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }

    styleElement.appendChild(document.createTextNode(css));
  }
}

module.exports = styleTagTransform;

/***/ }),

/***/ "./src/canvas/draw.ts":
/*!****************************!*\
  !*** ./src/canvas/draw.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Draw": () => (/* binding */ Draw),
/* harmony export */   "DrawBox": () => (/* binding */ DrawBox),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "npx": () => (/* binding */ npx),
/* harmony export */   "thinLineWidth": () => (/* binding */ thinLineWidth)
/* harmony export */ });
/* global window */
function dpr() {
    return window.devicePixelRatio || 1;
}
function thinLineWidth() {
    return dpr() - 0.5;
}
function npx(px) {
    return Math.floor(px * dpr());
}
function npxLine(px) {
    const n = npx(px);
    return n > 0 ? n - 0.5 : 0.5;
}
class DrawBox {
    x;
    y;
    width;
    height;
    padding;
    bgcolor;
    borderTop;
    borderRight;
    borderBottom;
    borderLeft;
    constructor(x, y, w, h, padding = 0) {
        this.x = x;
        this.y = y;
        this.width = w;
        this.height = h;
        this.padding = padding;
        this.bgcolor = '#ffffff';
        // border: [width, style, color]
        this.borderTop = null;
        this.borderRight = null;
        this.borderBottom = null;
        this.borderLeft = null;
    }
    setBorders({ top, bottom, left, right }) {
        if (top)
            this.borderTop = top;
        if (right)
            this.borderRight = right;
        if (bottom)
            this.borderBottom = bottom;
        if (left)
            this.borderLeft = left;
    }
    innerWidth() {
        return this.width - this.padding * 2 - 2;
    }
    innerHeight() {
        return this.height - this.padding * 2 - 2;
    }
    textx(align) {
        const { width, padding } = this;
        let { x } = this;
        if (align === 'left') {
            x += padding;
        }
        else if (align === 'center') {
            x += width / 2;
        }
        else if (align === 'right') {
            x += width - padding;
        }
        return x;
    }
    texty(align, h) {
        const { height, padding } = this;
        let { y } = this;
        if (align === 'top') {
            y += padding;
        }
        else if (align === 'middle') {
            y += height / 2 - h / 2;
        }
        else if (align === 'bottom') {
            y += height - padding - h;
        }
        return y;
    }
    topxys() {
        const { x, y, width } = this;
        return [
            [x, y],
            [x + width, y],
        ];
    }
    rightxys() {
        const { x, y, width, height } = this;
        return [
            [x + width, y],
            [x + width, y + height],
        ];
    }
    bottomxys() {
        const { x, y, width, height } = this;
        return [
            [x, y + height],
            [x + width, y + height],
        ];
    }
    leftxys() {
        const { x, y, height } = this;
        return [
            [x, y],
            [x, y + height],
        ];
    }
}
function drawFontLine(type, tx, ty, align, valign, blheight, blwidth) {
    const floffset = { x: 0, y: 0 };
    if (type === 'underline') {
        if (valign === 'bottom') {
            floffset.y = 0;
        }
        else if (valign === 'top') {
            floffset.y = -(blheight + 2);
        }
        else {
            floffset.y = -blheight / 2;
        }
    }
    else if (type === 'strike') {
        if (valign === 'bottom') {
            floffset.y = blheight / 2;
        }
        else if (valign === 'top') {
            floffset.y = -(blheight / 2 + 2);
        }
    }
    if (align === 'center') {
        floffset.x = blwidth / 2;
    }
    else if (align === 'right') {
        floffset.x = blwidth;
    }
    this.line([tx - floffset.x, ty - floffset.y], [tx - floffset.x + blwidth, ty - floffset.y]);
}
class Draw {
    el;
    ctx;
    constructor(el, width, height) {
        this.el = el;
        this.ctx = el.getContext('2d');
        this.resize(width, height);
        this.ctx.scale(dpr(), dpr());
    }
    resize(width, height) {
        // console.log('dpr:', dpr);
        this.el.style.width = `${width}px`;
        this.el.style.height = `${height}px`;
        this.el.width = npx(width);
        this.el.height = npx(height);
    }
    clear() {
        const { width, height } = this.el;
        this.ctx.clearRect(0, 0, width, height);
        return this;
    }
    attr(options) {
        Object.assign(this.ctx, options);
        return this;
    }
    save() {
        this.ctx.save();
        this.ctx.beginPath();
        return this;
    }
    restore() {
        this.ctx.restore();
        return this;
    }
    beginPath() {
        this.ctx.beginPath();
        return this;
    }
    translate(x, y) {
        this.ctx.translate(npx(x), npx(y));
        return this;
    }
    scale(x, y) {
        this.ctx.scale(x, y);
        return this;
    }
    clearRect(x, y, w, h) {
        this.ctx.clearRect(x, y, w, h);
        return this;
    }
    fillRect(x, y, w, h) {
        this.ctx.fillRect(npx(x) - 0.5, npx(y) - 0.5, npx(w), npx(h));
        return this;
    }
    fillText(text, x, y) {
        this.ctx.fillText(text, npx(x), npx(y));
        return this;
    }
    /*
      txt: render text
      box: DrawBox
      attr: {
        align: left | center | right
        valign: top | middle | bottom
        color: '#333333',
        strike: false,
        font: {
          name: 'Arial',
          size: 14,
          bold: false,
          italic: false,
        }
      }
      textWrap: text wrapping
    */
    text(mtxt, box, attr = {}, textWrap = true) {
        const { ctx } = this;
        const { align, valign, font, color, strike, underline } = attr;
        const tx = box.textx(align);
        ctx.save();
        ctx.beginPath();
        this.attr({
            textAlign: align,
            textBaseline: valign,
            font: `${font.italic ? 'italic' : ''} ${font.bold ? 'bold' : ''} ${npx(font.size)}px ${font.name}`,
            fillStyle: color,
            strokeStyle: color,
        });
        const txts = `${mtxt}`.split('\n');
        const biw = box.innerWidth();
        const ntxts = [];
        txts.forEach((it) => {
            const txtWidth = ctx.measureText(it).width;
            if (textWrap && txtWidth > npx(biw)) {
                let textLine = { w: 0, len: 0, start: 0 };
                for (let i = 0; i < it.length; i += 1) {
                    if (textLine.w >= npx(biw)) {
                        ntxts.push(it.substr(textLine.start, textLine.len));
                        textLine = { w: 0, len: 0, start: i };
                    }
                    textLine.len += 1;
                    textLine.w += ctx.measureText(it[i]).width + 1;
                }
                if (textLine.len > 0) {
                    ntxts.push(it.substr(textLine.start, textLine.len));
                }
            }
            else {
                ntxts.push(it);
            }
        });
        const txtHeight = (ntxts.length - 1) * (font.size + 2);
        let ty = box.texty(valign, txtHeight);
        ntxts.forEach((txt) => {
            const txtWidth = ctx.measureText(txt).width;
            this.fillText(txt, tx, ty);
            if (strike) {
                drawFontLine.call(this, 'strike', tx, ty, align, valign, font.size, txtWidth);
            }
            if (underline) {
                drawFontLine.call(this, 'underline', tx, ty, align, valign, font.size, txtWidth);
            }
            ty += font.size + 2;
        });
        ctx.restore();
        return this;
    }
    border(style, color) {
        const { ctx } = this;
        ctx.lineWidth = thinLineWidth;
        ctx.strokeStyle = color;
        // console.log('style:', style);
        if (style === 'medium') {
            ctx.lineWidth = npx(2) - 0.5;
        }
        else if (style === 'thick') {
            ctx.lineWidth = npx(3);
        }
        else if (style === 'dashed') {
            ctx.setLineDash([npx(3), npx(2)]);
        }
        else if (style === 'dotted') {
            ctx.setLineDash([npx(1), npx(1)]);
        }
        else if (style === 'double') {
            ctx.setLineDash([npx(2), 0]);
        }
        return this;
    }
    line(...xys) {
        const { ctx } = this;
        if (xys.length > 1) {
            ctx.beginPath();
            const [x, y] = xys[0];
            ctx.moveTo(npxLine(x), npxLine(y));
            for (let i = 1; i < xys.length; i += 1) {
                const [x1, y1] = xys[i];
                ctx.lineTo(npxLine(x1), npxLine(y1));
            }
            ctx.stroke();
        }
        return this;
    }
    // strokeBorders(box) {
    //   const { ctx } = this;
    //   ctx.save();
    //   // border
    //   const {
    //     borderTop, borderRight, borderBottom, borderLeft,
    //   } = box;
    //   if (borderTop) {
    //     this.border(...borderTop);
    //     // console.log('box.topxys:', box.topxys());
    //     this.line(...box.topxys());
    //   }
    //   if (borderRight) {
    //     this.border(...borderRight);
    //     this.line(...box.rightxys());
    //   }
    //   if (borderBottom) {
    //     this.border(...borderBottom);
    //     this.line(...box.bottomxys());
    //   }
    //   if (borderLeft) {
    //     this.border(...borderLeft);
    //     this.line(...box.leftxys());
    //   }
    //   ctx.restore();
    // }
    dropdown(box) {
        const { ctx } = this;
        const { x, y, width, height } = box;
        const sx = x + width - 15;
        const sy = y + height - 15;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx), npx(sy));
        ctx.lineTo(npx(sx + 8), npx(sy));
        ctx.lineTo(npx(sx + 4), npx(sy + 6));
        ctx.closePath();
        ctx.fillStyle = 'rgba(0, 0, 0, .45)';
        ctx.fill();
        ctx.restore();
    }
    error(box) {
        const { ctx } = this;
        const { x, y, width } = box;
        const sx = x + width - 1;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx - 8), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y + 8));
        ctx.closePath();
        ctx.fillStyle = 'rgba(255, 0, 0, .65)';
        ctx.fill();
        ctx.restore();
    }
    frozen(box) {
        const { ctx } = this;
        const { x, y, width } = box;
        const sx = x + width - 1;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx - 8), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y + 8));
        ctx.closePath();
        ctx.fillStyle = 'rgba(0, 255, 0, .85)';
        ctx.fill();
        ctx.restore();
    }
    rect(box, dtextcb) {
        const { ctx } = this;
        const { x, y, width, height, bgcolor } = box;
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = bgcolor || '#fff';
        ctx.rect(npxLine(x + 1), npxLine(y + 1), npx(width - 2), npx(height - 2));
        ctx.clip();
        ctx.fill();
        dtextcb();
        ctx.restore();
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/component/border_palette.ts":
/*!*****************************************!*\
  !*** ./src/component/border_palette.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BorderPalette)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dropdown_color */ "./src/component/dropdown_color.ts");
/* harmony import */ var _dropdown_linetype__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dropdown_linetype */ "./src/component/dropdown_linetype.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./src/config.ts");





function buildTable(...trs) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '').children(...trs));
}
function buildTd(iconName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-cell`)
        .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](`border-${iconName}`))
        .on('click', () => {
        this.mode = iconName;
        const { mode, style, color } = this;
        this.change({ mode, style, color });
    }));
}
class BorderPalette {
    color;
    style;
    mode;
    change;
    ddColor;
    ddType;
    el;
    constructor() {
        this.color = '#000';
        this.style = 'thin';
        this.mode = 'all';
        this.change = () => { };
        this.ddColor = new _dropdown_color__WEBPACK_IMPORTED_MODULE_2__["default"]('line-color', this.color);
        this.ddColor.change = (color) => {
            this.color = color;
        };
        this.ddType = new _dropdown_linetype__WEBPACK_IMPORTED_MODULE_3__["default"](this.style);
        this.ddType.change = ([s]) => {
            this.style = s;
        };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette`);
        const table = buildTable((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-left`).child(buildTable((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...['all', 'inside', 'horizontal', 'vertical', 'outside'].map((it) => buildTd.call(this, it))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...['left', 'top', 'right', 'bottom', 'none'].map((it) => buildTd.call(this, it))))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-right`).children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-toolbar-btn`).child(this.ddColor.el), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-toolbar-btn`).child(this.ddType.el))));
        this.el.child(table);
    }
}


/***/ }),

/***/ "./src/component/bottombar.ts":
/*!************************************!*\
  !*** ./src/component/bottombar.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Bottombar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _form_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./form_input */ "./src/component/form_input.ts");
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");







class DropdownMore extends _dropdown__WEBPACK_IMPORTED_MODULE_5__["default"] {
    contentClick;
    constructor(click) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_3__["default"]('ellipsis');
        super(icon, 'auto', false, 'top-left');
        this.contentClick = click;
    }
    reset(items) {
        const eles = items.map((it, i) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
            .css('width', '150px')
            .css('font-weight', 'normal')
            .on('click', () => {
            this.contentClick(i);
            this.hide();
        })
            .child(it));
        this.setContentChildren(...eles);
    }
    setTitle() { }
}
const menuItems = [{ key: 'delete', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.tf)('contextmenu.deleteSheet') }];
function buildMenuItem(item) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
        .child(item.title())
        .on('click', () => {
        this.itemClick(item.key);
        this.hide();
    });
}
function buildMenu() {
    return menuItems.map((it) => buildMenuItem.call(this, it));
}
class ContextMenu {
    el;
    itemClick;
    constructor() {
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-contextmenu`)
            .css('width', '160px')
            .children(...buildMenu.call(this))
            .hide();
        this.itemClick = () => { };
    }
    hide() {
        const { el } = this;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(el);
    }
    setOffset(offset) {
        const { el } = this;
        el.offset(offset);
        el.show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el);
    }
}
class Bottombar {
    swapFunc;
    updateFunc;
    dataNames;
    activeEl;
    deleteEl;
    items;
    moreEl;
    contextMenu;
    el;
    menuEl;
    constructor(addFunc = () => { }, swapFunc = (index) => { }, deleteFunc = () => { }, updateFunc = (index, value) => { }) {
        this.swapFunc = swapFunc;
        this.updateFunc = updateFunc;
        this.dataNames = [];
        this.activeEl = null;
        this.deleteEl = null;
        this.items = [];
        this.moreEl = new DropdownMore((i) => {
            this.clickSwap2(this.items[i]);
        });
        this.contextMenu = new ContextMenu();
        this.contextMenu.itemClick = deleteFunc;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-bottombar`).children(this.contextMenu.el, (this.menuEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('ul', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-menu`).child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('li', '').children(new _icon__WEBPACK_IMPORTED_MODULE_3__["default"]('add').on('click', () => {
            addFunc();
        }), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('span', '').child(this.moreEl)))));
    }
    addItem(name, active, options) {
        this.dataNames.push(name);
        const item = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('li', active ? 'active' : '').child(name);
        item
            .on('click', () => {
            this.clickSwap2(item);
        })
            .on('contextmenu', (evt) => {
            if (options.mode === 'read')
                return;
            const { offsetLeft, offsetHeight } = evt.target;
            this.contextMenu.setOffset({
                left: offsetLeft,
                bottom: offsetHeight + 1,
            });
            this.deleteEl = item;
        })
            .on('dblclick', () => {
            if (options.mode === 'read')
                return;
            const v = item.html();
            const input = new _form_input__WEBPACK_IMPORTED_MODULE_4__["default"]('auto', '');
            input.val(v);
            input.input.on('blur', ({ target }) => {
                const { value } = target;
                const nindex = this.dataNames.findIndex((it) => it === v);
                this.renameItem(nindex, value);
                /*
              this.dataNames.splice(nindex, 1, value);
              this.moreEl.reset(this.dataNames);
              item.html('').child(value);
              this.updateFunc(nindex, value);
              */
            });
            item.html('').child(input.el);
            input.focus();
        });
        if (active) {
            this.clickSwap(item);
        }
        this.items.push(item);
        this.menuEl.child(item);
        this.moreEl.reset(this.dataNames);
    }
    renameItem(index, value) {
        this.dataNames.splice(index, 1, value);
        this.moreEl.reset(this.dataNames);
        this.items[index].html('').child(value);
        this.updateFunc(index, value);
    }
    clear() {
        this.items.forEach((it) => {
            this.menuEl.removeChild(it.el);
        });
        this.items = [];
        this.dataNames = [];
        this.moreEl.reset(this.dataNames);
    }
    deleteItem() {
        const { activeEl, deleteEl } = this;
        if (this.items.length > 1) {
            const index = this.items.findIndex((it) => it === deleteEl);
            this.items.splice(index, 1);
            this.dataNames.splice(index, 1);
            this.menuEl.removeChild(deleteEl.el);
            this.moreEl.reset(this.dataNames);
            if (activeEl === deleteEl) {
                const [f] = this.items;
                this.activeEl = f;
                this.activeEl.toggle();
                return [index, 0];
            }
            return [index, -1];
        }
        return [-1];
    }
    clickSwap2(item) {
        const index = this.items.findIndex((it) => it === item);
        this.clickSwap(item);
        this.activeEl.toggle();
        this.swapFunc(index);
    }
    clickSwap(item) {
        if (this.activeEl !== null) {
            this.activeEl.toggle();
        }
        this.activeEl = item;
    }
}


/***/ }),

/***/ "./src/component/button.ts":
/*!*********************************!*\
  !*** ./src/component/button.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Button)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



class Button extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    // type: primary
    constructor(title, type = '') {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-button ${type}`);
        this.child((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)(`button.${title}`));
    }
}


/***/ }),

/***/ "./src/component/calendar.ts":
/*!***********************************!*\
  !*** ./src/component/calendar.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Calendar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



function addMonth(date, step) {
    date.setMonth(date.getMonth() + step);
}
function weekday(date, index) {
    const d = new Date(date);
    d.setDate(index - date.getDay() + 1);
    return d;
}
function monthDays(year, month, cdate) {
    // the first day of month
    const startDate = new Date(year, month, 1, 23, 59, 59);
    const datess = [[], [], [], [], [], []];
    for (let i = 0; i < 6; i += 1) {
        for (let j = 0; j < 7; j += 1) {
            const index = i * 7 + j;
            const d = weekday(startDate, index);
            const disabled = d.getMonth() !== month;
            // console.log('d:', d, ', cdate:', cdate);
            const active = d.getMonth() === cdate.getMonth() && d.getDate() === cdate.getDate();
            datess[i][j] = { d, disabled, active };
        }
    }
    return datess;
}
class Calendar {
    value;
    cvalue;
    headerLeftEl;
    bodyEl;
    el;
    selectChange;
    constructor(value) {
        this.value = value;
        this.cvalue = new Date(value);
        this.headerLeftEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header-left');
        this.bodyEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '');
        this.buildAll();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'x-spreadsheet-calendar').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header').children(this.headerLeftEl, (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header-right').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('a', 'calendar-prev')
            .on('click.stop', () => this.prev())
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('chevron-left')), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('a', 'calendar-next')
            .on('click.stop', () => this.next())
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('chevron-right')))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', 'calendar-body').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('thead', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...(0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('calendar.weeks').map((week) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('th', 'cell').child(week)))), this.bodyEl));
        this.selectChange = () => { };
    }
    setValue(value) {
        this.value = value;
        this.cvalue = new Date(value);
        this.buildAll();
    }
    prev() {
        const { value } = this;
        addMonth(value, -1);
        this.buildAll();
    }
    next() {
        const { value } = this;
        addMonth(value, 1);
        this.buildAll();
    }
    buildAll() {
        this.buildHeaderLeft();
        this.buildBody();
    }
    buildHeaderLeft() {
        const { value } = this;
        this.headerLeftEl.html(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('calendar.months')[value.getMonth()]} ${value.getFullYear()}`);
    }
    buildBody() {
        const { value, cvalue, bodyEl } = this;
        const mDays = monthDays(value.getFullYear(), value.getMonth(), cvalue);
        const trs = mDays.map((it) => {
            const tds = it.map((it1) => {
                let cls = 'cell';
                if (it1.disabled)
                    cls += ' disabled';
                if (it1.active)
                    cls += ' active';
                return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', cls)
                    .on('click.stop', () => {
                    this.selectChange(it1.d);
                })
                    .child(it1.d.getDate().toString()));
            });
            return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...tds);
        });
        bodyEl.html('').children(...trs);
    }
}


/***/ }),

/***/ "./src/component/color_palette.ts":
/*!****************************************!*\
  !*** ./src/component/color_palette.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ColorPalette)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


const themeColorPlaceHolders = [
    '#ffffff',
    '#000100',
    '#e7e5e6',
    '#445569',
    '#5b9cd6',
    '#ed7d31',
    '#a5a5a5',
    '#ffc001',
    '#4371c6',
    '#71ae47',
];
const themeColors = [
    [
        '#f2f2f2',
        '#7f7f7f',
        '#d0cecf',
        '#d5dce4',
        '#deeaf6',
        '#fce5d5',
        '#ededed',
        '#fff2cd',
        '#d9e2f3',
        '#e3efd9',
    ],
    [
        '#d8d8d8',
        '#595959',
        '#afabac',
        '#adb8ca',
        '#bdd7ee',
        '#f7ccac',
        '#dbdbdb',
        '#ffe59a',
        '#b3c6e7',
        '#c5e0b3',
    ],
    [
        '#bfbfbf',
        '#3f3f3f',
        '#756f6f',
        '#8596b0',
        '#9cc2e6',
        '#f4b184',
        '#c9c9c9',
        '#fed964',
        '#8eaada',
        '#a7d08c',
    ],
    [
        '#a5a5a5',
        '#262626',
        '#3a3839',
        '#333f4f',
        '#2e75b5',
        '#c45a10',
        '#7b7b7b',
        '#bf8e01',
        '#2f5596',
        '#538136',
    ],
    [
        '#7f7f7f',
        '#0c0c0c',
        '#171516',
        '#222a35',
        '#1f4e7a',
        '#843c0a',
        '#525252',
        '#7e6000',
        '#203864',
        '#365624',
    ],
];
const standardColors = [
    '#c00000',
    '#fe0000',
    '#fdc101',
    '#ffff01',
    '#93d051',
    '#00b04e',
    '#01b0f1',
    '#0170c1',
    '#012060',
    '#7030a0',
];
function buildTd(bgcolor) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-color-palette-cell`)
        .on('click.stop', () => this.change(bgcolor))
        .css('background-color', bgcolor));
}
class ColorPalette {
    el;
    change;
    constructor() {
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-color-palette`);
        this.change = () => { };
        const table = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-theme-color-placeholders`).children(...themeColorPlaceHolders.map((color) => buildTd.call(this, color))), ...themeColors.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-theme-colors`).children(...it.map((color) => buildTd.call(this, color)))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-standard-colors`).children(...standardColors.map((color) => buildTd.call(this, color)))));
        this.el.child(table);
    }
}


/***/ }),

/***/ "./src/component/contextmenu.ts":
/*!**************************************!*\
  !*** ./src/component/contextmenu.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ContextMenu)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");




const menuItems = [
    { key: 'copy', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.copy'), label: 'Ctrl+C' },
    { key: 'cut', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cut'), label: 'Ctrl+X' },
    { key: 'paste', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.paste'), label: 'Ctrl+V' },
    {
        key: 'paste-value',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.pasteValue'),
        label: 'Ctrl+Shift+V',
    },
    {
        key: 'paste-format',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.pasteFormat'),
        label: 'Ctrl+Alt+V',
    },
    { key: 'divider' },
    { key: 'insert-row', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.insertRow') },
    { key: 'insert-column', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.insertColumn') },
    { key: 'divider' },
    { key: 'delete-row', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteRow') },
    { key: 'delete-column', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteColumn') },
    { key: 'delete-cell-text', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteCellText') },
    { key: 'hide', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.hide') },
    { key: 'divider' },
    { key: 'validation', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.validation') },
    { key: 'divider' },
    { key: 'cell-printable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellprintable') },
    { key: 'cell-non-printable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellnonprintable') },
    { key: 'divider' },
    { key: 'cell-editable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.celleditable') },
    { key: 'cell-non-editable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellnoneditable') },
];
function buildMenuItem(item) {
    if (item.key === 'divider') {
        return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item divider`);
    }
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
        .on('click', () => {
        this.itemClick(item.key);
        this.hide();
    })
        .children(item.title(), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').child(item.label || ''));
}
function buildMenu() {
    return menuItems.map((it) => buildMenuItem.call(this, it));
}
class ContextMenu {
    menuItems;
    el;
    viewFn;
    itemClick;
    isHide;
    constructor(viewFn, isHide = false) {
        this.menuItems = buildMenu.call(this);
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-contextmenu`)
            .children(...this.menuItems)
            .hide();
        this.viewFn = viewFn;
        this.itemClick = () => { };
        this.isHide = isHide;
        this.setMode('range');
    }
    // row-col: the whole rows or the whole cols
    // range: select range
    setMode(mode) {
        const hideEl = this.menuItems[12];
        if (mode === 'row-col') {
            hideEl.show();
        }
        else {
            hideEl.hide();
        }
    }
    hide() {
        const { el } = this;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(el);
    }
    setPosition(x, y) {
        if (this.isHide)
            return;
        const { el } = this;
        const { width } = el.show().offset();
        const view = this.viewFn();
        const vhf = view.height / 2;
        let left = x;
        if (view.width - x <= width) {
            left -= width;
        }
        el.css('left', `${left}px`);
        if (y > vhf) {
            el.css('bottom', `${view.height - y}px`)
                .css('max-height', `${y}px`)
                .css('top', 'auto');
        }
        else {
            el.css('top', `${y}px`)
                .css('max-height', `${view.height - y}px`)
                .css('bottom', 'auto');
        }
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el);
    }
}


/***/ }),

/***/ "./src/component/datepicker.ts":
/*!*************************************!*\
  !*** ./src/component/datepicker.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Datepicker)
/* harmony export */ });
/* harmony import */ var _calendar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendar */ "./src/component/calendar.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class Datepicker {
    calendar;
    el;
    constructor() {
        this.calendar = new _calendar__WEBPACK_IMPORTED_MODULE_0__["default"](new Date());
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-datepicker`)
            .child(this.calendar.el)
            .hide();
    }
    setValue(date) {
        // console.log(':::::::', date, typeof date, date instanceof string);
        const { calendar } = this;
        if (typeof date === 'string') {
            // console.log(/^\d{4}-\d{1,2}-\d{1,2}$/.test(date));
            if (/^\d{4}-\d{1,2}-\d{1,2}$/.test(date)) {
                calendar.setValue(new Date(date.replace(new RegExp('-', 'g'), '/')));
            }
        }
        else if (date instanceof Date) {
            calendar.setValue(date);
        }
        return this;
    }
    change(cb) {
        this.calendar.selectChange = (d) => {
            cb(d);
            this.hide();
        };
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown.ts":
/*!***********************************!*\
  !*** ./src/component/dropdown.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Dropdown)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class Dropdown extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    title;
    headerClick;
    contentEl;
    headerEl;
    change;
    constructor(title, width, showArrow, placement, ...children) {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown ${placement}`);
        this.title = title;
        // this.change = () => {};
        this.headerClick = () => { };
        if (typeof title === 'string') {
            this.title = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-title`).child(title);
        }
        else if (showArrow) {
            this.title.addClass('arrow-left');
        }
        this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-content`)
            .css('width', width)
            .hide();
        this.setContentChildren(...children);
        this.headerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-header`);
        this.headerEl
            .on('click', () => {
            if (this.contentEl.css('display') !== 'block') {
                this.show();
            }
            else {
                this.hide();
            }
        })
            .children(this.title, showArrow
            ? (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-icon arrow-right`).child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-icon-img arrow-down`))
            : '');
        this.children(this.headerEl, this.contentEl);
    }
    setContentChildren(...children) {
        this.contentEl.html('');
        if (children.length > 0) {
            this.contentEl.children(...children);
        }
    }
    setTitle(title) {
        this.title.html(title);
        this.hide();
    }
    show() {
        const { contentEl } = this;
        contentEl.show();
        // this.parent().active();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(this.parent(), () => {
            this.hide();
        });
        return this;
    }
    parent() {
        return this;
    }
    hide() {
        this.parent().active(false);
        this.contentEl.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(this.parent());
        return this;
    }
}


/***/ }),

/***/ "./src/component/dropdown_align.ts":
/*!*****************************************!*\
  !*** ./src/component/dropdown_align.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownAlign)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




function buildItemWithIcon(iconName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`).child(new _icon__WEBPACK_IMPORTED_MODULE_2__["default"](iconName));
}
class DropdownAlign extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(aligns, align) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_2__["default"](`align-${align}`);
        const naligns = aligns.map((it) => buildItemWithIcon(`align-${it}`).on('click', () => {
            this.setTitle(it);
            this.change(it);
        }));
        super(icon, 'auto', true, 'bottom-left', ...naligns);
    }
    setTitle(align) {
        this.title.setName(`align-${align}`);
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_border.ts":
/*!******************************************!*\
  !*** ./src/component/dropdown_border.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownBorder)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _border_palette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./border_palette */ "./src/component/border_palette.ts");



class DropdownBorder extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('border-all');
        const borderPalette = new _border_palette__WEBPACK_IMPORTED_MODULE_2__["default"]();
        borderPalette.change = (v) => {
            this.change(v);
            this.hide();
        };
        super(icon, 'auto', false, 'bottom-left', borderPalette.el);
    }
}


/***/ }),

/***/ "./src/component/dropdown_color.ts":
/*!*****************************************!*\
  !*** ./src/component/dropdown_color.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownColor)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _color_palette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./color_palette */ "./src/component/color_palette.ts");



class DropdownColor extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(iconName, color) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](iconName)
            .css('height', '16px')
            .css('border-bottom', `3px solid ${color}`);
        const colorPalette = new _color_palette__WEBPACK_IMPORTED_MODULE_2__["default"]();
        colorPalette.change = (v) => {
            this.setTitle(v);
            this.change(v);
        };
        super(icon, 'auto', false, 'bottom-left', colorPalette.el);
    }
    setTitle(color) {
        this.title.css('border-color', color);
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_font.ts":
/*!****************************************!*\
  !*** ./src/component/dropdown_font.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFont)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




class DropdownFont extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nfonts = _core_font__WEBPACK_IMPORTED_MODULE_2__.baseFonts.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`)
            .on('click', () => {
            this.setTitle(it.title);
            this.change(it);
        })
            .child(it.title));
        super(_core_font__WEBPACK_IMPORTED_MODULE_2__.baseFonts[0].title, '160px', true, 'bottom-left', ...nfonts);
    }
}


/***/ }),

/***/ "./src/component/dropdown_fontsize.ts":
/*!********************************************!*\
  !*** ./src/component/dropdown_fontsize.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFontSize)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




class DropdownFontSize extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nfontSizes = _core_font__WEBPACK_IMPORTED_MODULE_2__.fontSizes.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`)
            .on('click', () => {
            this.setTitle(`${it.pt}`);
            this.change(it);
        })
            .child(`${it.pt}`));
        super('10', '60px', true, 'bottom-left', ...nfontSizes);
    }
}


/***/ }),

/***/ "./src/component/dropdown_format.ts":
/*!******************************************!*\
  !*** ./src/component/dropdown_format.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFormat)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/format */ "./src/core/format.ts");
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");




class DropdownFormat extends _dropdown__WEBPACK_IMPORTED_MODULE_2__["default"] {
    constructor() {
        let nformats = _core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats.slice(0);
        nformats.splice(2, 0, { key: 'divider' });
        nformats.splice(8, 0, { key: 'divider' });
        nformats = nformats.map((it) => {
            const item = (0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-item`);
            if (it.key === 'divider') {
                item.addClass('divider');
            }
            else {
                item.child(it.title()).on('click', () => {
                    this.setTitle(it.title());
                    this.change(it);
                });
                if (it.label)
                    item.child((0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', 'label').html(it.label));
            }
            return item;
        });
        super('Normal', '220px', true, 'bottom-left', ...nformats);
    }
    setTitle(key) {
        for (let i = 0; i < _core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats.length; i += 1) {
            if (_core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats[i].key === key) {
                this.title.html(_core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats[i].title());
            }
        }
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_formula.ts":
/*!*******************************************!*\
  !*** ./src/component/dropdown_formula.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFormula)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./src/config.ts");





class DropdownFormula extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nformulas = _core_formula__WEBPACK_IMPORTED_MODULE_3__.baseFormulas.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_2__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-item`)
            .on('click', () => {
            this.hide();
            this.change(it);
        })
            .child(it.key));
        super(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('formula'), '180px', true, 'bottom-left', ...nformulas);
    }
}


/***/ }),

/***/ "./src/component/dropdown_linetype.ts":
/*!********************************************!*\
  !*** ./src/component/dropdown_linetype.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownLineType)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




const lineTypes = [
    [
        'thin',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'medium',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="2" style="user-select: none;"><line x1="0" y1="1.0" x2="50" y2="1.0" stroke-width="2" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'thick',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="1.5" x2="50" y2="1.5" stroke-width="3" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'dashed',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="2" style="user-select: none;"></line></svg>',
    ],
    [
        'dotted',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="1" style="user-select: none;"></line></svg>',
    ],
    // ['double', '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line><line x1="0" y1="2.5" x2="50" y2="2.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>'],
];
class DropdownLineType extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(type) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_2__["default"]('line-type');
        let beforei = 0;
        const lineTypeEls = lineTypes.map((it, iti) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item state ${type === it[0] ? 'checked' : ''}`)
            .on('click', () => {
            lineTypeEls[beforei].toggle('checked');
            lineTypeEls[iti].toggle('checked');
            beforei = iti;
            this.hide();
            this.change(it);
        })
            .child((0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-line-type`).html(it[1])));
        super(icon, 'auto', false, 'bottom-left', ...lineTypeEls);
    }
}


/***/ }),

/***/ "./src/component/editor.ts":
/*!*********************************!*\
  !*** ./src/component/editor.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Editor)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _suggest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./suggest */ "./src/component/suggest.ts");
/* harmony import */ var _datepicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./datepicker */ "./src/component/datepicker.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");
//* global window */




function resetTextareaSize() {
    const { inputText } = this;
    if (!/^\s*$/.test(inputText)) {
        const { textlineEl, textEl, areaOffset } = this;
        const txts = inputText.split('\n');
        const maxTxtSize = Math.max(...txts.map((it) => it.length));
        const tlOffset = textlineEl.offset();
        const fontWidth = tlOffset.width / inputText.length;
        const tlineWidth = (maxTxtSize + 1) * fontWidth + 5;
        const maxWidth = this.viewFn().width - areaOffset.left - fontWidth;
        let h1 = txts.length;
        if (tlineWidth > areaOffset.width) {
            let twidth = tlineWidth;
            if (tlineWidth > maxWidth) {
                twidth = maxWidth;
                h1 += Math.floor(tlineWidth / maxWidth);
                h1 += tlineWidth % maxWidth > 0 ? 1 : 0;
            }
            textEl.css('width', `${twidth}px`);
        }
        h1 *= this.rowHeight;
        if (h1 > areaOffset.height) {
            textEl.css('height', `${h1}px`);
        }
    }
}
function insertText({ target }, itxt) {
    const { value, selectionEnd } = target;
    const ntxt = `${value.slice(0, selectionEnd)}${itxt}${value.slice(selectionEnd)}`;
    target.value = ntxt;
    target.setSelectionRange(selectionEnd + 1, selectionEnd + 1);
    this.inputText = ntxt;
    this.textlineEl.html(ntxt);
    resetTextareaSize.call(this);
}
function keydownEventHandler(evt) {
    const { keyCode, altKey } = evt;
    if (keyCode !== 13 && keyCode !== 9)
        evt.stopPropagation();
    if (keyCode === 13 && altKey) {
        insertText.call(this, evt, '\n');
        evt.stopPropagation();
    }
    if (keyCode === 13 && !altKey)
        evt.preventDefault();
}
function inputEventHandler(evt) {
    const v = evt.target.value;
    // console.log(evt, 'v:', v);
    const { suggest, textlineEl, validator } = this;
    const { cell } = this;
    if (cell !== null) {
        if (('editable' in cell && cell.editable === true) ||
            cell.editable === undefined) {
            this.inputText = v;
            if (validator) {
                if (validator.type === 'list') {
                    suggest.search(v);
                }
                else {
                    suggest.hide();
                }
            }
            else {
                const start = v.lastIndexOf('=');
                if (start !== -1) {
                    suggest.search(v.substring(start + 1));
                }
                else {
                    suggest.hide();
                }
            }
            textlineEl.html(v);
            resetTextareaSize.call(this);
            this.change('input', v);
        }
        else {
            evt.target.value = cell.text || '';
        }
    }
    else {
        this.inputText = v;
        if (validator) {
            if (validator.type === 'list') {
                suggest.search(v);
            }
            else {
                suggest.hide();
            }
        }
        else {
            const start = v.lastIndexOf('=');
            if (start !== -1) {
                suggest.search(v.substring(start + 1));
            }
            else {
                suggest.hide();
            }
        }
        textlineEl.html(v);
        resetTextareaSize.call(this);
        this.change('input', v);
    }
}
function setTextareaRange(position) {
    const { el } = this.textEl;
    setTimeout(() => {
        el.focus();
        el.setSelectionRange(position, position);
    }, 0);
}
function setText(text, position) {
    const { textEl, textlineEl } = this;
    // firefox bug
    textEl.el.blur();
    textEl.val(text);
    textlineEl.html(text);
    setTextareaRange.call(this, position);
}
function suggestItemClick(it) {
    const { inputText, validator } = this;
    let position = 0;
    if (validator && validator.type === 'list') {
        this.inputText = it;
        position = this.inputText.length;
    }
    else {
        const start = inputText.lastIndexOf('=');
        const sit = inputText.substring(0, start + 1);
        let eit = inputText.substring(start + 1);
        if (eit.indexOf(')') !== -1) {
            eit = eit.substring(eit.indexOf(')'));
        }
        else {
            eit = '';
        }
        this.inputText = `${sit + it.key}(`;
        // console.log('inputText:', this.inputText);
        position = this.inputText.length;
        this.inputText += `)${eit}`;
    }
    setText.call(this, this.inputText, position);
}
function resetSuggestItems() {
    this.suggest.setItems(this.formulas);
}
function dateFormat(d) {
    let month = d.getMonth() + 1;
    let date = d.getDate();
    if (month < 10)
        month = `0${month}`;
    if (date < 10)
        date = `0${date}`;
    return `${d.getFullYear()}-${month}-${date}`;
}
class Editor {
    viewFn;
    rowHeight;
    formulas;
    suggest;
    datepicker;
    areaEl;
    textEl;
    textlineEl;
    el;
    areaOffset;
    freeze;
    cell;
    inputText;
    change;
    validator;
    constructor(formulas, viewFn, rowHeight) {
        this.viewFn = viewFn;
        this.rowHeight = rowHeight;
        this.formulas = formulas;
        this.suggest = new _suggest__WEBPACK_IMPORTED_MODULE_1__["default"](formulas, (it) => {
            suggestItemClick.call(this, it);
        });
        this.datepicker = new _datepicker__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.datepicker.change((d) => {
            // console.log('d:', d);
            this.setText(dateFormat(d));
            this.clear();
        });
        this.areaEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-editor-area`)
            .children((this.textEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('textarea', '')
            .on('input', (evt) => inputEventHandler.call(this, evt))
            .on('paste.stop', () => { })
            .on('keydown', (evt) => keydownEventHandler.call(this, evt))), (this.textlineEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'textline')), this.suggest.el, this.datepicker.el)
            .on('mousemove.stop', () => { })
            .on('mousedown.stop', () => { });
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-editor`).child(this.areaEl).hide();
        this.suggest.bindInputEvents(this.textEl);
        this.areaOffset = null;
        this.freeze = { w: 0, h: 0 };
        this.cell = null;
        this.inputText = '';
        this.change = () => { };
    }
    setFreezeLengths(width, height) {
        this.freeze.w = width;
        this.freeze.h = height;
    }
    clear() {
        // const { cell } = this;
        // const cellText = (cell && cell.text) || '';
        if (this.inputText !== '') {
            this.change('finished', this.inputText);
        }
        this.cell = null;
        this.areaOffset = null;
        this.inputText = '';
        this.el.hide();
        this.textEl.val('');
        this.textlineEl.html('');
        resetSuggestItems.call(this);
        this.datepicker.hide();
    }
    setOffset(offset, suggestPosition = 'top') {
        const { textEl, areaEl, suggest, freeze, el } = this;
        if (offset) {
            this.areaOffset = offset;
            const { left, top, width, height, l, t } = offset;
            // console.log('left:', left, ',top:', top, ', freeze:', freeze);
            const elOffset = { left: 0, top: 0 };
            // top left
            if (freeze.w > l && freeze.h > t) {
                //
            }
            else if (freeze.w < l && freeze.h < t) {
                elOffset.left = freeze.w;
                elOffset.top = freeze.h;
            }
            else if (freeze.w > l) {
                elOffset.top = freeze.h;
            }
            else if (freeze.h > t) {
                elOffset.left = freeze.w;
            }
            el.offset(elOffset);
            areaEl.offset({
                left: left - elOffset.left - 0.8,
                top: top - elOffset.top - 0.8,
            });
            textEl.offset({ width: width - 9 + 0.8, height: height - 3 + 0.8 });
            const sOffset = { left: 0 };
            sOffset[suggestPosition] = height;
            suggest.setOffset(sOffset);
            suggest.hide();
        }
    }
    setCell(cell, validator) {
        if (cell && cell.editable === false)
            return;
        // console.log('::', validator);
        const { el, datepicker, suggest } = this;
        el.show();
        this.cell = cell;
        const text = (cell && cell.text) || '';
        this.setText(text);
        this.validator = validator;
        if (validator) {
            const { type } = validator;
            if (type === 'date') {
                datepicker.show();
                if (!/^\s*$/.test(text)) {
                    datepicker.setValue(text);
                }
            }
            if (type === 'list') {
                suggest.setItems(validator.values());
                suggest.search('');
            }
        }
    }
    setText(text) {
        this.inputText = text;
        // console.log('text>>:', text);
        setText.call(this, text, text.length);
        resetTextareaSize.call(this);
    }
}


/***/ }),

/***/ "./src/component/element.ts":
/*!**********************************!*\
  !*** ./src/component/element.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Element": () => (/* binding */ Element),
/* harmony export */   "h": () => (/* binding */ h)
/* harmony export */ });
class Element {
    el;
    constructor(tag, className = '') {
        if (typeof tag === 'string') {
            this.el = document.createElement(tag);
            this.el.className = className;
        }
        else {
            this.el = tag;
        }
        // this.data = {};
    }
    data(key, value) {
        if (value !== undefined) {
            this.data[key] = value;
            return this;
        }
        return this.data[key];
    }
    on(eventNames, handler) {
        const [fen, ...oen] = eventNames.split('.');
        let eventName = fen;
        if (eventName === 'mousewheel' &&
            /Firefox/i.test(window.navigator.userAgent)) {
            eventName = 'DOMMouseScroll';
        }
        this.el.addEventListener(eventName, (evt) => {
            handler(evt);
            for (let i = 0; i < oen.length; i += 1) {
                const k = oen[i];
                if (k === 'left' && evt instanceof MouseEvent && evt.button !== 0) {
                    return;
                }
                if (k === 'right' && evt instanceof MouseEvent && evt.button !== 2) {
                    return;
                }
                if (k === 'stop') {
                    evt.stopPropagation();
                }
            }
        });
        return this;
    }
    offset(value) {
        if (value !== undefined) {
            Object.keys(value).forEach((k) => {
                this.css(k, `${value[k]}px`);
            });
            return this;
        }
        const { offsetTop, offsetLeft, offsetHeight, offsetWidth } = this.el;
        return {
            top: offsetTop,
            left: offsetLeft,
            height: offsetHeight,
            width: offsetWidth,
        };
    }
    scroll(v) {
        const { el } = this;
        if (v !== undefined) {
            if (v.left !== undefined) {
                el.scrollLeft = v.left;
            }
            if (v.top !== undefined) {
                el.scrollTop = v.top;
            }
        }
        return { left: el.scrollLeft, top: el.scrollTop };
    }
    box() {
        return this.el.getBoundingClientRect();
    }
    parent() {
        const parent = this.el.parentElement;
        return new Element(parent);
    }
    children(...eles) {
        if (arguments.length === 0) {
            return Array.from(this.el.children);
        }
        eles.forEach((ele) => this.child(ele));
        return this;
    }
    removeChild(el) {
        this.el.removeChild(el);
    }
    /*
    first() {
      return this.el.firstChild;
    }
  
    last() {
      return this.el.lastChild;
    }
  
    remove(ele) {
      return this.el.removeChild(ele);
    }
  
    prepend(ele) {
      const { el } = this;
      if (el.children.length > 0) {
        el.insertBefore(ele, el.firstChild);
      } else {
        el.appendChild(ele);
      }
      return this;
    }
  
    prev() {
      return this.el.previousSibling;
    }
  
    next() {
      return this.el.nextSibling;
    }
    */
    child(arg) {
        let ele;
        if (typeof arg === 'string') {
            ele = document.createTextNode(arg);
        }
        else if (arg instanceof Element) {
            ele = arg.el;
        }
        else {
            ele = arg;
        }
        this.el.appendChild(ele);
        return this;
    }
    contains(ele) {
        return this.el.contains(ele);
    }
    className(v) {
        if (v !== undefined) {
            this.el.className = v;
            return this;
        }
        return this.el.className;
    }
    addClass(name) {
        this.el.classList.add(name);
        return this;
    }
    hasClass(name) {
        return this.el.classList.contains(name);
    }
    removeClass(name) {
        this.el.classList.remove(name);
        return this;
    }
    toggle(cls = 'active') {
        return this.toggleClass(cls);
    }
    toggleClass(name) {
        return this.el.classList.toggle(name);
    }
    active(flag = true, cls = 'active') {
        if (flag)
            this.addClass(cls);
        else
            this.removeClass(cls);
        return this;
    }
    checked(flag = true) {
        this.active(flag, 'checked');
        return this;
    }
    disabled(flag = true) {
        if (flag)
            this.addClass('disabled');
        else
            this.removeClass('disabled');
        return this;
    }
    attr(key, value) {
        if (value !== undefined) {
            this.el.setAttribute(key, value);
        }
        else {
            if (typeof key === 'string') {
                return this.el.getAttribute(key);
            }
            Object.keys(key).forEach((k) => {
                this.el.setAttribute(k, key[k]);
            });
        }
        return this;
    }
    removeAttr(key) {
        this.el.removeAttribute(key);
        return this;
    }
    html(content) {
        if (content !== undefined) {
            this.el.innerHTML = content;
            return this;
        }
        return this.el.innerHTML;
    }
    val(v) {
        const el = this.el;
        if (v !== undefined) {
            el.value = v;
            return this;
        }
        return el.value;
    }
    focus() {
        this.el.focus();
    }
    cssRemoveKeys(...keys) {
        keys.forEach((k) => this.el.style.removeProperty(k));
        return this;
    }
    css(name, value) {
        if (value === undefined && typeof name !== 'string') {
            Object.keys(name).forEach((k) => {
                this.el.style[k] = name[k];
            });
            return this;
        }
        if (value !== undefined) {
            this.el.style[name] = value;
            return this;
        }
        return this.el.style[name];
    }
    computedStyle() {
        return window.getComputedStyle(this.el, null);
    }
    show() {
        this.css('display', 'block');
        return this;
    }
    hide() {
        this.css('display', 'none');
        return this;
    }
}
const h = (tag, className = '') => new Element(tag, className);



/***/ }),

/***/ "./src/component/event.ts":
/*!********************************!*\
  !*** ./src/component/event.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bind": () => (/* binding */ bind),
/* harmony export */   "bindClickoutside": () => (/* binding */ bindClickoutside),
/* harmony export */   "bindTouch": () => (/* binding */ bindTouch),
/* harmony export */   "createEventEmitter": () => (/* binding */ createEventEmitter),
/* harmony export */   "mouseMoveUp": () => (/* binding */ mouseMoveUp),
/* harmony export */   "unbind": () => (/* binding */ unbind),
/* harmony export */   "unbindClickoutside": () => (/* binding */ unbindClickoutside)
/* harmony export */ });
/* global window */
function bind(target, name, fn) {
    target.addEventListener(name, fn);
}
function unbind(target, name, fn) {
    target.removeEventListener(name, fn);
}
function unbindClickoutside(el) {
    if (el.xclickoutside) {
        unbind(window.document.body, 'click', el.xclickoutside);
        delete el.xclickoutside;
    }
}
// the left mouse button: mousedown  mouseup  click
// the right mouse button: mousedown  contenxtmenu  mouseup
// the right mouse button in firefox(>65.0): mousedown  contenxtmenu  mouseup  click on window
function bindClickoutside(el, cb) {
    el.xclickoutside = (evt) => {
        // ignore double click
        // console.log('evt:', evt);
        if (evt.detail === 2 || el.contains(evt.target))
            return;
        if (cb) {
            cb(el);
        }
        else {
            el.hide();
            unbindClickoutside(el);
        }
    };
    bind(window.document.body, 'click', el.xclickoutside);
}
function mouseMoveUp(target, movefunc, upfunc) {
    bind(target, 'mousemove', movefunc);
    const t = target;
    t.xEvtUp = (evt) => {
        // console.log('mouseup>>>');
        unbind(target, 'mousemove', movefunc);
        unbind(target, 'mouseup', target.xEvtUp);
        upfunc(evt);
    };
    bind(target, 'mouseup', target.xEvtUp);
}
function calTouchDirection(spanx, spany, evt, cb) {
    let direction = '';
    // console.log('spanx:', spanx, ', spany:', spany);
    if (Math.abs(spanx) > Math.abs(spany)) {
        // horizontal
        direction = spanx > 0 ? 'right' : 'left';
        cb(direction, spanx, evt);
    }
    else {
        // vertical
        direction = spany > 0 ? 'down' : 'up';
        cb(direction, spany, evt);
    }
}
// cb = (direction, distance) => {}
function bindTouch(target, { move, end }) {
    let startx = 0;
    let starty = 0;
    bind(target, 'touchstart', (evt) => {
        const { pageX, pageY } = evt.touches[0];
        startx = pageX;
        starty = pageY;
    });
    bind(target, 'touchmove', (evt) => {
        if (!move)
            return;
        const { pageX, pageY } = evt.changedTouches[0];
        const spanx = pageX - startx;
        const spany = pageY - starty;
        if (Math.abs(spanx) > 10 || Math.abs(spany) > 10) {
            // console.log('spanx:', spanx, ', spany:', spany);
            calTouchDirection(spanx, spany, evt, move);
            startx = pageX;
            starty = pageY;
        }
        evt.preventDefault();
    });
    bind(target, 'touchend', (evt) => {
        if (!end)
            return;
        const { pageX, pageY } = evt.changedTouches[0];
        const spanx = pageX - startx;
        const spany = pageY - starty;
        calTouchDirection(spanx, spany, evt, end);
    });
}
// eventemiter
function createEventEmitter() {
    const listeners = new Map();
    function on(eventName, callback) {
        const push = () => {
            const currentListener = listeners.get(eventName);
            return ((Array.isArray(currentListener) && currentListener.push(callback)) ||
                false);
        };
        const create = () => listeners.set(eventName, [].concat(callback));
        return (listeners.has(eventName) && push()) || create();
    }
    function fire(eventName, args) {
        const exec = () => {
            const currentListener = listeners.get(eventName);
            for (const callback of currentListener)
                callback.call(null, ...args);
        };
        return listeners.has(eventName) && exec();
    }
    function removeListener(eventName, callback) {
        const remove = () => {
            const currentListener = listeners.get(eventName);
            const idx = currentListener.indexOf(callback);
            return (idx >= 0 &&
                currentListener.splice(idx, 1) &&
                listeners.get(eventName).length === 0 &&
                listeners.delete(eventName));
        };
        return listeners.has(eventName) && remove();
    }
    function once(eventName, callback) {
        const execCalllback = (...args) => {
            callback.call(null, ...args);
            removeListener(eventName, execCalllback);
        };
        return on(eventName, execCalllback);
    }
    function removeAllListeners() {
        listeners.clear();
    }
    return {
        get current() {
            return listeners;
        },
        on,
        once,
        fire,
        removeListener,
        removeAllListeners,
    };
}


/***/ }),

/***/ "./src/component/form_field.ts":
/*!*************************************!*\
  !*** ./src/component/form_field.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormField)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



const patterns = {
    number: /(^\d+$)|(^\d+(\.\d{0,4})?$)/,
    date: /^\d{4}-\d{1,2}-\d{1,2}$/,
};
// rule: { required: false, type, pattern: // }
class FormField {
    label;
    rule;
    tip;
    input;
    el;
    constructor(input, rule, label, labelWidth) {
        this.label = '';
        this.rule = rule;
        if (label) {
            this.label = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', 'label')
                .css('width', `${labelWidth}px`)
                .html(label);
        }
        this.tip = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'tip').child('tip').hide();
        this.input = input;
        this.input.vchange = () => this.validate();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-form-field`).children(this.label, input.el, this.tip);
    }
    isShow() {
        return this.el.css('display') !== 'none';
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
        return this;
    }
    val(v) {
        return this.input.val(v);
    }
    hint(hint) {
        this.input.hint(hint);
    }
    validate() {
        const { input, rule, tip, el } = this;
        const v = input.val();
        if (rule.required) {
            if (/^\s*$/.test(v)) {
                tip.html((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('validation.required'));
                el.addClass('error');
                return false;
            }
        }
        if (rule.type || rule.pattern) {
            const pattern = rule.pattern || patterns[rule.type];
            if (!pattern.test(v)) {
                tip.html((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('validation.notMatch'));
                el.addClass('error');
                return false;
            }
        }
        el.removeClass('error');
        return true;
    }
}


/***/ }),

/***/ "./src/component/form_input.ts":
/*!*************************************!*\
  !*** ./src/component/form_input.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormInput)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class FormInput {
    vchange;
    el;
    input;
    constructor(width, hint) {
        this.vchange = () => { };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-form-input`);
        this.input = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('input', '')
            .css('width', width)
            .on('input', (evt) => this.vchange(evt))
            .attr('placeholder', hint);
        this.el.child(this.input);
    }
    focus() {
        setTimeout(() => {
            this.input.el.focus();
        }, 10);
    }
    hint(v) {
        this.input.attr('placeholder', v);
    }
    val(v) {
        return this.input.val(v);
    }
}


/***/ }),

/***/ "./src/component/form_select.ts":
/*!**************************************!*\
  !*** ./src/component/form_select.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormSelect)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _suggest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./suggest */ "./src/component/suggest.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class FormSelect {
    key;
    getTitle;
    vchange;
    el;
    suggest;
    itemEl;
    constructor(key, items, width, getTitle = (it) => it, change = (key) => { }) {
        this.key = key;
        this.getTitle = getTitle;
        this.vchange = () => { };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-form-select`);
        this.suggest = new _suggest__WEBPACK_IMPORTED_MODULE_1__["default"](items.map((it) => {
            return { key: it, title: this.getTitle(it) };
        }), (it) => {
            this.itemClick(it.key);
            change(it.key);
            this.vchange(it.key);
        }, width);
        this.el
            .children((this.itemEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'input-text').html(this.getTitle(key))), this.suggest.el)
            .on('click', () => this.show());
    }
    show() {
        this.suggest.search('');
    }
    itemClick(it) {
        this.key = it;
        this.itemEl.html(this.getTitle(it));
    }
    val(v) {
        if (v !== undefined) {
            this.key = v;
            this.itemEl.html(this.getTitle(v));
            return this;
        }
        return this.key;
    }
}


/***/ }),

/***/ "./src/component/icon.ts":
/*!*******************************!*\
  !*** ./src/component/icon.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Icon)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class Icon extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    iconNameEl;
    constructor(name) {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon`);
        this.iconNameEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon-img ${name}`);
        this.child(this.iconNameEl);
    }
    setName(name) {
        this.iconNameEl.className(`${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon-img ${name}`);
    }
}


/***/ }),

/***/ "./src/component/message.ts":
/*!**********************************!*\
  !*** ./src/component/message.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "xtoast": () => (/* binding */ xtoast)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global document */



function xtoast(title, content) {
    const el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast`);
    const dimmer = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dimmer active`);
    const remove = () => {
        document.body.removeChild(el.el);
        document.body.removeChild(dimmer.el);
    };
    el.children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast-header`).children(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('close').on('click.stop', () => remove()), title), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast-content`).html(content));
    document.body.appendChild(el.el);
    document.body.appendChild(dimmer.el);
    // set offset
    const { width, height } = el.box();
    const { clientHeight, clientWidth } = document.documentElement;
    el.offset({
        left: (clientWidth - width) / 2,
        top: (clientHeight - height) / 3,
    });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});


/***/ }),

/***/ "./src/component/modal.ts":
/*!********************************!*\
  !*** ./src/component/modal.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* global document */
/* global window */




class Modal {
    title;
    el;
    dimmer;
    constructor(title, content, width = '600px') {
        this.title = title;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal`)
            .css('width', width)
            .children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal-header`).children(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('close').on('click.stop', () => this.hide()), this.title), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal-content`).children(...content))
            .hide();
    }
    show() {
        // dimmer
        this.dimmer = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dimmer active`);
        document.body.appendChild(this.dimmer.el);
        const { width, height } = this.el.show().box();
        const { clientHeight, clientWidth } = document.documentElement;
        this.el.offset({
            left: (clientWidth - width) / 2,
            top: (clientHeight - height) / 3,
        });
        window.xkeydownEsc = (evt) => {
            if (evt.keyCode === 27) {
                this.hide();
            }
        };
        (0,_event__WEBPACK_IMPORTED_MODULE_3__.bind)(window, 'keydown', window.xkeydownEsc);
    }
    hide() {
        this.el.hide();
        document.body.removeChild(this.dimmer.el);
        (0,_event__WEBPACK_IMPORTED_MODULE_3__.unbind)(window, 'keydown', window.xkeydownEsc);
        delete window.xkeydownEsc;
    }
}


/***/ }),

/***/ "./src/component/modal_validation.ts":
/*!*******************************************!*\
  !*** ./src/component/modal_validation.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ModalValidation)
/* harmony export */ });
/* harmony import */ var _modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal */ "./src/component/modal.ts");
/* harmony import */ var _form_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form_input */ "./src/component/form_input.ts");
/* harmony import */ var _form_select__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form_select */ "./src/component/form_select.ts");
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./form_field */ "./src/component/form_field.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../config */ "./src/config.ts");








const fieldLabelWidth = 100;
class ModalValidation extends _modal__WEBPACK_IMPORTED_MODULE_0__["default"] {
    mf;
    rf;
    cf;
    of;
    minvf;
    maxvf;
    vf;
    svf;
    change;
    constructor() {
        const mf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('cell', ['cell'], // cell|row|column
        '100%', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.modeType.${it}`)), { required: true }, `${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('dataValidation.range')}:`, fieldLabelWidth);
        const rf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('120px', 'E3 or E3:F12'), {
            required: true,
            pattern: /^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/,
        });
        const cf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('list', ['list', 'number', 'date', 'phone', 'email'], '100%', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.type.${it}`), (it) => this.criteriaSelected(it)), { required: true }, `${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('dataValidation.criteria')}:`, fieldLabelWidth);
        // operator
        const of = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('be', ['be', 'nbe', 'eq', 'neq', 'lt', 'lte', 'gt', 'gte'], '160px', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.operator.${it}`), (it) => this.criteriaOperatorSelected(it)), { required: true }).hide();
        // min, max
        const minvf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '10'), {
            required: true,
        }).hide();
        const maxvf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '100'), {
            required: true,
            type: 'number',
        }).hide();
        // value
        const svf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('120px', 'a,b,c'), {
            required: true,
        });
        const vf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '10'), {
            required: true,
            type: 'number',
        }).hide();
        super((0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('contextmenu.validation'), [
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-form-fields`).children(mf.el, rf.el),
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-form-fields`).children(cf.el, of.el, minvf.el, maxvf.el, vf.el, svf.el),
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('cancel').on('click', () => this.btnClick('cancel')), new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('remove').on('click', () => this.btnClick('remove')), new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('save', 'primary').on('click', () => this.btnClick('save'))),
        ]);
        this.mf = mf;
        this.rf = rf;
        this.cf = cf;
        this.of = of;
        this.minvf = minvf;
        this.maxvf = maxvf;
        this.vf = vf;
        this.svf = svf;
        this.change = () => { };
    }
    showVf(it) {
        const hint = it === 'date' ? '2018-11-12' : '10';
        const { vf } = this;
        vf.input.hint(hint);
        vf.show();
    }
    criteriaSelected(it) {
        const { of, minvf, maxvf, vf, svf } = this;
        if (it === 'date' || it === 'number') {
            of.show();
            minvf.rule.type = it;
            maxvf.rule.type = it;
            if (it === 'date') {
                minvf.hint('2018-11-12');
                maxvf.hint('2019-11-12');
            }
            else {
                minvf.hint('10');
                maxvf.hint('100');
            }
            minvf.show();
            maxvf.show();
            vf.hide();
            svf.hide();
        }
        else {
            if (it === 'list') {
                svf.show();
            }
            else {
                svf.hide();
            }
            vf.hide();
            of.hide();
            minvf.hide();
            maxvf.hide();
        }
    }
    criteriaOperatorSelected(it) {
        if (!it)
            return;
        const { minvf, maxvf, vf } = this;
        if (it === 'be' || it === 'nbe') {
            minvf.show();
            maxvf.show();
            vf.hide();
        }
        else {
            const type = this.cf.val();
            vf.rule.type = type;
            if (type === 'date') {
                vf.hint('2018-11-12');
            }
            else {
                vf.hint('10');
            }
            vf.show();
            minvf.hide();
            maxvf.hide();
        }
    }
    btnClick(action) {
        if (action === 'cancel') {
            this.hide();
        }
        else if (action === 'remove') {
            this.change('remove');
            this.hide();
        }
        else if (action === 'save') {
            // validate
            const attrs = ['mf', 'rf', 'cf', 'of', 'svf', 'vf', 'minvf', 'maxvf'];
            for (let i = 0; i < attrs.length; i += 1) {
                const field = this[attrs[i]];
                // console.log('field:', field);
                if (field.isShow()) {
                    // console.log('it:', it);
                    if (!field.validate())
                        return;
                }
            }
            const mode = this.mf.val();
            const ref = this.rf.val();
            const type = this.cf.val();
            const operator = this.of.val();
            let value = this.svf.val();
            if (type === 'number' || type === 'date') {
                if (operator === 'be' || operator === 'nbe') {
                    value = [this.minvf.val(), this.maxvf.val()];
                }
                else {
                    value = this.vf.val();
                }
            }
            // console.log(mode, ref, type, operator, value);
            this.change('save', mode, ref, {
                type,
                operator,
                required: false,
                value,
            });
            this.hide();
        }
    }
    hide() {
        throw new Error('Method not implemented.');
    }
    // validation: { mode, ref, validator }
    setValue(v) {
        if (v) {
            const { mf, rf, cf, of, svf, vf, minvf, maxvf } = this;
            const { mode, ref, validator } = v;
            const { type, operator, value } = validator || { type: 'list' };
            mf.val(mode || 'cell');
            rf.val(ref);
            cf.val(type);
            of.val(operator);
            if (Array.isArray(value)) {
                minvf.val(value[0]);
                maxvf.val(value[1]);
            }
            else {
                svf.val(value || '');
                vf.val(value || '');
            }
            this.criteriaSelected(type);
            this.criteriaOperatorSelected(operator);
        }
        this.show();
    }
    show() {
        throw new Error('Method not implemented.');
    }
}


/***/ }),

/***/ "./src/component/print.ts":
/*!********************************!*\
  !*** ./src/component/print.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Print)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _canvas_draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../canvas/draw */ "./src/canvas/draw.ts");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./table */ "./src/component/table.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* global window document */






// resolution: 72 => 595 x 842
// 150 => 1240 x 1754
// 200 => 1654 x 2339
// 300 => 2479 x 3508
// 96 * cm / 2.54 , 96 * cm / 2.54
const PAGER_SIZES = [
    ['A3', 11.69, 16.54],
    ['A4', 8.27, 11.69],
    ['A5', 5.83, 8.27],
    ['B4', 9.84, 13.9],
    ['B5', 6.93, 9.84],
];
const PAGER_ORIENTATIONS = ['landscape', 'portrait'];
function inches2px(inc) {
    return Math.floor(96 * inc);
}
function btnClick(type) {
    if (type === 'cancel') {
        this.el.hide();
    }
    else {
        this.toPrint();
    }
}
function pagerSizeChange(evt) {
    const { paper } = this;
    const { value } = evt.target;
    const ps = PAGER_SIZES[value];
    paper.w = inches2px(ps[1]);
    paper.h = inches2px(ps[2]);
    // console.log('paper:', ps, paper);
    this.preview();
}
function pagerOrientationChange(evt) {
    const { paper } = this;
    const { value } = evt.target;
    const v = PAGER_ORIENTATIONS[value];
    paper.orientation = v;
    this.preview();
}
class Print {
    paper;
    data;
    el;
    contentEl;
    canvases;
    constructor(data) {
        this.paper = {
            w: inches2px(PAGER_SIZES[0][1]),
            h: inches2px(PAGER_SIZES[0][2]),
            padding: 50,
            orientation: PAGER_ORIENTATIONS[0],
            get width() {
                return this.orientation === 'landscape' ? this.h : this.w;
            },
            get height() {
                return this.orientation === 'landscape' ? this.w : this.h;
            },
        };
        this.data = data;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print`)
            .children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print-bar`).children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-title').child('Print settings'), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-right').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_2__["default"]('cancel').on('click', btnClick.bind(this, 'cancel')), new _button__WEBPACK_IMPORTED_MODULE_2__["default"]('next', 'primary').on('click', btnClick.bind(this, 'next'))))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print-content`).children((this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-content')), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-sider').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('form', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('fieldset', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', '').child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.size')}`), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('select', '')
            .children(...PAGER_SIZES.map((it, index) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('option', '')
            .attr('value', index)
            .child(`${it[0]} ( ${it[1]}''x${it[2]}'' )`)))
            .on('change', pagerSizeChange.bind(this))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('fieldset', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', '').child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.orientation')}`), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('select', '')
            .children(...PAGER_ORIENTATIONS.map((it, index) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('option', '')
            .attr('value', index)
            .child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.orientations')[index]}`)))
            .on('change', pagerOrientationChange.bind(this)))))))
            .hide();
    }
    resetData(data) {
        this.data = data;
    }
    preview() {
        const { data, paper } = this;
        const { width, height, padding } = paper;
        const iwidth = width - padding * 2;
        const iheight = height - padding * 2;
        const cr = data.contentRange();
        const pages = Math.floor(cr.h / iheight) + 1;
        const scale = iwidth / cr.w;
        let left = padding;
        const top = padding;
        if (scale > 1) {
            left += (iwidth - cr.w) / 2;
        }
        let ri = 0;
        let yoffset = 0;
        this.contentEl.html('');
        this.canvases = [];
        const mViewRange = {
            sri: 0,
            sci: 0,
            eri: 0,
            eci: 0,
        };
        for (let i = 0; i < pages; i += 1) {
            let th = 0;
            let yo = 0;
            const wrap = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas-card`);
            const canvas = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('canvas', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas`);
            this.canvases.push(canvas.el);
            const draw = new _canvas_draw__WEBPACK_IMPORTED_MODULE_3__.Draw(canvas.el, width, height);
            // cell-content
            draw.save();
            draw.translate(left, top);
            if (scale < 1)
                draw.scale(scale, scale);
            // console.log('ri:', ri, cr.eri, yoffset);
            for (; ri <= cr.eri; ri += 1) {
                const rh = data.rows.getHeight(ri);
                th += rh;
                if (th < iheight) {
                    for (let ci = 0; ci <= cr.eci; ci += 1) {
                        (0,_table__WEBPACK_IMPORTED_MODULE_4__.renderCell)(draw, data, ri, ci, yoffset);
                        mViewRange.eci = ci;
                    }
                }
                else {
                    yo = -(th - rh);
                    break;
                }
            }
            mViewRange.eri = ri;
            draw.restore();
            // merge-cell
            draw.save();
            draw.translate(left, top);
            if (scale < 1)
                draw.scale(scale, scale);
            const yof = yoffset;
            data.eachMergesInView(mViewRange, ({ sri, sci }) => {
                (0,_table__WEBPACK_IMPORTED_MODULE_4__.renderCell)(draw, data, sri, sci, yof);
            });
            draw.restore();
            mViewRange.sri = mViewRange.eri;
            mViewRange.sci = mViewRange.eci;
            yoffset += yo;
            this.contentEl.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas-card-wraper`).child(wrap.child(canvas)));
        }
        this.el.show();
    }
    toPrint() {
        this.el.hide();
        const { paper } = this;
        const iframe = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('iframe', '').hide();
        const el = iframe.el;
        window.document.body.appendChild(el);
        const { contentWindow } = el;
        const idoc = contentWindow.document;
        const style = document.createElement('style');
        style.innerHTML = `
      @page { size: ${paper.width}px ${paper.height}px; };
      canvas {
        page-break-before: auto;        
        page-break-after: always;
        image-rendering: pixelated;
      };
    `;
        idoc.head.appendChild(style);
        this.canvases.forEach((it) => {
            const cn = it.cloneNode(false);
            const ctx = cn.getContext('2d');
            // ctx.imageSmoothingEnabled = true;
            ctx.drawImage(it, 0, 0);
            idoc.body.appendChild(cn);
        });
        contentWindow.print();
    }
}


/***/ }),

/***/ "./src/component/resizer.ts":
/*!**********************************!*\
  !*** ./src/component/resizer.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Resizer)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global window */



class Resizer {
    moving;
    vertical;
    el;
    unhideHoverEl;
    hoverEl;
    lineEl;
    cRect;
    finishedFn;
    minDistance;
    unhideFn;
    unhideIndex;
    constructor(vertical = false, minDistance) {
        this.moving = false;
        this.vertical = vertical;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer ${vertical ? 'vertical' : 'horizontal'}`)
            .children((this.unhideHoverEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-hover`)
            .on('dblclick.stop', (evt) => this.mousedblclickHandler())
            .css('position', 'absolute')
            .hide()), (this.hoverEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-hover`).on('mousedown.stop', (evt) => this.mousedownHandler(evt))), (this.lineEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-line`).hide()))
            .hide();
        // cell rect
        this.cRect = null;
        this.finishedFn = null;
        this.minDistance = minDistance;
        this.unhideFn = () => { };
    }
    showUnhide(index) {
        this.unhideIndex = index;
        this.unhideHoverEl.show();
    }
    hideUnhide() {
        this.unhideHoverEl.hide();
    }
    // rect : {top, left, width, height}
    // line : {width, height}
    show(rect, line) {
        const { moving, vertical, hoverEl, lineEl, el, unhideHoverEl } = this;
        if (moving)
            return;
        this.cRect = rect;
        const { left, top, width, height } = rect;
        el.offset({
            left: vertical ? left + width - 5 : left,
            top: vertical ? top : top + height - 5,
        }).show();
        hoverEl.offset({
            width: vertical ? 5 : width,
            height: vertical ? height : 5,
        });
        lineEl.offset({
            width: vertical ? 0 : line.width,
            height: vertical ? line.height : 0,
        });
        unhideHoverEl.offset({
            left: vertical ? 5 - width : left,
            top: vertical ? top : 5 - height,
            width: vertical ? 5 : width,
            height: vertical ? height : 5,
        });
    }
    hide() {
        this.el
            .offset({
            left: 0,
            top: 0,
        })
            .hide();
        this.hideUnhide();
    }
    mousedblclickHandler() {
        if (this.unhideIndex) {
            this.unhideFn(this.unhideIndex);
        }
    }
    mousedownHandler(evt) {
        let startEvt = evt;
        const { el, lineEl, cRect, vertical, minDistance } = this;
        let distance = vertical ? cRect.width : cRect.height;
        // console.log('distance:', distance);
        lineEl.show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.mouseMoveUp)(window, (e) => {
            this.moving = true;
            if (startEvt !== null && e.buttons === 1) {
                // console.log('top:', top, ', left:', top, ', cRect:', cRect);
                if (vertical) {
                    distance += e.movementX;
                    if (distance > minDistance) {
                        el.css('left', `${cRect.left + distance}px`);
                    }
                }
                else {
                    distance += e.movementY;
                    if (distance > minDistance) {
                        el.css('top', `${cRect.top + distance}px`);
                    }
                }
                startEvt = e;
            }
        }, () => {
            startEvt = null;
            lineEl.hide();
            this.moving = false;
            this.hide();
            if (this.finishedFn) {
                if (distance < minDistance)
                    distance = minDistance;
                this.finishedFn(cRect, distance);
            }
        });
    }
}


/***/ }),

/***/ "./src/component/scrollbar.ts":
/*!************************************!*\
  !*** ./src/component/scrollbar.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Scrollbar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class Scrollbar {
    vertical;
    moveFn;
    el;
    contentEl;
    constructor(vertical) {
        this.vertical = vertical;
        this.moveFn = null;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-scrollbar ${vertical ? 'vertical' : 'horizontal'}`)
            .child((this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '')))
            .on('mousemove.stop', () => { })
            .on('scroll.stop', (evt) => {
            const { scrollTop, scrollLeft } = evt.target;
            // console.log('scrollTop:', scrollTop);
            if (this.moveFn) {
                this.moveFn(this.vertical ? scrollTop : scrollLeft, evt);
            }
            // console.log('evt:::', evt);
        });
    }
    move(v) {
        this.el.scroll(v);
        return this;
    }
    scroll() {
        return this.el.scroll();
    }
    set(distance, contentDistance) {
        const d = distance - 1;
        // console.log('distance:', distance, ', contentDistance:', contentDistance);
        if (contentDistance > d) {
            const cssKey = this.vertical ? 'height' : 'width';
            // console.log('d:', d);
            this.el.css(cssKey, `${d - 15}px`).show();
            this.contentEl
                .css(this.vertical ? 'width' : 'height', '1px')
                .css(cssKey, `${contentDistance}px`);
        }
        else {
            this.el.hide();
        }
        return this;
    }
}


/***/ }),

/***/ "./src/component/selector.ts":
/*!***********************************!*\
  !*** ./src/component/selector.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Selector)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_cell_range__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/cell_range */ "./src/core/cell_range.ts");



const selectorHeightBorderWidth = 2 * 2 - 1;
let startZIndex = 10;
class SelectorElement {
    useHideInput;
    autoFocus;
    inputChange;
    cornerEl;
    areaEl;
    clipboardEl;
    autofillEl;
    el;
    hideInput;
    hideInputDiv;
    constructor(useHideInput = false, autoFocus = true) {
        this.useHideInput = useHideInput;
        this.autoFocus = autoFocus;
        this.inputChange = () => { };
        this.cornerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-corner`);
        this.areaEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-area`)
            .child(this.cornerEl)
            .hide();
        this.clipboardEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-clipboard`).hide();
        this.autofillEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-autofill`).hide();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector`)
            .css('z-index', `${startZIndex}`)
            .children(this.areaEl, this.clipboardEl, this.autofillEl)
            .hide();
        if (useHideInput) {
            this.hideInput = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('input', '').on('compositionend', (evt) => {
                this.inputChange(evt.target.value);
            });
            this.el.child((this.hideInputDiv = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'hide-input').child(this.hideInput)));
            this.el.child((this.hideInputDiv = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'hide-input').child(this.hideInput)));
        }
        startZIndex += 1;
    }
    setOffset(v) {
        this.el.offset(v).show();
        return this;
    }
    hide() {
        this.el.hide();
        return this;
    }
    setAreaOffset(v) {
        const { left, top, width, height } = v;
        const of = {
            width: width - selectorHeightBorderWidth + 0.8,
            height: height - selectorHeightBorderWidth + 0.8,
            left: left - 0.8,
            top: top - 0.8,
        };
        this.areaEl.offset(of).show();
        if (this.useHideInput) {
            this.hideInputDiv.offset(of);
            if (this.autoFocus) {
                this.hideInput.val('').focus();
            }
            else {
                this.hideInput.val('');
            }
        }
    }
    setClipboardOffset(v) {
        const { left, top, width, height } = v;
        this.clipboardEl.offset({
            left,
            top,
            width: width - 5,
            height: height - 5,
        });
    }
    showAutofill(v) {
        const { left, top, width, height } = v;
        this.autofillEl
            .offset({
            width: width - selectorHeightBorderWidth,
            height: height - selectorHeightBorderWidth,
            left,
            top,
        })
            .show();
    }
    hideAutofill() {
        this.autofillEl.hide();
    }
    showClipboard() {
        this.clipboardEl.show();
    }
    hideClipboard() {
        this.clipboardEl.hide();
    }
}
function calBRAreaOffset(offset) {
    const { data } = this;
    const { left, top, width, height, scroll, l, t } = offset;
    const ftwidth = data.freezeTotalWidth();
    const ftheight = data.freezeTotalHeight();
    let left0 = left - ftwidth;
    if (ftwidth > l)
        left0 -= scroll.x;
    let top0 = top - ftheight;
    if (ftheight > t)
        top0 -= scroll.y;
    return {
        left: left0,
        top: top0,
        width,
        height,
    };
}
function calTAreaOffset(offset) {
    const { data } = this;
    const { left, width, height, l, t, scroll } = offset;
    const ftwidth = data.freezeTotalWidth();
    let left0 = left - ftwidth;
    if (ftwidth > l)
        left0 -= scroll.x;
    return {
        left: left0,
        top: t,
        width,
        height,
    };
}
function calLAreaOffset(offset) {
    const { data } = this;
    const { top, width, height, l, t, scroll } = offset;
    const ftheight = data.freezeTotalHeight();
    let top0 = top - ftheight;
    // console.log('ftheight:', ftheight, ', t:', t);
    if (ftheight > t)
        top0 -= scroll.y;
    return {
        left: l,
        top: top0,
        width,
        height,
    };
}
function setBRAreaOffset(offset) {
    const { br } = this;
    br.setAreaOffset(calBRAreaOffset.call(this, offset));
}
function setTLAreaOffset(offset) {
    const { tl } = this;
    tl.setAreaOffset(offset);
}
function setTAreaOffset(offset) {
    const { t } = this;
    t.setAreaOffset(calTAreaOffset.call(this, offset));
}
function setLAreaOffset(offset) {
    const { l } = this;
    l.setAreaOffset(calLAreaOffset.call(this, offset));
}
function setLClipboardOffset(offset) {
    const { l } = this;
    l.setClipboardOffset(calLAreaOffset.call(this, offset));
}
function setBRClipboardOffset(offset) {
    const { br } = this;
    br.setClipboardOffset(calBRAreaOffset.call(this, offset));
}
function setTLClipboardOffset(offset) {
    const { tl } = this;
    tl.setClipboardOffset(offset);
}
function setTClipboardOffset(offset) {
    const { t } = this;
    t.setClipboardOffset(calTAreaOffset.call(this, offset));
}
function setAllAreaOffset(offset) {
    setBRAreaOffset.call(this, offset);
    setTLAreaOffset.call(this, offset);
    setTAreaOffset.call(this, offset);
    setLAreaOffset.call(this, offset);
}
function setAllClipboardOffset(offset) {
    setBRClipboardOffset.call(this, offset);
    setTLClipboardOffset.call(this, offset);
    setTClipboardOffset.call(this, offset);
    setLClipboardOffset.call(this, offset);
}
class Selector {
    inputChange;
    data;
    br;
    t;
    l;
    tl;
    offset;
    areaOffset;
    indexes;
    range;
    arange;
    el;
    lastri;
    lastci;
    moveIndexes;
    constructor(data) {
        const { autoFocus } = data.settings;
        this.inputChange = () => { };
        this.data = data;
        this.br = new SelectorElement(true, autoFocus);
        this.t = new SelectorElement();
        this.l = new SelectorElement();
        this.tl = new SelectorElement();
        this.br.inputChange = (v) => {
            this.inputChange(v);
        };
        this.br.el.show();
        this.offset = null;
        this.areaOffset = null;
        this.indexes = null;
        this.range = null;
        this.arange = null;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selectors`)
            .children(this.tl.el, this.t.el, this.l.el, this.br.el)
            .hide();
        // for performance
        this.lastri = -1;
        this.lastci = -1;
        startZIndex += 1;
    }
    resetData(data) {
        this.data = data;
        this.range = data.selector.range;
        this.resetAreaOffset();
    }
    hide() {
        this.el.hide();
    }
    resetOffset() {
        const { data, tl, t, l, br } = this;
        const freezeHeight = data.freezeTotalHeight();
        const freezeWidth = data.freezeTotalWidth();
        if (freezeHeight > 0 || freezeWidth > 0) {
            tl.setOffset({ width: freezeWidth, height: freezeHeight });
            t.setOffset({ left: freezeWidth, height: freezeHeight });
            l.setOffset({ top: freezeHeight, width: freezeWidth });
            br.setOffset({ left: freezeWidth, top: freezeHeight });
        }
        else {
            tl.hide();
            t.hide();
            l.hide();
            br.setOffset({ left: 0, top: 0 });
        }
    }
    resetAreaOffset() {
        // console.log('offset:', offset);
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setAllAreaOffset.call(this, offset);
        setAllClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    resetBRTAreaOffset() {
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setBRAreaOffset.call(this, offset);
        setTAreaOffset.call(this, offset);
        setBRClipboardOffset.call(this, coffset);
        setTClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    resetBRLAreaOffset() {
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setBRAreaOffset.call(this, offset);
        setLAreaOffset.call(this, offset);
        setBRClipboardOffset.call(this, coffset);
        setLClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    set(ri, ci, indexesUpdated = true) {
        const { data } = this;
        const cellRange = data.calSelectedRangeByStart(ri, ci);
        const { sri, sci } = cellRange;
        if (indexesUpdated) {
            let [cri, cci] = [ri, ci];
            if (ri < 0)
                cri = 0;
            if (ci < 0)
                cci = 0;
            data.selector.setIndexes(cri, cci);
            this.indexes = [cri, cci];
        }
        this.moveIndexes = [sri, sci];
        // this.sIndexes = sIndexes;
        // this.eIndexes = eIndexes;
        this.range = cellRange;
        this.resetAreaOffset();
        this.el.show();
    }
    setEnd(ri, ci, moving = true) {
        const { data, lastri, lastci } = this;
        if (moving) {
            if (ri === lastri && ci === lastci)
                return;
            this.lastri = ri;
            this.lastci = ci;
        }
        this.range = data.calSelectedRangeByEnd(ri, ci);
        setAllAreaOffset.call(this, this.data.getSelectedRect());
    }
    reset() {
        // console.log('::::', this.data);
        const { eri, eci } = this.data.selector.range;
        this.setEnd(eri, eci);
    }
    showAutofill(ri, ci) {
        if (ri === -1 && ci === -1)
            return;
        // console.log('ri:', ri, ', ci:', ci);
        // const [sri, sci] = this.sIndexes;
        // const [eri, eci] = this.eIndexes;
        const { sri, sci, eri, eci } = this.range;
        const [nri, nci] = [ri, ci];
        // const rn = eri - sri;
        // const cn = eci - sci;
        const srn = sri - ri;
        const scn = sci - ci;
        const ern = eri - ri;
        const ecn = eci - ci;
        if (scn > 0) {
            // left
            // console.log('left');
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(sri, nci, eri, sci - 1);
            // this.saIndexes = [sri, nci];
            // this.eaIndexes = [eri, sci - 1];
            // data.calRangeIndexes2(
        }
        else if (srn > 0) {
            // top
            // console.log('top');
            // nri = sri;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(nri, sci, sri - 1, eci);
            // this.saIndexes = [nri, sci];
            // this.eaIndexes = [sri - 1, eci];
        }
        else if (ecn < 0) {
            // right
            // console.log('right');
            // nci = eci;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(sri, eci + 1, eri, nci);
            // this.saIndexes = [sri, eci + 1];
            // this.eaIndexes = [eri, nci];
        }
        else if (ern < 0) {
            // bottom
            // console.log('bottom');
            // nri = eri;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(eri + 1, sci, nri, eci);
            // this.saIndexes = [eri + 1, sci];
            // this.eaIndexes = [nri, eci];
        }
        else {
            // console.log('else:');
            this.arange = null;
            // this.saIndexes = null;
            // this.eaIndexes = null;
            return;
        }
        if (this.arange !== null) {
            // console.log(this.saIndexes, ':', this.eaIndexes);
            const offset = this.data.getRect(this.arange);
            offset.width += 2;
            offset.height += 2;
            const { br, l, t, tl } = this;
            br.showAutofill(calBRAreaOffset.call(this, offset));
            l.showAutofill(calLAreaOffset.call(this, offset));
            t.showAutofill(calTAreaOffset.call(this, offset));
            tl.showAutofill(offset);
        }
    }
    hideAutofill() {
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].hideAutofill();
        });
    }
    showClipboard() {
        const coffset = this.data.getClipboardRect();
        setAllClipboardOffset.call(this, coffset);
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].showClipboard();
        });
    }
    hideClipboard() {
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].hideClipboard();
        });
    }
}


/***/ }),

/***/ "./src/component/sheet.ts":
/*!********************************!*\
  !*** ./src/component/sheet.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Sheet)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _resizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resizer */ "./src/component/resizer.ts");
/* harmony import */ var _scrollbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scrollbar */ "./src/component/scrollbar.ts");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selector */ "./src/component/selector.ts");
/* harmony import */ var _editor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor */ "./src/component/editor.ts");
/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./print */ "./src/component/print.ts");
/* harmony import */ var _contextmenu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./contextmenu */ "./src/component/contextmenu.ts");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./table */ "./src/component/table.ts");
/* harmony import */ var _toolbar_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./toolbar/index */ "./src/component/toolbar/index.ts");
/* harmony import */ var _modal_validation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modal_validation */ "./src/component/modal_validation.ts");
/* harmony import */ var _sort_filter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sort_filter */ "./src/component/sort_filter.ts");
/* harmony import */ var _message__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./message */ "./src/component/message.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* global window */















/**
 * @desc throttle fn
 * @param func function
 * @param wait Delay in milliseconds
 */
function throttle(func, wait) {
    let timeout;
    return (...arg) => {
        const that = this;
        const args = arg;
        if (!timeout) {
            timeout = setTimeout(() => {
                timeout = null;
                func.apply(that, args);
            }, wait);
        }
    };
}
function scrollbarMove() {
    const { data, verticalScrollbar, horizontalScrollbar } = this;
    const { l, t, left, top, width, height } = data.getSelectedRect();
    const tableOffset = this.getTableOffset();
    // console.log(',l:', l, ', left:', left, ', tOffset.left:', tableOffset.width);
    if (Math.abs(left) + width > tableOffset.width) {
        horizontalScrollbar.move({ left: l + width - tableOffset.width });
    }
    else {
        const fsw = data.freezeTotalWidth();
        if (left < fsw) {
            horizontalScrollbar.move({ left: l - 1 - fsw });
        }
    }
    // console.log('top:', top, ', height:', height, ', tof.height:', tableOffset.height);
    if (Math.abs(top) + height > tableOffset.height) {
        verticalScrollbar.move({ top: t + height - tableOffset.height - 1 });
    }
    else {
        const fsh = data.freezeTotalHeight();
        if (top < fsh) {
            verticalScrollbar.move({ top: t - 1 - fsh });
        }
    }
}
function selectorSet(multiple, ri, ci, indexesUpdated = true, moving = false) {
    if (ri === -1 && ci === -1)
        return;
    const { table, selector, toolbar, data, contextMenu } = this;
    const cell = data.getCell(ri, ci);
    if (multiple) {
        selector.setEnd(ri, ci, moving);
        this.trigger('cells-selected', cell, selector.range);
    }
    else {
        // trigger click event
        selector.set(ri, ci, indexesUpdated);
        this.trigger('cell-selected', cell, ri, ci);
    }
    contextMenu.setMode(ri === -1 || ci === -1 ? 'row-col' : 'range');
    toolbar.reset();
    table.render();
}
// multiple: boolean
// direction: left | right | up | down | row-first | row-last | col-first | col-last
function selectorMove(multiple, direction) {
    const { selector, data } = this;
    const { rows, cols } = data;
    let [ri, ci] = selector.indexes;
    const { eri, eci } = selector.range;
    if (multiple) {
        [ri, ci] = selector.moveIndexes;
    }
    // console.log('selector.move:', ri, ci);
    if (direction === 'left') {
        if (ci > 0)
            ci -= 1;
    }
    else if (direction === 'right') {
        if (eci !== ci)
            ci = eci;
        if (ci < cols.len - 1)
            ci += 1;
    }
    else if (direction === 'up') {
        if (ri > 0)
            ri -= 1;
    }
    else if (direction === 'down') {
        if (eri !== ri)
            ri = eri;
        if (ri < rows.len - 1)
            ri += 1;
    }
    else if (direction === 'row-first') {
        ci = 0;
    }
    else if (direction === 'row-last') {
        ci = cols.len - 1;
    }
    else if (direction === 'col-first') {
        ri = 0;
    }
    else if (direction === 'col-last') {
        ri = rows.len - 1;
    }
    if (multiple) {
        selector.moveIndexes = [ri, ci];
    }
    selectorSet.call(this, multiple, ri, ci);
    scrollbarMove.call(this);
}
// private methods
function overlayerMousemove(evt) {
    // console.log('x:', evt.offsetX, ', y:', evt.offsetY);
    if (evt.buttons !== 0)
        return;
    if (evt.target.className === `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-resizer-hover`)
        return;
    const { offsetX, offsetY } = evt;
    const { rowResizer, colResizer, tableEl, data } = this;
    const { rows, cols } = data;
    if (offsetX > cols.indexWidth && offsetY > rows.height) {
        rowResizer.hide();
        colResizer.hide();
        return;
    }
    const tRect = tableEl.box();
    const cRect = data.getCellRectByXY(evt.offsetX, evt.offsetY);
    if (cRect.ri >= 0 && cRect.ci === -1) {
        cRect.width = cols.indexWidth;
        rowResizer.show(cRect, {
            width: tRect.width,
        });
        if (rows.isHide(cRect.ri - 1)) {
            rowResizer.showUnhide(cRect.ri);
        }
        else {
            rowResizer.hideUnhide();
        }
    }
    else {
        rowResizer.hide();
    }
    if (cRect.ri === -1 && cRect.ci >= 0) {
        cRect.height = rows.height;
        colResizer.show(cRect, {
            height: tRect.height,
        });
        if (cols.isHide(cRect.ci - 1)) {
            colResizer.showUnhide(cRect.ci);
        }
        else {
            colResizer.hideUnhide();
        }
    }
    else {
        colResizer.hide();
    }
}
// let scrollThreshold = 15;
function overlayerMousescroll(evt) {
    // scrollThreshold -= 1;
    // if (scrollThreshold > 0) return;
    // scrollThreshold = 15;
    const { verticalScrollbar, horizontalScrollbar, data } = this;
    const { top } = verticalScrollbar.scroll();
    const { left } = horizontalScrollbar.scroll();
    // console.log('evt:::', evt.wheelDelta, evt.detail * 40);
    const { rows, cols } = data;
    // deltaY for vertical delta
    const { deltaY, deltaX } = evt;
    const loopValue = (ii, vFunc) => {
        let i = ii;
        let v = 0;
        do {
            v = vFunc(i);
            i += 1;
        } while (v <= 0);
        return v;
    };
    // console.log('deltaX', deltaX, 'evt.detail', evt.detail);
    // if (evt.detail) deltaY = evt.detail * 40;
    const moveY = (vertical) => {
        if (vertical > 0) {
            // up
            const ri = data.scroll.ri + 1;
            if (ri < rows.len) {
                const rh = loopValue(ri, (i) => rows.getHeight(i));
                verticalScrollbar.move({ top: top + rh - 1 });
            }
        }
        else {
            // down
            const ri = data.scroll.ri - 1;
            if (ri >= 0) {
                const rh = loopValue(ri, (i) => rows.getHeight(i));
                verticalScrollbar.move({ top: ri === 0 ? 0 : top - rh });
            }
        }
    };
    // deltaX for Mac horizontal scroll
    const moveX = (horizontal) => {
        if (horizontal > 0) {
            // left
            const ci = data.scroll.ci + 1;
            if (ci < cols.len) {
                const cw = loopValue(ci, (i) => cols.getWidth(i));
                horizontalScrollbar.move({ left: left + cw - 1 });
            }
        }
        else {
            // right
            const ci = data.scroll.ci - 1;
            if (ci >= 0) {
                const cw = loopValue(ci, (i) => cols.getWidth(i));
                horizontalScrollbar.move({ left: ci === 0 ? 0 : left - cw });
            }
        }
    };
    const tempY = Math.abs(deltaY);
    const tempX = Math.abs(deltaX);
    const temp = Math.max(tempY, tempX);
    // console.log('event:', evt);
    // detail for windows/mac firefox vertical scroll
    if (/Firefox/i.test(window.navigator.userAgent))
        throttle(moveY(evt.detail), 50);
    if (temp === tempX)
        throttle(moveX(deltaX), 50);
    if (temp === tempY)
        throttle(moveY(deltaY), 50);
}
function overlayerTouch(direction, distance) {
    const { verticalScrollbar, horizontalScrollbar } = this;
    const { top } = verticalScrollbar.scroll();
    const { left } = horizontalScrollbar.scroll();
    if (direction === 'left' || direction === 'right') {
        horizontalScrollbar.move({ left: left - distance });
    }
    else if (direction === 'up' || direction === 'down') {
        verticalScrollbar.move({ top: top - distance });
    }
}
function verticalScrollbarSet() {
    const { data, verticalScrollbar } = this;
    const { height } = this.getTableOffset();
    const erth = data.exceptRowTotalHeight(0, -1);
    // console.log('erth:', erth);
    verticalScrollbar.set(height, data.rows.totalHeight() - erth);
}
function horizontalScrollbarSet() {
    const { data, horizontalScrollbar } = this;
    const { width } = this.getTableOffset();
    if (data) {
        horizontalScrollbar.set(width, data.cols.totalWidth());
    }
}
function sheetFreeze() {
    const { selector, data, editor } = this;
    const [ri, ci] = data.freeze;
    if (ri > 0 || ci > 0) {
        const fwidth = data.freezeTotalWidth();
        const fheight = data.freezeTotalHeight();
        editor.setFreezeLengths(fwidth, fheight);
    }
    selector.resetAreaOffset();
}
function sheetReset() {
    const { tableEl, overlayerEl, overlayerCEl, table, toolbar, selector, el } = this;
    const tOffset = this.getTableOffset();
    const vRect = this.getRect();
    tableEl.attr(vRect);
    overlayerEl.offset(vRect);
    overlayerCEl.offset(tOffset);
    el.css('width', `${vRect.width}px`);
    verticalScrollbarSet.call(this);
    horizontalScrollbarSet.call(this);
    sheetFreeze.call(this);
    table.render();
    toolbar.reset();
    selector.reset();
}
function clearClipboard() {
    const { data, selector } = this;
    data.clearClipboard();
    selector.hideClipboard();
}
function copy(evt) {
    const { data, selector } = this;
    if (data.settings.mode === 'read')
        return;
    data.copy();
    data.copyToSystemClipboard(evt);
    selector.showClipboard();
}
function cut() {
    const { data, selector } = this;
    if (data.settings.mode === 'read')
        return;
    data.cut();
    selector.showClipboard();
}
function paste(what, evt) {
    const { data } = this;
    if (data.settings.mode === 'read')
        return;
    if (data.clipboard.isClear()) {
        const resetSheet = () => sheetReset.call(this);
        const eventTrigger = (rows) => {
            this.trigger('pasted-clipboard', rows);
        };
        // pastFromSystemClipboard is async operation, need to tell it how to reset sheet and trigger event after it finishes
        // pasting content from system clipboard
        data.pasteFromSystemClipboard(resetSheet, eventTrigger);
    }
    else if (data.paste(what, (msg) => (0,_message__WEBPACK_IMPORTED_MODULE_12__.xtoast)('Tip', msg))) {
        sheetReset.call(this);
    }
    else if (evt) {
        const cdata = evt.clipboardData.getData('text/plain');
        this.data.pasteFromText(cdata);
        sheetReset.call(this);
    }
}
function hideRowsOrCols() {
    this.data.hideRowsOrCols();
    sheetReset.call(this);
}
function unhideRowsOrCols(type, index) {
    this.data.unhideRowsOrCols(type, index);
    sheetReset.call(this);
}
function autofilter() {
    const { data } = this;
    data.autofilter();
    sheetReset.call(this);
}
function toolbarChangePaintformatPaste() {
    const { toolbar } = this;
    if (toolbar.paintformatActive()) {
        paste.call(this, 'format');
        clearClipboard.call(this);
        toolbar.paintformatToggle();
    }
}
function overlayerMousedown(evt) {
    // console.log(':::::overlayer.mousedown:', evt.detail, evt.button, evt.buttons, evt.shiftKey);
    // console.log('evt.target.className:', evt.target.className);
    const { selector, data, table, sortFilter } = this;
    const { offsetX, offsetY } = evt;
    const isAutofillEl = evt.target.className === `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-selector-corner`;
    const cellRect = data.getCellRectByXY(offsetX, offsetY);
    const { left, top, width, height } = cellRect;
    let { ri, ci } = cellRect;
    // sort or filter
    const { autoFilter } = data;
    if (autoFilter.includes(ri, ci)) {
        if (left + width - 20 < offsetX && top + height - 20 < offsetY) {
            const items = autoFilter.items(ci, (r, c) => data.rows.getCell(r, c));
            sortFilter.hide();
            sortFilter.set(ci, items, autoFilter.getFilter(ci), autoFilter.getSort(ci));
            sortFilter.setOffset({ left, top: top + height + 2 });
            return;
        }
    }
    // console.log('ri:', ri, ', ci:', ci);
    if (!evt.shiftKey) {
        // console.log('selectorSetStart:::');
        if (isAutofillEl) {
            selector.showAutofill(ri, ci);
        }
        else {
            selectorSet.call(this, false, ri, ci);
        }
        // mouse move up
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.mouseMoveUp)(window, (e) => {
            // console.log('mouseMoveUp::::');
            ({ ri, ci } = data.getCellRectByXY(e.offsetX, e.offsetY));
            if (isAutofillEl) {
                selector.showAutofill(ri, ci);
            }
            else if (e.buttons === 1 && !e.shiftKey) {
                selectorSet.call(this, true, ri, ci, true, true);
            }
        }, () => {
            if (isAutofillEl && selector.arange && data.settings.mode !== 'read') {
                if (data.autofill(selector.arange, 'all', (msg) => (0,_message__WEBPACK_IMPORTED_MODULE_12__.xtoast)('Tip', msg))) {
                    table.render();
                }
            }
            selector.hideAutofill();
            toolbarChangePaintformatPaste.call(this);
        });
    }
    if (!isAutofillEl && evt.buttons === 1) {
        if (evt.shiftKey) {
            // console.log('shiftKey::::');
            selectorSet.call(this, true, ri, ci);
        }
    }
}
function editorSetOffset() {
    const { editor, data } = this;
    const sOffset = data.getSelectedRect();
    const tOffset = this.getTableOffset();
    let sPosition = 'top';
    // console.log('sOffset:', sOffset, ':', tOffset);
    if (sOffset.top > tOffset.height / 2) {
        sPosition = 'bottom';
    }
    editor.setOffset(sOffset, sPosition);
}
function editorSet() {
    const { editor, data } = this;
    if (data.settings.mode === 'read')
        return;
    editorSetOffset.call(this);
    editor.setCell(data.getSelectedCell(), data.getSelectedValidator());
    clearClipboard.call(this);
}
function verticalScrollbarMove(distance) {
    const { data, table, selector } = this;
    data.scrolly(distance, () => {
        selector.resetBRLAreaOffset();
        editorSetOffset.call(this);
        table.render();
    });
}
function horizontalScrollbarMove(distance) {
    const { data, table, selector } = this;
    data.scrollx(distance, () => {
        selector.resetBRTAreaOffset();
        editorSetOffset.call(this);
        table.render();
    });
}
function rowResizerFinished(cRect, distance) {
    const { ri } = cRect;
    const { table, selector, data } = this;
    const { sri, eri } = selector.range;
    if (ri >= sri && ri <= eri) {
        for (let row = sri; row <= eri; row += 1) {
            data.rows.setHeight(row, distance);
        }
    }
    else {
        data.rows.setHeight(ri, distance);
    }
    table.render();
    selector.resetAreaOffset();
    verticalScrollbarSet.call(this);
    editorSetOffset.call(this);
}
function colResizerFinished(cRect, distance) {
    const { ci } = cRect;
    const { table, selector, data } = this;
    const { sci, eci } = selector.range;
    if (ci >= sci && ci <= eci) {
        for (let col = sci; col <= eci; col += 1) {
            data.cols.setWidth(col, distance);
        }
    }
    else {
        data.cols.setWidth(ci, distance);
    }
    table.render();
    selector.resetAreaOffset();
    horizontalScrollbarSet.call(this);
    editorSetOffset.call(this);
}
function dataSetCellText(text, state = 'finished') {
    const { data, table } = this;
    // const [ri, ci] = selector.indexes;
    if (data.settings.mode === 'read')
        return;
    data.setSelectedCellText(text, state);
    const { ri, ci } = data.selector;
    if (state === 'finished') {
        table.render();
    }
    else {
        this.trigger('cell-edited', text, ri, ci);
    }
}
function insertDeleteRowColumn(type) {
    const { data } = this;
    if (data.settings.mode === 'read')
        return;
    if (type === 'insert-row') {
        data.insert('row');
    }
    else if (type === 'delete-row') {
        data.delete('row');
    }
    else if (type === 'insert-column') {
        data.insert('column');
    }
    else if (type === 'delete-column') {
        data.delete('column');
    }
    else if (type === 'delete-cell') {
        data.deleteCell();
    }
    else if (type === 'delete-cell-format') {
        data.deleteCell('format');
    }
    else if (type === 'delete-cell-text') {
        data.deleteCell('text');
    }
    else if (type === 'cell-printable') {
        data.setSelectedCellAttr('printable', true);
    }
    else if (type === 'cell-non-printable') {
        data.setSelectedCellAttr('printable', false);
    }
    else if (type === 'cell-editable') {
        data.setSelectedCellAttr('editable', true);
    }
    else if (type === 'cell-non-editable') {
        data.setSelectedCellAttr('editable', false);
    }
    clearClipboard.call(this);
    sheetReset.call(this);
}
function toolbarChange(type, value) {
    const { data } = this;
    if (type === 'undo') {
        this.undo();
    }
    else if (type === 'redo') {
        this.redo();
    }
    else if (type === 'print') {
        this.print.preview();
    }
    else if (type === 'paintformat') {
        if (value === true)
            copy.call(this);
        else
            clearClipboard.call(this);
    }
    else if (type === 'clearformat') {
        insertDeleteRowColumn.call(this, 'delete-cell-format');
    }
    else if (type === 'link') {
        // link
    }
    else if (type === 'chart') {
        // chart
    }
    else if (type === 'autofilter') {
        // filter
        autofilter.call(this);
    }
    else if (type === 'freeze') {
        if (value) {
            const { ri, ci } = data.selector;
            this.freeze(ri, ci);
        }
        else {
            this.freeze(0, 0);
        }
    }
    else {
        data.setSelectedCellAttr(type, value);
        if (type === 'formula' && !data.selector.multiple()) {
            editorSet.call(this);
        }
        sheetReset.call(this);
    }
}
function sortFilterChange(ci, order, operator, value) {
    // console.log('sort:', sortDesc, operator, value);
    this.data.setAutoFilter(ci, order, operator, value);
    sheetReset.call(this);
}
function sheetInitEvents() {
    const { selector, overlayerEl, rowResizer, colResizer, verticalScrollbar, horizontalScrollbar, editor, contextMenu, toolbar, modalValidation, sortFilter, } = this;
    // overlayer
    overlayerEl
        .on('mousemove', (evt) => {
        overlayerMousemove.call(this, evt);
    })
        .on('mousedown', (evt) => {
        editor.clear();
        contextMenu.hide();
        // the left mouse button: mousedown  mouseup  click
        // the right mouse button: mousedown  contenxtmenu  mouseup
        if (evt.buttons === 2) {
            if (this.data.xyInSelectedRect(evt.offsetX, evt.offsetY)) {
                contextMenu.setPosition(evt.offsetX, evt.offsetY);
            }
            else {
                overlayerMousedown.call(this, evt);
                contextMenu.setPosition(evt.offsetX, evt.offsetY);
            }
            evt.stopPropagation();
        }
        else if (evt.detail === 2) {
            editorSet.call(this);
        }
        else {
            overlayerMousedown.call(this, evt);
        }
    })
        .on('mousewheel.stop', (evt) => {
        overlayerMousescroll.call(this, evt);
    })
        .on('mouseout', (evt) => {
        const { offsetX, offsetY } = evt;
        if (offsetY <= 0)
            colResizer.hide();
        if (offsetX <= 0)
            rowResizer.hide();
    });
    selector.inputChange = (v) => {
        dataSetCellText.call(this, v, 'input');
        editorSet.call(this);
    };
    // slide on mobile
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindTouch)(overlayerEl.el, {
        move: (direction, d) => {
            overlayerTouch.call(this, direction, d);
        },
    });
    // toolbar change
    toolbar.change = (type, value) => toolbarChange.call(this, type, value);
    // sort filter ok
    sortFilter.ok = (ci, order, o, v) => sortFilterChange.call(this, ci, order, o, v);
    // resizer finished callback
    rowResizer.finishedFn = (cRect, distance) => {
        rowResizerFinished.call(this, cRect, distance);
    };
    colResizer.finishedFn = (cRect, distance) => {
        colResizerFinished.call(this, cRect, distance);
    };
    // resizer unhide callback
    rowResizer.unhideFn = (index) => {
        unhideRowsOrCols.call(this, 'row', index);
    };
    colResizer.unhideFn = (index) => {
        unhideRowsOrCols.call(this, 'col', index);
    };
    // scrollbar move callback
    verticalScrollbar.moveFn = (distance, evt) => {
        verticalScrollbarMove.call(this, distance, evt);
    };
    horizontalScrollbar.moveFn = (distance, evt) => {
        horizontalScrollbarMove.call(this, distance, evt);
    };
    // editor
    editor.change = (state, itext) => {
        dataSetCellText.call(this, itext, state);
    };
    // modal validation
    modalValidation.change = (action, ...args) => {
        if (action === 'save') {
            this.data.addValidation(...args);
        }
        else {
            this.data.removeValidation();
        }
    };
    // contextmenu
    contextMenu.itemClick = (type) => {
        // console.log('type:', type);
        if (type === 'validation') {
            modalValidation.setValue(this.data.getSelectedValidation());
        }
        else if (type === 'copy') {
            copy.call(this);
        }
        else if (type === 'cut') {
            cut.call(this);
        }
        else if (type === 'paste') {
            paste.call(this, 'all');
        }
        else if (type === 'paste-value') {
            paste.call(this, 'text');
        }
        else if (type === 'paste-format') {
            paste.call(this, 'format');
        }
        else if (type === 'hide') {
            hideRowsOrCols.call(this);
        }
        else {
            insertDeleteRowColumn.call(this, type);
        }
    };
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'resize', () => {
        this.reload();
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'click', (evt) => {
        this.focusing = overlayerEl.contains(evt.target);
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'paste', (evt) => {
        if (!this.focusing)
            return;
        paste.call(this, 'all', evt);
        evt.preventDefault();
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'copy', (evt) => {
        if (!this.focusing)
            return;
        copy.call(this, evt);
        evt.preventDefault();
    });
    // for selector
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'keydown', (evt) => {
        if (!this.focusing)
            return;
        const keyCode = evt.keyCode || evt.which;
        const { key, ctrlKey, shiftKey, metaKey } = evt;
        // console.log('keydown.evt: ', keyCode);
        if (ctrlKey || metaKey) {
            // const { sIndexes, eIndexes } = selector;
            // let what = 'all';
            // if (shiftKey) what = 'text';
            // if (altKey) what = 'format';
            switch (keyCode) {
                case 90:
                    // undo: ctrl + z
                    this.undo();
                    evt.preventDefault();
                    break;
                case 89:
                    // redo: ctrl + y
                    this.redo();
                    evt.preventDefault();
                    break;
                case 67:
                    // ctrl + c
                    // => copy
                    // copy.call(this);
                    // evt.preventDefault();
                    break;
                case 88:
                    // ctrl + x
                    cut.call(this);
                    evt.preventDefault();
                    break;
                case 85:
                    // ctrl + u
                    toolbar.trigger('underline');
                    evt.preventDefault();
                    break;
                case 86:
                    // ctrl + v
                    // => paste
                    // evt.preventDefault();
                    break;
                case 37:
                    // ctrl + left
                    selectorMove.call(this, shiftKey, 'row-first');
                    evt.preventDefault();
                    break;
                case 38:
                    // ctrl + up
                    selectorMove.call(this, shiftKey, 'col-first');
                    evt.preventDefault();
                    break;
                case 39:
                    // ctrl + right
                    selectorMove.call(this, shiftKey, 'row-last');
                    evt.preventDefault();
                    break;
                case 40:
                    // ctrl + down
                    selectorMove.call(this, shiftKey, 'col-last');
                    evt.preventDefault();
                    break;
                case 32:
                    // ctrl + space, all cells in col
                    selectorSet.call(this, false, -1, this.data.selector.ci, false);
                    evt.preventDefault();
                    break;
                case 66:
                    // ctrl + B
                    toolbar.trigger('bold');
                    break;
                case 73:
                    // ctrl + I
                    toolbar.trigger('italic');
                    break;
                default:
                    break;
            }
        }
        else {
            // console.log('evt.keyCode:', evt.keyCode);
            switch (keyCode) {
                case 32:
                    if (shiftKey) {
                        // shift + space, all cells in row
                        selectorSet.call(this, false, this.data.selector.ri, -1, false);
                    }
                    break;
                case 27: // esc
                    contextMenu.hide();
                    clearClipboard.call(this);
                    break;
                case 37: // left
                    selectorMove.call(this, shiftKey, 'left');
                    evt.preventDefault();
                    break;
                case 38: // up
                    selectorMove.call(this, shiftKey, 'up');
                    evt.preventDefault();
                    break;
                case 39: // right
                    selectorMove.call(this, shiftKey, 'right');
                    evt.preventDefault();
                    break;
                case 40: // down
                    selectorMove.call(this, shiftKey, 'down');
                    evt.preventDefault();
                    break;
                case 9: // tab
                    editor.clear();
                    // shift + tab => move left
                    // tab => move right
                    selectorMove.call(this, false, shiftKey ? 'left' : 'right');
                    evt.preventDefault();
                    break;
                case 13: // enter
                    editor.clear();
                    // shift + enter => move up
                    // enter => move down
                    selectorMove.call(this, false, shiftKey ? 'up' : 'down');
                    evt.preventDefault();
                    break;
                case 8: // backspace
                    insertDeleteRowColumn.call(this, 'delete-cell-text');
                    evt.preventDefault();
                    break;
                default:
                    break;
            }
            if (key === 'Delete') {
                insertDeleteRowColumn.call(this, 'delete-cell-text');
                evt.preventDefault();
            }
            else if ((keyCode >= 65 && keyCode <= 90) ||
                (keyCode >= 48 && keyCode <= 57) ||
                (keyCode >= 96 && keyCode <= 105) ||
                evt.key === '=') {
                dataSetCellText.call(this, evt.key, 'input');
                editorSet.call(this);
            }
            else if (keyCode === 113) {
                // F2
                editorSet.call(this);
            }
        }
    });
}
class Sheet {
    eventMap;
    el;
    toolbar;
    print;
    data;
    tableEl;
    rowResizer;
    colResizer;
    verticalScrollbar;
    horizontalScrollbar;
    editor;
    modalValidation;
    contextMenu;
    selector;
    overlayerCEl;
    overlayerEl;
    sortFilter;
    table;
    constructor(targetEl, data) {
        this.eventMap = (0,_event__WEBPACK_IMPORTED_MODULE_1__.createEventEmitter)();
        const { view, showToolbar, showContextmenu } = data.settings;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-sheet`);
        this.toolbar = new _toolbar_index__WEBPACK_IMPORTED_MODULE_9__["default"](data, view.width, !showToolbar);
        this.print = new _print__WEBPACK_IMPORTED_MODULE_6__["default"](data);
        targetEl.children(this.toolbar.el, this.el, this.print.el);
        this.data = data;
        // table
        this.tableEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('canvas', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-table`);
        // resizer
        this.rowResizer = new _resizer__WEBPACK_IMPORTED_MODULE_2__["default"](false, data.rows.height);
        this.colResizer = new _resizer__WEBPACK_IMPORTED_MODULE_2__["default"](true, data.cols.minWidth);
        // scrollbar
        this.verticalScrollbar = new _scrollbar__WEBPACK_IMPORTED_MODULE_3__["default"](true);
        this.horizontalScrollbar = new _scrollbar__WEBPACK_IMPORTED_MODULE_3__["default"](false);
        // editor
        this.editor = new _editor__WEBPACK_IMPORTED_MODULE_5__["default"](_core_formula__WEBPACK_IMPORTED_MODULE_14__.formulas, () => this.getTableOffset(), data.rows.height);
        // data validation
        this.modalValidation = new _modal_validation__WEBPACK_IMPORTED_MODULE_10__["default"]();
        // contextMenu
        this.contextMenu = new _contextmenu__WEBPACK_IMPORTED_MODULE_7__["default"](() => this.getRect(), !showContextmenu);
        // selector
        this.selector = new _selector__WEBPACK_IMPORTED_MODULE_4__["default"](data);
        this.overlayerCEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-overlayer-content`).children(this.editor.el, this.selector.el);
        this.overlayerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-overlayer`).child(this.overlayerCEl);
        // sortFilter
        this.sortFilter = new _sort_filter__WEBPACK_IMPORTED_MODULE_11__["default"]();
        // root element
        this.el.children(this.tableEl, this.overlayerEl.el, this.rowResizer.el, this.colResizer.el, this.verticalScrollbar.el, this.horizontalScrollbar.el, this.contextMenu.el, this.modalValidation.el, this.sortFilter.el);
        // table
        this.table = new _table__WEBPACK_IMPORTED_MODULE_8__["default"](this.tableEl.el, data);
        sheetInitEvents.call(this);
        sheetReset.call(this);
        // init selector [0, 0]
        selectorSet.call(this, false, 0, 0);
    }
    on(eventName, func) {
        this.eventMap.on(eventName, func);
        return this;
    }
    trigger(eventName, ...args) {
        const { eventMap } = this;
        eventMap.fire(eventName, args);
    }
    resetData(data) {
        // before
        this.editor.clear();
        // after
        this.data = data;
        verticalScrollbarSet.call(this);
        horizontalScrollbarSet.call(this);
        this.toolbar.resetData(data);
        this.print.resetData(data);
        this.selector.resetData(data);
        this.table.resetData(data);
    }
    loadData(data) {
        this.data.setData(data);
        sheetReset.call(this);
        return this;
    }
    // freeze rows or cols
    freeze(ri, ci) {
        const { data } = this;
        data.setFreeze(ri, ci);
        sheetReset.call(this);
        return this;
    }
    undo() {
        this.data.undo();
        sheetReset.call(this);
    }
    redo() {
        this.data.redo();
        sheetReset.call(this);
    }
    reload() {
        sheetReset.call(this);
        return this;
    }
    getRect() {
        const { data } = this;
        return { width: data.viewWidth(), height: data.viewHeight() };
    }
    getTableOffset() {
        const { rows, cols } = this.data;
        const { width, height } = this.getRect();
        return {
            width: width - cols.indexWidth,
            height: height - rows.height,
            left: cols.indexWidth,
            top: rows.height,
        };
    }
}


/***/ }),

/***/ "./src/component/sort_filter.ts":
/*!**************************************!*\
  !*** ./src/component/sort_filter.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SortFilter)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");





function buildMenu(clsName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item ${clsName}`);
}
function buildSortItem(it) {
    return buildMenu('state')
        .child((0,_locale_locale__WEBPACK_IMPORTED_MODULE_4__.t)(`sort.${it}`))
        .on('click.stop', () => this.itemClick(it));
}
function buildFilterBody(items) {
    const { filterbEl, filterValues } = this;
    filterbEl.html('');
    const itemKeys = Object.keys(items);
    itemKeys.forEach((it, index) => {
        const cnt = items[it];
        const active = filterValues.includes(it) ? 'checked' : '';
        filterbEl.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item state ${active}`)
            .on('click.stop', () => this.filterClick(index, it))
            .children(it === '' ? (0,_locale_locale__WEBPACK_IMPORTED_MODULE_4__.t)('filter.empty') : it, (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').html(`(${cnt})`)));
    });
}
function resetFilterHeader() {
    const { filterhEl, filterValues, values } = this;
    filterhEl.html(`${filterValues.length} / ${values.length}`);
    filterhEl.checked(filterValues.length === values.length);
}
class SortFilter {
    filterbEl;
    filterhEl;
    el;
    sortAscEl;
    sortDescEl;
    ci;
    sortDesc;
    values;
    filterValues;
    ok;
    sort;
    constructor() {
        this.filterbEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-body`);
        this.filterhEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-header state`).on('click.stop', () => this.filterClick(0, 'all'));
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-sort-filter`)
            .children((this.sortAscEl = buildSortItem.call(this, 'asc')), (this.sortDescEl = buildSortItem.call(this, 'desc')), buildMenu('divider'), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-filter`).children(this.filterhEl, this.filterbEl), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_1__["default"]('cancel').on('click', () => this.btnClick('cancel')), new _button__WEBPACK_IMPORTED_MODULE_1__["default"]('ok', 'primary').on('click', () => this.btnClick('ok'))))
            .hide();
        // this.setFilters(['test1', 'test2', 'text3']);
        this.ci = null;
        this.sortDesc = null;
        this.values = null;
        this.filterValues = [];
    }
    btnClick(it) {
        if (it === 'ok') {
            const { ci, sort, filterValues } = this;
            if (this.ok) {
                this.ok(ci, sort, 'in', filterValues);
            }
        }
        this.hide();
    }
    itemClick(it) {
        // console.log('it:', it);
        this.sort = it;
        const { sortAscEl, sortDescEl } = this;
        sortAscEl.checked(it === 'asc');
        sortDescEl.checked(it === 'desc');
    }
    filterClick(index, it) {
        // console.log('index:', index, it);
        const { filterbEl, filterValues, values } = this;
        const children = filterbEl.children();
        if (it === 'all') {
            if (children.length === filterValues.length) {
                this.filterValues = [];
                children.forEach((i) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(i).checked(false));
            }
            else {
                this.filterValues = Array.from(values);
                children.forEach((i) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(i).checked(true));
            }
        }
        else {
            const checked = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(children[index]).toggle('checked');
            if (checked) {
                filterValues.push(it);
            }
            else {
                filterValues.splice(filterValues.findIndex((i) => i === it), 1);
            }
        }
        resetFilterHeader.call(this);
    }
    // v: autoFilter
    // items: {value: cnt}
    // sort { ci, order }
    set(ci, items, filter, sort) {
        this.ci = ci;
        const { sortAscEl, sortDescEl } = this;
        if (sort !== null) {
            this.sort = sort.order;
            sortAscEl.checked(sort.asc());
            sortDescEl.checked(sort.desc());
        }
        else {
            this.sortDesc = null;
            sortAscEl.checked(false);
            sortDescEl.checked(false);
        }
        // this.setFilters(items, filter);
        this.values = Object.keys(items);
        this.filterValues = filter ? Array.from(filter.value) : Object.keys(items);
        buildFilterBody.call(this, items, filter);
        resetFilterHeader.call(this);
    }
    setOffset(v) {
        this.el.offset(v).show();
        let tindex = 1;
        (0,_event__WEBPACK_IMPORTED_MODULE_2__.bindClickoutside)(this.el, () => {
            if (tindex <= 0) {
                this.hide();
            }
            tindex -= 1;
        });
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_2__.unbindClickoutside)(this.el);
    }
}


/***/ }),

/***/ "./src/component/suggest.ts":
/*!**********************************!*\
  !*** ./src/component/suggest.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Suggest)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



function inputMovePrev(evt) {
    evt.preventDefault();
    evt.stopPropagation();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    if (this.itemIndex >= 0)
        filterItems[this.itemIndex].toggle();
    this.itemIndex -= 1;
    if (this.itemIndex < 0) {
        this.itemIndex = filterItems.length - 1;
    }
    filterItems[this.itemIndex].toggle();
}
function inputMoveNext(evt) {
    evt.stopPropagation();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    if (this.itemIndex >= 0)
        filterItems[this.itemIndex].toggle();
    this.itemIndex += 1;
    if (this.itemIndex > filterItems.length - 1) {
        this.itemIndex = 0;
    }
    filterItems[this.itemIndex].toggle();
}
function inputEnter(evt) {
    evt.preventDefault();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    evt.stopPropagation();
    if (this.itemIndex < 0)
        this.itemIndex = 0;
    filterItems[this.itemIndex].el.click();
    this.hide();
}
function inputKeydownHandler(evt) {
    const { keyCode } = evt;
    if (evt.ctrlKey) {
        evt.stopPropagation();
    }
    switch (keyCode) {
        case 37: // left
            evt.stopPropagation();
            break;
        case 38: // up
            inputMovePrev.call(this, evt);
            break;
        case 39: // right
            evt.stopPropagation();
            break;
        case 40: // down
            inputMoveNext.call(this, evt);
            break;
        case 13: // enter
            inputEnter.call(this, evt);
            break;
        case 9:
            inputEnter.call(this, evt);
            break;
        default:
            evt.stopPropagation();
            break;
    }
}
class Suggest {
    filterItems;
    items;
    el;
    itemClick;
    itemIndex;
    constructor(items, itemClick, width = '200px') {
        this.filterItems = [];
        this.items = items;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-suggest`).css('width', width).hide();
        this.itemClick = itemClick;
        this.itemIndex = -1;
    }
    setOffset(v) {
        this.el.cssRemoveKeys('top', 'bottom').offset(v);
    }
    hide() {
        const { el } = this;
        this.filterItems = [];
        this.itemIndex = -1;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(this.el.parent());
    }
    setItems(items) {
        this.items = items;
        // this.search('');
    }
    search(word) {
        let { items } = this;
        if (!/^\s*$/.test(word)) {
            items = items.filter((it) => (it.key || it).startsWith(word.toUpperCase()));
        }
        items = items.map((it) => {
            let { title } = it;
            if (title) {
                if (typeof title === 'function') {
                    title = title();
                }
            }
            else {
                title = it;
            }
            const item = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
                .child(title)
                .on('click.stop', () => {
                this.itemClick(it);
                this.hide();
            });
            if (it.label) {
                item.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').html(it.label));
            }
            return item;
        });
        this.filterItems = items;
        if (items.length <= 0) {
            return;
        }
        const { el } = this;
        // items[0].toggle();
        el.html('')
            .children(...items)
            .show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el.parent(), () => {
            this.hide();
        });
    }
    bindInputEvents(input) {
        input.on('keydown', (evt) => inputKeydownHandler.call(this, evt));
    }
}


/***/ }),

/***/ "./src/component/table.ts":
/*!********************************!*\
  !*** ./src/component/table.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "renderCell": () => (/* binding */ renderCell)
/* harmony export */ });
/* harmony import */ var _core_alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _core_cell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/cell */ "./src/core/cell.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* harmony import */ var _core_format__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/format */ "./src/core/format.ts");
/* harmony import */ var _canvas_draw__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../canvas/draw */ "./src/canvas/draw.ts");






// gobal var
const cellPaddingWidth = 5;
const tableFixedHeaderCleanStyle = { fillStyle: '#f4f5f8' };
const tableGridStyle = {
    fillStyle: '#fff',
    lineWidth: _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.thinLineWidth,
    strokeStyle: '#e6e6e6',
};
function tableFixedHeaderStyle() {
    return {
        textAlign: 'center',
        textBaseline: 'middle',
        font: `500 ${(0,_canvas_draw__WEBPACK_IMPORTED_MODULE_5__.npx)(12)}px Source Sans Pro`,
        fillStyle: '#585757',
        lineWidth: (0,_canvas_draw__WEBPACK_IMPORTED_MODULE_5__.thinLineWidth)(),
        strokeStyle: '#e6e6e6',
    };
}
function getDrawBox(data, rindex, cindex, yoffset = 0) {
    const { left, top, width, height } = data.cellRect(rindex, cindex);
    return new _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.DrawBox(left, top + yoffset, width, height, cellPaddingWidth);
}
/*
function renderCellBorders(bboxes, translateFunc) {
  const { draw } = this;
  if (bboxes) {
    const rset = new Set();
    // console.log('bboxes:', bboxes);
    bboxes.forEach(({ ri, ci, box }) => {
      if (!rset.has(ri)) {
        rset.add(ri);
        translateFunc(ri);
      }
      draw.strokeBorders(box);
    });
  }
}
*/
function renderCell(draw, data, rindex, cindex, yoffset = 0) {
    const { sortedRowMap, rows, cols } = data;
    if (rows.isHide(rindex) || cols.isHide(cindex))
        return;
    let nrindex = rindex;
    if (sortedRowMap.has(rindex)) {
        nrindex = sortedRowMap.get(rindex);
    }
    const cell = data.getCell(nrindex, cindex);
    if (cell === null)
        return;
    let frozen = false;
    if ('editable' in cell && cell.editable === false) {
        frozen = true;
    }
    const style = data.getCellStyleOrDefault(nrindex, cindex);
    const dbox = getDrawBox(data, rindex, cindex, yoffset);
    dbox.bgcolor = style.bgcolor;
    if (style.border !== undefined) {
        dbox.setBorders(style.border);
        // bboxes.push({ ri: rindex, ci: cindex, box: dbox });
        draw.strokeBorders(dbox);
    }
    draw.rect(dbox, () => {
        // render text
        let cellText = '';
        if (!data.settings.evalPaused) {
            cellText = _core_cell__WEBPACK_IMPORTED_MODULE_2__["default"].render(cell.text || '', _core_formula__WEBPACK_IMPORTED_MODULE_3__.formulam, (y, x) => data.getCellTextOrDefault(x, y));
        }
        else {
            cellText = cell.text || '';
        }
        if (style.format) {
            // console.log(data.formatm, '>>', cell.format);
            cellText = _core_format__WEBPACK_IMPORTED_MODULE_4__.formatm[style.format].render(cellText);
        }
        const font = Object.assign({}, style.font);
        font.size = (0,_core_font__WEBPACK_IMPORTED_MODULE_1__.getFontSizePxByPt)(font.size);
        // console.log('style:', style);
        draw.text(cellText, dbox, {
            align: style.align,
            valign: style.valign,
            font,
            color: style.color,
            strike: style.strike,
            underline: style.underline,
        }, style.textwrap);
        // error
        const error = data.validations.getError(rindex, cindex);
        if (error) {
            // console.log('error:', rindex, cindex, error);
            draw.error(dbox);
        }
        if (frozen) {
            draw.frozen(dbox);
        }
    });
}
function renderAutofilter(viewRange) {
    const { data, draw } = this;
    if (viewRange) {
        const { autoFilter } = data;
        if (!autoFilter.active())
            return;
        const afRange = autoFilter.hrange();
        if (viewRange.intersects(afRange)) {
            afRange.each((ri, ci) => {
                const dbox = getDrawBox(data, ri, ci);
                draw.dropdown(dbox);
            });
        }
    }
}
function renderContent(viewRange, fw, fh, tx, ty) {
    const { draw, data } = this;
    draw.save();
    draw.translate(fw, fh).translate(tx, ty);
    const { exceptRowSet } = data;
    // const exceptRows = Array.from(exceptRowSet);
    const filteredTranslateFunc = (ri) => {
        const ret = exceptRowSet.has(ri);
        if (ret) {
            const height = data.rows.getHeight(ri);
            draw.translate(0, -height);
        }
        return !ret;
    };
    const exceptRowTotalHeight = data.exceptRowTotalHeight(viewRange.sri, viewRange.eri);
    // 1 render cell
    draw.save();
    draw.translate(0, -exceptRowTotalHeight);
    viewRange.each((ri, ci) => {
        renderCell(draw, data, ri, ci);
    }, (ri) => filteredTranslateFunc(ri));
    draw.restore();
    // 2 render mergeCell
    const rset = new Set();
    draw.save();
    draw.translate(0, -exceptRowTotalHeight);
    data.eachMergesInView(viewRange, ({ sri, sci, eri }) => {
        if (!exceptRowSet.has(sri)) {
            renderCell(draw, data, sri, sci);
        }
        else if (!rset.has(sri)) {
            rset.add(sri);
            const height = data.rows.sumHeight(sri, eri + 1);
            draw.translate(0, -height);
        }
    });
    draw.restore();
    // 3 render autofilter
    renderAutofilter.call(this, viewRange);
    draw.restore();
}
function renderSelectedHeaderCell(x, y, w, h) {
    const { draw } = this;
    draw.save();
    draw.attr({ fillStyle: 'rgba(75, 137, 255, 0.08)' }).fillRect(x, y, w, h);
    draw.restore();
}
// viewRange
// type: all | left | top
// w: the fixed width of header
// h: the fixed height of header
// tx: moving distance on x-axis
// ty: moving distance on y-axis
function renderFixedHeaders(type, viewRange, w, h, tx, ty) {
    const { draw, data } = this;
    const sumHeight = viewRange.h; // rows.sumHeight(viewRange.sri, viewRange.eri + 1);
    const sumWidth = viewRange.w; // cols.sumWidth(viewRange.sci, viewRange.eci + 1);
    const nty = ty + h;
    const ntx = tx + w;
    draw.save();
    // draw rect background
    draw.attr(tableFixedHeaderCleanStyle);
    if (type === 'all' || type === 'left')
        draw.fillRect(0, nty, w, sumHeight);
    if (type === 'all' || type === 'top')
        draw.fillRect(ntx, 0, sumWidth, h);
    const { sri, sci, eri, eci } = data.selector.range;
    // console.log(data.selectIndexes);
    // draw text
    // text font, align...
    draw.attr(tableFixedHeaderStyle());
    // y-header-text
    if (type === 'all' || type === 'left') {
        data.rowEach(viewRange.sri, viewRange.eri, (i, y1, rowHeight) => {
            const y = nty + y1;
            const ii = i;
            draw.line([0, y], [w, y]);
            if (sri <= ii && ii < eri + 1) {
                renderSelectedHeaderCell.call(this, 0, y, w, rowHeight);
            }
            draw.fillText(ii + 1, w / 2, y + rowHeight / 2);
            if (i > 0 && data.rows.isHide(i - 1)) {
                draw.save();
                draw.attr({ strokeStyle: '#c6c6c6' });
                draw.line([5, y + 5], [w - 5, y + 5]);
                draw.restore();
            }
        });
        draw.line([0, sumHeight + nty], [w, sumHeight + nty]);
        draw.line([w, nty], [w, sumHeight + nty]);
    }
    // x-header-text
    if (type === 'all' || type === 'top') {
        data.colEach(viewRange.sci, viewRange.eci, (i, x1, colWidth) => {
            const x = ntx + x1;
            const ii = i;
            draw.line([x, 0], [x, h]);
            if (sci <= ii && ii < eci + 1) {
                renderSelectedHeaderCell.call(this, x, 0, colWidth, h);
            }
            draw.fillText((0,_core_alphabet__WEBPACK_IMPORTED_MODULE_0__.stringAt)(ii), x + colWidth / 2, h / 2);
            if (i > 0 && data.cols.isHide(i - 1)) {
                draw.save();
                draw.attr({ strokeStyle: '#c6c6c6' });
                draw.line([x + 5, 5], [x + 5, h - 5]);
                draw.restore();
            }
        });
        draw.line([sumWidth + ntx, 0], [sumWidth + ntx, h]);
        draw.line([0, h], [sumWidth + ntx, h]);
    }
    draw.restore();
}
function renderFixedLeftTopCell(fw, fh) {
    const { draw } = this;
    draw.save();
    // left-top-cell
    draw.attr({ fillStyle: '#f4f5f8' }).fillRect(0, 0, fw, fh);
    draw.restore();
}
function renderContentGrid({ sri, sci, eri, eci, w, h }, fw, fh, tx, ty) {
    const { draw, data } = this;
    const { settings } = data;
    draw.save();
    draw.attr(tableGridStyle).translate(fw + tx, fh + ty);
    // const sumWidth = cols.sumWidth(sci, eci + 1);
    // const sumHeight = rows.sumHeight(sri, eri + 1);
    // console.log('sumWidth:', sumWidth);
    // draw.clearRect(0, 0, w, h);
    if (!settings.showGrid) {
        draw.restore();
        return;
    }
    // console.log('rowStart:', rowStart, ', rowLen:', rowLen);
    data.rowEach(sri, eri, (i, y, ch) => {
        // console.log('y:', y);
        if (i !== sri)
            draw.line([0, y], [w, y]);
        if (i === eri)
            draw.line([0, y + ch], [w, y + ch]);
    });
    data.colEach(sci, eci, (i, x, cw) => {
        if (i !== sci)
            draw.line([x, 0], [x, h]);
        if (i === eci)
            draw.line([x + cw, 0], [x + cw, h]);
    });
    draw.restore();
}
function renderFreezeHighlightLine(fw, fh, ftw, fth) {
    const { draw, data } = this;
    const twidth = data.viewWidth() - fw;
    const theight = data.viewHeight() - fh;
    draw.save().translate(fw, fh).attr({ strokeStyle: 'rgba(75, 137, 255, .6)' });
    draw.line([0, fth], [twidth, fth]);
    draw.line([ftw, 0], [ftw, theight]);
    draw.restore();
}
/** end */
class Table {
    el;
    draw;
    data;
    constructor(el, data) {
        this.el = el;
        this.draw = new _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.Draw(el, data.viewWidth(), data.viewHeight());
        this.data = data;
    }
    resetData(data) {
        this.data = data;
        this.render();
    }
    render() {
        // resize canvas
        const { data } = this;
        const { rows, cols } = data;
        // fixed width of header
        const fw = cols.indexWidth;
        // fixed height of header
        const fh = rows.height;
        this.draw.resize(data.viewWidth(), data.viewHeight());
        this.clear();
        const viewRange = data.viewRange();
        // renderAll.call(this, viewRange, data.scroll);
        const tx = data.freezeTotalWidth();
        const ty = data.freezeTotalHeight();
        const { x, y } = data.scroll;
        // 1
        renderContentGrid.call(this, viewRange, fw, fh, tx, ty);
        renderContent.call(this, viewRange, fw, fh, -x, -y);
        renderFixedHeaders.call(this, 'all', viewRange, fw, fh, tx, ty);
        renderFixedLeftTopCell.call(this, fw, fh);
        const [fri, fci] = data.freeze;
        if (fri > 0 || fci > 0) {
            // 2
            if (fri > 0) {
                const vr = viewRange.clone();
                vr.sri = 0;
                vr.eri = fri - 1;
                vr.h = ty;
                renderContentGrid.call(this, vr, fw, fh, tx, 0);
                renderContent.call(this, vr, fw, fh, -x, 0);
                renderFixedHeaders.call(this, 'top', vr, fw, fh, tx, 0);
            }
            // 3
            if (fci > 0) {
                const vr = viewRange.clone();
                vr.sci = 0;
                vr.eci = fci - 1;
                vr.w = tx;
                renderContentGrid.call(this, vr, fw, fh, 0, ty);
                renderFixedHeaders.call(this, 'left', vr, fw, fh, 0, ty);
                renderContent.call(this, vr, fw, fh, 0, -y);
            }
            // 4
            const freezeViewRange = data.freezeViewRange();
            renderContentGrid.call(this, freezeViewRange, fw, fh, 0, 0);
            renderFixedHeaders.call(this, 'all', freezeViewRange, fw, fh, 0, 0);
            renderContent.call(this, freezeViewRange, fw, fh, 0, 0);
            // 5
            renderFreezeHighlightLine.call(this, fw, fh, tx, ty);
        }
    }
    clear() {
        this.draw.clear();
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Table);


/***/ }),

/***/ "./src/component/toolbar/align.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/align.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Align)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_align__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_align */ "./src/component/dropdown_align.ts");


class Align extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(value) {
        super('align', '', value);
        this.dd = new _dropdown_align__WEBPACK_IMPORTED_MODULE_1__["default"](['left', 'center', 'right'], value);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/autofilter.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/autofilter.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Autofilter)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Autofilter extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('autofilter');
    }
    setState() { }
}


/***/ }),

/***/ "./src/component/toolbar/bold.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/bold.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Bold)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Bold extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('font-bold', 'Ctrl+B');
    }
}


/***/ }),

/***/ "./src/component/toolbar/border.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/border.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Border)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_border__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_border */ "./src/component/dropdown_border.ts");


class Border extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('border');
        this.dd = new _dropdown_border__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/clearformat.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/clearformat.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Clearformat)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Clearformat extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('clearformat');
    }
}


/***/ }),

/***/ "./src/component/toolbar/dropdown_item.ts":
/*!************************************************!*\
  !*** ./src/component/toolbar/dropdown_item.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DropdownItem": () => (/* binding */ DropdownItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");

class DropdownItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    dd;
    getValue(v) {
        return v;
    }
    setState(v) {
        if (v) {
            // this.value = v;
            this.dd.setTitle(v);
        }
    }
}


/***/ }),

/***/ "./src/component/toolbar/fill_color.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/fill_color.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FillColor)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_color */ "./src/component/dropdown_color.ts");


class FillColor extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(color) {
        super('bgcolor', undefined, color);
        this.dd = new _dropdown_color__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag, color);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/font.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/font.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Font)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_font__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_font */ "./src/component/dropdown_font.ts");


class Font extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('font-name');
        this.dd = new _dropdown_font__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/font_size.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/font_size.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_fontsize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_fontsize */ "./src/component/dropdown_fontsize.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('font-size');
        this.dd = new _dropdown_fontsize__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.pt;
    }
}


/***/ }),

/***/ "./src/component/toolbar/format.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/format.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_format */ "./src/component/dropdown_format.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('format');
        this.dd = new _dropdown_format__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/formula.ts":
/*!******************************************!*\
  !*** ./src/component/toolbar/formula.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_formula__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_formula */ "./src/component/dropdown_formula.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('formula');
        this.dd = new _dropdown_formula__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/freeze.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/freeze.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Freeze)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Freeze extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('freeze');
    }
}


/***/ }),

/***/ "./src/component/toolbar/icon_item.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/icon_item.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ IconItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");


class IconItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    element() {
        return super
            .element()
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag))
            .on('click', () => this.change(this.tag));
    }
    setState(disabled) {
        this.el.disabled(disabled);
    }
}


/***/ }),

/***/ "./src/component/toolbar/index.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Toolbar)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../event */ "./src/component/event.ts");
/* harmony import */ var _align__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./align */ "./src/component/toolbar/align.ts");
/* harmony import */ var _autofilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./autofilter */ "./src/component/toolbar/autofilter.ts");
/* harmony import */ var _bold__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./bold */ "./src/component/toolbar/bold.ts");
/* harmony import */ var _border__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./border */ "./src/component/toolbar/border.ts");
/* harmony import */ var _clearformat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./clearformat */ "./src/component/toolbar/clearformat.ts");
/* harmony import */ var _fill_color__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./fill_color */ "./src/component/toolbar/fill_color.ts");
/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./font */ "./src/component/toolbar/font.ts");
/* harmony import */ var _font_size__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./font_size */ "./src/component/toolbar/font_size.ts");
/* harmony import */ var _format__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./format */ "./src/component/toolbar/format.ts");
/* harmony import */ var _formula__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./formula */ "./src/component/toolbar/formula.ts");
/* harmony import */ var _freeze__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./freeze */ "./src/component/toolbar/freeze.ts");
/* harmony import */ var _italic__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./italic */ "./src/component/toolbar/italic.ts");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./merge */ "./src/component/toolbar/merge.ts");
/* harmony import */ var _more__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./more */ "./src/component/toolbar/more.ts");
/* harmony import */ var _paintformat__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./paintformat */ "./src/component/toolbar/paintformat.ts");
/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./print */ "./src/component/toolbar/print.ts");
/* harmony import */ var _redo__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./redo */ "./src/component/toolbar/redo.ts");
/* harmony import */ var _strike__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./strike */ "./src/component/toolbar/strike.ts");
/* harmony import */ var _text_color__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./text_color */ "./src/component/toolbar/text_color.ts");
/* harmony import */ var _textwrap__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./textwrap */ "./src/component/toolbar/textwrap.ts");
/* harmony import */ var _underline__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./underline */ "./src/component/toolbar/underline.ts");
/* harmony import */ var _undo__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./undo */ "./src/component/toolbar/undo.ts");
/* harmony import */ var _valign__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./valign */ "./src/component/toolbar/valign.ts");
/* global window */



























function buildDivider() {
    return (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-divider`);
}
function genBtn(it) {
    const btn = new _item__WEBPACK_IMPORTED_MODULE_15__["default"]();
    btn.el.on('click', () => {
        if (it.onClick)
            it.onClick(this.data.getData(), this.data);
    });
    btn.tip = it.tip || '';
    let { el } = it;
    if (it.icon) {
        el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('img').attr('src', it.icon);
    }
    if (el) {
        const icon = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-icon`);
        icon.child(el);
        btn.el.child(icon);
    }
    return btn;
}
class Toolbar {
    data;
    change;
    widthFn;
    isHide;
    items;
    undoEl;
    redoEl;
    paintformatEl;
    clearformatEl;
    formatEl;
    fontEl;
    fontSizeEl;
    boldEl;
    italicEl;
    underlineEl;
    strikeEl;
    textColorEl;
    fillColorEl;
    borderEl;
    mergeEl;
    alignEl;
    valignEl;
    textwrapEl;
    freezeEl;
    autofilterEl;
    formulaEl;
    moreEl;
    el;
    btns;
    btns2;
    constructor(data, widthFn, isHide = false) {
        this.data = data;
        this.change = () => { };
        this.widthFn = widthFn;
        this.isHide = isHide;
        const style = data.defaultStyle();
        this.items = [
            [
                (this.undoEl = new _undo__WEBPACK_IMPORTED_MODULE_25__["default"]()),
                (this.redoEl = new _redo__WEBPACK_IMPORTED_MODULE_20__["default"]()),
                new _print__WEBPACK_IMPORTED_MODULE_19__["default"](),
                (this.paintformatEl = new _paintformat__WEBPACK_IMPORTED_MODULE_18__["default"]()),
                (this.clearformatEl = new _clearformat__WEBPACK_IMPORTED_MODULE_7__["default"]()),
            ],
            buildDivider(),
            [(this.formatEl = new _format__WEBPACK_IMPORTED_MODULE_11__["default"]())],
            buildDivider(),
            [(this.fontEl = new _font__WEBPACK_IMPORTED_MODULE_9__["default"]()), (this.fontSizeEl = new _font_size__WEBPACK_IMPORTED_MODULE_10__["default"]())],
            buildDivider(),
            [
                (this.boldEl = new _bold__WEBPACK_IMPORTED_MODULE_5__["default"]()),
                (this.italicEl = new _italic__WEBPACK_IMPORTED_MODULE_14__["default"]()),
                (this.underlineEl = new _underline__WEBPACK_IMPORTED_MODULE_24__["default"]()),
                (this.strikeEl = new _strike__WEBPACK_IMPORTED_MODULE_21__["default"]()),
                (this.textColorEl = new _text_color__WEBPACK_IMPORTED_MODULE_22__["default"](style.color)),
            ],
            buildDivider(),
            [
                (this.fillColorEl = new _fill_color__WEBPACK_IMPORTED_MODULE_8__["default"](style.bgcolor)),
                (this.borderEl = new _border__WEBPACK_IMPORTED_MODULE_6__["default"]()),
                (this.mergeEl = new _merge__WEBPACK_IMPORTED_MODULE_16__["default"]()),
            ],
            buildDivider(),
            [
                (this.alignEl = new _align__WEBPACK_IMPORTED_MODULE_3__["default"](style.align)),
                (this.valignEl = new _valign__WEBPACK_IMPORTED_MODULE_26__["default"](style.valign)),
                (this.textwrapEl = new _textwrap__WEBPACK_IMPORTED_MODULE_23__["default"]()),
            ],
            buildDivider(),
            [
                (this.freezeEl = new _freeze__WEBPACK_IMPORTED_MODULE_13__["default"]()),
                (this.autofilterEl = new _autofilter__WEBPACK_IMPORTED_MODULE_4__["default"]()),
                (this.formulaEl = new _formula__WEBPACK_IMPORTED_MODULE_12__["default"]()),
            ],
        ];
        const { extendToolbar = {} } = data.settings;
        if (extendToolbar.left && extendToolbar.left.length > 0) {
            this.items.unshift(buildDivider());
            const btns = extendToolbar.left.map(genBtn.bind(this));
            this.items.unshift(btns);
        }
        if (extendToolbar.right && extendToolbar.right.length > 0) {
            this.items.push(buildDivider());
            const btns = extendToolbar.right.map(genBtn.bind(this));
            this.items.push(btns);
        }
        this.items.push([(this.moreEl = new _more__WEBPACK_IMPORTED_MODULE_17__["default"]())]);
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar`);
        this.btns = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-btns`);
        this.items.forEach((it) => {
            if (Array.isArray(it)) {
                it.forEach((i) => {
                    this.btns.child(i.el);
                    i.change = (...args) => {
                        this.change(...args);
                    };
                });
            }
            else {
                this.btns.child(it.el);
            }
        });
        this.el.child(this.btns);
        if (isHide) {
            this.el.hide();
        }
        else {
            this.reset();
            setTimeout(() => {
                this.initBtns2();
                this.moreResize();
            }, 0);
            (0,_event__WEBPACK_IMPORTED_MODULE_2__.bind)(window, 'resize', () => {
                this.moreResize();
            });
        }
    }
    moreResize() {
        const { el, btns, moreEl, btns2 } = this;
        const { moreBtns, contentEl } = moreEl.dd;
        el.css('width', `${this.widthFn()}px`);
        const elBox = el.box();
        let sumWidth = 160;
        let sumWidth2 = 12;
        const list1 = [];
        const list2 = [];
        btns2.forEach(([it, w], index) => {
            sumWidth += w;
            if (index === btns2.length - 1 || sumWidth < elBox.width) {
                list1.push(it);
            }
            else {
                sumWidth2 += w;
                list2.push(it);
            }
        });
        btns.html('').children(...list1);
        moreBtns.html('').children(...list2);
        contentEl.css('width', `${sumWidth2}px`);
        if (list2.length > 0) {
            moreEl.show();
        }
        else {
            moreEl.hide();
        }
    }
    initBtns2() {
        this.btns2 = [];
        this.items.forEach((it) => {
            if (Array.isArray(it)) {
                it.forEach(({ el }) => {
                    const rect = el.box();
                    const { marginLeft, marginRight } = el.computedStyle();
                    this.btns2.push([
                        el,
                        rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10),
                    ]);
                });
            }
            else {
                const rect = it.box();
                const { marginLeft, marginRight } = it.computedStyle();
                this.btns2.push([
                    it,
                    rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10),
                ]);
            }
        });
    }
    paintformatActive() {
        return this.paintformatEl.active();
    }
    paintformatToggle() {
        this.paintformatEl.toggle();
    }
    trigger(type) {
        this[`${type}El`].click();
    }
    resetData(data) {
        this.data = data;
        this.reset();
    }
    reset() {
        if (this.isHide)
            return;
        const { data } = this;
        const style = data.getSelectedCellStyle();
        // console.log('canUndo:', data.canUndo());
        this.undoEl.setState(!data.canUndo());
        this.redoEl.setState(!data.canRedo());
        this.mergeEl.setState(data.canUnmerge(), !data.selector.multiple());
        // this.autofilterEl.setState(!data.canAutofilter());
        // this.mergeEl.disabled();
        // console.log('selectedCell:', style, cell);
        const { font, format } = style;
        this.formatEl.setState(format);
        this.fontEl.setState(font.name);
        this.fontSizeEl.setState(font.size);
        this.boldEl.setState(font.bold);
        this.italicEl.setState(font.italic);
        this.underlineEl.setState(style.underline);
        this.strikeEl.setState(style.strike);
        this.textColorEl.setState(style.color);
        this.fillColorEl.setState(style.bgcolor);
        this.alignEl.setState(style.align);
        this.valignEl.setState(style.valign);
        this.textwrapEl.setState(style.textwrap);
        // console.log('freeze is Active:', data.freezeIsActive());
        this.freezeEl.setState(data.freezeIsActive());
    }
}


/***/ }),

/***/ "./src/component/toolbar/italic.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/italic.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Italic)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Italic extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('font-italic', 'Ctrl+I');
    }
}


/***/ }),

/***/ "./src/component/toolbar/item.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/item.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Item)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tooltip */ "./src/component/tooltip.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../locale/locale */ "./src/locale/locale.ts");




class Item {
    tip;
    tag;
    shortcut;
    // value: any;
    el;
    change;
    // tooltip
    // tag: the subclass type
    // shortcut: shortcut key
    constructor(tag, shortcut, value) {
        this.tip = '';
        if (tag) {
            this.tip = (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.t)(`toolbar.${tag.replace(/-[a-z]/g, (c) => c[1].toUpperCase())}`);
        }
        if (shortcut) {
            this.tip += ` (${shortcut})`;
        }
        this.tag = tag;
        this.shortcut = shortcut;
        // this.value = value;
        this.el = this.element();
        this.change = () => { };
    }
    element() {
        const { tip } = this;
        return (0,_element__WEBPACK_IMPORTED_MODULE_2__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-btn`)
            .on('mouseenter', (evt) => {
            if (this.tip)
                (0,_tooltip__WEBPACK_IMPORTED_MODULE_1__.tooltip)(this.tip, evt.target);
        })
            .attr('data-tooltip', tip);
    }
    setState(...args) { }
}


/***/ }),

/***/ "./src/component/toolbar/merge.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/merge.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Merge)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Merge extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('merge');
    }
    setState(active, disabled) {
        this.el.active(active).disabled(disabled);
    }
}


/***/ }),

/***/ "./src/component/toolbar/more.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/more.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ More)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");





class DropdownMore extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    moreBtns;
    constructor() {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_4__["default"]('ellipsis');
        const moreBtns = (0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toolbar-more`);
        super(icon, 'auto', false, 'bottom-right', moreBtns);
        this.moreBtns = moreBtns;
        this.contentEl.css('max-width', '420px');
    }
}
class More extends _dropdown_item__WEBPACK_IMPORTED_MODULE_1__.DropdownItem {
    constructor() {
        super('more');
        this.dd = new DropdownMore();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
        this.el.hide();
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
    }
}


/***/ }),

/***/ "./src/component/toolbar/paintformat.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/paintformat.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Paintformat)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Paintformat extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('paintformat');
    }
    setState() { }
}


/***/ }),

/***/ "./src/component/toolbar/print.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/print.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Print)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Print extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('print', 'Ctrl+P');
    }
}


/***/ }),

/***/ "./src/component/toolbar/redo.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/redo.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Redo)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Redo extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('redo', 'Ctrl+Y');
    }
}


/***/ }),

/***/ "./src/component/toolbar/strike.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/strike.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Strike)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Strike extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('strike', 'Ctrl+U');
    }
}


/***/ }),

/***/ "./src/component/toolbar/text_color.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/text_color.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TextColor)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_color */ "./src/component/dropdown_color.ts");


class TextColor extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(color) {
        super('color', undefined, color);
        this.dd = new _dropdown_color__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag, color);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/textwrap.ts":
/*!*******************************************!*\
  !*** ./src/component/toolbar/textwrap.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Textwrap)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Textwrap extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('textwrap');
    }
}


/***/ }),

/***/ "./src/component/toolbar/toggle_item.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/toggle_item.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ToggleItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");


class ToggleItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    element() {
        const { tag } = this;
        return super
            .element()
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](tag))
            .on('click', () => this.click());
    }
    click() {
        this.change(this.tag, this.toggle());
    }
    setState(active, disabled) {
        this.el.active(active);
    }
    toggle() {
        return this.el.toggle();
    }
    active() {
        return this.el.hasClass('active');
    }
}


/***/ }),

/***/ "./src/component/toolbar/underline.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/underline.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Underline)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Underline extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('underline', 'Ctrl+U');
    }
}


/***/ }),

/***/ "./src/component/toolbar/undo.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/undo.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Undo)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Undo extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('undo', 'Ctrl+Z');
    }
}


/***/ }),

/***/ "./src/component/toolbar/valign.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/valign.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Valign)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_align__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_align */ "./src/component/dropdown_align.ts");


class Valign extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(value) {
        super('valign', '', value);
        this.dd = new _dropdown_align__WEBPACK_IMPORTED_MODULE_1__["default"](['top', 'middle', 'bottom'], value);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/tooltip.ts":
/*!**********************************!*\
  !*** ./src/component/tooltip.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "tooltip": () => (/* binding */ tooltip)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global document */



function tooltip(html, target) {
    if (target.classList.contains('active')) {
        return;
    }
    const { left, top, width, height } = target.getBoundingClientRect();
    const el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-tooltip`).html(html).show();
    document.body.appendChild(el.el);
    const elBox = el.box();
    // console.log('elBox:', elBox);
    el.css('left', `${left + width / 2 - elBox.width / 2}px`).css('top', `${top + height + 2}px`);
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(target, 'mouseleave', () => {
        if (document.body.contains(el.el)) {
            document.body.removeChild(el.el);
        }
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(target, 'click', () => {
        if (document.body.contains(el.el)) {
            document.body.removeChild(el.el);
        }
    });
}


/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cssPrefix": () => (/* binding */ cssPrefix),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "dpr": () => (/* binding */ dpr)
/* harmony export */ });
/* global window */
const cssPrefix = 'x-spreadsheet';
const dpr = window.devicePixelRatio || 1;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    cssPrefix,
    dpr,
});


/***/ }),

/***/ "./src/core/alphabet.ts":
/*!******************************!*\
  !*** ./src/core/alphabet.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "expr2expr": () => (/* binding */ expr2expr),
/* harmony export */   "expr2xy": () => (/* binding */ expr2xy),
/* harmony export */   "indexAt": () => (/* binding */ indexAt),
/* harmony export */   "stringAt": () => (/* binding */ stringAt),
/* harmony export */   "xy2expr": () => (/* binding */ xy2expr)
/* harmony export */ });
const alphabets = [
    'A',
    'B',
    'C',
    'D',
    'E',
    'F',
    'G',
    'H',
    'I',
    'J',
    'K',
    'L',
    'M',
    'N',
    'O',
    'P',
    'Q',
    'R',
    'S',
    'T',
    'U',
    'V',
    'W',
    'X',
    'Y',
    'Z',
];
/** index number 2 letters
 * @example stringAt(26) ==> 'AA'
 * @date 2019-10-10
 * @export
 * @param {number} index
 * @returns {string}
 */
function stringAt(index) {
    let str = '';
    let cindex = index;
    while (cindex >= alphabets.length) {
        cindex /= alphabets.length;
        cindex -= 1;
        str += alphabets[parseInt(cindex, 10) % alphabets.length];
    }
    const last = index % alphabets.length;
    str += alphabets[last];
    return str;
}
/** translate letter in A1-tag to number
 * @date 2019-10-10
 * @export
 * @param {string} str "AA" in A1-tag "AA1"
 * @returns {number}
 */
function indexAt(str) {
    let ret = 0;
    for (let i = 0; i !== str.length; ++i)
        ret = 26 * ret + str.charCodeAt(i) - 64;
    return ret - 1;
}
// B10 => x,y
/** translate A1-tag to XY-tag
 * @date 2019-10-10
 * @export
 * @param {tagA1} src
 * @returns {tagXY}
 */
function expr2xy(src) {
    let x = '';
    let y = '';
    for (let i = 0; i < src.length; i += 1) {
        if (src.charAt(i) >= '0' && src.charAt(i) <= '9') {
            y += src.charAt(i);
        }
        else {
            x += src.charAt(i);
        }
    }
    return [indexAt(x), parseInt(y, 10) - 1];
}
/** translate XY-tag to A1-tag
 * @example x,y => B10
 * @date 2019-10-10
 * @export
 * @param {number} x
 * @param {number} y
 * @returns {tagA1}
 */
function xy2expr(x, y) {
    return `${stringAt(x)}${y + 1}`;
}
/** translate A1-tag src by (xn, yn)
 * @date 2019-10-10
 * @export
 * @param {tagA1} src
 * @param {number} xn
 * @param {number} yn
 * @returns {tagA1}
 */
function expr2expr(src, xn, yn, condition = (x, y) => true) {
    if (xn === 0 && yn === 0)
        return src;
    const [x, y] = expr2xy(src);
    if (!condition(x, y))
        return src;
    return xy2expr(x + xn, y + yn);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    stringAt,
    indexAt,
    expr2xy,
    xy2expr,
    expr2expr,
});


/***/ }),

/***/ "./src/core/auto_filter.ts":
/*!*********************************!*\
  !*** ./src/core/auto_filter.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AutoFilter)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

// operator: all|eq|neq|gt|gte|lt|lte|in|be
// value:
//   in => []
//   be => [min, max]
class Filter {
    ci;
    operator;
    value;
    constructor(ci, operator, value) {
        this.ci = ci;
        this.operator = operator;
        this.value = value;
    }
    set(operator, value) {
        this.operator = operator;
        this.value = value;
    }
    includes(v) {
        const { operator, value } = this;
        if (operator === 'all') {
            return true;
        }
        if (operator === 'in') {
            return value.includes(v);
        }
        return false;
    }
    vlength() {
        const { operator, value } = this;
        if (operator === 'in') {
            return value.length;
        }
        return 0;
    }
    getData() {
        const { ci, operator, value } = this;
        return { ci, operator, value };
    }
}
class Sort {
    ci;
    order;
    constructor(ci, order) {
        this.ci = ci;
        this.order = order;
    }
    asc() {
        return this.order === 'asc';
    }
    desc() {
        return this.order === 'desc';
    }
}
class AutoFilter {
    ref;
    filters;
    sort;
    constructor() {
        this.ref = null;
        this.filters = [];
        this.sort = null;
    }
    setData({ ref, filters, sort }) {
        if (ref != null) {
            this.ref = ref;
            this.filters = filters.map((it) => new Filter(it.ci, it.operator, it.value));
            if (sort) {
                this.sort = new Sort(sort.ci, sort.order);
            }
        }
    }
    getData() {
        if (this.active()) {
            const { ref, filters, sort } = this;
            return { ref, filters: filters.map((it) => it.getData()), sort };
        }
        return {};
    }
    addFilter(ci, operator, value) {
        const filter = this.getFilter(ci);
        if (filter == null) {
            this.filters.push(new Filter(ci, operator, value));
        }
        else {
            filter.set(operator, value);
        }
    }
    setSort(ci, order) {
        this.sort = order ? new Sort(ci, order) : null;
    }
    includes(ri, ci) {
        if (this.active()) {
            return this.hrange().includes(ri, ci);
        }
        return false;
    }
    getSort(ci) {
        const { sort } = this;
        if (sort && sort.ci === ci) {
            return sort;
        }
        return null;
    }
    getFilter(ci) {
        const { filters } = this;
        for (let i = 0; i < filters.length; i += 1) {
            if (filters[i].ci === ci) {
                return filters[i];
            }
        }
        return null;
    }
    filteredRows(getCell) {
        // const ary = [];
        // let lastri = 0;
        const rset = new Set();
        const fset = new Set();
        if (this.active()) {
            const { sri, eri } = this.range();
            const { filters } = this;
            for (let ri = sri + 1; ri <= eri; ri += 1) {
                for (let i = 0; i < filters.length; i += 1) {
                    const filter = filters[i];
                    const cell = getCell(ri, filter.ci);
                    const ctext = cell ? cell.text : '';
                    if (!filter.includes(ctext)) {
                        rset.add(ri);
                        break;
                    }
                    else {
                        fset.add(ri);
                    }
                }
            }
        }
        return { rset, fset };
    }
    items(ci, getCell) {
        const m = {};
        if (this.active()) {
            const { sri, eri } = this.range();
            for (let ri = sri + 1; ri <= eri; ri += 1) {
                const cell = getCell(ri, ci);
                if (cell !== null && !/^\s*$/.test(cell.text)) {
                    const key = cell.text;
                    const cnt = (m[key] || 0) + 1;
                    m[key] = cnt;
                }
                else {
                    m[''] = (m[''] || 0) + 1;
                }
            }
        }
        return m;
    }
    range() {
        return _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange.valueOf(this.ref);
    }
    hrange() {
        const r = this.range();
        r.eri = r.sri;
        return r;
    }
    clear() {
        this.ref = null;
        this.filters = [];
        this.sort = null;
    }
    active() {
        return this.ref !== null;
    }
}


/***/ }),

/***/ "./src/core/cell.ts":
/*!**************************!*\
  !*** ./src/core/cell.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "infixExprToSuffixExpr": () => (/* binding */ infixExprToSuffixExpr)
/* harmony export */ });
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");


// Converting infix expression to a suffix expression
// src: AVERAGE(SUM(A1,A2), B1) + 50 + B20
// return: [A1, A2], SUM[, B1],AVERAGE,50,+,B20,+
const infixExprToSuffixExpr = (src) => {
    const operatorStack = [];
    const stack = [];
    let subStrs = []; // SUM, A1, B2, 50 ...
    let fnArgType = 0; // 1 => , 2 => :
    let fnArgOperator = '';
    let fnArgsLen = 1; // A1,A2,A3...
    let oldc = '';
    for (let i = 0; i < src.length; i += 1) {
        const c = src.charAt(i);
        if (c !== ' ') {
            if (c >= 'a' && c <= 'z') {
                subStrs.push(c.toUpperCase());
            }
            else if ((c >= '0' && c <= '9') ||
                (c >= 'A' && c <= 'Z') ||
                c === '.') {
                subStrs.push(c);
            }
            else if (c === '"') {
                i += 1;
                while (src.charAt(i) !== '"') {
                    subStrs.push(src.charAt(i));
                    i += 1;
                }
                stack.push(`"${subStrs.join('')}`);
                subStrs = [];
            }
            else if (c === '-' && /[+\-*/,(]/.test(oldc)) {
                subStrs.push(c);
            }
            else {
                // console.log('subStrs:', subStrs.join(''), stack);
                if (c !== '(' && subStrs.length > 0) {
                    stack.push(subStrs.join(''));
                }
                if (c === ')') {
                    let c1 = operatorStack.pop();
                    if (fnArgType === 2) {
                        // fn argument range => A1:B5
                        try {
                            const [ex, ey] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(stack.pop());
                            const [sx, sy] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(stack.pop());
                            // console.log('::', sx, sy, ex, ey);
                            let rangelen = 0;
                            for (let x = sx; x <= ex; x += 1) {
                                for (let y = sy; y <= ey; y += 1) {
                                    stack.push((0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(x, y));
                                    rangelen += 1;
                                }
                            }
                            stack.push([c1, rangelen]);
                        }
                        catch (e) {
                            // console.log(e);
                        }
                    }
                    else if (fnArgType === 1 || fnArgType === 3) {
                        if (fnArgType === 3)
                            stack.push(fnArgOperator);
                        // fn argument => A1,A2,B5
                        stack.push([c1, fnArgsLen]);
                        fnArgsLen = 1;
                    }
                    else {
                        // console.log('c1:', c1, fnArgType, stack, operatorStack);
                        while (c1 !== '(') {
                            stack.push(c1);
                            if (operatorStack.length <= 0)
                                break;
                            c1 = operatorStack.pop();
                        }
                    }
                    fnArgType = 0;
                }
                else if (c === '=' || c === '>' || c === '<') {
                    const nc = src.charAt(i + 1);
                    fnArgOperator = c;
                    if (nc === '=' || nc === '-') {
                        fnArgOperator += nc;
                        i += 1;
                    }
                    fnArgType = 3;
                }
                else if (c === ':') {
                    fnArgType = 2;
                }
                else if (c === ',') {
                    if (fnArgType === 3) {
                        stack.push(fnArgOperator);
                    }
                    fnArgType = 1;
                    fnArgsLen += 1;
                }
                else if (c === '(' && subStrs.length > 0) {
                    // function
                    operatorStack.push(subStrs.join(''));
                }
                else {
                    // priority: */ > +-
                    // console.log('xxxx:', operatorStack, c, stack);
                    if (operatorStack.length > 0 && (c === '+' || c === '-')) {
                        let top = operatorStack[operatorStack.length - 1];
                        if (top !== '(')
                            stack.push(operatorStack.pop());
                        if (top === '*' || top === '/') {
                            while (operatorStack.length > 0) {
                                top = operatorStack[operatorStack.length - 1];
                                if (top !== '(')
                                    stack.push(operatorStack.pop());
                                else
                                    break;
                            }
                        }
                    }
                    else if (operatorStack.length > 0) {
                        const top = operatorStack[operatorStack.length - 1];
                        if (top === '*' || top === '/')
                            stack.push(operatorStack.pop());
                    }
                    operatorStack.push(c);
                }
                subStrs = [];
            }
            oldc = c;
        }
    }
    if (subStrs.length > 0) {
        stack.push(subStrs.join(''));
    }
    while (operatorStack.length > 0) {
        stack.push(operatorStack.pop());
    }
    return stack;
};
const evalSubExpr = (subExpr, cellRender) => {
    const [fl] = subExpr;
    let expr = subExpr;
    if (fl === '"') {
        return subExpr.substring(1);
    }
    let ret = 1;
    if (fl === '-') {
        expr = subExpr.substring(1);
        ret = -1;
    }
    if (expr[0] >= '0' && expr[0] <= '9') {
        return ret * Number(expr);
    }
    const [x, y] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(expr);
    return ret * cellRender(x, y);
};
// evaluate the suffix expression
// srcStack: <= infixExprToSufixExpr
// formulaMap: {'SUM': {}, ...}
// cellRender: (x, y) => {}
const evalSuffixExpr = (srcStack, formulaMap, cellRender, cellList) => {
    const stack = [];
    // console.log(':::::formulaMap:', formulaMap);
    for (let i = 0; i < srcStack.length; i += 1) {
        // console.log(':::>>>', srcStack[i]);
        const expr = srcStack[i];
        const fc = expr[0];
        if (expr === '+') {
            const top = stack.pop();
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('+', stack.pop(), top));
        }
        else if (expr === '-') {
            if (stack.length === 1) {
                const top = stack.pop();
                stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('*', top, -1));
            }
            else {
                const top = stack.pop();
                stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('-', stack.pop(), top));
            }
        }
        else if (expr === '*') {
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('*', stack.pop(), stack.pop()));
        }
        else if (expr === '/') {
            const top = stack.pop();
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('/', stack.pop(), top));
        }
        else if (fc === '=' || fc === '>' || fc === '<') {
            let top = stack.pop();
            if (!Number.isNaN(top))
                top = Number(top);
            let left = stack.pop();
            if (!Number.isNaN(left))
                left = Number(left);
            let ret = false;
            if (fc === '=') {
                ret = left === top;
            }
            else if (expr === '>') {
                ret = left > top;
            }
            else if (expr === '>=') {
                ret = left >= top;
            }
            else if (expr === '<') {
                ret = left < top;
            }
            else if (expr === '<=') {
                ret = left <= top;
            }
            stack.push(ret);
        }
        else if (Array.isArray(expr)) {
            const [formula, len] = expr;
            const params = [];
            for (let j = 0; j < len; j += 1) {
                params.push(stack.pop());
            }
            stack.push(formulaMap[formula].render(params.reverse()));
        }
        else {
            if (cellList.includes(expr)) {
                return 0;
            }
            if ((fc >= 'a' && fc <= 'z') || (fc >= 'A' && fc <= 'Z')) {
                cellList.push(expr);
            }
            stack.push(evalSubExpr(expr, cellRender));
            cellList.pop();
        }
        // console.log('stack:', stack);
    }
    return stack[0];
};
const cellRender = (src, formulaMap, getCellText, cellList = []) => {
    if (src[0] === '=') {
        const stack = infixExprToSuffixExpr(src.substring(1));
        if (stack.length <= 0)
            return src;
        return evalSuffixExpr(stack, formulaMap, (x, y) => cellRender(getCellText(x, y), formulaMap, getCellText, cellList), cellList);
    }
    return src;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    render: cellRender,
});



/***/ }),

/***/ "./src/core/cell_range.ts":
/*!********************************!*\
  !*** ./src/core/cell_range.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CellRange": () => (/* binding */ CellRange),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");

class CellRange {
    sri;
    sci;
    eri;
    eci;
    w;
    h;
    constructor(sri, sci, eri, eci, w = 0, h = 0) {
        this.sri = sri;
        this.sci = sci;
        this.eri = eri;
        this.eci = eci;
        this.w = w;
        this.h = h;
    }
    set(sri, sci, eri, eci) {
        this.sri = sri;
        this.sci = sci;
        this.eri = eri;
        this.eci = eci;
    }
    multiple() {
        return this.eri - this.sri > 0 || this.eci - this.sci > 0;
    }
    // cell-index: ri, ci
    // cell-ref: A10
    includes(...args) {
        let [ri, ci] = [0, 0];
        if (args.length === 1) {
            [ci, ri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(args[0]);
        }
        else if (args.length === 2) {
            [ri, ci] = args;
        }
        const { sri, sci, eri, eci } = this;
        return sri <= ri && ri <= eri && sci <= ci && ci <= eci;
    }
    each(cb, rowFilter = (i) => true) {
        const { sri, sci, eri, eci } = this;
        for (let i = sri; i <= eri; i += 1) {
            if (rowFilter(i)) {
                for (let j = sci; j <= eci; j += 1) {
                    cb(i, j);
                }
            }
        }
    }
    contains(other) {
        return (this.sri <= other.sri &&
            this.sci <= other.sci &&
            this.eri >= other.eri &&
            this.eci >= other.eci);
    }
    // within
    within(other) {
        return (this.sri >= other.sri &&
            this.sci >= other.sci &&
            this.eri <= other.eri &&
            this.eci <= other.eci);
    }
    // disjoint
    disjoint(other) {
        return (this.sri > other.eri ||
            this.sci > other.eci ||
            other.sri > this.eri ||
            other.sci > this.eci);
    }
    // intersects
    intersects(other) {
        return (this.sri <= other.eri &&
            this.sci <= other.eci &&
            other.sri <= this.eri &&
            other.sci <= this.eci);
    }
    // union
    union(other) {
        const { sri, sci, eri, eci } = this;
        return new CellRange(other.sri < sri ? other.sri : sri, other.sci < sci ? other.sci : sci, other.eri > eri ? other.eri : eri, other.eci > eci ? other.eci : eci);
    }
    // intersection
    // intersection(other) {}
    // Returns Array<CellRange> that represents that part of this that does not intersect with other
    // difference
    difference(other) {
        const ret = [];
        const addRet = (sri, sci, eri, eci) => {
            ret.push(new CellRange(sri, sci, eri, eci));
        };
        const { sri, sci, eri, eci } = this;
        const dsr = other.sri - sri;
        const dsc = other.sci - sci;
        const der = eri - other.eri;
        const dec = eci - other.eci;
        if (dsr > 0) {
            addRet(sri, sci, other.sri - 1, eci);
            if (der > 0) {
                addRet(other.eri + 1, sci, eri, eci);
                if (dsc > 0) {
                    addRet(other.sri, sci, other.eri, other.sci - 1);
                }
                if (dec > 0) {
                    addRet(other.sri, other.eci + 1, other.eri, eci);
                }
            }
            else {
                if (dsc > 0) {
                    addRet(other.sri, sci, eri, other.sci - 1);
                }
                if (dec > 0) {
                    addRet(other.sri, other.eci + 1, eri, eci);
                }
            }
        }
        else if (der > 0) {
            addRet(other.eri + 1, sci, eri, eci);
            if (dsc > 0) {
                addRet(sri, sci, other.eri, other.sci - 1);
            }
            if (dec > 0) {
                addRet(sri, other.eci + 1, other.eri, eci);
            }
        }
        if (dsc > 0) {
            addRet(sri, sci, eri, other.sci - 1);
            if (dec > 0) {
                addRet(sri, other.eri + 1, eri, eci);
                if (dsr > 0) {
                    addRet(sri, other.sci, other.sri - 1, other.eci);
                }
                if (der > 0) {
                    addRet(other.sri + 1, other.sci, eri, other.eci);
                }
            }
            else {
                if (dsr > 0) {
                    addRet(sri, other.sci, other.sri - 1, eci);
                }
                if (der > 0) {
                    addRet(other.sri + 1, other.sci, eri, eci);
                }
            }
        }
        else if (dec > 0) {
            addRet(eri, other.eci + 1, eri, eci);
            if (dsr > 0) {
                addRet(sri, sci, other.sri - 1, other.eci);
            }
            if (der > 0) {
                addRet(other.eri + 1, sci, eri, other.eci);
            }
        }
        return ret;
    }
    size() {
        return [this.eri - this.sri + 1, this.eci - this.sci + 1];
    }
    toString() {
        const { sri, sci, eri, eci } = this;
        let ref = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(sci, sri);
        if (this.multiple()) {
            ref = `${ref}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(eci, eri)}`;
        }
        return ref;
    }
    clone() {
        const { sri, sci, eri, eci, w, h } = this;
        return new CellRange(sri, sci, eri, eci, w, h);
    }
    /*
    toJSON() {
      return this.toString();
    }
    */
    equals(other) {
        return (this.eri === other.eri &&
            this.eci === other.eci &&
            this.sri === other.sri &&
            this.sci === other.sci);
    }
    static valueOf(ref) {
        // B1:B8, B1 => 1 x 1 cell range
        const refs = ref.split(':');
        const [sci, sri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(refs[0]);
        let [eri, eci] = [sri, sci];
        if (refs.length > 1) {
            [eci, eri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(refs[1]);
        }
        return new CellRange(sri, sci, eri, eci);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CellRange);



/***/ }),

/***/ "./src/core/clipboard.ts":
/*!*******************************!*\
  !*** ./src/core/clipboard.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Clipboard)
/* harmony export */ });
class Clipboard {
    range;
    state;
    constructor() {
        this.range = null; // CellRange
        this.state = 'clear';
    }
    copy(cellRange) {
        this.range = cellRange;
        this.state = 'copy';
        return this;
    }
    cut(cellRange) {
        this.range = cellRange;
        this.state = 'cut';
        return this;
    }
    isCopy() {
        return this.state === 'copy';
    }
    isCut() {
        return this.state === 'cut';
    }
    isClear() {
        return this.state === 'clear';
    }
    clear() {
        this.range = null;
        this.state = 'clear';
    }
}


/***/ }),

/***/ "./src/core/col.ts":
/*!*************************!*\
  !*** ./src/core/col.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cols": () => (/* binding */ Cols),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");

class Cols {
    _;
    len;
    width;
    indexWidth;
    minWidth;
    constructor({ len, width, indexWidth, minWidth }) {
        this._ = {};
        this.len = len;
        this.width = width;
        this.indexWidth = indexWidth;
        this.minWidth = minWidth;
    }
    setData(d) {
        if (d.len) {
            this.len = d.len;
            delete d.len;
        }
        this._ = d;
    }
    getData() {
        const { len } = this;
        return Object.assign({ len }, this._);
    }
    getWidth(i) {
        if (this.isHide(i))
            return 0;
        const col = this._[i];
        if (col && col.width) {
            return col.width;
        }
        return this.width;
    }
    getOrNew(ci) {
        this._[ci] = this._[ci] || {};
        return this._[ci];
    }
    setWidth(ci, width) {
        const col = this.getOrNew(ci);
        col.width = width;
    }
    unhide(idx) {
        let index = idx;
        while (index > 0) {
            index -= 1;
            if (this.isHide(index)) {
                this.setHide(index, false);
            }
            else
                break;
        }
    }
    isHide(ci) {
        const col = this._[ci];
        return col && col.hide;
    }
    setHide(ci, v) {
        const col = this.getOrNew(ci);
        if (v === true)
            col.hide = true;
        else
            delete col.hide;
    }
    setStyle(ci, style) {
        const col = this.getOrNew(ci);
        col.style = style;
    }
    sumWidth(min, max) {
        return _helper__WEBPACK_IMPORTED_MODULE_0__["default"].rangeSum(min, max, (i) => this.getWidth(i));
    }
    totalWidth() {
        return this.sumWidth(0, this.len);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/data_proxy.ts":
/*!********************************!*\
  !*** ./src/core/data_proxy.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DataProxy),
/* harmony export */   "defaultSettings": () => (/* binding */ defaultSettings)
/* harmony export */ });
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selector */ "./src/core/selector.ts");
/* harmony import */ var _scroll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scroll */ "./src/core/scroll.ts");
/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./history */ "./src/core/history.ts");
/* harmony import */ var _clipboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./clipboard */ "./src/core/clipboard.ts");
/* harmony import */ var _auto_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auto_filter */ "./src/core/auto_filter.ts");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./merge */ "./src/core/merge.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/* harmony import */ var _row__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./row */ "./src/core/row.ts");
/* harmony import */ var _col__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./col */ "./src/core/col.ts");
/* harmony import */ var _validation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./validation */ "./src/core/validation.ts");
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* global document */













// private methods
/*
 * {
 *  name: ''
 *  freeze: [0, 0],
 *  formats: [],
 *  styles: [
 *    {
 *      bgcolor: '',
 *      align: '',
 *      valign: '',
 *      textwrap: false,
 *      strike: false,
 *      underline: false,
 *      color: '',
 *      format: 1,
 *      border: {
 *        left: [style, color],
 *        right: [style, color],
 *        top: [style, color],
 *        bottom: [style, color],
 *      },
 *      font: {
 *        name: 'Helvetica',
 *        size: 10,
 *        bold: false,
 *        italic: false,
 *      }
 *    }
 *  ],
 *  merges: [
 *    'A1:F11',
 *    ...
 *  ],
 *  rows: {
 *    1: {
 *      height: 50,
 *      style: 1,
 *      cells: {
 *        1: {
 *          style: 2,
 *          type: 'string',
 *          text: '',
 *          value: '', // cal result
 *        }
 *      }
 *    },
 *    ...
 *  },
 *  cols: {
 *    2: { width: 100, style: 1 }
 *  }
 * }
 */
const defaultSettings = {
    mode: 'edit',
    view: {
        height: () => document.documentElement.clientHeight,
        width: () => document.documentElement.clientWidth,
    },
    showGrid: true,
    showToolbar: true,
    showContextmenu: true,
    showBottomBar: true,
    row: {
        len: 100,
        height: 25,
    },
    col: {
        len: 26,
        width: 100,
        indexWidth: 60,
        minWidth: 60,
    },
    style: {
        bgcolor: '#ffffff',
        align: 'left',
        valign: 'middle',
        textwrap: false,
        strike: false,
        underline: false,
        color: '#0a0a0a',
        font: {
            name: 'Arial',
            size: 10,
            bold: false,
            italic: false,
        },
        format: 'normal',
    },
};
const toolbarHeight = 41;
const bottombarHeight = 41;
// src: cellRange
// dst: cellRange
function canPaste(src, dst, error = (arg) => { }) {
    const { merges } = this;
    const cellRange = dst.clone();
    const [srn, scn] = src.size();
    const [drn, dcn] = dst.size();
    if (srn > drn) {
        cellRange.eri = dst.sri + srn - 1;
    }
    if (scn > dcn) {
        cellRange.eci = dst.sci + scn - 1;
    }
    if (merges.intersects(cellRange)) {
        error((0,_locale_locale__WEBPACK_IMPORTED_MODULE_12__.t)('error.pasteForMergedCell'));
        return false;
    }
    return true;
}
function copyPaste(srcCellRange, dstCellRange, what, autofill = false) {
    const { rows, merges } = this;
    // delete dest merge
    if (what === 'all' || what === 'format') {
        rows.deleteCells(dstCellRange, what);
        merges.deleteWithin(dstCellRange);
    }
    rows.copyPaste(srcCellRange, dstCellRange, what, autofill, (ri, ci, cell) => {
        if (cell && cell.merge) {
            // console.log('cell:', ri, ci, cell);
            const [rn, cn] = cell.merge;
            if (rn <= 0 && cn <= 0)
                return;
            merges.add(new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, ri + rn, ci + cn));
        }
    });
}
function cutPaste(srcCellRange, dstCellRange) {
    const { clipboard, rows, merges } = this;
    rows.cutPaste(srcCellRange, dstCellRange);
    merges.move(srcCellRange, dstCellRange.sri - srcCellRange.sri, dstCellRange.sci - srcCellRange.sci);
    clipboard.clear();
}
// bss: { top, bottom, left, right }
function setStyleBorder(ri, ci, bss) {
    const { styles, rows } = this;
    const cell = rows.getCellOrNew(ri, ci);
    let cstyle = {};
    if (cell.style !== undefined) {
        cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
    }
    cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(cstyle, { border: bss });
    cell.style = this.addStyle(cstyle);
}
function setStyleBorders({ mode, style, color }) {
    const { styles, selector, rows } = this;
    const { sri, sci, eri, eci } = selector.range;
    const multiple = !this.isSingleSelected();
    if (!multiple) {
        if (mode === 'inside' || mode === 'horizontal' || mode === 'vertical') {
            return;
        }
    }
    if (mode === 'outside' && !multiple) {
        setStyleBorder.call(this, sri, sci, {
            top: [style, color],
            bottom: [style, color],
            left: [style, color],
            right: [style, color],
        });
    }
    else if (mode === 'none') {
        selector.range.each((ri, ci) => {
            const cell = rows.getCell(ri, ci);
            if (cell && cell.style !== undefined) {
                const ns = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
                delete ns.border;
                // ['bottom', 'top', 'left', 'right'].forEach((prop) => {
                //   if (ns[prop]) delete ns[prop];
                // });
                cell.style = this.addStyle(ns);
            }
        });
    }
    else if (mode === 'all' ||
        mode === 'inside' ||
        mode === 'outside' ||
        mode === 'horizontal' ||
        mode === 'vertical') {
        const merges = [];
        for (let ri = sri; ri <= eri; ri += 1) {
            for (let ci = sci; ci <= eci; ci += 1) {
                // jump merges -- start
                const mergeIndexes = [];
                for (let ii = 0; ii < merges.length; ii += 1) {
                    const [mri, mci, rn, cn] = merges[ii];
                    if (ri === mri + rn + 1)
                        mergeIndexes.push(ii);
                    if (mri <= ri && ri <= mri + rn) {
                        if (ci === mci) {
                            ci += cn + 1;
                            break;
                        }
                    }
                }
                mergeIndexes.forEach((it) => merges.splice(it, 1));
                if (ci > eci)
                    break;
                // jump merges -- end
                const cell = rows.getCell(ri, ci);
                let [rn, cn] = [0, 0];
                if (cell && cell.merge) {
                    [rn, cn] = cell.merge;
                    merges.push([ri, ci, rn, cn]);
                }
                const mrl = rn > 0 && ri + rn === eri;
                const mcl = cn > 0 && ci + cn === eci;
                let bss = {};
                if (mode === 'all') {
                    bss = {
                        bottom: [style, color],
                        top: [style, color],
                        left: [style, color],
                        right: [style, color],
                    };
                }
                else if (mode === 'inside') {
                    if (!mcl && ci < eci)
                        bss.right = [style, color];
                    if (!mrl && ri < eri)
                        bss.bottom = [style, color];
                }
                else if (mode === 'horizontal') {
                    if (!mrl && ri < eri)
                        bss.bottom = [style, color];
                }
                else if (mode === 'vertical') {
                    if (!mcl && ci < eci)
                        bss.right = [style, color];
                }
                else if (mode === 'outside' && multiple) {
                    if (sri === ri)
                        bss.top = [style, color];
                    if (mrl || eri === ri)
                        bss.bottom = [style, color];
                    if (sci === ci)
                        bss.left = [style, color];
                    if (mcl || eci === ci)
                        bss.right = [style, color];
                }
                if (Object.keys(bss).length > 0) {
                    setStyleBorder.call(this, ri, ci, bss);
                }
                ci += cn;
            }
        }
    }
    else if (mode === 'top' || mode === 'bottom') {
        for (let ci = sci; ci <= eci; ci += 1) {
            if (mode === 'top') {
                setStyleBorder.call(this, sri, ci, { top: [style, color] });
                ci += rows.getCellMerge(sri, ci)[1];
            }
            if (mode === 'bottom') {
                setStyleBorder.call(this, eri, ci, { bottom: [style, color] });
                ci += rows.getCellMerge(eri, ci)[1];
            }
        }
    }
    else if (mode === 'left' || mode === 'right') {
        for (let ri = sri; ri <= eri; ri += 1) {
            if (mode === 'left') {
                setStyleBorder.call(this, ri, sci, { left: [style, color] });
                ri += rows.getCellMerge(ri, sci)[0];
            }
            if (mode === 'right') {
                setStyleBorder.call(this, ri, eci, { right: [style, color] });
                ri += rows.getCellMerge(ri, eci)[0];
            }
        }
    }
}
function getCellRowByY(y, scrollOffsety) {
    const { rows } = this;
    const fsh = this.freezeTotalHeight();
    // console.log('y:', y, ', fsh:', fsh);
    let inits = rows.height;
    if (fsh + rows.height < y)
        inits -= scrollOffsety;
    // handle ri in autofilter
    const frset = this.exceptRowSet;
    let ri = 0;
    let top = inits;
    let { height } = rows;
    for (; ri < rows.len; ri += 1) {
        if (top > y)
            break;
        if (!frset.has(ri)) {
            height = rows.getHeight(ri);
            top += height;
        }
    }
    top -= height;
    // console.log('ri:', ri, ', top:', top, ', height:', height);
    if (top <= 0) {
        return { ri: -1, top: 0, height };
    }
    return { ri: ri - 1, top, height };
}
function getCellColByX(x, scrollOffsetx) {
    const { cols } = this;
    const fsw = this.freezeTotalWidth();
    let inits = cols.indexWidth;
    if (fsw + cols.indexWidth < x)
        inits -= scrollOffsetx;
    const [ci, left, width] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(0, cols.len, inits, cols.indexWidth, x, (i) => cols.getWidth(i));
    if (left <= 0) {
        return { ci: -1, left: 0, width: cols.indexWidth };
    }
    return { ci: ci - 1, left, width };
}
class DataProxy {
    settings;
    name;
    freeze;
    styles;
    merges;
    rows;
    cols;
    validations;
    hyperlinks;
    comments;
    selector;
    scroll;
    history;
    clipboard;
    autoFilter;
    change;
    exceptRowSet;
    sortedRowMap;
    unsortedRowMap;
    constructor(name, settings) {
        this.settings = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(defaultSettings, settings || {});
        // save data begin
        this.name = name || 'sheet';
        this.freeze = [0, 0];
        this.styles = []; // Array<Style>
        this.merges = new _merge__WEBPACK_IMPORTED_MODULE_5__.Merges(); // [CellRange, ...]
        this.rows = new _row__WEBPACK_IMPORTED_MODULE_7__.Rows(this.settings.row);
        this.cols = new _col__WEBPACK_IMPORTED_MODULE_8__.Cols(this.settings.col);
        this.validations = new _validation__WEBPACK_IMPORTED_MODULE_9__.Validations();
        this.hyperlinks = {};
        this.comments = {};
        // save data end
        // don't save object
        this.selector = new _selector__WEBPACK_IMPORTED_MODULE_0__["default"]();
        this.scroll = new _scroll__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.history = new _history__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.clipboard = new _clipboard__WEBPACK_IMPORTED_MODULE_3__["default"]();
        this.autoFilter = new _auto_filter__WEBPACK_IMPORTED_MODULE_4__["default"]();
        this.change = () => { };
        this.exceptRowSet = new Set();
        this.sortedRowMap = new Map();
        this.unsortedRowMap = new Map();
    }
    addValidation(mode, ref, validator) {
        // console.log('mode:', mode, ', ref:', ref, ', validator:', validator);
        this.changeData(() => {
            this.validations.add(mode, ref, validator);
        });
    }
    removeValidation() {
        const { range } = this.selector;
        this.changeData(() => {
            this.validations.remove(range);
        });
    }
    getSelectedValidator() {
        const { ri, ci } = this.selector;
        const v = this.validations.get(ri, ci);
        return v ? v.validator : null;
    }
    getSelectedValidation() {
        const { ri, ci, range } = this.selector;
        const v = this.validations.get(ri, ci);
        const ret = { ref: range.toString() };
        if (v !== null) {
            ret.mode = v.mode;
            ret.validator = v.validator;
        }
        return ret;
    }
    canUndo() {
        return this.history.canUndo();
    }
    canRedo() {
        return this.history.canRedo();
    }
    undo() {
        this.history.undo(this.getData(), (d) => {
            this.setData(d);
        });
    }
    redo() {
        this.history.redo(this.getData(), (d) => {
            this.setData(d);
        });
    }
    copy() {
        this.clipboard.copy(this.selector.range);
    }
    copyToSystemClipboard(evt) {
        let copyText = [];
        const { sri, eri, sci, eci } = this.selector.range;
        for (let ri = sri; ri <= eri; ri += 1) {
            const row = [];
            for (let ci = sci; ci <= eci; ci += 1) {
                const cell = this.getCell(ri, ci);
                row.push((cell && cell.text) || '');
            }
            copyText.push(row);
        }
        // Adding \n and why not adding \r\n is to support online office and client MS office and WPS
        copyText = copyText.map((row) => row.join('\t')).join('\n');
        // why used this
        // cuz http protocol will be blocked request clipboard by browser
        if (evt) {
            evt.clipboardData.clearData();
            evt.clipboardData.setData('text/plain', copyText);
            evt.preventDefault();
        }
        // this need https protocol
        /* global navigator */
        if (navigator.clipboard) {
            navigator.clipboard.writeText(copyText).then(() => { }, (err) => {
                console.log('text copy to the system clipboard error  ', copyText, err);
            });
        }
    }
    cut() {
        this.clipboard.cut(this.selector.range);
    }
    // what: all | text | format
    paste(what = 'all', error = () => { }) {
        // console.log('sIndexes:', sIndexes);
        const { clipboard, selector } = this;
        if (clipboard.isClear())
            return false;
        if (!canPaste.call(this, clipboard.range, selector.range, error))
            return false;
        this.changeData(() => {
            if (clipboard.isCopy()) {
                copyPaste.call(this, clipboard.range, selector.range, what);
            }
            else if (clipboard.isCut()) {
                cutPaste.call(this, clipboard.range, selector.range);
            }
        });
        return true;
    }
    pasteFromSystemClipboard(resetSheet, eventTrigger) {
        const { selector } = this;
        navigator.clipboard.readText().then((content) => {
            const contentToPaste = this.parseClipboardContent(content);
            let startRow = selector.ri;
            contentToPaste.forEach((row) => {
                let startColumn = selector.ci;
                row.forEach((cellContent) => {
                    this.setCellText(startRow, startColumn, cellContent, 'input');
                    startColumn += 1;
                });
                startRow += 1;
            });
            resetSheet();
            eventTrigger(this.rows.getData());
        });
    }
    parseClipboardContent(clipboardContent) {
        const parsedData = [];
        // first we need to figure out how many rows we need to paste
        const rows = clipboardContent.split('\n');
        // for each row parse cell data
        let i = 0;
        rows.forEach((row) => {
            parsedData[i] = row.split('\t');
            i += 1;
        });
        return parsedData;
    }
    pasteFromText(txt) {
        let lines = [];
        if (/\r\n/.test(txt))
            lines = txt.split('\r\n').map((it) => it.replace(/"/g, '').split('\t'));
        else
            lines = txt.split('\n').map((it) => it.replace(/"/g, '').split('\t'));
        if (lines.length) {
            const { rows, selector } = this;
            this.changeData(() => {
                rows.paste(lines, selector.range);
            });
        }
    }
    autofill(cellRange, what, error = () => { }) {
        const srcRange = this.selector.range;
        if (!canPaste.call(this, srcRange, cellRange, error))
            return false;
        this.changeData(() => {
            copyPaste.call(this, srcRange, cellRange, what, true);
        });
        return true;
    }
    clearClipboard() {
        this.clipboard.clear();
    }
    calSelectedRangeByEnd(ri, ci) {
        const { selector, rows, cols, merges } = this;
        let { sri, sci, eri, eci } = selector.range;
        const cri = selector.ri;
        const cci = selector.ci;
        let [nri, nci] = [ri, ci];
        if (ri < 0)
            nri = rows.len - 1;
        if (ci < 0)
            nci = cols.len - 1;
        if (nri > cri)
            [sri, eri] = [cri, nri];
        else
            [sri, eri] = [nri, cri];
        if (nci > cci)
            [sci, eci] = [cci, nci];
        else
            [sci, eci] = [nci, cci];
        selector.range = merges.union(new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(sri, sci, eri, eci));
        selector.range = merges.union(selector.range);
        // console.log('selector.range:', selector.range);
        return selector.range;
    }
    calSelectedRangeByStart(ri, ci) {
        const { selector, rows, cols, merges } = this;
        let cellRange = merges.getFirstIncludes(ri, ci);
        // console.log('cellRange:', cellRange, ri, ci, merges);
        if (cellRange === null) {
            cellRange = new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, ri, ci);
            if (ri === -1) {
                cellRange.sri = 0;
                cellRange.eri = rows.len - 1;
            }
            if (ci === -1) {
                cellRange.sci = 0;
                cellRange.eci = cols.len - 1;
            }
        }
        selector.range = cellRange;
        return cellRange;
    }
    setSelectedCellAttr(property, value) {
        this.changeData(() => {
            const { selector, styles, rows } = this;
            if (property === 'merge') {
                if (value)
                    this.merge();
                else
                    this.unmerge();
            }
            else if (property === 'border') {
                setStyleBorders.call(this, value);
            }
            else if (property === 'formula') {
                // console.log('>>>', selector.multiple());
                const { ri, ci, range } = selector;
                if (selector.multiple()) {
                    const [rn, cn] = selector.size();
                    const { sri, sci, eri, eci } = range;
                    if (rn > 1) {
                        for (let i = sci; i <= eci; i += 1) {
                            const cell = rows.getCellOrNew(eri + 1, i);
                            cell.text = `=${value}(${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(i, sri)}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(i, eri)})`;
                        }
                    }
                    else if (cn > 1) {
                        const cell = rows.getCellOrNew(ri, eci + 1);
                        cell.text = `=${value}(${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(sci, ri)}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(eci, ri)})`;
                    }
                }
                else {
                    const cell = rows.getCellOrNew(ri, ci);
                    cell.text = `=${value}()`;
                }
            }
            else {
                selector.range.each((ri, ci) => {
                    const cell = rows.getCellOrNew(ri, ci);
                    let cstyle = {};
                    if (cell.style !== undefined) {
                        cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
                    }
                    if (property === 'format') {
                        cstyle.format = value;
                        cell.style = this.addStyle(cstyle);
                    }
                    else if (property === 'font-bold' ||
                        property === 'font-italic' ||
                        property === 'font-name' ||
                        property === 'font-size') {
                        const nfont = {};
                        nfont[property.split('-')[1]] = value;
                        cstyle.font = Object.assign(cstyle.font || {}, nfont);
                        cell.style = this.addStyle(cstyle);
                    }
                    else if (property === 'strike' ||
                        property === 'textwrap' ||
                        property === 'underline' ||
                        property === 'align' ||
                        property === 'valign' ||
                        property === 'color' ||
                        property === 'bgcolor') {
                        cstyle[property] = value;
                        cell.style = this.addStyle(cstyle);
                    }
                    else {
                        cell[property] = value;
                    }
                });
            }
        });
    }
    // state: input | finished
    setSelectedCellText(text, state = 'input') {
        const { autoFilter, selector, rows } = this;
        const { ri, ci } = selector;
        let nri = ri;
        if (this.unsortedRowMap.has(ri)) {
            nri = this.unsortedRowMap.get(ri);
        }
        const oldCell = rows.getCell(nri, ci);
        const oldText = oldCell ? oldCell.text : '';
        this.setCellText(nri, ci, text, state);
        // replace filter.value
        if (autoFilter.active()) {
            const filter = autoFilter.getFilter(ci);
            if (filter) {
                const vIndex = filter.value.findIndex((v) => v === oldText);
                if (vIndex >= 0) {
                    filter.value.splice(vIndex, 1, text);
                }
                // console.log('filter:', filter, oldCell);
            }
        }
        // this.resetAutoFilter();
    }
    getSelectedCell() {
        const { ri, ci } = this.selector;
        let nri = ri;
        if (this.unsortedRowMap.has(ri)) {
            nri = this.unsortedRowMap.get(ri);
        }
        return this.rows.getCell(nri, ci);
    }
    xyInSelectedRect(x, y) {
        const { left, top, width, height } = this.getSelectedRect();
        const x1 = x - this.cols.indexWidth;
        const y1 = y - this.rows.height;
        // console.log('x:', x, ',y:', y, 'left:', left, 'top:', top);
        return x1 > left && x1 < left + width && y1 > top && y1 < top + height;
    }
    getSelectedRect() {
        return this.getRect(this.selector.range);
    }
    getClipboardRect() {
        const { clipboard } = this;
        if (!clipboard.isClear()) {
            return this.getRect(clipboard.range);
        }
        return { left: -100, top: -100 };
    }
    getRect(cellRange) {
        const { scroll, rows, cols, exceptRowSet } = this;
        const { sri, sci, eri, eci } = cellRange;
        // console.log('sri:', sri, ',sci:', sci, ', eri:', eri, ', eci:', eci);
        // no selector
        if (sri < 0 && sci < 0) {
            return {
                left: 0,
                l: 0,
                top: 0,
                t: 0,
                scroll,
            };
        }
        const left = cols.sumWidth(0, sci);
        const top = rows.sumHeight(0, sri, exceptRowSet);
        const height = rows.sumHeight(sri, eri + 1, exceptRowSet);
        const width = cols.sumWidth(sci, eci + 1);
        // console.log('sri:', sri, ', sci:', sci, ', eri:', eri, ', eci:', eci);
        let left0 = left - scroll.x;
        let top0 = top - scroll.y;
        const fsh = this.freezeTotalHeight();
        const fsw = this.freezeTotalWidth();
        if (fsw > 0 && fsw > left) {
            left0 = left;
        }
        if (fsh > 0 && fsh > top) {
            top0 = top;
        }
        return {
            l: left,
            t: top,
            left: left0,
            top: top0,
            height,
            width,
            scroll,
        };
    }
    getCellRectByXY(x, y) {
        const { scroll, merges, rows, cols } = this;
        let { ri, top, height } = getCellRowByY.call(this, y, scroll.y);
        let { ci, left, width } = getCellColByX.call(this, x, scroll.x);
        if (ci === -1) {
            width = cols.totalWidth();
        }
        if (ri === -1) {
            height = rows.totalHeight();
        }
        if (ri >= 0 || ci >= 0) {
            const merge = merges.getFirstIncludes(ri, ci);
            if (merge) {
                ri = merge.sri;
                ci = merge.sci;
                ({ left, top, width, height } = this.cellRect(ri, ci));
            }
        }
        return {
            ri,
            ci,
            left,
            top,
            width,
            height,
        };
    }
    isSingleSelected() {
        const { sri, sci, eri, eci } = this.selector.range;
        const cell = this.getCell(sri, sci);
        if (cell && cell.merge) {
            const [rn, cn] = cell.merge;
            if (sri + rn === eri && sci + cn === eci)
                return true;
        }
        return !this.selector.multiple();
    }
    canUnmerge() {
        const { sri, sci, eri, eci } = this.selector.range;
        const cell = this.getCell(sri, sci);
        if (cell && cell.merge) {
            const [rn, cn] = cell.merge;
            if (sri + rn === eri && sci + cn === eci)
                return true;
        }
        return false;
    }
    merge() {
        const { selector, rows } = this;
        if (this.isSingleSelected())
            return;
        const [rn, cn] = selector.size();
        // console.log('merge:', rn, cn);
        if (rn > 1 || cn > 1) {
            const { sri, sci } = selector.range;
            this.changeData(() => {
                const cell = rows.getCellOrNew(sri, sci);
                cell.merge = [rn - 1, cn - 1];
                this.merges.add(selector.range);
                // delete merge cells
                this.rows.deleteCells(selector.range);
                // console.log('cell:', cell, this.d);
                this.rows.setCell(sri, sci, cell);
            });
        }
    }
    unmerge() {
        const { selector } = this;
        if (!this.isSingleSelected())
            return;
        const { sri, sci } = selector.range;
        this.changeData(() => {
            this.rows.deleteCell(sri, sci, 'merge');
            this.merges.deleteWithin(selector.range);
        });
    }
    canAutofilter() {
        return !this.autoFilter.active();
    }
    autofilter() {
        const { autoFilter, selector } = this;
        this.changeData(() => {
            if (autoFilter.active()) {
                autoFilter.clear();
                this.exceptRowSet = new Set();
                this.sortedRowMap = new Map();
                this.unsortedRowMap = new Map();
            }
            else {
                autoFilter.ref = selector.range.toString();
            }
        });
    }
    setAutoFilter(ci, order, operator, value) {
        const { autoFilter } = this;
        autoFilter.addFilter(ci, operator, value);
        autoFilter.setSort(ci, order);
        this.resetAutoFilter();
    }
    resetAutoFilter() {
        const { autoFilter, rows } = this;
        if (!autoFilter.active())
            return;
        const { sort } = autoFilter;
        const { rset, fset } = autoFilter.filteredRows((r, c) => rows.getCell(r, c));
        const fary = Array.from(fset);
        const oldAry = Array.from(fset);
        if (sort) {
            fary.sort((a, b) => {
                if (sort.order === 'asc') {
                    return a - b;
                }
                if (sort.order === 'desc') {
                    return b - a;
                }
                return 0;
            });
        }
        this.exceptRowSet = rset;
        this.sortedRowMap = new Map();
        this.unsortedRowMap = new Map();
        fary.forEach((it, index) => {
            this.sortedRowMap.set(oldAry[index], it);
            this.unsortedRowMap.set(it, oldAry[index]);
        });
    }
    deleteCell(what = 'all') {
        const { selector } = this;
        this.changeData(() => {
            this.rows.deleteCells(selector.range, what);
            if (what === 'all' || what === 'format') {
                this.merges.deleteWithin(selector.range);
            }
        });
    }
    // type: row | column
    insert(type, n = 1) {
        this.changeData(() => {
            const { sri, sci } = this.selector.range;
            const { rows, merges, cols } = this;
            let si = sri;
            if (type === 'row') {
                rows.insert(sri, n);
            }
            else if (type === 'column') {
                rows.insertColumn(sci, n);
                si = sci;
                cols.len += 1;
            }
            merges.shift(type, si, n, (ri, ci, rn, cn) => {
                const cell = rows.getCell(ri, ci);
                cell.merge[0] += rn;
                cell.merge[1] += cn;
            });
        });
    }
    // type: row | column
    delete(type) {
        this.changeData(() => {
            const { rows, merges, selector, cols } = this;
            const { range } = selector;
            const { sri, sci, eri, eci } = selector.range;
            const [rsize, csize] = selector.range.size();
            let si = sri;
            let size = rsize;
            if (type === 'row') {
                rows.delete(sri, eri);
            }
            else if (type === 'column') {
                rows.deleteColumn(sci, eci);
                si = range.sci;
                size = csize;
                cols.len -= eci - sci + 1;
            }
            // console.log('type:', type, ', si:', si, ', size:', size);
            merges.shift(type, si, -size, (ri, ci, rn, cn) => {
                // console.log('ri:', ri, ', ci:', ci, ', rn:', rn, ', cn:', cn);
                const cell = rows.getCell(ri, ci);
                cell.merge[0] += rn;
                cell.merge[1] += cn;
                if (cell.merge[0] === 0 && cell.merge[1] === 0) {
                    delete cell.merge;
                }
            });
        });
    }
    scrollx(x, cb) {
        const { scroll, freeze, cols } = this;
        const [, fci] = freeze;
        const [ci, left, width] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(fci, cols.len, 0, 0, x, (i) => cols.getWidth(i));
        // console.log('fci:', fci, ', ci:', ci);
        let x1 = left;
        if (x > 0)
            x1 += width;
        if (scroll.x !== x1) {
            scroll.ci = x > 0 ? ci : 0;
            scroll.x = x1;
            cb();
        }
    }
    scrolly(y, cb) {
        const { scroll, freeze, rows } = this;
        const [fri] = freeze;
        const [ri, top, height] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(fri, rows.len, 0, 0, y, (i) => rows.getHeight(i));
        let y1 = top;
        if (y > 0)
            y1 += height;
        // console.log('ri:', ri, ' ,y:', y1);
        if (scroll.y !== y1) {
            scroll.ri = y > 0 ? ri : 0;
            scroll.y = y1;
            cb();
        }
    }
    cellRect(ri, ci) {
        const { rows, cols } = this;
        const left = cols.sumWidth(0, ci);
        const top = rows.sumHeight(0, ri);
        const cell = rows.getCell(ri, ci);
        let width = cols.getWidth(ci);
        let height = rows.getHeight(ri);
        if (cell !== null) {
            if (cell.merge) {
                const [rn, cn] = cell.merge;
                // console.log('cell.merge:', cell.merge);
                if (rn > 0) {
                    for (let i = 1; i <= rn; i += 1) {
                        height += rows.getHeight(ri + i);
                    }
                }
                if (cn > 0) {
                    for (let i = 1; i <= cn; i += 1) {
                        width += cols.getWidth(ci + i);
                    }
                }
            }
        }
        // console.log('data:', this.d);
        return {
            left,
            top,
            width,
            height,
            cell,
        };
    }
    getCell(ri, ci) {
        return this.rows.getCell(ri, ci);
    }
    getCellTextOrDefault(ri, ci) {
        const cell = this.getCell(ri, ci);
        return cell && cell.text ? cell.text : '';
    }
    getCellStyle(ri, ci) {
        const cell = this.getCell(ri, ci);
        if (cell && cell.style !== undefined) {
            return this.styles[cell.style];
        }
        return null;
    }
    getCellStyleOrDefault(ri, ci) {
        const { styles, rows } = this;
        const cell = rows.getCell(ri, ci);
        const cellStyle = cell && cell.style !== undefined ? styles[cell.style] : {};
        return _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(this.defaultStyle(), cellStyle);
    }
    getSelectedCellStyle() {
        const { ri, ci } = this.selector;
        return this.getCellStyleOrDefault(ri, ci);
    }
    // state: input | finished
    setCellText(ri, ci, text, state) {
        const { rows, history, validations } = this;
        if (state === 'finished') {
            rows.setCellText(ri, ci, '');
            history.add(this.getData());
            rows.setCellText(ri, ci, text);
        }
        else {
            rows.setCellText(ri, ci, text);
            this.change(this.getData());
        }
        // validator
        validations.validate(ri, ci, text);
    }
    freezeIsActive() {
        const [ri, ci] = this.freeze;
        return ri > 0 || ci > 0;
    }
    setFreeze(ri, ci) {
        this.changeData(() => {
            this.freeze = [ri, ci];
        });
    }
    freezeTotalWidth() {
        return this.cols.sumWidth(0, this.freeze[1]);
    }
    freezeTotalHeight() {
        return this.rows.sumHeight(0, this.freeze[0]);
    }
    setRowHeight(ri, height) {
        this.changeData(() => {
            this.rows.setHeight(ri, height);
        });
    }
    setColWidth(ci, width) {
        this.changeData(() => {
            this.cols.setWidth(ci, width);
        });
    }
    viewHeight() {
        const { view, showToolbar, showBottomBar } = this.settings;
        let h = view.height();
        if (showBottomBar) {
            h -= bottombarHeight;
        }
        if (showToolbar) {
            h -= toolbarHeight;
        }
        return h;
    }
    viewWidth() {
        return this.settings.view.width();
    }
    freezeViewRange() {
        const [ri, ci] = this.freeze;
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(0, 0, ri - 1, ci - 1, this.freezeTotalWidth(), this.freezeTotalHeight());
    }
    contentRange() {
        const { rows, cols } = this;
        const [ri, ci] = rows.maxCell();
        const h = rows.sumHeight(0, ri + 1);
        const w = cols.sumWidth(0, ci + 1);
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(0, 0, ri, ci, w, h);
    }
    exceptRowTotalHeight(sri, eri) {
        const { exceptRowSet, rows } = this;
        const exceptRows = Array.from(exceptRowSet);
        let exceptRowTH = 0;
        exceptRows.forEach((ri) => {
            if (ri < sri || ri > eri) {
                const height = rows.getHeight(ri);
                exceptRowTH += height;
            }
        });
        return exceptRowTH;
    }
    viewRange() {
        const { scroll, rows, cols, freeze, exceptRowSet } = this;
        // console.log('scroll:', scroll, ', freeze:', freeze)
        let { ri, ci } = scroll;
        if (ri <= 0)
            [ri] = freeze;
        if (ci <= 0)
            [, ci] = freeze;
        let [x, y] = [0, 0];
        let [eri, eci] = [rows.len, cols.len];
        for (let i = ri; i < rows.len; i += 1) {
            if (!exceptRowSet.has(i)) {
                y += rows.getHeight(i);
                eri = i;
            }
            if (y > this.viewHeight())
                break;
        }
        for (let j = ci; j < cols.len; j += 1) {
            x += cols.getWidth(j);
            eci = j;
            if (x > this.viewWidth())
                break;
        }
        // console.log(ri, ci, eri, eci, x, y);
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, eri, eci, x, y);
    }
    eachMergesInView(viewRange, cb) {
        this.merges.filterIntersects(viewRange).forEach((it) => cb(it));
    }
    hideRowsOrCols() {
        const { rows, cols, selector } = this;
        const [rlen, clen] = selector.size();
        const { sri, sci, eri, eci } = selector.range;
        if (rlen === rows.len) {
            for (let ci = sci; ci <= eci; ci += 1) {
                cols.setHide(ci, true);
            }
        }
        else if (clen === cols.len) {
            for (let ri = sri; ri <= eri; ri += 1) {
                rows.setHide(ri, true);
            }
        }
    }
    // type: row | col
    // index row-index | col-index
    unhideRowsOrCols(type, index) {
        this[`${type}s`].unhide(index);
    }
    rowEach(min, max, cb) {
        let y = 0;
        const { rows } = this;
        const frset = this.exceptRowSet;
        const frary = [...frset];
        let offset = 0;
        for (let i = 0; i < frary.length; i += 1) {
            if (frary[i] < min) {
                offset += 1;
            }
        }
        // console.log('min:', min, ', max:', max, ', scroll:', scroll);
        for (let i = min + offset; i <= max + offset; i += 1) {
            if (frset.has(i)) {
                offset += 1;
            }
            else {
                const rowHeight = rows.getHeight(i);
                if (rowHeight > 0) {
                    cb(i, y, rowHeight);
                    y += rowHeight;
                    if (y > this.viewHeight())
                        break;
                }
            }
        }
    }
    colEach(min, max, cb) {
        let x = 0;
        const { cols } = this;
        for (let i = min; i <= max; i += 1) {
            const colWidth = cols.getWidth(i);
            if (colWidth > 0) {
                cb(i, x, colWidth);
                x += colWidth;
                if (x > this.viewWidth())
                    break;
            }
        }
    }
    defaultStyle() {
        return this.settings.style;
    }
    addStyle(nstyle) {
        const { styles } = this;
        // console.log('old.styles:', styles, nstyle);
        for (let i = 0; i < styles.length; i += 1) {
            const style = styles[i];
            if (_helper__WEBPACK_IMPORTED_MODULE_6__["default"].equals(style, nstyle))
                return i;
        }
        styles.push(nstyle);
        return styles.length - 1;
    }
    changeData(cb) {
        this.history.add(this.getData());
        cb();
        this.change(this.getData());
    }
    setData(d) {
        Object.keys(d).forEach((property) => {
            if (property === 'merges' ||
                property === 'rows' ||
                property === 'cols' ||
                property === 'validations') {
                this[property].setData(d[property]);
            }
            else if (property === 'freeze') {
                const [x, y] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.expr2xy)(d[property]);
                this.freeze = [y, x];
            }
            else if (property === 'autofilter') {
                this.autoFilter.setData(d[property]);
            }
            else if (d[property] !== undefined) {
                this[property] = d[property];
            }
        });
        return this;
    }
    getData() {
        const { name, freeze, styles, merges, rows, cols, validations, autoFilter, } = this;
        return {
            name,
            freeze: (0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(freeze[1], freeze[0]),
            styles,
            merges: merges.getData(),
            rows: rows.getData(),
            cols: cols.getData(),
            validations: validations.getData(),
            autofilter: autoFilter.getData(),
        };
    }
}


/***/ }),

/***/ "./src/core/font.ts":
/*!**************************!*\
  !*** ./src/core/font.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFonts": () => (/* binding */ baseFonts),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "fontSizes": () => (/* binding */ fontSizes),
/* harmony export */   "fonts": () => (/* binding */ fonts),
/* harmony export */   "getFontSizePxByPt": () => (/* binding */ getFontSizePxByPt)
/* harmony export */ });
// docs
/** default font list
 * @type {BaseFont[]}
 */
const baseFonts = [
    { key: 'Arial', title: 'Arial' },
    { key: 'Helvetica', title: 'Helvetica' },
    { key: 'Source Sans Pro', title: 'Source Sans Pro' },
    { key: 'Comic Sans MS', title: 'Comic Sans MS' },
    { key: 'Courier New', title: 'Courier New' },
    { key: 'Verdana', title: 'Verdana' },
    { key: 'Lato', title: 'Lato' },
];
/** default fontSize list
 * @type {FontSize[]}
 */
const fontSizes = [
    { pt: 7.5, px: 10 },
    { pt: 8, px: 11 },
    { pt: 9, px: 12 },
    { pt: 10, px: 13 },
    { pt: 10.5, px: 14 },
    { pt: 11, px: 15 },
    { pt: 12, px: 16 },
    { pt: 14, px: 18.7 },
    { pt: 15, px: 20 },
    { pt: 16, px: 21.3 },
    { pt: 18, px: 24 },
    { pt: 22, px: 29.3 },
    { pt: 24, px: 32 },
    { pt: 26, px: 34.7 },
    { pt: 36, px: 48 },
    { pt: 42, px: 56 },
    // { pt: 54, px: 71.7 },
    // { pt: 63, px: 83.7 },
    // { pt: 72, px: 95.6 },
];
/** map pt to px
 * @date 2019-10-10
 * @param {fontsizePT} pt
 * @returns {fontsizePX}
 */
function getFontSizePxByPt(pt) {
    for (let i = 0; i < fontSizes.length; i += 1) {
        const fontSize = fontSizes[i];
        if (fontSize.pt === pt) {
            return fontSize.px;
        }
    }
    return pt;
}
/** transform baseFonts to map
 * @date 2019-10-10
 * @param {BaseFont[]} [ary=[]]
 * @returns {object}
 */
function fonts(ary = []) {
    const map = {};
    baseFonts.concat(ary).forEach((f) => {
        map[f.key] = f;
    });
    return map;
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/format.ts":
/*!****************************!*\
  !*** ./src/core/format.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFormats": () => (/* binding */ baseFormats),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "formatm": () => (/* binding */ formatm)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");

const formatStringRender = (v) => v;
const formatNumberRender = (v) => {
    // match "-12.1" or "12" or "12.1"
    if (/^(-?\d*.?\d*)$/.test(v)) {
        const v1 = Number(v).toFixed(2).toString();
        const [first, ...parts] = v1.split('\\.');
        return [first.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,'), ...parts];
    }
    return v;
};
const baseFormats = [
    {
        key: 'normal',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.normal'),
        type: 'string',
        render: formatStringRender,
    },
    {
        key: 'text',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.text'),
        type: 'string',
        render: formatStringRender,
    },
    {
        key: 'number',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.number'),
        type: 'number',
        label: '1,000.12',
        render: formatNumberRender,
    },
    {
        key: 'percent',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.percent'),
        type: 'number',
        label: '10.12%',
        render: (v) => `${v}%`,
    },
    {
        key: 'rmb',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.rmb'),
        type: 'number',
        label: '10.00',
        render: (v) => `${formatNumberRender(v)}`,
    },
    {
        key: 'usd',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.usd'),
        type: 'number',
        label: '$10.00',
        render: (v) => `$${formatNumberRender(v)}`,
    },
    {
        key: 'eur',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.eur'),
        type: 'number',
        label: '10.00',
        render: (v) => `${formatNumberRender(v)}`,
    },
    {
        key: 'date',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.date'),
        type: 'date',
        label: '26/09/2008',
        render: formatStringRender,
    },
    {
        key: 'time',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.time'),
        type: 'date',
        label: '15:59:00',
        render: formatStringRender,
    },
    {
        key: 'datetime',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.datetime'),
        type: 'date',
        label: '26/09/2008 15:59:00',
        render: formatStringRender,
    },
    {
        key: 'duration',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.duration'),
        type: 'date',
        label: '24:01:00',
        render: formatStringRender,
    },
];
// const formats = (ary = []) => {
//   const map = {};
//   baseFormats.concat(ary).forEach((f) => {
//     map[f.key] = f;
//   });
//   return map;
// };
const formatm = {};
baseFormats.forEach((f) => {
    formatm[f.key] = f;
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/formula.ts":
/*!*****************************!*\
  !*** ./src/core/formula.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFormulas": () => (/* binding */ baseFormulas),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "formulam": () => (/* binding */ formulam),
/* harmony export */   "formulas": () => (/* binding */ formulas)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/**
  formula:
    key
    title
    render
*/
/**
 * @typedef {object} Formula
 * @property {string} key
 * @property {function} title
 * @property {function} render
 */


/** @type {Formula[]} */
const baseFormulas = [
    {
        key: 'SUM',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.sum'),
        render: (ary) => ary.reduce((a, b) => (0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('+', a, b), 0),
    },
    {
        key: 'AVERAGE',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.average'),
        render: (ary) => ary.reduce((a, b) => Number(a) + Number(b), 0) / ary.length,
    },
    {
        key: 'MAX',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.max'),
        render: (ary) => Math.max(...ary.map((v) => Number(v))),
    },
    {
        key: 'MIN',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.min'),
        render: (ary) => Math.min(...ary.map((v) => Number(v))),
    },
    {
        key: 'IF',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula._if'),
        render: ([b, t, f]) => (b ? t : f),
    },
    {
        key: 'AND',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.and'),
        render: (ary) => ary.every((it) => it),
    },
    {
        key: 'OR',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.or'),
        render: (ary) => ary.some((it) => it),
    },
    {
        key: 'CONCAT',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.concat'),
        render: (ary) => ary.join(''),
    },
    /* support:  1 + A1 + B2 * 3
    {
      key: 'DIVIDE',
      title: tf('formula.divide'),
      render: ary => ary.reduce((a, b) => Number(a) / Number(b)),
    },
    {
      key: 'PRODUCT',
      title: tf('formula.product'),
      render: ary => ary.reduce((a, b) => Number(a) * Number(b),1),
    },
    {
      key: 'SUBTRACT',
      title: tf('formula.subtract'),
      render: ary => ary.reduce((a, b) => Number(a) - Number(b)),
    },
    */
];
const formulas = baseFormulas;
// const formulas = (formulaAry = []) => {
//   const formulaMap = {};
//   baseFormulas.concat(formulaAry).forEach((f) => {
//     formulaMap[f.key] = f;
//   });
//   return formulaMap;
// };
const formulam = {};
baseFormulas.forEach((f) => {
    formulam[f.key] = f;
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/helper.ts":
/*!****************************!*\
  !*** ./src/core/helper.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "numberCalc": () => (/* binding */ numberCalc)
/* harmony export */ });
/* eslint-disable no-param-reassign */
function cloneDeep(obj) {
    return JSON.parse(JSON.stringify(obj));
}
const mergeDeep = (object = {}, ...sources) => {
    sources.forEach((source) => {
        Object.keys(source).forEach((key) => {
            const v = source[key];
            // console.log('k:', key, ', v:', source[key], typeof v, v instanceof Object);
            if (typeof v === 'string' ||
                typeof v === 'number' ||
                typeof v === 'boolean') {
                object[key] = v;
            }
            else if (typeof v !== 'function' &&
                !Array.isArray(v) &&
                v instanceof Object) {
                object[key] = object[key] || {};
                mergeDeep(object[key], v);
            }
            else {
                object[key] = v;
            }
        });
    });
    // console.log('::', object);
    return object;
};
function equals(obj1, obj2) {
    const keys = Object.keys(obj1);
    if (keys.length !== Object.keys(obj2).length)
        return false;
    for (let i = 0; i < keys.length; i += 1) {
        const k = keys[i];
        const v1 = obj1[k];
        const v2 = obj2[k];
        if (v2 === undefined)
            return false;
        if (typeof v1 === 'string' ||
            typeof v1 === 'number' ||
            typeof v1 === 'boolean') {
            if (v1 !== v2)
                return false;
        }
        else if (Array.isArray(v1)) {
            if (v1.length !== v2.length)
                return false;
            for (let ai = 0; ai < v1.length; ai += 1) {
                if (!equals(v1[ai], v2[ai]))
                    return false;
            }
        }
        else if (typeof v1 !== 'function' &&
            !Array.isArray(v1) &&
            v1 instanceof Object) {
            if (!equals(v1, v2))
                return false;
        }
    }
    return true;
}
/*
  objOrAry: obejct or Array
  cb: (value, index | key) => { return value }
*/
const sum = (objOrAry, cb = (value, k) => value) => {
    let total = 0;
    let size = 0;
    Object.keys(objOrAry).forEach((key) => {
        total += cb(objOrAry[key], key);
        size += 1;
    });
    return [total, size];
};
function deleteProperty(obj, property) {
    const oldv = obj[`${property}`];
    delete obj[`${property}`];
    return oldv;
}
function rangeReduceIf(min, max, inits, initv, ifv, getv) {
    let s = inits;
    let v = initv;
    let i = min;
    for (; i < max; i += 1) {
        if (s > ifv)
            break;
        v = getv(i);
        s += v;
    }
    return [i, s - v, v];
}
function rangeSum(min, max, getv) {
    let s = 0;
    for (let i = min; i < max; i += 1) {
        s += getv(i);
    }
    return s;
}
function rangeEach(min, max, cb) {
    for (let i = min; i < max; i += 1) {
        cb(i);
    }
}
function arrayEquals(a1, a2) {
    if (a1.length === a2.length) {
        for (let i = 0; i < a1.length; i += 1) {
            if (a1[i] !== a2[i])
                return false;
        }
    }
    else
        return false;
    return true;
}
function digits(a) {
    const v = `${a}`;
    let ret = 0;
    let flag = false;
    for (let i = 0; i < v.length; i += 1) {
        if (flag === true)
            ret += 1;
        if (v.charAt(i) === '.')
            flag = true;
    }
    return ret;
}
function numberCalc(type, a1, a2) {
    if (Number.isNaN(a1) || Number.isNaN(a2)) {
        return a1 + type + a2;
    }
    const al1 = digits(a1);
    const al2 = digits(a2);
    const num1 = Number(a1);
    const num2 = Number(a2);
    let ret = 0;
    if (type === '-') {
        ret = num1 - num2;
    }
    else if (type === '+') {
        ret = num1 + num2;
    }
    else if (type === '*') {
        ret = num1 * num2;
    }
    else if (type === '/') {
        ret = num1 / num2;
        if (digits(ret) > 5)
            return ret.toFixed(2);
        return ret;
    }
    return ret.toFixed(Math.max(al1, al2));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    cloneDeep,
    merge: (...sources) => mergeDeep({}, ...sources),
    equals,
    arrayEquals,
    sum,
    rangeEach,
    rangeSum,
    rangeReduceIf,
    deleteProperty,
    numberCalc,
});


/***/ }),

/***/ "./src/core/history.ts":
/*!*****************************!*\
  !*** ./src/core/history.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ History)
/* harmony export */ });
// import helper from '../helper';
class History {
    undoItems;
    redoItems;
    constructor() {
        this.undoItems = [];
        this.redoItems = [];
    }
    add(data) {
        this.undoItems.push(JSON.stringify(data));
        this.redoItems = [];
    }
    canUndo() {
        return this.undoItems.length > 0;
    }
    canRedo() {
        return this.redoItems.length > 0;
    }
    undo(currentd, cb) {
        const { undoItems, redoItems } = this;
        if (this.canUndo()) {
            redoItems.push(JSON.stringify(currentd));
            cb(JSON.parse(undoItems.pop()));
        }
    }
    redo(currentd, cb) {
        const { undoItems, redoItems } = this;
        if (this.canRedo()) {
            undoItems.push(JSON.stringify(currentd));
            cb(JSON.parse(redoItems.pop()));
        }
    }
}


/***/ }),

/***/ "./src/core/merge.ts":
/*!***************************!*\
  !*** ./src/core/merge.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Merges": () => (/* binding */ Merges),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

class Merges {
    _;
    constructor(d = []) {
        this._ = d;
    }
    forEach(cb) {
        this._.forEach(cb);
    }
    deleteWithin(cr) {
        this._ = this._.filter((it) => !it.within(cr));
    }
    getFirstIncludes(ri, ci) {
        for (let i = 0; i < this._.length; i += 1) {
            const it = this._[i];
            if (it.includes(ri, ci)) {
                return it;
            }
        }
        return null;
    }
    filterIntersects(cellRange) {
        return new Merges(this._.filter((it) => it.intersects(cellRange)));
    }
    intersects(cellRange) {
        for (let i = 0; i < this._.length; i += 1) {
            const it = this._[i];
            if (it.intersects(cellRange)) {
                // console.log('intersects');
                return true;
            }
        }
        return false;
    }
    union(cellRange) {
        let cr = cellRange;
        this._.forEach((it) => {
            if (it.intersects(cr)) {
                cr = it.union(cr);
            }
        });
        return cr;
    }
    add(cr) {
        this.deleteWithin(cr);
        this._.push(cr);
    }
    // type: row | column
    shift(type, index, n, cbWithin) {
        this._.forEach((cellRange) => {
            const { sri, sci, eri, eci } = cellRange;
            const range = cellRange;
            if (type === 'row') {
                if (sri >= index) {
                    range.sri += n;
                    range.eri += n;
                }
                else if (sri < index && index <= eri) {
                    range.eri += n;
                    cbWithin(sri, sci, n, 0);
                }
            }
            else if (type === 'column') {
                if (sci >= index) {
                    range.sci += n;
                    range.eci += n;
                }
                else if (sci < index && index <= eci) {
                    range.eci += n;
                    cbWithin(sri, sci, 0, n);
                }
            }
        });
    }
    move(cellRange, rn, cn) {
        this._.forEach((it1) => {
            const it = it1;
            if (it.within(cellRange)) {
                it.eri += rn;
                it.sri += rn;
                it.sci += cn;
                it.eci += cn;
            }
        });
    }
    setData(merges) {
        this._ = merges.map((merge) => _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange.valueOf(merge));
        return this;
    }
    getData() {
        return this._.map((merge) => merge.toString());
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/row.ts":
/*!*************************!*\
  !*** ./src/core/row.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Rows": () => (/* binding */ Rows),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");


class Rows {
    _;
    len;
    height;
    constructor({ len, height }) {
        this._ = {};
        this.len = len;
        // default row height
        this.height = height;
    }
    getHeight(ri) {
        if (this.isHide(ri))
            return 0;
        const row = this.get(ri);
        if (row && row.height) {
            return row.height;
        }
        return this.height;
    }
    setHeight(ri, v) {
        const row = this.getOrNew(ri);
        row.height = v;
    }
    unhide(idx) {
        let index = idx;
        while (index > 0) {
            index -= 1;
            if (this.isHide(index)) {
                this.setHide(index, false);
            }
            else
                break;
        }
    }
    isHide(ri) {
        const row = this.get(ri);
        return row && row.hide;
    }
    setHide(ri, v) {
        const row = this.getOrNew(ri);
        if (v === true)
            row.hide = true;
        else
            delete row.hide;
    }
    setStyle(ri, style) {
        const row = this.getOrNew(ri);
        row.style = style;
    }
    sumHeight(min, max, exceptSet) {
        return _helper__WEBPACK_IMPORTED_MODULE_0__["default"].rangeSum(min, max, (i) => {
            if (exceptSet && exceptSet.has(i))
                return 0;
            return this.getHeight(i);
        });
    }
    totalHeight() {
        return this.sumHeight(0, this.len);
    }
    get(ri) {
        return this._[ri];
    }
    getOrNew(ri) {
        this._[ri] = this._[ri] || { cells: {} };
        return this._[ri];
    }
    getCell(ri, ci) {
        const row = this.get(ri);
        if (row !== undefined &&
            row.cells !== undefined &&
            row.cells[ci] !== undefined) {
            return row.cells[ci];
        }
        return null;
    }
    getCellMerge(ri, ci) {
        const cell = this.getCell(ri, ci);
        if (cell && cell.merge)
            return cell.merge;
        return [0, 0];
    }
    getCellOrNew(ri, ci) {
        const row = this.getOrNew(ri);
        row.cells[ci] = row.cells[ci] || {};
        return row.cells[ci];
    }
    // what: all | text | format
    setCell(ri, ci, cell, what = 'all') {
        const row = this.getOrNew(ri);
        if (what === 'all') {
            row.cells[ci] = cell;
        }
        else if (what === 'text') {
            row.cells[ci] = row.cells[ci] || {};
            row.cells[ci].text = cell.text;
        }
        else if (what === 'format') {
            row.cells[ci] = row.cells[ci] || {};
            row.cells[ci].style = cell.style;
            if (cell.merge)
                row.cells[ci].merge = cell.merge;
        }
    }
    setCellText(ri, ci, text) {
        const cell = this.getCellOrNew(ri, ci);
        if (cell.editable !== false)
            cell.text = text;
    }
    // what: all | format | text
    copyPaste(srcCellRange, dstCellRange, what, autofill = false, cb = (...args) => { }) {
        const { sri, sci, eri, eci } = srcCellRange;
        const dsri = dstCellRange.sri;
        const dsci = dstCellRange.sci;
        const deri = dstCellRange.eri;
        const deci = dstCellRange.eci;
        const [rn, cn] = srcCellRange.size();
        const [drn, dcn] = dstCellRange.size();
        // console.log(srcIndexes, dstIndexes);
        let isAdd = true;
        let dn = 0;
        if (deri < sri || deci < sci) {
            isAdd = false;
            if (deri < sri)
                dn = drn;
            else
                dn = dcn;
        }
        for (let i = sri; i <= eri; i += 1) {
            if (this._[i]) {
                for (let j = sci; j <= eci; j += 1) {
                    if (this._[i].cells && this._[i].cells[j]) {
                        for (let ii = dsri; ii <= deri; ii += rn) {
                            for (let jj = dsci; jj <= deci; jj += cn) {
                                const nri = ii + (i - sri);
                                const nci = jj + (j - sci);
                                const ncell = _helper__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(this._[i].cells[j]);
                                // ncell.text
                                if (autofill && ncell && ncell.text && ncell.text.length > 0) {
                                    const { text } = ncell;
                                    let n = jj - dsci + (ii - dsri) + 2;
                                    if (!isAdd) {
                                        n -= dn + 1;
                                    }
                                    if (text[0] === '=') {
                                        ncell.text = text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => {
                                            let [xn, yn] = [0, 0];
                                            if (sri === dsri) {
                                                xn = n - 1;
                                                // if (isAdd) xn -= 1;
                                            }
                                            else {
                                                yn = n - 1;
                                            }
                                            if (/^\d+$/.test(word))
                                                return word;
                                            return (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, xn, yn);
                                        });
                                    }
                                    else if ((rn <= 1 && cn > 1 && (dsri > eri || deri < sri)) ||
                                        (cn <= 1 && rn > 1 && (dsci > eci || deci < sci)) ||
                                        (rn <= 1 && cn <= 1)) {
                                        const result = /[\\.\d]+$/.exec(text);
                                        // console.log('result:', result);
                                        if (result !== null) {
                                            const index = Number(result[0]) + n - 1;
                                            ncell.text = text.substring(0, result.index) + index;
                                        }
                                    }
                                }
                                this.setCell(nri, nci, ncell, what);
                                cb(nri, nci, ncell);
                            }
                        }
                    }
                }
            }
        }
    }
    cutPaste(srcCellRange, dstCellRange) {
        const ncellmm = {};
        this.each((ri) => {
            this.eachCells(ri, (ci) => {
                let nri = parseInt(ri, 10);
                let nci = parseInt(ci, 10);
                if (srcCellRange.includes(ri, ci)) {
                    nri = dstCellRange.sri + (nri - srcCellRange.sri);
                    nci = dstCellRange.sci + (nci - srcCellRange.sci);
                }
                ncellmm[nri] = ncellmm[nri] || { cells: {} };
                ncellmm[nri].cells[nci] = this._[ri].cells[ci];
            });
        });
        this._ = ncellmm;
    }
    // src: Array<Array<String>>
    paste(src, dstCellRange) {
        if (src.length <= 0)
            return;
        const { sri, sci } = dstCellRange;
        src.forEach((row, i) => {
            const ri = sri + i;
            row.forEach((cell, j) => {
                const ci = sci + j;
                this.setCellText(ri, ci, cell);
            });
        });
    }
    insert(sri, n = 1) {
        const ndata = {};
        this.each((ri, row) => {
            let nri = parseInt(ri, 10);
            if (nri >= sri) {
                nri += n;
                this.eachCells(ri, (ci, cell) => {
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, 0, n, (x, y) => y >= sri));
                    }
                });
            }
            ndata[nri] = row;
        });
        this._ = ndata;
        this.len += n;
    }
    delete(sri, eri) {
        const n = eri - sri + 1;
        const ndata = {};
        this.each((ri, row) => {
            const nri = parseInt(ri, 10);
            if (nri < sri) {
                ndata[nri] = row;
            }
            else if (ri > eri) {
                ndata[nri - n] = row;
                this.eachCells(ri, (ci, cell) => {
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, 0, -n, (x, y) => y > eri));
                    }
                });
            }
        });
        this._ = ndata;
        this.len -= n;
    }
    insertColumn(sci, n = 1) {
        this.each((ri, row) => {
            const rndata = {};
            this.eachCells(ri, (ci, cell) => {
                let nci = parseInt(ci, 10);
                if (nci >= sci) {
                    nci += n;
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, n, 0, (x) => x >= sci));
                    }
                }
                rndata[nci] = cell;
            });
            row.cells = rndata;
        });
    }
    deleteColumn(sci, eci) {
        const n = eci - sci + 1;
        this.each((ri, row) => {
            const rndata = {};
            this.eachCells(ri, (ci, cell) => {
                const nci = parseInt(ci, 10);
                if (nci < sci) {
                    rndata[nci] = cell;
                }
                else if (nci > eci) {
                    rndata[nci - n] = cell;
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, -n, 0, (x) => x > eci));
                    }
                }
            });
            row.cells = rndata;
        });
    }
    // what: all | text | format | merge
    deleteCells(cellRange, what = 'all') {
        cellRange.each((i, j) => {
            this.deleteCell(i, j, what);
        });
    }
    // what: all | text | format | merge
    deleteCell(ri, ci, what = 'all') {
        const row = this.get(ri);
        if (row !== null) {
            const cell = this.getCell(ri, ci);
            if (cell !== null && cell.editable !== false) {
                if (what === 'all') {
                    delete row.cells[ci];
                }
                else if (what === 'text') {
                    if (cell.text)
                        delete cell.text;
                    if (cell.value)
                        delete cell.value;
                }
                else if (what === 'format') {
                    if (cell.style !== undefined)
                        delete cell.style;
                    if (cell.merge)
                        delete cell.merge;
                }
                else if (what === 'merge') {
                    if (cell.merge)
                        delete cell.merge;
                }
            }
        }
    }
    maxCell() {
        const keys = Object.keys(this._);
        const ri = keys[keys.length - 1];
        const col = this._[ri];
        if (col) {
            const { cells } = col;
            const ks = Object.keys(cells);
            const ci = ks[ks.length - 1];
            return [parseInt(ri, 10), parseInt(ci, 10)];
        }
        return [0, 0];
    }
    each(cb) {
        Object.entries(this._).forEach(([ri, row]) => {
            cb(ri, row);
        });
    }
    eachCells(ri, cb) {
        if (this._[ri] && this._[ri].cells) {
            Object.entries(this._[ri].cells).forEach(([ci, cell]) => {
                cb(ci, cell);
            });
        }
    }
    setData(d) {
        if (d.len) {
            this.len = d.len;
            delete d.len;
        }
        this._ = d;
    }
    getData() {
        const { len } = this;
        return Object.assign({ len }, this._);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/scroll.ts":
/*!****************************!*\
  !*** ./src/core/scroll.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Scroll)
/* harmony export */ });
class Scroll {
    x;
    y;
    ri;
    ci;
    constructor() {
        this.x = 0; // left
        this.y = 0; // top
        this.ri = 0; // cell row-index
        this.ci = 0; // cell col-index
    }
}


/***/ }),

/***/ "./src/core/selector.ts":
/*!******************************!*\
  !*** ./src/core/selector.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Selector)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

class Selector {
    range;
    ri;
    ci;
    constructor() {
        this.range = new _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange(0, 0, 0, 0);
        this.ri = 0;
        this.ci = 0;
    }
    multiple() {
        return this.range.multiple();
    }
    setIndexes(ri, ci) {
        this.ri = ri;
        this.ci = ci;
    }
    size() {
        return this.range.size();
    }
}


/***/ }),

/***/ "./src/core/validation.ts":
/*!********************************!*\
  !*** ./src/core/validation.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Validations": () => (/* binding */ Validations),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validator */ "./src/core/validator.ts");
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");


class Validation {
    refs;
    mode;
    validator;
    constructor(mode, refs, validator) {
        this.refs = refs;
        this.mode = mode; // cell
        this.validator = validator;
    }
    includes(ri, ci) {
        const { refs } = this;
        for (let i = 0; i < refs.length; i += 1) {
            const cr = _cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(refs[i]);
            if (cr.includes(ri, ci))
                return true;
        }
        return false;
    }
    addRef(ref) {
        this.remove(_cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(ref));
        this.refs.push(ref);
    }
    remove(cellRange) {
        const nrefs = [];
        this.refs.forEach((it) => {
            const cr = _cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(it);
            if (cr.intersects(cellRange)) {
                const crs = cr.difference(cellRange);
                crs.forEach((it1) => nrefs.push(it1.toString()));
            }
            else {
                nrefs.push(it);
            }
        });
        this.refs = nrefs;
    }
    getData() {
        const { refs, mode, validator } = this;
        const { type, required, operator, value } = validator;
        return {
            refs,
            mode,
            type,
            required,
            operator,
            value,
        };
    }
    static valueOf({ refs, mode, type, required, operator, value }) {
        return new Validation(mode, refs, new _validator__WEBPACK_IMPORTED_MODULE_0__["default"](type, required, value, operator));
    }
}
class Validations {
    _;
    errors;
    constructor() {
        this._ = [];
        // ri_ci: errMessage
        this.errors = new Map();
    }
    getError(ri, ci) {
        return this.errors.get(`${ri}_${ci}`);
    }
    validate(ri, ci, text) {
        const v = this.get(ri, ci);
        const key = `${ri}_${ci}`;
        const { errors } = this;
        if (v !== null) {
            const [flag, message] = v.validator.validate(text);
            if (!flag) {
                errors.set(key, message);
            }
            else {
                errors.delete(key);
            }
        }
        else {
            errors.delete(key);
        }
        return true;
    }
    // type: date|number|phone|email|list
    // validator: { required, value, operator }
    add(mode, ref, { type, required, value, operator }) {
        const validator = new _validator__WEBPACK_IMPORTED_MODULE_0__["default"](type, required, value, operator);
        const v = this.getByValidator(validator);
        if (v !== null) {
            v.addRef(ref);
        }
        else {
            this._.push(new Validation(mode, [ref], validator));
        }
    }
    getByValidator(validator) {
        for (let i = 0; i < this._.length; i += 1) {
            const v = this._[i];
            if (v.validator.equals(validator)) {
                return v;
            }
        }
        return null;
    }
    get(ri, ci) {
        for (let i = 0; i < this._.length; i += 1) {
            const v = this._[i];
            if (v.includes(ri, ci))
                return v;
        }
        return null;
    }
    remove(cellRange) {
        this.each((it) => {
            it.remove(cellRange);
        });
    }
    each(cb) {
        this._.forEach((it) => cb(it));
    }
    getData() {
        return this._.filter((it) => it.refs.length > 0).map((it) => it.getData());
    }
    setData(d) {
        this._ = d.map((it) => Validation.valueOf(it));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/validator.ts":
/*!*******************************!*\
  !*** ./src/core/validator.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Validator)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");


const rules = {
    phone: /^[1-9]\d{10}$/,
    email: /w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/,
};
function returnMessage(flag, key, ...arg) {
    let message = '';
    if (!flag) {
        message = (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.t)(`validation.${key}`, ...arg);
    }
    return [flag, message];
}
class Validator {
    required;
    value;
    type;
    operator;
    message;
    // operator: b|nb|eq|neq|lt|lte|gt|gte
    // type: date|number|list|phone|email
    constructor(type, required, value, operator) {
        this.required = required;
        this.value = value;
        this.type = type;
        this.operator = operator;
        this.message = '';
    }
    parseValue(v) {
        const { type } = this;
        if (type === 'date') {
            return new Date(v);
        }
        if (type === 'number') {
            return Number(v);
        }
        return v;
    }
    equals(other) {
        let flag = this.type === other.type &&
            this.required === other.required &&
            this.operator === other.operator;
        if (flag) {
            if (Array.isArray(this.value)) {
                flag = _helper__WEBPACK_IMPORTED_MODULE_1__["default"].arrayEquals(this.value, other.value);
            }
            else {
                flag = this.value === other.value;
            }
        }
        return flag;
    }
    values() {
        return this.value.split(',');
    }
    validate(v) {
        const { required, operator, value, type } = this;
        if (required && /^\s*$/.test(v)) {
            return returnMessage(false, 'required');
        }
        if (/^\s*$/.test(v))
            return [true];
        if (rules[type] && !rules[type].test(v)) {
            return returnMessage(false, 'notMatch');
        }
        if (type === 'list') {
            return returnMessage(this.values().includes(v), 'notIn');
        }
        if (operator) {
            const v1 = this.parseValue(v);
            if (operator === 'be') {
                const [min, max] = value;
                return returnMessage(v1 >= this.parseValue(min) && v1 <= this.parseValue(max), 'between', min, max);
            }
            if (operator === 'nbe') {
                const [min, max] = value;
                return returnMessage(v1 < this.parseValue(min) || v1 > this.parseValue(max), 'notBetween', min, max);
            }
            if (operator === 'eq') {
                return returnMessage(v1 === this.parseValue(value), 'equal', value);
            }
            if (operator === 'neq') {
                return returnMessage(v1 !== this.parseValue(value), 'notEqual', value);
            }
            if (operator === 'lt') {
                return returnMessage(v1 < this.parseValue(value), 'lessThan', value);
            }
            if (operator === 'lte') {
                return returnMessage(v1 <= this.parseValue(value), 'lessThanEqual', value);
            }
            if (operator === 'gt') {
                return returnMessage(v1 > this.parseValue(value), 'greaterThan', value);
            }
            if (operator === 'gte') {
                return returnMessage(v1 >= this.parseValue(value), 'greaterThanEqual', value);
            }
        }
        return [true];
    }
}


/***/ }),

/***/ "./src/locale/en.ts":
/*!**************************!*\
  !*** ./src/locale/en.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    toolbar: {
        undo: 'Undo',
        redo: 'Redo',
        print: 'Print',
        paintformat: 'Paint format',
        clearformat: 'Clear format',
        format: 'Format',
        fontName: 'Font',
        fontSize: 'Font size',
        fontBold: 'Font bold',
        fontItalic: 'Font italic',
        underline: 'Underline',
        strike: 'Strike',
        color: 'Text color',
        bgcolor: 'Fill color',
        border: 'Borders',
        merge: 'Merge cells',
        align: 'Horizontal align',
        valign: 'Vertical align',
        textwrap: 'Text wrapping',
        freeze: 'Freeze cell',
        autofilter: 'Filter',
        formula: 'Functions',
        more: 'More',
    },
    contextmenu: {
        copy: 'Copy',
        cut: 'Cut',
        paste: 'Paste',
        pasteValue: 'Paste values only',
        pasteFormat: 'Paste format only',
        hide: 'Hide',
        insertRow: 'Insert row',
        insertColumn: 'Insert column',
        deleteSheet: 'Delete',
        deleteRow: 'Delete row',
        deleteColumn: 'Delete column',
        deleteCell: 'Delete cell',
        deleteCellText: 'Delete cell text',
        validation: 'Data validations',
        cellprintable: 'Enable export',
        cellnonprintable: 'Disable export',
        celleditable: 'Enable editing',
        cellnoneditable: 'Disable editing',
    },
    print: {
        size: 'Paper size',
        orientation: 'Page orientation',
        orientations: ['Landscape', 'Portrait'],
    },
    format: {
        normal: 'Normal',
        text: 'Plain Text',
        number: 'Number',
        percent: 'Percent',
        rmb: 'RMB',
        usd: 'USD',
        eur: 'EUR',
        date: 'Date',
        time: 'Time',
        datetime: 'Date time',
        duration: 'Duration',
    },
    formula: {
        sum: 'Sum',
        average: 'Average',
        max: 'Max',
        min: 'Min',
        _if: 'IF',
        and: 'AND',
        or: 'OR',
        concat: 'Concat',
    },
    validation: {
        required: 'it must be required',
        notMatch: 'it not match its validation rule',
        between: 'it is between {} and {}',
        notBetween: 'it is not between {} and {}',
        notIn: 'it is not in list',
        equal: 'it equal to {}',
        notEqual: 'it not equal to {}',
        lessThan: 'it less than {}',
        lessThanEqual: 'it less than or equal to {}',
        greaterThan: 'it greater than {}',
        greaterThanEqual: 'it greater than or equal to {}',
    },
    error: {
        pasteForMergedCell: 'Unable to do this for merged cells',
    },
    calendar: {
        weeks: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        months: [
            'January',
            'February',
            'March',
            'April',
            'May',
            'June',
            'July',
            'August',
            'September',
            'October',
            'November',
            'December',
        ],
    },
    button: {
        next: 'Next',
        cancel: 'Cancel',
        remove: 'Remove',
        save: 'Save',
        ok: 'OK',
    },
    sort: {
        desc: 'Sort Z -> A',
        asc: 'Sort A -> Z',
    },
    filter: {
        empty: 'empty',
    },
    dataValidation: {
        mode: 'Mode',
        range: 'Cell Range',
        criteria: 'Criteria',
        modeType: {
            cell: 'Cell',
            column: 'Colun',
            row: 'Row',
        },
        type: {
            list: 'List',
            number: 'Number',
            date: 'Date',
            phone: 'Phone',
            email: 'Email',
        },
        operator: {
            be: 'between',
            nbe: 'not betwwen',
            lt: 'less than',
            lte: 'less than or equal to',
            gt: 'greater than',
            gte: 'greater than or equal to',
            eq: 'equal to',
            neq: 'not equal to',
        },
    },
});


/***/ }),

/***/ "./src/locale/locale.ts":
/*!******************************!*\
  !*** ./src/locale/locale.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "locale": () => (/* binding */ locale),
/* harmony export */   "t": () => (/* binding */ t),
/* harmony export */   "tf": () => (/* binding */ tf)
/* harmony export */ });
/* harmony import */ var _en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./en */ "./src/locale/en.ts");
/* global window */

// Defines the fallback language as English
let $languages = ['en'];
const $messages = {
    en: _en__WEBPACK_IMPORTED_MODULE_0__["default"],
};
function translate(key, messages) {
    if (messages) {
        // Return the translation from the first language in the languages array
        // that has a value for the provided key.
        for (const lang of $languages) {
            if (!messages[lang])
                break;
            let message = messages[lang];
            // Splits the key at '.' except where escaped as '\.'
            const keys = key.match(/(?:\\.|[^.])+/g);
            for (let i = 0; i < keys.length; i += 1) {
                const property = keys[i];
                const value = message[property];
                // If value doesn't exist, try next language
                if (!value)
                    break;
                if (i === keys.length - 1)
                    return value;
                // Move down to the next level of the messages object
                message = value;
            }
        }
    }
    return undefined;
}
function t(key, ...args) {
    let v = translate(key, $messages);
    if (!v && window && window.x_spreadsheet && window.x_spreadsheet.$messages) {
        v = translate(key, window.x_spreadsheet.$messages);
    }
    return v || '';
}
function tf(key) {
    return () => t(key);
}
// If clearLangList is set to false, lang will be added to the front of the
// languages array. The languages in the language array are searched in order
// to find a translation. This allows the use of other languages as a fallback
// if lang is missing some keys. The language array is preloaded with English.
// To set the languages array to only include lang, set clearLangList to true.
function locale(lang, message, clearLangList = false) {
    if (clearLangList) {
        $languages = [lang];
    }
    else {
        // Append to front of array.
        // Translation method will use the first language in the list that has a
        // matching key.
        $languages.unshift(lang);
    }
    if (message) {
        $messages[lang] = message;
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    t,
});



/***/ }),

/***/ "./assets/sprite.svg":
/*!***************************!*\
  !*** ./assets/sprite.svg ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "7a05ab5bcad662d05f5c.svg";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		__webpack_require__.b = document.baseURI || self.location.href;
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"xspreadsheet": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// no jsonp function
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Spreadsheet": () => (/* binding */ Spreadsheet),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "spreadsheet": () => (/* binding */ spreadsheet)
/* harmony export */ });
/* harmony import */ var _component_bottombar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/bottombar */ "./src/component/bottombar.ts");
/* harmony import */ var _component_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/element */ "./src/component/element.ts");
/* harmony import */ var _component_sheet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component/sheet */ "./src/component/sheet.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ "./src/config.ts");
/* harmony import */ var _core_data_proxy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/data_proxy */ "./src/core/data_proxy.ts");
/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.less */ "./src/index.less");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locale/locale */ "./src/locale/locale.ts");
/* global window, document */







class Spreadsheet {
    options;
    sheetIndex;
    datas;
    bottombar;
    sheet;
    data;
    constructor(selectors, options = {}) {
        let targetEl = selectors;
        this.options = { showBottomBar: true, ...options };
        this.sheetIndex = 1;
        this.datas = [];
        if (typeof selectors === 'string') {
            targetEl = document.querySelector(selectors);
        }
        this.bottombar = this.options.showBottomBar
            ? new _component_bottombar__WEBPACK_IMPORTED_MODULE_0__["default"](() => {
                if (this.options.mode === 'read')
                    return;
                const d = this.addSheet();
                this.sheet.resetData(d);
            }, (index) => {
                const d = this.datas[index];
                this.sheet.resetData(d);
            }, () => {
                this.deleteSheet();
            }, (index, value) => {
                this.datas[index].name = value;
                this.sheet.trigger('change');
            })
            : null;
        this.data = this.addSheet();
        const rootEl = (0,_component_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}`).on('contextmenu', (evt) => evt.preventDefault());
        // create canvas element
        targetEl.appendChild(rootEl.el);
        this.sheet = new _component_sheet__WEBPACK_IMPORTED_MODULE_2__["default"](rootEl, this.data);
        if (this.bottombar !== null) {
            rootEl.child(this.bottombar.el);
        }
    }
    addSheet(name, active = true) {
        const n = name || `sheet${this.sheetIndex}`;
        const d = new _core_data_proxy__WEBPACK_IMPORTED_MODULE_4__["default"](n, this.options);
        d.change = (...args) => {
            this.sheet.trigger('change', ...args);
        };
        this.datas.push(d);
        // console.log('d:', n, d, this.datas);
        if (this.bottombar !== null) {
            this.bottombar.addItem(n, active, this.options);
        }
        this.sheetIndex += 1;
        return d;
    }
    deleteSheet() {
        if (this.bottombar === null)
            return;
        const [oldIndex, nindex] = this.bottombar.deleteItem();
        if (oldIndex >= 0) {
            this.datas.splice(oldIndex, 1);
            if (nindex >= 0)
                this.sheet.resetData(this.datas[nindex]);
            this.sheet.trigger('change');
        }
    }
    loadData(data) {
        const ds = Array.isArray(data) ? data : [data];
        if (this.bottombar !== null) {
            this.bottombar.clear();
        }
        this.datas = [];
        if (ds.length > 0) {
            for (let i = 0; i < ds.length; i += 1) {
                const it = ds[i];
                const nd = this.addSheet(it.name, i === 0);
                nd.setData(it);
                if (i === 0) {
                    this.sheet.resetData(nd);
                }
            }
        }
        return this;
    }
    getData() {
        return this.datas.map((it) => it.getData());
    }
    cellText(ri, ci, text, sheetIndex = 0) {
        this.datas[sheetIndex].setCellText(ri, ci, text, 'finished');
        return this;
    }
    cell(ri, ci, sheetIndex = 0) {
        return this.datas[sheetIndex].getCell(ri, ci);
    }
    cellStyle(ri, ci, sheetIndex = 0) {
        return this.datas[sheetIndex].getCellStyle(ri, ci);
    }
    reRender() {
        this.sheet.table.render();
        return this;
    }
    on(eventName, func) {
        this.sheet.on(eventName, func);
        return this;
    }
    validate() {
        const { validations } = this.data;
        return validations.errors.size <= 0;
    }
    change(cb) {
        this.sheet.on('change', cb);
        return this;
    }
    static locale(lang, message) {
        (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.locale)(lang, message);
    }
}
const spreadsheet = (el, options = {}) => new Spreadsheet(el, options);
if (window) {
    window.x_spreadsheet = spreadsheet;
    window.x_spreadsheet.locale = (lang, message) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.locale)(lang, message);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Spreadsheet);


})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieHNwcmVhZHNoZWV0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDMEc7QUFDakI7QUFDTztBQUNoRyw0Q0FBNEMsZ0hBQXVDO0FBQ25GLDhCQUE4QixtRkFBMkIsQ0FBQyw0RkFBcUM7QUFDL0YseUNBQXlDLHNGQUErQjtBQUN4RTtBQUNBLGdEQUFnRCxjQUFjLEdBQUcsa0JBQWtCLG9CQUFvQix3QkFBd0Isc0JBQXNCLDJCQUEyQixpRkFBaUYsNEJBQTRCLHFCQUFxQix3Q0FBd0MsR0FBRywyQkFBMkIsbUZBQW1GLEdBQUcsd0JBQXdCLHVCQUF1QixxQkFBcUIsR0FBRyx3QkFBd0IsMkJBQTJCLEdBQUcsMEJBQTBCLHlCQUF5Qix1QkFBdUIsc0JBQXNCLGdCQUFnQix1QkFBdUIsd0JBQXdCLG9CQUFvQixpQkFBaUIsR0FBRyxpQ0FBaUMseUJBQXlCLHVCQUF1QiwwQkFBMEIsY0FBYyxnQkFBZ0IsZUFBZSxnQkFBZ0Isd0JBQXdCLHFDQUFxQyw2QkFBNkIsZUFBZSxvREFBb0QsR0FBRyxnQ0FBZ0MsaUJBQWlCLEdBQUcsc0NBQXNDLGNBQWMsZUFBZSw4QkFBOEIsc0JBQXNCLHFCQUFxQixHQUFHLHlDQUF5QyxjQUFjLG9CQUFvQixrQ0FBa0MsR0FBRywrQ0FBK0MsdUJBQXVCLEdBQUcsMkVBQTJFLGdCQUFnQixpQkFBaUIsR0FBRyxpQ0FBaUMsaUJBQWlCLEdBQUcsdUNBQXVDLGNBQWMsZUFBZSw4QkFBOEIsc0JBQXNCLHFCQUFxQix3QkFBd0IsR0FBRywwQ0FBMEMsY0FBYyxHQUFHLG9FQUFvRSxpQ0FBaUMsdUJBQXVCLEdBQUcsdUdBQXVHLGdCQUFnQixpQkFBaUIsb0JBQW9CLHVCQUF1QixHQUFHLCtIQUErSCxpQkFBaUIsR0FBRyw2R0FBNkcsMkJBQTJCLEdBQUcscUVBQXFFLHNCQUFzQixHQUFHLGdHQUFnRyxrQkFBa0IsdUJBQXVCLEdBQUcsOEZBQThGLHVCQUF1QixZQUFZLGNBQWMsR0FBRywyQkFBMkIsdUJBQXVCLEdBQUcsMkRBQTJELHVCQUF1QixpQkFBaUIscUJBQXFCLHVEQUF1RCxHQUFHLHVFQUF1RSwwQkFBMEIsWUFBWSxHQUFHLHdFQUF3RSwwQkFBMEIsYUFBYSxHQUFHLG9FQUFvRSw2QkFBNkIsWUFBWSxHQUFHLHFFQUFxRSw2QkFBNkIsYUFBYSxHQUFHLHlEQUF5RCxtQkFBbUIsMEJBQTBCLEdBQUcseUZBQXlGLHFCQUFxQixHQUFHLDBGQUEwRixnQkFBZ0Isc0JBQXNCLEdBQUcsc0dBQXNHLGlCQUFpQixHQUFHLDBDQUEwQyx1QkFBdUIsZ0JBQWdCLEdBQUcsdURBQXVELCtDQUErQyxHQUFHLHNEQUFzRCx1QkFBdUIsR0FBRyxxQ0FBcUMsdUJBQXVCLEdBQUcsaUVBQWlFLHNDQUFzQyxZQUFZLGNBQWMsR0FBRyxtQ0FBbUMsdUJBQXVCLEdBQUcsK0RBQStELHFDQUFxQyxXQUFXLGFBQWEsR0FBRyw2Q0FBNkMsdUJBQXVCLGNBQWMsYUFBYSw4QkFBOEIsaUJBQWlCLGdCQUFnQixHQUFHLHVDQUF1QyxnQkFBZ0IsdUJBQXVCLHVCQUF1QixHQUFHLDZDQUE2QyxnQkFBZ0IscUJBQXFCLEdBQUcscUNBQXFDLGlCQUFpQix1QkFBdUIsdUJBQXVCLEdBQUcsMkNBQTJDLGVBQWUscUJBQXFCLEdBQUcsT0FBTyxXQUFXLHlDQUF5Qyx1QkFBdUIsWUFBWSxXQUFXLGdCQUFnQixHQUFHLDZEQUE2RCx1QkFBdUIscUJBQXFCLHlCQUF5QixnQkFBZ0IsaUJBQWlCLEdBQUcsbURBQW1ELDRCQUE0Qix1QkFBdUIscUJBQXFCLHlCQUF5QixXQUFXLFlBQVksZ0JBQWdCLGlCQUFpQixHQUFHLE9BQU8sV0FBVyxtREFBbUQsdUJBQXVCLGVBQWUsR0FBRyw2Q0FBNkMsZUFBZSxhQUFhLDRCQUE0QixHQUFHLHdEQUF3RCx1QkFBdUIsOEJBQThCLHdDQUF3QyxlQUFlLEdBQUcsd0hBQXdILHVCQUF1Qiw0QkFBNEIsaUJBQWlCLEdBQUcsNkRBQTZELCtCQUErQixHQUFHLDREQUE0RCwyQ0FBMkMsR0FBRywwREFBMEQseUJBQXlCLHVCQUF1QixzQkFBc0IsaUJBQWlCLGdCQUFnQixlQUFlLGdCQUFnQixpQkFBaUIsOEJBQThCLHdCQUF3QixHQUFHLHlCQUF5QixnQkFBZ0IsR0FBRyxvREFBb0QsdUJBQXVCLHFCQUFxQiw4QkFBOEIsbUJBQW1CLGlCQUFpQix5QkFBeUIsR0FBRyw2REFBNkQsNEJBQTRCLGlCQUFpQixtQkFBbUIsa0JBQWtCLGlCQUFpQixzQkFBc0IsdUJBQXVCLG1GQUFtRixtQkFBbUIsd0JBQXdCLDBCQUEwQixzQkFBc0IsY0FBYyxHQUFHLDhEQUE4RCxxQkFBcUIsdUJBQXVCLG9CQUFvQixXQUFXLFlBQVksR0FBRyx1QkFBdUIsc0JBQXNCLGtCQUFrQixrQ0FBa0Msa0JBQWtCLGlCQUFpQiw4QkFBOEIsc0JBQXNCLHFCQUFxQixzQkFBc0Isb0JBQW9CLHFCQUFxQixxQkFBcUIsR0FBRyxnQ0FBZ0MseUJBQXlCLGlCQUFpQixHQUFHLDBEQUEwRCxvQ0FBb0MsR0FBRywrQkFBK0IsY0FBYyxlQUFlLGtCQUFrQixpQkFBaUIsZ0RBQWdELEdBQUcsOEJBQThCLGlCQUFpQixrQkFBa0IsbUJBQW1CLEdBQUcsMkRBQTJELGtDQUFrQyx1QkFBdUIsR0FBRyx5RUFBeUUsZ0JBQWdCLHVCQUF1QixnQkFBZ0IsaUJBQWlCLGVBQWUseUJBQXlCLG9DQUFvQyx1QkFBdUIsR0FBRyx5RkFBeUYsd0JBQXdCLEdBQUcsMkJBQTJCLHVCQUF1QiwwQkFBMEIsZ0NBQWdDLGVBQWUsNkJBQTZCLHVCQUF1QixvQkFBb0IscUJBQXFCLEdBQUcsbUNBQW1DLHVCQUF1QixXQUFXLFlBQVksMEJBQTBCLGVBQWUsZ0JBQWdCLEdBQUcsb0ZBQW9GLHVCQUF1Qix1REFBdUQscUJBQXFCLGlCQUFpQixpQkFBaUIseUJBQXlCLG1CQUFtQixHQUFHLDBCQUEwQixpQkFBaUIsR0FBRyx5QkFBeUIsOEJBQThCLG9CQUFvQixpQkFBaUIsR0FBRywrQ0FBK0MsMEJBQTBCLHdCQUF3QixxQ0FBcUMsdUNBQXVDLEdBQUcsNkNBQTZDLGtCQUFrQixxQkFBcUIsR0FBRyxpRUFBaUUsaUJBQWlCLHNCQUFzQixHQUFHLHFEQUFxRCxpQkFBaUIsR0FBRyxxREFBcUQsaUJBQWlCLG9CQUFvQixxQkFBcUIsd0JBQXdCLGtCQUFrQixHQUFHLDRCQUE0Qix1QkFBdUIsa0NBQWtDLEdBQUcscURBQXFELHNCQUFzQixpQkFBaUIsbUJBQW1CLHNCQUFzQiwyQkFBMkIsb0NBQW9DLEdBQUcsdUJBQXVCLHFCQUFxQixjQUFjLGVBQWUsc0JBQXNCLEdBQUcsNEJBQTRCLGdCQUFnQix3QkFBd0IseUJBQXlCLGNBQWMsMkJBQTJCLHFCQUFxQixxQkFBcUIsbUJBQW1CLHdCQUF3QixvQkFBb0IseUJBQXlCLHNCQUFzQixHQUFHLG1DQUFtQywyQkFBMkIsK0JBQStCLEdBQUcsZ0RBQWdELGtCQUFrQixHQUFHLDhFQUE4RSxrQkFBa0IsR0FBRyxvREFBb0QsMEJBQTBCLEdBQUcsMEJBQTBCLHFDQUFxQyxHQUFHLHNEQUFzRCx5QkFBeUIsR0FBRyxzREFBc0QsdUJBQXVCLHFCQUFxQixHQUFHLHFGQUFxRixrQkFBa0IsR0FBRyxxREFBcUQsbUJBQW1CLDBCQUEwQixrQ0FBa0MsaUJBQWlCLHNCQUFzQixvQkFBb0Isc0JBQXNCLGVBQWUsdUJBQXVCLHVCQUF1QixHQUFHLDhEQUE4RCx5QkFBeUIsaUJBQWlCLEdBQUcsc0hBQXNILG9DQUFvQyxHQUFHLGtDQUFrQywwQkFBMEIsb0NBQW9DLGFBQWEsMkJBQTJCLGlCQUFpQix1QkFBdUIsR0FBRyx3QkFBd0IsdUJBQXVCLFlBQVksV0FBVyxpQkFBaUIsZ0JBQWdCLGlCQUFpQixrQkFBa0IsMkJBQTJCLEdBQUcsNEJBQTRCLHdCQUF3QixpQkFBaUIsc0JBQXNCLG9CQUFvQixHQUFHLG9DQUFvQyxnQkFBZ0Isc0JBQXNCLHFCQUFxQixnQkFBZ0IsR0FBRyxvQ0FBb0MsaUJBQWlCLHFCQUFxQixHQUFHLGdDQUFnQyxrQkFBa0IsZUFBZSx3QkFBd0Isd0JBQXdCLDhCQUE4QixHQUFHLHdDQUF3QyxvQkFBb0IsaUJBQWlCLGdDQUFnQyxxQkFBcUIsR0FBRywwQ0FBMEMsZUFBZSxxQkFBcUIsdUJBQXVCLGlCQUFpQixHQUFHLHFDQUFxQyxzQkFBc0IsR0FBRyw4QkFBOEIscUJBQXFCLGlCQUFpQiw0QkFBNEIsNkJBQTZCLHVIQUF1SCxHQUFHLDJCQUEyQiwrQkFBK0Isd0JBQXdCLHNCQUFzQixHQUFHLDRDQUE0QyxxQkFBcUIsc0JBQXNCLHVCQUF1QixnQkFBZ0IsZ0JBQWdCLHdCQUF3QixHQUFHLGtFQUFrRSxzQkFBc0IsZ0JBQWdCLEdBQUcsbUVBQW1FLGlCQUFpQixHQUFHLHFFQUFxRSxtQkFBbUIsc0JBQXNCLHVCQUF1QixHQUFHLDJFQUEyRSxvQ0FBb0MsR0FBRywwQ0FBMEMsOEJBQThCLHNCQUFzQixHQUFHLHlGQUF5Rix3QkFBd0Isb0JBQW9CLHVCQUF1QixxQkFBcUIsc0JBQXNCLGVBQWUsR0FBRywyREFBMkQsd0JBQXdCLEdBQUcsNkhBQTZILHdCQUF3QixtQkFBbUIsR0FBRyw4REFBOEQseUJBQXlCLGlCQUFpQixHQUFHLDZCQUE2QiwrQ0FBK0MsdUJBQXVCLFlBQVksMEJBQTBCLGdCQUFnQixnQkFBZ0IsR0FBRywwQkFBMEIsa0JBQWtCLDhCQUE4QixHQUFHLGdEQUFnRCxxQkFBcUIsR0FBRyx5QkFBeUIsMEJBQTBCLHVCQUF1QixxQkFBcUIsb0JBQW9CLHdCQUF3Qix1QkFBdUIsb0JBQW9CLG1CQUFtQixxQkFBcUIsd0JBQXdCLDhCQUE4Qix3QkFBd0IsMEJBQTBCLDZFQUE2RSxrQkFBa0IsNkJBQTZCLFlBQVksc0JBQXNCLGdDQUFnQyxHQUFHLDhEQUE4RCw4QkFBOEIsOEJBQThCLEdBQUcsaUNBQWlDLGdCQUFnQiw4QkFBOEIsR0FBRyw4RUFBOEUsZ0JBQWdCLDhCQUE4QixHQUFHLDZCQUE2QixtQkFBbUIsdUJBQXVCLHFCQUFxQix5QkFBeUIsK0JBQStCLEdBQUcsbUNBQW1DLGVBQWUsY0FBYyxvQkFBb0IsbUJBQW1CLGVBQWUsd0RBQXdELHFCQUFxQixzQkFBc0IsaUJBQWlCLG1CQUFtQixxQkFBcUIsOEJBQThCLHVCQUF1Qiw2REFBNkQsc0RBQXNELEdBQUcseUNBQXlDLDBCQUEwQix3REFBd0QsR0FBRyw4QkFBOEIsdUJBQXVCLDBCQUEwQixxQkFBcUIsOEJBQThCLHVCQUF1QixvQkFBb0IsK0JBQStCLHNCQUFzQixzREFBc0QsR0FBRywwQ0FBMEMsNEJBQTRCLHdCQUF3QixvQkFBb0IsZ0JBQWdCLGlCQUFpQixzQkFBc0IsbUJBQW1CLEdBQUcsOEJBQThCLGtCQUFrQix3QkFBd0Isb0JBQW9CLEdBQUcsd0RBQXdELG1CQUFtQixHQUFHLCtEQUErRCwwQkFBMEIsdUJBQXVCLEdBQUcsNkJBQTZCLG1CQUFtQiwyQkFBMkIsc0JBQXNCLHdCQUF3QixHQUFHLHlDQUF5QyxtQkFBbUIsR0FBRyxzR0FBc0csMEJBQTBCLEdBQUcsa0NBQWtDLG1CQUFtQixxQkFBcUIsR0FBRyx5QkFBeUIsa0JBQWtCLHVCQUF1QixzQkFBc0IsdUJBQXVCLGdCQUFnQixpQkFBaUIsdUJBQXVCLDJCQUEyQix5Q0FBeUMsZUFBZSxzQ0FBc0MsOEJBQThCLHFDQUFxQyw2QkFBNkIsNkNBQTZDLHNCQUFzQixrQkFBa0IsR0FBRyxnQ0FBZ0MsbUJBQW1CLGVBQWUsR0FBRyxpQkFBaUIsaUJBQWlCLEdBQUcsdUJBQXVCLG1CQUFtQix5QkFBeUIsbUJBQW1CLGdCQUFnQixHQUFHLHdCQUF3QixxQkFBcUIsZ0JBQWdCLDJCQUEyQixpQkFBaUIsa0NBQWtDLDBCQUEwQix1QkFBdUIsR0FBRywrQ0FBK0Msb0JBQW9CLG9CQUFvQixrQkFBa0IscUJBQXFCLHdCQUF3QixxQkFBcUIsK0JBQStCLGlGQUFpRix1QkFBdUIseUNBQXlDLDJCQUEyQixpQ0FBaUMsK0NBQStDLEdBQUcsd0JBQXdCLGdEQUFnRCxHQUFHLDZEQUE2RCxxQkFBcUIsaUNBQWlDLGdEQUFnRCxpREFBaUQsK0JBQStCLEdBQUcscUdBQXFHLHVCQUF1QixpQkFBaUIsZ0JBQWdCLHdCQUF3QixHQUFHLGlIQUFpSCxlQUFlLG9DQUFvQyxHQUFHLCtCQUErQixtQkFBbUIsR0FBRywrQkFBK0IscUNBQXFDLG9DQUFvQyx3QkFBd0IsR0FBRywySEFBMkgsd0JBQXdCLEdBQUcsK0RBQStELDRCQUE0QixvQkFBb0IsS0FBSyxHQUFHLHVCQUF1QixnQkFBZ0IsaUJBQWlCLDRCQUE0Qix1QkFBdUIsMkJBQTJCLHNCQUFzQixxQkFBcUIsdUJBQXVCLDBCQUEwQixtQkFBbUIsR0FBRywrQ0FBK0Msc0VBQXNFLHVCQUF1QixpQkFBaUIsa0JBQWtCLGtCQUFrQixHQUFHLG9EQUFvRCxZQUFZLFdBQVcsR0FBRyxvREFBb0QsZ0JBQWdCLFdBQVcsR0FBRyxxREFBcUQsZ0JBQWdCLFdBQVcsR0FBRywyREFBMkQsZ0JBQWdCLFdBQVcsR0FBRywyREFBMkQsZ0JBQWdCLFdBQVcsR0FBRyx5REFBeUQsZ0JBQWdCLFdBQVcsR0FBRywyREFBMkQsaUJBQWlCLFdBQVcsR0FBRyx5REFBeUQsaUJBQWlCLFdBQVcsR0FBRyxzREFBc0QsaUJBQWlCLFdBQVcsR0FBRyxxREFBcUQsaUJBQWlCLFdBQVcsR0FBRyx1REFBdUQsaUJBQWlCLFdBQVcsR0FBRyxxREFBcUQsaUJBQWlCLFdBQVcsR0FBRywwREFBMEQsaUJBQWlCLFdBQVcsR0FBRyw0REFBNEQsaUJBQWlCLFdBQVcsR0FBRywyREFBMkQsWUFBWSxlQUFlLEdBQUcseURBQXlELGdCQUFnQixlQUFlLEdBQUcsNERBQTRELGdCQUFnQixlQUFlLEdBQUcsNERBQTRELGdCQUFnQixlQUFlLEdBQUcsd0RBQXdELGdCQUFnQixlQUFlLEdBQUcsMERBQTBELGdCQUFnQixlQUFlLEdBQUcsdURBQXVELGlCQUFpQixlQUFlLEdBQUcsMERBQTBELGlCQUFpQixlQUFlLEdBQUcsMkRBQTJELGlCQUFpQixlQUFlLEdBQUcsb0RBQW9ELGlCQUFpQixlQUFlLEdBQUcscURBQXFELGlCQUFpQixlQUFlLEdBQUcsc0RBQXNELGlCQUFpQixlQUFlLEdBQUcsd0RBQXdELGlCQUFpQixlQUFlLEdBQUcsbURBQW1ELGlCQUFpQixlQUFlLEdBQUcsMERBQTBELFlBQVksZUFBZSxHQUFHLDZEQUE2RCxnQkFBZ0IsZUFBZSxHQUFHLGlFQUFpRSxnQkFBZ0IsZUFBZSxHQUFHLCtEQUErRCxnQkFBZ0IsZUFBZSxHQUFHLDhEQUE4RCxnQkFBZ0IsZUFBZSxHQUFHLDJEQUEyRCxnQkFBZ0IsZUFBZSxHQUFHLDBEQUEwRCxpQkFBaUIsZUFBZSxHQUFHLDREQUE0RCxpQkFBaUIsZUFBZSxHQUFHLDZEQUE2RCxpQkFBaUIsZUFBZSxHQUFHLDJEQUEyRCxpQkFBaUIsZUFBZSxHQUFHLDBEQUEwRCxpQkFBaUIsZUFBZSxHQUFHLHlEQUF5RCxpQkFBaUIsZUFBZSxHQUFHLHFEQUFxRCxpQkFBaUIsZUFBZSxHQUFHLDREQUE0RCxZQUFZLGVBQWUsR0FBRywwREFBMEQsZ0JBQWdCLGVBQWUsR0FBRyw0REFBNEQsZ0JBQWdCLGVBQWUsR0FBRyw2REFBNkQsZ0JBQWdCLGVBQWUsR0FBRyxTQUFTLGtGQUFrRixVQUFVLE1BQU0sS0FBSyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsTUFBTSxLQUFLLFlBQVksTUFBTSxLQUFLLFlBQVksV0FBVyxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sWUFBWSxXQUFXLFdBQVcsVUFBVSxXQUFXLFdBQVcsVUFBVSxVQUFVLE1BQU0sTUFBTSxXQUFXLFdBQVcsV0FBVyxVQUFVLFVBQVUsVUFBVSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsV0FBVyxNQUFNLE1BQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFVBQVUsV0FBVyxNQUFNLE1BQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sTUFBTSxXQUFXLE1BQU0sTUFBTSxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxNQUFNLE1BQU0sV0FBVyxNQUFNLE1BQU0sWUFBWSxXQUFXLE1BQU0sTUFBTSxXQUFXLFVBQVUsVUFBVSxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksVUFBVSxVQUFVLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sTUFBTSxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsV0FBVyxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sVUFBVSxNQUFNLFlBQVksVUFBVSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLFVBQVUsTUFBTSxNQUFNLFdBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE1BQU0sVUFBVSxNQUFNLFlBQVksVUFBVSxVQUFVLFdBQVcsVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sVUFBVSxXQUFXLE1BQU0sTUFBTSxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sVUFBVSxXQUFXLE1BQU0sWUFBWSxPQUFPLFlBQVksVUFBVSxVQUFVLFVBQVUsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsVUFBVSxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsV0FBVyxVQUFVLFVBQVUsVUFBVSxVQUFVLE1BQU0sWUFBWSxPQUFPLFlBQVksVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsTUFBTSxPQUFPLFlBQVksV0FBVyxVQUFVLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLFdBQVcsV0FBVyxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sTUFBTSxZQUFZLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxNQUFNLE1BQU0sWUFBWSxVQUFVLFVBQVUsVUFBVSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsVUFBVSxNQUFNLE1BQU0sWUFBWSxXQUFXLFVBQVUsVUFBVSxVQUFVLE1BQU0sTUFBTSxZQUFZLFVBQVUsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sTUFBTSxVQUFVLFVBQVUsVUFBVSxVQUFVLFdBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE1BQU0sT0FBTyxXQUFXLFdBQVcsTUFBTSxPQUFPLFVBQVUsV0FBVyxVQUFVLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLE9BQU8sV0FBVyxNQUFNLE1BQU0sWUFBWSxXQUFXLFdBQVcsVUFBVSxXQUFXLFdBQVcsVUFBVSxXQUFXLE1BQU0sTUFBTSxZQUFZLFVBQVUsVUFBVSxXQUFXLFVBQVUsVUFBVSxNQUFNLFFBQVEsYUFBYSxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsVUFBVSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsTUFBTSxNQUFNLGFBQWEsV0FBVyxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxNQUFNLE1BQU0sWUFBWSxXQUFXLE1BQU0sTUFBTSxZQUFZLE1BQU0sT0FBTyxZQUFZLFVBQVUsV0FBVyxXQUFXLFVBQVUsTUFBTSxNQUFNLGFBQWEsV0FBVyxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsTUFBTSxNQUFNLGFBQWEsVUFBVSxVQUFVLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksTUFBTSxNQUFNLFVBQVUsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsV0FBVyxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sWUFBWSxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sTUFBTSxhQUFhLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxXQUFXLE1BQU0sT0FBTyxhQUFhLFVBQVUsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsTUFBTSxPQUFPLFlBQVksVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLE9BQU8sWUFBWSxVQUFVLFdBQVcsV0FBVyxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsVUFBVSxNQUFNLE9BQU8sYUFBYSxNQUFNLE9BQU8sYUFBYSxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLFdBQVcsV0FBVyxNQUFNLE9BQU8sYUFBYSxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsTUFBTSxPQUFPLGFBQWEsVUFBVSxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsTUFBTSxPQUFPLGFBQWEsTUFBTSxPQUFPLGFBQWEsV0FBVyxNQUFNLFFBQVEsYUFBYSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsTUFBTSxPQUFPLFdBQVcsVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxXQUFXLFVBQVUsVUFBVSxNQUFNLE9BQU8sWUFBWSxXQUFXLE1BQU0sT0FBTyxhQUFhLE1BQU0sT0FBTyxhQUFhLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxXQUFXLE1BQU0sT0FBTyxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxPQUFPLFFBQVEsVUFBVSxXQUFXLE9BQU8sT0FBTyxZQUFZLFdBQVcsV0FBVyxXQUFXLFdBQVcsTUFBTSxPQUFPLFlBQVksVUFBVSxVQUFVLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFdBQVcsTUFBTSxPQUFPLGFBQWEsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxVQUFVLFVBQVUsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsVUFBVSxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sYUFBYSxXQUFXLE1BQU0sT0FBTyxZQUFZLFdBQVcsV0FBVyxXQUFXLE1BQU0sTUFBTSxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sT0FBTyxZQUFZLFdBQVcsTUFBTSxPQUFPLFlBQVksV0FBVyxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLE1BQU0sTUFBTSxVQUFVLFdBQVcsVUFBVSxVQUFVLE1BQU0sTUFBTSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sUUFBUSxZQUFZLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLE1BQU0sUUFBUSxhQUFhLFdBQVcsV0FBVyxXQUFXLFdBQVcsTUFBTSxRQUFRLGFBQWEsVUFBVSxVQUFVLFdBQVcsTUFBTSxPQUFPLFVBQVUsV0FBVyxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sYUFBYSxXQUFXLFdBQVcsTUFBTSxVQUFVLGFBQWEsTUFBTSxNQUFNLE9BQU8sWUFBWSxNQUFNLEtBQUssT0FBTyxZQUFZLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUs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QUs7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuUHRCO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0pBQW9KO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZ0JBQWdCLG1CQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpREFBUztBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNENBQUk7QUFDUjtBQUNBLEtBQUs7QUFDTCxJQUFJLDRDQUFJO0FBQ1I7QUFDQSxLQUFLO0FBQ0wsSUFBSSw0Q0FBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksNENBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksNENBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0NBQWtDO0FBQ2xEO0FBQ0E7QUFDQSx1QkFBdUIscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q2I7QUFDQTtBQUNBLHVCQUF1QixxREFBQyxXQUFXLDhDQUFTLENBQUM7QUFDN0M7QUFDQTtBQUNBLHlCQUF5Qix3REFBSztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRCxzQkFBc0Isd0RBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQU07QUFDZDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSxxREFBcUQsc0RBQU07QUFDM0Q7QUFDQSxpRUFBZSxXQUFXLEVBQUM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9pbmRleC5sZXNzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvaW5kZXgubGVzcz8yYjgzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NhbnZhcy9kcmF3LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvYm9yZGVyX3BhbGV0dGUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9ib3R0b21iYXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9idXR0b24udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9jYWxlbmRhci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2NvbG9yX3BhbGV0dGUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9jb250ZXh0bWVudS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2RhdGVwaWNrZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bi50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Ryb3Bkb3duX2FsaWduLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZHJvcGRvd25fYm9yZGVyLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZHJvcGRvd25fY29sb3IudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9mb250LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZHJvcGRvd25fZm9udHNpemUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9mb3JtYXQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9mb3JtdWxhLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZHJvcGRvd25fbGluZXR5cGUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9lZGl0b3IudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9lbGVtZW50LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZXZlbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9mb3JtX2ZpZWxkLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZm9ybV9pbnB1dC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Zvcm1fc2VsZWN0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvaWNvbi50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L21lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9tb2RhbC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L21vZGFsX3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9wcmludC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Jlc2l6ZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9zY3JvbGxiYXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9zZWxlY3Rvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3NoZWV0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvc29ydF9maWx0ZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9zdWdnZXN0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdGFibGUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2FsaWduLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9hdXRvZmlsdGVyLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9ib2xkLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9ib3JkZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2NsZWFyZm9ybWF0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9kcm9wZG93bl9pdGVtLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9maWxsX2NvbG9yLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9mb250LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9mb250X3NpemUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2Zvcm1hdC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvZm9ybXVsYS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvZnJlZXplLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9pY29uX2l0ZW0udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2luZGV4LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9pdGFsaWMudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2l0ZW0udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL21lcmdlLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9tb3JlLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9wYWludGZvcm1hdC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvcHJpbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3JlZG8udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3N0cmlrZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvdGV4dF9jb2xvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvdGV4dHdyYXAudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3RvZ2dsZV9pdGVtLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci91bmRlcmxpbmUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3VuZG8udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3ZhbGlnbi50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2x0aXAudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9hbHBoYWJldC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9hdXRvX2ZpbHRlci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9jZWxsLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2NlbGxfcmFuZ2UudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvY2xpcGJvYXJkLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2NvbC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9kYXRhX3Byb3h5LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2ZvbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvZm9ybWF0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2Zvcm11bGEudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvaGVscGVyLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2hpc3RvcnkudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvbWVyZ2UudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvcm93LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL3Njcm9sbC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9zZWxlY3Rvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS92YWxpZGF0aW9uLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL3ZhbGlkYXRvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvbG9jYWxlL2VuLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9sb2NhbGUvbG9jYWxlLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0L3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuLi9hc3NldHMvc3ByaXRlLnN2Z1wiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcImJvZHkge1xcbiAgbWFyZ2luOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldCB7XFxuICBmb250LXNpemU6IDEzcHg7XFxuICBsaW5lLWhlaWdodDogbm9ybWFsO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xcbiAgZm9udC1mYW1pbHk6ICdMYXRvJywgJ1NvdXJjZSBTYW5zIFBybycsIFJvYm90bywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcXG4gIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xcbn1cXG4ueC1zcHJlYWRzaGVldCB0ZXh0YXJlYSB7XFxuICBmb250OiA0MDAgMTNweCBBcmlhbCwgJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxufVxcbi54LXNwcmVhZHNoZWV0LXNoZWV0IHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxufVxcbi54LXNwcmVhZHNoZWV0LXRhYmxlIHtcXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2x0aXAge1xcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBwYWRkaW5nOiA1cHggMTBweDtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgYm9yZGVyLXJhZGl1czogMXB4O1xcbiAgYmFja2dyb3VuZDogIzAwMDAwMDtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIHotaW5kZXg6IDIwMTtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbHRpcDpiZWZvcmUge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiBjYWxjKDUwJSAtIDRweCk7XFxuICB0b3A6IC00cHg7XFxuICBjb250ZW50OiAnJztcXG4gIHdpZHRoOiA4cHg7XFxuICBoZWlnaHQ6IDhweDtcXG4gIGJhY2tncm91bmQ6IGluaGVyaXQ7XFxuICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXG4gIHotaW5kZXg6IDE7XFxuICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY29sb3ItcGFsZXR0ZSB7XFxuICBwYWRkaW5nOiA1cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNvbG9yLXBhbGV0dGUgdGFibGUge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XFxuICBib3JkZXItc3BhY2luZzogMjtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNvbG9yLXBhbGV0dGUgdGFibGUgdGQge1xcbiAgbWFyZ2luOiAwO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNvbG9yLXBhbGV0dGUgdGFibGUgdGQ6aG92ZXIge1xcbiAgYm9yZGVyLWNvbG9yOiAjZGRkO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jb2xvci1wYWxldHRlIHRhYmxlIHRkIC54LXNwcmVhZHNoZWV0LWNvbG9yLXBhbGV0dGUtY2VsbCB7XFxuICB3aWR0aDogMTZweDtcXG4gIGhlaWdodDogMTZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUge1xcbiAgcGFkZGluZzogNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSB0YWJsZSB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcXG4gIGJvcmRlci1zcGFjaW5nOiAwO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIHRhYmxlLWxheW91dDogZml4ZWQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIHRhYmxlIHRkIHtcXG4gIG1hcmdpbjogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtbGVmdCB7XFxuICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZWVlO1xcbiAgcGFkZGluZy1yaWdodDogNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1sZWZ0IC54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlLWNlbGwge1xcbiAgd2lkdGg6IDMwcHg7XFxuICBoZWlnaHQ6IDMwcHg7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIC54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlLWxlZnQgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtY2VsbCAueC1zcHJlYWRzaGVldC1pY29uLWltZyB7XFxuICBvcGFjaXR5OiAwLjg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIC54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlLWxlZnQgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtY2VsbDpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1yaWdodCB7XFxuICBwYWRkaW5nLWxlZnQ6IDZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtcmlnaHQgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG4ge1xcbiAgbWFyZ2luLXRvcDogMDtcXG4gIG1hcmdpbi1ib3R0b206IDNweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtcmlnaHQgLngtc3ByZWFkc2hlZXQtbGluZS10eXBlIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IC0zcHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24gLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tY29udGVudCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB6LWluZGV4OiAyMDA7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgYm94LXNoYWRvdzogMXB4IDJweCA1cHggMnB4IHJnYmEoNTEsIDUxLCA1MSwgMC4xNSk7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLmJvdHRvbS1sZWZ0IC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgdG9wOiBjYWxjKDEwMCUgKyA1cHgpO1xcbiAgbGVmdDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24uYm90dG9tLXJpZ2h0IC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgdG9wOiBjYWxjKDEwMCUgKyA1cHgpO1xcbiAgcmlnaHQ6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLnRvcC1sZWZ0IC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgYm90dG9tOiBjYWxjKDEwMCUgKyA1cHgpO1xcbiAgbGVmdDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24udG9wLXJpZ2h0IC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgYm90dG9tOiBjYWxjKDEwMCUgKyA1cHgpO1xcbiAgcmlnaHQ6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duIC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLXRpdGxlIHtcXG4gIHBhZGRpbmc6IDAgNXB4O1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kcm9wZG93biAueC1zcHJlYWRzaGVldC1kcm9wZG93bi1oZWFkZXIgLngtc3ByZWFkc2hlZXQtaWNvbi5hcnJvdy1sZWZ0IHtcXG4gIG1hcmdpbi1sZWZ0OiA0cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duIC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWhlYWRlciAueC1zcHJlYWRzaGVldC1pY29uLmFycm93LXJpZ2h0IHtcXG4gIHdpZHRoOiAxMHB4O1xcbiAgbWFyZ2luLXJpZ2h0OiA0cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duIC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWhlYWRlciAueC1zcHJlYWRzaGVldC1pY29uLmFycm93LXJpZ2h0IC5hcnJvdy1kb3duIHtcXG4gIGxlZnQ6IC0xMzBweDtcXG59XFxuLyogcmVzaXplciAqKi9cXG4ueC1zcHJlYWRzaGVldC1yZXNpemVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IDExO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1yZXNpemVyIC54LXNwcmVhZHNoZWV0LXJlc2l6ZXItaG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg3NSwgMTM3LCAyNTUsIDAuMjUpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1yZXNpemVyIC54LXNwcmVhZHNoZWV0LXJlc2l6ZXItbGluZSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxufVxcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIuaG9yaXpvbnRhbCB7XFxuICBjdXJzb3I6IHJvdy1yZXNpemU7XFxufVxcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIuaG9yaXpvbnRhbCAueC1zcHJlYWRzaGVldC1yZXNpemVyLWxpbmUge1xcbiAgYm9yZGVyLWJvdHRvbTogMnB4IGRhc2hlZCAjNGI4OWZmO1xcbiAgbGVmdDogMDtcXG4gIGJvdHRvbTogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtcmVzaXplci52ZXJ0aWNhbCB7XFxuICBjdXJzb3I6IGNvbC1yZXNpemU7XFxufVxcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIudmVydGljYWwgLngtc3ByZWFkc2hlZXQtcmVzaXplci1saW5lIHtcXG4gIGJvcmRlci1yaWdodDogMnB4IGRhc2hlZCAjNGI4OWZmO1xcbiAgdG9wOiAwO1xcbiAgcmlnaHQ6IDA7XFxufVxcbi8qIHNjcm9sbGJhciAqL1xcbi54LXNwcmVhZHNoZWV0LXNjcm9sbGJhciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBib3R0b206IDA7XFxuICByaWdodDogMDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNGY1Zjg7XFxuICBvcGFjaXR5OiAwLjk7XFxuICB6LWluZGV4OiAxMjtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2Nyb2xsYmFyLmhvcml6b250YWwge1xcbiAgcmlnaHQ6IDE1cHg7XFxuICBvdmVyZmxvdy14OiBzY3JvbGw7XFxuICBvdmVyZmxvdy15OiBoaWRkZW47XFxufVxcbi54LXNwcmVhZHNoZWV0LXNjcm9sbGJhci5ob3Jpem9udGFsID4gZGl2IHtcXG4gIGhlaWdodDogMXB4O1xcbiAgYmFja2dyb3VuZDogI2RkZDtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2Nyb2xsYmFyLnZlcnRpY2FsIHtcXG4gIGJvdHRvbTogMTVweDtcXG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcXG4gIG92ZXJmbG93LXk6IHNjcm9sbDtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2Nyb2xsYmFyLnZlcnRpY2FsID4gZGl2IHtcXG4gIHdpZHRoOiAxcHg7XFxuICBiYWNrZ3JvdW5kOiAjZGRkO1xcbn1cXG4vKiBAe2Nzcy1wcmVmaXh9LW92ZXJsYXllciAqL1xcbi54LXNwcmVhZHNoZWV0LW92ZXJsYXllciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbiAgei1pbmRleDogMTA7XFxufVxcbi54LXNwcmVhZHNoZWV0LW92ZXJsYXllciAueC1zcHJlYWRzaGVldC1vdmVybGF5ZXItY29udGVudCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG59XFxuLngtc3ByZWFkc2hlZXQtZWRpdG9yLFxcbi54LXNwcmVhZHNoZWV0LXNlbGVjdG9yIHtcXG4gIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG4vKiBAe2Nzcy1wcmVmaXh9LXNlbGVjdG9yICovXFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3IgLmhpZGUtaW5wdXQge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgei1pbmRleDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3IgLmhpZGUtaW5wdXQgaW5wdXQge1xcbiAgcGFkZGluZzogMDtcXG4gIHdpZHRoOiAwO1xcbiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LXNlbGVjdG9yIC54LXNwcmVhZHNoZWV0LXNlbGVjdG9yLWFyZWEge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm9yZGVyOiAycHggc29saWQgIzRiODlmZjtcXG4gIGJhY2tncm91bmQ6IHJnYmEoNzUsIDEzNywgMjU1LCAwLjEpO1xcbiAgei1pbmRleDogNTtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3IgLngtc3ByZWFkc2hlZXQtc2VsZWN0b3ItY2xpcGJvYXJkLFxcbi54LXNwcmVhZHNoZWV0LXNlbGVjdG9yIC54LXNwcmVhZHNoZWV0LXNlbGVjdG9yLWF1dG9maWxsIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbiAgei1pbmRleDogMTAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAueC1zcHJlYWRzaGVldC1zZWxlY3Rvci1jbGlwYm9hcmQge1xcbiAgYm9yZGVyOiAycHggZGFzaGVkICM0Yjg5ZmY7XFxufVxcbi54LXNwcmVhZHNoZWV0LXNlbGVjdG9yIC54LXNwcmVhZHNoZWV0LXNlbGVjdG9yLWF1dG9maWxsIHtcXG4gIGJvcmRlcjogMXB4IGRhc2hlZCByZ2JhKDAsIDAsIDAsIDAuNDUpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAueC1zcHJlYWRzaGVldC1zZWxlY3Rvci1jb3JuZXIge1xcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBjdXJzb3I6IGNyb3NzaGFpcjtcXG4gIGZvbnQtc2l6ZTogMDtcXG4gIGhlaWdodDogNXB4O1xcbiAgd2lkdGg6IDVweDtcXG4gIHJpZ2h0OiAtNXB4O1xcbiAgYm90dG9tOiAtNXB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgI2ZmZmZmZjtcXG4gIGJhY2tncm91bmQ6ICM0Yjg5ZmY7XFxufVxcbi54LXNwcmVhZHNoZWV0LWVkaXRvciB7XFxuICB6LWluZGV4OiAyMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZWRpdG9yIC54LXNwcmVhZHNoZWV0LWVkaXRvci1hcmVhIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjNGI4OWZmO1xcbiAgbGluZS1oZWlnaHQ6IDA7XFxuICB6LWluZGV4OiAxMDA7XFxuICBwb2ludGVyLWV2ZW50czogYXV0bztcXG59XFxuLngtc3ByZWFkc2hlZXQtZWRpdG9yIC54LXNwcmVhZHNoZWV0LWVkaXRvci1hcmVhIHRleHRhcmVhIHtcXG4gIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xcbiAgYm9yZGVyOiBub25lO1xcbiAgcGFkZGluZzogMCAzcHg7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgcmVzaXplOiBub25lO1xcbiAgdGV4dC1hbGlnbjogc3RhcnQ7XFxuICBvdmVyZmxvdy15OiBoaWRkZW47XFxuICBmb250OiA0MDAgMTNweCBBcmlhbCwgJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxuICBjb2xvcjogaW5oZXJpdDtcXG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XFxuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XFxuICBsaW5lLWhlaWdodDogMjJweDtcXG4gIG1hcmdpbjogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZWRpdG9yIC54LXNwcmVhZHNoZWV0LWVkaXRvci1hcmVhIC50ZXh0bGluZSB7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaXRlbSB7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIGJhY2tncm91bmQ6IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICBoZWlnaHQ6IDI2cHg7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjkpO1xcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XFxuICBsaXN0LXN0eWxlOiBub25lO1xcbiAgcGFkZGluZzogMnB4IDEwcHg7XFxuICBjdXJzb3I6IGRlZmF1bHQ7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuLngtc3ByZWFkc2hlZXQtaXRlbS5kaXNhYmxlZCB7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gIG9wYWNpdHk6IDAuNTtcXG59XFxuLngtc3ByZWFkc2hlZXQtaXRlbTpob3ZlcixcXG4ueC1zcHJlYWRzaGVldC1pdGVtLmFjdGl2ZSB7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLmRpdmlkZXIge1xcbiAgaGVpZ2h0OiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIG1hcmdpbjogNXB4IDA7XFxuICBib3JkZXI6IG5vbmU7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtIC5sYWJlbCB7XFxuICBmbG9hdDogcmlnaHQ7XFxuICBvcGFjaXR5OiAwLjY1O1xcbiAgZm9udC1zaXplOiAxZW07XFxufVxcbi54LXNwcmVhZHNoZWV0LWl0ZW0uc3RhdGUsXFxuLngtc3ByZWFkc2hlZXQtaGVhZGVyLnN0YXRlIHtcXG4gIHBhZGRpbmctbGVmdDogMzVweCAhaW1wb3J0YW50O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLnN0YXRlOmJlZm9yZSxcXG4ueC1zcHJlYWRzaGVldC1oZWFkZXIuc3RhdGU6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDEwcHg7XFxuICBoZWlnaHQ6IDEwcHg7XFxuICBsZWZ0OiAxMnB4O1xcbiAgdG9wOiBjYWxjKDUwJSAtIDVweCk7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLnN0YXRlLmNoZWNrZWQ6YmVmb3JlLFxcbi54LXNwcmVhZHNoZWV0LWhlYWRlci5zdGF0ZS5jaGVja2VkOmJlZm9yZSB7XFxuICBiYWNrZ3JvdW5kOiAjNGI4OWZmO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jaGVja2JveCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICBvdXRsaW5lOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbiAgbGluZS1oZWlnaHQ6IDFlbTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2hlY2tib3ggPiBpbnB1dCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgb3BhY2l0eTogMCAhaW1wb3J0YW50O1xcbiAgb3V0bGluZTogMDtcXG4gIHotaW5kZXg6IC0xO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zdWdnZXN0LFxcbi54LXNwcmVhZHNoZWV0LWNvbnRleHRtZW51LFxcbi54LXNwcmVhZHNoZWV0LXNvcnQtZmlsdGVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJveC1zaGFkb3c6IDFweCAycHggNXB4IDJweCByZ2JhKDUxLCA1MSwgNTEsIDAuMTUpO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIHotaW5kZXg6IDEwMDtcXG4gIHdpZHRoOiAyNjBweDtcXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xcbiAgb3ZlcmZsb3c6IGF1dG87XFxufVxcbi54LXNwcmVhZHNoZWV0LXN1Z2dlc3Qge1xcbiAgd2lkdGg6IDIwMHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1maWx0ZXIge1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2U5ZTllOTtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIG1hcmdpbjogMTBweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZmlsdGVyIC54LXNwcmVhZHNoZWV0LWhlYWRlciB7XFxuICBwYWRkaW5nOiAwLjVlbSAwLjc1ZW07XFxuICBiYWNrZ3JvdW5kOiAjZjhmOGY5O1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlOWU5ZTk7XFxuICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1maWx0ZXIgLngtc3ByZWFkc2hlZXQtYm9keSB7XFxuICBoZWlnaHQ6IDIwMHB4O1xcbiAgb3ZlcmZsb3cteTogYXV0bztcXG59XFxuLngtc3ByZWFkc2hlZXQtZmlsdGVyIC54LXNwcmVhZHNoZWV0LWJvZHkgLngtc3ByZWFkc2hlZXQtaXRlbSB7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICBsaW5lLWhlaWdodDogMjBweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtc29ydC1maWx0ZXIgLngtc3ByZWFkc2hlZXQtYnV0dG9ucyB7XFxuICBtYXJnaW46IDEwcHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIsXFxuLngtc3ByZWFkc2hlZXQtYm90dG9tYmFyIHtcXG4gIGhlaWdodDogNDBweDtcXG4gIHBhZGRpbmc6IDAgMzBweDtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBiYWNrZ3JvdW5kOiAjZjVmNmY3O1xcbiAgZGlzcGxheTogZmxleDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm90dG9tYmFyIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTBlMmU0O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3R0b21iYXIgLngtc3ByZWFkc2hlZXQtbWVudSA+IGxpIHtcXG4gIGxpbmUtaGVpZ2h0OiA0MHB4O1xcbiAgaGVpZ2h0OiA0MHB4O1xcbiAgcGFkZGluZy10b3A6IDA7XFxuICBwYWRkaW5nLWJvdHRvbTogMDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZThlYWVkO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tZW51IHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUgPiBsaSB7XFxuICBmbG9hdDogbGVmdDtcXG4gIGxpbmUtaGVpZ2h0OiAxLjI1ZW07XFxuICBwYWRkaW5nOiAwLjc4NWVtIDFlbTtcXG4gIG1hcmdpbjogMDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgZm9udC13ZWlnaHQ6IDQwMDtcXG4gIGNvbG9yOiAjODA4NjhiO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUgPiBsaS5hY3RpdmUge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNjUpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tZW51ID4gbGkgLngtc3ByZWFkc2hlZXQtaWNvbiB7XFxuICBtYXJnaW46IDAgNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tZW51ID4gbGkgLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZzpob3ZlciB7XFxuICBvcGFjaXR5OiAwLjg1O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tZW51ID4gbGkgLngtc3ByZWFkc2hlZXQtZHJvcGRvd24ge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIHtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMmU0O1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIC54LXNwcmVhZHNoZWV0LXRvb2xiYXItYnRucyB7XFxuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhciAueC1zcHJlYWRzaGVldC10b29sYmFyLW1vcmUge1xcbiAgcGFkZGluZzogMCA2cHggNnB4O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhciAueC1zcHJlYWRzaGVldC10b29sYmFyLW1vcmUgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1kaXZpZGVyIHtcXG4gIG1hcmdpbi10b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG4ge1xcbiAgZmxleDogMCAwIGF1dG87XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gIGhlaWdodDogMjZweDtcXG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xcbiAgbWluLXdpZHRoOiAyNnB4O1xcbiAgbWFyZ2luOiA2cHggMXB4IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIC54LXNwcmVhZHNoZWV0LXRvb2xiYXItYnRuLmRpc2FibGVkIHtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgb3BhY2l0eTogMC41O1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIC54LXNwcmVhZHNoZWV0LXRvb2xiYXItYnRuOmhvdmVyLFxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG4uYWN0aXZlIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wOCk7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXItZGl2aWRlciB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZTBlMmU0O1xcbiAgd2lkdGg6IDA7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgaGVpZ2h0OiAxOHB4O1xcbiAgbWFyZ2luOiAxMnB4IDNweCAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbiAgei1pbmRleDogMTAwO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtYmFyIHtcXG4gIGJhY2tncm91bmQ6ICM0MjQyNDI7XFxuICBoZWlnaHQ6IDYwcHg7XFxuICBsaW5lLWhlaWdodDogNjBweDtcXG4gIHBhZGRpbmc6IDAgMzBweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtYmFyIC4tdGl0bGUge1xcbiAgY29sb3I6ICNmZmY7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIGZvbnQtc2l6ZTogMS4yZW07XFxuICBmbG9hdDogbGVmdDtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtYmFyIC4tcmlnaHQge1xcbiAgZmxvYXQ6IHJpZ2h0O1xcbiAgbWFyZ2luLXRvcDogMTJweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtY29udGVudCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleDogYXV0bztcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBiYWNrZ3JvdW5kOiAjZDBkMGQwO1xcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA2MHB4KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtY29udGVudCAuLXNpZGVyIHtcXG4gIGZsZXg6IDAgMCAzMDBweDtcXG4gIHdpZHRoOiAzMDBweDtcXG4gIGJvcmRlci1sZWZ0OiAycHggc29saWQgI2NjYztcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxufVxcbi54LXNwcmVhZHNoZWV0LXByaW50LWNvbnRlbnQgLi1jb250ZW50IHtcXG4gIGZsZXg6IGF1dG87XFxuICBvdmVyZmxvdy14OiBhdXRvO1xcbiAgb3ZlcmZsb3cteTogc2Nyb2xsO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jYW52YXMtY2FyZC13cmFwZXIge1xcbiAgbWFyZ2luOiA0MHB4IDIwcHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbnZhcy1jYXJkIHtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBtYXJnaW46IGF1dG87XFxuICBwYWdlLWJyZWFrLWJlZm9yZTogYXV0bztcXG4gIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cztcXG4gIGJveC1zaGFkb3c6IDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgM3B4IDE0cHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgNHB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIge1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmZmZmO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIge1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBmbG9hdDogbGVmdDtcXG4gIGJhY2tncm91bmQ6ICNmOWZhZmI7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgLmNhbGVuZGFyLWhlYWRlci1sZWZ0IHtcXG4gIHBhZGRpbmctbGVmdDogNXB4O1xcbiAgZmxvYXQ6IGxlZnQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgLmNhbGVuZGFyLWhlYWRlci1yaWdodCB7XFxuICBmbG9hdDogcmlnaHQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgLmNhbGVuZGFyLWhlYWRlci1yaWdodCBhIHtcXG4gIHBhZGRpbmc6IDNweCAwO1xcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgLmNhbGVuZGFyLWhlYWRlci1yaWdodCBhOmhvdmVyIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wOCk7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1ib2R5IHtcXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuICBib3JkZXItc3BhY2luZzogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkgdGgsXFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkgdGQge1xcbiAgd2lkdGg6IDE0LjI4NTcxNDI5JTtcXG4gIG1pbi13aWR0aDogMzJweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxuICBsaW5lLWhlaWdodDogMzBweDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1ib2R5IHRkID4gLmNlbGw6aG92ZXIge1xcbiAgYmFja2dyb3VuZDogI2VjZjZmZDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkgdGQgPiAuY2VsbC5hY3RpdmUsXFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkgdGQgPiAuY2VsbC5hY3RpdmU6aG92ZXIge1xcbiAgYmFja2dyb3VuZDogI2VjZjZmZDtcXG4gIGNvbG9yOiAjMjE4NWQwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciAuY2FsZW5kYXItYm9keSB0ZCA+IC5jZWxsLmRpc2FibGVkIHtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgb3BhY2l0eTogMC41O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kYXRlcGlja2VyIHtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IGNhbGMoMTAwJSArIDVweCk7XFxuICB6LWluZGV4OiAxMDtcXG4gIHdpZHRoOiBhdXRvO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b25zIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b25zIC54LXNwcmVhZHNoZWV0LWJ1dHRvbiB7XFxuICBtYXJnaW4tbGVmdDogOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b24ge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgbGluZS1oZWlnaHQ6IDFlbTtcXG4gIG1pbi1oZWlnaHQ6IDFlbTtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBmb250LXNpemU6IDFlbTtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxuICBwYWRkaW5nOiAwLjc1ZW0gMWVtO1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcXG4gIGJhY2tncm91bmQ6ICNlMGUxZTI7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAncHJveGltYS1ub3ZhJywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbiAgem9vbTogMTtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuMXMgbGluZWFyO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b24uYWN0aXZlLFxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbjpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzBjMWMyO1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtYnV0dG9uLnByaW1hcnkge1xcbiAgY29sb3I6ICNmZmY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE4NWQwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b24ucHJpbWFyeTpob3ZlcixcXG4ueC1zcHJlYWRzaGVldC1idXR0b24ucHJpbWFyeS5hY3RpdmUge1xcbiAgY29sb3I6ICNmZmY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTY3OGMyO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWlucHV0IHtcXG4gIGZvbnQtc2l6ZTogMWVtO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZm9udC13ZWlnaHQ6IDQwMDtcXG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0taW5wdXQgaW5wdXQge1xcbiAgei1pbmRleDogMTtcXG4gIG1hcmdpbjogMDtcXG4gIG1heC13aWR0aDogMTAwJTtcXG4gIGZsZXg6IDEgMCBhdXRvO1xcbiAgb3V0bGluZTogMDtcXG4gIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwKTtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBsaW5lLWhlaWdodDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG4gIHBhZGRpbmc6IDAgOHB4O1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNlOWU5ZTk7XFxuICBib3JkZXItcmFkaXVzOiAzcHg7XFxuICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuMXMgZWFzZSwgYm9yZGVyLWNvbG9yIDAuMXMgZWFzZTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDJweCBoc2xhKDAsIDAlLCA0JSwgMC4wNik7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0taW5wdXQgaW5wdXQ6Zm9jdXMge1xcbiAgYm9yZGVyLWNvbG9yOiAjNGI4OWZmO1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoNzUsIDEzNywgMjU1LCAwLjIpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLXNlbGVjdCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2U5ZTllOTtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggaHNsYSgwLCAwJSwgNCUsIDAuMDYpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLXNlbGVjdCAuaW5wdXQtdGV4dCB7XFxuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICBtaW4td2lkdGg6IDYwcHg7XFxuICB3aWR0aDogYXV0bztcXG4gIGhlaWdodDogMzBweDtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgcGFkZGluZzogMCA4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGRzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgZmxleC13cmFwOiB3cmFwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkcyAueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkIHtcXG4gIGZsZXg6IDAgMSBhdXRvO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkcyAueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkIC5sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBtYXJnaW46IDAgMTBweCAwIDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkOmZpcnN0LWNoaWxkIHtcXG4gIG1hcmdpbi1sZWZ0OiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkLmVycm9yIC54LXNwcmVhZHNoZWV0LWZvcm0tc2VsZWN0LFxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQuZXJyb3IgaW5wdXQge1xcbiAgYm9yZGVyLWNvbG9yOiAjZjA0MTM0O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1mb3JtLWZpZWxkIC50aXAge1xcbiAgY29sb3I6ICNmMDQxMzQ7XFxuICBmb250LXNpemU6IDAuOWVtO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kaW1tZXIge1xcbiAgZGlzcGxheTogbm9uZTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMCAhaW1wb3J0YW50O1xcbiAgbGVmdDogMCAhaW1wb3J0YW50O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjYpO1xcbiAgb3BhY2l0eTogMDtcXG4gIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDtcXG4gIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7XFxuICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogMC41cztcXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogMC41cztcXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBsaW5lYXI7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIHotaW5kZXg6IDEwMDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRpbW1lci5hY3RpdmUge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBvcGFjaXR5OiAxO1xcbn1cXG5mb3JtIGZpZWxkc2V0IHtcXG4gIGJvcmRlcjogbm9uZTtcXG59XFxuZm9ybSBmaWVsZHNldCBsYWJlbCB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbi1ib3R0b206IDAuNWVtO1xcbiAgZm9udC1zaXplOiAxZW07XFxuICBjb2xvcjogIzY2NjtcXG59XFxuZm9ybSBmaWVsZHNldCBzZWxlY3Qge1xcbiAgZm9udC1zaXplOiAxLjFlbTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZGRkO1xcbiAgcGFkZGluZzogMC41ZW0gMC44NWVtO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tb2RhbCxcXG4ueC1zcHJlYWRzaGVldC10b2FzdCB7XFxuICBmb250LXNpemU6IDEzcHg7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB6LWluZGV4OiAxMDAxO1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIGxpbmUtaGVpZ2h0OiAxLjI1ZW07XFxuICBtaW4td2lkdGg6IDM2MHB4O1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XFxuICBib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuMikgMHB4IDJweCA4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvYXN0IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44NSk7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1vZGFsLWhlYWRlcixcXG4ueC1zcHJlYWRzaGVldC10b2FzdC1oZWFkZXIge1xcbiAgZm9udC13ZWlnaHQ6IDYwMDtcXG4gIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuODUpO1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4wNSk7XFxuICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtbW9kYWwtaGVhZGVyIC54LXNwcmVhZHNoZWV0LWljb24sXFxuLngtc3ByZWFkc2hlZXQtdG9hc3QtaGVhZGVyIC54LXNwcmVhZHNoZWV0LWljb24ge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgcmlnaHQ6IDAuOGVtO1xcbiAgdG9wOiAwLjY1ZW07XFxuICBib3JkZXItcmFkaXVzOiAxOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tb2RhbC1oZWFkZXIgLngtc3ByZWFkc2hlZXQtaWNvbjpob3ZlcixcXG4ueC1zcHJlYWRzaGVldC10b2FzdC1oZWFkZXIgLngtc3ByZWFkc2hlZXQtaWNvbjpob3ZlciB7XFxuICBvcGFjaXR5OiAxO1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9hc3QtaGVhZGVyIHtcXG4gIGNvbG9yOiAjZjI3MTFjO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tb2RhbC1oZWFkZXIge1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUyZTQ7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpO1xcbiAgZm9udC1zaXplOiAxLjA3ODVlbTtcXG59XFxuLngtc3ByZWFkc2hlZXQtbW9kYWwtaGVhZGVyLFxcbi54LXNwcmVhZHNoZWV0LW1vZGFsLWNvbnRlbnQsXFxuLngtc3ByZWFkc2hlZXQtdG9hc3QtaGVhZGVyLFxcbi54LXNwcmVhZHNoZWV0LXRvYXN0LWNvbnRlbnQge1xcbiAgcGFkZGluZzogMC43NWVtIDFlbTtcXG59XFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzIwcHgpIGFuZCAobWF4LXdpZHRoOiA0ODBweCkge1xcbiAgLngtc3ByZWFkc2hlZXQtdG9vbGJhciB7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICB9XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24ge1xcbiAgd2lkdGg6IDE4cHg7XFxuICBoZWlnaHQ6IDE4cHg7XFxuICBtYXJnaW46IDFweCAxcHggMnB4IDFweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBsaW5lLWhlaWdodDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZyB7XFxuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fICsgXCIpO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDI2MnB4O1xcbiAgaGVpZ2h0OiA0NDRweDtcXG4gIG9wYWNpdHk6IDAuNTY7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcudW5kbyB7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLnJlZG8ge1xcbiAgbGVmdDogLTE4cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcucHJpbnQge1xcbiAgbGVmdDogLTM2cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcucGFpbnRmb3JtYXQge1xcbiAgbGVmdDogLTU0cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuY2xlYXJmb3JtYXQge1xcbiAgbGVmdDogLTcycHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuZm9udC1ib2xkIHtcXG4gIGxlZnQ6IC05MHB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmZvbnQtaXRhbGljIHtcXG4gIGxlZnQ6IC0xMDhweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy51bmRlcmxpbmUge1xcbiAgbGVmdDogLTEyNnB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLnN0cmlrZSB7XFxuICBsZWZ0OiAtMTQ0cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuY29sb3Ige1xcbiAgbGVmdDogLTE2MnB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJnY29sb3Ige1xcbiAgbGVmdDogLTE4MHB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLm1lcmdlIHtcXG4gIGxlZnQ6IC0xOThweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hbGlnbi1sZWZ0IHtcXG4gIGxlZnQ6IC0yMTZweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hbGlnbi1jZW50ZXIge1xcbiAgbGVmdDogLTIzNHB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFsaWduLXJpZ2h0IHtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFsaWduLXRvcCB7XFxuICBsZWZ0OiAtMThweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYWxpZ24tbWlkZGxlIHtcXG4gIGxlZnQ6IC0zNnB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hbGlnbi1ib3R0b20ge1xcbiAgbGVmdDogLTU0cHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLnRleHR3cmFwIHtcXG4gIGxlZnQ6IC03MnB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hdXRvZmlsdGVyIHtcXG4gIGxlZnQ6IC05MHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5mb3JtdWxhIHtcXG4gIGxlZnQ6IC0xMDhweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYXJyb3ctZG93biB7XFxuICBsZWZ0OiAtMTI2cHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFycm93LXJpZ2h0IHtcXG4gIGxlZnQ6IC0xNDRweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcubGluayB7XFxuICBsZWZ0OiAtMTYycHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNoYXJ0IHtcXG4gIGxlZnQ6IC0xODBweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuZnJlZXplIHtcXG4gIGxlZnQ6IC0xOThweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuZWxsaXBzaXMge1xcbiAgbGVmdDogLTIxNnB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hZGQge1xcbiAgbGVmdDogLTIzNHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5ib3JkZXItYWxsIHtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1pbnNpZGUge1xcbiAgbGVmdDogLTE4cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1ob3Jpem9udGFsIHtcXG4gIGxlZnQ6IC0zNnB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5ib3JkZXItdmVydGljYWwge1xcbiAgbGVmdDogLTU0cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1vdXRzaWRlIHtcXG4gIGxlZnQ6IC03MnB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5ib3JkZXItbGVmdCB7XFxuICBsZWZ0OiAtOTBweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLXRvcCB7XFxuICBsZWZ0OiAtMTA4cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1yaWdodCB7XFxuICBsZWZ0OiAtMTI2cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1ib3R0b20ge1xcbiAgbGVmdDogLTE0NHB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5ib3JkZXItbm9uZSB7XFxuICBsZWZ0OiAtMTYycHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmxpbmUtY29sb3Ige1xcbiAgbGVmdDogLTE4MHB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5saW5lLXR5cGUge1xcbiAgbGVmdDogLTE5OHB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5jbG9zZSB7XFxuICBsZWZ0OiAtMjM0cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNoZXZyb24tZG93biB7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAtNTRweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5jaGV2cm9uLXVwIHtcXG4gIGxlZnQ6IC0xOHB4O1xcbiAgdG9wOiAtNTRweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5jaGV2cm9uLWxlZnQge1xcbiAgbGVmdDogLTM2cHg7XFxuICB0b3A6IC01NHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNoZXZyb24tcmlnaHQge1xcbiAgbGVmdDogLTU0cHg7XFxuICB0b3A6IC01NHB4O1xcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvaW5kZXgubGVzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUF3REE7RUFDRSxTQUFBO0FBdkRGO0FBRkM7RUE2REMsZUFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7RUFDQSxzQkFBQTtFQUNBLDRFQUFBO0VBQ0EsdUJBQUE7RUFDQSxnQkFBQTtFQUNBLG1DQUFBO0FBeERGO0FBWkM7RUF1RUcsOEVBQUE7QUF4REo7QUFmQztFQTZFQyxrQkFBQTtFQUNBLGdCQUFBO0FBM0RGO0FBbkJDO0VBbUZDLHNCQUFBO0FBN0RGO0FBdEJDO0VBdUZDLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7QUE5REY7QUFnRUU7RUFDRSxvQkFBQTtFQUNBLGtCQUFBO0VBQ0EscUJBQUE7RUFDQSxTQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7RUFDQSxXQUFBO0VB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QUE7QUFsTk47QUFvTkk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLE9BQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsT0FBQTtFQUNBLFVBQUE7QUFsTk47QUFvTkk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQWxOTjtBQW9OSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBbE5OO0FBb05JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUFsTk5cIixcInNvdXJjZXNDb250ZW50XCI6W1wiQGNzcy1wcmVmaXg6IHgtc3ByZWFkc2hlZXQ7XFxuLy8gY29sb3JcXG5AcmVkLWNvbG9yOiAjZGIyODI4O1xcbkByZWQtaG92ZXItY29sb3I6ICNkMDE5MTk7XFxuQG9yYW5nZS1jb2xvcjogI2YyNzExYztcXG5Ab3JhbmdlLWhvdmVyLWNvbG9yOiAjZjI2MjAyO1xcbkB5ZWxsb3ctY29sb3I6ICNmYmJkMDg7XFxuQHllbGxvdy1ob3Zlci1jb2xvcjogI2VhYWUwMDtcXG5Ab2xpdmUtY29sb3I6ICNiNWNjMTg7XFxuQG9saXZlLWhvdmVyLWNvbG9yOiAjYTdiZDBkO1xcbkBncmVlbi1jb2xvcjogIzIxYmE0NTtcXG5AZ3JlZW4taG92ZXItY29sb3I6ICMxNmFiMzk7XFxuQHRlYWwtY29sb3I6ICMwMGI1YWQ7XFxuQHRlYWwtaG92ZXItY29sb3I6ICMwMDljOTU7XFxuQGJsdWUtY29sb3I6ICMyMTg1ZDA7XFxuQGJsdWUtaG92ZXItY29sb3I6ICMxNjc4YzI7XFxuQHZpb2xldC1jb2xvcjogIzY0MzVjOTtcXG5AdmlvbGV0LWhvdmVyLWNvbG9yOiAjNTgyOWJiO1xcbkBwdXJwbGUtY29sb3I6ICNhMzMzYzg7XFxuQHB1cnBsZS1ob3Zlci1jb2xvcjogIzk2MjdiYTtcXG5AcGluay1jb2xvcjogI2UwMzk5NztcXG5AcGluay1ob3Zlci1jb2xvcjogI2U2MWE4ZDtcXG5AYnJvd24tY29sb3I6ICNhNTY3M2Y7XFxuQGJyb3duLWhvdmVyLWNvbG9yOiAjOTc1YjMzO1xcbkBncmV5LWNvbG9yOiAjNzY3Njc2O1xcbkBncmV5LWhvdmVyLWNvbG9yOiAjODM4MzgzO1xcbkBkYXJrLWNvbG9yOiAjMzQzYTQwO1xcbkBkYXJrLWhvdmVyLWNvbG9yOiBkYXJrZW4oQGRhcmstY29sb3IsIDEwJSk7XFxuQGJsYWNrLWNvbG9yOiAjMWIxYzFkO1xcbkBibGFjay1ob3Zlci1jb2xvcjogIzI3MjkyYTtcXG5cXG4vLyBiYXNlXFxuQGJvcmRlci1zdHlsZTogMXB4IHNvbGlkICNlMGUyZTQ7XFxuQGljb24tc2l6ZTogMThweDtcXG5AbGluZS1oZWlnaHQ6IDEuMjVlbTtcXG5AYm9yZGVyLWNvbG9yOiAjZTllOWU5O1xcbkBib3JkZXI6IDFweCBzb2xpZCBAYm9yZGVyLWNvbG9yO1xcbkBpbnB1dC1ib3JkZXI6IEBib3JkZXI7XFxuQGlucHV0LXBhZGRpbmc6IDAuNWVtIDAuNzVlbTtcXG5AaW5wdXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IGhzbGEoMCwgMCUsIDQlLCAwLjA2KTtcXG5AYm9yZGVyLXJhZGl1czogMnB4O1xcbkBmb3JtLWZpZWxkLWhlaWdodDogMzBweDtcXG5AcHJpbWFyeS1jb2xvcjogQGJsdWUtY29sb3I7XFxuQHByaW1hcnktaG92ZXItY29sb3I6IEBibHVlLWhvdmVyLWNvbG9yO1xcblxcbi8vIG1ldGhvZFxcbi50eXBlLXByaW1hcnkoKSB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGJhY2tncm91bmQtY29sb3I6IEBwcmltYXJ5LWNvbG9yO1xcbiAgJjpob3ZlcixcXG4gICYuYWN0aXZlIHtcXG4gICAgY29sb3I6ICNmZmY7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IEBwcmltYXJ5LWhvdmVyLWNvbG9yO1xcbiAgfVxcbn1cXG5cXG5ib2R5IHtcXG4gIG1hcmdpbjogMDtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0ge1xcbiAgZm9udC1zaXplOiAxM3B4O1xcbiAgbGluZS1oZWlnaHQ6IG5vcm1hbDtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gIGZvbnQtZmFtaWx5OiAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcXG5cXG4gIHRleHRhcmVhIHtcXG4gICAgZm9udDogNDAwIDEzcHggQXJpYWwsICdMYXRvJywgJ1NvdXJjZSBTYW5zIFBybycsIFJvYm90bywgSGVsdmV0aWNhLFxcbiAgICAgIHNhbnMtc2VyaWY7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXNoZWV0IHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXRhYmxlIHtcXG4gIC8vIGh0bWw1IGJvdHRvbSBtYXJnaW4gYnVnXFxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10b29sdGlwIHtcXG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgcGFkZGluZzogNXB4IDEwcHg7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGJvcmRlci1yYWRpdXM6IDFweDtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMSk7XFxuICBmb250LXNpemU6IDEycHg7XFxuICB6LWluZGV4OiAyMDE7XFxuXFxuICAmOmJlZm9yZSB7XFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IGNhbGMoNTAlIC0gNHB4KTtcXG4gICAgdG9wOiAtNHB4O1xcbiAgICBjb250ZW50OiAnJztcXG4gICAgd2lkdGg6IDhweDtcXG4gICAgaGVpZ2h0OiA4cHg7XFxuICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XFxuICAgIHotaW5kZXg6IDE7XFxuICAgIGJveC1zaGFkb3c6IDFweCAxcHggM3B4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1jb2xvci1wYWxldHRlIHtcXG4gIHBhZGRpbmc6IDVweDtcXG5cXG4gIHRhYmxlIHtcXG4gICAgbWFyZ2luOiAwO1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xcbiAgICBib3JkZXItc3BhY2luZzogMjtcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG5cXG4gICAgdGQge1xcbiAgICAgIG1hcmdpbjogMDtcXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuXFxuICAgICAgJjpob3ZlciB7XFxuICAgICAgICBib3JkZXItY29sb3I6ICNkZGQ7XFxuICAgICAgfVxcblxcbiAgICAgIC5Ae2Nzcy1wcmVmaXh9LWNvbG9yLXBhbGV0dGUtY2VsbCB7XFxuICAgICAgICB3aWR0aDogMTZweDtcXG4gICAgICAgIGhlaWdodDogMTZweDtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tYm9yZGVyLXBhbGV0dGUge1xcbiAgcGFkZGluZzogNnB4O1xcblxcbiAgdGFibGUge1xcbiAgICBtYXJnaW46IDA7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XFxuICAgIGJvcmRlci1zcGFjaW5nOiAwO1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xcblxcbiAgICB0ZCB7XFxuICAgICAgbWFyZ2luOiAwO1xcbiAgICB9XFxuICB9XFxuXFxuICAuQHtjc3MtcHJlZml4fS1ib3JkZXItcGFsZXR0ZS1sZWZ0IHtcXG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZTtcXG4gICAgcGFkZGluZy1yaWdodDogNnB4O1xcblxcbiAgICAuQHtjc3MtcHJlZml4fS1ib3JkZXItcGFsZXR0ZS1jZWxsIHtcXG4gICAgICB3aWR0aDogMzBweDtcXG4gICAgICBoZWlnaHQ6IDMwcHg7XFxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG5cXG4gICAgICAuQHtjc3MtcHJlZml4fS1pY29uLWltZyB7XFxuICAgICAgICBvcGFjaXR5OiAwLjg7XFxuICAgICAgfVxcblxcbiAgICAgICY6aG92ZXIge1xcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWJvcmRlci1wYWxldHRlLXJpZ2h0IHtcXG4gICAgcGFkZGluZy1sZWZ0OiA2cHg7XFxuXFxuICAgIC5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXItYnRuIHtcXG4gICAgICBtYXJnaW4tdG9wOiAwO1xcbiAgICAgIG1hcmdpbi1ib3R0b206IDNweDtcXG4gICAgfVxcblxcbiAgICAuQHtjc3MtcHJlZml4fS1saW5lLXR5cGUge1xcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHRvcDogLTNweDtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1kcm9wZG93biB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuXFxuICAuQHtjc3MtcHJlZml4fS1kcm9wZG93bi1jb250ZW50IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB6LWluZGV4OiAyMDA7XFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxuICAgIGJveC1zaGFkb3c6IDFweCAycHggNXB4IDJweCByZ2JhKDUxLCA1MSwgNTEsIDAuMTUpO1xcbiAgfVxcblxcbiAgJi5ib3R0b20tbGVmdCB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgICAgIHRvcDogY2FsYyh+JzEwMCUgKyA1cHgnKTtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICB9XFxuICB9XFxuXFxuICAmLmJvdHRvbS1yaWdodCB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgICAgIHRvcDogY2FsYyh+JzEwMCUgKyA1cHgnKTtcXG4gICAgICByaWdodDogMDtcXG4gICAgfVxcbiAgfVxcblxcbiAgJi50b3AtbGVmdCB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgICAgIGJvdHRvbTogY2FsYyh+JzEwMCUgKyA1cHgnKTtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICB9XFxuICB9XFxuXFxuICAmLnRvcC1yaWdodCB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgICAgIGJvdHRvbTogY2FsYyh+JzEwMCUgKyA1cHgnKTtcXG4gICAgICByaWdodDogMDtcXG4gICAgfVxcbiAgfVxcblxcbiAgLkB7Y3NzLXByZWZpeH0tZHJvcGRvd24tdGl0bGUge1xcbiAgICBwYWRkaW5nOiAwIDVweDtcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgfVxcblxcbiAgLkB7Y3NzLXByZWZpeH0tZHJvcGRvd24taGVhZGVyIHtcXG4gICAgLkB7Y3NzLXByZWZpeH0taWNvbi5hcnJvdy1sZWZ0IHtcXG4gICAgICBtYXJnaW4tbGVmdDogNHB4O1xcbiAgICB9XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWljb24uYXJyb3ctcmlnaHQge1xcbiAgICAgIHdpZHRoOiAxMHB4O1xcbiAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xcbiAgICAgIC5hcnJvdy1kb3duIHtcXG4gICAgICAgIGxlZnQ6IC0xMzBweDtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG59XFxuLyogcmVzaXplciAqKi9cXG4uQHtjc3MtcHJlZml4fS1yZXNpemVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IDExO1xcblxcbiAgLkB7Y3NzLXByZWZpeH0tcmVzaXplci1ob3ZlciB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNzUsIDEzNywgMjU1LCAwLjI1KTtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LXJlc2l6ZXItbGluZSB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIH1cXG5cXG4gICYuaG9yaXpvbnRhbCB7XFxuICAgIGN1cnNvcjogcm93LXJlc2l6ZTtcXG4gICAgLkB7Y3NzLXByZWZpeH0tcmVzaXplci1saW5lIHtcXG4gICAgICBib3JkZXItYm90dG9tOiAycHggZGFzaGVkIHJnYig3NSwgMTM3LCAyNTUpO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgYm90dG9tOiAwO1xcbiAgICB9XFxuICB9XFxuICAmLnZlcnRpY2FsIHtcXG4gICAgY3Vyc29yOiBjb2wtcmVzaXplO1xcbiAgICAuQHtjc3MtcHJlZml4fS1yZXNpemVyLWxpbmUge1xcbiAgICAgIGJvcmRlci1yaWdodDogMnB4IGRhc2hlZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgICB0b3A6IDA7XFxuICAgICAgcmlnaHQ6IDA7XFxuICAgIH1cXG4gIH1cXG59XFxuLyogc2Nyb2xsYmFyICovXFxuLkB7Y3NzLXByZWZpeH0tc2Nyb2xsYmFyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjVmODtcXG4gIG9wYWNpdHk6IDAuOTtcXG4gIHotaW5kZXg6IDEyO1xcbiAgJi5ob3Jpem9udGFsIHtcXG4gICAgcmlnaHQ6IDE1cHg7XFxuICAgIG92ZXJmbG93LXg6IHNjcm9sbDtcXG4gICAgb3ZlcmZsb3cteTogaGlkZGVuO1xcbiAgICA+IGRpdiB7XFxuICAgICAgaGVpZ2h0OiAxcHg7XFxuICAgICAgYmFja2dyb3VuZDogI2RkZDtcXG4gICAgfVxcbiAgfVxcbiAgJi52ZXJ0aWNhbCB7XFxuICAgIGJvdHRvbTogMTVweDtcXG4gICAgb3ZlcmZsb3cteDogaGlkZGVuO1xcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XFxuICAgID4gZGl2IHtcXG4gICAgICB3aWR0aDogMXB4O1xcbiAgICAgIGJhY2tncm91bmQ6ICNkZGQ7XFxuICAgIH1cXG4gIH1cXG4gICY6aG92ZXIge1xcbiAgICAvLyBvcGFjaXR5OiAuODU7XFxuICB9XFxufVxcblxcbi8qIEB7Y3NzLXByZWZpeH0tb3ZlcmxheWVyICovXFxuLkB7Y3NzLXByZWZpeH0tb3ZlcmxheWVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxuICB6LWluZGV4OiAxMDtcXG4gIC5Ae2Nzcy1wcmVmaXh9LW92ZXJsYXllci1jb250ZW50IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tZWRpdG9yLFxcbi5Ae2Nzcy1wcmVmaXh9LXNlbGVjdG9yIHtcXG4gIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG5cXG4vKiBAe2Nzcy1wcmVmaXh9LXNlbGVjdG9yICovXFxuLkB7Y3NzLXByZWZpeH0tc2VsZWN0b3Ige1xcbiAgLmhpZGUtaW5wdXQge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHotaW5kZXg6IDA7XFxuICAgIGlucHV0IHtcXG4gICAgICBwYWRkaW5nOiAwO1xcbiAgICAgIHdpZHRoOiAwO1xcbiAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xcbiAgICB9XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1hcmVhIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgYmFja2dyb3VuZDogcmdiYSg3NSwgMTM3LCAyNTUsIDAuMSk7XFxuICAgIHotaW5kZXg6IDU7XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1jbGlwYm9hcmQsXFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1hdXRvZmlsbCB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuICAgIHotaW5kZXg6IDEwMDtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LXNlbGVjdG9yLWNsaXBib2FyZCB7XFxuICAgIGJvcmRlcjogMnB4IGRhc2hlZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LXNlbGVjdG9yLWF1dG9maWxsIHtcXG4gICAgYm9yZGVyOiAxcHggZGFzaGVkIHJnYmEoMCwgMCwgMCwgMC40NSk7IC8vICM2MDYwNjA7IC8vIHJnYmEoMCwgMCwgMCwgLjIpO1xcbiAgfVxcbiAgLkB7Y3NzLXByZWZpeH0tc2VsZWN0b3ItY29ybmVyIHtcXG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgY3Vyc29yOiBjcm9zc2hhaXI7XFxuICAgIGZvbnQtc2l6ZTogMDtcXG4gICAgaGVpZ2h0OiA1cHg7XFxuICAgIHdpZHRoOiA1cHg7XFxuICAgIHJpZ2h0OiAtNXB4O1xcbiAgICBib3R0b206IC01cHg7XFxuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYigyNTUsIDI1NSwgMjU1KTtcXG4gICAgYmFja2dyb3VuZDogcmdiKDc1LCAxMzcsIDI1NSk7XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWVkaXRvciB7XFxuICB6LWluZGV4OiAyMDtcXG4gIC5Ae2Nzcy1wcmVmaXh9LWVkaXRvci1hcmVhIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgbGluZS1oZWlnaHQ6IDA7XFxuICAgIHotaW5kZXg6IDEwMDtcXG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuXFxuICAgIHRleHRhcmVhIHtcXG4gICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gICAgICBib3JkZXI6IG5vbmU7XFxuICAgICAgcGFkZGluZzogMCAzcHg7XFxuICAgICAgb3V0bGluZTogbm9uZTtcXG4gICAgICByZXNpemU6IG5vbmU7XFxuICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7XFxuICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xcbiAgICAgIGZvbnQ6IDQwMCAxM3B4IEFyaWFsLCAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSxcXG4gICAgICAgIHNhbnMtc2VyaWY7XFxuICAgICAgY29sb3I6IGluaGVyaXQ7XFxuICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcXG4gICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XFxuICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XFxuICAgICAgbWFyZ2luOiAwO1xcbiAgICB9XFxuXFxuICAgIC50ZXh0bGluZSB7XFxuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgIHRvcDogMDtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICB9XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWl0ZW0ge1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBiYWNrZ3JvdW5kOiAwO1xcbiAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgaGVpZ2h0OiAyNnB4O1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC45KTtcXG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG4gIHBhZGRpbmc6IDJweCAxMHB4O1xcbiAgY3Vyc29yOiBkZWZhdWx0O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuXFxuICAmLmRpc2FibGVkIHtcXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICAgIG9wYWNpdHk6IDAuNTtcXG4gIH1cXG5cXG4gICY6aG92ZXIsXFxuICAmLmFjdGl2ZSB7XFxuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XFxuICB9XFxuXFxuICAvLyAmLmFjdGl2ZSB7XFxuICAvLy8vICAgYmFja2dyb3VuZDogIzg5YWVmNTNkO1xcbiAgLy8gfVxcblxcbiAgJi5kaXZpZGVyIHtcXG4gICAgaGVpZ2h0OiAwO1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBtYXJnaW46IDVweCAwO1xcbiAgICBib3JkZXI6IG5vbmU7XFxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxuICB9XFxuXFxuICAubGFiZWwge1xcbiAgICBmbG9hdDogcmlnaHQ7XFxuICAgIG9wYWNpdHk6IDAuNjU7XFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcbiAgfVxcbn1cXG5cXG4ueC1zcHJlYWRzaGVldC1pdGVtLFxcbi54LXNwcmVhZHNoZWV0LWhlYWRlciB7XFxuICAmLnN0YXRlIHtcXG4gICAgcGFkZGluZy1sZWZ0OiAzNXB4ICFpbXBvcnRhbnQ7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG5cXG4gICAgJjpiZWZvcmUge1xcbiAgICAgIGNvbnRlbnQ6ICcnO1xcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICB3aWR0aDogMTBweDtcXG4gICAgICBoZWlnaHQ6IDEwcHg7XFxuICAgICAgbGVmdDogMTJweDtcXG4gICAgICB0b3A6IGNhbGMoNTAlIC0gNXB4KTtcXG4gICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpO1xcbiAgICAgIC8vIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xKTtcXG4gICAgICBib3JkZXItcmFkaXVzOiAycHg7XFxuICAgIH1cXG4gIH1cXG4gICYuc3RhdGUuY2hlY2tlZDpiZWZvcmUge1xcbiAgICBiYWNrZ3JvdW5kOiAjNGI4OWZmO1xcbiAgICAvLyBjb250ZW50OiAnJztcXG4gICAgLy8gcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAvLyB3aWR0aDogNXB4O1xcbiAgICAvLyBoZWlnaHQ6IDEycHg7XFxuICAgIC8vIGNvbG9yOiAjNGI4OWZmOyAvLyAjMzUzQTQxO1xcbiAgICAvLyBib3JkZXItbGVmdDogbm9uZTtcXG4gICAgLy8gYm9yZGVyLXRvcDogbm9uZTtcXG4gICAgLy8gYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkO1xcbiAgICAvLyBib3JkZXItcmlnaHQ6IDJweCBzb2xpZDtcXG4gICAgLy8gbGVmdDogMTVweDtcXG4gICAgLy8gdG9wOiA2cHg7XFxuICAgIC8vIGJhY2tncm91bmQ6IG5vbmU7XFxuICAgIC8vIGJvcmRlci1yYWRpdXM6IDA7XFxuICAgIC8vIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlcjtcXG4gICAgLy8gdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xcbiAgICAvLyAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tY2hlY2tib3gge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xcbiAgb3V0bGluZTogMDtcXG4gIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcXG4gIGZvbnQtc2l6ZTogMXJlbTtcXG4gIGxpbmUtaGVpZ2h0OiAxZW07XFxuICA+IGlucHV0IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDA7XFxuICAgIGxlZnQ6IDA7XFxuICAgIG9wYWNpdHk6IDAgIWltcG9ydGFudDtcXG4gICAgb3V0bGluZTogMDtcXG4gICAgei1pbmRleDogLTE7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXN1Z2dlc3QsXFxuLkB7Y3NzLXByZWZpeH0tY29udGV4dG1lbnUsXFxuLkB7Y3NzLXByZWZpeH0tc29ydC1maWx0ZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm94LXNoYWRvdzogMXB4IDJweCA1cHggMnB4IHJnYmEoNTEsIDUxLCA1MSwgMC4xNSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgei1pbmRleDogMTAwO1xcbiAgd2lkdGg6IDI2MHB4O1xcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICBvdmVyZmxvdzogYXV0bztcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tc3VnZ2VzdCB7XFxuICB3aWR0aDogMjAwcHg7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWZpbHRlciB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5O1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbWFyZ2luOiAxMHB4O1xcblxcbiAgLkB7Y3NzLXByZWZpeH0taGVhZGVyIHtcXG4gICAgcGFkZGluZzogMC41ZW0gMC43NWVtO1xcbiAgICBiYWNrZ3JvdW5kOiAjZjhmOGY5O1xcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U5ZTllOTtcXG4gICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LWJvZHkge1xcbiAgICBoZWlnaHQ6IDIwMHB4O1xcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xcblxcbiAgICAuQHtjc3MtcHJlZml4fS1pdGVtIHtcXG4gICAgICBoZWlnaHQ6IDIwcHg7XFxuICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tc29ydC1maWx0ZXIge1xcbiAgLkB7Y3NzLXByZWZpeH0tYnV0dG9ucyB7XFxuICAgIG1hcmdpbjogMTBweDtcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tdG9vbGJhcixcXG4uQHtjc3MtcHJlZml4fS1ib3R0b21iYXIge1xcbiAgaGVpZ2h0OiA0MHB4O1xcbiAgcGFkZGluZzogMCAzMHB4O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIGJhY2tncm91bmQ6ICNmNWY2Zjc7XFxuICBkaXNwbGF5OiBmbGV4O1xcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1ib3R0b21iYXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUyZTQ7XFxuXFxuICAuQHtjc3MtcHJlZml4fS1tZW51ID4gbGkge1xcbiAgICBsaW5lLWhlaWdodDogNDBweDtcXG4gICAgaGVpZ2h0OiA0MHB4O1xcbiAgICBwYWRkaW5nLXRvcDogMDtcXG4gICAgcGFkZGluZy1ib3R0b206IDA7XFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlOGVhZWQ7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LW1lbnUge1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG59XFxuLkB7Y3NzLXByZWZpeH0tbWVudSA+IGxpIHtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgbGluZS1oZWlnaHQ6IDEuMjVlbTtcXG4gIHBhZGRpbmc6IDAuNzg1ZW0gMWVtO1xcbiAgbWFyZ2luOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgY29sb3I6ICM4MDg2OGI7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3M7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG5cXG4gICYuYWN0aXZlIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7XFxuICB9XFxuXFxuICAuQHtjc3MtcHJlZml4fS1pY29uIHtcXG4gICAgbWFyZ2luOiAwIDZweDtcXG5cXG4gICAgLkB7Y3NzLXByZWZpeH0taWNvbi1pbWcge1xcbiAgICAgICY6aG92ZXIge1xcbiAgICAgICAgb3BhY2l0eTogMC44NTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duIHtcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10b29sYmFyIHtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMmU0O1xcblxcbiAgLkB7Y3NzLXByZWZpeH0tdG9vbGJhci1idG5zIHtcXG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XFxuICB9XFxuXFxuICAuQHtjc3MtcHJlZml4fS10b29sYmFyLW1vcmUge1xcbiAgICBwYWRkaW5nOiAwIDZweCA2cHg7XFxuICAgIHRleHQtYWxpZ246IGxlZnQ7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXItZGl2aWRlciB7XFxuICAgICAgbWFyZ2luLXRvcDogMDtcXG4gICAgfVxcbiAgfVxcblxcbiAgLkB7Y3NzLXByZWZpeH0tdG9vbGJhci1idG4ge1xcbiAgICBmbGV4OiAwIDAgYXV0bztcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gICAgaGVpZ2h0OiAyNnB4O1xcbiAgICBsaW5lLWhlaWdodDogMjZweDtcXG4gICAgbWluLXdpZHRoOiAyNnB4O1xcbiAgICBtYXJnaW46IDZweCAxcHggMDtcXG4gICAgcGFkZGluZzogMDtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XFxuXFxuICAgICYuZGlzYWJsZWQge1xcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgICAgIG9wYWNpdHk6IDAuNTtcXG4gICAgfVxcblxcbiAgICAmOmhvdmVyLFxcbiAgICAmLmFjdGl2ZSB7XFxuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10b29sYmFyLWRpdmlkZXIge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2UwZTJlNDtcXG4gIHdpZHRoOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGhlaWdodDogMThweDtcXG4gIG1hcmdpbjogMTJweCAzcHggMDtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tcHJpbnQge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG4gIHotaW5kZXg6IDEwMDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LXByaW50LWJhciB7XFxuICBiYWNrZ3JvdW5kOiAjNDI0MjQyO1xcbiAgaGVpZ2h0OiA2MHB4O1xcbiAgbGluZS1oZWlnaHQ6IDYwcHg7XFxuICBwYWRkaW5nOiAwIDMwcHg7XFxuXFxuICAuLXRpdGxlIHtcXG4gICAgY29sb3I6ICNmZmY7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICBmb250LXNpemU6IDEuMmVtO1xcbiAgICBmbG9hdDogbGVmdDtcXG4gIH1cXG5cXG4gIC4tcmlnaHQge1xcbiAgICBmbG9hdDogcmlnaHQ7XFxuICAgIG1hcmdpbi10b3A6IDEycHg7XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LXByaW50LWNvbnRlbnQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXg6IGF1dG87XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgYmFja2dyb3VuZDogI2QwZDBkMDtcXG4gIGhlaWdodDogY2FsYygxMDAlIC0gNjBweCk7XFxuXFxuICAuLXNpZGVyIHtcXG4gICAgZmxleDogMCAwIDMwMHB4O1xcbiAgICB3aWR0aDogMzAwcHg7XFxuICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgI2NjYztcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIH1cXG5cXG4gIC4tY29udGVudCB7XFxuICAgIGZsZXg6IGF1dG87XFxuICAgIG92ZXJmbG93LXg6IGF1dG87XFxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1jYW52YXMtY2FyZC13cmFwZXIge1xcbiAgbWFyZ2luOiA0MHB4IDIwcHg7XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWNhbnZhcy1jYXJkIHtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBtYXJnaW46IGF1dG87XFxuICBwYWdlLWJyZWFrLWJlZm9yZTogYXV0bztcXG4gIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cztcXG4gIGJveC1zaGFkb3c6IDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksXFxuICAgIDAgM3B4IDE0cHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgNHB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tY2FsZW5kYXIge1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmZmZmO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuXFxuICAuY2FsZW5kYXItaGVhZGVyIHtcXG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gICAgbGluZS1oZWlnaHQ6IDMwcHg7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGZsb2F0OiBsZWZ0O1xcbiAgICBiYWNrZ3JvdW5kOiAjZjlmYWZiO1xcblxcbiAgICAuY2FsZW5kYXItaGVhZGVyLWxlZnQge1xcbiAgICAgIHBhZGRpbmctbGVmdDogNXB4O1xcbiAgICAgIGZsb2F0OiBsZWZ0O1xcbiAgICB9XFxuXFxuICAgIC5jYWxlbmRhci1oZWFkZXItcmlnaHQge1xcbiAgICAgIGZsb2F0OiByaWdodDtcXG5cXG4gICAgICBhIHtcXG4gICAgICAgIHBhZGRpbmc6IDNweCAwO1xcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XFxuICAgICAgfVxcbiAgICAgIGE6aG92ZXIge1xcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIC5jYWxlbmRhci1ib2R5IHtcXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG4gICAgYm9yZGVyLXNwYWNpbmc6IDA7XFxuXFxuICAgIHRoLFxcbiAgICB0ZCB7XFxuICAgICAgd2lkdGg6IDEwMCUvNztcXG4gICAgICBtaW4td2lkdGg6IDMycHg7XFxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XFxuICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7XFxuICAgICAgcGFkZGluZzogMDtcXG4gICAgfVxcblxcbiAgICB0ZCA+IC5jZWxsIHtcXG4gICAgICAvLyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNSk7XFxuXFxuICAgICAgJjpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xcbiAgICAgIH1cXG5cXG4gICAgICAmLmFjdGl2ZSxcXG4gICAgICAmLmFjdGl2ZTpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xcbiAgICAgICAgY29sb3I6ICMyMTg1ZDA7XFxuICAgICAgfVxcblxcbiAgICAgICYuZGlzYWJsZWQge1xcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICAgICAgICBvcGFjaXR5OiAwLjU7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWRhdGVwaWNrZXIge1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogY2FsYygxMDAlICsgNXB4KTtcXG4gIHotaW5kZXg6IDEwO1xcbiAgd2lkdGg6IGF1dG87XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWJ1dHRvbnMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxuXFxuICAuQHtjc3MtcHJlZml4fS1idXR0b24ge1xcbiAgICBtYXJnaW4tbGVmdDogOHB4O1xcbiAgfVxcbn1cXG4uQHtjc3MtcHJlZml4fS1idXR0b24ge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgbGluZS1oZWlnaHQ6IDFlbTtcXG4gIG1pbi1oZWlnaHQ6IDFlbTtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBmb250LXNpemU6IDFlbTtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxuICBwYWRkaW5nOiAwLjc1ZW0gMWVtO1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcXG4gIGJhY2tncm91bmQ6ICNlMGUxZTI7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAncHJveGltYS1ub3ZhJywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XFxuICAvL2JveC1zaGFkb3c6IDBweCAxcHggMnB4IC0xcHggcmdiYSgyNTUsMjU1LDI1NSwwLjUpIGluc2V0LCAwcHggLTJweCAwcHggMHB4IHJnYmEoMCwwLDAsMC4xKSBpbnNldDtcXG4gIC8vYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDAsMCwwLC41KSBpbnNldDtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxuICB6b29tOiAxO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBsaW5lYXI7XFxuXFxuICAmLmFjdGl2ZSxcXG4gICY6aG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzBjMWMyO1xcbiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpO1xcbiAgfVxcblxcbiAgJi5wcmltYXJ5IHtcXG4gICAgLnR5cGUtcHJpbWFyeTtcXG4gIH1cXG59XFxuXFxuLy8gZm9ybSBiZWdpblxcbi5Ae2Nzcy1wcmVmaXh9LWZvcm0taW5wdXQge1xcbiAgZm9udC1zaXplOiAxZW07XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcXG5cXG4gIGlucHV0IHtcXG4gICAgei1pbmRleDogMTtcXG4gICAgbWFyZ2luOiAwO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICAgIGZsZXg6IDEgMCBhdXRvO1xcbiAgICBvdXRsaW5lOiAwO1xcbiAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMCk7XFxuICAgIHRleHQtYWxpZ246IGxlZnQ7XFxuICAgIGxpbmUtaGVpZ2h0OiBAZm9ybS1maWVsZC1oZWlnaHQ7XFxuICAgIGhlaWdodDogQGZvcm0tZmllbGQtaGVpZ2h0O1xcbiAgICBwYWRkaW5nOiAwIDhweDtcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2U5ZTllOTtcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuMXMgZWFzZSwgYm9yZGVyLWNvbG9yIDAuMXMgZWFzZTtcXG4gICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IGhzbGEoMCwgMCUsIDQlLCAwLjA2KTtcXG5cXG4gICAgJjpmb2N1cyB7XFxuICAgICAgYm9yZGVyLWNvbG9yOiByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSg3NSwgMTM3LCAyNTUsIDAuMik7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tZm9ybS1zZWxlY3Qge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIGJvcmRlcjogQGlucHV0LWJvcmRlcjtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggaHNsYSgwLCAwJSwgNCUsIDAuMDYpO1xcblxcbiAgLmlucHV0LXRleHQge1xcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gICAgbWluLXdpZHRoOiA2MHB4O1xcbiAgICB3aWR0aDogYXV0bztcXG4gICAgaGVpZ2h0OiBAZm9ybS1maWVsZC1oZWlnaHQ7XFxuICAgIGxpbmUtaGVpZ2h0OiBAZm9ybS1maWVsZC1oZWlnaHQ7XFxuICAgIHBhZGRpbmc6IDAgOHB4O1xcbiAgfVxcbn1cXG4uQHtjc3MtcHJlZml4fS1mb3JtLWZpZWxkcyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWZvcm0tZmllbGQge1xcbiAgICBmbGV4OiAwIDEgYXV0bztcXG4gICAgLmxhYmVsIHtcXG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICAgICAgbWFyZ2luOiAwIDEwcHggMCAwO1xcbiAgICB9XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWZvcm0tZmllbGQge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcblxcbiAgJjpmaXJzdC1jaGlsZCB7XFxuICAgIG1hcmdpbi1sZWZ0OiAwO1xcbiAgfVxcblxcbiAgJi5lcnJvciB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWZvcm0tc2VsZWN0LFxcbiAgICBpbnB1dCB7XFxuICAgICAgYm9yZGVyLWNvbG9yOiAjZjA0MTM0O1xcbiAgICB9XFxuICB9XFxuXFxuICAudGlwIHtcXG4gICAgY29sb3I6ICNmMDQxMzQ7XFxuICAgIGZvbnQtc2l6ZTogMC45ZW07XFxuICB9XFxufVxcbi8vIGZvcm0gZW5kXFxuLkB7Y3NzLXByZWZpeH0tZGltbWVyIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDAgIWltcG9ydGFudDtcXG4gIGxlZnQ6IDAgIWltcG9ydGFudDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcXG4gIG9wYWNpdHk6IDA7XFxuICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7XFxuICBhbmltYXRpb24tZmlsbC1tb2RlOiBib3RoO1xcbiAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDAuNXM7XFxuICBhbmltYXRpb24tZHVyYXRpb246IDAuNXM7XFxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuNXMgbGluZWFyO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB6LWluZGV4OiAxMDAwO1xcblxcbiAgJi5hY3RpdmUge1xcbiAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgb3BhY2l0eTogMTtcXG4gIH1cXG59XFxuXFxuZm9ybSBmaWVsZHNldCB7XFxuICBib3JkZXI6IG5vbmU7XFxuXFxuICBsYWJlbCB7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcXG4gICAgZm9udC1zaXplOiAxZW07XFxuICAgIGNvbG9yOiAjNjY2O1xcbiAgfVxcblxcbiAgc2VsZWN0IHtcXG4gICAgZm9udC1zaXplOiAxLjFlbTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICAgIGJvcmRlcjogbm9uZTtcXG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNkZGQ7XFxuICAgIHBhZGRpbmc6IDAuNWVtIDAuODVlbTtcXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1tb2RhbCxcXG4uQHtjc3MtcHJlZml4fS10b2FzdCB7XFxuICBmb250LXNpemU6IDEzcHg7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB6LWluZGV4OiAxMDAxO1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIGxpbmUtaGVpZ2h0OiBAbGluZS1oZWlnaHQ7XFxuICBtaW4td2lkdGg6IDM2MHB4O1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XFxuICBib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuMikgMHB4IDJweCA4cHg7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXRvYXN0IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44NSk7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LW1vZGFsLWhlYWRlcixcXG4uQHtjc3MtcHJlZml4fS10b2FzdC1oZWFkZXIge1xcbiAgZm9udC13ZWlnaHQ6IDYwMDtcXG4gIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuODUpO1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4wNSk7XFxuICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWljb24ge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHJpZ2h0OiAwLjhlbTtcXG4gICAgdG9wOiAwLjY1ZW07XFxuICAgIGJvcmRlci1yYWRpdXM6IDE4cHg7XFxuXFxuICAgICY6aG92ZXIge1xcbiAgICAgIG9wYWNpdHk6IDE7XFxuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10b2FzdC1oZWFkZXIge1xcbiAgY29sb3I6IEBvcmFuZ2UtY29sb3I7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LW1vZGFsLWhlYWRlciB7XFxuICBib3JkZXItYm90dG9tOiBAYm9yZGVyLXN0eWxlO1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG4gIGZvbnQtc2l6ZTogMS4wNzg1ZW07XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LW1vZGFsLWhlYWRlcixcXG4uQHtjc3MtcHJlZml4fS1tb2RhbC1jb250ZW50LFxcbi5Ae2Nzcy1wcmVmaXh9LXRvYXN0LWhlYWRlcixcXG4uQHtjc3MtcHJlZml4fS10b2FzdC1jb250ZW50IHtcXG4gIHBhZGRpbmc6IDAuNzVlbSAxZW07XFxufVxcblxcbkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDMyMHB4KSBhbmQgKG1heC13aWR0aDogNDgwcHgpIHtcXG4gIC5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXIge1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1pY29uIHtcXG4gIHdpZHRoOiAxOHB4O1xcbiAgaGVpZ2h0OiAxOHB4O1xcbiAgbWFyZ2luOiAxcHggMXB4IDJweCAxcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgbGluZS1oZWlnaHQ6IDA7XFxuXFxuICAuQHtjc3MtcHJlZml4fS1pY29uLWltZyB7XFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vYXNzZXRzL3Nwcml0ZS5zdmcnKTtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB3aWR0aDogMjYycHg7XFxuICAgIGhlaWdodDogNDQ0cHg7XFxuICAgIG9wYWNpdHk6IDAuNTY7XFxuXFxuICAgICYudW5kbyB7XFxuICAgICAgbGVmdDogMDtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5yZWRvIHtcXG4gICAgICBsZWZ0OiAtMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYucHJpbnQge1xcbiAgICAgIGxlZnQ6IC0yICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5wYWludGZvcm1hdCB7XFxuICAgICAgbGVmdDogLTMgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLmNsZWFyZm9ybWF0IHtcXG4gICAgICBsZWZ0OiAtNCAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuZm9udC1ib2xkIHtcXG4gICAgICBsZWZ0OiAtNSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuZm9udC1pdGFsaWMge1xcbiAgICAgIGxlZnQ6IC02ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi51bmRlcmxpbmUge1xcbiAgICAgIGxlZnQ6IC03ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5zdHJpa2Uge1xcbiAgICAgIGxlZnQ6IC04ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5jb2xvciB7XFxuICAgICAgbGVmdDogLTkgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLmJnY29sb3Ige1xcbiAgICAgIGxlZnQ6IC0xMCAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYubWVyZ2Uge1xcbiAgICAgIGxlZnQ6IC0xMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuYWxpZ24tbGVmdCB7XFxuICAgICAgbGVmdDogLTEyICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5hbGlnbi1jZW50ZXIge1xcbiAgICAgIGxlZnQ6IC0xMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuYWxpZ24tcmlnaHQge1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hbGlnbi10b3Age1xcbiAgICAgIGxlZnQ6IC0xICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmFsaWduLW1pZGRsZSB7XFxuICAgICAgbGVmdDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYWxpZ24tYm90dG9tIHtcXG4gICAgICBsZWZ0OiAtMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi50ZXh0d3JhcCB7XFxuICAgICAgbGVmdDogLTQgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYXV0b2ZpbHRlciB7XFxuICAgICAgbGVmdDogLTUgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuZm9ybXVsYSB7XFxuICAgICAgbGVmdDogLTYgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYXJyb3ctZG93biB7XFxuICAgICAgbGVmdDogLTcgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYXJyb3ctcmlnaHQge1xcbiAgICAgIGxlZnQ6IC04ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmxpbmsge1xcbiAgICAgIGxlZnQ6IC05ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmNoYXJ0IHtcXG4gICAgICBsZWZ0OiAtMTAgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuZnJlZXplIHtcXG4gICAgICBsZWZ0OiAtMTEgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuZWxsaXBzaXMge1xcbiAgICAgIGxlZnQ6IC0xMiAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hZGQge1xcbiAgICAgIGxlZnQ6IC0xMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItYWxsIHtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLWluc2lkZSB7XFxuICAgICAgbGVmdDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLWhvcml6b250YWwge1xcbiAgICAgIGxlZnQ6IC0yICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci12ZXJ0aWNhbCB7XFxuICAgICAgbGVmdDogLTMgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLW91dHNpZGUge1xcbiAgICAgIGxlZnQ6IC00ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci1sZWZ0IHtcXG4gICAgICBsZWZ0OiAtNSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItdG9wIHtcXG4gICAgICBsZWZ0OiAtNiAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItcmlnaHQge1xcbiAgICAgIGxlZnQ6IC03ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci1ib3R0b20ge1xcbiAgICAgIGxlZnQ6IC04ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci1ub25lIHtcXG4gICAgICBsZWZ0OiAtOSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5saW5lLWNvbG9yIHtcXG4gICAgICBsZWZ0OiAtMTAgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYubGluZS10eXBlIHtcXG4gICAgICBsZWZ0OiAtMTEgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuY2xvc2Uge1xcbiAgICAgIGxlZnQ6IC0xMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5jaGV2cm9uLWRvd24ge1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgdG9wOiAtMyAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5jaGV2cm9uLXVwIHtcXG4gICAgICBsZWZ0OiAtMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMyAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5jaGV2cm9uLWxlZnQge1xcbiAgICAgIGxlZnQ6IC0yICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0zICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmNoZXZyb24tcmlnaHQge1xcbiAgICAgIGxlZnQ6IC0zICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0zICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcblxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpOyAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cblxuICBpZiAoL15bJ1wiXS4qWydcIl0kLy50ZXN0KHVybCkpIHtcbiAgICB1cmwgPSB1cmwuc2xpY2UoMSwgLTEpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgIHVybCArPSBvcHRpb25zLmhhc2g7XG4gIH0gLy8gU2hvdWxkIHVybCBiZSB3cmFwcGVkP1xuICAvLyBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuXG5cbiAgaWYgKC9bXCInKCkgXFx0XFxuXXwoJTIwKS8udGVzdCh1cmwpIHx8IG9wdGlvbnMubmVlZFF1b3Rlcykge1xuICAgIHJldHVybiBcIlxcXCJcIi5jb25jYXQodXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCBcIlwiKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9sZXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4Lmxlc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvbGVzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5sZXNzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRE9NLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRE9NW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXhCeUlkZW50aWZpZXIgPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM10sXG4gICAgICBzdXBwb3J0czogaXRlbVs0XSxcbiAgICAgIGxheWVyOiBpdGVtWzVdXG4gICAgfTtcblxuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG5cbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhcGkudXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG5cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG5cbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG5cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0U3R5bGVFbGVtZW50OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcyhzdHlsZUVsZW1lbnQpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KG9iai5zdXBwb3J0cywgXCIpIHtcIik7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cblxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwiQGxheWVyXCIuY29uY2F0KG9iai5sYXllci5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KG9iai5sYXllcikgOiBcIlwiLCBcIiB7XCIpO1xuICB9XG5cbiAgY3NzICs9IG9iai5jc3M7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGVFbGVtZW50LnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZG9tQVBJOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50KSB7XG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuZnVuY3Rpb24gZHByKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XHJcbn1cclxuZnVuY3Rpb24gdGhpbkxpbmVXaWR0aCgpIHtcclxuICAgIHJldHVybiBkcHIoKSAtIDAuNTtcclxufVxyXG5mdW5jdGlvbiBucHgocHgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKHB4ICogZHByKCkpO1xyXG59XHJcbmZ1bmN0aW9uIG5weExpbmUocHgpIHtcclxuICAgIGNvbnN0IG4gPSBucHgocHgpO1xyXG4gICAgcmV0dXJuIG4gPiAwID8gbiAtIDAuNSA6IDAuNTtcclxufVxyXG5jbGFzcyBEcmF3Qm94IHtcclxuICAgIHg7XHJcbiAgICB5O1xyXG4gICAgd2lkdGg7XHJcbiAgICBoZWlnaHQ7XHJcbiAgICBwYWRkaW5nO1xyXG4gICAgYmdjb2xvcjtcclxuICAgIGJvcmRlclRvcDtcclxuICAgIGJvcmRlclJpZ2h0O1xyXG4gICAgYm9yZGVyQm90dG9tO1xyXG4gICAgYm9yZGVyTGVmdDtcclxuICAgIGNvbnN0cnVjdG9yKHgsIHksIHcsIGgsIHBhZGRpbmcgPSAwKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3O1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaDtcclxuICAgICAgICB0aGlzLnBhZGRpbmcgPSBwYWRkaW5nO1xyXG4gICAgICAgIHRoaXMuYmdjb2xvciA9ICcjZmZmZmZmJztcclxuICAgICAgICAvLyBib3JkZXI6IFt3aWR0aCwgc3R5bGUsIGNvbG9yXVxyXG4gICAgICAgIHRoaXMuYm9yZGVyVG9wID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvcmRlclJpZ2h0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvcmRlckJvdHRvbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ib3JkZXJMZWZ0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEJvcmRlcnMoeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfSkge1xyXG4gICAgICAgIGlmICh0b3ApXHJcbiAgICAgICAgICAgIHRoaXMuYm9yZGVyVG9wID0gdG9wO1xyXG4gICAgICAgIGlmIChyaWdodClcclxuICAgICAgICAgICAgdGhpcy5ib3JkZXJSaWdodCA9IHJpZ2h0O1xyXG4gICAgICAgIGlmIChib3R0b20pXHJcbiAgICAgICAgICAgIHRoaXMuYm9yZGVyQm90dG9tID0gYm90dG9tO1xyXG4gICAgICAgIGlmIChsZWZ0KVxyXG4gICAgICAgICAgICB0aGlzLmJvcmRlckxlZnQgPSBsZWZ0O1xyXG4gICAgfVxyXG4gICAgaW5uZXJXaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAtIHRoaXMucGFkZGluZyAqIDIgLSAyO1xyXG4gICAgfVxyXG4gICAgaW5uZXJIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0IC0gdGhpcy5wYWRkaW5nICogMiAtIDI7XHJcbiAgICB9XHJcbiAgICB0ZXh0eChhbGlnbikge1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIHBhZGRpbmcgfSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IHsgeCB9ID0gdGhpcztcclxuICAgICAgICBpZiAoYWxpZ24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICB4ICs9IHBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFsaWduID09PSAnY2VudGVyJykge1xyXG4gICAgICAgICAgICB4ICs9IHdpZHRoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgeCArPSB3aWR0aCAtIHBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB4O1xyXG4gICAgfVxyXG4gICAgdGV4dHkoYWxpZ24sIGgpIHtcclxuICAgICAgICBjb25zdCB7IGhlaWdodCwgcGFkZGluZyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgeyB5IH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhbGlnbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgeSArPSBwYWRkaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhbGlnbiA9PT0gJ21pZGRsZScpIHtcclxuICAgICAgICAgICAgeSArPSBoZWlnaHQgLyAyIC0gaCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFsaWduID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICB5ICs9IGhlaWdodCAtIHBhZGRpbmcgLSBoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geTtcclxuICAgIH1cclxuICAgIHRvcHh5cygpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIFt4LCB5XSxcclxuICAgICAgICAgICAgW3ggKyB3aWR0aCwgeV0sXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIHJpZ2h0eHlzKCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbeCArIHdpZHRoLCB5XSxcclxuICAgICAgICAgICAgW3ggKyB3aWR0aCwgeSArIGhlaWdodF0sXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIGJvdHRvbXh5cygpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgW3gsIHkgKyBoZWlnaHRdLFxyXG4gICAgICAgICAgICBbeCArIHdpZHRoLCB5ICsgaGVpZ2h0XSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgbGVmdHh5cygpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbeCwgeV0sXHJcbiAgICAgICAgICAgIFt4LCB5ICsgaGVpZ2h0XSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRyYXdGb250TGluZSh0eXBlLCB0eCwgdHksIGFsaWduLCB2YWxpZ24sIGJsaGVpZ2h0LCBibHdpZHRoKSB7XHJcbiAgICBjb25zdCBmbG9mZnNldCA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgaWYgKHR5cGUgPT09ICd1bmRlcmxpbmUnKSB7XHJcbiAgICAgICAgaWYgKHZhbGlnbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgZmxvZmZzZXQueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbGlnbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgZmxvZmZzZXQueSA9IC0oYmxoZWlnaHQgKyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZsb2Zmc2V0LnkgPSAtYmxoZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpa2UnKSB7XHJcbiAgICAgICAgaWYgKHZhbGlnbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgZmxvZmZzZXQueSA9IGJsaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsaWduID09PSAndG9wJykge1xyXG4gICAgICAgICAgICBmbG9mZnNldC55ID0gLShibGhlaWdodCAvIDIgKyAyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7XHJcbiAgICAgICAgZmxvZmZzZXQueCA9IGJsd2lkdGggLyAyO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICBmbG9mZnNldC54ID0gYmx3aWR0aDtcclxuICAgIH1cclxuICAgIHRoaXMubGluZShbdHggLSBmbG9mZnNldC54LCB0eSAtIGZsb2Zmc2V0LnldLCBbdHggLSBmbG9mZnNldC54ICsgYmx3aWR0aCwgdHkgLSBmbG9mZnNldC55XSk7XHJcbn1cclxuY2xhc3MgRHJhdyB7XHJcbiAgICBlbDtcclxuICAgIGN0eDtcclxuICAgIGNvbnN0cnVjdG9yKGVsLCB3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmN0eC5zY2FsZShkcHIoKSwgZHByKCkpO1xyXG4gICAgfVxyXG4gICAgcmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZHByOicsIGRwcik7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XHJcbiAgICAgICAgdGhpcy5lbC53aWR0aCA9IG5weCh3aWR0aCk7XHJcbiAgICAgICAgdGhpcy5lbC5oZWlnaHQgPSBucHgoaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5lbDtcclxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhdHRyKG9wdGlvbnMpIHtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3R4LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNhdmUoKSB7XHJcbiAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xyXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmVzdG9yZSgpIHtcclxuICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBiZWdpblBhdGgoKSB7XHJcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB0cmFuc2xhdGUoeCwgeSkge1xyXG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShucHgoeCksIG5weCh5KSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzY2FsZSh4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5jdHguc2NhbGUoeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjbGVhclJlY3QoeCwgeSwgdywgaCkge1xyXG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGZpbGxSZWN0KHgsIHksIHcsIGgpIHtcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdChucHgoeCkgLSAwLjUsIG5weCh5KSAtIDAuNSwgbnB4KHcpLCBucHgoaCkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZmlsbFRleHQodGV4dCwgeCwgeSkge1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KHRleHQsIG5weCh4KSwgbnB4KHkpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAgIHR4dDogcmVuZGVyIHRleHRcclxuICAgICAgYm94OiBEcmF3Qm94XHJcbiAgICAgIGF0dHI6IHtcclxuICAgICAgICBhbGlnbjogbGVmdCB8IGNlbnRlciB8IHJpZ2h0XHJcbiAgICAgICAgdmFsaWduOiB0b3AgfCBtaWRkbGUgfCBib3R0b21cclxuICAgICAgICBjb2xvcjogJyMzMzMzMzMnLFxyXG4gICAgICAgIHN0cmlrZTogZmFsc2UsXHJcbiAgICAgICAgZm9udDoge1xyXG4gICAgICAgICAgbmFtZTogJ0FyaWFsJyxcclxuICAgICAgICAgIHNpemU6IDE0LFxyXG4gICAgICAgICAgYm9sZDogZmFsc2UsXHJcbiAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0ZXh0V3JhcDogdGV4dCB3cmFwcGluZ1xyXG4gICAgKi9cclxuICAgIHRleHQobXR4dCwgYm94LCBhdHRyID0ge30sIHRleHRXcmFwID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgYWxpZ24sIHZhbGlnbiwgZm9udCwgY29sb3IsIHN0cmlrZSwgdW5kZXJsaW5lIH0gPSBhdHRyO1xyXG4gICAgICAgIGNvbnN0IHR4ID0gYm94LnRleHR4KGFsaWduKTtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmF0dHIoe1xyXG4gICAgICAgICAgICB0ZXh0QWxpZ246IGFsaWduLFxyXG4gICAgICAgICAgICB0ZXh0QmFzZWxpbmU6IHZhbGlnbixcclxuICAgICAgICAgICAgZm9udDogYCR7Zm9udC5pdGFsaWMgPyAnaXRhbGljJyA6ICcnfSAke2ZvbnQuYm9sZCA/ICdib2xkJyA6ICcnfSAke25weChmb250LnNpemUpfXB4ICR7Zm9udC5uYW1lfWAsXHJcbiAgICAgICAgICAgIGZpbGxTdHlsZTogY29sb3IsXHJcbiAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBjb2xvcixcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB0eHRzID0gYCR7bXR4dH1gLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBjb25zdCBiaXcgPSBib3guaW5uZXJXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IG50eHRzID0gW107XHJcbiAgICAgICAgdHh0cy5mb3JFYWNoKChpdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0eHRXaWR0aCA9IGN0eC5tZWFzdXJlVGV4dChpdCkud2lkdGg7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0V3JhcCAmJiB0eHRXaWR0aCA+IG5weChiaXcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dExpbmUgPSB7IHc6IDAsIGxlbjogMCwgc3RhcnQ6IDAgfTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXQubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dExpbmUudyA+PSBucHgoYml3KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudHh0cy5wdXNoKGl0LnN1YnN0cih0ZXh0TGluZS5zdGFydCwgdGV4dExpbmUubGVuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMaW5lID0geyB3OiAwLCBsZW46IDAsIHN0YXJ0OiBpIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRMaW5lLmxlbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRMaW5lLncgKz0gY3R4Lm1lYXN1cmVUZXh0KGl0W2ldKS53aWR0aCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dExpbmUubGVuID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG50eHRzLnB1c2goaXQuc3Vic3RyKHRleHRMaW5lLnN0YXJ0LCB0ZXh0TGluZS5sZW4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG50eHRzLnB1c2goaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgdHh0SGVpZ2h0ID0gKG50eHRzLmxlbmd0aCAtIDEpICogKGZvbnQuc2l6ZSArIDIpO1xyXG4gICAgICAgIGxldCB0eSA9IGJveC50ZXh0eSh2YWxpZ24sIHR4dEhlaWdodCk7XHJcbiAgICAgICAgbnR4dHMuZm9yRWFjaCgodHh0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR4dFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KHR4dCkud2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbFRleHQodHh0LCB0eCwgdHkpO1xyXG4gICAgICAgICAgICBpZiAoc3RyaWtlKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3Rm9udExpbmUuY2FsbCh0aGlzLCAnc3RyaWtlJywgdHgsIHR5LCBhbGlnbiwgdmFsaWduLCBmb250LnNpemUsIHR4dFdpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodW5kZXJsaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3Rm9udExpbmUuY2FsbCh0aGlzLCAndW5kZXJsaW5lJywgdHgsIHR5LCBhbGlnbiwgdmFsaWduLCBmb250LnNpemUsIHR4dFdpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0eSArPSBmb250LnNpemUgKyAyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBib3JkZXIoc3R5bGUsIGNvbG9yKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaW5MaW5lV2lkdGg7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3N0eWxlOicsIHN0eWxlKTtcclxuICAgICAgICBpZiAoc3R5bGUgPT09ICdtZWRpdW0nKSB7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBucHgoMikgLSAwLjU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0eWxlID09PSAndGhpY2snKSB7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBucHgoMyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0eWxlID09PSAnZGFzaGVkJykge1xyXG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2goW25weCgzKSwgbnB4KDIpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0eWxlID09PSAnZG90dGVkJykge1xyXG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2goW25weCgxKSwgbnB4KDEpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0eWxlID09PSAnZG91YmxlJykge1xyXG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2goW25weCgyKSwgMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGxpbmUoLi4ueHlzKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHh5cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29uc3QgW3gsIHldID0geHlzWzBdO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKG5weExpbmUoeCksIG5weExpbmUoeSkpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHh5cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3gxLCB5MV0gPSB4eXNbaV07XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5weExpbmUoeDEpLCBucHhMaW5lKHkxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vIHN0cm9rZUJvcmRlcnMoYm94KSB7XHJcbiAgICAvLyAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzO1xyXG4gICAgLy8gICBjdHguc2F2ZSgpO1xyXG4gICAgLy8gICAvLyBib3JkZXJcclxuICAgIC8vICAgY29uc3Qge1xyXG4gICAgLy8gICAgIGJvcmRlclRvcCwgYm9yZGVyUmlnaHQsIGJvcmRlckJvdHRvbSwgYm9yZGVyTGVmdCxcclxuICAgIC8vICAgfSA9IGJveDtcclxuICAgIC8vICAgaWYgKGJvcmRlclRvcCkge1xyXG4gICAgLy8gICAgIHRoaXMuYm9yZGVyKC4uLmJvcmRlclRvcCk7XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2coJ2JveC50b3B4eXM6JywgYm94LnRvcHh5cygpKTtcclxuICAgIC8vICAgICB0aGlzLmxpbmUoLi4uYm94LnRvcHh5cygpKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpZiAoYm9yZGVyUmlnaHQpIHtcclxuICAgIC8vICAgICB0aGlzLmJvcmRlciguLi5ib3JkZXJSaWdodCk7XHJcbiAgICAvLyAgICAgdGhpcy5saW5lKC4uLmJveC5yaWdodHh5cygpKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpZiAoYm9yZGVyQm90dG9tKSB7XHJcbiAgICAvLyAgICAgdGhpcy5ib3JkZXIoLi4uYm9yZGVyQm90dG9tKTtcclxuICAgIC8vICAgICB0aGlzLmxpbmUoLi4uYm94LmJvdHRvbXh5cygpKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpZiAoYm9yZGVyTGVmdCkge1xyXG4gICAgLy8gICAgIHRoaXMuYm9yZGVyKC4uLmJvcmRlckxlZnQpO1xyXG4gICAgLy8gICAgIHRoaXMubGluZSguLi5ib3gubGVmdHh5cygpKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBjdHgucmVzdG9yZSgpO1xyXG4gICAgLy8gfVxyXG4gICAgZHJvcGRvd24oYm94KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSBib3g7XHJcbiAgICAgICAgY29uc3Qgc3ggPSB4ICsgd2lkdGggLSAxNTtcclxuICAgICAgICBjb25zdCBzeSA9IHkgKyBoZWlnaHQgLSAxNTtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubW92ZVRvKG5weChzeCksIG5weChzeSkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obnB4KHN4ICsgOCksIG5weChzeSkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obnB4KHN4ICsgNCksIG5weChzeSArIDYpKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIC40NSknO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgIH1cclxuICAgIGVycm9yKGJveCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGggfSA9IGJveDtcclxuICAgICAgICBjb25zdCBzeCA9IHggKyB3aWR0aCAtIDE7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyhucHgoc3ggLSA4KSwgbnB4KHkgLSAxKSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhucHgoc3gpLCBucHgoeSAtIDEpKTtcclxuICAgICAgICBjdHgubGluZVRvKG5weChzeCksIG5weCh5ICsgOCkpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAuNjUpJztcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbiAgICBmcm96ZW4oYm94KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCB9ID0gYm94O1xyXG4gICAgICAgIGNvbnN0IHN4ID0geCArIHdpZHRoIC0gMTtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubW92ZVRvKG5weChzeCAtIDgpLCBucHgoeSAtIDEpKTtcclxuICAgICAgICBjdHgubGluZVRvKG5weChzeCksIG5weCh5IC0gMSkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obnB4KHN4KSwgbnB4KHkgKyA4KSk7XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAyNTUsIDAsIC44NSknO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgIH1cclxuICAgIHJlY3QoYm94LCBkdGV4dGNiKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBiZ2NvbG9yIH0gPSBib3g7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJnY29sb3IgfHwgJyNmZmYnO1xyXG4gICAgICAgIGN0eC5yZWN0KG5weExpbmUoeCArIDEpLCBucHhMaW5lKHkgKyAxKSwgbnB4KHdpZHRoIC0gMiksIG5weChoZWlnaHQgLSAyKSk7XHJcbiAgICAgICAgY3R4LmNsaXAoKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGR0ZXh0Y2IoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG5leHBvcnQgeyBEcmF3LCBEcmF3Qm94LCB0aGluTGluZVdpZHRoLCBucHggfTtcclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBJY29uIGZyb20gJy4vaWNvbic7XHJcbmltcG9ydCBEcm9wZG93bkNvbG9yIGZyb20gJy4vZHJvcGRvd25fY29sb3InO1xyXG5pbXBvcnQgRHJvcGRvd25MaW5lVHlwZSBmcm9tICcuL2Ryb3Bkb3duX2xpbmV0eXBlJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZnVuY3Rpb24gYnVpbGRUYWJsZSguLi50cnMpIHtcclxuICAgIHJldHVybiBoKCd0YWJsZScsICcnKS5jaGlsZChoKCd0Ym9keScsICcnKS5jaGlsZHJlbiguLi50cnMpKTtcclxufVxyXG5mdW5jdGlvbiBidWlsZFRkKGljb25OYW1lKSB7XHJcbiAgICByZXR1cm4gaCgndGQnLCAnJykuY2hpbGQoaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1ib3JkZXItcGFsZXR0ZS1jZWxsYClcclxuICAgICAgICAuY2hpbGQobmV3IEljb24oYGJvcmRlci0ke2ljb25OYW1lfWApKVxyXG4gICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gaWNvbk5hbWU7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlLCBzdHlsZSwgY29sb3IgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UoeyBtb2RlLCBzdHlsZSwgY29sb3IgfSk7XHJcbiAgICB9KSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9yZGVyUGFsZXR0ZSB7XHJcbiAgICBjb2xvcjtcclxuICAgIHN0eWxlO1xyXG4gICAgbW9kZTtcclxuICAgIGNoYW5nZTtcclxuICAgIGRkQ29sb3I7XHJcbiAgICBkZFR5cGU7XHJcbiAgICBlbDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSAnIzAwMCc7XHJcbiAgICAgICAgdGhpcy5zdHlsZSA9ICd0aGluJztcclxuICAgICAgICB0aGlzLm1vZGUgPSAnYWxsJztcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLmRkQ29sb3IgPSBuZXcgRHJvcGRvd25Db2xvcignbGluZS1jb2xvcicsIHRoaXMuY29sb3IpO1xyXG4gICAgICAgIHRoaXMuZGRDb2xvci5jaGFuZ2UgPSAoY29sb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZFR5cGUgPSBuZXcgRHJvcGRvd25MaW5lVHlwZSh0aGlzLnN0eWxlKTtcclxuICAgICAgICB0aGlzLmRkVHlwZS5jaGFuZ2UgPSAoW3NdKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUgPSBzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYm9yZGVyLXBhbGV0dGVgKTtcclxuICAgICAgICBjb25zdCB0YWJsZSA9IGJ1aWxkVGFibGUoaCgndHInLCAnJykuY2hpbGRyZW4oaCgndGQnLCBgJHtjc3NQcmVmaXh9LWJvcmRlci1wYWxldHRlLWxlZnRgKS5jaGlsZChidWlsZFRhYmxlKGgoJ3RyJywgJycpLmNoaWxkcmVuKC4uLlsnYWxsJywgJ2luc2lkZScsICdob3Jpem9udGFsJywgJ3ZlcnRpY2FsJywgJ291dHNpZGUnXS5tYXAoKGl0KSA9PiBidWlsZFRkLmNhbGwodGhpcywgaXQpKSksIGgoJ3RyJywgJycpLmNoaWxkcmVuKC4uLlsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ25vbmUnXS5tYXAoKGl0KSA9PiBidWlsZFRkLmNhbGwodGhpcywgaXQpKSkpKSwgaCgndGQnLCBgJHtjc3NQcmVmaXh9LWJvcmRlci1wYWxldHRlLXJpZ2h0YCkuY2hpbGRyZW4oaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b29sYmFyLWJ0bmApLmNoaWxkKHRoaXMuZGRDb2xvci5lbCksIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhci1idG5gKS5jaGlsZCh0aGlzLmRkVHlwZS5lbCkpKSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0YWJsZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGJpbmRDbGlja291dHNpZGUsIHVuYmluZENsaWNrb3V0c2lkZSB9IGZyb20gJy4vZXZlbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgRm9ybUlucHV0IGZyb20gJy4vZm9ybV9pbnB1dCc7XHJcbmltcG9ydCBEcm9wZG93biBmcm9tICcuL2Ryb3Bkb3duJztcclxuaW1wb3J0IHsgdGYgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuY2xhc3MgRHJvcGRvd25Nb3JlIGV4dGVuZHMgRHJvcGRvd24ge1xyXG4gICAgY29udGVudENsaWNrO1xyXG4gICAgY29uc3RydWN0b3IoY2xpY2spIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oJ2VsbGlwc2lzJyk7XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ3RvcC1sZWZ0Jyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50Q2xpY2sgPSBjbGljaztcclxuICAgIH1cclxuICAgIHJlc2V0KGl0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgZWxlcyA9IGl0ZW1zLm1hcCgoaXQsIGkpID0+IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApXHJcbiAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgJzE1MHB4JylcclxuICAgICAgICAgICAgLmNzcygnZm9udC13ZWlnaHQnLCAnbm9ybWFsJylcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50Q2xpY2soaSk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jaGlsZChpdCkpO1xyXG4gICAgICAgIHRoaXMuc2V0Q29udGVudENoaWxkcmVuKC4uLmVsZXMpO1xyXG4gICAgfVxyXG4gICAgc2V0VGl0bGUoKSB7IH1cclxufVxyXG5jb25zdCBtZW51SXRlbXMgPSBbeyBrZXk6ICdkZWxldGUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LmRlbGV0ZVNoZWV0JykgfV07XHJcbmZ1bmN0aW9uIGJ1aWxkTWVudUl0ZW0oaXRlbSkge1xyXG4gICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApXHJcbiAgICAgICAgLmNoaWxkKGl0ZW0udGl0bGUoKSlcclxuICAgICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrKGl0ZW0ua2V5KTtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGJ1aWxkTWVudSgpIHtcclxuICAgIHJldHVybiBtZW51SXRlbXMubWFwKChpdCkgPT4gYnVpbGRNZW51SXRlbS5jYWxsKHRoaXMsIGl0KSk7XHJcbn1cclxuY2xhc3MgQ29udGV4dE1lbnUge1xyXG4gICAgZWw7XHJcbiAgICBpdGVtQ2xpY2s7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1jb250ZXh0bWVudWApXHJcbiAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgJzE2MHB4JylcclxuICAgICAgICAgICAgLmNoaWxkcmVuKC4uLmJ1aWxkTWVudS5jYWxsKHRoaXMpKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrID0gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGVsLmhpZGUoKTtcclxuICAgICAgICB1bmJpbmRDbGlja291dHNpZGUoZWwpO1xyXG4gICAgfVxyXG4gICAgc2V0T2Zmc2V0KG9mZnNldCkge1xyXG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgZWwub2Zmc2V0KG9mZnNldCk7XHJcbiAgICAgICAgZWwuc2hvdygpO1xyXG4gICAgICAgIGJpbmRDbGlja291dHNpZGUoZWwpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvdHRvbWJhciB7XHJcbiAgICBzd2FwRnVuYztcclxuICAgIHVwZGF0ZUZ1bmM7XHJcbiAgICBkYXRhTmFtZXM7XHJcbiAgICBhY3RpdmVFbDtcclxuICAgIGRlbGV0ZUVsO1xyXG4gICAgaXRlbXM7XHJcbiAgICBtb3JlRWw7XHJcbiAgICBjb250ZXh0TWVudTtcclxuICAgIGVsO1xyXG4gICAgbWVudUVsO1xyXG4gICAgY29uc3RydWN0b3IoYWRkRnVuYyA9ICgpID0+IHsgfSwgc3dhcEZ1bmMgPSAoaW5kZXgpID0+IHsgfSwgZGVsZXRlRnVuYyA9ICgpID0+IHsgfSwgdXBkYXRlRnVuYyA9IChpbmRleCwgdmFsdWUpID0+IHsgfSkge1xyXG4gICAgICAgIHRoaXMuc3dhcEZ1bmMgPSBzd2FwRnVuYztcclxuICAgICAgICB0aGlzLnVwZGF0ZUZ1bmMgPSB1cGRhdGVGdW5jO1xyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzID0gW107XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVFbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubW9yZUVsID0gbmV3IERyb3Bkb3duTW9yZSgoaSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrU3dhcDIodGhpcy5pdGVtc1tpXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSgpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUuaXRlbUNsaWNrID0gZGVsZXRlRnVuYztcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1ib3R0b21iYXJgKS5jaGlsZHJlbih0aGlzLmNvbnRleHRNZW51LmVsLCAodGhpcy5tZW51RWwgPSBoKCd1bCcsIGAke2Nzc1ByZWZpeH0tbWVudWApLmNoaWxkKGgoJ2xpJywgJycpLmNoaWxkcmVuKG5ldyBJY29uKCdhZGQnKS5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFkZEZ1bmMoKTtcclxuICAgICAgICB9KSwgaCgnc3BhbicsICcnKS5jaGlsZCh0aGlzLm1vcmVFbCkpKSkpO1xyXG4gICAgfVxyXG4gICAgYWRkSXRlbShuYW1lLCBhY3RpdmUsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmRhdGFOYW1lcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBoKCdsaScsIGFjdGl2ZSA/ICdhY3RpdmUnIDogJycpLmNoaWxkKG5hbWUpO1xyXG4gICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N3YXAyKGl0ZW0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1vZGUgPT09ICdyZWFkJylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgeyBvZmZzZXRMZWZ0LCBvZmZzZXRIZWlnaHQgfSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc2V0T2Zmc2V0KHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldExlZnQsXHJcbiAgICAgICAgICAgICAgICBib3R0b206IG9mZnNldEhlaWdodCArIDEsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUVsID0gaXRlbTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2RibGNsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSBpdGVtLmh0bWwoKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgRm9ybUlucHV0KCdhdXRvJywgJycpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWwodik7XHJcbiAgICAgICAgICAgIGlucHV0LmlucHV0Lm9uKCdibHVyJywgKHsgdGFyZ2V0IH0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5pbmRleCA9IHRoaXMuZGF0YU5hbWVzLmZpbmRJbmRleCgoaXQpID0+IGl0ID09PSB2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuYW1lSXRlbShuaW5kZXgsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgdGhpcy5kYXRhTmFtZXMuc3BsaWNlKG5pbmRleCwgMSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMubW9yZUVsLnJlc2V0KHRoaXMuZGF0YU5hbWVzKTtcclxuICAgICAgICAgICAgICBpdGVtLmh0bWwoJycpLmNoaWxkKHZhbHVlKTtcclxuICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZ1bmMobmluZGV4LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGl0ZW0uaHRtbCgnJykuY2hpbGQoaW5wdXQuZWwpO1xyXG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N3YXAoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB0aGlzLm1lbnVFbC5jaGlsZChpdGVtKTtcclxuICAgICAgICB0aGlzLm1vcmVFbC5yZXNldCh0aGlzLmRhdGFOYW1lcyk7XHJcbiAgICB9XHJcbiAgICByZW5hbWVJdGVtKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzLnNwbGljZShpbmRleCwgMSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMubW9yZUVsLnJlc2V0KHRoaXMuZGF0YU5hbWVzKTtcclxuICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5odG1sKCcnKS5jaGlsZCh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVGdW5jKGluZGV4LCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUVsLnJlbW92ZUNoaWxkKGl0LmVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5kYXRhTmFtZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm1vcmVFbC5yZXNldCh0aGlzLmRhdGFOYW1lcyk7XHJcbiAgICB9XHJcbiAgICBkZWxldGVJdGVtKCkge1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlRWwsIGRlbGV0ZUVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmZpbmRJbmRleCgoaXQpID0+IGl0ID09PSBkZWxldGVFbCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhTmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51RWwucmVtb3ZlQ2hpbGQoZGVsZXRlRWwuZWwpO1xyXG4gICAgICAgICAgICB0aGlzLm1vcmVFbC5yZXNldCh0aGlzLmRhdGFOYW1lcyk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVFbCA9PT0gZGVsZXRlRWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtmXSA9IHRoaXMuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsID0gZjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWwudG9nZ2xlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2luZGV4LCAwXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gW2luZGV4LCAtMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbLTFdO1xyXG4gICAgfVxyXG4gICAgY2xpY2tTd2FwMihpdGVtKSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmZpbmRJbmRleCgoaXQpID0+IGl0ID09PSBpdGVtKTtcclxuICAgICAgICB0aGlzLmNsaWNrU3dhcChpdGVtKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUVsLnRvZ2dsZSgpO1xyXG4gICAgICAgIHRoaXMuc3dhcEZ1bmMoaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgY2xpY2tTd2FwKGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVFbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVsLnRvZ2dsZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFjdGl2ZUVsID0gaXRlbTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBFbGVtZW50IHtcclxuICAgIC8vIHR5cGU6IHByaW1hcnlcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB0eXBlID0gJycpIHtcclxuICAgICAgICBzdXBlcignZGl2JywgYCR7Y3NzUHJlZml4fS1idXR0b24gJHt0eXBlfWApO1xyXG4gICAgICAgIHRoaXMuY2hpbGQodChgYnV0dG9uLiR7dGl0bGV9YCkpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmZ1bmN0aW9uIGFkZE1vbnRoKGRhdGUsIHN0ZXApIHtcclxuICAgIGRhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgc3RlcCk7XHJcbn1cclxuZnVuY3Rpb24gd2Vla2RheShkYXRlLCBpbmRleCkge1xyXG4gICAgY29uc3QgZCA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgZC5zZXREYXRlKGluZGV4IC0gZGF0ZS5nZXREYXkoKSArIDEpO1xyXG4gICAgcmV0dXJuIGQ7XHJcbn1cclxuZnVuY3Rpb24gbW9udGhEYXlzKHllYXIsIG1vbnRoLCBjZGF0ZSkge1xyXG4gICAgLy8gdGhlIGZpcnN0IGRheSBvZiBtb250aFxyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEsIDIzLCA1OSwgNTkpO1xyXG4gICAgY29uc3QgZGF0ZXNzID0gW1tdLCBbXSwgW10sIFtdLCBbXSwgW11dO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpICs9IDEpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDc7IGogKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGkgKiA3ICsgajtcclxuICAgICAgICAgICAgY29uc3QgZCA9IHdlZWtkYXkoc3RhcnREYXRlLCBpbmRleCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gZC5nZXRNb250aCgpICE9PSBtb250aDtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Q6JywgZCwgJywgY2RhdGU6JywgY2RhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBkLmdldE1vbnRoKCkgPT09IGNkYXRlLmdldE1vbnRoKCkgJiYgZC5nZXREYXRlKCkgPT09IGNkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgZGF0ZXNzW2ldW2pdID0geyBkLCBkaXNhYmxlZCwgYWN0aXZlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGVzcztcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWxlbmRhciB7XHJcbiAgICB2YWx1ZTtcclxuICAgIGN2YWx1ZTtcclxuICAgIGhlYWRlckxlZnRFbDtcclxuICAgIGJvZHlFbDtcclxuICAgIGVsO1xyXG4gICAgc2VsZWN0Q2hhbmdlO1xyXG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJMZWZ0RWwgPSBoKCdkaXYnLCAnY2FsZW5kYXItaGVhZGVyLWxlZnQnKTtcclxuICAgICAgICB0aGlzLmJvZHlFbCA9IGgoJ3Rib2R5JywgJycpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRBbGwoKTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgJ3gtc3ByZWFkc2hlZXQtY2FsZW5kYXInKS5jaGlsZHJlbihoKCdkaXYnLCAnY2FsZW5kYXItaGVhZGVyJykuY2hpbGRyZW4odGhpcy5oZWFkZXJMZWZ0RWwsIGgoJ2RpdicsICdjYWxlbmRhci1oZWFkZXItcmlnaHQnKS5jaGlsZHJlbihoKCdhJywgJ2NhbGVuZGFyLXByZXYnKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLnByZXYoKSlcclxuICAgICAgICAgICAgLmNoaWxkKG5ldyBJY29uKCdjaGV2cm9uLWxlZnQnKSksIGgoJ2EnLCAnY2FsZW5kYXItbmV4dCcpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2suc3RvcCcsICgpID0+IHRoaXMubmV4dCgpKVxyXG4gICAgICAgICAgICAuY2hpbGQobmV3IEljb24oJ2NoZXZyb24tcmlnaHQnKSkpKSwgaCgndGFibGUnLCAnY2FsZW5kYXItYm9keScpLmNoaWxkcmVuKGgoJ3RoZWFkJywgJycpLmNoaWxkKGgoJ3RyJywgJycpLmNoaWxkcmVuKC4uLnQoJ2NhbGVuZGFyLndlZWtzJykubWFwKCh3ZWVrKSA9PiBoKCd0aCcsICdjZWxsJykuY2hpbGQod2VlaykpKSksIHRoaXMuYm9keUVsKSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RDaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICB9XHJcbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmN2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmJ1aWxkQWxsKCk7XHJcbiAgICB9XHJcbiAgICBwcmV2KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICAgICAgYWRkTW9udGgodmFsdWUsIC0xKTtcclxuICAgICAgICB0aGlzLmJ1aWxkQWxsKCk7XHJcbiAgICB9XHJcbiAgICBuZXh0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICAgICAgYWRkTW9udGgodmFsdWUsIDEpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRBbGwoKTtcclxuICAgIH1cclxuICAgIGJ1aWxkQWxsKCkge1xyXG4gICAgICAgIHRoaXMuYnVpbGRIZWFkZXJMZWZ0KCk7XHJcbiAgICAgICAgdGhpcy5idWlsZEJvZHkoKTtcclxuICAgIH1cclxuICAgIGJ1aWxkSGVhZGVyTGVmdCgpIHtcclxuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyTGVmdEVsLmh0bWwoYCR7dCgnY2FsZW5kYXIubW9udGhzJylbdmFsdWUuZ2V0TW9udGgoKV19ICR7dmFsdWUuZ2V0RnVsbFllYXIoKX1gKTtcclxuICAgIH1cclxuICAgIGJ1aWxkQm9keSgpIHtcclxuICAgICAgICBjb25zdCB7IHZhbHVlLCBjdmFsdWUsIGJvZHlFbCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBtRGF5cyA9IG1vbnRoRGF5cyh2YWx1ZS5nZXRGdWxsWWVhcigpLCB2YWx1ZS5nZXRNb250aCgpLCBjdmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHRycyA9IG1EYXlzLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGRzID0gaXQubWFwKChpdDEpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjbHMgPSAnY2VsbCc7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXQxLmRpc2FibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGNscyArPSAnIGRpc2FibGVkJztcclxuICAgICAgICAgICAgICAgIGlmIChpdDEuYWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgICAgIGNscyArPSAnIGFjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaCgndGQnLCAnJykuY2hpbGQoaCgnZGl2JywgY2xzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2suc3RvcCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENoYW5nZShpdDEuZCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZChpdDEuZC5nZXREYXRlKCkudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGgoJ3RyJywgJycpLmNoaWxkcmVuKC4uLnRkcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYm9keUVsLmh0bWwoJycpLmNoaWxkcmVuKC4uLnRycyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmNvbnN0IHRoZW1lQ29sb3JQbGFjZUhvbGRlcnMgPSBbXHJcbiAgICAnI2ZmZmZmZicsXHJcbiAgICAnIzAwMDEwMCcsXHJcbiAgICAnI2U3ZTVlNicsXHJcbiAgICAnIzQ0NTU2OScsXHJcbiAgICAnIzViOWNkNicsXHJcbiAgICAnI2VkN2QzMScsXHJcbiAgICAnI2E1YTVhNScsXHJcbiAgICAnI2ZmYzAwMScsXHJcbiAgICAnIzQzNzFjNicsXHJcbiAgICAnIzcxYWU0NycsXHJcbl07XHJcbmNvbnN0IHRoZW1lQ29sb3JzID0gW1xyXG4gICAgW1xyXG4gICAgICAgICcjZjJmMmYyJyxcclxuICAgICAgICAnIzdmN2Y3ZicsXHJcbiAgICAgICAgJyNkMGNlY2YnLFxyXG4gICAgICAgICcjZDVkY2U0JyxcclxuICAgICAgICAnI2RlZWFmNicsXHJcbiAgICAgICAgJyNmY2U1ZDUnLFxyXG4gICAgICAgICcjZWRlZGVkJyxcclxuICAgICAgICAnI2ZmZjJjZCcsXHJcbiAgICAgICAgJyNkOWUyZjMnLFxyXG4gICAgICAgICcjZTNlZmQ5JyxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgJyNkOGQ4ZDgnLFxyXG4gICAgICAgICcjNTk1OTU5JyxcclxuICAgICAgICAnI2FmYWJhYycsXHJcbiAgICAgICAgJyNhZGI4Y2EnLFxyXG4gICAgICAgICcjYmRkN2VlJyxcclxuICAgICAgICAnI2Y3Y2NhYycsXHJcbiAgICAgICAgJyNkYmRiZGInLFxyXG4gICAgICAgICcjZmZlNTlhJyxcclxuICAgICAgICAnI2IzYzZlNycsXHJcbiAgICAgICAgJyNjNWUwYjMnLFxyXG4gICAgXSxcclxuICAgIFtcclxuICAgICAgICAnI2JmYmZiZicsXHJcbiAgICAgICAgJyMzZjNmM2YnLFxyXG4gICAgICAgICcjNzU2ZjZmJyxcclxuICAgICAgICAnIzg1OTZiMCcsXHJcbiAgICAgICAgJyM5Y2MyZTYnLFxyXG4gICAgICAgICcjZjRiMTg0JyxcclxuICAgICAgICAnI2M5YzljOScsXHJcbiAgICAgICAgJyNmZWQ5NjQnLFxyXG4gICAgICAgICcjOGVhYWRhJyxcclxuICAgICAgICAnI2E3ZDA4YycsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICcjYTVhNWE1JyxcclxuICAgICAgICAnIzI2MjYyNicsXHJcbiAgICAgICAgJyMzYTM4MzknLFxyXG4gICAgICAgICcjMzMzZjRmJyxcclxuICAgICAgICAnIzJlNzViNScsXHJcbiAgICAgICAgJyNjNDVhMTAnLFxyXG4gICAgICAgICcjN2I3YjdiJyxcclxuICAgICAgICAnI2JmOGUwMScsXHJcbiAgICAgICAgJyMyZjU1OTYnLFxyXG4gICAgICAgICcjNTM4MTM2JyxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgJyM3ZjdmN2YnLFxyXG4gICAgICAgICcjMGMwYzBjJyxcclxuICAgICAgICAnIzE3MTUxNicsXHJcbiAgICAgICAgJyMyMjJhMzUnLFxyXG4gICAgICAgICcjMWY0ZTdhJyxcclxuICAgICAgICAnIzg0M2MwYScsXHJcbiAgICAgICAgJyM1MjUyNTInLFxyXG4gICAgICAgICcjN2U2MDAwJyxcclxuICAgICAgICAnIzIwMzg2NCcsXHJcbiAgICAgICAgJyMzNjU2MjQnLFxyXG4gICAgXSxcclxuXTtcclxuY29uc3Qgc3RhbmRhcmRDb2xvcnMgPSBbXHJcbiAgICAnI2MwMDAwMCcsXHJcbiAgICAnI2ZlMDAwMCcsXHJcbiAgICAnI2ZkYzEwMScsXHJcbiAgICAnI2ZmZmYwMScsXHJcbiAgICAnIzkzZDA1MScsXHJcbiAgICAnIzAwYjA0ZScsXHJcbiAgICAnIzAxYjBmMScsXHJcbiAgICAnIzAxNzBjMScsXHJcbiAgICAnIzAxMjA2MCcsXHJcbiAgICAnIzcwMzBhMCcsXHJcbl07XHJcbmZ1bmN0aW9uIGJ1aWxkVGQoYmdjb2xvcikge1xyXG4gICAgcmV0dXJuIGgoJ3RkJywgJycpLmNoaWxkKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tY29sb3ItcGFsZXR0ZS1jZWxsYClcclxuICAgICAgICAub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLmNoYW5nZShiZ2NvbG9yKSlcclxuICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYmdjb2xvcikpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yUGFsZXR0ZSB7XHJcbiAgICBlbDtcclxuICAgIGNoYW5nZTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWNvbG9yLXBhbGV0dGVgKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICBjb25zdCB0YWJsZSA9IGgoJ3RhYmxlJywgJycpLmNoaWxkcmVuKGgoJ3Rib2R5JywgJycpLmNoaWxkcmVuKGgoJ3RyJywgYCR7Y3NzUHJlZml4fS10aGVtZS1jb2xvci1wbGFjZWhvbGRlcnNgKS5jaGlsZHJlbiguLi50aGVtZUNvbG9yUGxhY2VIb2xkZXJzLm1hcCgoY29sb3IpID0+IGJ1aWxkVGQuY2FsbCh0aGlzLCBjb2xvcikpKSwgLi4udGhlbWVDb2xvcnMubWFwKChpdCkgPT4gaCgndHInLCBgJHtjc3NQcmVmaXh9LXRoZW1lLWNvbG9yc2ApLmNoaWxkcmVuKC4uLml0Lm1hcCgoY29sb3IpID0+IGJ1aWxkVGQuY2FsbCh0aGlzLCBjb2xvcikpKSksIGgoJ3RyJywgYCR7Y3NzUHJlZml4fS1zdGFuZGFyZC1jb2xvcnNgKS5jaGlsZHJlbiguLi5zdGFuZGFyZENvbG9ycy5tYXAoKGNvbG9yKSA9PiBidWlsZFRkLmNhbGwodGhpcywgY29sb3IpKSkpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRhYmxlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmluZENsaWNrb3V0c2lkZSwgdW5iaW5kQ2xpY2tvdXRzaWRlIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IHRmIH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmNvbnN0IG1lbnVJdGVtcyA9IFtcclxuICAgIHsga2V5OiAnY29weScsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuY29weScpLCBsYWJlbDogJ0N0cmwrQycgfSxcclxuICAgIHsga2V5OiAnY3V0JywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5jdXQnKSwgbGFiZWw6ICdDdHJsK1gnIH0sXHJcbiAgICB7IGtleTogJ3Bhc3RlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5wYXN0ZScpLCBsYWJlbDogJ0N0cmwrVicgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdwYXN0ZS12YWx1ZScsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5wYXN0ZVZhbHVlJyksXHJcbiAgICAgICAgbGFiZWw6ICdDdHJsK1NoaWZ0K1YnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdwYXN0ZS1mb3JtYXQnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignY29udGV4dG1lbnUucGFzdGVGb3JtYXQnKSxcclxuICAgICAgICBsYWJlbDogJ0N0cmwrQWx0K1YnLFxyXG4gICAgfSxcclxuICAgIHsga2V5OiAnZGl2aWRlcicgfSxcclxuICAgIHsga2V5OiAnaW5zZXJ0LXJvdycsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuaW5zZXJ0Um93JykgfSxcclxuICAgIHsga2V5OiAnaW5zZXJ0LWNvbHVtbicsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuaW5zZXJ0Q29sdW1uJykgfSxcclxuICAgIHsga2V5OiAnZGl2aWRlcicgfSxcclxuICAgIHsga2V5OiAnZGVsZXRlLXJvdycsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuZGVsZXRlUm93JykgfSxcclxuICAgIHsga2V5OiAnZGVsZXRlLWNvbHVtbicsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuZGVsZXRlQ29sdW1uJykgfSxcclxuICAgIHsga2V5OiAnZGVsZXRlLWNlbGwtdGV4dCcsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuZGVsZXRlQ2VsbFRleHQnKSB9LFxyXG4gICAgeyBrZXk6ICdoaWRlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5oaWRlJykgfSxcclxuICAgIHsga2V5OiAnZGl2aWRlcicgfSxcclxuICAgIHsga2V5OiAndmFsaWRhdGlvbicsIHRpdGxlOiB0ZignY29udGV4dG1lbnUudmFsaWRhdGlvbicpIH0sXHJcbiAgICB7IGtleTogJ2RpdmlkZXInIH0sXHJcbiAgICB7IGtleTogJ2NlbGwtcHJpbnRhYmxlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5jZWxscHJpbnRhYmxlJykgfSxcclxuICAgIHsga2V5OiAnY2VsbC1ub24tcHJpbnRhYmxlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5jZWxsbm9ucHJpbnRhYmxlJykgfSxcclxuICAgIHsga2V5OiAnZGl2aWRlcicgfSxcclxuICAgIHsga2V5OiAnY2VsbC1lZGl0YWJsZScsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuY2VsbGVkaXRhYmxlJykgfSxcclxuICAgIHsga2V5OiAnY2VsbC1ub24tZWRpdGFibGUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LmNlbGxub25lZGl0YWJsZScpIH0sXHJcbl07XHJcbmZ1bmN0aW9uIGJ1aWxkTWVudUl0ZW0oaXRlbSkge1xyXG4gICAgaWYgKGl0ZW0ua2V5ID09PSAnZGl2aWRlcicpIHtcclxuICAgICAgICByZXR1cm4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtIGRpdmlkZXJgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW1gKVxyXG4gICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pdGVtQ2xpY2soaXRlbS5rZXkpO1xyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfSlcclxuICAgICAgICAuY2hpbGRyZW4oaXRlbS50aXRsZSgpLCBoKCdkaXYnLCAnbGFiZWwnKS5jaGlsZChpdGVtLmxhYmVsIHx8ICcnKSk7XHJcbn1cclxuZnVuY3Rpb24gYnVpbGRNZW51KCkge1xyXG4gICAgcmV0dXJuIG1lbnVJdGVtcy5tYXAoKGl0KSA9PiBidWlsZE1lbnVJdGVtLmNhbGwodGhpcywgaXQpKTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0TWVudSB7XHJcbiAgICBtZW51SXRlbXM7XHJcbiAgICBlbDtcclxuICAgIHZpZXdGbjtcclxuICAgIGl0ZW1DbGljaztcclxuICAgIGlzSGlkZTtcclxuICAgIGNvbnN0cnVjdG9yKHZpZXdGbiwgaXNIaWRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IGJ1aWxkTWVudS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWNvbnRleHRtZW51YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKC4uLnRoaXMubWVudUl0ZW1zKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMudmlld0ZuID0gdmlld0ZuO1xyXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuaXNIaWRlID0gaXNIaWRlO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZSgncmFuZ2UnKTtcclxuICAgIH1cclxuICAgIC8vIHJvdy1jb2w6IHRoZSB3aG9sZSByb3dzIG9yIHRoZSB3aG9sZSBjb2xzXHJcbiAgICAvLyByYW5nZTogc2VsZWN0IHJhbmdlXHJcbiAgICBzZXRNb2RlKG1vZGUpIHtcclxuICAgICAgICBjb25zdCBoaWRlRWwgPSB0aGlzLm1lbnVJdGVtc1sxMl07XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICdyb3ctY29sJykge1xyXG4gICAgICAgICAgICBoaWRlRWwuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGlkZUVsLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgZWwuaGlkZSgpO1xyXG4gICAgICAgIHVuYmluZENsaWNrb3V0c2lkZShlbCk7XHJcbiAgICB9XHJcbiAgICBzZXRQb3NpdGlvbih4LCB5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSBlbC5zaG93KCkub2Zmc2V0KCk7XHJcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMudmlld0ZuKCk7XHJcbiAgICAgICAgY29uc3QgdmhmID0gdmlldy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIGxldCBsZWZ0ID0geDtcclxuICAgICAgICBpZiAodmlldy53aWR0aCAtIHggPD0gd2lkdGgpIHtcclxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwuY3NzKCdsZWZ0JywgYCR7bGVmdH1weGApO1xyXG4gICAgICAgIGlmICh5ID4gdmhmKSB7XHJcbiAgICAgICAgICAgIGVsLmNzcygnYm90dG9tJywgYCR7dmlldy5oZWlnaHQgLSB5fXB4YClcclxuICAgICAgICAgICAgICAgIC5jc3MoJ21heC1oZWlnaHQnLCBgJHt5fXB4YClcclxuICAgICAgICAgICAgICAgIC5jc3MoJ3RvcCcsICdhdXRvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5jc3MoJ3RvcCcsIGAke3l9cHhgKVxyXG4gICAgICAgICAgICAgICAgLmNzcygnbWF4LWhlaWdodCcsIGAke3ZpZXcuaGVpZ2h0IC0geX1weGApXHJcbiAgICAgICAgICAgICAgICAuY3NzKCdib3R0b20nLCAnYXV0bycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FsZW5kYXIgZnJvbSAnLi9jYWxlbmRhcic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlcGlja2VyIHtcclxuICAgIGNhbGVuZGFyO1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhbGVuZGFyID0gbmV3IENhbGVuZGFyKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRhdGVwaWNrZXJgKVxyXG4gICAgICAgICAgICAuY2hpbGQodGhpcy5jYWxlbmRhci5lbClcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgIH1cclxuICAgIHNldFZhbHVlKGRhdGUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnOjo6Ojo6OicsIGRhdGUsIHR5cGVvZiBkYXRlLCBkYXRlIGluc3RhbmNlb2Ygc3RyaW5nKTtcclxuICAgICAgICBjb25zdCB7IGNhbGVuZGFyIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coL15cXGR7NH0tXFxkezEsMn0tXFxkezEsMn0kLy50ZXN0KGRhdGUpKTtcclxuICAgICAgICAgICAgaWYgKC9eXFxkezR9LVxcZHsxLDJ9LVxcZHsxLDJ9JC8udGVzdChkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgY2FsZW5kYXIuc2V0VmFsdWUobmV3IERhdGUoZGF0ZS5yZXBsYWNlKG5ldyBSZWdFeHAoJy0nLCAnZycpLCAnLycpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIuc2V0VmFsdWUoZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlKGNiKSB7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhci5zZWxlY3RDaGFuZ2UgPSAoZCkgPT4ge1xyXG4gICAgICAgICAgICBjYihkKTtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVsZW1lbnQsIGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kQ2xpY2tvdXRzaWRlLCB1bmJpbmRDbGlja291dHNpZGUgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd24gZXh0ZW5kcyBFbGVtZW50IHtcclxuICAgIHRpdGxlO1xyXG4gICAgaGVhZGVyQ2xpY2s7XHJcbiAgICBjb250ZW50RWw7XHJcbiAgICBoZWFkZXJFbDtcclxuICAgIGNoYW5nZTtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB3aWR0aCwgc2hvd0Fycm93LCBwbGFjZW1lbnQsIC4uLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgc3VwZXIoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZHJvcGRvd24gJHtwbGFjZW1lbnR9YCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIC8vIHRoaXMuY2hhbmdlID0gKCkgPT4ge307XHJcbiAgICAgICAgdGhpcy5oZWFkZXJDbGljayA9ICgpID0+IHsgfTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1kcm9wZG93bi10aXRsZWApLmNoaWxkKHRpdGxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2hvd0Fycm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUuYWRkQ2xhc3MoJ2Fycm93LWxlZnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnRgKVxyXG4gICAgICAgICAgICAuY3NzKCd3aWR0aCcsIHdpZHRoKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0Q29udGVudENoaWxkcmVuKC4uLmNoaWxkcmVuKTtcclxuICAgICAgICB0aGlzLmhlYWRlckVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1kcm9wZG93bi1oZWFkZXJgKTtcclxuICAgICAgICB0aGlzLmhlYWRlckVsXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbC5jc3MoJ2Rpc3BsYXknKSAhPT0gJ2Jsb2NrJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbih0aGlzLnRpdGxlLCBzaG93QXJyb3dcclxuICAgICAgICAgICAgPyBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb24gYXJyb3ctcmlnaHRgKS5jaGlsZChoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb24taW1nIGFycm93LWRvd25gKSlcclxuICAgICAgICAgICAgOiAnJyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbih0aGlzLmhlYWRlckVsLCB0aGlzLmNvbnRlbnRFbCk7XHJcbiAgICB9XHJcbiAgICBzZXRDb250ZW50Q2hpbGRyZW4oLi4uY2hpbGRyZW4pIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5odG1sKCcnKTtcclxuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jaGlsZHJlbiguLi5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0VGl0bGUodGl0bGUpIHtcclxuICAgICAgICB0aGlzLnRpdGxlLmh0bWwodGl0bGUpO1xyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuc2hvdygpO1xyXG4gICAgICAgIC8vIHRoaXMucGFyZW50KCkuYWN0aXZlKCk7XHJcbiAgICAgICAgYmluZENsaWNrb3V0c2lkZSh0aGlzLnBhcmVudCgpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLnBhcmVudCgpLmFjdGl2ZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuaGlkZSgpO1xyXG4gICAgICAgIHVuYmluZENsaWNrb3V0c2lkZSh0aGlzLnBhcmVudCgpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5mdW5jdGlvbiBidWlsZEl0ZW1XaXRoSWNvbihpY29uTmFtZSkge1xyXG4gICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApLmNoaWxkKG5ldyBJY29uKGljb25OYW1lKSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25BbGlnbiBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKGFsaWducywgYWxpZ24pIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oYGFsaWduLSR7YWxpZ259YCk7XHJcbiAgICAgICAgY29uc3QgbmFsaWducyA9IGFsaWducy5tYXAoKGl0KSA9PiBidWlsZEl0ZW1XaXRoSWNvbihgYWxpZ24tJHtpdH1gKS5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUoaXQpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHN1cGVyKGljb24sICdhdXRvJywgdHJ1ZSwgJ2JvdHRvbS1sZWZ0JywgLi4ubmFsaWducyk7XHJcbiAgICB9XHJcbiAgICBzZXRUaXRsZShhbGlnbikge1xyXG4gICAgICAgIHRoaXMudGl0bGUuc2V0TmFtZShgYWxpZ24tJHthbGlnbn1gKTtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCBJY29uIGZyb20gJy4vaWNvbic7XHJcbmltcG9ydCBCb3JkZXJQYWxldHRlIGZyb20gJy4vYm9yZGVyX3BhbGV0dGUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wZG93bkJvcmRlciBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnN0IGljb24gPSBuZXcgSWNvbignYm9yZGVyLWFsbCcpO1xyXG4gICAgICAgIGNvbnN0IGJvcmRlclBhbGV0dGUgPSBuZXcgQm9yZGVyUGFsZXR0ZSgpO1xyXG4gICAgICAgIGJvcmRlclBhbGV0dGUuY2hhbmdlID0gKHYpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2Uodik7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ2JvdHRvbS1sZWZ0JywgYm9yZGVyUGFsZXR0ZS5lbCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgQ29sb3JQYWxldHRlIGZyb20gJy4vY29sb3JfcGFsZXR0ZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERyb3Bkb3duQ29sb3IgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcihpY29uTmFtZSwgY29sb3IpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oaWNvbk5hbWUpXHJcbiAgICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcxNnB4JylcclxuICAgICAgICAgICAgLmNzcygnYm9yZGVyLWJvdHRvbScsIGAzcHggc29saWQgJHtjb2xvcn1gKTtcclxuICAgICAgICBjb25zdCBjb2xvclBhbGV0dGUgPSBuZXcgQ29sb3JQYWxldHRlKCk7XHJcbiAgICAgICAgY29sb3JQYWxldHRlLmNoYW5nZSA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUodik7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKHYpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ2JvdHRvbS1sZWZ0JywgY29sb3JQYWxldHRlLmVsKTtcclxuICAgIH1cclxuICAgIHNldFRpdGxlKGNvbG9yKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZS5jc3MoJ2JvcmRlci1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiYXNlRm9udHMgfSBmcm9tICcuLi9jb3JlL2ZvbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wZG93bkZvbnQgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBuZm9udHMgPSBiYXNlRm9udHMubWFwKChpdCkgPT4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtYClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZShpdC50aXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKGl0KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2hpbGQoaXQudGl0bGUpKTtcclxuICAgICAgICBzdXBlcihiYXNlRm9udHNbMF0udGl0bGUsICcxNjBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb250cyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgZm9udFNpemVzIH0gZnJvbSAnLi4vY29yZS9mb250JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb250U2l6ZSBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnN0IG5mb250U2l6ZXMgPSBmb250U2l6ZXMubWFwKChpdCkgPT4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtYClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZShgJHtpdC5wdH1gKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoaXQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jaGlsZChgJHtpdC5wdH1gKSk7XHJcbiAgICAgICAgc3VwZXIoJzEwJywgJzYwcHgnLCB0cnVlLCAnYm90dG9tLWxlZnQnLCAuLi5uZm9udFNpemVzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgeyBiYXNlRm9ybWF0cyB9IGZyb20gJy4uL2NvcmUvZm9ybWF0JztcclxuaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb3JtYXQgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBsZXQgbmZvcm1hdHMgPSBiYXNlRm9ybWF0cy5zbGljZSgwKTtcclxuICAgICAgICBuZm9ybWF0cy5zcGxpY2UoMiwgMCwgeyBrZXk6ICdkaXZpZGVyJyB9KTtcclxuICAgICAgICBuZm9ybWF0cy5zcGxpY2UoOCwgMCwgeyBrZXk6ICdkaXZpZGVyJyB9KTtcclxuICAgICAgICBuZm9ybWF0cyA9IG5mb3JtYXRzLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApO1xyXG4gICAgICAgICAgICBpZiAoaXQua2V5ID09PSAnZGl2aWRlcicpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoJ2RpdmlkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hpbGQoaXQudGl0bGUoKSkub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUoaXQudGl0bGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoaXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXQubGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZChoKCdkaXYnLCAnbGFiZWwnKS5odG1sKGl0LmxhYmVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIoJ05vcm1hbCcsICcyMjBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb3JtYXRzKTtcclxuICAgIH1cclxuICAgIHNldFRpdGxlKGtleSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmFzZUZvcm1hdHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGJhc2VGb3JtYXRzW2ldLmtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlLmh0bWwoYmFzZUZvcm1hdHNbaV0udGl0bGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmFzZUZvcm11bGFzIH0gZnJvbSAnLi4vY29yZS9mb3JtdWxhJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb3JtdWxhIGV4dGVuZHMgRHJvcGRvd24ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc3QgbmZvcm11bGFzID0gYmFzZUZvcm11bGFzLm1hcCgoaXQpID0+IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNoaWxkKGl0LmtleSkpO1xyXG4gICAgICAgIHN1cGVyKG5ldyBJY29uKCdmb3JtdWxhJyksICcxODBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb3JtdWxhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuY29uc3QgbGluZVR5cGVzID0gW1xyXG4gICAgW1xyXG4gICAgICAgICd0aGluJyxcclxuICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjFcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjxsaW5lIHgxPVwiMFwiIHkxPVwiMC41XCIgeDI9XCI1MFwiIHkyPVwiMC41XCIgc3Ryb2tlLXdpZHRoPVwiMVwiIHN0cm9rZT1cImJsYWNrXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48L2xpbmU+PC9zdmc+JyxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgJ21lZGl1bScsXHJcbiAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCIyXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48bGluZSB4MT1cIjBcIiB5MT1cIjEuMFwiIHgyPVwiNTBcIiB5Mj1cIjEuMFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJibGFja1wiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICd0aGljaycsXHJcbiAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCIzXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48bGluZSB4MT1cIjBcIiB5MT1cIjEuNVwiIHgyPVwiNTBcIiB5Mj1cIjEuNVwiIHN0cm9rZS13aWR0aD1cIjNcIiBzdHJva2U9XCJibGFja1wiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICdkYXNoZWQnLFxyXG4gICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PGxpbmUgeDE9XCIwXCIgeTE9XCIwLjVcIiB4Mj1cIjUwXCIgeTI9XCIwLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiMlwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICdkb3R0ZWQnLFxyXG4gICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PGxpbmUgeDE9XCIwXCIgeTE9XCIwLjVcIiB4Mj1cIjUwXCIgeTI9XCIwLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgLy8gWydkb3VibGUnLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjNcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjxsaW5lIHgxPVwiMFwiIHkxPVwiMC41XCIgeDI9XCI1MFwiIHkyPVwiMC41XCIgc3Ryb2tlLXdpZHRoPVwiMVwiIHN0cm9rZT1cImJsYWNrXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48L2xpbmU+PGxpbmUgeDE9XCIwXCIgeTE9XCIyLjVcIiB4Mj1cIjUwXCIgeTI9XCIyLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjwvbGluZT48L3N2Zz4nXSxcclxuXTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25MaW5lVHlwZSBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oJ2xpbmUtdHlwZScpO1xyXG4gICAgICAgIGxldCBiZWZvcmVpID0gMDtcclxuICAgICAgICBjb25zdCBsaW5lVHlwZUVscyA9IGxpbmVUeXBlcy5tYXAoKGl0LCBpdGkpID0+IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbSBzdGF0ZSAke3R5cGUgPT09IGl0WzBdID8gJ2NoZWNrZWQnIDogJyd9YClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbGluZVR5cGVFbHNbYmVmb3JlaV0udG9nZ2xlKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgIGxpbmVUeXBlRWxzW2l0aV0udG9nZ2xlKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgIGJlZm9yZWkgPSBpdGk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNoaWxkKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tbGluZS10eXBlYCkuaHRtbChpdFsxXSkpKTtcclxuICAgICAgICBzdXBlcihpY29uLCAnYXV0bycsIGZhbHNlLCAnYm90dG9tLWxlZnQnLCAuLi5saW5lVHlwZUVscyk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBTdWdnZXN0IGZyb20gJy4vc3VnZ2VzdCc7XHJcbmltcG9ydCBEYXRlcGlja2VyIGZyb20gJy4vZGF0ZXBpY2tlcic7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmZ1bmN0aW9uIHJlc2V0VGV4dGFyZWFTaXplKCkge1xyXG4gICAgY29uc3QgeyBpbnB1dFRleHQgfSA9IHRoaXM7XHJcbiAgICBpZiAoIS9eXFxzKiQvLnRlc3QoaW5wdXRUZXh0KSkge1xyXG4gICAgICAgIGNvbnN0IHsgdGV4dGxpbmVFbCwgdGV4dEVsLCBhcmVhT2Zmc2V0IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHR4dHMgPSBpbnB1dFRleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGNvbnN0IG1heFR4dFNpemUgPSBNYXRoLm1heCguLi50eHRzLm1hcCgoaXQpID0+IGl0Lmxlbmd0aCkpO1xyXG4gICAgICAgIGNvbnN0IHRsT2Zmc2V0ID0gdGV4dGxpbmVFbC5vZmZzZXQoKTtcclxuICAgICAgICBjb25zdCBmb250V2lkdGggPSB0bE9mZnNldC53aWR0aCAvIGlucHV0VGV4dC5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgdGxpbmVXaWR0aCA9IChtYXhUeHRTaXplICsgMSkgKiBmb250V2lkdGggKyA1O1xyXG4gICAgICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy52aWV3Rm4oKS53aWR0aCAtIGFyZWFPZmZzZXQubGVmdCAtIGZvbnRXaWR0aDtcclxuICAgICAgICBsZXQgaDEgPSB0eHRzLmxlbmd0aDtcclxuICAgICAgICBpZiAodGxpbmVXaWR0aCA+IGFyZWFPZmZzZXQud2lkdGgpIHtcclxuICAgICAgICAgICAgbGV0IHR3aWR0aCA9IHRsaW5lV2lkdGg7XHJcbiAgICAgICAgICAgIGlmICh0bGluZVdpZHRoID4gbWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHR3aWR0aCA9IG1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgaDEgKz0gTWF0aC5mbG9vcih0bGluZVdpZHRoIC8gbWF4V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgaDEgKz0gdGxpbmVXaWR0aCAlIG1heFdpZHRoID4gMCA/IDEgOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRFbC5jc3MoJ3dpZHRoJywgYCR7dHdpZHRofXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGgxICo9IHRoaXMucm93SGVpZ2h0O1xyXG4gICAgICAgIGlmIChoMSA+IGFyZWFPZmZzZXQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRleHRFbC5jc3MoJ2hlaWdodCcsIGAke2gxfXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluc2VydFRleHQoeyB0YXJnZXQgfSwgaXR4dCkge1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgc2VsZWN0aW9uRW5kIH0gPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBudHh0ID0gYCR7dmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uRW5kKX0ke2l0eHR9JHt2YWx1ZS5zbGljZShzZWxlY3Rpb25FbmQpfWA7XHJcbiAgICB0YXJnZXQudmFsdWUgPSBudHh0O1xyXG4gICAgdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvbkVuZCArIDEsIHNlbGVjdGlvbkVuZCArIDEpO1xyXG4gICAgdGhpcy5pbnB1dFRleHQgPSBudHh0O1xyXG4gICAgdGhpcy50ZXh0bGluZUVsLmh0bWwobnR4dCk7XHJcbiAgICByZXNldFRleHRhcmVhU2l6ZS5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIGtleWRvd25FdmVudEhhbmRsZXIoZXZ0KSB7XHJcbiAgICBjb25zdCB7IGtleUNvZGUsIGFsdEtleSB9ID0gZXZ0O1xyXG4gICAgaWYgKGtleUNvZGUgIT09IDEzICYmIGtleUNvZGUgIT09IDkpXHJcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGtleUNvZGUgPT09IDEzICYmIGFsdEtleSkge1xyXG4gICAgICAgIGluc2VydFRleHQuY2FsbCh0aGlzLCBldnQsICdcXG4nKTtcclxuICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoa2V5Q29kZSA9PT0gMTMgJiYgIWFsdEtleSlcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxufVxyXG5mdW5jdGlvbiBpbnB1dEV2ZW50SGFuZGxlcihldnQpIHtcclxuICAgIGNvbnN0IHYgPSBldnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgLy8gY29uc29sZS5sb2coZXZ0LCAndjonLCB2KTtcclxuICAgIGNvbnN0IHsgc3VnZ2VzdCwgdGV4dGxpbmVFbCwgdmFsaWRhdG9yIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBjZWxsIH0gPSB0aGlzO1xyXG4gICAgaWYgKGNlbGwgIT09IG51bGwpIHtcclxuICAgICAgICBpZiAoKCdlZGl0YWJsZScgaW4gY2VsbCAmJiBjZWxsLmVkaXRhYmxlID09PSB0cnVlKSB8fFxyXG4gICAgICAgICAgICBjZWxsLmVkaXRhYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dFRleHQgPSB2O1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdG9yLnR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Quc2VhcmNoKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IHYubGFzdEluZGV4T2YoJz0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0LnNlYXJjaCh2LnN1YnN0cmluZyhzdGFydCArIDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRsaW5lRWwuaHRtbCh2KTtcclxuICAgICAgICAgICAgcmVzZXRUZXh0YXJlYVNpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoJ2lucHV0Jywgdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBldnQudGFyZ2V0LnZhbHVlID0gY2VsbC50ZXh0IHx8ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gdjtcclxuICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IudHlwZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0LnNlYXJjaCh2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN1Z2dlc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHYubGFzdEluZGV4T2YoJz0nKTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZWFyY2godi5zdWJzdHJpbmcoc3RhcnQgKyAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0LmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0bGluZUVsLmh0bWwodik7XHJcbiAgICAgICAgcmVzZXRUZXh0YXJlYVNpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSgnaW5wdXQnLCB2KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRUZXh0YXJlYVJhbmdlKHBvc2l0aW9uKSB7XHJcbiAgICBjb25zdCB7IGVsIH0gPSB0aGlzLnRleHRFbDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGVsLmZvY3VzKCk7XHJcbiAgICAgICAgZWwuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb24sIHBvc2l0aW9uKTtcclxuICAgIH0sIDApO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRleHQodGV4dCwgcG9zaXRpb24pIHtcclxuICAgIGNvbnN0IHsgdGV4dEVsLCB0ZXh0bGluZUVsIH0gPSB0aGlzO1xyXG4gICAgLy8gZmlyZWZveCBidWdcclxuICAgIHRleHRFbC5lbC5ibHVyKCk7XHJcbiAgICB0ZXh0RWwudmFsKHRleHQpO1xyXG4gICAgdGV4dGxpbmVFbC5odG1sKHRleHQpO1xyXG4gICAgc2V0VGV4dGFyZWFSYW5nZS5jYWxsKHRoaXMsIHBvc2l0aW9uKTtcclxufVxyXG5mdW5jdGlvbiBzdWdnZXN0SXRlbUNsaWNrKGl0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0VGV4dCwgdmFsaWRhdG9yIH0gPSB0aGlzO1xyXG4gICAgbGV0IHBvc2l0aW9uID0gMDtcclxuICAgIGlmICh2YWxpZGF0b3IgJiYgdmFsaWRhdG9yLnR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gaXQ7XHJcbiAgICAgICAgcG9zaXRpb24gPSB0aGlzLmlucHV0VGV4dC5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBzdGFydCA9IGlucHV0VGV4dC5sYXN0SW5kZXhPZignPScpO1xyXG4gICAgICAgIGNvbnN0IHNpdCA9IGlucHV0VGV4dC5zdWJzdHJpbmcoMCwgc3RhcnQgKyAxKTtcclxuICAgICAgICBsZXQgZWl0ID0gaW5wdXRUZXh0LnN1YnN0cmluZyhzdGFydCArIDEpO1xyXG4gICAgICAgIGlmIChlaXQuaW5kZXhPZignKScpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBlaXQgPSBlaXQuc3Vic3RyaW5nKGVpdC5pbmRleE9mKCcpJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWl0ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gYCR7c2l0ICsgaXQua2V5fShgO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnB1dFRleHQ6JywgdGhpcy5pbnB1dFRleHQpO1xyXG4gICAgICAgIHBvc2l0aW9uID0gdGhpcy5pbnB1dFRleHQubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ICs9IGApJHtlaXR9YDtcclxuICAgIH1cclxuICAgIHNldFRleHQuY2FsbCh0aGlzLCB0aGlzLmlucHV0VGV4dCwgcG9zaXRpb24pO1xyXG59XHJcbmZ1bmN0aW9uIHJlc2V0U3VnZ2VzdEl0ZW1zKCkge1xyXG4gICAgdGhpcy5zdWdnZXN0LnNldEl0ZW1zKHRoaXMuZm9ybXVsYXMpO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGVGb3JtYXQoZCkge1xyXG4gICAgbGV0IG1vbnRoID0gZC5nZXRNb250aCgpICsgMTtcclxuICAgIGxldCBkYXRlID0gZC5nZXREYXRlKCk7XHJcbiAgICBpZiAobW9udGggPCAxMClcclxuICAgICAgICBtb250aCA9IGAwJHttb250aH1gO1xyXG4gICAgaWYgKGRhdGUgPCAxMClcclxuICAgICAgICBkYXRlID0gYDAke2RhdGV9YDtcclxuICAgIHJldHVybiBgJHtkLmdldEZ1bGxZZWFyKCl9LSR7bW9udGh9LSR7ZGF0ZX1gO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRvciB7XHJcbiAgICB2aWV3Rm47XHJcbiAgICByb3dIZWlnaHQ7XHJcbiAgICBmb3JtdWxhcztcclxuICAgIHN1Z2dlc3Q7XHJcbiAgICBkYXRlcGlja2VyO1xyXG4gICAgYXJlYUVsO1xyXG4gICAgdGV4dEVsO1xyXG4gICAgdGV4dGxpbmVFbDtcclxuICAgIGVsO1xyXG4gICAgYXJlYU9mZnNldDtcclxuICAgIGZyZWV6ZTtcclxuICAgIGNlbGw7XHJcbiAgICBpbnB1dFRleHQ7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICB2YWxpZGF0b3I7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtdWxhcywgdmlld0ZuLCByb3dIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLnZpZXdGbiA9IHZpZXdGbjtcclxuICAgICAgICB0aGlzLnJvd0hlaWdodCA9IHJvd0hlaWdodDtcclxuICAgICAgICB0aGlzLmZvcm11bGFzID0gZm9ybXVsYXM7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0ID0gbmV3IFN1Z2dlc3QoZm9ybXVsYXMsIChpdCkgPT4ge1xyXG4gICAgICAgICAgICBzdWdnZXN0SXRlbUNsaWNrLmNhbGwodGhpcywgaXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGF0ZXBpY2tlciA9IG5ldyBEYXRlcGlja2VyKCk7XHJcbiAgICAgICAgdGhpcy5kYXRlcGlja2VyLmNoYW5nZSgoZCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZDonLCBkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0KGRhdGVGb3JtYXQoZCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcmVhRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWVkaXRvci1hcmVhYClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCh0aGlzLnRleHRFbCA9IGgoJ3RleHRhcmVhJywgJycpXHJcbiAgICAgICAgICAgIC5vbignaW5wdXQnLCAoZXZ0KSA9PiBpbnB1dEV2ZW50SGFuZGxlci5jYWxsKHRoaXMsIGV2dCkpXHJcbiAgICAgICAgICAgIC5vbigncGFzdGUuc3RvcCcsICgpID0+IHsgfSlcclxuICAgICAgICAgICAgLm9uKCdrZXlkb3duJywgKGV2dCkgPT4ga2V5ZG93bkV2ZW50SGFuZGxlci5jYWxsKHRoaXMsIGV2dCkpKSwgKHRoaXMudGV4dGxpbmVFbCA9IGgoJ2RpdicsICd0ZXh0bGluZScpKSwgdGhpcy5zdWdnZXN0LmVsLCB0aGlzLmRhdGVwaWNrZXIuZWwpXHJcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlLnN0b3AnLCAoKSA9PiB7IH0pXHJcbiAgICAgICAgICAgIC5vbignbW91c2Vkb3duLnN0b3AnLCAoKSA9PiB7IH0pO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWVkaXRvcmApLmNoaWxkKHRoaXMuYXJlYUVsKS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0LmJpbmRJbnB1dEV2ZW50cyh0aGlzLnRleHRFbCk7XHJcbiAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZyZWV6ZSA9IHsgdzogMCwgaDogMCB9O1xyXG4gICAgICAgIHRoaXMuY2VsbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnB1dFRleHQgPSAnJztcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgIH1cclxuICAgIHNldEZyZWV6ZUxlbmd0aHMod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuZnJlZXplLncgPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmZyZWV6ZS5oID0gaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgLy8gY29uc3QgeyBjZWxsIH0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGNvbnN0IGNlbGxUZXh0ID0gKGNlbGwgJiYgY2VsbC50ZXh0KSB8fCAnJztcclxuICAgICAgICBpZiAodGhpcy5pbnB1dFRleHQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCdmaW5pc2hlZCcsIHRoaXMuaW5wdXRUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZWxsID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFyZWFPZmZzZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy50ZXh0RWwudmFsKCcnKTtcclxuICAgICAgICB0aGlzLnRleHRsaW5lRWwuaHRtbCgnJyk7XHJcbiAgICAgICAgcmVzZXRTdWdnZXN0SXRlbXMuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRhdGVwaWNrZXIuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2V0T2Zmc2V0KG9mZnNldCwgc3VnZ2VzdFBvc2l0aW9uID0gJ3RvcCcpIHtcclxuICAgICAgICBjb25zdCB7IHRleHRFbCwgYXJlYUVsLCBzdWdnZXN0LCBmcmVlemUsIGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChvZmZzZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgbCwgdCB9ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGVmdDonLCBsZWZ0LCAnLHRvcDonLCB0b3AsICcsIGZyZWV6ZTonLCBmcmVlemUpO1xyXG4gICAgICAgICAgICBjb25zdCBlbE9mZnNldCA9IHsgbGVmdDogMCwgdG9wOiAwIH07XHJcbiAgICAgICAgICAgIC8vIHRvcCBsZWZ0XHJcbiAgICAgICAgICAgIGlmIChmcmVlemUudyA+IGwgJiYgZnJlZXplLmggPiB0KSB7XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZyZWV6ZS53IDwgbCAmJiBmcmVlemUuaCA8IHQpIHtcclxuICAgICAgICAgICAgICAgIGVsT2Zmc2V0LmxlZnQgPSBmcmVlemUudztcclxuICAgICAgICAgICAgICAgIGVsT2Zmc2V0LnRvcCA9IGZyZWV6ZS5oO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZyZWV6ZS53ID4gbCkge1xyXG4gICAgICAgICAgICAgICAgZWxPZmZzZXQudG9wID0gZnJlZXplLmg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZnJlZXplLmggPiB0KSB7XHJcbiAgICAgICAgICAgICAgICBlbE9mZnNldC5sZWZ0ID0gZnJlZXplLnc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwub2Zmc2V0KGVsT2Zmc2V0KTtcclxuICAgICAgICAgICAgYXJlYUVsLm9mZnNldCh7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0IC0gZWxPZmZzZXQubGVmdCAtIDAuOCxcclxuICAgICAgICAgICAgICAgIHRvcDogdG9wIC0gZWxPZmZzZXQudG9wIC0gMC44LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGV4dEVsLm9mZnNldCh7IHdpZHRoOiB3aWR0aCAtIDkgKyAwLjgsIGhlaWdodDogaGVpZ2h0IC0gMyArIDAuOCB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc09mZnNldCA9IHsgbGVmdDogMCB9O1xyXG4gICAgICAgICAgICBzT2Zmc2V0W3N1Z2dlc3RQb3NpdGlvbl0gPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIHN1Z2dlc3Quc2V0T2Zmc2V0KHNPZmZzZXQpO1xyXG4gICAgICAgICAgICBzdWdnZXN0LmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRDZWxsKGNlbGwsIHZhbGlkYXRvcikge1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwuZWRpdGFibGUgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJzo6JywgdmFsaWRhdG9yKTtcclxuICAgICAgICBjb25zdCB7IGVsLCBkYXRlcGlja2VyLCBzdWdnZXN0IH0gPSB0aGlzO1xyXG4gICAgICAgIGVsLnNob3coKTtcclxuICAgICAgICB0aGlzLmNlbGwgPSBjZWxsO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSAoY2VsbCAmJiBjZWxsLnRleHQpIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dCh0ZXh0KTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcclxuICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdmFsaWRhdG9yO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlcGlja2VyLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGlmICghL15cXHMqJC8udGVzdCh0ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVwaWNrZXIuc2V0VmFsdWUodGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZXRJdGVtcyh2YWxpZGF0b3IudmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZWFyY2goJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0VGV4dCh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dFRleHQgPSB0ZXh0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0ZXh0Pj46JywgdGV4dCk7XHJcbiAgICAgICAgc2V0VGV4dC5jYWxsKHRoaXMsIHRleHQsIHRleHQubGVuZ3RoKTtcclxuICAgICAgICByZXNldFRleHRhcmVhU2l6ZS5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbiIsImNsYXNzIEVsZW1lbnQge1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWcsIGNsYXNzTmFtZSA9ICcnKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbCA9IHRhZztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhID0ge307XHJcbiAgICB9XHJcbiAgICBkYXRhKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldO1xyXG4gICAgfVxyXG4gICAgb24oZXZlbnROYW1lcywgaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IFtmZW4sIC4uLm9lbl0gPSBldmVudE5hbWVzLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IGV2ZW50TmFtZSA9IGZlbjtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnbW91c2V3aGVlbCcgJiZcclxuICAgICAgICAgICAgL0ZpcmVmb3gvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICBldmVudE5hbWUgPSAnRE9NTW91c2VTY3JvbGwnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIoZXZ0KTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvZW4ubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBvZW5baV07XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PT0gJ2xlZnQnICYmIGV2dCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZXZ0LmJ1dHRvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrID09PSAncmlnaHQnICYmIGV2dCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZXZ0LmJ1dHRvbiAhPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrID09PSAnc3RvcCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIG9mZnNldCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNzcyhrLCBgJHt2YWx1ZVtrXX1weGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0VG9wLCBvZmZzZXRMZWZ0LCBvZmZzZXRIZWlnaHQsIG9mZnNldFdpZHRoIH0gPSB0aGlzLmVsO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogb2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBvZmZzZXRMZWZ0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG9mZnNldEhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGg6IG9mZnNldFdpZHRoLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzY3JvbGwodikge1xyXG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodi5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnNjcm9sbExlZnQgPSB2LmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHYudG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IHYudG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGxlZnQ6IGVsLnNjcm9sbExlZnQsIHRvcDogZWwuc2Nyb2xsVG9wIH07XHJcbiAgICB9XHJcbiAgICBib3goKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB9XHJcbiAgICBwYXJlbnQoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHJldHVybiBuZXcgRWxlbWVudChwYXJlbnQpO1xyXG4gICAgfVxyXG4gICAgY2hpbGRyZW4oLi4uZWxlcykge1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVzLmZvckVhY2goKGVsZSkgPT4gdGhpcy5jaGlsZChlbGUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJlbW92ZUNoaWxkKGVsKSB7XHJcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgZmlyc3QoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsLmZpcnN0Q2hpbGQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBsYXN0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5sYXN0Q2hpbGQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICByZW1vdmUoZWxlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsLnJlbW92ZUNoaWxkKGVsZSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcmVwZW5kKGVsZSkge1xyXG4gICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xyXG4gICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGVsLmluc2VydEJlZm9yZShlbGUsIGVsLmZpcnN0Q2hpbGQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGVsZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcmV2KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBuZXh0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5uZXh0U2libGluZztcclxuICAgIH1cclxuICAgICovXHJcbiAgICBjaGlsZChhcmcpIHtcclxuICAgICAgICBsZXQgZWxlO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBlbGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhcmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZSA9IGFyZy5lbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZSA9IGFyZztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChlbGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY29udGFpbnMoZWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuY29udGFpbnMoZWxlKTtcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZSh2KSB7XHJcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNsYXNzTmFtZSA9IHY7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5jbGFzc05hbWU7XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzcyhuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGFzQ2xhc3MobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUNsYXNzKG5hbWUpIHtcclxuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB0b2dnbGUoY2xzID0gJ2FjdGl2ZScpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVDbGFzcyhjbHMpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlQ2xhc3MobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUobmFtZSk7XHJcbiAgICB9XHJcbiAgICBhY3RpdmUoZmxhZyA9IHRydWUsIGNscyA9ICdhY3RpdmUnKSB7XHJcbiAgICAgICAgaWYgKGZsYWcpXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoY2xzKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoY2xzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNoZWNrZWQoZmxhZyA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZShmbGFnLCAnY2hlY2tlZCcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZGlzYWJsZWQoZmxhZyA9IHRydWUpIHtcclxuICAgICAgICBpZiAoZmxhZylcclxuICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhdHRyKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoa2V5KS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShrLCBrZXlba10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdHRyKGtleSkge1xyXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBodG1sKGNvbnRlbnQpIHtcclxuICAgICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmlubmVySFRNTDtcclxuICAgIH1cclxuICAgIHZhbCh2KSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmVsO1xyXG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSB2O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZm9jdXMoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xyXG4gICAgfVxyXG4gICAgY3NzUmVtb3ZlS2V5cyguLi5rZXlzKSB7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKChrKSA9PiB0aGlzLmVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KGspKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNzcyhuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhuYW1lKS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlW2tdID0gbmFtZVtrXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnN0eWxlW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5zdHlsZVtuYW1lXTtcclxuICAgIH1cclxuICAgIGNvbXB1dGVkU3R5bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwsIG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgaCA9ICh0YWcsIGNsYXNzTmFtZSA9ICcnKSA9PiBuZXcgRWxlbWVudCh0YWcsIGNsYXNzTmFtZSk7XHJcbmV4cG9ydCB7IEVsZW1lbnQsIGggfTtcclxuIiwiLyogZ2xvYmFsIHdpbmRvdyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYmluZCh0YXJnZXQsIG5hbWUsIGZuKSB7XHJcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmbik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHVuYmluZCh0YXJnZXQsIG5hbWUsIGZuKSB7XHJcbiAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmbik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHVuYmluZENsaWNrb3V0c2lkZShlbCkge1xyXG4gICAgaWYgKGVsLnhjbGlja291dHNpZGUpIHtcclxuICAgICAgICB1bmJpbmQod2luZG93LmRvY3VtZW50LmJvZHksICdjbGljaycsIGVsLnhjbGlja291dHNpZGUpO1xyXG4gICAgICAgIGRlbGV0ZSBlbC54Y2xpY2tvdXRzaWRlO1xyXG4gICAgfVxyXG59XHJcbi8vIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbjogbW91c2Vkb3duIOKGkiBtb3VzZXVwIOKGkiBjbGlja1xyXG4vLyB0aGUgcmlnaHQgbW91c2UgYnV0dG9uOiBtb3VzZWRvd24g4oaSIGNvbnRlbnh0bWVudSDihpIgbW91c2V1cFxyXG4vLyB0aGUgcmlnaHQgbW91c2UgYnV0dG9uIGluIGZpcmVmb3goPjY1LjApOiBtb3VzZWRvd24g4oaSIGNvbnRlbnh0bWVudSDihpIgbW91c2V1cCDihpIgY2xpY2sgb24gd2luZG93XHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kQ2xpY2tvdXRzaWRlKGVsLCBjYikge1xyXG4gICAgZWwueGNsaWNrb3V0c2lkZSA9IChldnQpID0+IHtcclxuICAgICAgICAvLyBpZ25vcmUgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2V2dDonLCBldnQpO1xyXG4gICAgICAgIGlmIChldnQuZGV0YWlsID09PSAyIHx8IGVsLmNvbnRhaW5zKGV2dC50YXJnZXQpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGNiKSB7XHJcbiAgICAgICAgICAgIGNiKGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLmhpZGUoKTtcclxuICAgICAgICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYmluZCh3aW5kb3cuZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgZWwueGNsaWNrb3V0c2lkZSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIG1vdXNlTW92ZVVwKHRhcmdldCwgbW92ZWZ1bmMsIHVwZnVuYykge1xyXG4gICAgYmluZCh0YXJnZXQsICdtb3VzZW1vdmUnLCBtb3ZlZnVuYyk7XHJcbiAgICBjb25zdCB0ID0gdGFyZ2V0O1xyXG4gICAgdC54RXZ0VXAgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNldXA+Pj4nKTtcclxuICAgICAgICB1bmJpbmQodGFyZ2V0LCAnbW91c2Vtb3ZlJywgbW92ZWZ1bmMpO1xyXG4gICAgICAgIHVuYmluZCh0YXJnZXQsICdtb3VzZXVwJywgdGFyZ2V0LnhFdnRVcCk7XHJcbiAgICAgICAgdXBmdW5jKGV2dCk7XHJcbiAgICB9O1xyXG4gICAgYmluZCh0YXJnZXQsICdtb3VzZXVwJywgdGFyZ2V0LnhFdnRVcCk7XHJcbn1cclxuZnVuY3Rpb24gY2FsVG91Y2hEaXJlY3Rpb24oc3BhbngsIHNwYW55LCBldnQsIGNiKSB7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gJyc7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc3Bhbng6Jywgc3BhbngsICcsIHNwYW55OicsIHNwYW55KTtcclxuICAgIGlmIChNYXRoLmFicyhzcGFueCkgPiBNYXRoLmFicyhzcGFueSkpIHtcclxuICAgICAgICAvLyBob3Jpem9udGFsXHJcbiAgICAgICAgZGlyZWN0aW9uID0gc3BhbnggPiAwID8gJ3JpZ2h0JyA6ICdsZWZ0JztcclxuICAgICAgICBjYihkaXJlY3Rpb24sIHNwYW54LCBldnQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gdmVydGljYWxcclxuICAgICAgICBkaXJlY3Rpb24gPSBzcGFueSA+IDAgPyAnZG93bicgOiAndXAnO1xyXG4gICAgICAgIGNiKGRpcmVjdGlvbiwgc3BhbnksIGV2dCk7XHJcbiAgICB9XHJcbn1cclxuLy8gY2IgPSAoZGlyZWN0aW9uLCBkaXN0YW5jZSkgPT4ge31cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRUb3VjaCh0YXJnZXQsIHsgbW92ZSwgZW5kIH0pIHtcclxuICAgIGxldCBzdGFydHggPSAwO1xyXG4gICAgbGV0IHN0YXJ0eSA9IDA7XHJcbiAgICBiaW5kKHRhcmdldCwgJ3RvdWNoc3RhcnQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBwYWdlWCwgcGFnZVkgfSA9IGV2dC50b3VjaGVzWzBdO1xyXG4gICAgICAgIHN0YXJ0eCA9IHBhZ2VYO1xyXG4gICAgICAgIHN0YXJ0eSA9IHBhZ2VZO1xyXG4gICAgfSk7XHJcbiAgICBiaW5kKHRhcmdldCwgJ3RvdWNobW92ZScsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIW1vdmUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHBhZ2VYLCBwYWdlWSB9ID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgICAgIGNvbnN0IHNwYW54ID0gcGFnZVggLSBzdGFydHg7XHJcbiAgICAgICAgY29uc3Qgc3BhbnkgPSBwYWdlWSAtIHN0YXJ0eTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoc3BhbngpID4gMTAgfHwgTWF0aC5hYnMoc3BhbnkpID4gMTApIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NwYW54OicsIHNwYW54LCAnLCBzcGFueTonLCBzcGFueSk7XHJcbiAgICAgICAgICAgIGNhbFRvdWNoRGlyZWN0aW9uKHNwYW54LCBzcGFueSwgZXZ0LCBtb3ZlKTtcclxuICAgICAgICAgICAgc3RhcnR4ID0gcGFnZVg7XHJcbiAgICAgICAgICAgIHN0YXJ0eSA9IHBhZ2VZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgYmluZCh0YXJnZXQsICd0b3VjaGVuZCcsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIWVuZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgcGFnZVgsIHBhZ2VZIH0gPSBldnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICAgICAgY29uc3Qgc3BhbnggPSBwYWdlWCAtIHN0YXJ0eDtcclxuICAgICAgICBjb25zdCBzcGFueSA9IHBhZ2VZIC0gc3RhcnR5O1xyXG4gICAgICAgIGNhbFRvdWNoRGlyZWN0aW9uKHNwYW54LCBzcGFueSwgZXZ0LCBlbmQpO1xyXG4gICAgfSk7XHJcbn1cclxuLy8gZXZlbnRlbWl0ZXJcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW1pdHRlcigpIHtcclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCBwdXNoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdGVuZXIgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKEFycmF5LmlzQXJyYXkoY3VycmVudExpc3RlbmVyKSAmJiBjdXJyZW50TGlzdGVuZXIucHVzaChjYWxsYmFjaykpIHx8XHJcbiAgICAgICAgICAgICAgICBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjcmVhdGUgPSAoKSA9PiBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgW10uY29uY2F0KGNhbGxiYWNrKSk7XHJcbiAgICAgICAgcmV0dXJuIChsaXN0ZW5lcnMuaGFzKGV2ZW50TmFtZSkgJiYgcHVzaCgpKSB8fCBjcmVhdGUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZpcmUoZXZlbnROYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgY29uc3QgZXhlYyA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpc3RlbmVyID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGN1cnJlbnRMaXN0ZW5lcilcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgLi4uYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzLmhhcyhldmVudE5hbWUpICYmIGV4ZWMoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCByZW1vdmUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lciA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgY29uc3QgaWR4ID0gY3VycmVudExpc3RlbmVyLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gKGlkeCA+PSAwICYmXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlzdGVuZXIuc3BsaWNlKGlkeCwgMSkgJiZcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKS5sZW5ndGggPT09IDAgJiZcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzLmhhcyhldmVudE5hbWUpICYmIHJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25jZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgY29uc3QgZXhlY0NhbGxsYmFjayA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgZXhlY0NhbGxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gb24oZXZlbnROYW1lLCBleGVjQ2FsbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycygpIHtcclxuICAgICAgICBsaXN0ZW5lcnMuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0IGN1cnJlbnQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbixcclxuICAgICAgICBvbmNlLFxyXG4gICAgICAgIGZpcmUsXHJcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIsXHJcbiAgICAgICAgcmVtb3ZlQWxsTGlzdGVuZXJzLFxyXG4gICAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5jb25zdCBwYXR0ZXJucyA9IHtcclxuICAgIG51bWJlcjogLyheXFxkKyQpfCheXFxkKyhcXC5cXGR7MCw0fSk/JCkvLFxyXG4gICAgZGF0ZTogL15cXGR7NH0tXFxkezEsMn0tXFxkezEsMn0kLyxcclxufTtcclxuLy8gcnVsZTogeyByZXF1aXJlZDogZmFsc2UsIHR5cGUsIHBhdHRlcm46IC8vIH1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybUZpZWxkIHtcclxuICAgIGxhYmVsO1xyXG4gICAgcnVsZTtcclxuICAgIHRpcDtcclxuICAgIGlucHV0O1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCwgcnVsZSwgbGFiZWwsIGxhYmVsV2lkdGgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsID0gJyc7XHJcbiAgICAgICAgdGhpcy5ydWxlID0gcnVsZTtcclxuICAgICAgICBpZiAobGFiZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGgoJ2xhYmVsJywgJ2xhYmVsJylcclxuICAgICAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgYCR7bGFiZWxXaWR0aH1weGApXHJcbiAgICAgICAgICAgICAgICAuaHRtbChsYWJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGlwID0gaCgnZGl2JywgJ3RpcCcpLmNoaWxkKCd0aXAnKS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xyXG4gICAgICAgIHRoaXMuaW5wdXQudmNoYW5nZSA9ICgpID0+IHRoaXMudmFsaWRhdGUoKTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1mb3JtLWZpZWxkYCkuY2hpbGRyZW4odGhpcy5sYWJlbCwgaW5wdXQuZWwsIHRoaXMudGlwKTtcclxuICAgIH1cclxuICAgIGlzU2hvdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmVsLnNob3coKTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB2YWwodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0LnZhbCh2KTtcclxuICAgIH1cclxuICAgIGhpbnQoaGludCkge1xyXG4gICAgICAgIHRoaXMuaW5wdXQuaGludChoaW50KTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5wdXQsIHJ1bGUsIHRpcCwgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgdiA9IGlucHV0LnZhbCgpO1xyXG4gICAgICAgIGlmIChydWxlLnJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgIGlmICgvXlxccyokLy50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgICAgICB0aXAuaHRtbCh0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJykpO1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJ1bGUudHlwZSB8fCBydWxlLnBhdHRlcm4pIHtcclxuICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IHJ1bGUucGF0dGVybiB8fCBwYXR0ZXJuc1tydWxlLnR5cGVdO1xyXG4gICAgICAgICAgICBpZiAoIXBhdHRlcm4udGVzdCh2KSkge1xyXG4gICAgICAgICAgICAgICAgdGlwLmh0bWwodCgndmFsaWRhdGlvbi5ub3RNYXRjaCcpKTtcclxuICAgICAgICAgICAgICAgIGVsLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtSW5wdXQge1xyXG4gICAgdmNoYW5nZTtcclxuICAgIGVsO1xyXG4gICAgaW5wdXQ7XHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGludCkge1xyXG4gICAgICAgIHRoaXMudmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1mb3JtLWlucHV0YCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IGgoJ2lucHV0JywgJycpXHJcbiAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgd2lkdGgpXHJcbiAgICAgICAgICAgIC5vbignaW5wdXQnLCAoZXZ0KSA9PiB0aGlzLnZjaGFuZ2UoZXZ0KSlcclxuICAgICAgICAgICAgLmF0dHIoJ3BsYWNlaG9sZGVyJywgaGludCk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmlucHV0KTtcclxuICAgIH1cclxuICAgIGZvY3VzKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0LmVsLmZvY3VzKCk7XHJcbiAgICAgICAgfSwgMTApO1xyXG4gICAgfVxyXG4gICAgaGludCh2KSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5hdHRyKCdwbGFjZWhvbGRlcicsIHYpO1xyXG4gICAgfVxyXG4gICAgdmFsKHYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWwodik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBTdWdnZXN0IGZyb20gJy4vc3VnZ2VzdCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1TZWxlY3Qge1xyXG4gICAga2V5O1xyXG4gICAgZ2V0VGl0bGU7XHJcbiAgICB2Y2hhbmdlO1xyXG4gICAgZWw7XHJcbiAgICBzdWdnZXN0O1xyXG4gICAgaXRlbUVsO1xyXG4gICAgY29uc3RydWN0b3Ioa2V5LCBpdGVtcywgd2lkdGgsIGdldFRpdGxlID0gKGl0KSA9PiBpdCwgY2hhbmdlID0gKGtleSkgPT4geyB9KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5nZXRUaXRsZSA9IGdldFRpdGxlO1xyXG4gICAgICAgIHRoaXMudmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1mb3JtLXNlbGVjdGApO1xyXG4gICAgICAgIHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KGl0ZW1zLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHsga2V5OiBpdCwgdGl0bGU6IHRoaXMuZ2V0VGl0bGUoaXQpIH07XHJcbiAgICAgICAgfSksIChpdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1DbGljayhpdC5rZXkpO1xyXG4gICAgICAgICAgICBjaGFuZ2UoaXQua2V5KTtcclxuICAgICAgICAgICAgdGhpcy52Y2hhbmdlKGl0LmtleSk7XHJcbiAgICAgICAgfSwgd2lkdGgpO1xyXG4gICAgICAgIHRoaXMuZWxcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCh0aGlzLml0ZW1FbCA9IGgoJ2RpdicsICdpbnB1dC10ZXh0JykuaHRtbCh0aGlzLmdldFRpdGxlKGtleSkpKSwgdGhpcy5zdWdnZXN0LmVsKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5zaG93KCkpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLnN1Z2dlc3Quc2VhcmNoKCcnKTtcclxuICAgIH1cclxuICAgIGl0ZW1DbGljayhpdCkge1xyXG4gICAgICAgIHRoaXMua2V5ID0gaXQ7XHJcbiAgICAgICAgdGhpcy5pdGVtRWwuaHRtbCh0aGlzLmdldFRpdGxlKGl0KSk7XHJcbiAgICB9XHJcbiAgICB2YWwodikge1xyXG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5rZXkgPSB2O1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1FbC5odG1sKHRoaXMuZ2V0VGl0bGUodikpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVsZW1lbnQsIGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uIGV4dGVuZHMgRWxlbWVudCB7XHJcbiAgICBpY29uTmFtZUVsO1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHN1cGVyKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb25gKTtcclxuICAgICAgICB0aGlzLmljb25OYW1lRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb24taW1nICR7bmFtZX1gKTtcclxuICAgICAgICB0aGlzLmNoaWxkKHRoaXMuaWNvbk5hbWVFbCk7XHJcbiAgICB9XHJcbiAgICBzZXROYW1lKG5hbWUpIHtcclxuICAgICAgICB0aGlzLmljb25OYW1lRWwuY2xhc3NOYW1lKGAke2Nzc1ByZWZpeH0taWNvbi1pbWcgJHtuYW1lfWApO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBkb2N1bWVudCAqL1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGZ1bmN0aW9uIHh0b2FzdCh0aXRsZSwgY29udGVudCkge1xyXG4gICAgY29uc3QgZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvYXN0YCk7XHJcbiAgICBjb25zdCBkaW1tZXIgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRpbW1lciBhY3RpdmVgKTtcclxuICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsLmVsKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpbW1lci5lbCk7XHJcbiAgICB9O1xyXG4gICAgZWwuY2hpbGRyZW4oaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b2FzdC1oZWFkZXJgKS5jaGlsZHJlbihuZXcgSWNvbignY2xvc2UnKS5vbignY2xpY2suc3RvcCcsICgpID0+IHJlbW92ZSgpKSwgdGl0bGUpLCBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvYXN0LWNvbnRlbnRgKS5odG1sKGNvbnRlbnQpKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwuZWwpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaW1tZXIuZWwpO1xyXG4gICAgLy8gc2V0IG9mZnNldFxyXG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBlbC5ib3goKTtcclxuICAgIGNvbnN0IHsgY2xpZW50SGVpZ2h0LCBjbGllbnRXaWR0aCB9ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgZWwub2Zmc2V0KHtcclxuICAgICAgICBsZWZ0OiAoY2xpZW50V2lkdGggLSB3aWR0aCkgLyAyLFxyXG4gICAgICAgIHRvcDogKGNsaWVudEhlaWdodCAtIGhlaWdodCkgLyAzLFxyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsIi8qIGdsb2JhbCBkb2N1bWVudCAqL1xyXG4vKiBnbG9iYWwgd2luZG93ICovXHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgeyBiaW5kLCB1bmJpbmQgfSBmcm9tICcuL2V2ZW50JztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xyXG4gICAgdGl0bGU7XHJcbiAgICBlbDtcclxuICAgIGRpbW1lcjtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBjb250ZW50LCB3aWR0aCA9ICc2MDBweCcpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tbW9kYWxgKVxyXG4gICAgICAgICAgICAuY3NzKCd3aWR0aCcsIHdpZHRoKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1tb2RhbC1oZWFkZXJgKS5jaGlsZHJlbihuZXcgSWNvbignY2xvc2UnKS5vbignY2xpY2suc3RvcCcsICgpID0+IHRoaXMuaGlkZSgpKSwgdGhpcy50aXRsZSksIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tbW9kYWwtY29udGVudGApLmNoaWxkcmVuKC4uLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICAvLyBkaW1tZXJcclxuICAgICAgICB0aGlzLmRpbW1lciA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZGltbWVyIGFjdGl2ZWApO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kaW1tZXIuZWwpO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5lbC5zaG93KCkuYm94KCk7XHJcbiAgICAgICAgY29uc3QgeyBjbGllbnRIZWlnaHQsIGNsaWVudFdpZHRoIH0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5lbC5vZmZzZXQoe1xyXG4gICAgICAgICAgICBsZWZ0OiAoY2xpZW50V2lkdGggLSB3aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICB0b3A6IChjbGllbnRIZWlnaHQgLSBoZWlnaHQpIC8gMyxcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cueGtleWRvd25Fc2MgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBiaW5kKHdpbmRvdywgJ2tleWRvd24nLCB3aW5kb3cueGtleWRvd25Fc2MpO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZGltbWVyLmVsKTtcclxuICAgICAgICB1bmJpbmQod2luZG93LCAna2V5ZG93bicsIHdpbmRvdy54a2V5ZG93bkVzYyk7XHJcbiAgICAgICAgZGVsZXRlIHdpbmRvdy54a2V5ZG93bkVzYztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSAnLi9tb2RhbCc7XHJcbmltcG9ydCBGb3JtSW5wdXQgZnJvbSAnLi9mb3JtX2lucHV0JztcclxuaW1wb3J0IEZvcm1TZWxlY3QgZnJvbSAnLi9mb3JtX3NlbGVjdCc7XHJcbmltcG9ydCBGb3JtRmllbGQgZnJvbSAnLi9mb3JtX2ZpZWxkJztcclxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuL2J1dHRvbic7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmNvbnN0IGZpZWxkTGFiZWxXaWR0aCA9IDEwMDtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxWYWxpZGF0aW9uIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgbWY7XHJcbiAgICByZjtcclxuICAgIGNmO1xyXG4gICAgb2Y7XHJcbiAgICBtaW52ZjtcclxuICAgIG1heHZmO1xyXG4gICAgdmY7XHJcbiAgICBzdmY7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBtZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1TZWxlY3QoJ2NlbGwnLCBbJ2NlbGwnXSwgLy8gY2VsbHxyb3d8Y29sdW1uXHJcbiAgICAgICAgJzEwMCUnLCAoaXQpID0+IHQoYGRhdGFWYWxpZGF0aW9uLm1vZGVUeXBlLiR7aXR9YCkpLCB7IHJlcXVpcmVkOiB0cnVlIH0sIGAke3QoJ2RhdGFWYWxpZGF0aW9uLnJhbmdlJyl9OmAsIGZpZWxkTGFiZWxXaWR0aCk7XHJcbiAgICAgICAgY29uc3QgcmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzEyMHB4JywgJ0UzIG9yIEUzOkYxMicpLCB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBwYXR0ZXJuOiAvXihbQS1aXXsxLDJ9WzEtOV1cXGQqKSg6W0EtWl17MSwyfVsxLTldXFxkKik/JC8sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY2YgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtU2VsZWN0KCdsaXN0JywgWydsaXN0JywgJ251bWJlcicsICdkYXRlJywgJ3Bob25lJywgJ2VtYWlsJ10sICcxMDAlJywgKGl0KSA9PiB0KGBkYXRhVmFsaWRhdGlvbi50eXBlLiR7aXR9YCksIChpdCkgPT4gdGhpcy5jcml0ZXJpYVNlbGVjdGVkKGl0KSksIHsgcmVxdWlyZWQ6IHRydWUgfSwgYCR7dCgnZGF0YVZhbGlkYXRpb24uY3JpdGVyaWEnKX06YCwgZmllbGRMYWJlbFdpZHRoKTtcclxuICAgICAgICAvLyBvcGVyYXRvclxyXG4gICAgICAgIGNvbnN0IG9mID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybVNlbGVjdCgnYmUnLCBbJ2JlJywgJ25iZScsICdlcScsICduZXEnLCAnbHQnLCAnbHRlJywgJ2d0JywgJ2d0ZSddLCAnMTYwcHgnLCAoaXQpID0+IHQoYGRhdGFWYWxpZGF0aW9uLm9wZXJhdG9yLiR7aXR9YCksIChpdCkgPT4gdGhpcy5jcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQoaXQpKSwgeyByZXF1aXJlZDogdHJ1ZSB9KS5oaWRlKCk7XHJcbiAgICAgICAgLy8gbWluLCBtYXhcclxuICAgICAgICBjb25zdCBtaW52ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnNzBweCcsICcxMCcpLCB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0pLmhpZGUoKTtcclxuICAgICAgICBjb25zdCBtYXh2ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnNzBweCcsICcxMDAnKSwge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgfSkuaGlkZSgpO1xyXG4gICAgICAgIC8vIHZhbHVlXHJcbiAgICAgICAgY29uc3Qgc3ZmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCcxMjBweCcsICdhLGIsYycpLCB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHZmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCc3MHB4JywgJzEwJyksIHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgIH0pLmhpZGUoKTtcclxuICAgICAgICBzdXBlcih0KCdjb250ZXh0bWVudS52YWxpZGF0aW9uJyksIFtcclxuICAgICAgICAgICAgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1mb3JtLWZpZWxkc2ApLmNoaWxkcmVuKG1mLmVsLCByZi5lbCksXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZm9ybS1maWVsZHNgKS5jaGlsZHJlbihjZi5lbCwgb2YuZWwsIG1pbnZmLmVsLCBtYXh2Zi5lbCwgdmYuZWwsIHN2Zi5lbCksXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYnV0dG9uc2ApLmNoaWxkcmVuKG5ldyBCdXR0b24oJ2NhbmNlbCcpLm9uKCdjbGljaycsICgpID0+IHRoaXMuYnRuQ2xpY2soJ2NhbmNlbCcpKSwgbmV3IEJ1dHRvbigncmVtb3ZlJykub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5idG5DbGljaygncmVtb3ZlJykpLCBuZXcgQnV0dG9uKCdzYXZlJywgJ3ByaW1hcnknKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdzYXZlJykpKSxcclxuICAgICAgICBdKTtcclxuICAgICAgICB0aGlzLm1mID0gbWY7XHJcbiAgICAgICAgdGhpcy5yZiA9IHJmO1xyXG4gICAgICAgIHRoaXMuY2YgPSBjZjtcclxuICAgICAgICB0aGlzLm9mID0gb2Y7XHJcbiAgICAgICAgdGhpcy5taW52ZiA9IG1pbnZmO1xyXG4gICAgICAgIHRoaXMubWF4dmYgPSBtYXh2ZjtcclxuICAgICAgICB0aGlzLnZmID0gdmY7XHJcbiAgICAgICAgdGhpcy5zdmYgPSBzdmY7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICB9XHJcbiAgICBzaG93VmYoaXQpIHtcclxuICAgICAgICBjb25zdCBoaW50ID0gaXQgPT09ICdkYXRlJyA/ICcyMDE4LTExLTEyJyA6ICcxMCc7XHJcbiAgICAgICAgY29uc3QgeyB2ZiB9ID0gdGhpcztcclxuICAgICAgICB2Zi5pbnB1dC5oaW50KGhpbnQpO1xyXG4gICAgICAgIHZmLnNob3coKTtcclxuICAgIH1cclxuICAgIGNyaXRlcmlhU2VsZWN0ZWQoaXQpIHtcclxuICAgICAgICBjb25zdCB7IG9mLCBtaW52ZiwgbWF4dmYsIHZmLCBzdmYgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGl0ID09PSAnZGF0ZScgfHwgaXQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIG9mLnNob3coKTtcclxuICAgICAgICAgICAgbWludmYucnVsZS50eXBlID0gaXQ7XHJcbiAgICAgICAgICAgIG1heHZmLnJ1bGUudHlwZSA9IGl0O1xyXG4gICAgICAgICAgICBpZiAoaXQgPT09ICdkYXRlJykge1xyXG4gICAgICAgICAgICAgICAgbWludmYuaGludCgnMjAxOC0xMS0xMicpO1xyXG4gICAgICAgICAgICAgICAgbWF4dmYuaGludCgnMjAxOS0xMS0xMicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWludmYuaGludCgnMTAnKTtcclxuICAgICAgICAgICAgICAgIG1heHZmLmhpbnQoJzEwMCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1pbnZmLnNob3coKTtcclxuICAgICAgICAgICAgbWF4dmYuc2hvdygpO1xyXG4gICAgICAgICAgICB2Zi5oaWRlKCk7XHJcbiAgICAgICAgICAgIHN2Zi5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoaXQgPT09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICAgICAgc3ZmLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN2Zi5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmYuaGlkZSgpO1xyXG4gICAgICAgICAgICBvZi5oaWRlKCk7XHJcbiAgICAgICAgICAgIG1pbnZmLmhpZGUoKTtcclxuICAgICAgICAgICAgbWF4dmYuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNyaXRlcmlhT3BlcmF0b3JTZWxlY3RlZChpdCkge1xyXG4gICAgICAgIGlmICghaXQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IG1pbnZmLCBtYXh2ZiwgdmYgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGl0ID09PSAnYmUnIHx8IGl0ID09PSAnbmJlJykge1xyXG4gICAgICAgICAgICBtaW52Zi5zaG93KCk7XHJcbiAgICAgICAgICAgIG1heHZmLnNob3coKTtcclxuICAgICAgICAgICAgdmYuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuY2YudmFsKCk7XHJcbiAgICAgICAgICAgIHZmLnJ1bGUudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIHZmLmhpbnQoJzIwMTgtMTEtMTInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZmLmhpbnQoJzEwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmYuc2hvdygpO1xyXG4gICAgICAgICAgICBtaW52Zi5oaWRlKCk7XHJcbiAgICAgICAgICAgIG1heHZmLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBidG5DbGljayhhY3Rpb24pIHtcclxuICAgICAgICBpZiAoYWN0aW9uID09PSAnY2FuY2VsJykge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZSgncmVtb3ZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlJykge1xyXG4gICAgICAgICAgICAvLyB2YWxpZGF0ZVxyXG4gICAgICAgICAgICBjb25zdCBhdHRycyA9IFsnbWYnLCAncmYnLCAnY2YnLCAnb2YnLCAnc3ZmJywgJ3ZmJywgJ21pbnZmJywgJ21heHZmJ107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpc1thdHRyc1tpXV07XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmllbGQ6JywgZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmlzU2hvdygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2l0OicsIGl0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLnZhbGlkYXRlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5tZi52YWwoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVmID0gdGhpcy5yZi52YWwoKTtcclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuY2YudmFsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yID0gdGhpcy5vZi52YWwoKTtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5zdmYudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJyB8fCB0eXBlID09PSAnZGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2JlJyB8fCBvcGVyYXRvciA9PT0gJ25iZScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFt0aGlzLm1pbnZmLnZhbCgpLCB0aGlzLm1heHZmLnZhbCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy52Zi52YWwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhtb2RlLCByZWYsIHR5cGUsIG9wZXJhdG9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCdzYXZlJywgbW9kZSwgcmVmLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICAgICAgb3BlcmF0b3IsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gICAgfVxyXG4gICAgLy8gdmFsaWRhdGlvbjogeyBtb2RlLCByZWYsIHZhbGlkYXRvciB9XHJcbiAgICBzZXRWYWx1ZSh2KSB7XHJcbiAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtZiwgcmYsIGNmLCBvZiwgc3ZmLCB2ZiwgbWludmYsIG1heHZmIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25zdCB7IG1vZGUsIHJlZiwgdmFsaWRhdG9yIH0gPSB2O1xyXG4gICAgICAgICAgICBjb25zdCB7IHR5cGUsIG9wZXJhdG9yLCB2YWx1ZSB9ID0gdmFsaWRhdG9yIHx8IHsgdHlwZTogJ2xpc3QnIH07XHJcbiAgICAgICAgICAgIG1mLnZhbChtb2RlIHx8ICdjZWxsJyk7XHJcbiAgICAgICAgICAgIHJmLnZhbChyZWYpO1xyXG4gICAgICAgICAgICBjZi52YWwodHlwZSk7XHJcbiAgICAgICAgICAgIG9mLnZhbChvcGVyYXRvcik7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgbWludmYudmFsKHZhbHVlWzBdKTtcclxuICAgICAgICAgICAgICAgIG1heHZmLnZhbCh2YWx1ZVsxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdmYudmFsKHZhbHVlIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgIHZmLnZhbCh2YWx1ZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jcml0ZXJpYVNlbGVjdGVkKHR5cGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNyaXRlcmlhT3BlcmF0b3JTZWxlY3RlZChvcGVyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIHdpbmRvdyBkb2N1bWVudCAqL1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuL2J1dHRvbic7XHJcbmltcG9ydCB7IERyYXcgfSBmcm9tICcuLi9jYW52YXMvZHJhdyc7XHJcbmltcG9ydCB7IHJlbmRlckNlbGwgfSBmcm9tICcuL3RhYmxlJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG4vLyByZXNvbHV0aW9uOiA3MiA9PiA1OTUgeCA4NDJcclxuLy8gMTUwID0+IDEyNDAgeCAxNzU0XHJcbi8vIDIwMCA9PiAxNjU0IHggMjMzOVxyXG4vLyAzMDAgPT4gMjQ3OSB4IDM1MDhcclxuLy8gOTYgKiBjbSAvIDIuNTQgLCA5NiAqIGNtIC8gMi41NFxyXG5jb25zdCBQQUdFUl9TSVpFUyA9IFtcclxuICAgIFsnQTMnLCAxMS42OSwgMTYuNTRdLFxyXG4gICAgWydBNCcsIDguMjcsIDExLjY5XSxcclxuICAgIFsnQTUnLCA1LjgzLCA4LjI3XSxcclxuICAgIFsnQjQnLCA5Ljg0LCAxMy45XSxcclxuICAgIFsnQjUnLCA2LjkzLCA5Ljg0XSxcclxuXTtcclxuY29uc3QgUEFHRVJfT1JJRU5UQVRJT05TID0gWydsYW5kc2NhcGUnLCAncG9ydHJhaXQnXTtcclxuZnVuY3Rpb24gaW5jaGVzMnB4KGluYykge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoOTYgKiBpbmMpO1xyXG59XHJcbmZ1bmN0aW9uIGJ0bkNsaWNrKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09PSAnY2FuY2VsJykge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy50b1ByaW50KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcGFnZXJTaXplQ2hhbmdlKGV2dCkge1xyXG4gICAgY29uc3QgeyBwYXBlciB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgdmFsdWUgfSA9IGV2dC50YXJnZXQ7XHJcbiAgICBjb25zdCBwcyA9IFBBR0VSX1NJWkVTW3ZhbHVlXTtcclxuICAgIHBhcGVyLncgPSBpbmNoZXMycHgocHNbMV0pO1xyXG4gICAgcGFwZXIuaCA9IGluY2hlczJweChwc1syXSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygncGFwZXI6JywgcHMsIHBhcGVyKTtcclxuICAgIHRoaXMucHJldmlldygpO1xyXG59XHJcbmZ1bmN0aW9uIHBhZ2VyT3JpZW50YXRpb25DaGFuZ2UoZXZ0KSB7XHJcbiAgICBjb25zdCB7IHBhcGVyIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gZXZ0LnRhcmdldDtcclxuICAgIGNvbnN0IHYgPSBQQUdFUl9PUklFTlRBVElPTlNbdmFsdWVdO1xyXG4gICAgcGFwZXIub3JpZW50YXRpb24gPSB2O1xyXG4gICAgdGhpcy5wcmV2aWV3KCk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpbnQge1xyXG4gICAgcGFwZXI7XHJcbiAgICBkYXRhO1xyXG4gICAgZWw7XHJcbiAgICBjb250ZW50RWw7XHJcbiAgICBjYW52YXNlcztcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnBhcGVyID0ge1xyXG4gICAgICAgICAgICB3OiBpbmNoZXMycHgoUEFHRVJfU0laRVNbMF1bMV0pLFxyXG4gICAgICAgICAgICBoOiBpbmNoZXMycHgoUEFHRVJfU0laRVNbMF1bMl0pLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiA1MCxcclxuICAgICAgICAgICAgb3JpZW50YXRpb246IFBBR0VSX09SSUVOVEFUSU9OU1swXSxcclxuICAgICAgICAgICAgZ2V0IHdpZHRoKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09ICdsYW5kc2NhcGUnID8gdGhpcy5oIDogdGhpcy53O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQgaGVpZ2h0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09ICdsYW5kc2NhcGUnID8gdGhpcy53IDogdGhpcy5oO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1wcmludGApXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbihoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXByaW50LWJhcmApLmNoaWxkcmVuKGgoJ2RpdicsICctdGl0bGUnKS5jaGlsZCgnUHJpbnQgc2V0dGluZ3MnKSwgaCgnZGl2JywgJy1yaWdodCcpLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYnV0dG9uc2ApLmNoaWxkcmVuKG5ldyBCdXR0b24oJ2NhbmNlbCcpLm9uKCdjbGljaycsIGJ0bkNsaWNrLmJpbmQodGhpcywgJ2NhbmNlbCcpKSwgbmV3IEJ1dHRvbignbmV4dCcsICdwcmltYXJ5Jykub24oJ2NsaWNrJywgYnRuQ2xpY2suYmluZCh0aGlzLCAnbmV4dCcpKSkpKSwgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1wcmludC1jb250ZW50YCkuY2hpbGRyZW4oKHRoaXMuY29udGVudEVsID0gaCgnZGl2JywgJy1jb250ZW50JykpLCBoKCdkaXYnLCAnLXNpZGVyJykuY2hpbGQoaCgnZm9ybScsICcnKS5jaGlsZHJlbihoKCdmaWVsZHNldCcsICcnKS5jaGlsZHJlbihoKCdsYWJlbCcsICcnKS5jaGlsZChgJHt0KCdwcmludC5zaXplJyl9YCksIGgoJ3NlbGVjdCcsICcnKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oLi4uUEFHRVJfU0laRVMubWFwKChpdCwgaW5kZXgpID0+IGgoJ29wdGlvbicsICcnKVxyXG4gICAgICAgICAgICAuYXR0cigndmFsdWUnLCBpbmRleClcclxuICAgICAgICAgICAgLmNoaWxkKGAke2l0WzBdfSAoICR7aXRbMV19Jyd4JHtpdFsyXX0nJyApYCkpKVxyXG4gICAgICAgICAgICAub24oJ2NoYW5nZScsIHBhZ2VyU2l6ZUNoYW5nZS5iaW5kKHRoaXMpKSksIGgoJ2ZpZWxkc2V0JywgJycpLmNoaWxkcmVuKGgoJ2xhYmVsJywgJycpLmNoaWxkKGAke3QoJ3ByaW50Lm9yaWVudGF0aW9uJyl9YCksIGgoJ3NlbGVjdCcsICcnKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oLi4uUEFHRVJfT1JJRU5UQVRJT05TLm1hcCgoaXQsIGluZGV4KSA9PiBoKCdvcHRpb24nLCAnJylcclxuICAgICAgICAgICAgLmF0dHIoJ3ZhbHVlJywgaW5kZXgpXHJcbiAgICAgICAgICAgIC5jaGlsZChgJHt0KCdwcmludC5vcmllbnRhdGlvbnMnKVtpbmRleF19YCkpKVxyXG4gICAgICAgICAgICAub24oJ2NoYW5nZScsIHBhZ2VyT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSkpKSkpKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXREYXRhKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgfVxyXG4gICAgcHJldmlldygpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIHBhcGVyIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgcGFkZGluZyB9ID0gcGFwZXI7XHJcbiAgICAgICAgY29uc3QgaXdpZHRoID0gd2lkdGggLSBwYWRkaW5nICogMjtcclxuICAgICAgICBjb25zdCBpaGVpZ2h0ID0gaGVpZ2h0IC0gcGFkZGluZyAqIDI7XHJcbiAgICAgICAgY29uc3QgY3IgPSBkYXRhLmNvbnRlbnRSYW5nZSgpO1xyXG4gICAgICAgIGNvbnN0IHBhZ2VzID0gTWF0aC5mbG9vcihjci5oIC8gaWhlaWdodCkgKyAxO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gaXdpZHRoIC8gY3IudztcclxuICAgICAgICBsZXQgbGVmdCA9IHBhZGRpbmc7XHJcbiAgICAgICAgY29uc3QgdG9wID0gcGFkZGluZztcclxuICAgICAgICBpZiAoc2NhbGUgPiAxKSB7XHJcbiAgICAgICAgICAgIGxlZnQgKz0gKGl3aWR0aCAtIGNyLncpIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJpID0gMDtcclxuICAgICAgICBsZXQgeW9mZnNldCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuaHRtbCgnJyk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG1WaWV3UmFuZ2UgPSB7XHJcbiAgICAgICAgICAgIHNyaTogMCxcclxuICAgICAgICAgICAgc2NpOiAwLFxyXG4gICAgICAgICAgICBlcmk6IDAsXHJcbiAgICAgICAgICAgIGVjaTogMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXM7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBsZXQgdGggPSAwO1xyXG4gICAgICAgICAgICBsZXQgeW8gPSAwO1xyXG4gICAgICAgICAgICBjb25zdCB3cmFwID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1jYW52YXMtY2FyZGApO1xyXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBoKCdjYW52YXMnLCBgJHtjc3NQcmVmaXh9LWNhbnZhc2ApO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhc2VzLnB1c2goY2FudmFzLmVsKTtcclxuICAgICAgICAgICAgY29uc3QgZHJhdyA9IG5ldyBEcmF3KGNhbnZhcy5lbCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIC8vIGNlbGwtY29udGVudFxyXG4gICAgICAgICAgICBkcmF3LnNhdmUoKTtcclxuICAgICAgICAgICAgZHJhdy50cmFuc2xhdGUobGVmdCwgdG9wKTtcclxuICAgICAgICAgICAgaWYgKHNjYWxlIDwgMSlcclxuICAgICAgICAgICAgICAgIGRyYXcuc2NhbGUoc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JpOicsIHJpLCBjci5lcmksIHlvZmZzZXQpO1xyXG4gICAgICAgICAgICBmb3IgKDsgcmkgPD0gY3IuZXJpOyByaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaCA9IGRhdGEucm93cy5nZXRIZWlnaHQocmkpO1xyXG4gICAgICAgICAgICAgICAgdGggKz0gcmg7XHJcbiAgICAgICAgICAgICAgICBpZiAodGggPCBpaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2kgPSAwOyBjaSA8PSBjci5lY2k7IGNpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChkcmF3LCBkYXRhLCByaSwgY2ksIHlvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtVmlld1JhbmdlLmVjaSA9IGNpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHlvID0gLSh0aCAtIHJoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtVmlld1JhbmdlLmVyaSA9IHJpO1xyXG4gICAgICAgICAgICBkcmF3LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgLy8gbWVyZ2UtY2VsbFxyXG4gICAgICAgICAgICBkcmF3LnNhdmUoKTtcclxuICAgICAgICAgICAgZHJhdy50cmFuc2xhdGUobGVmdCwgdG9wKTtcclxuICAgICAgICAgICAgaWYgKHNjYWxlIDwgMSlcclxuICAgICAgICAgICAgICAgIGRyYXcuc2NhbGUoc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgY29uc3QgeW9mID0geW9mZnNldDtcclxuICAgICAgICAgICAgZGF0YS5lYWNoTWVyZ2VzSW5WaWV3KG1WaWV3UmFuZ2UsICh7IHNyaSwgc2NpIH0pID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwoZHJhdywgZGF0YSwgc3JpLCBzY2ksIHlvZik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkcmF3LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgbVZpZXdSYW5nZS5zcmkgPSBtVmlld1JhbmdlLmVyaTtcclxuICAgICAgICAgICAgbVZpZXdSYW5nZS5zY2kgPSBtVmlld1JhbmdlLmVjaTtcclxuICAgICAgICAgICAgeW9mZnNldCArPSB5bztcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY2hpbGQoaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1jYW52YXMtY2FyZC13cmFwZXJgKS5jaGlsZCh3cmFwLmNoaWxkKGNhbnZhcykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICB0b1ByaW50KCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgICAgIGNvbnN0IHsgcGFwZXIgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gaCgnaWZyYW1lJywgJycpLmhpZGUoKTtcclxuICAgICAgICBjb25zdCBlbCA9IGlmcmFtZS5lbDtcclxuICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50V2luZG93IH0gPSBlbDtcclxuICAgICAgICBjb25zdCBpZG9jID0gY29udGVudFdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gYFxuICAgICAgQHBhZ2UgeyBzaXplOiAke3BhcGVyLndpZHRofXB4ICR7cGFwZXIuaGVpZ2h0fXB4OyB9O1xuICAgICAgY2FudmFzIHtcbiAgICAgICAgcGFnZS1icmVhay1iZWZvcmU6IGF1dG87ICAgICAgICBcbiAgICAgICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzO1xuICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDtcbiAgICAgIH07XG4gICAgYDtcclxuICAgICAgICBpZG9jLmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzZXMuZm9yRWFjaCgoaXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY24gPSBpdC5jbG9uZU5vZGUoZmFsc2UpO1xyXG4gICAgICAgICAgICBjb25zdCBjdHggPSBjbi5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAvLyBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpdCwgMCwgMCk7XHJcbiAgICAgICAgICAgIGlkb2MuYm9keS5hcHBlbmRDaGlsZChjbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udGVudFdpbmRvdy5wcmludCgpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IG1vdXNlTW92ZVVwIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc2l6ZXIge1xyXG4gICAgbW92aW5nO1xyXG4gICAgdmVydGljYWw7XHJcbiAgICBlbDtcclxuICAgIHVuaGlkZUhvdmVyRWw7XHJcbiAgICBob3ZlckVsO1xyXG4gICAgbGluZUVsO1xyXG4gICAgY1JlY3Q7XHJcbiAgICBmaW5pc2hlZEZuO1xyXG4gICAgbWluRGlzdGFuY2U7XHJcbiAgICB1bmhpZGVGbjtcclxuICAgIHVuaGlkZUluZGV4O1xyXG4gICAgY29uc3RydWN0b3IodmVydGljYWwgPSBmYWxzZSwgbWluRGlzdGFuY2UpIHtcclxuICAgICAgICB0aGlzLm1vdmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmVydGljYWwgPSB2ZXJ0aWNhbDtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1yZXNpemVyICR7dmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnfWApXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbigodGhpcy51bmhpZGVIb3ZlckVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1yZXNpemVyLWhvdmVyYClcclxuICAgICAgICAgICAgLm9uKCdkYmxjbGljay5zdG9wJywgKGV2dCkgPT4gdGhpcy5tb3VzZWRibGNsaWNrSGFuZGxlcigpKVxyXG4gICAgICAgICAgICAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXHJcbiAgICAgICAgICAgIC5oaWRlKCkpLCAodGhpcy5ob3ZlckVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1yZXNpemVyLWhvdmVyYCkub24oJ21vdXNlZG93bi5zdG9wJywgKGV2dCkgPT4gdGhpcy5tb3VzZWRvd25IYW5kbGVyKGV2dCkpKSwgKHRoaXMubGluZUVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1yZXNpemVyLWxpbmVgKS5oaWRlKCkpKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIC8vIGNlbGwgcmVjdFxyXG4gICAgICAgIHRoaXMuY1JlY3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmluaXNoZWRGbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5taW5EaXN0YW5jZSA9IG1pbkRpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMudW5oaWRlRm4gPSAoKSA9PiB7IH07XHJcbiAgICB9XHJcbiAgICBzaG93VW5oaWRlKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy51bmhpZGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMudW5oaWRlSG92ZXJFbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBoaWRlVW5oaWRlKCkge1xyXG4gICAgICAgIHRoaXMudW5oaWRlSG92ZXJFbC5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICAvLyByZWN0IDoge3RvcCwgbGVmdCwgd2lkdGgsIGhlaWdodH1cclxuICAgIC8vIGxpbmUgOiB7d2lkdGgsIGhlaWdodH1cclxuICAgIHNob3cocmVjdCwgbGluZSkge1xyXG4gICAgICAgIGNvbnN0IHsgbW92aW5nLCB2ZXJ0aWNhbCwgaG92ZXJFbCwgbGluZUVsLCBlbCwgdW5oaWRlSG92ZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBpZiAobW92aW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5jUmVjdCA9IHJlY3Q7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHJlY3Q7XHJcbiAgICAgICAgZWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgbGVmdDogdmVydGljYWwgPyBsZWZ0ICsgd2lkdGggLSA1IDogbGVmdCxcclxuICAgICAgICAgICAgdG9wOiB2ZXJ0aWNhbCA/IHRvcCA6IHRvcCArIGhlaWdodCAtIDUsXHJcbiAgICAgICAgfSkuc2hvdygpO1xyXG4gICAgICAgIGhvdmVyRWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgd2lkdGg6IHZlcnRpY2FsID8gNSA6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHZlcnRpY2FsID8gaGVpZ2h0IDogNSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBsaW5lRWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgd2lkdGg6IHZlcnRpY2FsID8gMCA6IGxpbmUud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdmVydGljYWwgPyBsaW5lLmhlaWdodCA6IDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdW5oaWRlSG92ZXJFbC5vZmZzZXQoe1xyXG4gICAgICAgICAgICBsZWZ0OiB2ZXJ0aWNhbCA/IDUgLSB3aWR0aCA6IGxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogdmVydGljYWwgPyB0b3AgOiA1IC0gaGVpZ2h0LFxyXG4gICAgICAgICAgICB3aWR0aDogdmVydGljYWwgPyA1IDogd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdmVydGljYWwgPyBoZWlnaHQgOiA1LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmVsXHJcbiAgICAgICAgICAgIC5vZmZzZXQoe1xyXG4gICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmhpZGVVbmhpZGUoKTtcclxuICAgIH1cclxuICAgIG1vdXNlZGJsY2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVuaGlkZUluZGV4KSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5oaWRlRm4odGhpcy51bmhpZGVJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW91c2Vkb3duSGFuZGxlcihldnQpIHtcclxuICAgICAgICBsZXQgc3RhcnRFdnQgPSBldnQ7XHJcbiAgICAgICAgY29uc3QgeyBlbCwgbGluZUVsLCBjUmVjdCwgdmVydGljYWwsIG1pbkRpc3RhbmNlIH0gPSB0aGlzO1xyXG4gICAgICAgIGxldCBkaXN0YW5jZSA9IHZlcnRpY2FsID8gY1JlY3Qud2lkdGggOiBjUmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rpc3RhbmNlOicsIGRpc3RhbmNlKTtcclxuICAgICAgICBsaW5lRWwuc2hvdygpO1xyXG4gICAgICAgIG1vdXNlTW92ZVVwKHdpbmRvdywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoc3RhcnRFdnQgIT09IG51bGwgJiYgZS5idXR0b25zID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndG9wOicsIHRvcCwgJywgbGVmdDonLCB0b3AsICcsIGNSZWN0OicsIGNSZWN0KTtcclxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlICs9IGUubW92ZW1lbnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNzcygnbGVmdCcsIGAke2NSZWN0LmxlZnQgKyBkaXN0YW5jZX1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlICs9IGUubW92ZW1lbnRZO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNzcygndG9wJywgYCR7Y1JlY3QudG9wICsgZGlzdGFuY2V9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGFydEV2dCA9IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHN0YXJ0RXZ0ID0gbnVsbDtcclxuICAgICAgICAgICAgbGluZUVsLmhpZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbmlzaGVkRm4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gbWluRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkRm4oY1JlY3QsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY3JvbGxiYXIge1xyXG4gICAgdmVydGljYWw7XHJcbiAgICBtb3ZlRm47XHJcbiAgICBlbDtcclxuICAgIGNvbnRlbnRFbDtcclxuICAgIGNvbnN0cnVjdG9yKHZlcnRpY2FsKSB7XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNhbCA9IHZlcnRpY2FsO1xyXG4gICAgICAgIHRoaXMubW92ZUZuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1zY3JvbGxiYXIgJHt2ZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCd9YClcclxuICAgICAgICAgICAgLmNoaWxkKCh0aGlzLmNvbnRlbnRFbCA9IGgoJ2RpdicsICcnKSkpXHJcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlLnN0b3AnLCAoKSA9PiB7IH0pXHJcbiAgICAgICAgICAgIC5vbignc2Nyb2xsLnN0b3AnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Nyb2xsVG9wLCBzY3JvbGxMZWZ0IH0gPSBldnQudGFyZ2V0O1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2Nyb2xsVG9wOicsIHNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdmVGbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm4odGhpcy52ZXJ0aWNhbCA/IHNjcm9sbFRvcCA6IHNjcm9sbExlZnQsIGV2dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2V2dDo6OicsIGV2dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBtb3ZlKHYpIHtcclxuICAgICAgICB0aGlzLmVsLnNjcm9sbCh2KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNjcm9sbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5zY3JvbGwoKTtcclxuICAgIH1cclxuICAgIHNldChkaXN0YW5jZSwgY29udGVudERpc3RhbmNlKSB7XHJcbiAgICAgICAgY29uc3QgZCA9IGRpc3RhbmNlIC0gMTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzdGFuY2U6JywgZGlzdGFuY2UsICcsIGNvbnRlbnREaXN0YW5jZTonLCBjb250ZW50RGlzdGFuY2UpO1xyXG4gICAgICAgIGlmIChjb250ZW50RGlzdGFuY2UgPiBkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzc0tleSA9IHRoaXMudmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkOicsIGQpO1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNzcyhjc3NLZXksIGAke2QgLSAxNX1weGApLnNob3coKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxcclxuICAgICAgICAgICAgICAgIC5jc3ModGhpcy52ZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JywgJzFweCcpXHJcbiAgICAgICAgICAgICAgICAuY3NzKGNzc0tleSwgYCR7Y29udGVudERpc3RhbmNlfXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IENlbGxSYW5nZSB9IGZyb20gJy4uL2NvcmUvY2VsbF9yYW5nZSc7XHJcbmNvbnN0IHNlbGVjdG9ySGVpZ2h0Qm9yZGVyV2lkdGggPSAyICogMiAtIDE7XHJcbmxldCBzdGFydFpJbmRleCA9IDEwO1xyXG5jbGFzcyBTZWxlY3RvckVsZW1lbnQge1xyXG4gICAgdXNlSGlkZUlucHV0O1xyXG4gICAgYXV0b0ZvY3VzO1xyXG4gICAgaW5wdXRDaGFuZ2U7XHJcbiAgICBjb3JuZXJFbDtcclxuICAgIGFyZWFFbDtcclxuICAgIGNsaXBib2FyZEVsO1xyXG4gICAgYXV0b2ZpbGxFbDtcclxuICAgIGVsO1xyXG4gICAgaGlkZUlucHV0O1xyXG4gICAgaGlkZUlucHV0RGl2O1xyXG4gICAgY29uc3RydWN0b3IodXNlSGlkZUlucHV0ID0gZmFsc2UsIGF1dG9Gb2N1cyA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLnVzZUhpZGVJbnB1dCA9IHVzZUhpZGVJbnB1dDtcclxuICAgICAgICB0aGlzLmF1dG9Gb2N1cyA9IGF1dG9Gb2N1cztcclxuICAgICAgICB0aGlzLmlucHV0Q2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuY29ybmVyRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWNvcm5lcmApO1xyXG4gICAgICAgIHRoaXMuYXJlYUVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1zZWxlY3Rvci1hcmVhYClcclxuICAgICAgICAgICAgLmNoaWxkKHRoaXMuY29ybmVyRWwpXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5jbGlwYm9hcmRFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2VsZWN0b3ItY2xpcGJvYXJkYCkuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpbGxFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2VsZWN0b3ItYXV0b2ZpbGxgKS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2VsZWN0b3JgKVxyXG4gICAgICAgICAgICAuY3NzKCd6LWluZGV4JywgYCR7c3RhcnRaSW5kZXh9YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKHRoaXMuYXJlYUVsLCB0aGlzLmNsaXBib2FyZEVsLCB0aGlzLmF1dG9maWxsRWwpXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgaWYgKHVzZUhpZGVJbnB1dCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVJbnB1dCA9IGgoJ2lucHV0JywgJycpLm9uKCdjb21wb3NpdGlvbmVuZCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRDaGFuZ2UoZXZ0LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNoaWxkKCh0aGlzLmhpZGVJbnB1dERpdiA9IGgoJ2RpdicsICdoaWRlLWlucHV0JykuY2hpbGQodGhpcy5oaWRlSW5wdXQpKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuY2hpbGQoKHRoaXMuaGlkZUlucHV0RGl2ID0gaCgnZGl2JywgJ2hpZGUtaW5wdXQnKS5jaGlsZCh0aGlzLmhpZGVJbnB1dCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhcnRaSW5kZXggKz0gMTtcclxuICAgIH1cclxuICAgIHNldE9mZnNldCh2KSB7XHJcbiAgICAgICAgdGhpcy5lbC5vZmZzZXQodikuc2hvdygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEFyZWFPZmZzZXQodikge1xyXG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSB2O1xyXG4gICAgICAgIGNvbnN0IG9mID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggLSBzZWxlY3RvckhlaWdodEJvcmRlcldpZHRoICsgMC44LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAtIHNlbGVjdG9ySGVpZ2h0Qm9yZGVyV2lkdGggKyAwLjgsXHJcbiAgICAgICAgICAgIGxlZnQ6IGxlZnQgLSAwLjgsXHJcbiAgICAgICAgICAgIHRvcDogdG9wIC0gMC44LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hcmVhRWwub2Zmc2V0KG9mKS5zaG93KCk7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlSGlkZUlucHV0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUlucHV0RGl2Lm9mZnNldChvZik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9Gb2N1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQudmFsKCcnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQudmFsKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldENsaXBib2FyZE9mZnNldCh2KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHY7XHJcbiAgICAgICAgdGhpcy5jbGlwYm9hcmRFbC5vZmZzZXQoe1xyXG4gICAgICAgICAgICBsZWZ0LFxyXG4gICAgICAgICAgICB0b3AsXHJcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCAtIDUsXHJcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0IC0gNSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNob3dBdXRvZmlsbCh2KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHY7XHJcbiAgICAgICAgdGhpcy5hdXRvZmlsbEVsXHJcbiAgICAgICAgICAgIC5vZmZzZXQoe1xyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggLSBzZWxlY3RvckhlaWdodEJvcmRlcldpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAtIHNlbGVjdG9ySGVpZ2h0Qm9yZGVyV2lkdGgsXHJcbiAgICAgICAgICAgIGxlZnQsXHJcbiAgICAgICAgICAgIHRvcCxcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZUF1dG9maWxsKCkge1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpbGxFbC5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBzaG93Q2xpcGJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkRWwuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZUNsaXBib2FyZCgpIHtcclxuICAgICAgICB0aGlzLmNsaXBib2FyZEVsLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjYWxCUkFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgc2Nyb2xsLCBsLCB0IH0gPSBvZmZzZXQ7XHJcbiAgICBjb25zdCBmdHdpZHRoID0gZGF0YS5mcmVlemVUb3RhbFdpZHRoKCk7XHJcbiAgICBjb25zdCBmdGhlaWdodCA9IGRhdGEuZnJlZXplVG90YWxIZWlnaHQoKTtcclxuICAgIGxldCBsZWZ0MCA9IGxlZnQgLSBmdHdpZHRoO1xyXG4gICAgaWYgKGZ0d2lkdGggPiBsKVxyXG4gICAgICAgIGxlZnQwIC09IHNjcm9sbC54O1xyXG4gICAgbGV0IHRvcDAgPSB0b3AgLSBmdGhlaWdodDtcclxuICAgIGlmIChmdGhlaWdodCA+IHQpXHJcbiAgICAgICAgdG9wMCAtPSBzY3JvbGwueTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGVmdDogbGVmdDAsXHJcbiAgICAgICAgdG9wOiB0b3AwLFxyXG4gICAgICAgIHdpZHRoLFxyXG4gICAgICAgIGhlaWdodCxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY2FsVEFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxlZnQsIHdpZHRoLCBoZWlnaHQsIGwsIHQsIHNjcm9sbCB9ID0gb2Zmc2V0O1xyXG4gICAgY29uc3QgZnR3aWR0aCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgbGV0IGxlZnQwID0gbGVmdCAtIGZ0d2lkdGg7XHJcbiAgICBpZiAoZnR3aWR0aCA+IGwpXHJcbiAgICAgICAgbGVmdDAgLT0gc2Nyb2xsLng7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxlZnQ6IGxlZnQwLFxyXG4gICAgICAgIHRvcDogdCxcclxuICAgICAgICB3aWR0aCxcclxuICAgICAgICBoZWlnaHQsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNhbExBcmVhT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyB0b3AsIHdpZHRoLCBoZWlnaHQsIGwsIHQsIHNjcm9sbCB9ID0gb2Zmc2V0O1xyXG4gICAgY29uc3QgZnRoZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICBsZXQgdG9wMCA9IHRvcCAtIGZ0aGVpZ2h0O1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2Z0aGVpZ2h0OicsIGZ0aGVpZ2h0LCAnLCB0OicsIHQpO1xyXG4gICAgaWYgKGZ0aGVpZ2h0ID4gdClcclxuICAgICAgICB0b3AwIC09IHNjcm9sbC55O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsZWZ0OiBsLFxyXG4gICAgICAgIHRvcDogdG9wMCxcclxuICAgICAgICB3aWR0aCxcclxuICAgICAgICBoZWlnaHQsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHNldEJSQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgYnIgfSA9IHRoaXM7XHJcbiAgICBici5zZXRBcmVhT2Zmc2V0KGNhbEJSQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRMQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgdGwgfSA9IHRoaXM7XHJcbiAgICB0bC5zZXRBcmVhT2Zmc2V0KG9mZnNldCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VEFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IHQgfSA9IHRoaXM7XHJcbiAgICB0LnNldEFyZWFPZmZzZXQoY2FsVEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRMQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgbCB9ID0gdGhpcztcclxuICAgIGwuc2V0QXJlYU9mZnNldChjYWxMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldExDbGlwYm9hcmRPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGwgfSA9IHRoaXM7XHJcbiAgICBsLnNldENsaXBib2FyZE9mZnNldChjYWxMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEJSQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyBiciB9ID0gdGhpcztcclxuICAgIGJyLnNldENsaXBib2FyZE9mZnNldChjYWxCUkFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRUTENsaXBib2FyZE9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgdGwgfSA9IHRoaXM7XHJcbiAgICB0bC5zZXRDbGlwYm9hcmRPZmZzZXQob2Zmc2V0KTtcclxufVxyXG5mdW5jdGlvbiBzZXRUQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyB0IH0gPSB0aGlzO1xyXG4gICAgdC5zZXRDbGlwYm9hcmRPZmZzZXQoY2FsVEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRBbGxBcmVhT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgc2V0QlJBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgIHNldFRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRUQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0QWxsQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgc2V0QlJDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgc2V0VExDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgc2V0VENsaXBib2FyZE9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRMQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RvciB7XHJcbiAgICBpbnB1dENoYW5nZTtcclxuICAgIGRhdGE7XHJcbiAgICBicjtcclxuICAgIHQ7XHJcbiAgICBsO1xyXG4gICAgdGw7XHJcbiAgICBvZmZzZXQ7XHJcbiAgICBhcmVhT2Zmc2V0O1xyXG4gICAgaW5kZXhlcztcclxuICAgIHJhbmdlO1xyXG4gICAgYXJhbmdlO1xyXG4gICAgZWw7XHJcbiAgICBsYXN0cmk7XHJcbiAgICBsYXN0Y2k7XHJcbiAgICBtb3ZlSW5kZXhlcztcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IGF1dG9Gb2N1cyB9ID0gZGF0YS5zZXR0aW5ncztcclxuICAgICAgICB0aGlzLmlucHV0Q2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5iciA9IG5ldyBTZWxlY3RvckVsZW1lbnQodHJ1ZSwgYXV0b0ZvY3VzKTtcclxuICAgICAgICB0aGlzLnQgPSBuZXcgU2VsZWN0b3JFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5sID0gbmV3IFNlbGVjdG9yRWxlbWVudCgpO1xyXG4gICAgICAgIHRoaXMudGwgPSBuZXcgU2VsZWN0b3JFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5ici5pbnB1dENoYW5nZSA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRDaGFuZ2Uodik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmJyLmVsLnNob3coKTtcclxuICAgICAgICB0aGlzLm9mZnNldCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluZGV4ZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1zZWxlY3RvcnNgKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4odGhpcy50bC5lbCwgdGhpcy50LmVsLCB0aGlzLmwuZWwsIHRoaXMuYnIuZWwpXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgLy8gZm9yIHBlcmZvcm1hbmNlXHJcbiAgICAgICAgdGhpcy5sYXN0cmkgPSAtMTtcclxuICAgICAgICB0aGlzLmxhc3RjaSA9IC0xO1xyXG4gICAgICAgIHN0YXJ0WkluZGV4ICs9IDE7XHJcbiAgICB9XHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IGRhdGEuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgdGhpcy5yZXNldEFyZWFPZmZzZXQoKTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICByZXNldE9mZnNldCgpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIHRsLCB0LCBsLCBiciB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBmcmVlemVIZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc3QgZnJlZXplV2lkdGggPSBkYXRhLmZyZWV6ZVRvdGFsV2lkdGgoKTtcclxuICAgICAgICBpZiAoZnJlZXplSGVpZ2h0ID4gMCB8fCBmcmVlemVXaWR0aCA+IDApIHtcclxuICAgICAgICAgICAgdGwuc2V0T2Zmc2V0KHsgd2lkdGg6IGZyZWV6ZVdpZHRoLCBoZWlnaHQ6IGZyZWV6ZUhlaWdodCB9KTtcclxuICAgICAgICAgICAgdC5zZXRPZmZzZXQoeyBsZWZ0OiBmcmVlemVXaWR0aCwgaGVpZ2h0OiBmcmVlemVIZWlnaHQgfSk7XHJcbiAgICAgICAgICAgIGwuc2V0T2Zmc2V0KHsgdG9wOiBmcmVlemVIZWlnaHQsIHdpZHRoOiBmcmVlemVXaWR0aCB9KTtcclxuICAgICAgICAgICAgYnIuc2V0T2Zmc2V0KHsgbGVmdDogZnJlZXplV2lkdGgsIHRvcDogZnJlZXplSGVpZ2h0IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGwuaGlkZSgpO1xyXG4gICAgICAgICAgICB0LmhpZGUoKTtcclxuICAgICAgICAgICAgbC5oaWRlKCk7XHJcbiAgICAgICAgICAgIGJyLnNldE9mZnNldCh7IGxlZnQ6IDAsIHRvcDogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNldEFyZWFPZmZzZXQoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29mZnNldDonLCBvZmZzZXQpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZGF0YS5nZXRTZWxlY3RlZFJlY3QoKTtcclxuICAgICAgICBjb25zdCBjb2Zmc2V0ID0gdGhpcy5kYXRhLmdldENsaXBib2FyZFJlY3QoKTtcclxuICAgICAgICBzZXRBbGxBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgICAgICBzZXRBbGxDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBjb2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnJlc2V0T2Zmc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldEJSVEFyZWFPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5kYXRhLmdldFNlbGVjdGVkUmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGNvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0Q2xpcGJvYXJkUmVjdCgpO1xyXG4gICAgICAgIHNldEJSQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICAgICAgc2V0VEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgICAgIHNldEJSQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgY29mZnNldCk7XHJcbiAgICAgICAgc2V0VENsaXBib2FyZE9mZnNldC5jYWxsKHRoaXMsIGNvZmZzZXQpO1xyXG4gICAgICAgIHRoaXMucmVzZXRPZmZzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0QlJMQXJlYU9mZnNldCgpIHtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgY29mZnNldCA9IHRoaXMuZGF0YS5nZXRDbGlwYm9hcmRSZWN0KCk7XHJcbiAgICAgICAgc2V0QlJBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgICAgICBzZXRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICAgICAgc2V0QlJDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBjb2Zmc2V0KTtcclxuICAgICAgICBzZXRMQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgY29mZnNldCk7XHJcbiAgICAgICAgdGhpcy5yZXNldE9mZnNldCgpO1xyXG4gICAgfVxyXG4gICAgc2V0KHJpLCBjaSwgaW5kZXhlc1VwZGF0ZWQgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGNlbGxSYW5nZSA9IGRhdGEuY2FsU2VsZWN0ZWRSYW5nZUJ5U3RhcnQocmksIGNpKTtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgaWYgKGluZGV4ZXNVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgIGxldCBbY3JpLCBjY2ldID0gW3JpLCBjaV07XHJcbiAgICAgICAgICAgIGlmIChyaSA8IDApXHJcbiAgICAgICAgICAgICAgICBjcmkgPSAwO1xyXG4gICAgICAgICAgICBpZiAoY2kgPCAwKVxyXG4gICAgICAgICAgICAgICAgY2NpID0gMDtcclxuICAgICAgICAgICAgZGF0YS5zZWxlY3Rvci5zZXRJbmRleGVzKGNyaSwgY2NpKTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleGVzID0gW2NyaSwgY2NpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb3ZlSW5kZXhlcyA9IFtzcmksIHNjaV07XHJcbiAgICAgICAgLy8gdGhpcy5zSW5kZXhlcyA9IHNJbmRleGVzO1xyXG4gICAgICAgIC8vIHRoaXMuZUluZGV4ZXMgPSBlSW5kZXhlcztcclxuICAgICAgICB0aGlzLnJhbmdlID0gY2VsbFJhbmdlO1xyXG4gICAgICAgIHRoaXMucmVzZXRBcmVhT2Zmc2V0KCk7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBzZXRFbmQocmksIGNpLCBtb3ZpbmcgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBsYXN0cmksIGxhc3RjaSB9ID0gdGhpcztcclxuICAgICAgICBpZiAobW92aW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChyaSA9PT0gbGFzdHJpICYmIGNpID09PSBsYXN0Y2kpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMubGFzdHJpID0gcmk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdGNpID0gY2k7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBkYXRhLmNhbFNlbGVjdGVkUmFuZ2VCeUVuZChyaSwgY2kpO1xyXG4gICAgICAgIHNldEFsbEFyZWFPZmZzZXQuY2FsbCh0aGlzLCB0aGlzLmRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCkpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJzo6OjonLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHsgZXJpLCBlY2kgfSA9IHRoaXMuZGF0YS5zZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICB0aGlzLnNldEVuZChlcmksIGVjaSk7XHJcbiAgICB9XHJcbiAgICBzaG93QXV0b2ZpbGwocmksIGNpKSB7XHJcbiAgICAgICAgaWYgKHJpID09PSAtMSAmJiBjaSA9PT0gLTEpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksICcsIGNpOicsIGNpKTtcclxuICAgICAgICAvLyBjb25zdCBbc3JpLCBzY2ldID0gdGhpcy5zSW5kZXhlcztcclxuICAgICAgICAvLyBjb25zdCBbZXJpLCBlY2ldID0gdGhpcy5lSW5kZXhlcztcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcy5yYW5nZTtcclxuICAgICAgICBjb25zdCBbbnJpLCBuY2ldID0gW3JpLCBjaV07XHJcbiAgICAgICAgLy8gY29uc3Qgcm4gPSBlcmkgLSBzcmk7XHJcbiAgICAgICAgLy8gY29uc3QgY24gPSBlY2kgLSBzY2k7XHJcbiAgICAgICAgY29uc3Qgc3JuID0gc3JpIC0gcmk7XHJcbiAgICAgICAgY29uc3Qgc2NuID0gc2NpIC0gY2k7XHJcbiAgICAgICAgY29uc3QgZXJuID0gZXJpIC0gcmk7XHJcbiAgICAgICAgY29uc3QgZWNuID0gZWNpIC0gY2k7XHJcbiAgICAgICAgaWYgKHNjbiA+IDApIHtcclxuICAgICAgICAgICAgLy8gbGVmdFxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGVmdCcpO1xyXG4gICAgICAgICAgICB0aGlzLmFyYW5nZSA9IG5ldyBDZWxsUmFuZ2Uoc3JpLCBuY2ksIGVyaSwgc2NpIC0gMSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2FJbmRleGVzID0gW3NyaSwgbmNpXTtcclxuICAgICAgICAgICAgLy8gdGhpcy5lYUluZGV4ZXMgPSBbZXJpLCBzY2kgLSAxXTtcclxuICAgICAgICAgICAgLy8gZGF0YS5jYWxSYW5nZUluZGV4ZXMyKFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzcm4gPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIHRvcFxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndG9wJyk7XHJcbiAgICAgICAgICAgIC8vIG5yaSA9IHNyaTtcclxuICAgICAgICAgICAgdGhpcy5hcmFuZ2UgPSBuZXcgQ2VsbFJhbmdlKG5yaSwgc2NpLCBzcmkgLSAxLCBlY2kpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNhSW5kZXhlcyA9IFtucmksIHNjaV07XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZWFJbmRleGVzID0gW3NyaSAtIDEsIGVjaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVjbiA8IDApIHtcclxuICAgICAgICAgICAgLy8gcmlnaHRcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgIC8vIG5jaSA9IGVjaTtcclxuICAgICAgICAgICAgdGhpcy5hcmFuZ2UgPSBuZXcgQ2VsbFJhbmdlKHNyaSwgZWNpICsgMSwgZXJpLCBuY2kpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNhSW5kZXhlcyA9IFtzcmksIGVjaSArIDFdO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmVhSW5kZXhlcyA9IFtlcmksIG5jaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVybiA8IDApIHtcclxuICAgICAgICAgICAgLy8gYm90dG9tXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdib3R0b20nKTtcclxuICAgICAgICAgICAgLy8gbnJpID0gZXJpO1xyXG4gICAgICAgICAgICB0aGlzLmFyYW5nZSA9IG5ldyBDZWxsUmFuZ2UoZXJpICsgMSwgc2NpLCBucmksIGVjaSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2FJbmRleGVzID0gW2VyaSArIDEsIHNjaV07XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZWFJbmRleGVzID0gW25yaSwgZWNpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdlbHNlOicpO1xyXG4gICAgICAgICAgICB0aGlzLmFyYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2FJbmRleGVzID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gdGhpcy5lYUluZGV4ZXMgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFyYW5nZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNhSW5kZXhlcywgJzonLCB0aGlzLmVhSW5kZXhlcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZGF0YS5nZXRSZWN0KHRoaXMuYXJhbmdlKTtcclxuICAgICAgICAgICAgb2Zmc2V0LndpZHRoICs9IDI7XHJcbiAgICAgICAgICAgIG9mZnNldC5oZWlnaHQgKz0gMjtcclxuICAgICAgICAgICAgY29uc3QgeyBiciwgbCwgdCwgdGwgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGJyLnNob3dBdXRvZmlsbChjYWxCUkFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxuICAgICAgICAgICAgbC5zaG93QXV0b2ZpbGwoY2FsTEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxuICAgICAgICAgICAgdC5zaG93QXV0b2ZpbGwoY2FsVEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxuICAgICAgICAgICAgdGwuc2hvd0F1dG9maWxsKG9mZnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlkZUF1dG9maWxsKCkge1xyXG4gICAgICAgIFsnYnInLCAnbCcsICd0JywgJ3RsJ10uZm9yRWFjaCgocHJvcGVydHkpID0+IHtcclxuICAgICAgICAgICAgdGhpc1twcm9wZXJ0eV0uaGlkZUF1dG9maWxsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93Q2xpcGJvYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGNvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0Q2xpcGJvYXJkUmVjdCgpO1xyXG4gICAgICAgIHNldEFsbENsaXBib2FyZE9mZnNldC5jYWxsKHRoaXMsIGNvZmZzZXQpO1xyXG4gICAgICAgIFsnYnInLCAnbCcsICd0JywgJ3RsJ10uZm9yRWFjaCgocHJvcGVydHkpID0+IHtcclxuICAgICAgICAgICAgdGhpc1twcm9wZXJ0eV0uc2hvd0NsaXBib2FyZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaGlkZUNsaXBib2FyZCgpIHtcclxuICAgICAgICBbJ2JyJywgJ2wnLCAndCcsICd0bCddLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXNbcHJvcGVydHldLmhpZGVDbGlwYm9hcmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgd2luZG93ICovXHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kLCBtb3VzZU1vdmVVcCwgYmluZFRvdWNoLCBjcmVhdGVFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IFJlc2l6ZXIgZnJvbSAnLi9yZXNpemVyJztcclxuaW1wb3J0IFNjcm9sbGJhciBmcm9tICcuL3Njcm9sbGJhcic7XHJcbmltcG9ydCBTZWxlY3RvciBmcm9tICcuL3NlbGVjdG9yJztcclxuaW1wb3J0IEVkaXRvciBmcm9tICcuL2VkaXRvcic7XHJcbmltcG9ydCBQcmludCBmcm9tICcuL3ByaW50JztcclxuaW1wb3J0IENvbnRleHRNZW51IGZyb20gJy4vY29udGV4dG1lbnUnO1xyXG5pbXBvcnQgVGFibGUgZnJvbSAnLi90YWJsZSc7XHJcbmltcG9ydCBUb29sYmFyIGZyb20gJy4vdG9vbGJhci9pbmRleCc7XHJcbmltcG9ydCBNb2RhbFZhbGlkYXRpb24gZnJvbSAnLi9tb2RhbF92YWxpZGF0aW9uJztcclxuaW1wb3J0IFNvcnRGaWx0ZXIgZnJvbSAnLi9zb3J0X2ZpbHRlcic7XHJcbmltcG9ydCB7IHh0b2FzdCB9IGZyb20gJy4vbWVzc2FnZSc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IGZvcm11bGFzIH0gZnJvbSAnLi4vY29yZS9mb3JtdWxhJztcclxuLyoqXHJcbiAqIEBkZXNjIHRocm90dGxlIGZuXHJcbiAqIEBwYXJhbSBmdW5jIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB3YWl0IERlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG4gKi9cclxuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCkge1xyXG4gICAgbGV0IHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gKC4uLmFyZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBhcmc7XHJcbiAgICAgICAgaWYgKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZnVuYy5hcHBseSh0aGF0LCBhcmdzKTtcclxuICAgICAgICAgICAgfSwgd2FpdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzY3JvbGxiYXJNb3ZlKCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCB2ZXJ0aWNhbFNjcm9sbGJhciwgaG9yaXpvbnRhbFNjcm9sbGJhciB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgbCwgdCwgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSBkYXRhLmdldFNlbGVjdGVkUmVjdCgpO1xyXG4gICAgY29uc3QgdGFibGVPZmZzZXQgPSB0aGlzLmdldFRhYmxlT2Zmc2V0KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnLGw6JywgbCwgJywgbGVmdDonLCBsZWZ0LCAnLCB0T2Zmc2V0LmxlZnQ6JywgdGFibGVPZmZzZXQud2lkdGgpO1xyXG4gICAgaWYgKE1hdGguYWJzKGxlZnQpICsgd2lkdGggPiB0YWJsZU9mZnNldC53aWR0aCkge1xyXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxiYXIubW92ZSh7IGxlZnQ6IGwgKyB3aWR0aCAtIHRhYmxlT2Zmc2V0LndpZHRoIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZnN3ID0gZGF0YS5mcmVlemVUb3RhbFdpZHRoKCk7XHJcbiAgICAgICAgaWYgKGxlZnQgPCBmc3cpIHtcclxuICAgICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhci5tb3ZlKHsgbGVmdDogbCAtIDEgLSBmc3cgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ3RvcDonLCB0b3AsICcsIGhlaWdodDonLCBoZWlnaHQsICcsIHRvZi5oZWlnaHQ6JywgdGFibGVPZmZzZXQuaGVpZ2h0KTtcclxuICAgIGlmIChNYXRoLmFicyh0b3ApICsgaGVpZ2h0ID4gdGFibGVPZmZzZXQuaGVpZ2h0KSB7XHJcbiAgICAgICAgdmVydGljYWxTY3JvbGxiYXIubW92ZSh7IHRvcDogdCArIGhlaWdodCAtIHRhYmxlT2Zmc2V0LmhlaWdodCAtIDEgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBmc2ggPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKHRvcCA8IGZzaCkge1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhci5tb3ZlKHsgdG9wOiB0IC0gMSAtIGZzaCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2VsZWN0b3JTZXQobXVsdGlwbGUsIHJpLCBjaSwgaW5kZXhlc1VwZGF0ZWQgPSB0cnVlLCBtb3ZpbmcgPSBmYWxzZSkge1xyXG4gICAgaWYgKHJpID09PSAtMSAmJiBjaSA9PT0gLTEpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgY29uc3QgeyB0YWJsZSwgc2VsZWN0b3IsIHRvb2xiYXIsIGRhdGEsIGNvbnRleHRNZW51IH0gPSB0aGlzO1xyXG4gICAgY29uc3QgY2VsbCA9IGRhdGEuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgc2VsZWN0b3Iuc2V0RW5kKHJpLCBjaSwgbW92aW5nKTtcclxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NlbGxzLXNlbGVjdGVkJywgY2VsbCwgc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gdHJpZ2dlciBjbGljayBldmVudFxyXG4gICAgICAgIHNlbGVjdG9yLnNldChyaSwgY2ksIGluZGV4ZXNVcGRhdGVkKTtcclxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NlbGwtc2VsZWN0ZWQnLCBjZWxsLCByaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgY29udGV4dE1lbnUuc2V0TW9kZShyaSA9PT0gLTEgfHwgY2kgPT09IC0xID8gJ3Jvdy1jb2wnIDogJ3JhbmdlJyk7XHJcbiAgICB0b29sYmFyLnJlc2V0KCk7XHJcbiAgICB0YWJsZS5yZW5kZXIoKTtcclxufVxyXG4vLyBtdWx0aXBsZTogYm9vbGVhblxyXG4vLyBkaXJlY3Rpb246IGxlZnQgfCByaWdodCB8IHVwIHwgZG93biB8IHJvdy1maXJzdCB8IHJvdy1sYXN0IHwgY29sLWZpcnN0IHwgY29sLWxhc3RcclxuZnVuY3Rpb24gc2VsZWN0b3JNb3ZlKG11bHRpcGxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IHsgc2VsZWN0b3IsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IGRhdGE7XHJcbiAgICBsZXQgW3JpLCBjaV0gPSBzZWxlY3Rvci5pbmRleGVzO1xyXG4gICAgY29uc3QgeyBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICBbcmksIGNpXSA9IHNlbGVjdG9yLm1vdmVJbmRleGVzO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdG9yLm1vdmU6JywgcmksIGNpKTtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgIGlmIChjaSA+IDApXHJcbiAgICAgICAgICAgIGNpIC09IDE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICBpZiAoZWNpICE9PSBjaSlcclxuICAgICAgICAgICAgY2kgPSBlY2k7XHJcbiAgICAgICAgaWYgKGNpIDwgY29scy5sZW4gLSAxKVxyXG4gICAgICAgICAgICBjaSArPSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAndXAnKSB7XHJcbiAgICAgICAgaWYgKHJpID4gMClcclxuICAgICAgICAgICAgcmkgLT0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgaWYgKGVyaSAhPT0gcmkpXHJcbiAgICAgICAgICAgIHJpID0gZXJpO1xyXG4gICAgICAgIGlmIChyaSA8IHJvd3MubGVuIC0gMSlcclxuICAgICAgICAgICAgcmkgKz0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3Jvdy1maXJzdCcpIHtcclxuICAgICAgICBjaSA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyb3ctbGFzdCcpIHtcclxuICAgICAgICBjaSA9IGNvbHMubGVuIC0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2NvbC1maXJzdCcpIHtcclxuICAgICAgICByaSA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdjb2wtbGFzdCcpIHtcclxuICAgICAgICByaSA9IHJvd3MubGVuIC0gMTtcclxuICAgIH1cclxuICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdG9yLm1vdmVJbmRleGVzID0gW3JpLCBjaV07XHJcbiAgICB9XHJcbiAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIG11bHRpcGxlLCByaSwgY2kpO1xyXG4gICAgc2Nyb2xsYmFyTW92ZS5jYWxsKHRoaXMpO1xyXG59XHJcbi8vIHByaXZhdGUgbWV0aG9kc1xyXG5mdW5jdGlvbiBvdmVybGF5ZXJNb3VzZW1vdmUoZXZ0KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygneDonLCBldnQub2Zmc2V0WCwgJywgeTonLCBldnQub2Zmc2V0WSk7XHJcbiAgICBpZiAoZXZ0LmJ1dHRvbnMgIT09IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NOYW1lID09PSBgJHtjc3NQcmVmaXh9LXJlc2l6ZXItaG92ZXJgKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IHsgb2Zmc2V0WCwgb2Zmc2V0WSB9ID0gZXZ0O1xyXG4gICAgY29uc3QgeyByb3dSZXNpemVyLCBjb2xSZXNpemVyLCB0YWJsZUVsLCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBkYXRhO1xyXG4gICAgaWYgKG9mZnNldFggPiBjb2xzLmluZGV4V2lkdGggJiYgb2Zmc2V0WSA+IHJvd3MuaGVpZ2h0KSB7XHJcbiAgICAgICAgcm93UmVzaXplci5oaWRlKCk7XHJcbiAgICAgICAgY29sUmVzaXplci5oaWRlKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdFJlY3QgPSB0YWJsZUVsLmJveCgpO1xyXG4gICAgY29uc3QgY1JlY3QgPSBkYXRhLmdldENlbGxSZWN0QnlYWShldnQub2Zmc2V0WCwgZXZ0Lm9mZnNldFkpO1xyXG4gICAgaWYgKGNSZWN0LnJpID49IDAgJiYgY1JlY3QuY2kgPT09IC0xKSB7XHJcbiAgICAgICAgY1JlY3Qud2lkdGggPSBjb2xzLmluZGV4V2lkdGg7XHJcbiAgICAgICAgcm93UmVzaXplci5zaG93KGNSZWN0LCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0UmVjdC53aWR0aCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocm93cy5pc0hpZGUoY1JlY3QucmkgLSAxKSkge1xyXG4gICAgICAgICAgICByb3dSZXNpemVyLnNob3dVbmhpZGUoY1JlY3QucmkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcm93UmVzaXplci5oaWRlVW5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcm93UmVzaXplci5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY1JlY3QucmkgPT09IC0xICYmIGNSZWN0LmNpID49IDApIHtcclxuICAgICAgICBjUmVjdC5oZWlnaHQgPSByb3dzLmhlaWdodDtcclxuICAgICAgICBjb2xSZXNpemVyLnNob3coY1JlY3QsIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiB0UmVjdC5oZWlnaHQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGNvbHMuaXNIaWRlKGNSZWN0LmNpIC0gMSkpIHtcclxuICAgICAgICAgICAgY29sUmVzaXplci5zaG93VW5oaWRlKGNSZWN0LmNpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbFJlc2l6ZXIuaGlkZVVuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbFJlc2l6ZXIuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcbi8vIGxldCBzY3JvbGxUaHJlc2hvbGQgPSAxNTtcclxuZnVuY3Rpb24gb3ZlcmxheWVyTW91c2VzY3JvbGwoZXZ0KSB7XHJcbiAgICAvLyBzY3JvbGxUaHJlc2hvbGQgLT0gMTtcclxuICAgIC8vIGlmIChzY3JvbGxUaHJlc2hvbGQgPiAwKSByZXR1cm47XHJcbiAgICAvLyBzY3JvbGxUaHJlc2hvbGQgPSAxNTtcclxuICAgIGNvbnN0IHsgdmVydGljYWxTY3JvbGxiYXIsIGhvcml6b250YWxTY3JvbGxiYXIsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHRvcCB9ID0gdmVydGljYWxTY3JvbGxiYXIuc2Nyb2xsKCk7XHJcbiAgICBjb25zdCB7IGxlZnQgfSA9IGhvcml6b250YWxTY3JvbGxiYXIuc2Nyb2xsKCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZXZ0Ojo6JywgZXZ0LndoZWVsRGVsdGEsIGV2dC5kZXRhaWwgKiA0MCk7XHJcbiAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IGRhdGE7XHJcbiAgICAvLyBkZWx0YVkgZm9yIHZlcnRpY2FsIGRlbHRhXHJcbiAgICBjb25zdCB7IGRlbHRhWSwgZGVsdGFYIH0gPSBldnQ7XHJcbiAgICBjb25zdCBsb29wVmFsdWUgPSAoaWksIHZGdW5jKSA9PiB7XHJcbiAgICAgICAgbGV0IGkgPSBpaTtcclxuICAgICAgICBsZXQgdiA9IDA7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2ID0gdkZ1bmMoaSk7XHJcbiAgICAgICAgICAgIGkgKz0gMTtcclxuICAgICAgICB9IHdoaWxlICh2IDw9IDApO1xyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdkZWx0YVgnLCBkZWx0YVgsICdldnQuZGV0YWlsJywgZXZ0LmRldGFpbCk7XHJcbiAgICAvLyBpZiAoZXZ0LmRldGFpbCkgZGVsdGFZID0gZXZ0LmRldGFpbCAqIDQwO1xyXG4gICAgY29uc3QgbW92ZVkgPSAodmVydGljYWwpID0+IHtcclxuICAgICAgICBpZiAodmVydGljYWwgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIHVwXHJcbiAgICAgICAgICAgIGNvbnN0IHJpID0gZGF0YS5zY3JvbGwucmkgKyAxO1xyXG4gICAgICAgICAgICBpZiAocmkgPCByb3dzLmxlbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmggPSBsb29wVmFsdWUocmksIChpKSA9PiByb3dzLmdldEhlaWdodChpKSk7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhci5tb3ZlKHsgdG9wOiB0b3AgKyByaCAtIDEgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGRvd25cclxuICAgICAgICAgICAgY29uc3QgcmkgPSBkYXRhLnNjcm9sbC5yaSAtIDE7XHJcbiAgICAgICAgICAgIGlmIChyaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaCA9IGxvb3BWYWx1ZShyaSwgKGkpID0+IHJvd3MuZ2V0SGVpZ2h0KGkpKTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmUoeyB0b3A6IHJpID09PSAwID8gMCA6IHRvcCAtIHJoIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGRlbHRhWCBmb3IgTWFjIGhvcml6b250YWwgc2Nyb2xsXHJcbiAgICBjb25zdCBtb3ZlWCA9IChob3Jpem9udGFsKSA9PiB7XHJcbiAgICAgICAgaWYgKGhvcml6b250YWwgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGxlZnRcclxuICAgICAgICAgICAgY29uc3QgY2kgPSBkYXRhLnNjcm9sbC5jaSArIDE7XHJcbiAgICAgICAgICAgIGlmIChjaSA8IGNvbHMubGVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdyA9IGxvb3BWYWx1ZShjaSwgKGkpID0+IGNvbHMuZ2V0V2lkdGgoaSkpO1xyXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhci5tb3ZlKHsgbGVmdDogbGVmdCArIGN3IC0gMSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmlnaHRcclxuICAgICAgICAgICAgY29uc3QgY2kgPSBkYXRhLnNjcm9sbC5jaSAtIDE7XHJcbiAgICAgICAgICAgIGlmIChjaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdyA9IGxvb3BWYWx1ZShjaSwgKGkpID0+IGNvbHMuZ2V0V2lkdGgoaSkpO1xyXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhci5tb3ZlKHsgbGVmdDogY2kgPT09IDAgPyAwIDogbGVmdCAtIGN3IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHRlbXBZID0gTWF0aC5hYnMoZGVsdGFZKTtcclxuICAgIGNvbnN0IHRlbXBYID0gTWF0aC5hYnMoZGVsdGFYKTtcclxuICAgIGNvbnN0IHRlbXAgPSBNYXRoLm1heCh0ZW1wWSwgdGVtcFgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2V2ZW50OicsIGV2dCk7XHJcbiAgICAvLyBkZXRhaWwgZm9yIHdpbmRvd3MvbWFjIGZpcmVmb3ggdmVydGljYWwgc2Nyb2xsXHJcbiAgICBpZiAoL0ZpcmVmb3gvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSlcclxuICAgICAgICB0aHJvdHRsZShtb3ZlWShldnQuZGV0YWlsKSwgNTApO1xyXG4gICAgaWYgKHRlbXAgPT09IHRlbXBYKVxyXG4gICAgICAgIHRocm90dGxlKG1vdmVYKGRlbHRhWCksIDUwKTtcclxuICAgIGlmICh0ZW1wID09PSB0ZW1wWSlcclxuICAgICAgICB0aHJvdHRsZShtb3ZlWShkZWx0YVkpLCA1MCk7XHJcbn1cclxuZnVuY3Rpb24gb3ZlcmxheWVyVG91Y2goZGlyZWN0aW9uLCBkaXN0YW5jZSkge1xyXG4gICAgY29uc3QgeyB2ZXJ0aWNhbFNjcm9sbGJhciwgaG9yaXpvbnRhbFNjcm9sbGJhciB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgdG9wIH0gPSB2ZXJ0aWNhbFNjcm9sbGJhci5zY3JvbGwoKTtcclxuICAgIGNvbnN0IHsgbGVmdCB9ID0gaG9yaXpvbnRhbFNjcm9sbGJhci5zY3JvbGwoKTtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICBob3Jpem9udGFsU2Nyb2xsYmFyLm1vdmUoeyBsZWZ0OiBsZWZ0IC0gZGlzdGFuY2UgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICd1cCcgfHwgZGlyZWN0aW9uID09PSAnZG93bicpIHtcclxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhci5tb3ZlKHsgdG9wOiB0b3AgLSBkaXN0YW5jZSB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2ZXJ0aWNhbFNjcm9sbGJhclNldCgpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgdmVydGljYWxTY3JvbGxiYXIgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGhlaWdodCB9ID0gdGhpcy5nZXRUYWJsZU9mZnNldCgpO1xyXG4gICAgY29uc3QgZXJ0aCA9IGRhdGEuZXhjZXB0Um93VG90YWxIZWlnaHQoMCwgLTEpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2VydGg6JywgZXJ0aCk7XHJcbiAgICB2ZXJ0aWNhbFNjcm9sbGJhci5zZXQoaGVpZ2h0LCBkYXRhLnJvd3MudG90YWxIZWlnaHQoKSAtIGVydGgpO1xyXG59XHJcbmZ1bmN0aW9uIGhvcml6b250YWxTY3JvbGxiYXJTZXQoKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGhvcml6b250YWxTY3JvbGxiYXIgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHdpZHRoIH0gPSB0aGlzLmdldFRhYmxlT2Zmc2V0KCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxiYXIuc2V0KHdpZHRoLCBkYXRhLmNvbHMudG90YWxXaWR0aCgpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzaGVldEZyZWV6ZSgpIHtcclxuICAgIGNvbnN0IHsgc2VsZWN0b3IsIGRhdGEsIGVkaXRvciB9ID0gdGhpcztcclxuICAgIGNvbnN0IFtyaSwgY2ldID0gZGF0YS5mcmVlemU7XHJcbiAgICBpZiAocmkgPiAwIHx8IGNpID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGZ3aWR0aCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IGZoZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgZWRpdG9yLnNldEZyZWV6ZUxlbmd0aHMoZndpZHRoLCBmaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIHNlbGVjdG9yLnJlc2V0QXJlYU9mZnNldCgpO1xyXG59XHJcbmZ1bmN0aW9uIHNoZWV0UmVzZXQoKSB7XHJcbiAgICBjb25zdCB7IHRhYmxlRWwsIG92ZXJsYXllckVsLCBvdmVybGF5ZXJDRWwsIHRhYmxlLCB0b29sYmFyLCBzZWxlY3RvciwgZWwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB0T2Zmc2V0ID0gdGhpcy5nZXRUYWJsZU9mZnNldCgpO1xyXG4gICAgY29uc3QgdlJlY3QgPSB0aGlzLmdldFJlY3QoKTtcclxuICAgIHRhYmxlRWwuYXR0cih2UmVjdCk7XHJcbiAgICBvdmVybGF5ZXJFbC5vZmZzZXQodlJlY3QpO1xyXG4gICAgb3ZlcmxheWVyQ0VsLm9mZnNldCh0T2Zmc2V0KTtcclxuICAgIGVsLmNzcygnd2lkdGgnLCBgJHt2UmVjdC53aWR0aH1weGApO1xyXG4gICAgdmVydGljYWxTY3JvbGxiYXJTZXQuY2FsbCh0aGlzKTtcclxuICAgIGhvcml6b250YWxTY3JvbGxiYXJTZXQuY2FsbCh0aGlzKTtcclxuICAgIHNoZWV0RnJlZXplLmNhbGwodGhpcyk7XHJcbiAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIHRvb2xiYXIucmVzZXQoKTtcclxuICAgIHNlbGVjdG9yLnJlc2V0KCk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJDbGlwYm9hcmQoKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgZGF0YS5jbGVhckNsaXBib2FyZCgpO1xyXG4gICAgc2VsZWN0b3IuaGlkZUNsaXBib2FyZCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNvcHkoZXZ0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgaWYgKGRhdGEuc2V0dGluZ3MubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGRhdGEuY29weSgpO1xyXG4gICAgZGF0YS5jb3B5VG9TeXN0ZW1DbGlwYm9hcmQoZXZ0KTtcclxuICAgIHNlbGVjdG9yLnNob3dDbGlwYm9hcmQoKTtcclxufVxyXG5mdW5jdGlvbiBjdXQoKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgaWYgKGRhdGEuc2V0dGluZ3MubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGRhdGEuY3V0KCk7XHJcbiAgICBzZWxlY3Rvci5zaG93Q2xpcGJvYXJkKCk7XHJcbn1cclxuZnVuY3Rpb24gcGFzdGUod2hhdCwgZXZ0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBpZiAoZGF0YS5zZXR0aW5ncy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKGRhdGEuY2xpcGJvYXJkLmlzQ2xlYXIoKSkge1xyXG4gICAgICAgIGNvbnN0IHJlc2V0U2hlZXQgPSAoKSA9PiBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgY29uc3QgZXZlbnRUcmlnZ2VyID0gKHJvd3MpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdwYXN0ZWQtY2xpcGJvYXJkJywgcm93cyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBwYXN0RnJvbVN5c3RlbUNsaXBib2FyZCBpcyBhc3luYyBvcGVyYXRpb24sIG5lZWQgdG8gdGVsbCBpdCBob3cgdG8gcmVzZXQgc2hlZXQgYW5kIHRyaWdnZXIgZXZlbnQgYWZ0ZXIgaXQgZmluaXNoZXNcclxuICAgICAgICAvLyBwYXN0aW5nIGNvbnRlbnQgZnJvbSBzeXN0ZW0gY2xpcGJvYXJkXHJcbiAgICAgICAgZGF0YS5wYXN0ZUZyb21TeXN0ZW1DbGlwYm9hcmQocmVzZXRTaGVldCwgZXZlbnRUcmlnZ2VyKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRhdGEucGFzdGUod2hhdCwgKG1zZykgPT4geHRvYXN0KCdUaXAnLCBtc2cpKSkge1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGV2dCkge1xyXG4gICAgICAgIGNvbnN0IGNkYXRhID0gZXZ0LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xyXG4gICAgICAgIHRoaXMuZGF0YS5wYXN0ZUZyb21UZXh0KGNkYXRhKTtcclxuICAgICAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaGlkZVJvd3NPckNvbHMoKSB7XHJcbiAgICB0aGlzLmRhdGEuaGlkZVJvd3NPckNvbHMoKTtcclxuICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxufVxyXG5mdW5jdGlvbiB1bmhpZGVSb3dzT3JDb2xzKHR5cGUsIGluZGV4KSB7XHJcbiAgICB0aGlzLmRhdGEudW5oaWRlUm93c09yQ29scyh0eXBlLCBpbmRleCk7XHJcbiAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gYXV0b2ZpbHRlcigpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgIGRhdGEuYXV0b2ZpbHRlcigpO1xyXG4gICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIHRvb2xiYXJDaGFuZ2VQYWludGZvcm1hdFBhc3RlKCkge1xyXG4gICAgY29uc3QgeyB0b29sYmFyIH0gPSB0aGlzO1xyXG4gICAgaWYgKHRvb2xiYXIucGFpbnRmb3JtYXRBY3RpdmUoKSkge1xyXG4gICAgICAgIHBhc3RlLmNhbGwodGhpcywgJ2Zvcm1hdCcpO1xyXG4gICAgICAgIGNsZWFyQ2xpcGJvYXJkLmNhbGwodGhpcyk7XHJcbiAgICAgICAgdG9vbGJhci5wYWludGZvcm1hdFRvZ2dsZSgpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG92ZXJsYXllck1vdXNlZG93bihldnQpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCc6Ojo6Om92ZXJsYXllci5tb3VzZWRvd246JywgZXZ0LmRldGFpbCwgZXZ0LmJ1dHRvbiwgZXZ0LmJ1dHRvbnMsIGV2dC5zaGlmdEtleSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZXZ0LnRhcmdldC5jbGFzc05hbWU6JywgZXZ0LnRhcmdldC5jbGFzc05hbWUpO1xyXG4gICAgY29uc3QgeyBzZWxlY3RvciwgZGF0YSwgdGFibGUsIHNvcnRGaWx0ZXIgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFkgfSA9IGV2dDtcclxuICAgIGNvbnN0IGlzQXV0b2ZpbGxFbCA9IGV2dC50YXJnZXQuY2xhc3NOYW1lID09PSBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWNvcm5lcmA7XHJcbiAgICBjb25zdCBjZWxsUmVjdCA9IGRhdGEuZ2V0Q2VsbFJlY3RCeVhZKG9mZnNldFgsIG9mZnNldFkpO1xyXG4gICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IGNlbGxSZWN0O1xyXG4gICAgbGV0IHsgcmksIGNpIH0gPSBjZWxsUmVjdDtcclxuICAgIC8vIHNvcnQgb3IgZmlsdGVyXHJcbiAgICBjb25zdCB7IGF1dG9GaWx0ZXIgfSA9IGRhdGE7XHJcbiAgICBpZiAoYXV0b0ZpbHRlci5pbmNsdWRlcyhyaSwgY2kpKSB7XHJcbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCAtIDIwIDwgb2Zmc2V0WCAmJiB0b3AgKyBoZWlnaHQgLSAyMCA8IG9mZnNldFkpIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhdXRvRmlsdGVyLml0ZW1zKGNpLCAociwgYykgPT4gZGF0YS5yb3dzLmdldENlbGwociwgYykpO1xyXG4gICAgICAgICAgICBzb3J0RmlsdGVyLmhpZGUoKTtcclxuICAgICAgICAgICAgc29ydEZpbHRlci5zZXQoY2ksIGl0ZW1zLCBhdXRvRmlsdGVyLmdldEZpbHRlcihjaSksIGF1dG9GaWx0ZXIuZ2V0U29ydChjaSkpO1xyXG4gICAgICAgICAgICBzb3J0RmlsdGVyLnNldE9mZnNldCh7IGxlZnQsIHRvcDogdG9wICsgaGVpZ2h0ICsgMiB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKCdyaTonLCByaSwgJywgY2k6JywgY2kpO1xyXG4gICAgaWYgKCFldnQuc2hpZnRLZXkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0b3JTZXRTdGFydDo6OicpO1xyXG4gICAgICAgIGlmIChpc0F1dG9maWxsRWwpIHtcclxuICAgICAgICAgICAgc2VsZWN0b3Iuc2hvd0F1dG9maWxsKHJpLCBjaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCByaSwgY2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtb3VzZSBtb3ZlIHVwXHJcbiAgICAgICAgbW91c2VNb3ZlVXAod2luZG93LCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbW91c2VNb3ZlVXA6Ojo6Jyk7XHJcbiAgICAgICAgICAgICh7IHJpLCBjaSB9ID0gZGF0YS5nZXRDZWxsUmVjdEJ5WFkoZS5vZmZzZXRYLCBlLm9mZnNldFkpKTtcclxuICAgICAgICAgICAgaWYgKGlzQXV0b2ZpbGxFbCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3Iuc2hvd0F1dG9maWxsKHJpLCBjaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZS5idXR0b25zID09PSAxICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIHRydWUsIHJpLCBjaSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc0F1dG9maWxsRWwgJiYgc2VsZWN0b3IuYXJhbmdlICYmIGRhdGEuc2V0dGluZ3MubW9kZSAhPT0gJ3JlYWQnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5hdXRvZmlsbChzZWxlY3Rvci5hcmFuZ2UsICdhbGwnLCAobXNnKSA9PiB4dG9hc3QoJ1RpcCcsIG1zZykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZWN0b3IuaGlkZUF1dG9maWxsKCk7XHJcbiAgICAgICAgICAgIHRvb2xiYXJDaGFuZ2VQYWludGZvcm1hdFBhc3RlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzQXV0b2ZpbGxFbCAmJiBldnQuYnV0dG9ucyA9PT0gMSkge1xyXG4gICAgICAgIGlmIChldnQuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NoaWZ0S2V5Ojo6OicpO1xyXG4gICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIHRydWUsIHJpLCBjaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVkaXRvclNldE9mZnNldCgpIHtcclxuICAgIGNvbnN0IHsgZWRpdG9yLCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3Qgc09mZnNldCA9IGRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCk7XHJcbiAgICBjb25zdCB0T2Zmc2V0ID0gdGhpcy5nZXRUYWJsZU9mZnNldCgpO1xyXG4gICAgbGV0IHNQb3NpdGlvbiA9ICd0b3AnO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3NPZmZzZXQ6Jywgc09mZnNldCwgJzonLCB0T2Zmc2V0KTtcclxuICAgIGlmIChzT2Zmc2V0LnRvcCA+IHRPZmZzZXQuaGVpZ2h0IC8gMikge1xyXG4gICAgICAgIHNQb3NpdGlvbiA9ICdib3R0b20nO1xyXG4gICAgfVxyXG4gICAgZWRpdG9yLnNldE9mZnNldChzT2Zmc2V0LCBzUG9zaXRpb24pO1xyXG59XHJcbmZ1bmN0aW9uIGVkaXRvclNldCgpIHtcclxuICAgIGNvbnN0IHsgZWRpdG9yLCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgaWYgKGRhdGEuc2V0dGluZ3MubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGVkaXRvclNldE9mZnNldC5jYWxsKHRoaXMpO1xyXG4gICAgZWRpdG9yLnNldENlbGwoZGF0YS5nZXRTZWxlY3RlZENlbGwoKSwgZGF0YS5nZXRTZWxlY3RlZFZhbGlkYXRvcigpKTtcclxuICAgIGNsZWFyQ2xpcGJvYXJkLmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gdmVydGljYWxTY3JvbGxiYXJNb3ZlKGRpc3RhbmNlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIHRhYmxlLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgIGRhdGEuc2Nyb2xseShkaXN0YW5jZSwgKCkgPT4ge1xyXG4gICAgICAgIHNlbGVjdG9yLnJlc2V0QlJMQXJlYU9mZnNldCgpO1xyXG4gICAgICAgIGVkaXRvclNldE9mZnNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRhYmxlLnJlbmRlcigpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaG9yaXpvbnRhbFNjcm9sbGJhck1vdmUoZGlzdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgdGFibGUsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgZGF0YS5zY3JvbGx4KGRpc3RhbmNlLCAoKSA9PiB7XHJcbiAgICAgICAgc2VsZWN0b3IucmVzZXRCUlRBcmVhT2Zmc2V0KCk7XHJcbiAgICAgICAgZWRpdG9yU2V0T2Zmc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiByb3dSZXNpemVyRmluaXNoZWQoY1JlY3QsIGRpc3RhbmNlKSB7XHJcbiAgICBjb25zdCB7IHJpIH0gPSBjUmVjdDtcclxuICAgIGNvbnN0IHsgdGFibGUsIHNlbGVjdG9yLCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBzcmksIGVyaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICBpZiAocmkgPj0gc3JpICYmIHJpIDw9IGVyaSkge1xyXG4gICAgICAgIGZvciAobGV0IHJvdyA9IHNyaTsgcm93IDw9IGVyaTsgcm93ICs9IDEpIHtcclxuICAgICAgICAgICAgZGF0YS5yb3dzLnNldEhlaWdodChyb3csIGRpc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBkYXRhLnJvd3Muc2V0SGVpZ2h0KHJpLCBkaXN0YW5jZSk7XHJcbiAgICB9XHJcbiAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIHNlbGVjdG9yLnJlc2V0QXJlYU9mZnNldCgpO1xyXG4gICAgdmVydGljYWxTY3JvbGxiYXJTZXQuY2FsbCh0aGlzKTtcclxuICAgIGVkaXRvclNldE9mZnNldC5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbFJlc2l6ZXJGaW5pc2hlZChjUmVjdCwgZGlzdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgY2kgfSA9IGNSZWN0O1xyXG4gICAgY29uc3QgeyB0YWJsZSwgc2VsZWN0b3IsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHNjaSwgZWNpIH0gPSBzZWxlY3Rvci5yYW5nZTtcclxuICAgIGlmIChjaSA+PSBzY2kgJiYgY2kgPD0gZWNpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgY29sID0gc2NpOyBjb2wgPD0gZWNpOyBjb2wgKz0gMSkge1xyXG4gICAgICAgICAgICBkYXRhLmNvbHMuc2V0V2lkdGgoY29sLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZGF0YS5jb2xzLnNldFdpZHRoKGNpLCBkaXN0YW5jZSk7XHJcbiAgICB9XHJcbiAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIHNlbGVjdG9yLnJlc2V0QXJlYU9mZnNldCgpO1xyXG4gICAgaG9yaXpvbnRhbFNjcm9sbGJhclNldC5jYWxsKHRoaXMpO1xyXG4gICAgZWRpdG9yU2V0T2Zmc2V0LmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gZGF0YVNldENlbGxUZXh0KHRleHQsIHN0YXRlID0gJ2ZpbmlzaGVkJykge1xyXG4gICAgY29uc3QgeyBkYXRhLCB0YWJsZSB9ID0gdGhpcztcclxuICAgIC8vIGNvbnN0IFtyaSwgY2ldID0gc2VsZWN0b3IuaW5kZXhlcztcclxuICAgIGlmIChkYXRhLnNldHRpbmdzLm1vZGUgPT09ICdyZWFkJylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBkYXRhLnNldFNlbGVjdGVkQ2VsbFRleHQodGV4dCwgc3RhdGUpO1xyXG4gICAgY29uc3QgeyByaSwgY2kgfSA9IGRhdGEuc2VsZWN0b3I7XHJcbiAgICBpZiAoc3RhdGUgPT09ICdmaW5pc2hlZCcpIHtcclxuICAgICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMudHJpZ2dlcignY2VsbC1lZGl0ZWQnLCB0ZXh0LCByaSwgY2kpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluc2VydERlbGV0ZVJvd0NvbHVtbih0eXBlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBpZiAoZGF0YS5zZXR0aW5ncy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKHR5cGUgPT09ICdpbnNlcnQtcm93Jykge1xyXG4gICAgICAgIGRhdGEuaW5zZXJ0KCdyb3cnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkZWxldGUtcm93Jykge1xyXG4gICAgICAgIGRhdGEuZGVsZXRlKCdyb3cnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdpbnNlcnQtY29sdW1uJykge1xyXG4gICAgICAgIGRhdGEuaW5zZXJ0KCdjb2x1bW4nKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkZWxldGUtY29sdW1uJykge1xyXG4gICAgICAgIGRhdGEuZGVsZXRlKCdjb2x1bW4nKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkZWxldGUtY2VsbCcpIHtcclxuICAgICAgICBkYXRhLmRlbGV0ZUNlbGwoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkZWxldGUtY2VsbC1mb3JtYXQnKSB7XHJcbiAgICAgICAgZGF0YS5kZWxldGVDZWxsKCdmb3JtYXQnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdkZWxldGUtY2VsbC10ZXh0Jykge1xyXG4gICAgICAgIGRhdGEuZGVsZXRlQ2VsbCgndGV4dCcpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NlbGwtcHJpbnRhYmxlJykge1xyXG4gICAgICAgIGRhdGEuc2V0U2VsZWN0ZWRDZWxsQXR0cigncHJpbnRhYmxlJywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnY2VsbC1ub24tcHJpbnRhYmxlJykge1xyXG4gICAgICAgIGRhdGEuc2V0U2VsZWN0ZWRDZWxsQXR0cigncHJpbnRhYmxlJywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NlbGwtZWRpdGFibGUnKSB7XHJcbiAgICAgICAgZGF0YS5zZXRTZWxlY3RlZENlbGxBdHRyKCdlZGl0YWJsZScsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NlbGwtbm9uLWVkaXRhYmxlJykge1xyXG4gICAgICAgIGRhdGEuc2V0U2VsZWN0ZWRDZWxsQXR0cignZWRpdGFibGUnLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBjbGVhckNsaXBib2FyZC5jYWxsKHRoaXMpO1xyXG4gICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIHRvb2xiYXJDaGFuZ2UodHlwZSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgIGlmICh0eXBlID09PSAndW5kbycpIHtcclxuICAgICAgICB0aGlzLnVuZG8oKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdyZWRvJykge1xyXG4gICAgICAgIHRoaXMucmVkbygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ3ByaW50Jykge1xyXG4gICAgICAgIHRoaXMucHJpbnQucHJldmlldygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ3BhaW50Zm9ybWF0Jykge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgY29weS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY2xlYXJDbGlwYm9hcmQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjbGVhcmZvcm1hdCcpIHtcclxuICAgICAgICBpbnNlcnREZWxldGVSb3dDb2x1bW4uY2FsbCh0aGlzLCAnZGVsZXRlLWNlbGwtZm9ybWF0Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAvLyBsaW5rXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnY2hhcnQnKSB7XHJcbiAgICAgICAgLy8gY2hhcnRcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdhdXRvZmlsdGVyJykge1xyXG4gICAgICAgIC8vIGZpbHRlclxyXG4gICAgICAgIGF1dG9maWx0ZXIuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdmcmVlemUnKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcmksIGNpIH0gPSBkYXRhLnNlbGVjdG9yO1xyXG4gICAgICAgICAgICB0aGlzLmZyZWV6ZShyaSwgY2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mcmVlemUoMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZGF0YS5zZXRTZWxlY3RlZENlbGxBdHRyKHR5cGUsIHZhbHVlKTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2Zvcm11bGEnICYmICFkYXRhLnNlbGVjdG9yLm11bHRpcGxlKCkpIHtcclxuICAgICAgICAgICAgZWRpdG9yU2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzb3J0RmlsdGVyQ2hhbmdlKGNpLCBvcmRlciwgb3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc29ydDonLCBzb3J0RGVzYywgb3BlcmF0b3IsIHZhbHVlKTtcclxuICAgIHRoaXMuZGF0YS5zZXRBdXRvRmlsdGVyKGNpLCBvcmRlciwgb3BlcmF0b3IsIHZhbHVlKTtcclxuICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxufVxyXG5mdW5jdGlvbiBzaGVldEluaXRFdmVudHMoKSB7XHJcbiAgICBjb25zdCB7IHNlbGVjdG9yLCBvdmVybGF5ZXJFbCwgcm93UmVzaXplciwgY29sUmVzaXplciwgdmVydGljYWxTY3JvbGxiYXIsIGhvcml6b250YWxTY3JvbGxiYXIsIGVkaXRvciwgY29udGV4dE1lbnUsIHRvb2xiYXIsIG1vZGFsVmFsaWRhdGlvbiwgc29ydEZpbHRlciwgfSA9IHRoaXM7XHJcbiAgICAvLyBvdmVybGF5ZXJcclxuICAgIG92ZXJsYXllckVsXHJcbiAgICAgICAgLm9uKCdtb3VzZW1vdmUnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgb3ZlcmxheWVyTW91c2Vtb3ZlLmNhbGwodGhpcywgZXZ0KTtcclxuICAgIH0pXHJcbiAgICAgICAgLm9uKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZWRpdG9yLmNsZWFyKCk7XHJcbiAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xyXG4gICAgICAgIC8vIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbjogbW91c2Vkb3duIOKGkiBtb3VzZXVwIOKGkiBjbGlja1xyXG4gICAgICAgIC8vIHRoZSByaWdodCBtb3VzZSBidXR0b246IG1vdXNlZG93biDihpIgY29udGVueHRtZW51IOKGkiBtb3VzZXVwXHJcbiAgICAgICAgaWYgKGV2dC5idXR0b25zID09PSAyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEueHlJblNlbGVjdGVkUmVjdChldnQub2Zmc2V0WCwgZXZ0Lm9mZnNldFkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5zZXRQb3NpdGlvbihldnQub2Zmc2V0WCwgZXZ0Lm9mZnNldFkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxheWVyTW91c2Vkb3duLmNhbGwodGhpcywgZXZ0KTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LnNldFBvc2l0aW9uKGV2dC5vZmZzZXRYLCBldnQub2Zmc2V0WSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldnQuZGV0YWlsID09PSAyKSB7XHJcbiAgICAgICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3ZlcmxheWVyTW91c2Vkb3duLmNhbGwodGhpcywgZXZ0KTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5vbignbW91c2V3aGVlbC5zdG9wJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIG92ZXJsYXllck1vdXNlc2Nyb2xsLmNhbGwodGhpcywgZXZ0KTtcclxuICAgIH0pXHJcbiAgICAgICAgLm9uKCdtb3VzZW91dCcsIChldnQpID0+IHtcclxuICAgICAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFkgfSA9IGV2dDtcclxuICAgICAgICBpZiAob2Zmc2V0WSA8PSAwKVxyXG4gICAgICAgICAgICBjb2xSZXNpemVyLmhpZGUoKTtcclxuICAgICAgICBpZiAob2Zmc2V0WCA8PSAwKVxyXG4gICAgICAgICAgICByb3dSZXNpemVyLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgc2VsZWN0b3IuaW5wdXRDaGFuZ2UgPSAodikgPT4ge1xyXG4gICAgICAgIGRhdGFTZXRDZWxsVGV4dC5jYWxsKHRoaXMsIHYsICdpbnB1dCcpO1xyXG4gICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIC8vIHNsaWRlIG9uIG1vYmlsZVxyXG4gICAgYmluZFRvdWNoKG92ZXJsYXllckVsLmVsLCB7XHJcbiAgICAgICAgbW92ZTogKGRpcmVjdGlvbiwgZCkgPT4ge1xyXG4gICAgICAgICAgICBvdmVybGF5ZXJUb3VjaC5jYWxsKHRoaXMsIGRpcmVjdGlvbiwgZCk7XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgLy8gdG9vbGJhciBjaGFuZ2VcclxuICAgIHRvb2xiYXIuY2hhbmdlID0gKHR5cGUsIHZhbHVlKSA9PiB0b29sYmFyQ2hhbmdlLmNhbGwodGhpcywgdHlwZSwgdmFsdWUpO1xyXG4gICAgLy8gc29ydCBmaWx0ZXIgb2tcclxuICAgIHNvcnRGaWx0ZXIub2sgPSAoY2ksIG9yZGVyLCBvLCB2KSA9PiBzb3J0RmlsdGVyQ2hhbmdlLmNhbGwodGhpcywgY2ksIG9yZGVyLCBvLCB2KTtcclxuICAgIC8vIHJlc2l6ZXIgZmluaXNoZWQgY2FsbGJhY2tcclxuICAgIHJvd1Jlc2l6ZXIuZmluaXNoZWRGbiA9IChjUmVjdCwgZGlzdGFuY2UpID0+IHtcclxuICAgICAgICByb3dSZXNpemVyRmluaXNoZWQuY2FsbCh0aGlzLCBjUmVjdCwgZGlzdGFuY2UpO1xyXG4gICAgfTtcclxuICAgIGNvbFJlc2l6ZXIuZmluaXNoZWRGbiA9IChjUmVjdCwgZGlzdGFuY2UpID0+IHtcclxuICAgICAgICBjb2xSZXNpemVyRmluaXNoZWQuY2FsbCh0aGlzLCBjUmVjdCwgZGlzdGFuY2UpO1xyXG4gICAgfTtcclxuICAgIC8vIHJlc2l6ZXIgdW5oaWRlIGNhbGxiYWNrXHJcbiAgICByb3dSZXNpemVyLnVuaGlkZUZuID0gKGluZGV4KSA9PiB7XHJcbiAgICAgICAgdW5oaWRlUm93c09yQ29scy5jYWxsKHRoaXMsICdyb3cnLCBpbmRleCk7XHJcbiAgICB9O1xyXG4gICAgY29sUmVzaXplci51bmhpZGVGbiA9IChpbmRleCkgPT4ge1xyXG4gICAgICAgIHVuaGlkZVJvd3NPckNvbHMuY2FsbCh0aGlzLCAnY29sJywgaW5kZXgpO1xyXG4gICAgfTtcclxuICAgIC8vIHNjcm9sbGJhciBtb3ZlIGNhbGxiYWNrXHJcbiAgICB2ZXJ0aWNhbFNjcm9sbGJhci5tb3ZlRm4gPSAoZGlzdGFuY2UsIGV2dCkgPT4ge1xyXG4gICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyTW92ZS5jYWxsKHRoaXMsIGRpc3RhbmNlLCBldnQpO1xyXG4gICAgfTtcclxuICAgIGhvcml6b250YWxTY3JvbGxiYXIubW92ZUZuID0gKGRpc3RhbmNlLCBldnQpID0+IHtcclxuICAgICAgICBob3Jpem9udGFsU2Nyb2xsYmFyTW92ZS5jYWxsKHRoaXMsIGRpc3RhbmNlLCBldnQpO1xyXG4gICAgfTtcclxuICAgIC8vIGVkaXRvclxyXG4gICAgZWRpdG9yLmNoYW5nZSA9IChzdGF0ZSwgaXRleHQpID0+IHtcclxuICAgICAgICBkYXRhU2V0Q2VsbFRleHQuY2FsbCh0aGlzLCBpdGV4dCwgc3RhdGUpO1xyXG4gICAgfTtcclxuICAgIC8vIG1vZGFsIHZhbGlkYXRpb25cclxuICAgIG1vZGFsVmFsaWRhdGlvbi5jaGFuZ2UgPSAoYWN0aW9uLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hZGRWYWxpZGF0aW9uKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnJlbW92ZVZhbGlkYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gY29udGV4dG1lbnVcclxuICAgIGNvbnRleHRNZW51Lml0ZW1DbGljayA9ICh0eXBlKSA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3R5cGU6JywgdHlwZSk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICd2YWxpZGF0aW9uJykge1xyXG4gICAgICAgICAgICBtb2RhbFZhbGlkYXRpb24uc2V0VmFsdWUodGhpcy5kYXRhLmdldFNlbGVjdGVkVmFsaWRhdGlvbigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NvcHknKSB7XHJcbiAgICAgICAgICAgIGNvcHkuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2N1dCcpIHtcclxuICAgICAgICAgICAgY3V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwYXN0ZScpIHtcclxuICAgICAgICAgICAgcGFzdGUuY2FsbCh0aGlzLCAnYWxsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwYXN0ZS12YWx1ZScpIHtcclxuICAgICAgICAgICAgcGFzdGUuY2FsbCh0aGlzLCAndGV4dCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAncGFzdGUtZm9ybWF0Jykge1xyXG4gICAgICAgICAgICBwYXN0ZS5jYWxsKHRoaXMsICdmb3JtYXQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2hpZGUnKSB7XHJcbiAgICAgICAgICAgIGhpZGVSb3dzT3JDb2xzLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnNlcnREZWxldGVSb3dDb2x1bW4uY2FsbCh0aGlzLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYmluZCh3aW5kb3csICdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZWxvYWQoKTtcclxuICAgIH0pO1xyXG4gICAgYmluZCh3aW5kb3csICdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICB0aGlzLmZvY3VzaW5nID0gb3ZlcmxheWVyRWwuY29udGFpbnMoZXZ0LnRhcmdldCk7XHJcbiAgICB9KTtcclxuICAgIGJpbmQod2luZG93LCAncGFzdGUnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZvY3VzaW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgcGFzdGUuY2FsbCh0aGlzLCAnYWxsJywgZXZ0KTtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgYmluZCh3aW5kb3csICdjb3B5JywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5mb2N1c2luZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvcHkuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBmb3Igc2VsZWN0b3JcclxuICAgIGJpbmQod2luZG93LCAna2V5ZG93bicsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZm9jdXNpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBrZXlDb2RlID0gZXZ0LmtleUNvZGUgfHwgZXZ0LndoaWNoO1xyXG4gICAgICAgIGNvbnN0IHsga2V5LCBjdHJsS2V5LCBzaGlmdEtleSwgbWV0YUtleSB9ID0gZXZ0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdrZXlkb3duLmV2dDogJywga2V5Q29kZSk7XHJcbiAgICAgICAgaWYgKGN0cmxLZXkgfHwgbWV0YUtleSkge1xyXG4gICAgICAgICAgICAvLyBjb25zdCB7IHNJbmRleGVzLCBlSW5kZXhlcyB9ID0gc2VsZWN0b3I7XHJcbiAgICAgICAgICAgIC8vIGxldCB3aGF0ID0gJ2FsbCc7XHJcbiAgICAgICAgICAgIC8vIGlmIChzaGlmdEtleSkgd2hhdCA9ICd0ZXh0JztcclxuICAgICAgICAgICAgLy8gaWYgKGFsdEtleSkgd2hhdCA9ICdmb3JtYXQnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgOTA6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5kbzogY3RybCArIHpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgODk6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVkbzogY3RybCArIHlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNjc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3RybCArIGNcclxuICAgICAgICAgICAgICAgICAgICAvLyA9PiBjb3B5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29weS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4ODpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgeFxyXG4gICAgICAgICAgICAgICAgICAgIGN1dC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4NTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgdVxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXIudHJpZ2dlcigndW5kZXJsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg2OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyB2XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gPT4gcGFzdGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3RybCArIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ3Jvdy1maXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgdXBcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ2NvbC1maXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ3Jvdy1sYXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdjb2wtbGFzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgc3BhY2UsIGFsbCBjZWxscyBpbiBjb2xcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCAtMSwgdGhpcy5kYXRhLnNlbGVjdG9yLmNpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY2OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBCXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhci50cmlnZ2VyKCdib2xkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDczOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBJXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhci50cmlnZ2VyKCdpdGFsaWMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdldnQua2V5Q29kZTonLCBldnQua2V5Q29kZSk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hpZnQgKyBzcGFjZSwgYWxsIGNlbGxzIGluIHJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCB0aGlzLmRhdGEuc2VsZWN0b3IucmksIC0xLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyNzogLy8gZXNjXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ2xpcGJvYXJkLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OiAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM4OiAvLyB1cFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIHNoaWZ0S2V5LCAndXAnKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzk6IC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDogLy8gZG93blxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIHNoaWZ0S2V5LCAnZG93bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA5OiAvLyB0YWJcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaGlmdCArIHRhYiA9PiBtb3ZlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0YWIgPT4gbW92ZSByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIGZhbHNlLCBzaGlmdEtleSA/ICdsZWZ0JyA6ICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMzogLy8gZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaGlmdCArIGVudGVyID0+IG1vdmUgdXBcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnRlciA9PiBtb3ZlIGRvd25cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBmYWxzZSwgc2hpZnRLZXkgPyAndXAnIDogJ2Rvd24nKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgODogLy8gYmFja3NwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0RGVsZXRlUm93Q29sdW1uLmNhbGwodGhpcywgJ2RlbGV0ZS1jZWxsLXRleHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ0RlbGV0ZScpIHtcclxuICAgICAgICAgICAgICAgIGluc2VydERlbGV0ZVJvd0NvbHVtbi5jYWxsKHRoaXMsICdkZWxldGUtY2VsbC10ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoa2V5Q29kZSA+PSA2NSAmJiBrZXlDb2RlIDw9IDkwKSB8fFxyXG4gICAgICAgICAgICAgICAgKGtleUNvZGUgPj0gNDggJiYga2V5Q29kZSA8PSA1NykgfHxcclxuICAgICAgICAgICAgICAgIChrZXlDb2RlID49IDk2ICYmIGtleUNvZGUgPD0gMTA1KSB8fFxyXG4gICAgICAgICAgICAgICAgZXZ0LmtleSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0Q2VsbFRleHQuY2FsbCh0aGlzLCBldnQua2V5LCAnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IDExMykge1xyXG4gICAgICAgICAgICAgICAgLy8gRjJcclxuICAgICAgICAgICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hlZXQge1xyXG4gICAgZXZlbnRNYXA7XHJcbiAgICBlbDtcclxuICAgIHRvb2xiYXI7XHJcbiAgICBwcmludDtcclxuICAgIGRhdGE7XHJcbiAgICB0YWJsZUVsO1xyXG4gICAgcm93UmVzaXplcjtcclxuICAgIGNvbFJlc2l6ZXI7XHJcbiAgICB2ZXJ0aWNhbFNjcm9sbGJhcjtcclxuICAgIGhvcml6b250YWxTY3JvbGxiYXI7XHJcbiAgICBlZGl0b3I7XHJcbiAgICBtb2RhbFZhbGlkYXRpb247XHJcbiAgICBjb250ZXh0TWVudTtcclxuICAgIHNlbGVjdG9yO1xyXG4gICAgb3ZlcmxheWVyQ0VsO1xyXG4gICAgb3ZlcmxheWVyRWw7XHJcbiAgICBzb3J0RmlsdGVyO1xyXG4gICAgdGFibGU7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXRFbCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYXAgPSBjcmVhdGVFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICBjb25zdCB7IHZpZXcsIHNob3dUb29sYmFyLCBzaG93Q29udGV4dG1lbnUgfSA9IGRhdGEuc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2hlZXRgKTtcclxuICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcihkYXRhLCB2aWV3LndpZHRoLCAhc2hvd1Rvb2xiYXIpO1xyXG4gICAgICAgIHRoaXMucHJpbnQgPSBuZXcgUHJpbnQoZGF0YSk7XHJcbiAgICAgICAgdGFyZ2V0RWwuY2hpbGRyZW4odGhpcy50b29sYmFyLmVsLCB0aGlzLmVsLCB0aGlzLnByaW50LmVsKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIC8vIHRhYmxlXHJcbiAgICAgICAgdGhpcy50YWJsZUVsID0gaCgnY2FudmFzJywgYCR7Y3NzUHJlZml4fS10YWJsZWApO1xyXG4gICAgICAgIC8vIHJlc2l6ZXJcclxuICAgICAgICB0aGlzLnJvd1Jlc2l6ZXIgPSBuZXcgUmVzaXplcihmYWxzZSwgZGF0YS5yb3dzLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5jb2xSZXNpemVyID0gbmV3IFJlc2l6ZXIodHJ1ZSwgZGF0YS5jb2xzLm1pbldpZHRoKTtcclxuICAgICAgICAvLyBzY3JvbGxiYXJcclxuICAgICAgICB0aGlzLnZlcnRpY2FsU2Nyb2xsYmFyID0gbmV3IFNjcm9sbGJhcih0cnVlKTtcclxuICAgICAgICB0aGlzLmhvcml6b250YWxTY3JvbGxiYXIgPSBuZXcgU2Nyb2xsYmFyKGZhbHNlKTtcclxuICAgICAgICAvLyBlZGl0b3JcclxuICAgICAgICB0aGlzLmVkaXRvciA9IG5ldyBFZGl0b3IoZm9ybXVsYXMsICgpID0+IHRoaXMuZ2V0VGFibGVPZmZzZXQoKSwgZGF0YS5yb3dzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gZGF0YSB2YWxpZGF0aW9uXHJcbiAgICAgICAgdGhpcy5tb2RhbFZhbGlkYXRpb24gPSBuZXcgTW9kYWxWYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgLy8gY29udGV4dE1lbnVcclxuICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gbmV3IENvbnRleHRNZW51KCgpID0+IHRoaXMuZ2V0UmVjdCgpLCAhc2hvd0NvbnRleHRtZW51KTtcclxuICAgICAgICAvLyBzZWxlY3RvclxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBuZXcgU2VsZWN0b3IoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5ZXJDRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LW92ZXJsYXllci1jb250ZW50YCkuY2hpbGRyZW4odGhpcy5lZGl0b3IuZWwsIHRoaXMuc2VsZWN0b3IuZWwpO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheWVyRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LW92ZXJsYXllcmApLmNoaWxkKHRoaXMub3ZlcmxheWVyQ0VsKTtcclxuICAgICAgICAvLyBzb3J0RmlsdGVyXHJcbiAgICAgICAgdGhpcy5zb3J0RmlsdGVyID0gbmV3IFNvcnRGaWx0ZXIoKTtcclxuICAgICAgICAvLyByb290IGVsZW1lbnRcclxuICAgICAgICB0aGlzLmVsLmNoaWxkcmVuKHRoaXMudGFibGVFbCwgdGhpcy5vdmVybGF5ZXJFbC5lbCwgdGhpcy5yb3dSZXNpemVyLmVsLCB0aGlzLmNvbFJlc2l6ZXIuZWwsIHRoaXMudmVydGljYWxTY3JvbGxiYXIuZWwsIHRoaXMuaG9yaXpvbnRhbFNjcm9sbGJhci5lbCwgdGhpcy5jb250ZXh0TWVudS5lbCwgdGhpcy5tb2RhbFZhbGlkYXRpb24uZWwsIHRoaXMuc29ydEZpbHRlci5lbCk7XHJcbiAgICAgICAgLy8gdGFibGVcclxuICAgICAgICB0aGlzLnRhYmxlID0gbmV3IFRhYmxlKHRoaXMudGFibGVFbC5lbCwgZGF0YSk7XHJcbiAgICAgICAgc2hlZXRJbml0RXZlbnRzLmNhbGwodGhpcyk7XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIC8vIGluaXQgc2VsZWN0b3IgWzAsIDBdXHJcbiAgICAgICAgc2VsZWN0b3JTZXQuY2FsbCh0aGlzLCBmYWxzZSwgMCwgMCk7XHJcbiAgICB9XHJcbiAgICBvbihldmVudE5hbWUsIGZ1bmMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50TWFwLm9uKGV2ZW50TmFtZSwgZnVuYyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB0cmlnZ2VyKGV2ZW50TmFtZSwgLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IHsgZXZlbnRNYXAgfSA9IHRoaXM7XHJcbiAgICAgICAgZXZlbnRNYXAuZmlyZShldmVudE5hbWUsIGFyZ3MpO1xyXG4gICAgfVxyXG4gICAgcmVzZXREYXRhKGRhdGEpIHtcclxuICAgICAgICAvLyBiZWZvcmVcclxuICAgICAgICB0aGlzLmVkaXRvci5jbGVhcigpO1xyXG4gICAgICAgIC8vIGFmdGVyXHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxiYXJTZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLnRvb2xiYXIucmVzZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMucHJpbnQucmVzZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IucmVzZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMudGFibGUucmVzZXREYXRhKGRhdGEpO1xyXG4gICAgfVxyXG4gICAgbG9hZERhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YS5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vIGZyZWV6ZSByb3dzIG9yIGNvbHNcclxuICAgIGZyZWV6ZShyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICAgICAgZGF0YS5zZXRGcmVlemUocmksIGNpKTtcclxuICAgICAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB1bmRvKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YS51bmRvKCk7XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcmVkbygpIHtcclxuICAgICAgICB0aGlzLmRhdGEucmVkbygpO1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICAgIHJlbG9hZCgpIHtcclxuICAgICAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBnZXRSZWN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4geyB3aWR0aDogZGF0YS52aWV3V2lkdGgoKSwgaGVpZ2h0OiBkYXRhLnZpZXdIZWlnaHQoKSB9O1xyXG4gICAgfVxyXG4gICAgZ2V0VGFibGVPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmdldFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggLSBjb2xzLmluZGV4V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0IC0gcm93cy5oZWlnaHQsXHJcbiAgICAgICAgICAgIGxlZnQ6IGNvbHMuaW5kZXhXaWR0aCxcclxuICAgICAgICAgICAgdG9wOiByb3dzLmhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vYnV0dG9uJztcclxuaW1wb3J0IHsgYmluZENsaWNrb3V0c2lkZSwgdW5iaW5kQ2xpY2tvdXRzaWRlIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuZnVuY3Rpb24gYnVpbGRNZW51KGNsc05hbWUpIHtcclxuICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW0gJHtjbHNOYW1lfWApO1xyXG59XHJcbmZ1bmN0aW9uIGJ1aWxkU29ydEl0ZW0oaXQpIHtcclxuICAgIHJldHVybiBidWlsZE1lbnUoJ3N0YXRlJylcclxuICAgICAgICAuY2hpbGQodChgc29ydC4ke2l0fWApKVxyXG4gICAgICAgIC5vbignY2xpY2suc3RvcCcsICgpID0+IHRoaXMuaXRlbUNsaWNrKGl0KSk7XHJcbn1cclxuZnVuY3Rpb24gYnVpbGRGaWx0ZXJCb2R5KGl0ZW1zKSB7XHJcbiAgICBjb25zdCB7IGZpbHRlcmJFbCwgZmlsdGVyVmFsdWVzIH0gPSB0aGlzO1xyXG4gICAgZmlsdGVyYkVsLmh0bWwoJycpO1xyXG4gICAgY29uc3QgaXRlbUtleXMgPSBPYmplY3Qua2V5cyhpdGVtcyk7XHJcbiAgICBpdGVtS2V5cy5mb3JFYWNoKChpdCwgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBjbnQgPSBpdGVtc1tpdF07XHJcbiAgICAgICAgY29uc3QgYWN0aXZlID0gZmlsdGVyVmFsdWVzLmluY2x1ZGVzKGl0KSA/ICdjaGVja2VkJyA6ICcnO1xyXG4gICAgICAgIGZpbHRlcmJFbC5jaGlsZChoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW0gc3RhdGUgJHthY3RpdmV9YClcclxuICAgICAgICAgICAgLm9uKCdjbGljay5zdG9wJywgKCkgPT4gdGhpcy5maWx0ZXJDbGljayhpbmRleCwgaXQpKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oaXQgPT09ICcnID8gdCgnZmlsdGVyLmVtcHR5JykgOiBpdCwgaCgnZGl2JywgJ2xhYmVsJykuaHRtbChgKCR7Y250fSlgKSkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gcmVzZXRGaWx0ZXJIZWFkZXIoKSB7XHJcbiAgICBjb25zdCB7IGZpbHRlcmhFbCwgZmlsdGVyVmFsdWVzLCB2YWx1ZXMgfSA9IHRoaXM7XHJcbiAgICBmaWx0ZXJoRWwuaHRtbChgJHtmaWx0ZXJWYWx1ZXMubGVuZ3RofSAvICR7dmFsdWVzLmxlbmd0aH1gKTtcclxuICAgIGZpbHRlcmhFbC5jaGVja2VkKGZpbHRlclZhbHVlcy5sZW5ndGggPT09IHZhbHVlcy5sZW5ndGgpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvcnRGaWx0ZXIge1xyXG4gICAgZmlsdGVyYkVsO1xyXG4gICAgZmlsdGVyaEVsO1xyXG4gICAgZWw7XHJcbiAgICBzb3J0QXNjRWw7XHJcbiAgICBzb3J0RGVzY0VsO1xyXG4gICAgY2k7XHJcbiAgICBzb3J0RGVzYztcclxuICAgIHZhbHVlcztcclxuICAgIGZpbHRlclZhbHVlcztcclxuICAgIG9rO1xyXG4gICAgc29ydDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyYkVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1ib2R5YCk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJoRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWhlYWRlciBzdGF0ZWApLm9uKCdjbGljay5zdG9wJywgKCkgPT4gdGhpcy5maWx0ZXJDbGljaygwLCAnYWxsJykpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNvcnQtZmlsdGVyYClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCh0aGlzLnNvcnRBc2NFbCA9IGJ1aWxkU29ydEl0ZW0uY2FsbCh0aGlzLCAnYXNjJykpLCAodGhpcy5zb3J0RGVzY0VsID0gYnVpbGRTb3J0SXRlbS5jYWxsKHRoaXMsICdkZXNjJykpLCBidWlsZE1lbnUoJ2RpdmlkZXInKSwgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1maWx0ZXJgKS5jaGlsZHJlbih0aGlzLmZpbHRlcmhFbCwgdGhpcy5maWx0ZXJiRWwpLCBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWJ1dHRvbnNgKS5jaGlsZHJlbihuZXcgQnV0dG9uKCdjYW5jZWwnKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdjYW5jZWwnKSksIG5ldyBCdXR0b24oJ29rJywgJ3ByaW1hcnknKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdvaycpKSkpXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgLy8gdGhpcy5zZXRGaWx0ZXJzKFsndGVzdDEnLCAndGVzdDInLCAndGV4dDMnXSk7XHJcbiAgICAgICAgdGhpcy5jaSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zb3J0RGVzYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyVmFsdWVzID0gW107XHJcbiAgICB9XHJcbiAgICBidG5DbGljayhpdCkge1xyXG4gICAgICAgIGlmIChpdCA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICBjb25zdCB7IGNpLCBzb3J0LCBmaWx0ZXJWYWx1ZXMgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9rKGNpLCBzb3J0LCAnaW4nLCBmaWx0ZXJWYWx1ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgaXRlbUNsaWNrKGl0KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2l0OicsIGl0KTtcclxuICAgICAgICB0aGlzLnNvcnQgPSBpdDtcclxuICAgICAgICBjb25zdCB7IHNvcnRBc2NFbCwgc29ydERlc2NFbCB9ID0gdGhpcztcclxuICAgICAgICBzb3J0QXNjRWwuY2hlY2tlZChpdCA9PT0gJ2FzYycpO1xyXG4gICAgICAgIHNvcnREZXNjRWwuY2hlY2tlZChpdCA9PT0gJ2Rlc2MnKTtcclxuICAgIH1cclxuICAgIGZpbHRlckNsaWNrKGluZGV4LCBpdCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbmRleDonLCBpbmRleCwgaXQpO1xyXG4gICAgICAgIGNvbnN0IHsgZmlsdGVyYkVsLCBmaWx0ZXJWYWx1ZXMsIHZhbHVlcyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGZpbHRlcmJFbC5jaGlsZHJlbigpO1xyXG4gICAgICAgIGlmIChpdCA9PT0gJ2FsbCcpIHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gZmlsdGVyVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goKGkpID0+IGgoaSkuY2hlY2tlZChmYWxzZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJWYWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKChpKSA9PiBoKGkpLmNoZWNrZWQodHJ1ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gaChjaGlsZHJlbltpbmRleF0pLnRvZ2dsZSgnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyVmFsdWVzLnB1c2goaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyVmFsdWVzLnNwbGljZShmaWx0ZXJWYWx1ZXMuZmluZEluZGV4KChpKSA9PiBpID09PSBpdCksIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc2V0RmlsdGVySGVhZGVyLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvLyB2OiBhdXRvRmlsdGVyXHJcbiAgICAvLyBpdGVtczoge3ZhbHVlOiBjbnR9XHJcbiAgICAvLyBzb3J0IHsgY2ksIG9yZGVyIH1cclxuICAgIHNldChjaSwgaXRlbXMsIGZpbHRlciwgc29ydCkge1xyXG4gICAgICAgIHRoaXMuY2kgPSBjaTtcclxuICAgICAgICBjb25zdCB7IHNvcnRBc2NFbCwgc29ydERlc2NFbCB9ID0gdGhpcztcclxuICAgICAgICBpZiAoc29ydCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnQgPSBzb3J0Lm9yZGVyO1xyXG4gICAgICAgICAgICBzb3J0QXNjRWwuY2hlY2tlZChzb3J0LmFzYygpKTtcclxuICAgICAgICAgICAgc29ydERlc2NFbC5jaGVja2VkKHNvcnQuZGVzYygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydERlc2MgPSBudWxsO1xyXG4gICAgICAgICAgICBzb3J0QXNjRWwuY2hlY2tlZChmYWxzZSk7XHJcbiAgICAgICAgICAgIHNvcnREZXNjRWwuY2hlY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRoaXMuc2V0RmlsdGVycyhpdGVtcywgZmlsdGVyKTtcclxuICAgICAgICB0aGlzLnZhbHVlcyA9IE9iamVjdC5rZXlzKGl0ZW1zKTtcclxuICAgICAgICB0aGlzLmZpbHRlclZhbHVlcyA9IGZpbHRlciA/IEFycmF5LmZyb20oZmlsdGVyLnZhbHVlKSA6IE9iamVjdC5rZXlzKGl0ZW1zKTtcclxuICAgICAgICBidWlsZEZpbHRlckJvZHkuY2FsbCh0aGlzLCBpdGVtcywgZmlsdGVyKTtcclxuICAgICAgICByZXNldEZpbHRlckhlYWRlci5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgc2V0T2Zmc2V0KHYpIHtcclxuICAgICAgICB0aGlzLmVsLm9mZnNldCh2KS5zaG93KCk7XHJcbiAgICAgICAgbGV0IHRpbmRleCA9IDE7XHJcbiAgICAgICAgYmluZENsaWNrb3V0c2lkZSh0aGlzLmVsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aW5kZXggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGluZGV4IC09IDE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuZWwuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgICAgICB1bmJpbmRDbGlja291dHNpZGUodGhpcy5lbCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGJpbmRDbGlja291dHNpZGUsIHVuYmluZENsaWNrb3V0c2lkZSB9IGZyb20gJy4vZXZlbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5mdW5jdGlvbiBpbnB1dE1vdmVQcmV2KGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBjb25zdCB7IGZpbHRlckl0ZW1zIH0gPSB0aGlzO1xyXG4gICAgaWYgKGZpbHRlckl0ZW1zLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmICh0aGlzLml0ZW1JbmRleCA+PSAwKVxyXG4gICAgICAgIGZpbHRlckl0ZW1zW3RoaXMuaXRlbUluZGV4XS50b2dnbGUoKTtcclxuICAgIHRoaXMuaXRlbUluZGV4IC09IDE7XHJcbiAgICBpZiAodGhpcy5pdGVtSW5kZXggPCAwKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtSW5kZXggPSBmaWx0ZXJJdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG4gICAgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpO1xyXG59XHJcbmZ1bmN0aW9uIGlucHV0TW92ZU5leHQoZXZ0KSB7XHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBjb25zdCB7IGZpbHRlckl0ZW1zIH0gPSB0aGlzO1xyXG4gICAgaWYgKGZpbHRlckl0ZW1zLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmICh0aGlzLml0ZW1JbmRleCA+PSAwKVxyXG4gICAgICAgIGZpbHRlckl0ZW1zW3RoaXMuaXRlbUluZGV4XS50b2dnbGUoKTtcclxuICAgIHRoaXMuaXRlbUluZGV4ICs9IDE7XHJcbiAgICBpZiAodGhpcy5pdGVtSW5kZXggPiBmaWx0ZXJJdGVtcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtSW5kZXggPSAwO1xyXG4gICAgfVxyXG4gICAgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpO1xyXG59XHJcbmZ1bmN0aW9uIGlucHV0RW50ZXIoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHsgZmlsdGVySXRlbXMgfSA9IHRoaXM7XHJcbiAgICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKHRoaXMuaXRlbUluZGV4IDwgMClcclxuICAgICAgICB0aGlzLml0ZW1JbmRleCA9IDA7XHJcbiAgICBmaWx0ZXJJdGVtc1t0aGlzLml0ZW1JbmRleF0uZWwuY2xpY2soKTtcclxuICAgIHRoaXMuaGlkZSgpO1xyXG59XHJcbmZ1bmN0aW9uIGlucHV0S2V5ZG93bkhhbmRsZXIoZXZ0KSB7XHJcbiAgICBjb25zdCB7IGtleUNvZGUgfSA9IGV2dDtcclxuICAgIGlmIChldnQuY3RybEtleSkge1xyXG4gICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICAgIGNhc2UgMzc6IC8vIGxlZnRcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM4OiAvLyB1cFxyXG4gICAgICAgICAgICBpbnB1dE1vdmVQcmV2LmNhbGwodGhpcywgZXZ0KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOTogLy8gcmlnaHRcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQwOiAvLyBkb3duXHJcbiAgICAgICAgICAgIGlucHV0TW92ZU5leHQuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDEzOiAvLyBlbnRlclxyXG4gICAgICAgICAgICBpbnB1dEVudGVyLmNhbGwodGhpcywgZXZ0KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICBpbnB1dEVudGVyLmNhbGwodGhpcywgZXZ0KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdWdnZXN0IHtcclxuICAgIGZpbHRlckl0ZW1zO1xyXG4gICAgaXRlbXM7XHJcbiAgICBlbDtcclxuICAgIGl0ZW1DbGljaztcclxuICAgIGl0ZW1JbmRleDtcclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1zLCBpdGVtQ2xpY2ssIHdpZHRoID0gJzIwMHB4Jykge1xyXG4gICAgICAgIHRoaXMuZmlsdGVySXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc3VnZ2VzdGApLmNzcygnd2lkdGgnLCB3aWR0aCkuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrID0gaXRlbUNsaWNrO1xyXG4gICAgICAgIHRoaXMuaXRlbUluZGV4ID0gLTE7XHJcbiAgICB9XHJcbiAgICBzZXRPZmZzZXQodikge1xyXG4gICAgICAgIHRoaXMuZWwuY3NzUmVtb3ZlS2V5cygndG9wJywgJ2JvdHRvbScpLm9mZnNldCh2KTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5pdGVtSW5kZXggPSAtMTtcclxuICAgICAgICBlbC5oaWRlKCk7XHJcbiAgICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKHRoaXMuZWwucGFyZW50KCkpO1xyXG4gICAgfVxyXG4gICAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgLy8gdGhpcy5zZWFyY2goJycpO1xyXG4gICAgfVxyXG4gICAgc2VhcmNoKHdvcmQpIHtcclxuICAgICAgICBsZXQgeyBpdGVtcyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoIS9eXFxzKiQvLnRlc3Qod29yZCkpIHtcclxuICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoKGl0KSA9PiAoaXQua2V5IHx8IGl0KS5zdGFydHNXaXRoKHdvcmQudG9VcHBlckNhc2UoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpdGVtcyA9IGl0ZW1zLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHsgdGl0bGUgfSA9IGl0O1xyXG4gICAgICAgICAgICBpZiAodGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZSA9IGl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW1gKVxyXG4gICAgICAgICAgICAgICAgLmNoaWxkKHRpdGxlKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljay5zdG9wJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtQ2xpY2soaXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaXQubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hpbGQoaCgnZGl2JywgJ2xhYmVsJykuaHRtbChpdC5sYWJlbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZmlsdGVySXRlbXMgPSBpdGVtcztcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGl0ZW1zWzBdLnRvZ2dsZSgpO1xyXG4gICAgICAgIGVsLmh0bWwoJycpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbiguLi5pdGVtcylcclxuICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICBiaW5kQ2xpY2tvdXRzaWRlKGVsLnBhcmVudCgpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYmluZElucHV0RXZlbnRzKGlucHV0KSB7XHJcbiAgICAgICAgaW5wdXQub24oJ2tleWRvd24nLCAoZXZ0KSA9PiBpbnB1dEtleWRvd25IYW5kbGVyLmNhbGwodGhpcywgZXZ0KSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgc3RyaW5nQXQgfSBmcm9tICcuLi9jb3JlL2FscGhhYmV0JztcclxuaW1wb3J0IHsgZ2V0Rm9udFNpemVQeEJ5UHQgfSBmcm9tICcuLi9jb3JlL2ZvbnQnO1xyXG5pbXBvcnQgX2NlbGwgZnJvbSAnLi4vY29yZS9jZWxsJztcclxuaW1wb3J0IHsgZm9ybXVsYW0gfSBmcm9tICcuLi9jb3JlL2Zvcm11bGEnO1xyXG5pbXBvcnQgeyBmb3JtYXRtIH0gZnJvbSAnLi4vY29yZS9mb3JtYXQnO1xyXG5pbXBvcnQgeyBEcmF3LCBEcmF3Qm94LCB0aGluTGluZVdpZHRoLCBucHggfSBmcm9tICcuLi9jYW52YXMvZHJhdyc7XHJcbi8vIGdvYmFsIHZhclxyXG5jb25zdCBjZWxsUGFkZGluZ1dpZHRoID0gNTtcclxuY29uc3QgdGFibGVGaXhlZEhlYWRlckNsZWFuU3R5bGUgPSB7IGZpbGxTdHlsZTogJyNmNGY1ZjgnIH07XHJcbmNvbnN0IHRhYmxlR3JpZFN0eWxlID0ge1xyXG4gICAgZmlsbFN0eWxlOiAnI2ZmZicsXHJcbiAgICBsaW5lV2lkdGg6IHRoaW5MaW5lV2lkdGgsXHJcbiAgICBzdHJva2VTdHlsZTogJyNlNmU2ZTYnLFxyXG59O1xyXG5mdW5jdGlvbiB0YWJsZUZpeGVkSGVhZGVyU3R5bGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcclxuICAgICAgICBmb250OiBgNTAwICR7bnB4KDEyKX1weCBTb3VyY2UgU2FucyBQcm9gLFxyXG4gICAgICAgIGZpbGxTdHlsZTogJyM1ODU3NTcnLFxyXG4gICAgICAgIGxpbmVXaWR0aDogdGhpbkxpbmVXaWR0aCgpLFxyXG4gICAgICAgIHN0cm9rZVN0eWxlOiAnI2U2ZTZlNicsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldERyYXdCb3goZGF0YSwgcmluZGV4LCBjaW5kZXgsIHlvZmZzZXQgPSAwKSB7XHJcbiAgICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCB9ID0gZGF0YS5jZWxsUmVjdChyaW5kZXgsIGNpbmRleCk7XHJcbiAgICByZXR1cm4gbmV3IERyYXdCb3gobGVmdCwgdG9wICsgeW9mZnNldCwgd2lkdGgsIGhlaWdodCwgY2VsbFBhZGRpbmdXaWR0aCk7XHJcbn1cclxuLypcclxuZnVuY3Rpb24gcmVuZGVyQ2VsbEJvcmRlcnMoYmJveGVzLCB0cmFuc2xhdGVGdW5jKSB7XHJcbiAgY29uc3QgeyBkcmF3IH0gPSB0aGlzO1xyXG4gIGlmIChiYm94ZXMpIHtcclxuICAgIGNvbnN0IHJzZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnYmJveGVzOicsIGJib3hlcyk7XHJcbiAgICBiYm94ZXMuZm9yRWFjaCgoeyByaSwgY2ksIGJveCB9KSA9PiB7XHJcbiAgICAgIGlmICghcnNldC5oYXMocmkpKSB7XHJcbiAgICAgICAgcnNldC5hZGQocmkpO1xyXG4gICAgICAgIHRyYW5zbGF0ZUZ1bmMocmkpO1xyXG4gICAgICB9XHJcbiAgICAgIGRyYXcuc3Ryb2tlQm9yZGVycyhib3gpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDZWxsKGRyYXcsIGRhdGEsIHJpbmRleCwgY2luZGV4LCB5b2Zmc2V0ID0gMCkge1xyXG4gICAgY29uc3QgeyBzb3J0ZWRSb3dNYXAsIHJvd3MsIGNvbHMgfSA9IGRhdGE7XHJcbiAgICBpZiAocm93cy5pc0hpZGUocmluZGV4KSB8fCBjb2xzLmlzSGlkZShjaW5kZXgpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGxldCBucmluZGV4ID0gcmluZGV4O1xyXG4gICAgaWYgKHNvcnRlZFJvd01hcC5oYXMocmluZGV4KSkge1xyXG4gICAgICAgIG5yaW5kZXggPSBzb3J0ZWRSb3dNYXAuZ2V0KHJpbmRleCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjZWxsID0gZGF0YS5nZXRDZWxsKG5yaW5kZXgsIGNpbmRleCk7XHJcbiAgICBpZiAoY2VsbCA9PT0gbnVsbClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBsZXQgZnJvemVuID0gZmFsc2U7XHJcbiAgICBpZiAoJ2VkaXRhYmxlJyBpbiBjZWxsICYmIGNlbGwuZWRpdGFibGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgZnJvemVuID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0eWxlID0gZGF0YS5nZXRDZWxsU3R5bGVPckRlZmF1bHQobnJpbmRleCwgY2luZGV4KTtcclxuICAgIGNvbnN0IGRib3ggPSBnZXREcmF3Qm94KGRhdGEsIHJpbmRleCwgY2luZGV4LCB5b2Zmc2V0KTtcclxuICAgIGRib3guYmdjb2xvciA9IHN0eWxlLmJnY29sb3I7XHJcbiAgICBpZiAoc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkYm94LnNldEJvcmRlcnMoc3R5bGUuYm9yZGVyKTtcclxuICAgICAgICAvLyBiYm94ZXMucHVzaCh7IHJpOiByaW5kZXgsIGNpOiBjaW5kZXgsIGJveDogZGJveCB9KTtcclxuICAgICAgICBkcmF3LnN0cm9rZUJvcmRlcnMoZGJveCk7XHJcbiAgICB9XHJcbiAgICBkcmF3LnJlY3QoZGJveCwgKCkgPT4ge1xyXG4gICAgICAgIC8vIHJlbmRlciB0ZXh0XHJcbiAgICAgICAgbGV0IGNlbGxUZXh0ID0gJyc7XHJcbiAgICAgICAgaWYgKCFkYXRhLnNldHRpbmdzLmV2YWxQYXVzZWQpIHtcclxuICAgICAgICAgICAgY2VsbFRleHQgPSBfY2VsbC5yZW5kZXIoY2VsbC50ZXh0IHx8ICcnLCBmb3JtdWxhbSwgKHksIHgpID0+IGRhdGEuZ2V0Q2VsbFRleHRPckRlZmF1bHQoeCwgeSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2VsbFRleHQgPSBjZWxsLnRleHQgfHwgJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdHlsZS5mb3JtYXQpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5mb3JtYXRtLCAnPj4nLCBjZWxsLmZvcm1hdCk7XHJcbiAgICAgICAgICAgIGNlbGxUZXh0ID0gZm9ybWF0bVtzdHlsZS5mb3JtYXRdLnJlbmRlcihjZWxsVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZvbnQgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZS5mb250KTtcclxuICAgICAgICBmb250LnNpemUgPSBnZXRGb250U2l6ZVB4QnlQdChmb250LnNpemUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdHlsZTonLCBzdHlsZSk7XHJcbiAgICAgICAgZHJhdy50ZXh0KGNlbGxUZXh0LCBkYm94LCB7XHJcbiAgICAgICAgICAgIGFsaWduOiBzdHlsZS5hbGlnbixcclxuICAgICAgICAgICAgdmFsaWduOiBzdHlsZS52YWxpZ24sXHJcbiAgICAgICAgICAgIGZvbnQsXHJcbiAgICAgICAgICAgIGNvbG9yOiBzdHlsZS5jb2xvcixcclxuICAgICAgICAgICAgc3RyaWtlOiBzdHlsZS5zdHJpa2UsXHJcbiAgICAgICAgICAgIHVuZGVybGluZTogc3R5bGUudW5kZXJsaW5lLFxyXG4gICAgICAgIH0sIHN0eWxlLnRleHR3cmFwKTtcclxuICAgICAgICAvLyBlcnJvclxyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZGF0YS52YWxpZGF0aW9ucy5nZXRFcnJvcihyaW5kZXgsIGNpbmRleCk7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdlcnJvcjonLCByaW5kZXgsIGNpbmRleCwgZXJyb3IpO1xyXG4gICAgICAgICAgICBkcmF3LmVycm9yKGRib3gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvemVuKSB7XHJcbiAgICAgICAgICAgIGRyYXcuZnJvemVuKGRib3gpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckF1dG9maWx0ZXIodmlld1JhbmdlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGRyYXcgfSA9IHRoaXM7XHJcbiAgICBpZiAodmlld1JhbmdlKSB7XHJcbiAgICAgICAgY29uc3QgeyBhdXRvRmlsdGVyIH0gPSBkYXRhO1xyXG4gICAgICAgIGlmICghYXV0b0ZpbHRlci5hY3RpdmUoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGFmUmFuZ2UgPSBhdXRvRmlsdGVyLmhyYW5nZSgpO1xyXG4gICAgICAgIGlmICh2aWV3UmFuZ2UuaW50ZXJzZWN0cyhhZlJhbmdlKSkge1xyXG4gICAgICAgICAgICBhZlJhbmdlLmVhY2goKHJpLCBjaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJveCA9IGdldERyYXdCb3goZGF0YSwgcmksIGNpKTtcclxuICAgICAgICAgICAgICAgIGRyYXcuZHJvcGRvd24oZGJveCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZW5kZXJDb250ZW50KHZpZXdSYW5nZSwgZncsIGZoLCB0eCwgdHkpIHtcclxuICAgIGNvbnN0IHsgZHJhdywgZGF0YSB9ID0gdGhpcztcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy50cmFuc2xhdGUoZncsIGZoKS50cmFuc2xhdGUodHgsIHR5KTtcclxuICAgIGNvbnN0IHsgZXhjZXB0Um93U2V0IH0gPSBkYXRhO1xyXG4gICAgLy8gY29uc3QgZXhjZXB0Um93cyA9IEFycmF5LmZyb20oZXhjZXB0Um93U2V0KTtcclxuICAgIGNvbnN0IGZpbHRlcmVkVHJhbnNsYXRlRnVuYyA9IChyaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldCA9IGV4Y2VwdFJvd1NldC5oYXMocmkpO1xyXG4gICAgICAgIGlmIChyZXQpIHtcclxuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YS5yb3dzLmdldEhlaWdodChyaSk7XHJcbiAgICAgICAgICAgIGRyYXcudHJhbnNsYXRlKDAsIC1oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gIXJldDtcclxuICAgIH07XHJcbiAgICBjb25zdCBleGNlcHRSb3dUb3RhbEhlaWdodCA9IGRhdGEuZXhjZXB0Um93VG90YWxIZWlnaHQodmlld1JhbmdlLnNyaSwgdmlld1JhbmdlLmVyaSk7XHJcbiAgICAvLyAxIHJlbmRlciBjZWxsXHJcbiAgICBkcmF3LnNhdmUoKTtcclxuICAgIGRyYXcudHJhbnNsYXRlKDAsIC1leGNlcHRSb3dUb3RhbEhlaWdodCk7XHJcbiAgICB2aWV3UmFuZ2UuZWFjaCgocmksIGNpKSA9PiB7XHJcbiAgICAgICAgcmVuZGVyQ2VsbChkcmF3LCBkYXRhLCByaSwgY2kpO1xyXG4gICAgfSwgKHJpKSA9PiBmaWx0ZXJlZFRyYW5zbGF0ZUZ1bmMocmkpKTtcclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgLy8gMiByZW5kZXIgbWVyZ2VDZWxsXHJcbiAgICBjb25zdCByc2V0ID0gbmV3IFNldCgpO1xyXG4gICAgZHJhdy5zYXZlKCk7XHJcbiAgICBkcmF3LnRyYW5zbGF0ZSgwLCAtZXhjZXB0Um93VG90YWxIZWlnaHQpO1xyXG4gICAgZGF0YS5lYWNoTWVyZ2VzSW5WaWV3KHZpZXdSYW5nZSwgKHsgc3JpLCBzY2ksIGVyaSB9KSA9PiB7XHJcbiAgICAgICAgaWYgKCFleGNlcHRSb3dTZXQuaGFzKHNyaSkpIHtcclxuICAgICAgICAgICAgcmVuZGVyQ2VsbChkcmF3LCBkYXRhLCBzcmksIHNjaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFyc2V0LmhhcyhzcmkpKSB7XHJcbiAgICAgICAgICAgIHJzZXQuYWRkKHNyaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGRhdGEucm93cy5zdW1IZWlnaHQoc3JpLCBlcmkgKyAxKTtcclxuICAgICAgICAgICAgZHJhdy50cmFuc2xhdGUoMCwgLWhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxuICAgIC8vIDMgcmVuZGVyIGF1dG9maWx0ZXJcclxuICAgIHJlbmRlckF1dG9maWx0ZXIuY2FsbCh0aGlzLCB2aWV3UmFuZ2UpO1xyXG4gICAgZHJhdy5yZXN0b3JlKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyU2VsZWN0ZWRIZWFkZXJDZWxsKHgsIHksIHcsIGgpIHtcclxuICAgIGNvbnN0IHsgZHJhdyB9ID0gdGhpcztcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy5hdHRyKHsgZmlsbFN0eWxlOiAncmdiYSg3NSwgMTM3LCAyNTUsIDAuMDgpJyB9KS5maWxsUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG59XHJcbi8vIHZpZXdSYW5nZVxyXG4vLyB0eXBlOiBhbGwgfCBsZWZ0IHwgdG9wXHJcbi8vIHc6IHRoZSBmaXhlZCB3aWR0aCBvZiBoZWFkZXJcclxuLy8gaDogdGhlIGZpeGVkIGhlaWdodCBvZiBoZWFkZXJcclxuLy8gdHg6IG1vdmluZyBkaXN0YW5jZSBvbiB4LWF4aXNcclxuLy8gdHk6IG1vdmluZyBkaXN0YW5jZSBvbiB5LWF4aXNcclxuZnVuY3Rpb24gcmVuZGVyRml4ZWRIZWFkZXJzKHR5cGUsIHZpZXdSYW5nZSwgdywgaCwgdHgsIHR5KSB7XHJcbiAgICBjb25zdCB7IGRyYXcsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBzdW1IZWlnaHQgPSB2aWV3UmFuZ2UuaDsgLy8gcm93cy5zdW1IZWlnaHQodmlld1JhbmdlLnNyaSwgdmlld1JhbmdlLmVyaSArIDEpO1xyXG4gICAgY29uc3Qgc3VtV2lkdGggPSB2aWV3UmFuZ2UudzsgLy8gY29scy5zdW1XaWR0aCh2aWV3UmFuZ2Uuc2NpLCB2aWV3UmFuZ2UuZWNpICsgMSk7XHJcbiAgICBjb25zdCBudHkgPSB0eSArIGg7XHJcbiAgICBjb25zdCBudHggPSB0eCArIHc7XHJcbiAgICBkcmF3LnNhdmUoKTtcclxuICAgIC8vIGRyYXcgcmVjdCBiYWNrZ3JvdW5kXHJcbiAgICBkcmF3LmF0dHIodGFibGVGaXhlZEhlYWRlckNsZWFuU3R5bGUpO1xyXG4gICAgaWYgKHR5cGUgPT09ICdhbGwnIHx8IHR5cGUgPT09ICdsZWZ0JylcclxuICAgICAgICBkcmF3LmZpbGxSZWN0KDAsIG50eSwgdywgc3VtSGVpZ2h0KTtcclxuICAgIGlmICh0eXBlID09PSAnYWxsJyB8fCB0eXBlID09PSAndG9wJylcclxuICAgICAgICBkcmF3LmZpbGxSZWN0KG50eCwgMCwgc3VtV2lkdGgsIGgpO1xyXG4gICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IGRhdGEuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhLnNlbGVjdEluZGV4ZXMpO1xyXG4gICAgLy8gZHJhdyB0ZXh0XHJcbiAgICAvLyB0ZXh0IGZvbnQsIGFsaWduLi4uXHJcbiAgICBkcmF3LmF0dHIodGFibGVGaXhlZEhlYWRlclN0eWxlKCkpO1xyXG4gICAgLy8geS1oZWFkZXItdGV4dFxyXG4gICAgaWYgKHR5cGUgPT09ICdhbGwnIHx8IHR5cGUgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgIGRhdGEucm93RWFjaCh2aWV3UmFuZ2Uuc3JpLCB2aWV3UmFuZ2UuZXJpLCAoaSwgeTEsIHJvd0hlaWdodCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gbnR5ICsgeTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGlpID0gaTtcclxuICAgICAgICAgICAgZHJhdy5saW5lKFswLCB5XSwgW3csIHldKTtcclxuICAgICAgICAgICAgaWYgKHNyaSA8PSBpaSAmJiBpaSA8IGVyaSArIDEpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlclNlbGVjdGVkSGVhZGVyQ2VsbC5jYWxsKHRoaXMsIDAsIHksIHcsIHJvd0hlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJhdy5maWxsVGV4dChpaSArIDEsIHcgLyAyLCB5ICsgcm93SGVpZ2h0IC8gMik7XHJcbiAgICAgICAgICAgIGlmIChpID4gMCAmJiBkYXRhLnJvd3MuaXNIaWRlKGkgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgZHJhdy5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICBkcmF3LmF0dHIoeyBzdHJva2VTdHlsZTogJyNjNmM2YzYnIH0pO1xyXG4gICAgICAgICAgICAgICAgZHJhdy5saW5lKFs1LCB5ICsgNV0sIFt3IC0gNSwgeSArIDVdKTtcclxuICAgICAgICAgICAgICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJhdy5saW5lKFswLCBzdW1IZWlnaHQgKyBudHldLCBbdywgc3VtSGVpZ2h0ICsgbnR5XSk7XHJcbiAgICAgICAgZHJhdy5saW5lKFt3LCBudHldLCBbdywgc3VtSGVpZ2h0ICsgbnR5XSk7XHJcbiAgICB9XHJcbiAgICAvLyB4LWhlYWRlci10ZXh0XHJcbiAgICBpZiAodHlwZSA9PT0gJ2FsbCcgfHwgdHlwZSA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBkYXRhLmNvbEVhY2godmlld1JhbmdlLnNjaSwgdmlld1JhbmdlLmVjaSwgKGksIHgxLCBjb2xXaWR0aCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gbnR4ICsgeDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGlpID0gaTtcclxuICAgICAgICAgICAgZHJhdy5saW5lKFt4LCAwXSwgW3gsIGhdKTtcclxuICAgICAgICAgICAgaWYgKHNjaSA8PSBpaSAmJiBpaSA8IGVjaSArIDEpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlclNlbGVjdGVkSGVhZGVyQ2VsbC5jYWxsKHRoaXMsIHgsIDAsIGNvbFdpZHRoLCBoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcmF3LmZpbGxUZXh0KHN0cmluZ0F0KGlpKSwgeCArIGNvbFdpZHRoIC8gMiwgaCAvIDIpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IDAgJiYgZGF0YS5jb2xzLmlzSGlkZShpIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgZHJhdy5hdHRyKHsgc3Ryb2tlU3R5bGU6ICcjYzZjNmM2JyB9KTtcclxuICAgICAgICAgICAgICAgIGRyYXcubGluZShbeCArIDUsIDVdLCBbeCArIDUsIGggLSA1XSk7XHJcbiAgICAgICAgICAgICAgICBkcmF3LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyYXcubGluZShbc3VtV2lkdGggKyBudHgsIDBdLCBbc3VtV2lkdGggKyBudHgsIGhdKTtcclxuICAgICAgICBkcmF3LmxpbmUoWzAsIGhdLCBbc3VtV2lkdGggKyBudHgsIGhdKTtcclxuICAgIH1cclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckZpeGVkTGVmdFRvcENlbGwoZncsIGZoKSB7XHJcbiAgICBjb25zdCB7IGRyYXcgfSA9IHRoaXM7XHJcbiAgICBkcmF3LnNhdmUoKTtcclxuICAgIC8vIGxlZnQtdG9wLWNlbGxcclxuICAgIGRyYXcuYXR0cih7IGZpbGxTdHlsZTogJyNmNGY1ZjgnIH0pLmZpbGxSZWN0KDAsIDAsIGZ3LCBmaCk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJDb250ZW50R3JpZCh7IHNyaSwgc2NpLCBlcmksIGVjaSwgdywgaCB9LCBmdywgZmgsIHR4LCB0eSkge1xyXG4gICAgY29uc3QgeyBkcmF3LCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBzZXR0aW5ncyB9ID0gZGF0YTtcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy5hdHRyKHRhYmxlR3JpZFN0eWxlKS50cmFuc2xhdGUoZncgKyB0eCwgZmggKyB0eSk7XHJcbiAgICAvLyBjb25zdCBzdW1XaWR0aCA9IGNvbHMuc3VtV2lkdGgoc2NpLCBlY2kgKyAxKTtcclxuICAgIC8vIGNvbnN0IHN1bUhlaWdodCA9IHJvd3Muc3VtSGVpZ2h0KHNyaSwgZXJpICsgMSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc3VtV2lkdGg6Jywgc3VtV2lkdGgpO1xyXG4gICAgLy8gZHJhdy5jbGVhclJlY3QoMCwgMCwgdywgaCk7XHJcbiAgICBpZiAoIXNldHRpbmdzLnNob3dHcmlkKSB7XHJcbiAgICAgICAgZHJhdy5yZXN0b3JlKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ3Jvd1N0YXJ0OicsIHJvd1N0YXJ0LCAnLCByb3dMZW46Jywgcm93TGVuKTtcclxuICAgIGRhdGEucm93RWFjaChzcmksIGVyaSwgKGksIHksIGNoKSA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3k6JywgeSk7XHJcbiAgICAgICAgaWYgKGkgIT09IHNyaSlcclxuICAgICAgICAgICAgZHJhdy5saW5lKFswLCB5XSwgW3csIHldKTtcclxuICAgICAgICBpZiAoaSA9PT0gZXJpKVxyXG4gICAgICAgICAgICBkcmF3LmxpbmUoWzAsIHkgKyBjaF0sIFt3LCB5ICsgY2hdKTtcclxuICAgIH0pO1xyXG4gICAgZGF0YS5jb2xFYWNoKHNjaSwgZWNpLCAoaSwgeCwgY3cpID0+IHtcclxuICAgICAgICBpZiAoaSAhPT0gc2NpKVxyXG4gICAgICAgICAgICBkcmF3LmxpbmUoW3gsIDBdLCBbeCwgaF0pO1xyXG4gICAgICAgIGlmIChpID09PSBlY2kpXHJcbiAgICAgICAgICAgIGRyYXcubGluZShbeCArIGN3LCAwXSwgW3ggKyBjdywgaF0pO1xyXG4gICAgfSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJGcmVlemVIaWdobGlnaHRMaW5lKGZ3LCBmaCwgZnR3LCBmdGgpIHtcclxuICAgIGNvbnN0IHsgZHJhdywgZGF0YSB9ID0gdGhpcztcclxuICAgIGNvbnN0IHR3aWR0aCA9IGRhdGEudmlld1dpZHRoKCkgLSBmdztcclxuICAgIGNvbnN0IHRoZWlnaHQgPSBkYXRhLnZpZXdIZWlnaHQoKSAtIGZoO1xyXG4gICAgZHJhdy5zYXZlKCkudHJhbnNsYXRlKGZ3LCBmaCkuYXR0cih7IHN0cm9rZVN0eWxlOiAncmdiYSg3NSwgMTM3LCAyNTUsIC42KScgfSk7XHJcbiAgICBkcmF3LmxpbmUoWzAsIGZ0aF0sIFt0d2lkdGgsIGZ0aF0pO1xyXG4gICAgZHJhdy5saW5lKFtmdHcsIDBdLCBbZnR3LCB0aGVpZ2h0XSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxufVxyXG4vKiogZW5kICovXHJcbmNsYXNzIFRhYmxlIHtcclxuICAgIGVsO1xyXG4gICAgZHJhdztcclxuICAgIGRhdGE7XHJcbiAgICBjb25zdHJ1Y3RvcihlbCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgICB0aGlzLmRyYXcgPSBuZXcgRHJhdyhlbCwgZGF0YS52aWV3V2lkdGgoKSwgZGF0YS52aWV3SGVpZ2h0KCkpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAvLyByZXNpemUgY2FudmFzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gZGF0YTtcclxuICAgICAgICAvLyBmaXhlZCB3aWR0aCBvZiBoZWFkZXJcclxuICAgICAgICBjb25zdCBmdyA9IGNvbHMuaW5kZXhXaWR0aDtcclxuICAgICAgICAvLyBmaXhlZCBoZWlnaHQgb2YgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgZmggPSByb3dzLmhlaWdodDtcclxuICAgICAgICB0aGlzLmRyYXcucmVzaXplKGRhdGEudmlld1dpZHRoKCksIGRhdGEudmlld0hlaWdodCgpKTtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgY29uc3Qgdmlld1JhbmdlID0gZGF0YS52aWV3UmFuZ2UoKTtcclxuICAgICAgICAvLyByZW5kZXJBbGwuY2FsbCh0aGlzLCB2aWV3UmFuZ2UsIGRhdGEuc2Nyb2xsKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IHR5ID0gZGF0YS5mcmVlemVUb3RhbEhlaWdodCgpO1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZGF0YS5zY3JvbGw7XHJcbiAgICAgICAgLy8gMVxyXG4gICAgICAgIHJlbmRlckNvbnRlbnRHcmlkLmNhbGwodGhpcywgdmlld1JhbmdlLCBmdywgZmgsIHR4LCB0eSk7XHJcbiAgICAgICAgcmVuZGVyQ29udGVudC5jYWxsKHRoaXMsIHZpZXdSYW5nZSwgZncsIGZoLCAteCwgLXkpO1xyXG4gICAgICAgIHJlbmRlckZpeGVkSGVhZGVycy5jYWxsKHRoaXMsICdhbGwnLCB2aWV3UmFuZ2UsIGZ3LCBmaCwgdHgsIHR5KTtcclxuICAgICAgICByZW5kZXJGaXhlZExlZnRUb3BDZWxsLmNhbGwodGhpcywgZncsIGZoKTtcclxuICAgICAgICBjb25zdCBbZnJpLCBmY2ldID0gZGF0YS5mcmVlemU7XHJcbiAgICAgICAgaWYgKGZyaSA+IDAgfHwgZmNpID4gMCkge1xyXG4gICAgICAgICAgICAvLyAyXHJcbiAgICAgICAgICAgIGlmIChmcmkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ciA9IHZpZXdSYW5nZS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgdnIuc3JpID0gMDtcclxuICAgICAgICAgICAgICAgIHZyLmVyaSA9IGZyaSAtIDE7XHJcbiAgICAgICAgICAgICAgICB2ci5oID0gdHk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50R3JpZC5jYWxsKHRoaXMsIHZyLCBmdywgZmgsIHR4LCAwKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnQuY2FsbCh0aGlzLCB2ciwgZncsIGZoLCAteCwgMCk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJGaXhlZEhlYWRlcnMuY2FsbCh0aGlzLCAndG9wJywgdnIsIGZ3LCBmaCwgdHgsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIDNcclxuICAgICAgICAgICAgaWYgKGZjaSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZyID0gdmlld1JhbmdlLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICB2ci5zY2kgPSAwO1xyXG4gICAgICAgICAgICAgICAgdnIuZWNpID0gZmNpIC0gMTtcclxuICAgICAgICAgICAgICAgIHZyLncgPSB0eDtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnRHcmlkLmNhbGwodGhpcywgdnIsIGZ3LCBmaCwgMCwgdHkpO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyRml4ZWRIZWFkZXJzLmNhbGwodGhpcywgJ2xlZnQnLCB2ciwgZncsIGZoLCAwLCB0eSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50LmNhbGwodGhpcywgdnIsIGZ3LCBmaCwgMCwgLXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIDRcclxuICAgICAgICAgICAgY29uc3QgZnJlZXplVmlld1JhbmdlID0gZGF0YS5mcmVlemVWaWV3UmFuZ2UoKTtcclxuICAgICAgICAgICAgcmVuZGVyQ29udGVudEdyaWQuY2FsbCh0aGlzLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHJlbmRlckZpeGVkSGVhZGVycy5jYWxsKHRoaXMsICdhbGwnLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHJlbmRlckNvbnRlbnQuY2FsbCh0aGlzLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vIDVcclxuICAgICAgICAgICAgcmVuZGVyRnJlZXplSGlnaGxpZ2h0TGluZS5jYWxsKHRoaXMsIGZ3LCBmaCwgdHgsIHR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmRyYXcuY2xlYXIoKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBUYWJsZTtcclxuIiwiaW1wb3J0IHsgRHJvcGRvd25JdGVtIH0gZnJvbSAnLi9kcm9wZG93bl9pdGVtJztcclxuaW1wb3J0IERyb3Bkb3duQWxpZ24gZnJvbSAnLi4vZHJvcGRvd25fYWxpZ24nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGlnbiBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgICAgIHN1cGVyKCdhbGlnbicsICcnLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkFsaWduKFsnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGQuY2hhbmdlID0gKGl0KSA9PiB0aGlzLmNoYW5nZSh0aGlzLnRhZywgdGhpcy5nZXRWYWx1ZShpdCkpO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGhpcy5kZCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFRvZ2dsZUl0ZW0gZnJvbSAnLi90b2dnbGVfaXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9maWx0ZXIgZXh0ZW5kcyBUb2dnbGVJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdhdXRvZmlsdGVyJyk7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZSgpIHsgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2xkIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9udC1ib2xkJywgJ0N0cmwrQicpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkJvcmRlciBmcm9tICcuLi9kcm9wZG93bl9ib3JkZXInO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3JkZXIgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2JvcmRlcicpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Cb3JkZXIoKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJY29uSXRlbSBmcm9tICcuL2ljb25faXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsZWFyZm9ybWF0IGV4dGVuZHMgSWNvbkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2NsZWFyZm9ybWF0Jyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuZXhwb3J0IGNsYXNzIERyb3Bkb3duSXRlbSBleHRlbmRzIEl0ZW0ge1xyXG4gICAgZGQ7XHJcbiAgICBnZXRWYWx1ZSh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZSh2KSB7XHJcbiAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy52YWx1ZSA9IHY7XHJcbiAgICAgICAgICAgIHRoaXMuZGQuc2V0VGl0bGUodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkNvbG9yIGZyb20gJy4uL2Ryb3Bkb3duX2NvbG9yJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsbENvbG9yIGV4dGVuZHMgRHJvcGRvd25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbG9yKSB7XHJcbiAgICAgICAgc3VwZXIoJ2JnY29sb3InLCB1bmRlZmluZWQsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkID0gbmV3IERyb3Bkb3duQ29sb3IodGhpcy50YWcsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvbnQgZnJvbSAnLi4vZHJvcGRvd25fZm9udCc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbnQgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2ZvbnQtbmFtZScpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb250KCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LmtleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEcm9wZG93bkl0ZW0gfSBmcm9tICcuL2Ryb3Bkb3duX2l0ZW0nO1xyXG5pbXBvcnQgRHJvcGRvd25Gb250c2l6ZSBmcm9tICcuLi9kcm9wZG93bl9mb250c2l6ZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdCBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9udC1zaXplJyk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkZvbnRzaXplKCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LnB0O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvcm1hdCBmcm9tICcuLi9kcm9wZG93bl9mb3JtYXQnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtYXQgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2Zvcm1hdCcpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb3JtYXQoKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG4gICAgZ2V0VmFsdWUoaXQpIHtcclxuICAgICAgICByZXR1cm4gaXQua2V5O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvcm11bGEgZnJvbSAnLi4vZHJvcGRvd25fZm9ybXVsYSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdCBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9ybXVsYScpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb3JtdWxhKCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LmtleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJlZXplIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZnJlZXplJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb25JdGVtIGV4dGVuZHMgSXRlbSB7XHJcbiAgICBlbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBzdXBlclxyXG4gICAgICAgICAgICAuZWxlbWVudCgpXHJcbiAgICAgICAgICAgIC5jaGlsZChuZXcgSWNvbih0aGlzLnRhZykpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB0aGlzLmNoYW5nZSh0aGlzLnRhZykpO1xyXG4gICAgfVxyXG4gICAgc2V0U3RhdGUoZGlzYWJsZWQpIHtcclxuICAgICAgICB0aGlzLmVsLmRpc2FibGVkKGRpc2FibGVkKTtcclxuICAgIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgd2luZG93ICovXHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uLy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmluZCB9IGZyb20gJy4uL2V2ZW50JztcclxuaW1wb3J0IEFsaWduIGZyb20gJy4vYWxpZ24nO1xyXG5pbXBvcnQgQXV0b2ZpbHRlciBmcm9tICcuL2F1dG9maWx0ZXInO1xyXG5pbXBvcnQgQm9sZCBmcm9tICcuL2JvbGQnO1xyXG5pbXBvcnQgQm9yZGVyIGZyb20gJy4vYm9yZGVyJztcclxuaW1wb3J0IENsZWFyZm9ybWF0IGZyb20gJy4vY2xlYXJmb3JtYXQnO1xyXG5pbXBvcnQgRmlsbENvbG9yIGZyb20gJy4vZmlsbF9jb2xvcic7XHJcbmltcG9ydCBGb250IGZyb20gJy4vZm9udCc7XHJcbmltcG9ydCBGb250U2l6ZSBmcm9tICcuL2ZvbnRfc2l6ZSc7XHJcbmltcG9ydCBGb3JtYXQgZnJvbSAnLi9mb3JtYXQnO1xyXG5pbXBvcnQgRm9ybXVsYSBmcm9tICcuL2Zvcm11bGEnO1xyXG5pbXBvcnQgRnJlZXplIGZyb20gJy4vZnJlZXplJztcclxuaW1wb3J0IEl0YWxpYyBmcm9tICcuL2l0YWxpYyc7XHJcbmltcG9ydCBJdGVtIGZyb20gJy4vaXRlbSc7XHJcbmltcG9ydCBNZXJnZSBmcm9tICcuL21lcmdlJztcclxuaW1wb3J0IE1vcmUgZnJvbSAnLi9tb3JlJztcclxuaW1wb3J0IFBhaW50Zm9ybWF0IGZyb20gJy4vcGFpbnRmb3JtYXQnO1xyXG5pbXBvcnQgUHJpbnQgZnJvbSAnLi9wcmludCc7XHJcbmltcG9ydCBSZWRvIGZyb20gJy4vcmVkbyc7XHJcbmltcG9ydCBTdHJpa2UgZnJvbSAnLi9zdHJpa2UnO1xyXG5pbXBvcnQgVGV4dENvbG9yIGZyb20gJy4vdGV4dF9jb2xvcic7XHJcbmltcG9ydCBUZXh0d3JhcCBmcm9tICcuL3RleHR3cmFwJztcclxuaW1wb3J0IFVuZGVybGluZSBmcm9tICcuL3VuZGVybGluZSc7XHJcbmltcG9ydCBVbmRvIGZyb20gJy4vdW5kbyc7XHJcbmltcG9ydCBWYWxpZ24gZnJvbSAnLi92YWxpZ24nO1xyXG5mdW5jdGlvbiBidWlsZERpdmlkZXIoKSB7XHJcbiAgICByZXR1cm4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b29sYmFyLWRpdmlkZXJgKTtcclxufVxyXG5mdW5jdGlvbiBnZW5CdG4oaXQpIHtcclxuICAgIGNvbnN0IGJ0biA9IG5ldyBJdGVtKCk7XHJcbiAgICBidG4uZWwub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpdC5vbkNsaWNrKVxyXG4gICAgICAgICAgICBpdC5vbkNsaWNrKHRoaXMuZGF0YS5nZXREYXRhKCksIHRoaXMuZGF0YSk7XHJcbiAgICB9KTtcclxuICAgIGJ0bi50aXAgPSBpdC50aXAgfHwgJyc7XHJcbiAgICBsZXQgeyBlbCB9ID0gaXQ7XHJcbiAgICBpZiAoaXQuaWNvbikge1xyXG4gICAgICAgIGVsID0gaCgnaW1nJykuYXR0cignc3JjJywgaXQuaWNvbik7XHJcbiAgICB9XHJcbiAgICBpZiAoZWwpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pY29uYCk7XHJcbiAgICAgICAgaWNvbi5jaGlsZChlbCk7XHJcbiAgICAgICAgYnRuLmVsLmNoaWxkKGljb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ0bjtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcclxuICAgIGRhdGE7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICB3aWR0aEZuO1xyXG4gICAgaXNIaWRlO1xyXG4gICAgaXRlbXM7XHJcbiAgICB1bmRvRWw7XHJcbiAgICByZWRvRWw7XHJcbiAgICBwYWludGZvcm1hdEVsO1xyXG4gICAgY2xlYXJmb3JtYXRFbDtcclxuICAgIGZvcm1hdEVsO1xyXG4gICAgZm9udEVsO1xyXG4gICAgZm9udFNpemVFbDtcclxuICAgIGJvbGRFbDtcclxuICAgIGl0YWxpY0VsO1xyXG4gICAgdW5kZXJsaW5lRWw7XHJcbiAgICBzdHJpa2VFbDtcclxuICAgIHRleHRDb2xvckVsO1xyXG4gICAgZmlsbENvbG9yRWw7XHJcbiAgICBib3JkZXJFbDtcclxuICAgIG1lcmdlRWw7XHJcbiAgICBhbGlnbkVsO1xyXG4gICAgdmFsaWduRWw7XHJcbiAgICB0ZXh0d3JhcEVsO1xyXG4gICAgZnJlZXplRWw7XHJcbiAgICBhdXRvZmlsdGVyRWw7XHJcbiAgICBmb3JtdWxhRWw7XHJcbiAgICBtb3JlRWw7XHJcbiAgICBlbDtcclxuICAgIGJ0bnM7XHJcbiAgICBidG5zMjtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHdpZHRoRm4sIGlzSGlkZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLndpZHRoRm4gPSB3aWR0aEZuO1xyXG4gICAgICAgIHRoaXMuaXNIaWRlID0gaXNIaWRlO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZGF0YS5kZWZhdWx0U3R5bGUoKTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW1xyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAodGhpcy51bmRvRWwgPSBuZXcgVW5kbygpKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLnJlZG9FbCA9IG5ldyBSZWRvKCkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFByaW50KCksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5wYWludGZvcm1hdEVsID0gbmV3IFBhaW50Zm9ybWF0KCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuY2xlYXJmb3JtYXRFbCA9IG5ldyBDbGVhcmZvcm1hdCgpKSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgYnVpbGREaXZpZGVyKCksXHJcbiAgICAgICAgICAgIFsodGhpcy5mb3JtYXRFbCA9IG5ldyBGb3JtYXQoKSldLFxyXG4gICAgICAgICAgICBidWlsZERpdmlkZXIoKSxcclxuICAgICAgICAgICAgWyh0aGlzLmZvbnRFbCA9IG5ldyBGb250KCkpLCAodGhpcy5mb250U2l6ZUVsID0gbmV3IEZvbnRTaXplKCkpXSxcclxuICAgICAgICAgICAgYnVpbGREaXZpZGVyKCksXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICh0aGlzLmJvbGRFbCA9IG5ldyBCb2xkKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuaXRhbGljRWwgPSBuZXcgSXRhbGljKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMudW5kZXJsaW5lRWwgPSBuZXcgVW5kZXJsaW5lKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3RyaWtlRWwgPSBuZXcgU3RyaWtlKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMudGV4dENvbG9yRWwgPSBuZXcgVGV4dENvbG9yKHN0eWxlLmNvbG9yKSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGJ1aWxkRGl2aWRlcigpLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAodGhpcy5maWxsQ29sb3JFbCA9IG5ldyBGaWxsQ29sb3Ioc3R5bGUuYmdjb2xvcikpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuYm9yZGVyRWwgPSBuZXcgQm9yZGVyKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMubWVyZ2VFbCA9IG5ldyBNZXJnZSgpKSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgYnVpbGREaXZpZGVyKCksXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICh0aGlzLmFsaWduRWwgPSBuZXcgQWxpZ24oc3R5bGUuYWxpZ24pKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLnZhbGlnbkVsID0gbmV3IFZhbGlnbihzdHlsZS52YWxpZ24pKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLnRleHR3cmFwRWwgPSBuZXcgVGV4dHdyYXAoKSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGJ1aWxkRGl2aWRlcigpLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAodGhpcy5mcmVlemVFbCA9IG5ldyBGcmVlemUoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5hdXRvZmlsdGVyRWwgPSBuZXcgQXV0b2ZpbHRlcigpKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLmZvcm11bGFFbCA9IG5ldyBGb3JtdWxhKCkpLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgeyBleHRlbmRUb29sYmFyID0ge30gfSA9IGRhdGEuc2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKGV4dGVuZFRvb2xiYXIubGVmdCAmJiBleHRlbmRUb29sYmFyLmxlZnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zLnVuc2hpZnQoYnVpbGREaXZpZGVyKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBidG5zID0gZXh0ZW5kVG9vbGJhci5sZWZ0Lm1hcChnZW5CdG4uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMudW5zaGlmdChidG5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV4dGVuZFRvb2xiYXIucmlnaHQgJiYgZXh0ZW5kVG9vbGJhci5yaWdodC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChidWlsZERpdmlkZXIoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bnMgPSBleHRlbmRUb29sYmFyLnJpZ2h0Lm1hcChnZW5CdG4uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChidG5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKFsodGhpcy5tb3JlRWwgPSBuZXcgTW9yZSgpKV0pO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXJgKTtcclxuICAgICAgICB0aGlzLmJ0bnMgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXItYnRuc2ApO1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQpKSB7XHJcbiAgICAgICAgICAgICAgICBpdC5mb3JFYWNoKChpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5zLmNoaWxkKGkuZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkuY2hhbmdlID0gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5zLmNoaWxkKGl0LmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGhpcy5idG5zKTtcclxuICAgICAgICBpZiAoaXNIaWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEJ0bnMyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vcmVSZXNpemUoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIGJpbmQod2luZG93LCAncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3JlUmVzaXplKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vcmVSZXNpemUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBlbCwgYnRucywgbW9yZUVsLCBidG5zMiB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IG1vcmVCdG5zLCBjb250ZW50RWwgfSA9IG1vcmVFbC5kZDtcclxuICAgICAgICBlbC5jc3MoJ3dpZHRoJywgYCR7dGhpcy53aWR0aEZuKCl9cHhgKTtcclxuICAgICAgICBjb25zdCBlbEJveCA9IGVsLmJveCgpO1xyXG4gICAgICAgIGxldCBzdW1XaWR0aCA9IDE2MDtcclxuICAgICAgICBsZXQgc3VtV2lkdGgyID0gMTI7XHJcbiAgICAgICAgY29uc3QgbGlzdDEgPSBbXTtcclxuICAgICAgICBjb25zdCBsaXN0MiA9IFtdO1xyXG4gICAgICAgIGJ0bnMyLmZvckVhY2goKFtpdCwgd10sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHN1bVdpZHRoICs9IHc7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gYnRuczIubGVuZ3RoIC0gMSB8fCBzdW1XaWR0aCA8IGVsQm94LndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0MS5wdXNoKGl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN1bVdpZHRoMiArPSB3O1xyXG4gICAgICAgICAgICAgICAgbGlzdDIucHVzaChpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBidG5zLmh0bWwoJycpLmNoaWxkcmVuKC4uLmxpc3QxKTtcclxuICAgICAgICBtb3JlQnRucy5odG1sKCcnKS5jaGlsZHJlbiguLi5saXN0Mik7XHJcbiAgICAgICAgY29udGVudEVsLmNzcygnd2lkdGgnLCBgJHtzdW1XaWR0aDJ9cHhgKTtcclxuICAgICAgICBpZiAobGlzdDIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBtb3JlRWwuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbW9yZUVsLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0QnRuczIoKSB7XHJcbiAgICAgICAgdGhpcy5idG5zMiA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQpKSB7XHJcbiAgICAgICAgICAgICAgICBpdC5mb3JFYWNoKCh7IGVsIH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZWwuYm94KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtYXJnaW5MZWZ0LCBtYXJnaW5SaWdodCB9ID0gZWwuY29tcHV0ZWRTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuczIucHVzaChbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LndpZHRoICsgcGFyc2VJbnQobWFyZ2luTGVmdCwgMTApICsgcGFyc2VJbnQobWFyZ2luUmlnaHQsIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGl0LmJveCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBtYXJnaW5MZWZ0LCBtYXJnaW5SaWdodCB9ID0gaXQuY29tcHV0ZWRTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5zMi5wdXNoKFtcclxuICAgICAgICAgICAgICAgICAgICBpdCxcclxuICAgICAgICAgICAgICAgICAgICByZWN0LndpZHRoICsgcGFyc2VJbnQobWFyZ2luTGVmdCwgMTApICsgcGFyc2VJbnQobWFyZ2luUmlnaHQsIDEwKSxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwYWludGZvcm1hdEFjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYWludGZvcm1hdEVsLmFjdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgcGFpbnRmb3JtYXRUb2dnbGUoKSB7XHJcbiAgICAgICAgdGhpcy5wYWludGZvcm1hdEVsLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG4gICAgdHJpZ2dlcih0eXBlKSB7XHJcbiAgICAgICAgdGhpc1tgJHt0eXBlfUVsYF0uY2xpY2soKTtcclxuICAgIH1cclxuICAgIHJlc2V0RGF0YShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hpZGUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkYXRhLmdldFNlbGVjdGVkQ2VsbFN0eWxlKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NhblVuZG86JywgZGF0YS5jYW5VbmRvKCkpO1xyXG4gICAgICAgIHRoaXMudW5kb0VsLnNldFN0YXRlKCFkYXRhLmNhblVuZG8oKSk7XHJcbiAgICAgICAgdGhpcy5yZWRvRWwuc2V0U3RhdGUoIWRhdGEuY2FuUmVkbygpKTtcclxuICAgICAgICB0aGlzLm1lcmdlRWwuc2V0U3RhdGUoZGF0YS5jYW5Vbm1lcmdlKCksICFkYXRhLnNlbGVjdG9yLm11bHRpcGxlKCkpO1xyXG4gICAgICAgIC8vIHRoaXMuYXV0b2ZpbHRlckVsLnNldFN0YXRlKCFkYXRhLmNhbkF1dG9maWx0ZXIoKSk7XHJcbiAgICAgICAgLy8gdGhpcy5tZXJnZUVsLmRpc2FibGVkKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdGVkQ2VsbDonLCBzdHlsZSwgY2VsbCk7XHJcbiAgICAgICAgY29uc3QgeyBmb250LCBmb3JtYXQgfSA9IHN0eWxlO1xyXG4gICAgICAgIHRoaXMuZm9ybWF0RWwuc2V0U3RhdGUoZm9ybWF0KTtcclxuICAgICAgICB0aGlzLmZvbnRFbC5zZXRTdGF0ZShmb250Lm5hbWUpO1xyXG4gICAgICAgIHRoaXMuZm9udFNpemVFbC5zZXRTdGF0ZShmb250LnNpemUpO1xyXG4gICAgICAgIHRoaXMuYm9sZEVsLnNldFN0YXRlKGZvbnQuYm9sZCk7XHJcbiAgICAgICAgdGhpcy5pdGFsaWNFbC5zZXRTdGF0ZShmb250Lml0YWxpYyk7XHJcbiAgICAgICAgdGhpcy51bmRlcmxpbmVFbC5zZXRTdGF0ZShzdHlsZS51bmRlcmxpbmUpO1xyXG4gICAgICAgIHRoaXMuc3RyaWtlRWwuc2V0U3RhdGUoc3R5bGUuc3RyaWtlKTtcclxuICAgICAgICB0aGlzLnRleHRDb2xvckVsLnNldFN0YXRlKHN0eWxlLmNvbG9yKTtcclxuICAgICAgICB0aGlzLmZpbGxDb2xvckVsLnNldFN0YXRlKHN0eWxlLmJnY29sb3IpO1xyXG4gICAgICAgIHRoaXMuYWxpZ25FbC5zZXRTdGF0ZShzdHlsZS5hbGlnbik7XHJcbiAgICAgICAgdGhpcy52YWxpZ25FbC5zZXRTdGF0ZShzdHlsZS52YWxpZ24pO1xyXG4gICAgICAgIHRoaXMudGV4dHdyYXBFbC5zZXRTdGF0ZShzdHlsZS50ZXh0d3JhcCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZyZWV6ZSBpcyBBY3RpdmU6JywgZGF0YS5mcmVlemVJc0FjdGl2ZSgpKTtcclxuICAgICAgICB0aGlzLmZyZWV6ZUVsLnNldFN0YXRlKGRhdGEuZnJlZXplSXNBY3RpdmUoKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFRvZ2dsZUl0ZW0gZnJvbSAnLi90b2dnbGVfaXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEl0YWxpYyBleHRlbmRzIFRvZ2dsZUl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2ZvbnQtaXRhbGljJywgJ0N0cmwrSScpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uLy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IHRvb2x0aXAgfSBmcm9tICcuLi90b29sdGlwJztcclxuaW1wb3J0IHsgaCB9IGZyb20gJy4uL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyB0IH0gZnJvbSAnLi4vLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEl0ZW0ge1xyXG4gICAgdGlwO1xyXG4gICAgdGFnO1xyXG4gICAgc2hvcnRjdXQ7XHJcbiAgICAvLyB2YWx1ZTogYW55O1xyXG4gICAgZWw7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICAvLyB0b29sdGlwXHJcbiAgICAvLyB0YWc6IHRoZSBzdWJjbGFzcyB0eXBlXHJcbiAgICAvLyBzaG9ydGN1dDogc2hvcnRjdXQga2V5XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWcsIHNob3J0Y3V0LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudGlwID0gJyc7XHJcbiAgICAgICAgaWYgKHRhZykge1xyXG4gICAgICAgICAgICB0aGlzLnRpcCA9IHQoYHRvb2xiYXIuJHt0YWcucmVwbGFjZSgvLVthLXpdL2csIChjKSA9PiBjWzFdLnRvVXBwZXJDYXNlKCkpfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2hvcnRjdXQpIHtcclxuICAgICAgICAgICAgdGhpcy50aXAgKz0gYCAoJHtzaG9ydGN1dH0pYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YWcgPSB0YWc7XHJcbiAgICAgICAgdGhpcy5zaG9ydGN1dCA9IHNob3J0Y3V0O1xyXG4gICAgICAgIC8vIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmVsID0gdGhpcy5lbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICB9XHJcbiAgICBlbGVtZW50KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGlwIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXItYnRuYClcclxuICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aXApXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwKHRoaXMudGlwLCBldnQudGFyZ2V0KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cignZGF0YS10b29sdGlwJywgdGlwKTtcclxuICAgIH1cclxuICAgIHNldFN0YXRlKC4uLmFyZ3MpIHsgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXJnZSBleHRlbmRzIFRvZ2dsZUl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ21lcmdlJyk7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZShhY3RpdmUsIGRpc2FibGVkKSB7XHJcbiAgICAgICAgdGhpcy5lbC5hY3RpdmUoYWN0aXZlKS5kaXNhYmxlZChkaXNhYmxlZCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4uL2Ryb3Bkb3duJztcclxuaW1wb3J0IHsgRHJvcGRvd25JdGVtIH0gZnJvbSAnLi9kcm9wZG93bl9pdGVtJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vLi4vY29uZmlnJztcclxuaW1wb3J0IHsgaCB9IGZyb20gJy4uL2VsZW1lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuLi9pY29uJztcclxuY2xhc3MgRHJvcGRvd25Nb3JlIGV4dGVuZHMgRHJvcGRvd24ge1xyXG4gICAgbW9yZUJ0bnM7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oJ2VsbGlwc2lzJyk7XHJcbiAgICAgICAgY29uc3QgbW9yZUJ0bnMgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXItbW9yZWApO1xyXG4gICAgICAgIHN1cGVyKGljb24sICdhdXRvJywgZmFsc2UsICdib3R0b20tcmlnaHQnLCBtb3JlQnRucyk7XHJcbiAgICAgICAgdGhpcy5tb3JlQnRucyA9IG1vcmVCdG5zO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmNzcygnbWF4LXdpZHRoJywgJzQyMHB4Jyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9yZSBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignbW9yZScpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Nb3JlKCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWludGZvcm1hdCBleHRlbmRzIFRvZ2dsZUl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ3BhaW50Zm9ybWF0Jyk7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZSgpIHsgfVxyXG59XHJcbiIsImltcG9ydCBJY29uSXRlbSBmcm9tICcuL2ljb25faXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByaW50IGV4dGVuZHMgSWNvbkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ3ByaW50JywgJ0N0cmwrUCcpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJY29uSXRlbSBmcm9tICcuL2ljb25faXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZG8gZXh0ZW5kcyBJY29uSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigncmVkbycsICdDdHJsK1knKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaWtlIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignc3RyaWtlJywgJ0N0cmwrVScpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkNvbG9yIGZyb20gJy4uL2Ryb3Bkb3duX2NvbG9yJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dENvbG9yIGV4dGVuZHMgRHJvcGRvd25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbG9yKSB7XHJcbiAgICAgICAgc3VwZXIoJ2NvbG9yJywgdW5kZWZpbmVkLCBjb2xvcik7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkNvbG9yKHRoaXMudGFnLCBjb2xvcik7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dHdyYXAgZXh0ZW5kcyBUb2dnbGVJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCd0ZXh0d3JhcCcpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJdGVtIGZyb20gJy4vaXRlbSc7XHJcbmltcG9ydCBJY29uIGZyb20gJy4uL2ljb24nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2dnbGVJdGVtIGV4dGVuZHMgSXRlbSB7XHJcbiAgICBlbGVtZW50KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFnIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBzdXBlclxyXG4gICAgICAgICAgICAuZWxlbWVudCgpXHJcbiAgICAgICAgICAgIC5jaGlsZChuZXcgSWNvbih0YWcpKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5jbGljaygpKTtcclxuICAgIH1cclxuICAgIGNsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLnRvZ2dsZSgpKTtcclxuICAgIH1cclxuICAgIHNldFN0YXRlKGFjdGl2ZSwgZGlzYWJsZWQpIHtcclxuICAgICAgICB0aGlzLmVsLmFjdGl2ZShhY3RpdmUpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG4gICAgYWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmhhc0NsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5kZXJsaW5lIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigndW5kZXJsaW5lJywgJ0N0cmwrVScpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJY29uSXRlbSBmcm9tICcuL2ljb25faXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuZG8gZXh0ZW5kcyBJY29uSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigndW5kbycsICdDdHJsK1onKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEcm9wZG93bkl0ZW0gfSBmcm9tICcuL2Ryb3Bkb3duX2l0ZW0nO1xyXG5pbXBvcnQgRHJvcGRvd25BbGlnbiBmcm9tICcuLi9kcm9wZG93bl9hbGlnbic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlnbiBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgICAgIHN1cGVyKCd2YWxpZ24nLCAnJywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25BbGlnbihbJ3RvcCcsICdtaWRkbGUnLCAnYm90dG9tJ10sIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCBkb2N1bWVudCAqL1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmluZCB9IGZyb20gJy4vZXZlbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZnVuY3Rpb24gdG9vbHRpcChodG1sLCB0YXJnZXQpIHtcclxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBlbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbHRpcGApLmh0bWwoaHRtbCkuc2hvdygpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbC5lbCk7XHJcbiAgICBjb25zdCBlbEJveCA9IGVsLmJveCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2VsQm94OicsIGVsQm94KTtcclxuICAgIGVsLmNzcygnbGVmdCcsIGAke2xlZnQgKyB3aWR0aCAvIDIgLSBlbEJveC53aWR0aCAvIDJ9cHhgKS5jc3MoJ3RvcCcsIGAke3RvcCArIGhlaWdodCArIDJ9cHhgKTtcclxuICAgIGJpbmQodGFyZ2V0LCAnbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhlbC5lbCkpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbC5lbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBiaW5kKHRhcmdldCwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGVsLmVsKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsLmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iLCIvKiBnbG9iYWwgd2luZG93ICovXHJcbmV4cG9ydCBjb25zdCBjc3NQcmVmaXggPSAneC1zcHJlYWRzaGVldCc7XHJcbmV4cG9ydCBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBjc3NQcmVmaXgsXHJcbiAgICBkcHIsXHJcbn07XHJcbiIsImNvbnN0IGFscGhhYmV0cyA9IFtcclxuICAgICdBJyxcclxuICAgICdCJyxcclxuICAgICdDJyxcclxuICAgICdEJyxcclxuICAgICdFJyxcclxuICAgICdGJyxcclxuICAgICdHJyxcclxuICAgICdIJyxcclxuICAgICdJJyxcclxuICAgICdKJyxcclxuICAgICdLJyxcclxuICAgICdMJyxcclxuICAgICdNJyxcclxuICAgICdOJyxcclxuICAgICdPJyxcclxuICAgICdQJyxcclxuICAgICdRJyxcclxuICAgICdSJyxcclxuICAgICdTJyxcclxuICAgICdUJyxcclxuICAgICdVJyxcclxuICAgICdWJyxcclxuICAgICdXJyxcclxuICAgICdYJyxcclxuICAgICdZJyxcclxuICAgICdaJyxcclxuXTtcclxuLyoqIGluZGV4IG51bWJlciAyIGxldHRlcnNcclxuICogQGV4YW1wbGUgc3RyaW5nQXQoMjYpID09PiAnQUEnXHJcbiAqIEBkYXRlIDIwMTktMTAtMTBcclxuICogQGV4cG9ydFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdBdChpbmRleCkge1xyXG4gICAgbGV0IHN0ciA9ICcnO1xyXG4gICAgbGV0IGNpbmRleCA9IGluZGV4O1xyXG4gICAgd2hpbGUgKGNpbmRleCA+PSBhbHBoYWJldHMubGVuZ3RoKSB7XHJcbiAgICAgICAgY2luZGV4IC89IGFscGhhYmV0cy5sZW5ndGg7XHJcbiAgICAgICAgY2luZGV4IC09IDE7XHJcbiAgICAgICAgc3RyICs9IGFscGhhYmV0c1twYXJzZUludChjaW5kZXgsIDEwKSAlIGFscGhhYmV0cy5sZW5ndGhdO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGFzdCA9IGluZGV4ICUgYWxwaGFiZXRzLmxlbmd0aDtcclxuICAgIHN0ciArPSBhbHBoYWJldHNbbGFzdF07XHJcbiAgICByZXR1cm4gc3RyO1xyXG59XHJcbi8qKiB0cmFuc2xhdGUgbGV0dGVyIGluIEExLXRhZyB0byBudW1iZXJcclxuICogQGRhdGUgMjAxOS0xMC0xMFxyXG4gKiBAZXhwb3J0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgXCJBQVwiIGluIEExLXRhZyBcIkFBMVwiXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhBdChzdHIpIHtcclxuICAgIGxldCByZXQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHN0ci5sZW5ndGg7ICsraSlcclxuICAgICAgICByZXQgPSAyNiAqIHJldCArIHN0ci5jaGFyQ29kZUF0KGkpIC0gNjQ7XHJcbiAgICByZXR1cm4gcmV0IC0gMTtcclxufVxyXG4vLyBCMTAgPT4geCx5XHJcbi8qKiB0cmFuc2xhdGUgQTEtdGFnIHRvIFhZLXRhZ1xyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHt0YWdBMX0gc3JjXHJcbiAqIEByZXR1cm5zIHt0YWdYWX1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHByMnh5KHNyYykge1xyXG4gICAgbGV0IHggPSAnJztcclxuICAgIGxldCB5ID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGlmIChzcmMuY2hhckF0KGkpID49ICcwJyAmJiBzcmMuY2hhckF0KGkpIDw9ICc5Jykge1xyXG4gICAgICAgICAgICB5ICs9IHNyYy5jaGFyQXQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB4ICs9IHNyYy5jaGFyQXQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtpbmRleEF0KHgpLCBwYXJzZUludCh5LCAxMCkgLSAxXTtcclxufVxyXG4vKiogdHJhbnNsYXRlIFhZLXRhZyB0byBBMS10YWdcclxuICogQGV4YW1wbGUgeCx5ID0+IEIxMFxyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICogQHJldHVybnMge3RhZ0ExfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHh5MmV4cHIoeCwgeSkge1xyXG4gICAgcmV0dXJuIGAke3N0cmluZ0F0KHgpfSR7eSArIDF9YDtcclxufVxyXG4vKiogdHJhbnNsYXRlIEExLXRhZyBzcmMgYnkgKHhuLCB5bilcclxuICogQGRhdGUgMjAxOS0xMC0xMFxyXG4gKiBAZXhwb3J0XHJcbiAqIEBwYXJhbSB7dGFnQTF9IHNyY1xyXG4gKiBAcGFyYW0ge251bWJlcn0geG5cclxuICogQHBhcmFtIHtudW1iZXJ9IHluXHJcbiAqIEByZXR1cm5zIHt0YWdBMX1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHByMmV4cHIoc3JjLCB4biwgeW4sIGNvbmRpdGlvbiA9ICh4LCB5KSA9PiB0cnVlKSB7XHJcbiAgICBpZiAoeG4gPT09IDAgJiYgeW4gPT09IDApXHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIGNvbnN0IFt4LCB5XSA9IGV4cHIyeHkoc3JjKTtcclxuICAgIGlmICghY29uZGl0aW9uKHgsIHkpKVxyXG4gICAgICAgIHJldHVybiBzcmM7XHJcbiAgICByZXR1cm4geHkyZXhwcih4ICsgeG4sIHkgKyB5bik7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgc3RyaW5nQXQsXHJcbiAgICBpbmRleEF0LFxyXG4gICAgZXhwcjJ4eSxcclxuICAgIHh5MmV4cHIsXHJcbiAgICBleHByMmV4cHIsXHJcbn07XHJcbiIsImltcG9ydCB7IENlbGxSYW5nZSB9IGZyb20gJy4vY2VsbF9yYW5nZSc7XHJcbi8vIG9wZXJhdG9yOiBhbGx8ZXF8bmVxfGd0fGd0ZXxsdHxsdGV8aW58YmVcclxuLy8gdmFsdWU6XHJcbi8vICAgaW4gPT4gW11cclxuLy8gICBiZSA9PiBbbWluLCBtYXhdXHJcbmNsYXNzIEZpbHRlciB7XHJcbiAgICBjaTtcclxuICAgIG9wZXJhdG9yO1xyXG4gICAgdmFsdWU7XHJcbiAgICBjb25zdHJ1Y3RvcihjaSwgb3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jaSA9IGNpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0b3IgPSBvcGVyYXRvcjtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZXQob3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGluY2x1ZGVzKHYpIHtcclxuICAgICAgICBjb25zdCB7IG9wZXJhdG9yLCB2YWx1ZSB9ID0gdGhpcztcclxuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdpbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmluY2x1ZGVzKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2bGVuZ3RoKCkge1xyXG4gICAgICAgIGNvbnN0IHsgb3BlcmF0b3IsIHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2luJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjaSwgb3BlcmF0b3IsIHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7IGNpLCBvcGVyYXRvciwgdmFsdWUgfTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBTb3J0IHtcclxuICAgIGNpO1xyXG4gICAgb3JkZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihjaSwgb3JkZXIpIHtcclxuICAgICAgICB0aGlzLmNpID0gY2k7XHJcbiAgICAgICAgdGhpcy5vcmRlciA9IG9yZGVyO1xyXG4gICAgfVxyXG4gICAgYXNjKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9yZGVyID09PSAnYXNjJztcclxuICAgIH1cclxuICAgIGRlc2MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JkZXIgPT09ICdkZXNjJztcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvRmlsdGVyIHtcclxuICAgIHJlZjtcclxuICAgIGZpbHRlcnM7XHJcbiAgICBzb3J0O1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWYgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc29ydCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKHsgcmVmLCBmaWx0ZXJzLCBzb3J0IH0pIHtcclxuICAgICAgICBpZiAocmVmICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWYgPSByZWY7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnMubWFwKChpdCkgPT4gbmV3IEZpbHRlcihpdC5jaSwgaXQub3BlcmF0b3IsIGl0LnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGlmIChzb3J0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnQgPSBuZXcgU29ydChzb3J0LmNpLCBzb3J0Lm9yZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByZWYsIGZpbHRlcnMsIHNvcnQgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHJlZiwgZmlsdGVyczogZmlsdGVycy5tYXAoKGl0KSA9PiBpdC5nZXREYXRhKCkpLCBzb3J0IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIGFkZEZpbHRlcihjaSwgb3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0gdGhpcy5nZXRGaWx0ZXIoY2kpO1xyXG4gICAgICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlcnMucHVzaChuZXcgRmlsdGVyKGNpLCBvcGVyYXRvciwgdmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZpbHRlci5zZXQob3BlcmF0b3IsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRTb3J0KGNpLCBvcmRlcikge1xyXG4gICAgICAgIHRoaXMuc29ydCA9IG9yZGVyID8gbmV3IFNvcnQoY2ksIG9yZGVyKSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBpbmNsdWRlcyhyaSwgY2kpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ocmFuZ2UoKS5pbmNsdWRlcyhyaSwgY2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXRTb3J0KGNpKSB7XHJcbiAgICAgICAgY29uc3QgeyBzb3J0IH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChzb3J0ICYmIHNvcnQuY2kgPT09IGNpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzb3J0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldEZpbHRlcihjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgZmlsdGVycyB9ID0gdGhpcztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbHRlcnMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGZpbHRlcnNbaV0uY2kgPT09IGNpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGZpbHRlcmVkUm93cyhnZXRDZWxsKSB7XHJcbiAgICAgICAgLy8gY29uc3QgYXJ5ID0gW107XHJcbiAgICAgICAgLy8gbGV0IGxhc3RyaSA9IDA7XHJcbiAgICAgICAgY29uc3QgcnNldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBjb25zdCBmc2V0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3JpLCBlcmkgfSA9IHRoaXMucmFuZ2UoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBmaWx0ZXJzIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCByaSA9IHNyaSArIDE7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gZmlsdGVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChyaSwgZmlsdGVyLmNpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdGV4dCA9IGNlbGwgPyBjZWxsLnRleHQgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5pbmNsdWRlcyhjdGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnNldC5hZGQocmkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzZXQuYWRkKHJpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgcnNldCwgZnNldCB9O1xyXG4gICAgfVxyXG4gICAgaXRlbXMoY2ksIGdldENlbGwpIHtcclxuICAgICAgICBjb25zdCBtID0ge307XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzcmksIGVyaSB9ID0gdGhpcy5yYW5nZSgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCByaSA9IHNyaSArIDE7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgICAgIGlmIChjZWxsICE9PSBudWxsICYmICEvXlxccyokLy50ZXN0KGNlbGwudGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBjZWxsLnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY250ID0gKG1ba2V5XSB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgbVtrZXldID0gY250O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbVsnJ10gPSAobVsnJ10gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtO1xyXG4gICAgfVxyXG4gICAgcmFuZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIENlbGxSYW5nZS52YWx1ZU9mKHRoaXMucmVmKTtcclxuICAgIH1cclxuICAgIGhyYW5nZSgpIHtcclxuICAgICAgICBjb25zdCByID0gdGhpcy5yYW5nZSgpO1xyXG4gICAgICAgIHIuZXJpID0gci5zcmk7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnJlZiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5zb3J0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGFjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWYgIT09IG51bGw7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZXhwcjJ4eSwgeHkyZXhwciB9IGZyb20gJy4vYWxwaGFiZXQnO1xyXG5pbXBvcnQgeyBudW1iZXJDYWxjIH0gZnJvbSAnLi9oZWxwZXInO1xyXG4vLyBDb252ZXJ0aW5nIGluZml4IGV4cHJlc3Npb24gdG8gYSBzdWZmaXggZXhwcmVzc2lvblxyXG4vLyBzcmM6IEFWRVJBR0UoU1VNKEExLEEyKSwgQjEpICsgNTAgKyBCMjBcclxuLy8gcmV0dXJuOiBbQTEsIEEyXSwgU1VNWywgQjFdLEFWRVJBR0UsNTAsKyxCMjAsK1xyXG5jb25zdCBpbmZpeEV4cHJUb1N1ZmZpeEV4cHIgPSAoc3JjKSA9PiB7XHJcbiAgICBjb25zdCBvcGVyYXRvclN0YWNrID0gW107XHJcbiAgICBjb25zdCBzdGFjayA9IFtdO1xyXG4gICAgbGV0IHN1YlN0cnMgPSBbXTsgLy8gU1VNLCBBMSwgQjIsIDUwIC4uLlxyXG4gICAgbGV0IGZuQXJnVHlwZSA9IDA7IC8vIDEgPT4gLCAyID0+IDpcclxuICAgIGxldCBmbkFyZ09wZXJhdG9yID0gJyc7XHJcbiAgICBsZXQgZm5BcmdzTGVuID0gMTsgLy8gQTEsQTIsQTMuLi5cclxuICAgIGxldCBvbGRjID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzcmMuY2hhckF0KGkpO1xyXG4gICAgICAgIGlmIChjICE9PSAnICcpIHtcclxuICAgICAgICAgICAgaWYgKGMgPj0gJ2EnICYmIGMgPD0gJ3onKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJTdHJzLnB1c2goYy50b1VwcGVyQ2FzZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoYyA+PSAnMCcgJiYgYyA8PSAnOScpIHx8XHJcbiAgICAgICAgICAgICAgICAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8XHJcbiAgICAgICAgICAgICAgICBjID09PSAnLicpIHtcclxuICAgICAgICAgICAgICAgIHN1YlN0cnMucHVzaChjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjID09PSAnXCInKSB7XHJcbiAgICAgICAgICAgICAgICBpICs9IDE7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoc3JjLmNoYXJBdChpKSAhPT0gJ1wiJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YlN0cnMucHVzaChzcmMuY2hhckF0KGkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGBcIiR7c3ViU3Rycy5qb2luKCcnKX1gKTtcclxuICAgICAgICAgICAgICAgIHN1YlN0cnMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjID09PSAnLScgJiYgL1srXFwtKi8sKF0vLnRlc3Qob2xkYykpIHtcclxuICAgICAgICAgICAgICAgIHN1YlN0cnMucHVzaChjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdWJTdHJzOicsIHN1YlN0cnMuam9pbignJyksIHN0YWNrKTtcclxuICAgICAgICAgICAgICAgIGlmIChjICE9PSAnKCcgJiYgc3ViU3Rycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChzdWJTdHJzLmpvaW4oJycpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjID09PSAnKScpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYzEgPSBvcGVyYXRvclN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbkFyZ1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm4gYXJndW1lbnQgcmFuZ2UgPT4gQTE6QjVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtleCwgZXldID0gZXhwcjJ4eShzdGFjay5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbc3gsIHN5XSA9IGV4cHIyeHkoc3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJzo6Jywgc3gsIHN5LCBleCwgZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlbGVuID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSBzeDsgeCA8PSBleDsgeCArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IHN5OyB5IDw9IGV5OyB5ICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh4eTJleHByKHgsIHkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VsZW4gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFtjMSwgcmFuZ2VsZW5dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZm5BcmdUeXBlID09PSAxIHx8IGZuQXJnVHlwZSA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm5BcmdUeXBlID09PSAzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChmbkFyZ09wZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm4gYXJndW1lbnQgPT4gQTEsQTIsQjVcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChbYzEsIGZuQXJnc0xlbl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbkFyZ3NMZW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2MxOicsIGMxLCBmbkFyZ1R5cGUsIHN0YWNrLCBvcGVyYXRvclN0YWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGMxICE9PSAnKCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goYzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yU3RhY2subGVuZ3RoIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjMSA9IG9wZXJhdG9yU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm5BcmdUeXBlID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICc9JyB8fCBjID09PSAnPicgfHwgYyA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmMgPSBzcmMuY2hhckF0KGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBmbkFyZ09wZXJhdG9yID0gYztcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmMgPT09ICc9JyB8fCBuYyA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuQXJnT3BlcmF0b3IgKz0gbmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm5BcmdUeXBlID0gMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICc6Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuQXJnVHlwZSA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSAnLCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm5BcmdUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZm5BcmdPcGVyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZuQXJnVHlwZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZm5BcmdzTGVuICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSAnKCcgJiYgc3ViU3Rycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRvclN0YWNrLnB1c2goc3ViU3Rycy5qb2luKCcnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcmlvcml0eTogKi8gPiArLVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd4eHh4OicsIG9wZXJhdG9yU3RhY2ssIGMsIHN0YWNrKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JTdGFjay5sZW5ndGggPiAwICYmIChjID09PSAnKycgfHwgYyA9PT0gJy0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9wID0gb3BlcmF0b3JTdGFja1tvcGVyYXRvclN0YWNrLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9wICE9PSAnKCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG9wZXJhdG9yU3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9wID09PSAnKicgfHwgdG9wID09PSAnLycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvcGVyYXRvclN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBvcGVyYXRvclN0YWNrW29wZXJhdG9yU3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCAhPT0gJygnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG9wZXJhdG9yU3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3BlcmF0b3JTdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IG9wZXJhdG9yU3RhY2tbb3BlcmF0b3JTdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA9PT0gJyonIHx8IHRvcCA9PT0gJy8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChvcGVyYXRvclN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3JTdGFjay5wdXNoKGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3ViU3RycyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9sZGMgPSBjO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdWJTdHJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzdGFjay5wdXNoKHN1YlN0cnMuam9pbignJykpO1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKG9wZXJhdG9yU3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHN0YWNrLnB1c2gob3BlcmF0b3JTdGFjay5wb3AoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhY2s7XHJcbn07XHJcbmNvbnN0IGV2YWxTdWJFeHByID0gKHN1YkV4cHIsIGNlbGxSZW5kZXIpID0+IHtcclxuICAgIGNvbnN0IFtmbF0gPSBzdWJFeHByO1xyXG4gICAgbGV0IGV4cHIgPSBzdWJFeHByO1xyXG4gICAgaWYgKGZsID09PSAnXCInKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1YkV4cHIuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG4gICAgbGV0IHJldCA9IDE7XHJcbiAgICBpZiAoZmwgPT09ICctJykge1xyXG4gICAgICAgIGV4cHIgPSBzdWJFeHByLnN1YnN0cmluZygxKTtcclxuICAgICAgICByZXQgPSAtMTtcclxuICAgIH1cclxuICAgIGlmIChleHByWzBdID49ICcwJyAmJiBleHByWzBdIDw9ICc5Jykge1xyXG4gICAgICAgIHJldHVybiByZXQgKiBOdW1iZXIoZXhwcik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBbeCwgeV0gPSBleHByMnh5KGV4cHIpO1xyXG4gICAgcmV0dXJuIHJldCAqIGNlbGxSZW5kZXIoeCwgeSk7XHJcbn07XHJcbi8vIGV2YWx1YXRlIHRoZSBzdWZmaXggZXhwcmVzc2lvblxyXG4vLyBzcmNTdGFjazogPD0gaW5maXhFeHByVG9TdWZpeEV4cHJcclxuLy8gZm9ybXVsYU1hcDogeydTVU0nOiB7fSwgLi4ufVxyXG4vLyBjZWxsUmVuZGVyOiAoeCwgeSkgPT4ge31cclxuY29uc3QgZXZhbFN1ZmZpeEV4cHIgPSAoc3JjU3RhY2ssIGZvcm11bGFNYXAsIGNlbGxSZW5kZXIsIGNlbGxMaXN0KSA9PiB7XHJcbiAgICBjb25zdCBzdGFjayA9IFtdO1xyXG4gICAgLy8gY29uc29sZS5sb2coJzo6Ojo6Zm9ybXVsYU1hcDonLCBmb3JtdWxhTWFwKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjU3RhY2subGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnOjo6Pj4+Jywgc3JjU3RhY2tbaV0pO1xyXG4gICAgICAgIGNvbnN0IGV4cHIgPSBzcmNTdGFja1tpXTtcclxuICAgICAgICBjb25zdCBmYyA9IGV4cHJbMF07XHJcbiAgICAgICAgaWYgKGV4cHIgPT09ICcrJykge1xyXG4gICAgICAgICAgICBjb25zdCB0b3AgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgc3RhY2sucHVzaChudW1iZXJDYWxjKCcrJywgc3RhY2sucG9wKCksIHRvcCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChleHByID09PSAnLScpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wID0gc3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG51bWJlckNhbGMoJyonLCB0b3AsIC0xKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3AgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobnVtYmVyQ2FsYygnLScsIHN0YWNrLnBvcCgpLCB0b3ApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChleHByID09PSAnKicpIHtcclxuICAgICAgICAgICAgc3RhY2sucHVzaChudW1iZXJDYWxjKCcqJywgc3RhY2sucG9wKCksIHN0YWNrLnBvcCgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICcvJykge1xyXG4gICAgICAgICAgICBjb25zdCB0b3AgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgc3RhY2sucHVzaChudW1iZXJDYWxjKCcvJywgc3RhY2sucG9wKCksIHRvcCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmYyA9PT0gJz0nIHx8IGZjID09PSAnPicgfHwgZmMgPT09ICc8Jykge1xyXG4gICAgICAgICAgICBsZXQgdG9wID0gc3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHRvcCkpXHJcbiAgICAgICAgICAgICAgICB0b3AgPSBOdW1iZXIodG9wKTtcclxuICAgICAgICAgICAgbGV0IGxlZnQgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4obGVmdCkpXHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gTnVtYmVyKGxlZnQpO1xyXG4gICAgICAgICAgICBsZXQgcmV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChmYyA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSBsZWZ0ID09PSB0b3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwciA9PT0gJz4nKSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSBsZWZ0ID4gdG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICc+PScpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IGxlZnQgPj0gdG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICc8Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gbGVmdCA8IHRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChleHByID09PSAnPD0nKSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSBsZWZ0IDw9IHRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFjay5wdXNoKHJldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXhwcikpIHtcclxuICAgICAgICAgICAgY29uc3QgW2Zvcm11bGEsIGxlbl0gPSBleHByO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGogKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goc3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YWNrLnB1c2goZm9ybXVsYU1hcFtmb3JtdWxhXS5yZW5kZXIocGFyYW1zLnJldmVyc2UoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGNlbGxMaXN0LmluY2x1ZGVzKGV4cHIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKGZjID49ICdhJyAmJiBmYyA8PSAneicpIHx8IChmYyA+PSAnQScgJiYgZmMgPD0gJ1onKSkge1xyXG4gICAgICAgICAgICAgICAgY2VsbExpc3QucHVzaChleHByKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFjay5wdXNoKGV2YWxTdWJFeHByKGV4cHIsIGNlbGxSZW5kZXIpKTtcclxuICAgICAgICAgICAgY2VsbExpc3QucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdGFjazonLCBzdGFjayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhY2tbMF07XHJcbn07XHJcbmNvbnN0IGNlbGxSZW5kZXIgPSAoc3JjLCBmb3JtdWxhTWFwLCBnZXRDZWxsVGV4dCwgY2VsbExpc3QgPSBbXSkgPT4ge1xyXG4gICAgaWYgKHNyY1swXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBpbmZpeEV4cHJUb1N1ZmZpeEV4cHIoc3JjLnN1YnN0cmluZygxKSk7XHJcbiAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gc3JjO1xyXG4gICAgICAgIHJldHVybiBldmFsU3VmZml4RXhwcihzdGFjaywgZm9ybXVsYU1hcCwgKHgsIHkpID0+IGNlbGxSZW5kZXIoZ2V0Q2VsbFRleHQoeCwgeSksIGZvcm11bGFNYXAsIGdldENlbGxUZXh0LCBjZWxsTGlzdCksIGNlbGxMaXN0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzcmM7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHJlbmRlcjogY2VsbFJlbmRlcixcclxufTtcclxuZXhwb3J0IHsgaW5maXhFeHByVG9TdWZmaXhFeHByIH07XHJcbiIsImltcG9ydCB7IHh5MmV4cHIsIGV4cHIyeHkgfSBmcm9tICcuL2FscGhhYmV0JztcclxuY2xhc3MgQ2VsbFJhbmdlIHtcclxuICAgIHNyaTtcclxuICAgIHNjaTtcclxuICAgIGVyaTtcclxuICAgIGVjaTtcclxuICAgIHc7XHJcbiAgICBoO1xyXG4gICAgY29uc3RydWN0b3Ioc3JpLCBzY2ksIGVyaSwgZWNpLCB3ID0gMCwgaCA9IDApIHtcclxuICAgICAgICB0aGlzLnNyaSA9IHNyaTtcclxuICAgICAgICB0aGlzLnNjaSA9IHNjaTtcclxuICAgICAgICB0aGlzLmVyaSA9IGVyaTtcclxuICAgICAgICB0aGlzLmVjaSA9IGVjaTtcclxuICAgICAgICB0aGlzLncgPSB3O1xyXG4gICAgICAgIHRoaXMuaCA9IGg7XHJcbiAgICB9XHJcbiAgICBzZXQoc3JpLCBzY2ksIGVyaSwgZWNpKSB7XHJcbiAgICAgICAgdGhpcy5zcmkgPSBzcmk7XHJcbiAgICAgICAgdGhpcy5zY2kgPSBzY2k7XHJcbiAgICAgICAgdGhpcy5lcmkgPSBlcmk7XHJcbiAgICAgICAgdGhpcy5lY2kgPSBlY2k7XHJcbiAgICB9XHJcbiAgICBtdWx0aXBsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lcmkgLSB0aGlzLnNyaSA+IDAgfHwgdGhpcy5lY2kgLSB0aGlzLnNjaSA+IDA7XHJcbiAgICB9XHJcbiAgICAvLyBjZWxsLWluZGV4OiByaSwgY2lcclxuICAgIC8vIGNlbGwtcmVmOiBBMTBcclxuICAgIGluY2x1ZGVzKC4uLmFyZ3MpIHtcclxuICAgICAgICBsZXQgW3JpLCBjaV0gPSBbMCwgMF07XHJcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIFtjaSwgcmldID0gZXhwcjJ4eShhcmdzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgW3JpLCBjaV0gPSBhcmdzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gc3JpIDw9IHJpICYmIHJpIDw9IGVyaSAmJiBzY2kgPD0gY2kgJiYgY2kgPD0gZWNpO1xyXG4gICAgfVxyXG4gICAgZWFjaChjYiwgcm93RmlsdGVyID0gKGkpID0+IHRydWUpIHtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcztcclxuICAgICAgICBmb3IgKGxldCBpID0gc3JpOyBpIDw9IGVyaTsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dGaWx0ZXIoaSkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBzY2k7IGogPD0gZWNpOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYihpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnRhaW5zKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNyaSA8PSBvdGhlci5zcmkgJiZcclxuICAgICAgICAgICAgdGhpcy5zY2kgPD0gb3RoZXIuc2NpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZXJpID49IG90aGVyLmVyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLmVjaSA+PSBvdGhlci5lY2kpO1xyXG4gICAgfVxyXG4gICAgLy8gd2l0aGluXHJcbiAgICB3aXRoaW4ob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3JpID49IG90aGVyLnNyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLnNjaSA+PSBvdGhlci5zY2kgJiZcclxuICAgICAgICAgICAgdGhpcy5lcmkgPD0gb3RoZXIuZXJpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZWNpIDw9IG90aGVyLmVjaSk7XHJcbiAgICB9XHJcbiAgICAvLyBkaXNqb2ludFxyXG4gICAgZGlzam9pbnQob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3JpID4gb3RoZXIuZXJpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2NpID4gb3RoZXIuZWNpIHx8XHJcbiAgICAgICAgICAgIG90aGVyLnNyaSA+IHRoaXMuZXJpIHx8XHJcbiAgICAgICAgICAgIG90aGVyLnNjaSA+IHRoaXMuZWNpKTtcclxuICAgIH1cclxuICAgIC8vIGludGVyc2VjdHNcclxuICAgIGludGVyc2VjdHMob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3JpIDw9IG90aGVyLmVyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLnNjaSA8PSBvdGhlci5lY2kgJiZcclxuICAgICAgICAgICAgb3RoZXIuc3JpIDw9IHRoaXMuZXJpICYmXHJcbiAgICAgICAgICAgIG90aGVyLnNjaSA8PSB0aGlzLmVjaSk7XHJcbiAgICB9XHJcbiAgICAvLyB1bmlvblxyXG4gICAgdW5pb24ob3RoZXIpIHtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IENlbGxSYW5nZShvdGhlci5zcmkgPCBzcmkgPyBvdGhlci5zcmkgOiBzcmksIG90aGVyLnNjaSA8IHNjaSA/IG90aGVyLnNjaSA6IHNjaSwgb3RoZXIuZXJpID4gZXJpID8gb3RoZXIuZXJpIDogZXJpLCBvdGhlci5lY2kgPiBlY2kgPyBvdGhlci5lY2kgOiBlY2kpO1xyXG4gICAgfVxyXG4gICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAvLyBpbnRlcnNlY3Rpb24ob3RoZXIpIHt9XHJcbiAgICAvLyBSZXR1cm5zIEFycmF5PENlbGxSYW5nZT4gdGhhdCByZXByZXNlbnRzIHRoYXQgcGFydCBvZiB0aGlzIHRoYXQgZG9lcyBub3QgaW50ZXJzZWN0IHdpdGggb3RoZXJcclxuICAgIC8vIGRpZmZlcmVuY2VcclxuICAgIGRpZmZlcmVuY2Uob3RoZXIpIHtcclxuICAgICAgICBjb25zdCByZXQgPSBbXTtcclxuICAgICAgICBjb25zdCBhZGRSZXQgPSAoc3JpLCBzY2ksIGVyaSwgZWNpKSA9PiB7XHJcbiAgICAgICAgICAgIHJldC5wdXNoKG5ldyBDZWxsUmFuZ2Uoc3JpLCBzY2ksIGVyaSwgZWNpKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBkc3IgPSBvdGhlci5zcmkgLSBzcmk7XHJcbiAgICAgICAgY29uc3QgZHNjID0gb3RoZXIuc2NpIC0gc2NpO1xyXG4gICAgICAgIGNvbnN0IGRlciA9IGVyaSAtIG90aGVyLmVyaTtcclxuICAgICAgICBjb25zdCBkZWMgPSBlY2kgLSBvdGhlci5lY2k7XHJcbiAgICAgICAgaWYgKGRzciA+IDApIHtcclxuICAgICAgICAgICAgYWRkUmV0KHNyaSwgc2NpLCBvdGhlci5zcmkgLSAxLCBlY2kpO1xyXG4gICAgICAgICAgICBpZiAoZGVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLmVyaSArIDEsIHNjaSwgZXJpLCBlY2kpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRzYyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQob3RoZXIuc3JpLCBzY2ksIG90aGVyLmVyaSwgb3RoZXIuc2NpIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVjID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5zcmksIG90aGVyLmVjaSArIDEsIG90aGVyLmVyaSwgZWNpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkc2MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLnNyaSwgc2NpLCBlcmksIG90aGVyLnNjaSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRlYyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQob3RoZXIuc3JpLCBvdGhlci5lY2kgKyAxLCBlcmksIGVjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGVyID4gMCkge1xyXG4gICAgICAgICAgICBhZGRSZXQob3RoZXIuZXJpICsgMSwgc2NpLCBlcmksIGVjaSk7XHJcbiAgICAgICAgICAgIGlmIChkc2MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBzY2ksIG90aGVyLmVyaSwgb3RoZXIuc2NpIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRlYyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZFJldChzcmksIG90aGVyLmVjaSArIDEsIG90aGVyLmVyaSwgZWNpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZHNjID4gMCkge1xyXG4gICAgICAgICAgICBhZGRSZXQoc3JpLCBzY2ksIGVyaSwgb3RoZXIuc2NpIC0gMSk7XHJcbiAgICAgICAgICAgIGlmIChkZWMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBvdGhlci5lcmkgKyAxLCBlcmksIGVjaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHNyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJldChzcmksIG90aGVyLnNjaSwgb3RoZXIuc3JpIC0gMSwgb3RoZXIuZWNpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkZXIgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLnNyaSArIDEsIG90aGVyLnNjaSwgZXJpLCBvdGhlci5lY2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRzciA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBvdGhlci5zY2ksIG90aGVyLnNyaSAtIDEsIGVjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5zcmkgKyAxLCBvdGhlci5zY2ksIGVyaSwgZWNpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkZWMgPiAwKSB7XHJcbiAgICAgICAgICAgIGFkZFJldChlcmksIG90aGVyLmVjaSArIDEsIGVyaSwgZWNpKTtcclxuICAgICAgICAgICAgaWYgKGRzciA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZFJldChzcmksIHNjaSwgb3RoZXIuc3JpIC0gMSwgb3RoZXIuZWNpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLmVyaSArIDEsIHNjaSwgZXJpLCBvdGhlci5lY2kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5lcmkgLSB0aGlzLnNyaSArIDEsIHRoaXMuZWNpIC0gdGhpcy5zY2kgKyAxXTtcclxuICAgIH1cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpIH0gPSB0aGlzO1xyXG4gICAgICAgIGxldCByZWYgPSB4eTJleHByKHNjaSwgc3JpKTtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSgpKSB7XHJcbiAgICAgICAgICAgIHJlZiA9IGAke3JlZn06JHt4eTJleHByKGVjaSwgZXJpKX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVmO1xyXG4gICAgfVxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2ksIHcsIGggfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2Uoc3JpLCBzY2ksIGVyaSwgZWNpLCB3LCBoKTtcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gICAgZXF1YWxzKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmVyaSA9PT0gb3RoZXIuZXJpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZWNpID09PSBvdGhlci5lY2kgJiZcclxuICAgICAgICAgICAgdGhpcy5zcmkgPT09IG90aGVyLnNyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLnNjaSA9PT0gb3RoZXIuc2NpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB2YWx1ZU9mKHJlZikge1xyXG4gICAgICAgIC8vIEIxOkI4LCBCMSA9PiAxIHggMSBjZWxsIHJhbmdlXHJcbiAgICAgICAgY29uc3QgcmVmcyA9IHJlZi5zcGxpdCgnOicpO1xyXG4gICAgICAgIGNvbnN0IFtzY2ksIHNyaV0gPSBleHByMnh5KHJlZnNbMF0pO1xyXG4gICAgICAgIGxldCBbZXJpLCBlY2ldID0gW3NyaSwgc2NpXTtcclxuICAgICAgICBpZiAocmVmcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIFtlY2ksIGVyaV0gPSBleHByMnh5KHJlZnNbMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IENlbGxSYW5nZShzcmksIHNjaSwgZXJpLCBlY2kpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENlbGxSYW5nZTtcclxuZXhwb3J0IHsgQ2VsbFJhbmdlIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENsaXBib2FyZCB7XHJcbiAgICByYW5nZTtcclxuICAgIHN0YXRlO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IG51bGw7IC8vIENlbGxSYW5nZVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSAnY2xlYXInO1xyXG4gICAgfVxyXG4gICAgY29weShjZWxsUmFuZ2UpIHtcclxuICAgICAgICB0aGlzLnJhbmdlID0gY2VsbFJhbmdlO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSAnY29weSc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjdXQoY2VsbFJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IGNlbGxSYW5nZTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gJ2N1dCc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBpc0NvcHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdjb3B5JztcclxuICAgIH1cclxuICAgIGlzQ3V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSAnY3V0JztcclxuICAgIH1cclxuICAgIGlzQ2xlYXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdjbGVhcic7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXRlID0gJ2NsZWFyJztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgaGVscGVyIGZyb20gJy4vaGVscGVyJztcclxuY2xhc3MgQ29scyB7XHJcbiAgICBfO1xyXG4gICAgbGVuO1xyXG4gICAgd2lkdGg7XHJcbiAgICBpbmRleFdpZHRoO1xyXG4gICAgbWluV2lkdGg7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGxlbiwgd2lkdGgsIGluZGV4V2lkdGgsIG1pbldpZHRoIH0pIHtcclxuICAgICAgICB0aGlzLl8gPSB7fTtcclxuICAgICAgICB0aGlzLmxlbiA9IGxlbjtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5pbmRleFdpZHRoID0gaW5kZXhXaWR0aDtcclxuICAgICAgICB0aGlzLm1pbldpZHRoID0gbWluV2lkdGg7XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKGQpIHtcclxuICAgICAgICBpZiAoZC5sZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5sZW4gPSBkLmxlbjtcclxuICAgICAgICAgICAgZGVsZXRlIGQubGVuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8gPSBkO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICBjb25zdCB7IGxlbiB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IGxlbiB9LCB0aGlzLl8pO1xyXG4gICAgfVxyXG4gICAgZ2V0V2lkdGgoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSGlkZShpKSlcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5fW2ldO1xyXG4gICAgICAgIGlmIChjb2wgJiYgY29sLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2wud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xyXG4gICAgfVxyXG4gICAgZ2V0T3JOZXcoY2kpIHtcclxuICAgICAgICB0aGlzLl9bY2ldID0gdGhpcy5fW2NpXSB8fCB7fTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fW2NpXTtcclxuICAgIH1cclxuICAgIHNldFdpZHRoKGNpLCB3aWR0aCkge1xyXG4gICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuZ2V0T3JOZXcoY2kpO1xyXG4gICAgICAgIGNvbC53aWR0aCA9IHdpZHRoO1xyXG4gICAgfVxyXG4gICAgdW5oaWRlKGlkeCkge1xyXG4gICAgICAgIGxldCBpbmRleCA9IGlkeDtcclxuICAgICAgICB3aGlsZSAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4IC09IDE7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSGlkZShpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGlkZShpbmRleCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzSGlkZShjaSkge1xyXG4gICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuX1tjaV07XHJcbiAgICAgICAgcmV0dXJuIGNvbCAmJiBjb2wuaGlkZTtcclxuICAgIH1cclxuICAgIHNldEhpZGUoY2ksIHYpIHtcclxuICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmdldE9yTmV3KGNpKTtcclxuICAgICAgICBpZiAodiA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgY29sLmhpZGUgPSB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZGVsZXRlIGNvbC5oaWRlO1xyXG4gICAgfVxyXG4gICAgc2V0U3R5bGUoY2ksIHN0eWxlKSB7XHJcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5nZXRPck5ldyhjaSk7XHJcbiAgICAgICAgY29sLnN0eWxlID0gc3R5bGU7XHJcbiAgICB9XHJcbiAgICBzdW1XaWR0aChtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiBoZWxwZXIucmFuZ2VTdW0obWluLCBtYXgsIChpKSA9PiB0aGlzLmdldFdpZHRoKGkpKTtcclxuICAgIH1cclxuICAgIHRvdGFsV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VtV2lkdGgoMCwgdGhpcy5sZW4pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG5leHBvcnQgeyBDb2xzIH07XHJcbiIsIi8qIGdsb2JhbCBkb2N1bWVudCAqL1xyXG5pbXBvcnQgU2VsZWN0b3IgZnJvbSAnLi9zZWxlY3Rvcic7XHJcbmltcG9ydCBTY3JvbGwgZnJvbSAnLi9zY3JvbGwnO1xyXG5pbXBvcnQgSGlzdG9yeSBmcm9tICcuL2hpc3RvcnknO1xyXG5pbXBvcnQgQ2xpcGJvYXJkIGZyb20gJy4vY2xpcGJvYXJkJztcclxuaW1wb3J0IEF1dG9GaWx0ZXIgZnJvbSAnLi9hdXRvX2ZpbHRlcic7XHJcbmltcG9ydCB7IE1lcmdlcyB9IGZyb20gJy4vbWVyZ2UnO1xyXG5pbXBvcnQgaGVscGVyIGZyb20gJy4vaGVscGVyJztcclxuaW1wb3J0IHsgUm93cyB9IGZyb20gJy4vcm93JztcclxuaW1wb3J0IHsgQ29scyB9IGZyb20gJy4vY29sJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbnMgfSBmcm9tICcuL3ZhbGlkYXRpb24nO1xyXG5pbXBvcnQgeyBDZWxsUmFuZ2UgfSBmcm9tICcuL2NlbGxfcmFuZ2UnO1xyXG5pbXBvcnQgeyBleHByMnh5LCB4eTJleHByIH0gZnJvbSAnLi9hbHBoYWJldCc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuLy8gcHJpdmF0ZSBtZXRob2RzXHJcbi8qXHJcbiAqIHtcclxuICogIG5hbWU6ICcnXHJcbiAqICBmcmVlemU6IFswLCAwXSxcclxuICogIGZvcm1hdHM6IFtdLFxyXG4gKiAgc3R5bGVzOiBbXHJcbiAqICAgIHtcclxuICogICAgICBiZ2NvbG9yOiAnJyxcclxuICogICAgICBhbGlnbjogJycsXHJcbiAqICAgICAgdmFsaWduOiAnJyxcclxuICogICAgICB0ZXh0d3JhcDogZmFsc2UsXHJcbiAqICAgICAgc3RyaWtlOiBmYWxzZSxcclxuICogICAgICB1bmRlcmxpbmU6IGZhbHNlLFxyXG4gKiAgICAgIGNvbG9yOiAnJyxcclxuICogICAgICBmb3JtYXQ6IDEsXHJcbiAqICAgICAgYm9yZGVyOiB7XHJcbiAqICAgICAgICBsZWZ0OiBbc3R5bGUsIGNvbG9yXSxcclxuICogICAgICAgIHJpZ2h0OiBbc3R5bGUsIGNvbG9yXSxcclxuICogICAgICAgIHRvcDogW3N0eWxlLCBjb2xvcl0sXHJcbiAqICAgICAgICBib3R0b206IFtzdHlsZSwgY29sb3JdLFxyXG4gKiAgICAgIH0sXHJcbiAqICAgICAgZm9udDoge1xyXG4gKiAgICAgICAgbmFtZTogJ0hlbHZldGljYScsXHJcbiAqICAgICAgICBzaXplOiAxMCxcclxuICogICAgICAgIGJvbGQ6IGZhbHNlLFxyXG4gKiAgICAgICAgaXRhbGljOiBmYWxzZSxcclxuICogICAgICB9XHJcbiAqICAgIH1cclxuICogIF0sXHJcbiAqICBtZXJnZXM6IFtcclxuICogICAgJ0ExOkYxMScsXHJcbiAqICAgIC4uLlxyXG4gKiAgXSxcclxuICogIHJvd3M6IHtcclxuICogICAgMToge1xyXG4gKiAgICAgIGhlaWdodDogNTAsXHJcbiAqICAgICAgc3R5bGU6IDEsXHJcbiAqICAgICAgY2VsbHM6IHtcclxuICogICAgICAgIDE6IHtcclxuICogICAgICAgICAgc3R5bGU6IDIsXHJcbiAqICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gKiAgICAgICAgICB0ZXh0OiAnJyxcclxuICogICAgICAgICAgdmFsdWU6ICcnLCAvLyBjYWwgcmVzdWx0XHJcbiAqICAgICAgICB9XHJcbiAqICAgICAgfVxyXG4gKiAgICB9LFxyXG4gKiAgICAuLi5cclxuICogIH0sXHJcbiAqICBjb2xzOiB7XHJcbiAqICAgIDI6IHsgd2lkdGg6IDEwMCwgc3R5bGU6IDEgfVxyXG4gKiAgfVxyXG4gKiB9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xyXG4gICAgbW9kZTogJ2VkaXQnLFxyXG4gICAgdmlldzoge1xyXG4gICAgICAgIGhlaWdodDogKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICB3aWR0aDogKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgfSxcclxuICAgIHNob3dHcmlkOiB0cnVlLFxyXG4gICAgc2hvd1Rvb2xiYXI6IHRydWUsXHJcbiAgICBzaG93Q29udGV4dG1lbnU6IHRydWUsXHJcbiAgICBzaG93Qm90dG9tQmFyOiB0cnVlLFxyXG4gICAgcm93OiB7XHJcbiAgICAgICAgbGVuOiAxMDAsXHJcbiAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgIH0sXHJcbiAgICBjb2w6IHtcclxuICAgICAgICBsZW46IDI2LFxyXG4gICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgaW5kZXhXaWR0aDogNjAsXHJcbiAgICAgICAgbWluV2lkdGg6IDYwLFxyXG4gICAgfSxcclxuICAgIHN0eWxlOiB7XHJcbiAgICAgICAgYmdjb2xvcjogJyNmZmZmZmYnLFxyXG4gICAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgICAgdmFsaWduOiAnbWlkZGxlJyxcclxuICAgICAgICB0ZXh0d3JhcDogZmFsc2UsXHJcbiAgICAgICAgc3RyaWtlOiBmYWxzZSxcclxuICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxyXG4gICAgICAgIGNvbG9yOiAnIzBhMGEwYScsXHJcbiAgICAgICAgZm9udDoge1xyXG4gICAgICAgICAgICBuYW1lOiAnQXJpYWwnLFxyXG4gICAgICAgICAgICBzaXplOiAxMCxcclxuICAgICAgICAgICAgYm9sZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXQ6ICdub3JtYWwnLFxyXG4gICAgfSxcclxufTtcclxuY29uc3QgdG9vbGJhckhlaWdodCA9IDQxO1xyXG5jb25zdCBib3R0b21iYXJIZWlnaHQgPSA0MTtcclxuLy8gc3JjOiBjZWxsUmFuZ2VcclxuLy8gZHN0OiBjZWxsUmFuZ2VcclxuZnVuY3Rpb24gY2FuUGFzdGUoc3JjLCBkc3QsIGVycm9yID0gKGFyZykgPT4geyB9KSB7XHJcbiAgICBjb25zdCB7IG1lcmdlcyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGNlbGxSYW5nZSA9IGRzdC5jbG9uZSgpO1xyXG4gICAgY29uc3QgW3Nybiwgc2NuXSA9IHNyYy5zaXplKCk7XHJcbiAgICBjb25zdCBbZHJuLCBkY25dID0gZHN0LnNpemUoKTtcclxuICAgIGlmIChzcm4gPiBkcm4pIHtcclxuICAgICAgICBjZWxsUmFuZ2UuZXJpID0gZHN0LnNyaSArIHNybiAtIDE7XHJcbiAgICB9XHJcbiAgICBpZiAoc2NuID4gZGNuKSB7XHJcbiAgICAgICAgY2VsbFJhbmdlLmVjaSA9IGRzdC5zY2kgKyBzY24gLSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKG1lcmdlcy5pbnRlcnNlY3RzKGNlbGxSYW5nZSkpIHtcclxuICAgICAgICBlcnJvcih0KCdlcnJvci5wYXN0ZUZvck1lcmdlZENlbGwnKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gY29weVBhc3RlKHNyY0NlbGxSYW5nZSwgZHN0Q2VsbFJhbmdlLCB3aGF0LCBhdXRvZmlsbCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IHJvd3MsIG1lcmdlcyB9ID0gdGhpcztcclxuICAgIC8vIGRlbGV0ZSBkZXN0IG1lcmdlXHJcbiAgICBpZiAod2hhdCA9PT0gJ2FsbCcgfHwgd2hhdCA9PT0gJ2Zvcm1hdCcpIHtcclxuICAgICAgICByb3dzLmRlbGV0ZUNlbGxzKGRzdENlbGxSYW5nZSwgd2hhdCk7XHJcbiAgICAgICAgbWVyZ2VzLmRlbGV0ZVdpdGhpbihkc3RDZWxsUmFuZ2UpO1xyXG4gICAgfVxyXG4gICAgcm93cy5jb3B5UGFzdGUoc3JjQ2VsbFJhbmdlLCBkc3RDZWxsUmFuZ2UsIHdoYXQsIGF1dG9maWxsLCAocmksIGNpLCBjZWxsKSA9PiB7XHJcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5tZXJnZSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2VsbDonLCByaSwgY2ksIGNlbGwpO1xyXG4gICAgICAgICAgICBjb25zdCBbcm4sIGNuXSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgIGlmIChybiA8PSAwICYmIGNuIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIG1lcmdlcy5hZGQobmV3IENlbGxSYW5nZShyaSwgY2ksIHJpICsgcm4sIGNpICsgY24pKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjdXRQYXN0ZShzcmNDZWxsUmFuZ2UsIGRzdENlbGxSYW5nZSkge1xyXG4gICAgY29uc3QgeyBjbGlwYm9hcmQsIHJvd3MsIG1lcmdlcyB9ID0gdGhpcztcclxuICAgIHJvd3MuY3V0UGFzdGUoc3JjQ2VsbFJhbmdlLCBkc3RDZWxsUmFuZ2UpO1xyXG4gICAgbWVyZ2VzLm1vdmUoc3JjQ2VsbFJhbmdlLCBkc3RDZWxsUmFuZ2Uuc3JpIC0gc3JjQ2VsbFJhbmdlLnNyaSwgZHN0Q2VsbFJhbmdlLnNjaSAtIHNyY0NlbGxSYW5nZS5zY2kpO1xyXG4gICAgY2xpcGJvYXJkLmNsZWFyKCk7XHJcbn1cclxuLy8gYnNzOiB7IHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCB9XHJcbmZ1bmN0aW9uIHNldFN0eWxlQm9yZGVyKHJpLCBjaSwgYnNzKSB7XHJcbiAgICBjb25zdCB7IHN0eWxlcywgcm93cyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhyaSwgY2kpO1xyXG4gICAgbGV0IGNzdHlsZSA9IHt9O1xyXG4gICAgaWYgKGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNzdHlsZSA9IGhlbHBlci5jbG9uZURlZXAoc3R5bGVzW2NlbGwuc3R5bGVdKTtcclxuICAgIH1cclxuICAgIGNzdHlsZSA9IGhlbHBlci5tZXJnZShjc3R5bGUsIHsgYm9yZGVyOiBic3MgfSk7XHJcbiAgICBjZWxsLnN0eWxlID0gdGhpcy5hZGRTdHlsZShjc3R5bGUpO1xyXG59XHJcbmZ1bmN0aW9uIHNldFN0eWxlQm9yZGVycyh7IG1vZGUsIHN0eWxlLCBjb2xvciB9KSB7XHJcbiAgICBjb25zdCB7IHN0eWxlcywgc2VsZWN0b3IsIHJvd3MgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICBjb25zdCBtdWx0aXBsZSA9ICF0aGlzLmlzU2luZ2xlU2VsZWN0ZWQoKTtcclxuICAgIGlmICghbXVsdGlwbGUpIHtcclxuICAgICAgICBpZiAobW9kZSA9PT0gJ2luc2lkZScgfHwgbW9kZSA9PT0gJ2hvcml6b250YWwnIHx8IG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChtb2RlID09PSAnb3V0c2lkZScgJiYgIW11bHRpcGxlKSB7XHJcbiAgICAgICAgc2V0U3R5bGVCb3JkZXIuY2FsbCh0aGlzLCBzcmksIHNjaSwge1xyXG4gICAgICAgICAgICB0b3A6IFtzdHlsZSwgY29sb3JdLFxyXG4gICAgICAgICAgICBib3R0b206IFtzdHlsZSwgY29sb3JdLFxyXG4gICAgICAgICAgICBsZWZ0OiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgcmlnaHQ6IFtzdHlsZSwgY29sb3JdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobW9kZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgc2VsZWN0b3IucmFuZ2UuZWFjaCgocmksIGNpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBucyA9IGhlbHBlci5jbG9uZURlZXAoc3R5bGVzW2NlbGwuc3R5bGVdKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBucy5ib3JkZXI7XHJcbiAgICAgICAgICAgICAgICAvLyBbJ2JvdHRvbScsICd0b3AnLCAnbGVmdCcsICdyaWdodCddLmZvckVhY2goKHByb3ApID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgaWYgKG5zW3Byb3BdKSBkZWxldGUgbnNbcHJvcF07XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmFkZFN0eWxlKG5zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobW9kZSA9PT0gJ2FsbCcgfHxcclxuICAgICAgICBtb2RlID09PSAnaW5zaWRlJyB8fFxyXG4gICAgICAgIG1vZGUgPT09ICdvdXRzaWRlJyB8fFxyXG4gICAgICAgIG1vZGUgPT09ICdob3Jpem9udGFsJyB8fFxyXG4gICAgICAgIG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICBjb25zdCBtZXJnZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCByaSA9IHNyaTsgcmkgPD0gZXJpOyByaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNpID0gc2NpOyBjaSA8PSBlY2k7IGNpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGp1bXAgbWVyZ2VzIC0tIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZUluZGV4ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBtZXJnZXMubGVuZ3RoOyBpaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW21yaSwgbWNpLCBybiwgY25dID0gbWVyZ2VzW2lpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmkgPT09IG1yaSArIHJuICsgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VJbmRleGVzLnB1c2goaWkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtcmkgPD0gcmkgJiYgcmkgPD0gbXJpICsgcm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNpID09PSBtY2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpICs9IGNuICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWVyZ2VJbmRleGVzLmZvckVhY2goKGl0KSA9PiBtZXJnZXMuc3BsaWNlKGl0LCAxKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2kgPiBlY2kpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBqdW1wIG1lcmdlcyAtLSBlbmRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgICAgIGxldCBbcm4sIGNuXSA9IFswLCAwXTtcclxuICAgICAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwubWVyZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBbcm4sIGNuXSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VzLnB1c2goW3JpLCBjaSwgcm4sIGNuXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtcmwgPSBybiA+IDAgJiYgcmkgKyBybiA9PT0gZXJpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWNsID0gY24gPiAwICYmIGNpICsgY24gPT09IGVjaTtcclxuICAgICAgICAgICAgICAgIGxldCBic3MgPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJzcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogW3N0eWxlLCBjb2xvcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ2luc2lkZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1jbCAmJiBjaSA8IGVjaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnNzLnJpZ2h0ID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtcmwgJiYgcmkgPCBlcmkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5ib3R0b20gPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbXJsICYmIHJpIDwgZXJpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MuYm90dG9tID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtY2wgJiYgY2kgPCBlY2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5yaWdodCA9IFtzdHlsZSwgY29sb3JdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ291dHNpZGUnICYmIG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyaSA9PT0gcmkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy50b3AgPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXJsIHx8IGVyaSA9PT0gcmkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5ib3R0b20gPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NpID09PSBjaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnNzLmxlZnQgPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWNsIHx8IGVjaSA9PT0gY2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5yaWdodCA9IFtzdHlsZSwgY29sb3JdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGJzcykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlQm9yZGVyLmNhbGwodGhpcywgcmksIGNpLCBic3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2kgKz0gY247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChtb2RlID09PSAndG9wJyB8fCBtb2RlID09PSAnYm90dG9tJykge1xyXG4gICAgICAgIGZvciAobGV0IGNpID0gc2NpOyBjaSA8PSBlY2k7IGNpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZUJvcmRlci5jYWxsKHRoaXMsIHNyaSwgY2ksIHsgdG9wOiBbc3R5bGUsIGNvbG9yXSB9KTtcclxuICAgICAgICAgICAgICAgIGNpICs9IHJvd3MuZ2V0Q2VsbE1lcmdlKHNyaSwgY2kpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVCb3JkZXIuY2FsbCh0aGlzLCBlcmksIGNpLCB7IGJvdHRvbTogW3N0eWxlLCBjb2xvcl0gfSk7XHJcbiAgICAgICAgICAgICAgICBjaSArPSByb3dzLmdldENlbGxNZXJnZShlcmksIGNpKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vZGUgPT09ICdsZWZ0JyB8fCBtb2RlID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcmkgPSBzcmk7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZUJvcmRlci5jYWxsKHRoaXMsIHJpLCBzY2ksIHsgbGVmdDogW3N0eWxlLCBjb2xvcl0gfSk7XHJcbiAgICAgICAgICAgICAgICByaSArPSByb3dzLmdldENlbGxNZXJnZShyaSwgc2NpKVswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVCb3JkZXIuY2FsbCh0aGlzLCByaSwgZWNpLCB7IHJpZ2h0OiBbc3R5bGUsIGNvbG9yXSB9KTtcclxuICAgICAgICAgICAgICAgIHJpICs9IHJvd3MuZ2V0Q2VsbE1lcmdlKHJpLCBlY2kpWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldENlbGxSb3dCeVkoeSwgc2Nyb2xsT2Zmc2V0eSkge1xyXG4gICAgY29uc3QgeyByb3dzIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgZnNoID0gdGhpcy5mcmVlemVUb3RhbEhlaWdodCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3k6JywgeSwgJywgZnNoOicsIGZzaCk7XHJcbiAgICBsZXQgaW5pdHMgPSByb3dzLmhlaWdodDtcclxuICAgIGlmIChmc2ggKyByb3dzLmhlaWdodCA8IHkpXHJcbiAgICAgICAgaW5pdHMgLT0gc2Nyb2xsT2Zmc2V0eTtcclxuICAgIC8vIGhhbmRsZSByaSBpbiBhdXRvZmlsdGVyXHJcbiAgICBjb25zdCBmcnNldCA9IHRoaXMuZXhjZXB0Um93U2V0O1xyXG4gICAgbGV0IHJpID0gMDtcclxuICAgIGxldCB0b3AgPSBpbml0cztcclxuICAgIGxldCB7IGhlaWdodCB9ID0gcm93cztcclxuICAgIGZvciAoOyByaSA8IHJvd3MubGVuOyByaSArPSAxKSB7XHJcbiAgICAgICAgaWYgKHRvcCA+IHkpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGlmICghZnJzZXQuaGFzKHJpKSkge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSByb3dzLmdldEhlaWdodChyaSk7XHJcbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9wIC09IGhlaWdodDtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdyaTonLCByaSwgJywgdG9wOicsIHRvcCwgJywgaGVpZ2h0OicsIGhlaWdodCk7XHJcbiAgICBpZiAodG9wIDw9IDApIHtcclxuICAgICAgICByZXR1cm4geyByaTogLTEsIHRvcDogMCwgaGVpZ2h0IH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyByaTogcmkgLSAxLCB0b3AsIGhlaWdodCB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldENlbGxDb2xCeVgoeCwgc2Nyb2xsT2Zmc2V0eCkge1xyXG4gICAgY29uc3QgeyBjb2xzIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgZnN3ID0gdGhpcy5mcmVlemVUb3RhbFdpZHRoKCk7XHJcbiAgICBsZXQgaW5pdHMgPSBjb2xzLmluZGV4V2lkdGg7XHJcbiAgICBpZiAoZnN3ICsgY29scy5pbmRleFdpZHRoIDwgeClcclxuICAgICAgICBpbml0cyAtPSBzY3JvbGxPZmZzZXR4O1xyXG4gICAgY29uc3QgW2NpLCBsZWZ0LCB3aWR0aF0gPSBoZWxwZXIucmFuZ2VSZWR1Y2VJZigwLCBjb2xzLmxlbiwgaW5pdHMsIGNvbHMuaW5kZXhXaWR0aCwgeCwgKGkpID0+IGNvbHMuZ2V0V2lkdGgoaSkpO1xyXG4gICAgaWYgKGxlZnQgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiB7IGNpOiAtMSwgbGVmdDogMCwgd2lkdGg6IGNvbHMuaW5kZXhXaWR0aCB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgY2k6IGNpIC0gMSwgbGVmdCwgd2lkdGggfTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRhUHJveHkge1xyXG4gICAgc2V0dGluZ3M7XHJcbiAgICBuYW1lO1xyXG4gICAgZnJlZXplO1xyXG4gICAgc3R5bGVzO1xyXG4gICAgbWVyZ2VzO1xyXG4gICAgcm93cztcclxuICAgIGNvbHM7XHJcbiAgICB2YWxpZGF0aW9ucztcclxuICAgIGh5cGVybGlua3M7XHJcbiAgICBjb21tZW50cztcclxuICAgIHNlbGVjdG9yO1xyXG4gICAgc2Nyb2xsO1xyXG4gICAgaGlzdG9yeTtcclxuICAgIGNsaXBib2FyZDtcclxuICAgIGF1dG9GaWx0ZXI7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICBleGNlcHRSb3dTZXQ7XHJcbiAgICBzb3J0ZWRSb3dNYXA7XHJcbiAgICB1bnNvcnRlZFJvd01hcDtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGhlbHBlci5tZXJnZShkZWZhdWx0U2V0dGluZ3MsIHNldHRpbmdzIHx8IHt9KTtcclxuICAgICAgICAvLyBzYXZlIGRhdGEgYmVnaW5cclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lIHx8ICdzaGVldCc7XHJcbiAgICAgICAgdGhpcy5mcmVlemUgPSBbMCwgMF07XHJcbiAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTsgLy8gQXJyYXk8U3R5bGU+XHJcbiAgICAgICAgdGhpcy5tZXJnZXMgPSBuZXcgTWVyZ2VzKCk7IC8vIFtDZWxsUmFuZ2UsIC4uLl1cclxuICAgICAgICB0aGlzLnJvd3MgPSBuZXcgUm93cyh0aGlzLnNldHRpbmdzLnJvdyk7XHJcbiAgICAgICAgdGhpcy5jb2xzID0gbmV3IENvbHModGhpcy5zZXR0aW5ncy5jb2wpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGlvbnMgPSBuZXcgVmFsaWRhdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmh5cGVybGlua3MgPSB7fTtcclxuICAgICAgICB0aGlzLmNvbW1lbnRzID0ge307XHJcbiAgICAgICAgLy8gc2F2ZSBkYXRhIGVuZFxyXG4gICAgICAgIC8vIGRvbid0IHNhdmUgb2JqZWN0XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IG5ldyBTZWxlY3RvcigpO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsID0gbmV3IFNjcm9sbCgpO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KCk7XHJcbiAgICAgICAgdGhpcy5jbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkKCk7XHJcbiAgICAgICAgdGhpcy5hdXRvRmlsdGVyID0gbmV3IEF1dG9GaWx0ZXIoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLmV4Y2VwdFJvd1NldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnNvcnRlZFJvd01hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLnVuc29ydGVkUm93TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgYWRkVmFsaWRhdGlvbihtb2RlLCByZWYsIHZhbGlkYXRvcikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb2RlOicsIG1vZGUsICcsIHJlZjonLCByZWYsICcsIHZhbGlkYXRvcjonLCB2YWxpZGF0b3IpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbnMuYWRkKG1vZGUsIHJlZiwgdmFsaWRhdG9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJlbW92ZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgeyByYW5nZSB9ID0gdGhpcy5zZWxlY3RvcjtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25zLnJlbW92ZShyYW5nZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRTZWxlY3RlZFZhbGlkYXRvcigpIHtcclxuICAgICAgICBjb25zdCB7IHJpLCBjaSB9ID0gdGhpcy5zZWxlY3RvcjtcclxuICAgICAgICBjb25zdCB2ID0gdGhpcy52YWxpZGF0aW9ucy5nZXQocmksIGNpKTtcclxuICAgICAgICByZXR1cm4gdiA/IHYudmFsaWRhdG9yIDogbnVsbDtcclxuICAgIH1cclxuICAgIGdldFNlbGVjdGVkVmFsaWRhdGlvbigpIHtcclxuICAgICAgICBjb25zdCB7IHJpLCBjaSwgcmFuZ2UgfSA9IHRoaXMuc2VsZWN0b3I7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMudmFsaWRhdGlvbnMuZ2V0KHJpLCBjaSk7XHJcbiAgICAgICAgY29uc3QgcmV0ID0geyByZWY6IHJhbmdlLnRvU3RyaW5nKCkgfTtcclxuICAgICAgICBpZiAodiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXQubW9kZSA9IHYubW9kZTtcclxuICAgICAgICAgICAgcmV0LnZhbGlkYXRvciA9IHYudmFsaWRhdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgY2FuVW5kbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmNhblVuZG8oKTtcclxuICAgIH1cclxuICAgIGNhblJlZG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5jYW5SZWRvKCk7XHJcbiAgICB9XHJcbiAgICB1bmRvKCkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS51bmRvKHRoaXMuZ2V0RGF0YSgpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZWRvKCkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5yZWRvKHRoaXMuZ2V0RGF0YSgpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb3B5KCkge1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkLmNvcHkodGhpcy5zZWxlY3Rvci5yYW5nZSk7XHJcbiAgICB9XHJcbiAgICBjb3B5VG9TeXN0ZW1DbGlwYm9hcmQoZXZ0KSB7XHJcbiAgICAgICAgbGV0IGNvcHlUZXh0ID0gW107XHJcbiAgICAgICAgY29uc3QgeyBzcmksIGVyaSwgc2NpLCBlY2kgfSA9IHRoaXMuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgZm9yIChsZXQgcmkgPSBzcmk7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgY2kgPSBzY2k7IGNpIDw9IGVjaTsgY2kgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgcm93LnB1c2goKGNlbGwgJiYgY2VsbC50ZXh0KSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29weVRleHQucHVzaChyb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGRpbmcgXFxuIGFuZCB3aHkgbm90IGFkZGluZyBcXHJcXG4gaXMgdG8gc3VwcG9ydCBvbmxpbmUgb2ZmaWNlIGFuZCBjbGllbnQgTVMgb2ZmaWNlIGFuZCBXUFNcclxuICAgICAgICBjb3B5VGV4dCA9IGNvcHlUZXh0Lm1hcCgocm93KSA9PiByb3cuam9pbignXFx0JykpLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgIC8vIHdoeSB1c2VkIHRoaXNcclxuICAgICAgICAvLyBjdXogaHR0cCBwcm90b2NvbCB3aWxsIGJlIGJsb2NrZWQgcmVxdWVzdCBjbGlwYm9hcmQgYnkgYnJvd3NlclxyXG4gICAgICAgIGlmIChldnQpIHtcclxuICAgICAgICAgICAgZXZ0LmNsaXBib2FyZERhdGEuY2xlYXJEYXRhKCk7XHJcbiAgICAgICAgICAgIGV2dC5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBjb3B5VGV4dCk7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzIG5lZWQgaHR0cHMgcHJvdG9jb2xcclxuICAgICAgICAvKiBnbG9iYWwgbmF2aWdhdG9yICovXHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcclxuICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY29weVRleHQpLnRoZW4oKCkgPT4geyB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGV4dCBjb3B5IHRvIHRoZSBzeXN0ZW0gY2xpcGJvYXJkIGVycm9yICAnLCBjb3B5VGV4dCwgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3V0KCkge1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkLmN1dCh0aGlzLnNlbGVjdG9yLnJhbmdlKTtcclxuICAgIH1cclxuICAgIC8vIHdoYXQ6IGFsbCB8IHRleHQgfCBmb3JtYXRcclxuICAgIHBhc3RlKHdoYXQgPSAnYWxsJywgZXJyb3IgPSAoKSA9PiB7IH0pIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc0luZGV4ZXM6Jywgc0luZGV4ZXMpO1xyXG4gICAgICAgIGNvbnN0IHsgY2xpcGJvYXJkLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgICAgICBpZiAoY2xpcGJvYXJkLmlzQ2xlYXIoKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghY2FuUGFzdGUuY2FsbCh0aGlzLCBjbGlwYm9hcmQucmFuZ2UsIHNlbGVjdG9yLnJhbmdlLCBlcnJvcikpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2xpcGJvYXJkLmlzQ29weSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb3B5UGFzdGUuY2FsbCh0aGlzLCBjbGlwYm9hcmQucmFuZ2UsIHNlbGVjdG9yLnJhbmdlLCB3aGF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbGlwYm9hcmQuaXNDdXQoKSkge1xyXG4gICAgICAgICAgICAgICAgY3V0UGFzdGUuY2FsbCh0aGlzLCBjbGlwYm9hcmQucmFuZ2UsIHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcGFzdGVGcm9tU3lzdGVtQ2xpcGJvYXJkKHJlc2V0U2hlZXQsIGV2ZW50VHJpZ2dlcikge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oKGNvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudFRvUGFzdGUgPSB0aGlzLnBhcnNlQ2xpcGJvYXJkQ29udGVudChjb250ZW50KTtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0Um93ID0gc2VsZWN0b3Iucmk7XHJcbiAgICAgICAgICAgIGNvbnRlbnRUb1Bhc3RlLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q29sdW1uID0gc2VsZWN0b3IuY2k7XHJcbiAgICAgICAgICAgICAgICByb3cuZm9yRWFjaCgoY2VsbENvbnRlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxUZXh0KHN0YXJ0Um93LCBzdGFydENvbHVtbiwgY2VsbENvbnRlbnQsICdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1uICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHN0YXJ0Um93ICs9IDE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXNldFNoZWV0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50VHJpZ2dlcih0aGlzLnJvd3MuZ2V0RGF0YSgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHBhcnNlQ2xpcGJvYXJkQ29udGVudChjbGlwYm9hcmRDb250ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IFtdO1xyXG4gICAgICAgIC8vIGZpcnN0IHdlIG5lZWQgdG8gZmlndXJlIG91dCBob3cgbWFueSByb3dzIHdlIG5lZWQgdG8gcGFzdGVcclxuICAgICAgICBjb25zdCByb3dzID0gY2xpcGJvYXJkQ29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgLy8gZm9yIGVhY2ggcm93IHBhcnNlIGNlbGwgZGF0YVxyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICAgICAgICBwYXJzZWREYXRhW2ldID0gcm93LnNwbGl0KCdcXHQnKTtcclxuICAgICAgICAgICAgaSArPSAxO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwYXJzZWREYXRhO1xyXG4gICAgfVxyXG4gICAgcGFzdGVGcm9tVGV4dCh0eHQpIHtcclxuICAgICAgICBsZXQgbGluZXMgPSBbXTtcclxuICAgICAgICBpZiAoL1xcclxcbi8udGVzdCh0eHQpKVxyXG4gICAgICAgICAgICBsaW5lcyA9IHR4dC5zcGxpdCgnXFxyXFxuJykubWFwKChpdCkgPT4gaXQucmVwbGFjZSgvXCIvZywgJycpLnNwbGl0KCdcXHQnKSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBsaW5lcyA9IHR4dC5zcGxpdCgnXFxuJykubWFwKChpdCkgPT4gaXQucmVwbGFjZSgvXCIvZywgJycpLnNwbGl0KCdcXHQnKSk7XHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHJvd3MsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcm93cy5wYXN0ZShsaW5lcywgc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdXRvZmlsbChjZWxsUmFuZ2UsIHdoYXQsIGVycm9yID0gKCkgPT4geyB9KSB7XHJcbiAgICAgICAgY29uc3Qgc3JjUmFuZ2UgPSB0aGlzLnNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIGlmICghY2FuUGFzdGUuY2FsbCh0aGlzLCBzcmNSYW5nZSwgY2VsbFJhbmdlLCBlcnJvcikpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb3B5UGFzdGUuY2FsbCh0aGlzLCBzcmNSYW5nZSwgY2VsbFJhbmdlLCB3aGF0LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNsZWFyQ2xpcGJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICBjYWxTZWxlY3RlZFJhbmdlQnlFbmQocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3QgeyBzZWxlY3Rvciwgcm93cywgY29scywgbWVyZ2VzIH0gPSB0aGlzO1xyXG4gICAgICAgIGxldCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgY29uc3QgY3JpID0gc2VsZWN0b3Iucmk7XHJcbiAgICAgICAgY29uc3QgY2NpID0gc2VsZWN0b3IuY2k7XHJcbiAgICAgICAgbGV0IFtucmksIG5jaV0gPSBbcmksIGNpXTtcclxuICAgICAgICBpZiAocmkgPCAwKVxyXG4gICAgICAgICAgICBucmkgPSByb3dzLmxlbiAtIDE7XHJcbiAgICAgICAgaWYgKGNpIDwgMClcclxuICAgICAgICAgICAgbmNpID0gY29scy5sZW4gLSAxO1xyXG4gICAgICAgIGlmIChucmkgPiBjcmkpXHJcbiAgICAgICAgICAgIFtzcmksIGVyaV0gPSBbY3JpLCBucmldO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgW3NyaSwgZXJpXSA9IFtucmksIGNyaV07XHJcbiAgICAgICAgaWYgKG5jaSA+IGNjaSlcclxuICAgICAgICAgICAgW3NjaSwgZWNpXSA9IFtjY2ksIG5jaV07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBbc2NpLCBlY2ldID0gW25jaSwgY2NpXTtcclxuICAgICAgICBzZWxlY3Rvci5yYW5nZSA9IG1lcmdlcy51bmlvbihuZXcgQ2VsbFJhbmdlKHNyaSwgc2NpLCBlcmksIGVjaSkpO1xyXG4gICAgICAgIHNlbGVjdG9yLnJhbmdlID0gbWVyZ2VzLnVuaW9uKHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0b3IucmFuZ2U6Jywgc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3Rvci5yYW5nZTtcclxuICAgIH1cclxuICAgIGNhbFNlbGVjdGVkUmFuZ2VCeVN0YXJ0KHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IsIHJvd3MsIGNvbHMsIG1lcmdlcyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgY2VsbFJhbmdlID0gbWVyZ2VzLmdldEZpcnN0SW5jbHVkZXMocmksIGNpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2VsbFJhbmdlOicsIGNlbGxSYW5nZSwgcmksIGNpLCBtZXJnZXMpO1xyXG4gICAgICAgIGlmIChjZWxsUmFuZ2UgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2VsbFJhbmdlID0gbmV3IENlbGxSYW5nZShyaSwgY2ksIHJpLCBjaSk7XHJcbiAgICAgICAgICAgIGlmIChyaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNlbGxSYW5nZS5zcmkgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2VsbFJhbmdlLmVyaSA9IHJvd3MubGVuIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2kgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjZWxsUmFuZ2Uuc2NpID0gMDtcclxuICAgICAgICAgICAgICAgIGNlbGxSYW5nZS5lY2kgPSBjb2xzLmxlbiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0b3IucmFuZ2UgPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgcmV0dXJuIGNlbGxSYW5nZTtcclxuICAgIH1cclxuICAgIHNldFNlbGVjdGVkQ2VsbEF0dHIocHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZWxlY3Rvciwgc3R5bGVzLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09ICdtZXJnZScpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bm1lcmdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocHJvcGVydHkgPT09ICdib3JkZXInKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZUJvcmRlcnMuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocHJvcGVydHkgPT09ICdmb3JtdWxhJykge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJz4+PicsIHNlbGVjdG9yLm11bHRpcGxlKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyByaSwgY2ksIHJhbmdlIH0gPSBzZWxlY3RvcjtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvci5tdWx0aXBsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBzZWxlY3Rvci5zaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHJhbmdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNjaTsgaSA8PSBlY2k7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvd3MuZ2V0Q2VsbE9yTmV3KGVyaSArIDEsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0ID0gYD0ke3ZhbHVlfSgke3h5MmV4cHIoaSwgc3JpKX06JHt4eTJleHByKGksIGVyaSl9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY24gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhyaSwgZWNpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGA9JHt2YWx1ZX0oJHt4eTJleHByKHNjaSwgcmkpfToke3h5MmV4cHIoZWNpLCByaSl9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvd3MuZ2V0Q2VsbE9yTmV3KHJpLCBjaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0ID0gYD0ke3ZhbHVlfSgpYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yLnJhbmdlLmVhY2goKHJpLCBjaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhyaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjc3R5bGUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzdHlsZSA9IGhlbHBlci5jbG9uZURlZXAoc3R5bGVzW2NlbGwuc3R5bGVdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnZm9ybWF0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3R5bGUuZm9ybWF0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmFkZFN0eWxlKGNzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BlcnR5ID09PSAnZm9udC1ib2xkJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2ZvbnQtaXRhbGljJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2ZvbnQtbmFtZScgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICdmb250LXNpemUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5mb250ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5mb250W3Byb3BlcnR5LnNwbGl0KCctJylbMV1dID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzdHlsZS5mb250ID0gT2JqZWN0LmFzc2lnbihjc3R5bGUuZm9udCB8fCB7fSwgbmZvbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5hZGRTdHlsZShjc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gJ3N0cmlrZScgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICd0ZXh0d3JhcCcgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICd1bmRlcmxpbmUnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAnYWxpZ24nIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAndmFsaWduJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2NvbG9yJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2JnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuYWRkU3R5bGUoY3N0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIHN0YXRlOiBpbnB1dCB8IGZpbmlzaGVkXHJcbiAgICBzZXRTZWxlY3RlZENlbGxUZXh0KHRleHQsIHN0YXRlID0gJ2lucHV0Jykge1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0ZpbHRlciwgc2VsZWN0b3IsIHJvd3MgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyByaSwgY2kgfSA9IHNlbGVjdG9yO1xyXG4gICAgICAgIGxldCBucmkgPSByaTtcclxuICAgICAgICBpZiAodGhpcy51bnNvcnRlZFJvd01hcC5oYXMocmkpKSB7XHJcbiAgICAgICAgICAgIG5yaSA9IHRoaXMudW5zb3J0ZWRSb3dNYXAuZ2V0KHJpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQ2VsbCA9IHJvd3MuZ2V0Q2VsbChucmksIGNpKTtcclxuICAgICAgICBjb25zdCBvbGRUZXh0ID0gb2xkQ2VsbCA/IG9sZENlbGwudGV4dCA6ICcnO1xyXG4gICAgICAgIHRoaXMuc2V0Q2VsbFRleHQobnJpLCBjaSwgdGV4dCwgc3RhdGUpO1xyXG4gICAgICAgIC8vIHJlcGxhY2UgZmlsdGVyLnZhbHVlXHJcbiAgICAgICAgaWYgKGF1dG9GaWx0ZXIuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gYXV0b0ZpbHRlci5nZXRGaWx0ZXIoY2kpO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2SW5kZXggPSBmaWx0ZXIudmFsdWUuZmluZEluZGV4KCh2KSA9PiB2ID09PSBvbGRUZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmICh2SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci52YWx1ZS5zcGxpY2UodkluZGV4LCAxLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXI6JywgZmlsdGVyLCBvbGRDZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnJlc2V0QXV0b0ZpbHRlcigpO1xyXG4gICAgfVxyXG4gICAgZ2V0U2VsZWN0ZWRDZWxsKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmksIGNpIH0gPSB0aGlzLnNlbGVjdG9yO1xyXG4gICAgICAgIGxldCBucmkgPSByaTtcclxuICAgICAgICBpZiAodGhpcy51bnNvcnRlZFJvd01hcC5oYXMocmkpKSB7XHJcbiAgICAgICAgICAgIG5yaSA9IHRoaXMudW5zb3J0ZWRSb3dNYXAuZ2V0KHJpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm93cy5nZXRDZWxsKG5yaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgeHlJblNlbGVjdGVkUmVjdCh4LCB5KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZ2V0U2VsZWN0ZWRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgeDEgPSB4IC0gdGhpcy5jb2xzLmluZGV4V2lkdGg7XHJcbiAgICAgICAgY29uc3QgeTEgPSB5IC0gdGhpcy5yb3dzLmhlaWdodDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygneDonLCB4LCAnLHk6JywgeSwgJ2xlZnQ6JywgbGVmdCwgJ3RvcDonLCB0b3ApO1xyXG4gICAgICAgIHJldHVybiB4MSA+IGxlZnQgJiYgeDEgPCBsZWZ0ICsgd2lkdGggJiYgeTEgPiB0b3AgJiYgeTEgPCB0b3AgKyBoZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBnZXRTZWxlY3RlZFJlY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVjdCh0aGlzLnNlbGVjdG9yLnJhbmdlKTtcclxuICAgIH1cclxuICAgIGdldENsaXBib2FyZFJlY3QoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjbGlwYm9hcmQgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFjbGlwYm9hcmQuaXNDbGVhcigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlY3QoY2xpcGJvYXJkLnJhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbGVmdDogLTEwMCwgdG9wOiAtMTAwIH07XHJcbiAgICB9XHJcbiAgICBnZXRSZWN0KGNlbGxSYW5nZSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsLCByb3dzLCBjb2xzLCBleGNlcHRSb3dTZXQgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IGNlbGxSYW5nZTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc3JpOicsIHNyaSwgJyxzY2k6Jywgc2NpLCAnLCBlcmk6JywgZXJpLCAnLCBlY2k6JywgZWNpKTtcclxuICAgICAgICAvLyBubyBzZWxlY3RvclxyXG4gICAgICAgIGlmIChzcmkgPCAwICYmIHNjaSA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBsOiAwLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgdDogMCxcclxuICAgICAgICAgICAgICAgIHNjcm9sbCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IGNvbHMuc3VtV2lkdGgoMCwgc2NpKTtcclxuICAgICAgICBjb25zdCB0b3AgPSByb3dzLnN1bUhlaWdodCgwLCBzcmksIGV4Y2VwdFJvd1NldCk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcm93cy5zdW1IZWlnaHQoc3JpLCBlcmkgKyAxLCBleGNlcHRSb3dTZXQpO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gY29scy5zdW1XaWR0aChzY2ksIGVjaSArIDEpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzcmk6Jywgc3JpLCAnLCBzY2k6Jywgc2NpLCAnLCBlcmk6JywgZXJpLCAnLCBlY2k6JywgZWNpKTtcclxuICAgICAgICBsZXQgbGVmdDAgPSBsZWZ0IC0gc2Nyb2xsLng7XHJcbiAgICAgICAgbGV0IHRvcDAgPSB0b3AgLSBzY3JvbGwueTtcclxuICAgICAgICBjb25zdCBmc2ggPSB0aGlzLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc3QgZnN3ID0gdGhpcy5mcmVlemVUb3RhbFdpZHRoKCk7XHJcbiAgICAgICAgaWYgKGZzdyA+IDAgJiYgZnN3ID4gbGVmdCkge1xyXG4gICAgICAgICAgICBsZWZ0MCA9IGxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmc2ggPiAwICYmIGZzaCA+IHRvcCkge1xyXG4gICAgICAgICAgICB0b3AwID0gdG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsOiBsZWZ0LFxyXG4gICAgICAgICAgICB0OiB0b3AsXHJcbiAgICAgICAgICAgIGxlZnQ6IGxlZnQwLFxyXG4gICAgICAgICAgICB0b3A6IHRvcDAsXHJcbiAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIHNjcm9sbCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbFJlY3RCeVhZKHgsIHkpIHtcclxuICAgICAgICBjb25zdCB7IHNjcm9sbCwgbWVyZ2VzLCByb3dzLCBjb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgIGxldCB7IHJpLCB0b3AsIGhlaWdodCB9ID0gZ2V0Q2VsbFJvd0J5WS5jYWxsKHRoaXMsIHksIHNjcm9sbC55KTtcclxuICAgICAgICBsZXQgeyBjaSwgbGVmdCwgd2lkdGggfSA9IGdldENlbGxDb2xCeVguY2FsbCh0aGlzLCB4LCBzY3JvbGwueCk7XHJcbiAgICAgICAgaWYgKGNpID09PSAtMSkge1xyXG4gICAgICAgICAgICB3aWR0aCA9IGNvbHMudG90YWxXaWR0aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHJvd3MudG90YWxIZWlnaHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpID49IDAgfHwgY2kgPj0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXJnZSA9IG1lcmdlcy5nZXRGaXJzdEluY2x1ZGVzKHJpLCBjaSk7XHJcbiAgICAgICAgICAgIGlmIChtZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgcmkgPSBtZXJnZS5zcmk7XHJcbiAgICAgICAgICAgICAgICBjaSA9IG1lcmdlLnNjaTtcclxuICAgICAgICAgICAgICAgICh7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jZWxsUmVjdChyaSwgY2kpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByaSxcclxuICAgICAgICAgICAgY2ksXHJcbiAgICAgICAgICAgIGxlZnQsXHJcbiAgICAgICAgICAgIHRvcCxcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaXNTaW5nbGVTZWxlY3RlZCgpIHtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcy5zZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5nZXRDZWxsKHNyaSwgc2NpKTtcclxuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLm1lcmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtybiwgY25dID0gY2VsbC5tZXJnZTtcclxuICAgICAgICAgICAgaWYgKHNyaSArIHJuID09PSBlcmkgJiYgc2NpICsgY24gPT09IGVjaSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gIXRoaXMuc2VsZWN0b3IubXVsdGlwbGUoKTtcclxuICAgIH1cclxuICAgIGNhblVubWVyZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXMuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChzcmksIHNjaSk7XHJcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5tZXJnZSkge1xyXG4gICAgICAgICAgICBjb25zdCBbcm4sIGNuXSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgIGlmIChzcmkgKyBybiA9PT0gZXJpICYmIHNjaSArIGNuID09PSBlY2kpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbWVyZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBzZWxlY3Rvciwgcm93cyB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBbcm4sIGNuXSA9IHNlbGVjdG9yLnNpemUoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbWVyZ2U6Jywgcm4sIGNuKTtcclxuICAgICAgICBpZiAocm4gPiAxIHx8IGNuID4gMSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSBzZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhzcmksIHNjaSk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLm1lcmdlID0gW3JuIC0gMSwgY24gLSAxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VzLmFkZChzZWxlY3Rvci5yYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgbWVyZ2UgY2VsbHNcclxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5kZWxldGVDZWxscyhzZWxlY3Rvci5yYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2VsbDonLCBjZWxsLCB0aGlzLmQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzLnNldENlbGwoc3JpLCBzY2ksIGNlbGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bm1lcmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzU2luZ2xlU2VsZWN0ZWQoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBzY2kgfSA9IHNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucm93cy5kZWxldGVDZWxsKHNyaSwgc2NpLCAnbWVyZ2UnKTtcclxuICAgICAgICAgICAgdGhpcy5tZXJnZXMuZGVsZXRlV2l0aGluKHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhbkF1dG9maWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmF1dG9GaWx0ZXIuYWN0aXZlKCk7XHJcbiAgICB9XHJcbiAgICBhdXRvZmlsdGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0ZpbHRlciwgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF1dG9GaWx0ZXIuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgICAgIGF1dG9GaWx0ZXIuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhjZXB0Um93U2V0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRSb3dNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuc29ydGVkUm93TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXV0b0ZpbHRlci5yZWYgPSBzZWxlY3Rvci5yYW5nZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRBdXRvRmlsdGVyKGNpLCBvcmRlciwgb3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBhdXRvRmlsdGVyIH0gPSB0aGlzO1xyXG4gICAgICAgIGF1dG9GaWx0ZXIuYWRkRmlsdGVyKGNpLCBvcGVyYXRvciwgdmFsdWUpO1xyXG4gICAgICAgIGF1dG9GaWx0ZXIuc2V0U29ydChjaSwgb3JkZXIpO1xyXG4gICAgICAgIHRoaXMucmVzZXRBdXRvRmlsdGVyKCk7XHJcbiAgICB9XHJcbiAgICByZXNldEF1dG9GaWx0ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgeyBhdXRvRmlsdGVyLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghYXV0b0ZpbHRlci5hY3RpdmUoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgc29ydCB9ID0gYXV0b0ZpbHRlcjtcclxuICAgICAgICBjb25zdCB7IHJzZXQsIGZzZXQgfSA9IGF1dG9GaWx0ZXIuZmlsdGVyZWRSb3dzKChyLCBjKSA9PiByb3dzLmdldENlbGwociwgYykpO1xyXG4gICAgICAgIGNvbnN0IGZhcnkgPSBBcnJheS5mcm9tKGZzZXQpO1xyXG4gICAgICAgIGNvbnN0IG9sZEFyeSA9IEFycmF5LmZyb20oZnNldCk7XHJcbiAgICAgICAgaWYgKHNvcnQpIHtcclxuICAgICAgICAgICAgZmFyeS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29ydC5vcmRlciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc29ydC5vcmRlciA9PT0gJ2Rlc2MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIgLSBhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV4Y2VwdFJvd1NldCA9IHJzZXQ7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRSb3dNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy51bnNvcnRlZFJvd01hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmYXJ5LmZvckVhY2goKGl0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRlZFJvd01hcC5zZXQob2xkQXJ5W2luZGV4XSwgaXQpO1xyXG4gICAgICAgICAgICB0aGlzLnVuc29ydGVkUm93TWFwLnNldChpdCwgb2xkQXJ5W2luZGV4XSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBkZWxldGVDZWxsKHdoYXQgPSAnYWxsJykge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yb3dzLmRlbGV0ZUNlbGxzKHNlbGVjdG9yLnJhbmdlLCB3aGF0KTtcclxuICAgICAgICAgICAgaWYgKHdoYXQgPT09ICdhbGwnIHx8IHdoYXQgPT09ICdmb3JtYXQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlcy5kZWxldGVXaXRoaW4oc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyB0eXBlOiByb3cgfCBjb2x1bW5cclxuICAgIGluc2VydCh0eXBlLCBuID0gMSkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3JpLCBzY2kgfSA9IHRoaXMuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcm93cywgbWVyZ2VzLCBjb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgc2kgPSBzcmk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICAgICAgcm93cy5pbnNlcnQoc3JpLCBuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnY29sdW1uJykge1xyXG4gICAgICAgICAgICAgICAgcm93cy5pbnNlcnRDb2x1bW4oc2NpLCBuKTtcclxuICAgICAgICAgICAgICAgIHNpID0gc2NpO1xyXG4gICAgICAgICAgICAgICAgY29scy5sZW4gKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZXJnZXMuc2hpZnQodHlwZSwgc2ksIG4sIChyaSwgY2ksIHJuLCBjbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvd3MuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5tZXJnZVswXSArPSBybjtcclxuICAgICAgICAgICAgICAgIGNlbGwubWVyZ2VbMV0gKz0gY247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gdHlwZTogcm93IHwgY29sdW1uXHJcbiAgICBkZWxldGUodHlwZSkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcm93cywgbWVyZ2VzLCBzZWxlY3RvciwgY29scyB9ID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3QgeyByYW5nZSB9ID0gc2VsZWN0b3I7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpIH0gPSBzZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgW3JzaXplLCBjc2l6ZV0gPSBzZWxlY3Rvci5yYW5nZS5zaXplKCk7XHJcbiAgICAgICAgICAgIGxldCBzaSA9IHNyaTtcclxuICAgICAgICAgICAgbGV0IHNpemUgPSByc2l6ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyb3cnKSB7XHJcbiAgICAgICAgICAgICAgICByb3dzLmRlbGV0ZShzcmksIGVyaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MuZGVsZXRlQ29sdW1uKHNjaSwgZWNpKTtcclxuICAgICAgICAgICAgICAgIHNpID0gcmFuZ2Uuc2NpO1xyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IGNzaXplO1xyXG4gICAgICAgICAgICAgICAgY29scy5sZW4gLT0gZWNpIC0gc2NpICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndHlwZTonLCB0eXBlLCAnLCBzaTonLCBzaSwgJywgc2l6ZTonLCBzaXplKTtcclxuICAgICAgICAgICAgbWVyZ2VzLnNoaWZ0KHR5cGUsIHNpLCAtc2l6ZSwgKHJpLCBjaSwgcm4sIGNuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksICcsIGNpOicsIGNpLCAnLCBybjonLCBybiwgJywgY246JywgY24pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvd3MuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5tZXJnZVswXSArPSBybjtcclxuICAgICAgICAgICAgICAgIGNlbGwubWVyZ2VbMV0gKz0gY247XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5tZXJnZVswXSA9PT0gMCAmJiBjZWxsLm1lcmdlWzFdID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2Nyb2xseCh4LCBjYikge1xyXG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsLCBmcmVlemUsIGNvbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgWywgZmNpXSA9IGZyZWV6ZTtcclxuICAgICAgICBjb25zdCBbY2ksIGxlZnQsIHdpZHRoXSA9IGhlbHBlci5yYW5nZVJlZHVjZUlmKGZjaSwgY29scy5sZW4sIDAsIDAsIHgsIChpKSA9PiBjb2xzLmdldFdpZHRoKGkpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZmNpOicsIGZjaSwgJywgY2k6JywgY2kpO1xyXG4gICAgICAgIGxldCB4MSA9IGxlZnQ7XHJcbiAgICAgICAgaWYgKHggPiAwKVxyXG4gICAgICAgICAgICB4MSArPSB3aWR0aDtcclxuICAgICAgICBpZiAoc2Nyb2xsLnggIT09IHgxKSB7XHJcbiAgICAgICAgICAgIHNjcm9sbC5jaSA9IHggPiAwID8gY2kgOiAwO1xyXG4gICAgICAgICAgICBzY3JvbGwueCA9IHgxO1xyXG4gICAgICAgICAgICBjYigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNjcm9sbHkoeSwgY2IpIHtcclxuICAgICAgICBjb25zdCB7IHNjcm9sbCwgZnJlZXplLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IFtmcmldID0gZnJlZXplO1xyXG4gICAgICAgIGNvbnN0IFtyaSwgdG9wLCBoZWlnaHRdID0gaGVscGVyLnJhbmdlUmVkdWNlSWYoZnJpLCByb3dzLmxlbiwgMCwgMCwgeSwgKGkpID0+IHJvd3MuZ2V0SGVpZ2h0KGkpKTtcclxuICAgICAgICBsZXQgeTEgPSB0b3A7XHJcbiAgICAgICAgaWYgKHkgPiAwKVxyXG4gICAgICAgICAgICB5MSArPSBoZWlnaHQ7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JpOicsIHJpLCAnICx5OicsIHkxKTtcclxuICAgICAgICBpZiAoc2Nyb2xsLnkgIT09IHkxKSB7XHJcbiAgICAgICAgICAgIHNjcm9sbC5yaSA9IHkgPiAwID8gcmkgOiAwO1xyXG4gICAgICAgICAgICBzY3JvbGwueSA9IHkxO1xyXG4gICAgICAgICAgICBjYigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNlbGxSZWN0KHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBsZWZ0ID0gY29scy5zdW1XaWR0aCgwLCBjaSk7XHJcbiAgICAgICAgY29uc3QgdG9wID0gcm93cy5zdW1IZWlnaHQoMCwgcmkpO1xyXG4gICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICBsZXQgd2lkdGggPSBjb2xzLmdldFdpZHRoKGNpKTtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gcm93cy5nZXRIZWlnaHQocmkpO1xyXG4gICAgICAgIGlmIChjZWxsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsLm1lcmdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbcm4sIGNuXSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2VsbC5tZXJnZTonLCBjZWxsLm1lcmdlKTtcclxuICAgICAgICAgICAgICAgIGlmIChybiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBybjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSByb3dzLmdldEhlaWdodChyaSArIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjbjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGNvbHMuZ2V0V2lkdGgoY2kgKyBpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGE6JywgdGhpcy5kKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0LFxyXG4gICAgICAgICAgICB0b3AsXHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgIGNlbGwsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldENlbGwocmksIGNpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm93cy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsVGV4dE9yRGVmYXVsdChyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgcmV0dXJuIGNlbGwgJiYgY2VsbC50ZXh0ID8gY2VsbC50ZXh0IDogJyc7XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsU3R5bGUocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXNbY2VsbC5zdHlsZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbFN0eWxlT3JEZWZhdWx0KHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICBjb25zdCBjZWxsU3R5bGUgPSBjZWxsICYmIGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZCA/IHN0eWxlc1tjZWxsLnN0eWxlXSA6IHt9O1xyXG4gICAgICAgIHJldHVybiBoZWxwZXIubWVyZ2UodGhpcy5kZWZhdWx0U3R5bGUoKSwgY2VsbFN0eWxlKTtcclxuICAgIH1cclxuICAgIGdldFNlbGVjdGVkQ2VsbFN0eWxlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmksIGNpIH0gPSB0aGlzLnNlbGVjdG9yO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENlbGxTdHlsZU9yRGVmYXVsdChyaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgLy8gc3RhdGU6IGlucHV0IHwgZmluaXNoZWRcclxuICAgIHNldENlbGxUZXh0KHJpLCBjaSwgdGV4dCwgc3RhdGUpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGhpc3RvcnksIHZhbGlkYXRpb25zIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICAgICAgICByb3dzLnNldENlbGxUZXh0KHJpLCBjaSwgJycpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LmFkZCh0aGlzLmdldERhdGEoKSk7XHJcbiAgICAgICAgICAgIHJvd3Muc2V0Q2VsbFRleHQocmksIGNpLCB0ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJvd3Muc2V0Q2VsbFRleHQocmksIGNpLCB0ZXh0KTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UodGhpcy5nZXREYXRhKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB2YWxpZGF0b3JcclxuICAgICAgICB2YWxpZGF0aW9ucy52YWxpZGF0ZShyaSwgY2ksIHRleHQpO1xyXG4gICAgfVxyXG4gICAgZnJlZXplSXNBY3RpdmUoKSB7XHJcbiAgICAgICAgY29uc3QgW3JpLCBjaV0gPSB0aGlzLmZyZWV6ZTtcclxuICAgICAgICByZXR1cm4gcmkgPiAwIHx8IGNpID4gMDtcclxuICAgIH1cclxuICAgIHNldEZyZWV6ZShyaSwgY2kpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZyZWV6ZSA9IFtyaSwgY2ldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnJlZXplVG90YWxXaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xzLnN1bVdpZHRoKDAsIHRoaXMuZnJlZXplWzFdKTtcclxuICAgIH1cclxuICAgIGZyZWV6ZVRvdGFsSGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvd3Muc3VtSGVpZ2h0KDAsIHRoaXMuZnJlZXplWzBdKTtcclxuICAgIH1cclxuICAgIHNldFJvd0hlaWdodChyaSwgaGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yb3dzLnNldEhlaWdodChyaSwgaGVpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNldENvbFdpZHRoKGNpLCB3aWR0aCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29scy5zZXRXaWR0aChjaSwgd2lkdGgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdmlld0hlaWdodCgpIHtcclxuICAgICAgICBjb25zdCB7IHZpZXcsIHNob3dUb29sYmFyLCBzaG93Qm90dG9tQmFyIH0gPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgICAgIGxldCBoID0gdmlldy5oZWlnaHQoKTtcclxuICAgICAgICBpZiAoc2hvd0JvdHRvbUJhcikge1xyXG4gICAgICAgICAgICBoIC09IGJvdHRvbWJhckhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNob3dUb29sYmFyKSB7XHJcbiAgICAgICAgICAgIGggLT0gdG9vbGJhckhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGg7XHJcbiAgICB9XHJcbiAgICB2aWV3V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3Mudmlldy53aWR0aCgpO1xyXG4gICAgfVxyXG4gICAgZnJlZXplVmlld1JhbmdlKCkge1xyXG4gICAgICAgIGNvbnN0IFtyaSwgY2ldID0gdGhpcy5mcmVlemU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2UoMCwgMCwgcmkgLSAxLCBjaSAtIDEsIHRoaXMuZnJlZXplVG90YWxXaWR0aCgpLCB0aGlzLmZyZWV6ZVRvdGFsSGVpZ2h0KCkpO1xyXG4gICAgfVxyXG4gICAgY29udGVudFJhbmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBbcmksIGNpXSA9IHJvd3MubWF4Q2VsbCgpO1xyXG4gICAgICAgIGNvbnN0IGggPSByb3dzLnN1bUhlaWdodCgwLCByaSArIDEpO1xyXG4gICAgICAgIGNvbnN0IHcgPSBjb2xzLnN1bVdpZHRoKDAsIGNpICsgMSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2UoMCwgMCwgcmksIGNpLCB3LCBoKTtcclxuICAgIH1cclxuICAgIGV4Y2VwdFJvd1RvdGFsSGVpZ2h0KHNyaSwgZXJpKSB7XHJcbiAgICAgICAgY29uc3QgeyBleGNlcHRSb3dTZXQsIHJvd3MgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgZXhjZXB0Um93cyA9IEFycmF5LmZyb20oZXhjZXB0Um93U2V0KTtcclxuICAgICAgICBsZXQgZXhjZXB0Um93VEggPSAwO1xyXG4gICAgICAgIGV4Y2VwdFJvd3MuZm9yRWFjaCgocmkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJpIDwgc3JpIHx8IHJpID4gZXJpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSByb3dzLmdldEhlaWdodChyaSk7XHJcbiAgICAgICAgICAgICAgICBleGNlcHRSb3dUSCArPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZXhjZXB0Um93VEg7XHJcbiAgICB9XHJcbiAgICB2aWV3UmFuZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY3JvbGwsIHJvd3MsIGNvbHMsIGZyZWV6ZSwgZXhjZXB0Um93U2V0IH0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzY3JvbGw6Jywgc2Nyb2xsLCAnLCBmcmVlemU6JywgZnJlZXplKVxyXG4gICAgICAgIGxldCB7IHJpLCBjaSB9ID0gc2Nyb2xsO1xyXG4gICAgICAgIGlmIChyaSA8PSAwKVxyXG4gICAgICAgICAgICBbcmldID0gZnJlZXplO1xyXG4gICAgICAgIGlmIChjaSA8PSAwKVxyXG4gICAgICAgICAgICBbLCBjaV0gPSBmcmVlemU7XHJcbiAgICAgICAgbGV0IFt4LCB5XSA9IFswLCAwXTtcclxuICAgICAgICBsZXQgW2VyaSwgZWNpXSA9IFtyb3dzLmxlbiwgY29scy5sZW5dO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSByaTsgaSA8IHJvd3MubGVuOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKCFleGNlcHRSb3dTZXQuaGFzKGkpKSB7XHJcbiAgICAgICAgICAgICAgICB5ICs9IHJvd3MuZ2V0SGVpZ2h0KGkpO1xyXG4gICAgICAgICAgICAgICAgZXJpID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeSA+IHRoaXMudmlld0hlaWdodCgpKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGogPSBjaTsgaiA8IGNvbHMubGVuOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgeCArPSBjb2xzLmdldFdpZHRoKGopO1xyXG4gICAgICAgICAgICBlY2kgPSBqO1xyXG4gICAgICAgICAgICBpZiAoeCA+IHRoaXMudmlld1dpZHRoKCkpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmksIGNpLCBlcmksIGVjaSwgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2UocmksIGNpLCBlcmksIGVjaSwgeCwgeSk7XHJcbiAgICB9XHJcbiAgICBlYWNoTWVyZ2VzSW5WaWV3KHZpZXdSYW5nZSwgY2IpIHtcclxuICAgICAgICB0aGlzLm1lcmdlcy5maWx0ZXJJbnRlcnNlY3RzKHZpZXdSYW5nZSkuZm9yRWFjaCgoaXQpID0+IGNiKGl0KSk7XHJcbiAgICB9XHJcbiAgICBoaWRlUm93c09yQ29scygpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGNvbHMsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IFtybGVuLCBjbGVuXSA9IHNlbGVjdG9yLnNpemUoKTtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgaWYgKHJsZW4gPT09IHJvd3MubGVuKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNpID0gc2NpOyBjaSA8PSBlY2k7IGNpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbHMuc2V0SGlkZShjaSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xlbiA9PT0gY29scy5sZW4pIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcmkgPSBzcmk7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgcm93cy5zZXRIaWRlKHJpLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHR5cGU6IHJvdyB8IGNvbFxyXG4gICAgLy8gaW5kZXggcm93LWluZGV4IHwgY29sLWluZGV4XHJcbiAgICB1bmhpZGVSb3dzT3JDb2xzKHR5cGUsIGluZGV4KSB7XHJcbiAgICAgICAgdGhpc1tgJHt0eXBlfXNgXS51bmhpZGUoaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgcm93RWFjaChtaW4sIG1heCwgY2IpIHtcclxuICAgICAgICBsZXQgeSA9IDA7XHJcbiAgICAgICAgY29uc3QgeyByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGZyc2V0ID0gdGhpcy5leGNlcHRSb3dTZXQ7XHJcbiAgICAgICAgY29uc3QgZnJhcnkgPSBbLi4uZnJzZXRdO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhcnkubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGZyYXJ5W2ldIDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbWluOicsIG1pbiwgJywgbWF4OicsIG1heCwgJywgc2Nyb2xsOicsIHNjcm9sbCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IG1pbiArIG9mZnNldDsgaSA8PSBtYXggKyBvZmZzZXQ7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAoZnJzZXQuaGFzKGkpKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0hlaWdodCA9IHJvd3MuZ2V0SGVpZ2h0KGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0hlaWdodCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYihpLCB5LCByb3dIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gcm93SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5ID4gdGhpcy52aWV3SGVpZ2h0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29sRWFjaChtaW4sIG1heCwgY2IpIHtcclxuICAgICAgICBsZXQgeCA9IDA7XHJcbiAgICAgICAgY29uc3QgeyBjb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBtaW47IGkgPD0gbWF4OyBpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sV2lkdGggPSBjb2xzLmdldFdpZHRoKGkpO1xyXG4gICAgICAgICAgICBpZiAoY29sV2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjYihpLCB4LCBjb2xXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICB4ICs9IGNvbFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgaWYgKHggPiB0aGlzLnZpZXdXaWR0aCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVmYXVsdFN0eWxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnN0eWxlO1xyXG4gICAgfVxyXG4gICAgYWRkU3R5bGUobnN0eWxlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzdHlsZXMgfSA9IHRoaXM7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29sZC5zdHlsZXM6Jywgc3R5bGVzLCBuc3R5bGUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gc3R5bGVzW2ldO1xyXG4gICAgICAgICAgICBpZiAoaGVscGVyLmVxdWFscyhzdHlsZSwgbnN0eWxlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdHlsZXMucHVzaChuc3R5bGUpO1xyXG4gICAgICAgIHJldHVybiBzdHlsZXMubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuICAgIGNoYW5nZURhdGEoY2IpIHtcclxuICAgICAgICB0aGlzLmhpc3RvcnkuYWRkKHRoaXMuZ2V0RGF0YSgpKTtcclxuICAgICAgICBjYigpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlKHRoaXMuZ2V0RGF0YSgpKTtcclxuICAgIH1cclxuICAgIHNldERhdGEoZCkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGQpLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ21lcmdlcycgfHxcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAncm93cycgfHxcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAnY29scycgfHxcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAndmFsaWRhdGlvbnMnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzW3Byb3BlcnR5XS5zZXREYXRhKGRbcHJvcGVydHldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gJ2ZyZWV6ZScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFt4LCB5XSA9IGV4cHIyeHkoZFtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcmVlemUgPSBbeSwgeF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocHJvcGVydHkgPT09ICdhdXRvZmlsdGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvRmlsdGVyLnNldERhdGEoZFtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRbcHJvcGVydHldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNbcHJvcGVydHldID0gZFtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgeyBuYW1lLCBmcmVlemUsIHN0eWxlcywgbWVyZ2VzLCByb3dzLCBjb2xzLCB2YWxpZGF0aW9ucywgYXV0b0ZpbHRlciwgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZnJlZXplOiB4eTJleHByKGZyZWV6ZVsxXSwgZnJlZXplWzBdKSxcclxuICAgICAgICAgICAgc3R5bGVzLFxyXG4gICAgICAgICAgICBtZXJnZXM6IG1lcmdlcy5nZXREYXRhKCksXHJcbiAgICAgICAgICAgIHJvd3M6IHJvd3MuZ2V0RGF0YSgpLFxyXG4gICAgICAgICAgICBjb2xzOiBjb2xzLmdldERhdGEoKSxcclxuICAgICAgICAgICAgdmFsaWRhdGlvbnM6IHZhbGlkYXRpb25zLmdldERhdGEoKSxcclxuICAgICAgICAgICAgYXV0b2ZpbHRlcjogYXV0b0ZpbHRlci5nZXREYXRhKCksXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBkb2NzXHJcbi8qKiBkZWZhdWx0IGZvbnQgbGlzdFxyXG4gKiBAdHlwZSB7QmFzZUZvbnRbXX1cclxuICovXHJcbmNvbnN0IGJhc2VGb250cyA9IFtcclxuICAgIHsga2V5OiAnQXJpYWwnLCB0aXRsZTogJ0FyaWFsJyB9LFxyXG4gICAgeyBrZXk6ICdIZWx2ZXRpY2EnLCB0aXRsZTogJ0hlbHZldGljYScgfSxcclxuICAgIHsga2V5OiAnU291cmNlIFNhbnMgUHJvJywgdGl0bGU6ICdTb3VyY2UgU2FucyBQcm8nIH0sXHJcbiAgICB7IGtleTogJ0NvbWljIFNhbnMgTVMnLCB0aXRsZTogJ0NvbWljIFNhbnMgTVMnIH0sXHJcbiAgICB7IGtleTogJ0NvdXJpZXIgTmV3JywgdGl0bGU6ICdDb3VyaWVyIE5ldycgfSxcclxuICAgIHsga2V5OiAnVmVyZGFuYScsIHRpdGxlOiAnVmVyZGFuYScgfSxcclxuICAgIHsga2V5OiAnTGF0bycsIHRpdGxlOiAnTGF0bycgfSxcclxuXTtcclxuLyoqIGRlZmF1bHQgZm9udFNpemUgbGlzdFxyXG4gKiBAdHlwZSB7Rm9udFNpemVbXX1cclxuICovXHJcbmNvbnN0IGZvbnRTaXplcyA9IFtcclxuICAgIHsgcHQ6IDcuNSwgcHg6IDEwIH0sXHJcbiAgICB7IHB0OiA4LCBweDogMTEgfSxcclxuICAgIHsgcHQ6IDksIHB4OiAxMiB9LFxyXG4gICAgeyBwdDogMTAsIHB4OiAxMyB9LFxyXG4gICAgeyBwdDogMTAuNSwgcHg6IDE0IH0sXHJcbiAgICB7IHB0OiAxMSwgcHg6IDE1IH0sXHJcbiAgICB7IHB0OiAxMiwgcHg6IDE2IH0sXHJcbiAgICB7IHB0OiAxNCwgcHg6IDE4LjcgfSxcclxuICAgIHsgcHQ6IDE1LCBweDogMjAgfSxcclxuICAgIHsgcHQ6IDE2LCBweDogMjEuMyB9LFxyXG4gICAgeyBwdDogMTgsIHB4OiAyNCB9LFxyXG4gICAgeyBwdDogMjIsIHB4OiAyOS4zIH0sXHJcbiAgICB7IHB0OiAyNCwgcHg6IDMyIH0sXHJcbiAgICB7IHB0OiAyNiwgcHg6IDM0LjcgfSxcclxuICAgIHsgcHQ6IDM2LCBweDogNDggfSxcclxuICAgIHsgcHQ6IDQyLCBweDogNTYgfSxcclxuICAgIC8vIHsgcHQ6IDU0LCBweDogNzEuNyB9LFxyXG4gICAgLy8geyBwdDogNjMsIHB4OiA4My43IH0sXHJcbiAgICAvLyB7IHB0OiA3MiwgcHg6IDk1LjYgfSxcclxuXTtcclxuLyoqIG1hcCBwdCB0byBweFxyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBwYXJhbSB7Zm9udHNpemVQVH0gcHRcclxuICogQHJldHVybnMge2ZvbnRzaXplUFh9XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGb250U2l6ZVB4QnlQdChwdCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb250U2l6ZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IGZvbnRTaXplc1tpXTtcclxuICAgICAgICBpZiAoZm9udFNpemUucHQgPT09IHB0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmb250U2l6ZS5weDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHQ7XHJcbn1cclxuLyoqIHRyYW5zZm9ybSBiYXNlRm9udHMgdG8gbWFwXHJcbiAqIEBkYXRlIDIwMTktMTAtMTBcclxuICogQHBhcmFtIHtCYXNlRm9udFtdfSBbYXJ5PVtdXVxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxyXG4gKi9cclxuZnVuY3Rpb24gZm9udHMoYXJ5ID0gW10pIHtcclxuICAgIGNvbnN0IG1hcCA9IHt9O1xyXG4gICAgYmFzZUZvbnRzLmNvbmNhdChhcnkpLmZvckVhY2goKGYpID0+IHtcclxuICAgICAgICBtYXBbZi5rZXldID0gZjtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG1hcDtcclxufVxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgZm9udFNpemVzLCBmb250cywgYmFzZUZvbnRzLCBnZXRGb250U2l6ZVB4QnlQdCB9O1xyXG4iLCJpbXBvcnQgeyB0ZiB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5jb25zdCBmb3JtYXRTdHJpbmdSZW5kZXIgPSAodikgPT4gdjtcclxuY29uc3QgZm9ybWF0TnVtYmVyUmVuZGVyID0gKHYpID0+IHtcclxuICAgIC8vIG1hdGNoIFwiLTEyLjFcIiBvciBcIjEyXCIgb3IgXCIxMi4xXCJcclxuICAgIGlmICgvXigtP1xcZCouP1xcZCopJC8udGVzdCh2KSkge1xyXG4gICAgICAgIGNvbnN0IHYxID0gTnVtYmVyKHYpLnRvRml4ZWQoMikudG9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBbZmlyc3QsIC4uLnBhcnRzXSA9IHYxLnNwbGl0KCdcXFxcLicpO1xyXG4gICAgICAgIHJldHVybiBbZmlyc3QucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCAnJDEsJyksIC4uLnBhcnRzXTtcclxuICAgIH1cclxuICAgIHJldHVybiB2O1xyXG59O1xyXG5jb25zdCBiYXNlRm9ybWF0cyA9IFtcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdub3JtYWwnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0Lm5vcm1hbCcpLFxyXG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICAgIHJlbmRlcjogZm9ybWF0U3RyaW5nUmVuZGVyLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICd0ZXh0JyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC50ZXh0JyksXHJcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ251bWJlcicsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQubnVtYmVyJyksXHJcbiAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgbGFiZWw6ICcxLDAwMC4xMicsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXROdW1iZXJSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ3BlcmNlbnQnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0LnBlcmNlbnQnKSxcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICBsYWJlbDogJzEwLjEyJScsXHJcbiAgICAgICAgcmVuZGVyOiAodikgPT4gYCR7dn0lYCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAncm1iJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5ybWInKSxcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICBsYWJlbDogJ++/pTEwLjAwJyxcclxuICAgICAgICByZW5kZXI6ICh2KSA9PiBg77+lJHtmb3JtYXROdW1iZXJSZW5kZXIodil9YCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAndXNkJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC51c2QnKSxcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICBsYWJlbDogJyQxMC4wMCcsXHJcbiAgICAgICAgcmVuZGVyOiAodikgPT4gYCQke2Zvcm1hdE51bWJlclJlbmRlcih2KX1gLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdldXInLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0LmV1cicpLFxyXG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgIGxhYmVsOiAn4oKsMTAuMDAnLFxyXG4gICAgICAgIHJlbmRlcjogKHYpID0+IGDigqwke2Zvcm1hdE51bWJlclJlbmRlcih2KX1gLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdkYXRlJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5kYXRlJyksXHJcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxyXG4gICAgICAgIGxhYmVsOiAnMjYvMDkvMjAwOCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ3RpbWUnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0LnRpbWUnKSxcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgbGFiZWw6ICcxNTo1OTowMCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ2RhdGV0aW1lJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5kYXRldGltZScpLFxyXG4gICAgICAgIHR5cGU6ICdkYXRlJyxcclxuICAgICAgICBsYWJlbDogJzI2LzA5LzIwMDggMTU6NTk6MDAnLFxyXG4gICAgICAgIHJlbmRlcjogZm9ybWF0U3RyaW5nUmVuZGVyLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdkdXJhdGlvbicsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQuZHVyYXRpb24nKSxcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgbGFiZWw6ICcyNDowMTowMCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG5dO1xyXG4vLyBjb25zdCBmb3JtYXRzID0gKGFyeSA9IFtdKSA9PiB7XHJcbi8vICAgY29uc3QgbWFwID0ge307XHJcbi8vICAgYmFzZUZvcm1hdHMuY29uY2F0KGFyeSkuZm9yRWFjaCgoZikgPT4ge1xyXG4vLyAgICAgbWFwW2Yua2V5XSA9IGY7XHJcbi8vICAgfSk7XHJcbi8vICAgcmV0dXJuIG1hcDtcclxuLy8gfTtcclxuY29uc3QgZm9ybWF0bSA9IHt9O1xyXG5iYXNlRm9ybWF0cy5mb3JFYWNoKChmKSA9PiB7XHJcbiAgICBmb3JtYXRtW2Yua2V5XSA9IGY7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgZm9ybWF0bSwgYmFzZUZvcm1hdHMgfTtcclxuIiwiLyoqXHJcbiAgZm9ybXVsYTpcclxuICAgIGtleVxyXG4gICAgdGl0bGVcclxuICAgIHJlbmRlclxyXG4qL1xyXG4vKipcclxuICogQHR5cGVkZWYge29iamVjdH0gRm9ybXVsYVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30ga2V5XHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IHRpdGxlXHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IHJlbmRlclxyXG4gKi9cclxuaW1wb3J0IHsgdGYgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuaW1wb3J0IHsgbnVtYmVyQ2FsYyB9IGZyb20gJy4vaGVscGVyJztcclxuLyoqIEB0eXBlIHtGb3JtdWxhW119ICovXHJcbmNvbnN0IGJhc2VGb3JtdWxhcyA9IFtcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdTVU0nLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5zdW0nKSxcclxuICAgICAgICByZW5kZXI6IChhcnkpID0+IGFyeS5yZWR1Y2UoKGEsIGIpID0+IG51bWJlckNhbGMoJysnLCBhLCBiKSwgMCksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ0FWRVJBR0UnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5hdmVyYWdlJyksXHJcbiAgICAgICAgcmVuZGVyOiAoYXJ5KSA9PiBhcnkucmVkdWNlKChhLCBiKSA9PiBOdW1iZXIoYSkgKyBOdW1iZXIoYiksIDApIC8gYXJ5Lmxlbmd0aCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnTUFYJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEubWF4JyksXHJcbiAgICAgICAgcmVuZGVyOiAoYXJ5KSA9PiBNYXRoLm1heCguLi5hcnkubWFwKCh2KSA9PiBOdW1iZXIodikpKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnTUlOJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEubWluJyksXHJcbiAgICAgICAgcmVuZGVyOiAoYXJ5KSA9PiBNYXRoLm1pbiguLi5hcnkubWFwKCh2KSA9PiBOdW1iZXIodikpKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnSUYnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5faWYnKSxcclxuICAgICAgICByZW5kZXI6IChbYiwgdCwgZl0pID0+IChiID8gdCA6IGYpLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdBTkQnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5hbmQnKSxcclxuICAgICAgICByZW5kZXI6IChhcnkpID0+IGFyeS5ldmVyeSgoaXQpID0+IGl0KSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnT1InLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5vcicpLFxyXG4gICAgICAgIHJlbmRlcjogKGFyeSkgPT4gYXJ5LnNvbWUoKGl0KSA9PiBpdCksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ0NPTkNBVCcsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLmNvbmNhdCcpLFxyXG4gICAgICAgIHJlbmRlcjogKGFyeSkgPT4gYXJ5LmpvaW4oJycpLFxyXG4gICAgfSxcclxuICAgIC8qIHN1cHBvcnQ6ICAxICsgQTEgKyBCMiAqIDNcclxuICAgIHtcclxuICAgICAga2V5OiAnRElWSURFJyxcclxuICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLmRpdmlkZScpLFxyXG4gICAgICByZW5kZXI6IGFyeSA9PiBhcnkucmVkdWNlKChhLCBiKSA9PiBOdW1iZXIoYSkgLyBOdW1iZXIoYikpLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiAnUFJPRFVDVCcsXHJcbiAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5wcm9kdWN0JyksXHJcbiAgICAgIHJlbmRlcjogYXJ5ID0+IGFyeS5yZWR1Y2UoKGEsIGIpID0+IE51bWJlcihhKSAqIE51bWJlcihiKSwxKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGtleTogJ1NVQlRSQUNUJyxcclxuICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLnN1YnRyYWN0JyksXHJcbiAgICAgIHJlbmRlcjogYXJ5ID0+IGFyeS5yZWR1Y2UoKGEsIGIpID0+IE51bWJlcihhKSAtIE51bWJlcihiKSksXHJcbiAgICB9LFxyXG4gICAgKi9cclxuXTtcclxuY29uc3QgZm9ybXVsYXMgPSBiYXNlRm9ybXVsYXM7XHJcbi8vIGNvbnN0IGZvcm11bGFzID0gKGZvcm11bGFBcnkgPSBbXSkgPT4ge1xyXG4vLyAgIGNvbnN0IGZvcm11bGFNYXAgPSB7fTtcclxuLy8gICBiYXNlRm9ybXVsYXMuY29uY2F0KGZvcm11bGFBcnkpLmZvckVhY2goKGYpID0+IHtcclxuLy8gICAgIGZvcm11bGFNYXBbZi5rZXldID0gZjtcclxuLy8gICB9KTtcclxuLy8gICByZXR1cm4gZm9ybXVsYU1hcDtcclxuLy8gfTtcclxuY29uc3QgZm9ybXVsYW0gPSB7fTtcclxuYmFzZUZvcm11bGFzLmZvckVhY2goKGYpID0+IHtcclxuICAgIGZvcm11bGFtW2Yua2V5XSA9IGY7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgZm9ybXVsYW0sIGZvcm11bGFzLCBiYXNlRm9ybXVsYXMgfTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuZnVuY3Rpb24gY2xvbmVEZWVwKG9iaikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XHJcbn1cclxuY29uc3QgbWVyZ2VEZWVwID0gKG9iamVjdCA9IHt9LCAuLi5zb3VyY2VzKSA9PiB7XHJcbiAgICBzb3VyY2VzLmZvckVhY2goKHNvdXJjZSkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2s6Jywga2V5LCAnLCB2OicsIHNvdXJjZVtrZXldLCB0eXBlb2YgdiwgdiBpbnN0YW5jZW9mIE9iamVjdCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSAnbnVtYmVyJyB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHYgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2ICE9PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh2KSAmJlxyXG4gICAgICAgICAgICAgICAgdiBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSBvYmplY3Rba2V5XSB8fCB7fTtcclxuICAgICAgICAgICAgICAgIG1lcmdlRGVlcChvYmplY3Rba2V5XSwgdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Rba2V5XSA9IHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gY29uc29sZS5sb2coJzo6Jywgb2JqZWN0KTtcclxuICAgIHJldHVybiBvYmplY3Q7XHJcbn07XHJcbmZ1bmN0aW9uIGVxdWFscyhvYmoxLCBvYmoyKSB7XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqMSk7XHJcbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKG9iajIpLmxlbmd0aClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBjb25zdCBrID0ga2V5c1tpXTtcclxuICAgICAgICBjb25zdCB2MSA9IG9iajFba107XHJcbiAgICAgICAgY29uc3QgdjIgPSBvYmoyW2tdO1xyXG4gICAgICAgIGlmICh2MiA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2MSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgdHlwZW9mIHYxID09PSAnbnVtYmVyJyB8fFxyXG4gICAgICAgICAgICB0eXBlb2YgdjEgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBpZiAodjEgIT09IHYyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHYxKSkge1xyXG4gICAgICAgICAgICBpZiAodjEubGVuZ3RoICE9PSB2Mi5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGFpID0gMDsgYWkgPCB2MS5sZW5ndGg7IGFpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXF1YWxzKHYxW2FpXSwgdjJbYWldKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYxICE9PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICFBcnJheS5pc0FycmF5KHYxKSAmJlxyXG4gICAgICAgICAgICB2MSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIWVxdWFscyh2MSwgdjIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qXHJcbiAgb2JqT3JBcnk6IG9iZWpjdCBvciBBcnJheVxyXG4gIGNiOiAodmFsdWUsIGluZGV4IHwga2V5KSA9PiB7IHJldHVybiB2YWx1ZSB9XHJcbiovXHJcbmNvbnN0IHN1bSA9IChvYmpPckFyeSwgY2IgPSAodmFsdWUsIGspID0+IHZhbHVlKSA9PiB7XHJcbiAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgbGV0IHNpemUgPSAwO1xyXG4gICAgT2JqZWN0LmtleXMob2JqT3JBcnkpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgIHRvdGFsICs9IGNiKG9iak9yQXJ5W2tleV0sIGtleSk7XHJcbiAgICAgICAgc2l6ZSArPSAxO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gW3RvdGFsLCBzaXplXTtcclxufTtcclxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkob2JqLCBwcm9wZXJ0eSkge1xyXG4gICAgY29uc3Qgb2xkdiA9IG9ialtgJHtwcm9wZXJ0eX1gXTtcclxuICAgIGRlbGV0ZSBvYmpbYCR7cHJvcGVydHl9YF07XHJcbiAgICByZXR1cm4gb2xkdjtcclxufVxyXG5mdW5jdGlvbiByYW5nZVJlZHVjZUlmKG1pbiwgbWF4LCBpbml0cywgaW5pdHYsIGlmdiwgZ2V0dikge1xyXG4gICAgbGV0IHMgPSBpbml0cztcclxuICAgIGxldCB2ID0gaW5pdHY7XHJcbiAgICBsZXQgaSA9IG1pbjtcclxuICAgIGZvciAoOyBpIDwgbWF4OyBpICs9IDEpIHtcclxuICAgICAgICBpZiAocyA+IGlmdilcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgdiA9IGdldHYoaSk7XHJcbiAgICAgICAgcyArPSB2O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtpLCBzIC0gdiwgdl07XHJcbn1cclxuZnVuY3Rpb24gcmFuZ2VTdW0obWluLCBtYXgsIGdldHYpIHtcclxuICAgIGxldCBzID0gMDtcclxuICAgIGZvciAobGV0IGkgPSBtaW47IGkgPCBtYXg7IGkgKz0gMSkge1xyXG4gICAgICAgIHMgKz0gZ2V0dihpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzO1xyXG59XHJcbmZ1bmN0aW9uIHJhbmdlRWFjaChtaW4sIG1heCwgY2IpIHtcclxuICAgIGZvciAobGV0IGkgPSBtaW47IGkgPCBtYXg7IGkgKz0gMSkge1xyXG4gICAgICAgIGNiKGkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFycmF5RXF1YWxzKGExLCBhMikge1xyXG4gICAgaWYgKGExLmxlbmd0aCA9PT0gYTIubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAoYTFbaV0gIT09IGEyW2ldKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBkaWdpdHMoYSkge1xyXG4gICAgY29uc3QgdiA9IGAke2F9YDtcclxuICAgIGxldCByZXQgPSAwO1xyXG4gICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGlmIChmbGFnID09PSB0cnVlKVxyXG4gICAgICAgICAgICByZXQgKz0gMTtcclxuICAgICAgICBpZiAodi5jaGFyQXQoaSkgPT09ICcuJylcclxuICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJDYWxjKHR5cGUsIGExLCBhMikge1xyXG4gICAgaWYgKE51bWJlci5pc05hTihhMSkgfHwgTnVtYmVyLmlzTmFOKGEyKSkge1xyXG4gICAgICAgIHJldHVybiBhMSArIHR5cGUgKyBhMjtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsMSA9IGRpZ2l0cyhhMSk7XHJcbiAgICBjb25zdCBhbDIgPSBkaWdpdHMoYTIpO1xyXG4gICAgY29uc3QgbnVtMSA9IE51bWJlcihhMSk7XHJcbiAgICBjb25zdCBudW0yID0gTnVtYmVyKGEyKTtcclxuICAgIGxldCByZXQgPSAwO1xyXG4gICAgaWYgKHR5cGUgPT09ICctJykge1xyXG4gICAgICAgIHJldCA9IG51bTEgLSBudW0yO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJysnKSB7XHJcbiAgICAgICAgcmV0ID0gbnVtMSArIG51bTI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnKicpIHtcclxuICAgICAgICByZXQgPSBudW0xICogbnVtMjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICcvJykge1xyXG4gICAgICAgIHJldCA9IG51bTEgLyBudW0yO1xyXG4gICAgICAgIGlmIChkaWdpdHMocmV0KSA+IDUpXHJcbiAgICAgICAgICAgIHJldHVybiByZXQudG9GaXhlZCgyKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldC50b0ZpeGVkKE1hdGgubWF4KGFsMSwgYWwyKSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgY2xvbmVEZWVwLFxyXG4gICAgbWVyZ2U6ICguLi5zb3VyY2VzKSA9PiBtZXJnZURlZXAoe30sIC4uLnNvdXJjZXMpLFxyXG4gICAgZXF1YWxzLFxyXG4gICAgYXJyYXlFcXVhbHMsXHJcbiAgICBzdW0sXHJcbiAgICByYW5nZUVhY2gsXHJcbiAgICByYW5nZVN1bSxcclxuICAgIHJhbmdlUmVkdWNlSWYsXHJcbiAgICBkZWxldGVQcm9wZXJ0eSxcclxuICAgIG51bWJlckNhbGMsXHJcbn07XHJcbiIsIi8vIGltcG9ydCBoZWxwZXIgZnJvbSAnLi4vaGVscGVyJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlzdG9yeSB7XHJcbiAgICB1bmRvSXRlbXM7XHJcbiAgICByZWRvSXRlbXM7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnVuZG9JdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVkb0l0ZW1zID0gW107XHJcbiAgICB9XHJcbiAgICBhZGQoZGF0YSkge1xyXG4gICAgICAgIHRoaXMudW5kb0l0ZW1zLnB1c2goSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICAgIHRoaXMucmVkb0l0ZW1zID0gW107XHJcbiAgICB9XHJcbiAgICBjYW5VbmRvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVuZG9JdGVtcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG4gICAgY2FuUmVkbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWRvSXRlbXMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuICAgIHVuZG8oY3VycmVudGQsIGNiKSB7XHJcbiAgICAgICAgY29uc3QgeyB1bmRvSXRlbXMsIHJlZG9JdGVtcyB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5jYW5VbmRvKCkpIHtcclxuICAgICAgICAgICAgcmVkb0l0ZW1zLnB1c2goSlNPTi5zdHJpbmdpZnkoY3VycmVudGQpKTtcclxuICAgICAgICAgICAgY2IoSlNPTi5wYXJzZSh1bmRvSXRlbXMucG9wKCkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWRvKGN1cnJlbnRkLCBjYikge1xyXG4gICAgICAgIGNvbnN0IHsgdW5kb0l0ZW1zLCByZWRvSXRlbXMgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuUmVkbygpKSB7XHJcbiAgICAgICAgICAgIHVuZG9JdGVtcy5wdXNoKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRkKSk7XHJcbiAgICAgICAgICAgIGNiKEpTT04ucGFyc2UocmVkb0l0ZW1zLnBvcCgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENlbGxSYW5nZSB9IGZyb20gJy4vY2VsbF9yYW5nZSc7XHJcbmNsYXNzIE1lcmdlcyB7XHJcbiAgICBfO1xyXG4gICAgY29uc3RydWN0b3IoZCA9IFtdKSB7XHJcbiAgICAgICAgdGhpcy5fID0gZDtcclxuICAgIH1cclxuICAgIGZvckVhY2goY2IpIHtcclxuICAgICAgICB0aGlzLl8uZm9yRWFjaChjYik7XHJcbiAgICB9XHJcbiAgICBkZWxldGVXaXRoaW4oY3IpIHtcclxuICAgICAgICB0aGlzLl8gPSB0aGlzLl8uZmlsdGVyKChpdCkgPT4gIWl0LndpdGhpbihjcikpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rmlyc3RJbmNsdWRlcyhyaSwgY2kpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuXy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpdCA9IHRoaXMuX1tpXTtcclxuICAgICAgICAgICAgaWYgKGl0LmluY2x1ZGVzKHJpLCBjaSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGZpbHRlckludGVyc2VjdHMoY2VsbFJhbmdlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNZXJnZXModGhpcy5fLmZpbHRlcigoaXQpID0+IGl0LmludGVyc2VjdHMoY2VsbFJhbmdlKSkpO1xyXG4gICAgfVxyXG4gICAgaW50ZXJzZWN0cyhjZWxsUmFuZ2UpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuXy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpdCA9IHRoaXMuX1tpXTtcclxuICAgICAgICAgICAgaWYgKGl0LmludGVyc2VjdHMoY2VsbFJhbmdlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ludGVyc2VjdHMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHVuaW9uKGNlbGxSYW5nZSkge1xyXG4gICAgICAgIGxldCBjciA9IGNlbGxSYW5nZTtcclxuICAgICAgICB0aGlzLl8uZm9yRWFjaCgoaXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0LmludGVyc2VjdHMoY3IpKSB7XHJcbiAgICAgICAgICAgICAgICBjciA9IGl0LnVuaW9uKGNyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcjtcclxuICAgIH1cclxuICAgIGFkZChjcikge1xyXG4gICAgICAgIHRoaXMuZGVsZXRlV2l0aGluKGNyKTtcclxuICAgICAgICB0aGlzLl8ucHVzaChjcik7XHJcbiAgICB9XHJcbiAgICAvLyB0eXBlOiByb3cgfCBjb2x1bW5cclxuICAgIHNoaWZ0KHR5cGUsIGluZGV4LCBuLCBjYldpdGhpbikge1xyXG4gICAgICAgIHRoaXMuXy5mb3JFYWNoKChjZWxsUmFuZ2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IGNlbGxSYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNyaSA+PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNyaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLmVyaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3JpIDwgaW5kZXggJiYgaW5kZXggPD0gZXJpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UuZXJpICs9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgY2JXaXRoaW4oc3JpLCBzY2ksIG4sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjb2x1bW4nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NpID49IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2NpICs9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UuZWNpICs9IG47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzY2kgPCBpbmRleCAmJiBpbmRleCA8PSBlY2kpIHtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZS5lY2kgKz0gbjtcclxuICAgICAgICAgICAgICAgICAgICBjYldpdGhpbihzcmksIHNjaSwgMCwgbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG1vdmUoY2VsbFJhbmdlLCBybiwgY24pIHtcclxuICAgICAgICB0aGlzLl8uZm9yRWFjaCgoaXQxKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ID0gaXQxO1xyXG4gICAgICAgICAgICBpZiAoaXQud2l0aGluKGNlbGxSYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgIGl0LmVyaSArPSBybjtcclxuICAgICAgICAgICAgICAgIGl0LnNyaSArPSBybjtcclxuICAgICAgICAgICAgICAgIGl0LnNjaSArPSBjbjtcclxuICAgICAgICAgICAgICAgIGl0LmVjaSArPSBjbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0RGF0YShtZXJnZXMpIHtcclxuICAgICAgICB0aGlzLl8gPSBtZXJnZXMubWFwKChtZXJnZSkgPT4gQ2VsbFJhbmdlLnZhbHVlT2YobWVyZ2UpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuXy5tYXAoKG1lcmdlKSA9PiBtZXJnZS50b1N0cmluZygpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgTWVyZ2VzIH07XHJcbiIsImltcG9ydCBoZWxwZXIgZnJvbSAnLi9oZWxwZXInO1xyXG5pbXBvcnQgeyBleHByMmV4cHIgfSBmcm9tICcuL2FscGhhYmV0JztcclxuY2xhc3MgUm93cyB7XHJcbiAgICBfO1xyXG4gICAgbGVuO1xyXG4gICAgaGVpZ2h0O1xyXG4gICAgY29uc3RydWN0b3IoeyBsZW4sIGhlaWdodCB9KSB7XHJcbiAgICAgICAgdGhpcy5fID0ge307XHJcbiAgICAgICAgdGhpcy5sZW4gPSBsZW47XHJcbiAgICAgICAgLy8gZGVmYXVsdCByb3cgaGVpZ2h0XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBnZXRIZWlnaHQocmkpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hpZGUocmkpKVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldChyaSk7XHJcbiAgICAgICAgaWYgKHJvdyAmJiByb3cuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3cuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzZXRIZWlnaHQocmksIHYpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldE9yTmV3KHJpKTtcclxuICAgICAgICByb3cuaGVpZ2h0ID0gdjtcclxuICAgIH1cclxuICAgIHVuaGlkZShpZHgpIHtcclxuICAgICAgICBsZXQgaW5kZXggPSBpZHg7XHJcbiAgICAgICAgd2hpbGUgKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCAtPSAxO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0hpZGUoaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpZGUoaW5kZXgsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0hpZGUocmkpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldChyaSk7XHJcbiAgICAgICAgcmV0dXJuIHJvdyAmJiByb3cuaGlkZTtcclxuICAgIH1cclxuICAgIHNldEhpZGUocmksIHYpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldE9yTmV3KHJpKTtcclxuICAgICAgICBpZiAodiA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcm93LmhpZGUgPSB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZGVsZXRlIHJvdy5oaWRlO1xyXG4gICAgfVxyXG4gICAgc2V0U3R5bGUocmksIHN0eWxlKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRPck5ldyhyaSk7XHJcbiAgICAgICAgcm93LnN0eWxlID0gc3R5bGU7XHJcbiAgICB9XHJcbiAgICBzdW1IZWlnaHQobWluLCBtYXgsIGV4Y2VwdFNldCkge1xyXG4gICAgICAgIHJldHVybiBoZWxwZXIucmFuZ2VTdW0obWluLCBtYXgsIChpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChleGNlcHRTZXQgJiYgZXhjZXB0U2V0LmhhcyhpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWlnaHQoaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0b3RhbEhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdW1IZWlnaHQoMCwgdGhpcy5sZW4pO1xyXG4gICAgfVxyXG4gICAgZ2V0KHJpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1tyaV07XHJcbiAgICB9XHJcbiAgICBnZXRPck5ldyhyaSkge1xyXG4gICAgICAgIHRoaXMuX1tyaV0gPSB0aGlzLl9bcmldIHx8IHsgY2VsbHM6IHt9IH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1tyaV07XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsKHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0KHJpKTtcclxuICAgICAgICBpZiAocm93ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgcm93LmNlbGxzICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3cuY2VsbHNbY2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldENlbGxNZXJnZShyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5tZXJnZSlcclxuICAgICAgICAgICAgcmV0dXJuIGNlbGwubWVyZ2U7XHJcbiAgICAgICAgcmV0dXJuIFswLCAwXTtcclxuICAgIH1cclxuICAgIGdldENlbGxPck5ldyhyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldE9yTmV3KHJpKTtcclxuICAgICAgICByb3cuY2VsbHNbY2ldID0gcm93LmNlbGxzW2NpXSB8fCB7fTtcclxuICAgICAgICByZXR1cm4gcm93LmNlbGxzW2NpXTtcclxuICAgIH1cclxuICAgIC8vIHdoYXQ6IGFsbCB8IHRleHQgfCBmb3JtYXRcclxuICAgIHNldENlbGwocmksIGNpLCBjZWxsLCB3aGF0ID0gJ2FsbCcpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldE9yTmV3KHJpKTtcclxuICAgICAgICBpZiAod2hhdCA9PT0gJ2FsbCcpIHtcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXSA9IGNlbGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHdoYXQgPT09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICByb3cuY2VsbHNbY2ldID0gcm93LmNlbGxzW2NpXSB8fCB7fTtcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXS50ZXh0ID0gY2VsbC50ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh3aGF0ID09PSAnZm9ybWF0Jykge1xyXG4gICAgICAgICAgICByb3cuY2VsbHNbY2ldID0gcm93LmNlbGxzW2NpXSB8fCB7fTtcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXS5zdHlsZSA9IGNlbGwuc3R5bGU7XHJcbiAgICAgICAgICAgIGlmIChjZWxsLm1lcmdlKVxyXG4gICAgICAgICAgICAgICAgcm93LmNlbGxzW2NpXS5tZXJnZSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0Q2VsbFRleHQocmksIGNpLCB0ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbE9yTmV3KHJpLCBjaSk7XHJcbiAgICAgICAgaWYgKGNlbGwuZWRpdGFibGUgIT09IGZhbHNlKVxyXG4gICAgICAgICAgICBjZWxsLnRleHQgPSB0ZXh0O1xyXG4gICAgfVxyXG4gICAgLy8gd2hhdDogYWxsIHwgZm9ybWF0IHwgdGV4dFxyXG4gICAgY29weVBhc3RlKHNyY0NlbGxSYW5nZSwgZHN0Q2VsbFJhbmdlLCB3aGF0LCBhdXRvZmlsbCA9IGZhbHNlLCBjYiA9ICguLi5hcmdzKSA9PiB7IH0pIHtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gc3JjQ2VsbFJhbmdlO1xyXG4gICAgICAgIGNvbnN0IGRzcmkgPSBkc3RDZWxsUmFuZ2Uuc3JpO1xyXG4gICAgICAgIGNvbnN0IGRzY2kgPSBkc3RDZWxsUmFuZ2Uuc2NpO1xyXG4gICAgICAgIGNvbnN0IGRlcmkgPSBkc3RDZWxsUmFuZ2UuZXJpO1xyXG4gICAgICAgIGNvbnN0IGRlY2kgPSBkc3RDZWxsUmFuZ2UuZWNpO1xyXG4gICAgICAgIGNvbnN0IFtybiwgY25dID0gc3JjQ2VsbFJhbmdlLnNpemUoKTtcclxuICAgICAgICBjb25zdCBbZHJuLCBkY25dID0gZHN0Q2VsbFJhbmdlLnNpemUoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhzcmNJbmRleGVzLCBkc3RJbmRleGVzKTtcclxuICAgICAgICBsZXQgaXNBZGQgPSB0cnVlO1xyXG4gICAgICAgIGxldCBkbiA9IDA7XHJcbiAgICAgICAgaWYgKGRlcmkgPCBzcmkgfHwgZGVjaSA8IHNjaSkge1xyXG4gICAgICAgICAgICBpc0FkZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoZGVyaSA8IHNyaSlcclxuICAgICAgICAgICAgICAgIGRuID0gZHJuO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBkbiA9IGRjbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNyaTsgaSA8PSBlcmk7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc2NpOyBqIDw9IGVjaTsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX1tpXS5jZWxscyAmJiB0aGlzLl9baV0uY2VsbHNbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaWkgPSBkc3JpOyBpaSA8PSBkZXJpOyBpaSArPSBybikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgamogPSBkc2NpOyBqaiA8PSBkZWNpOyBqaiArPSBjbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5yaSA9IGlpICsgKGkgLSBzcmkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5jaSA9IGpqICsgKGogLSBzY2kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5jZWxsID0gaGVscGVyLmNsb25lRGVlcCh0aGlzLl9baV0uY2VsbHNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5jZWxsLnRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b2ZpbGwgJiYgbmNlbGwgJiYgbmNlbGwudGV4dCAmJiBuY2VsbC50ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0ZXh0IH0gPSBuY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBqaiAtIGRzY2kgKyAoaWkgLSBkc3JpKSArIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBZGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gLT0gZG4gKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0WzBdID09PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5jZWxsLnRleHQgPSB0ZXh0LnJlcGxhY2UoL1thLXpBLVpdezEsM31cXGQrL2csICh3b3JkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFt4biwgeW5dID0gWzAsIDBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmkgPT09IGRzcmkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeG4gPSBuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGlzQWRkKSB4biAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeW4gPSBuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eXFxkKyQvLnRlc3Qod29yZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3JkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHByMmV4cHIod29yZCwgeG4sIHluKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChybiA8PSAxICYmIGNuID4gMSAmJiAoZHNyaSA+IGVyaSB8fCBkZXJpIDwgc3JpKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjbiA8PSAxICYmIHJuID4gMSAmJiAoZHNjaSA+IGVjaSB8fCBkZWNpIDwgc2NpKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChybiA8PSAxICYmIGNuIDw9IDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAvW1xcXFwuXFxkXSskLy5leGVjKHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc3VsdDonLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gTnVtYmVyKHJlc3VsdFswXSkgKyBuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuY2VsbC50ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgcmVzdWx0LmluZGV4KSArIGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbChucmksIG5jaSwgbmNlbGwsIHdoYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG5yaSwgbmNpLCBuY2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjdXRQYXN0ZShzcmNDZWxsUmFuZ2UsIGRzdENlbGxSYW5nZSkge1xyXG4gICAgICAgIGNvbnN0IG5jZWxsbW0gPSB7fTtcclxuICAgICAgICB0aGlzLmVhY2goKHJpKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZWFjaENlbGxzKHJpLCAoY2kpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBucmkgPSBwYXJzZUludChyaSwgMTApO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5jaSA9IHBhcnNlSW50KGNpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjQ2VsbFJhbmdlLmluY2x1ZGVzKHJpLCBjaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBucmkgPSBkc3RDZWxsUmFuZ2Uuc3JpICsgKG5yaSAtIHNyY0NlbGxSYW5nZS5zcmkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5jaSA9IGRzdENlbGxSYW5nZS5zY2kgKyAobmNpIC0gc3JjQ2VsbFJhbmdlLnNjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuY2VsbG1tW25yaV0gPSBuY2VsbG1tW25yaV0gfHwgeyBjZWxsczoge30gfTtcclxuICAgICAgICAgICAgICAgIG5jZWxsbW1bbnJpXS5jZWxsc1tuY2ldID0gdGhpcy5fW3JpXS5jZWxsc1tjaV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyA9IG5jZWxsbW07XHJcbiAgICB9XHJcbiAgICAvLyBzcmM6IEFycmF5PEFycmF5PFN0cmluZz4+XHJcbiAgICBwYXN0ZShzcmMsIGRzdENlbGxSYW5nZSkge1xyXG4gICAgICAgIGlmIChzcmMubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSBkc3RDZWxsUmFuZ2U7XHJcbiAgICAgICAgc3JjLmZvckVhY2goKHJvdywgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByaSA9IHNyaSArIGk7XHJcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKChjZWxsLCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaSA9IHNjaSArIGo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxUZXh0KHJpLCBjaSwgY2VsbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaW5zZXJ0KHNyaSwgbiA9IDEpIHtcclxuICAgICAgICBjb25zdCBuZGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuZWFjaCgocmksIHJvdykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbnJpID0gcGFyc2VJbnQocmksIDEwKTtcclxuICAgICAgICAgICAgaWYgKG5yaSA+PSBzcmkpIHtcclxuICAgICAgICAgICAgICAgIG5yaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lYWNoQ2VsbHMocmksIChjaSwgY2VsbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnRleHQgJiYgY2VsbC50ZXh0WzBdID09PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0ID0gY2VsbC50ZXh0LnJlcGxhY2UoL1thLXpBLVpdezEsM31cXGQrL2csICh3b3JkKSA9PiBleHByMmV4cHIod29yZCwgMCwgbiwgKHgsIHkpID0+IHkgPj0gc3JpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmRhdGFbbnJpXSA9IHJvdztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8gPSBuZGF0YTtcclxuICAgICAgICB0aGlzLmxlbiArPSBuO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKHNyaSwgZXJpKSB7XHJcbiAgICAgICAgY29uc3QgbiA9IGVyaSAtIHNyaSArIDE7XHJcbiAgICAgICAgY29uc3QgbmRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmVhY2goKHJpLCByb3cpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbnJpID0gcGFyc2VJbnQocmksIDEwKTtcclxuICAgICAgICAgICAgaWYgKG5yaSA8IHNyaSkge1xyXG4gICAgICAgICAgICAgICAgbmRhdGFbbnJpXSA9IHJvdztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChyaSA+IGVyaSkge1xyXG4gICAgICAgICAgICAgICAgbmRhdGFbbnJpIC0gbl0gPSByb3c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVhY2hDZWxscyhyaSwgKGNpLCBjZWxsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudGV4dCAmJiBjZWxsLnRleHRbMF0gPT09ICc9Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHQgPSBjZWxsLnRleHQucmVwbGFjZSgvW2EtekEtWl17MSwzfVxcZCsvZywgKHdvcmQpID0+IGV4cHIyZXhwcih3b3JkLCAwLCAtbiwgKHgsIHkpID0+IHkgPiBlcmkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyA9IG5kYXRhO1xyXG4gICAgICAgIHRoaXMubGVuIC09IG47XHJcbiAgICB9XHJcbiAgICBpbnNlcnRDb2x1bW4oc2NpLCBuID0gMSkge1xyXG4gICAgICAgIHRoaXMuZWFjaCgocmksIHJvdykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBybmRhdGEgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5lYWNoQ2VsbHMocmksIChjaSwgY2VsbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5jaSA9IHBhcnNlSW50KGNpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmNpID49IHNjaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5jaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnRleHQgJiYgY2VsbC50ZXh0WzBdID09PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0ID0gY2VsbC50ZXh0LnJlcGxhY2UoL1thLXpBLVpdezEsM31cXGQrL2csICh3b3JkKSA9PiBleHByMmV4cHIod29yZCwgbiwgMCwgKHgpID0+IHggPj0gc2NpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm5kYXRhW25jaV0gPSBjZWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcm93LmNlbGxzID0gcm5kYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlQ29sdW1uKHNjaSwgZWNpKSB7XHJcbiAgICAgICAgY29uc3QgbiA9IGVjaSAtIHNjaSArIDE7XHJcbiAgICAgICAgdGhpcy5lYWNoKChyaSwgcm93KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmVhY2hDZWxscyhyaSwgKGNpLCBjZWxsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuY2kgPSBwYXJzZUludChjaSwgMTApO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5jaSA8IHNjaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJuZGF0YVtuY2ldID0gY2VsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5jaSA+IGVjaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJuZGF0YVtuY2kgLSBuXSA9IGNlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudGV4dCAmJiBjZWxsLnRleHRbMF0gPT09ICc9Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHQgPSBjZWxsLnRleHQucmVwbGFjZSgvW2EtekEtWl17MSwzfVxcZCsvZywgKHdvcmQpID0+IGV4cHIyZXhwcih3b3JkLCAtbiwgMCwgKHgpID0+IHggPiBlY2kpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByb3cuY2VsbHMgPSBybmRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyB3aGF0OiBhbGwgfCB0ZXh0IHwgZm9ybWF0IHwgbWVyZ2VcclxuICAgIGRlbGV0ZUNlbGxzKGNlbGxSYW5nZSwgd2hhdCA9ICdhbGwnKSB7XHJcbiAgICAgICAgY2VsbFJhbmdlLmVhY2goKGksIGopID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVDZWxsKGksIGosIHdoYXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gd2hhdDogYWxsIHwgdGV4dCB8IGZvcm1hdCB8IG1lcmdlXHJcbiAgICBkZWxldGVDZWxsKHJpLCBjaSwgd2hhdCA9ICdhbGwnKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXQocmkpO1xyXG4gICAgICAgIGlmIChyb3cgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCAmJiBjZWxsLmVkaXRhYmxlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdoYXQgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvdy5jZWxsc1tjaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh3aGF0ID09PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC50ZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2VsbC50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2VsbC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdoYXQgPT09ICdmb3JtYXQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNlbGwuc3R5bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwubWVyZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2hhdCA9PT0gJ21lcmdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLm1lcmdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2VsbC5tZXJnZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1heENlbGwoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuXyk7XHJcbiAgICAgICAgY29uc3QgcmkgPSBrZXlzW2tleXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5fW3JpXTtcclxuICAgICAgICBpZiAoY29sKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2VsbHMgfSA9IGNvbDtcclxuICAgICAgICAgICAgY29uc3Qga3MgPSBPYmplY3Qua2V5cyhjZWxscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNpID0ga3Nba3MubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIHJldHVybiBbcGFyc2VJbnQocmksIDEwKSwgcGFyc2VJbnQoY2ksIDEwKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbMCwgMF07XHJcbiAgICB9XHJcbiAgICBlYWNoKGNiKSB7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5fKS5mb3JFYWNoKChbcmksIHJvd10pID0+IHtcclxuICAgICAgICAgICAgY2IocmksIHJvdyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlYWNoQ2VsbHMocmksIGNiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX1tyaV0gJiYgdGhpcy5fW3JpXS5jZWxscykge1xyXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLl9bcmldLmNlbGxzKS5mb3JFYWNoKChbY2ksIGNlbGxdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYihjaSwgY2VsbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldERhdGEoZCkge1xyXG4gICAgICAgIGlmIChkLmxlbikge1xyXG4gICAgICAgICAgICB0aGlzLmxlbiA9IGQubGVuO1xyXG4gICAgICAgICAgICBkZWxldGUgZC5sZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuXyA9IGQ7XHJcbiAgICB9XHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbGVuIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgbGVuIH0sIHRoaXMuXyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbmV4cG9ydCB7IFJvd3MgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Nyb2xsIHtcclxuICAgIHg7XHJcbiAgICB5O1xyXG4gICAgcmk7XHJcbiAgICBjaTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMueCA9IDA7IC8vIGxlZnRcclxuICAgICAgICB0aGlzLnkgPSAwOyAvLyB0b3BcclxuICAgICAgICB0aGlzLnJpID0gMDsgLy8gY2VsbCByb3ctaW5kZXhcclxuICAgICAgICB0aGlzLmNpID0gMDsgLy8gY2VsbCBjb2wtaW5kZXhcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDZWxsUmFuZ2UgfSBmcm9tICcuL2NlbGxfcmFuZ2UnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RvciB7XHJcbiAgICByYW5nZTtcclxuICAgIHJpO1xyXG4gICAgY2k7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJhbmdlID0gbmV3IENlbGxSYW5nZSgwLCAwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLnJpID0gMDtcclxuICAgICAgICB0aGlzLmNpID0gMDtcclxuICAgIH1cclxuICAgIG11bHRpcGxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlLm11bHRpcGxlKCk7XHJcbiAgICB9XHJcbiAgICBzZXRJbmRleGVzKHJpLCBjaSkge1xyXG4gICAgICAgIHRoaXMucmkgPSByaTtcclxuICAgICAgICB0aGlzLmNpID0gY2k7XHJcbiAgICB9XHJcbiAgICBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlLnNpemUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gJy4vdmFsaWRhdG9yJztcclxuaW1wb3J0IHsgQ2VsbFJhbmdlIH0gZnJvbSAnLi9jZWxsX3JhbmdlJztcclxuY2xhc3MgVmFsaWRhdGlvbiB7XHJcbiAgICByZWZzO1xyXG4gICAgbW9kZTtcclxuICAgIHZhbGlkYXRvcjtcclxuICAgIGNvbnN0cnVjdG9yKG1vZGUsIHJlZnMsIHZhbGlkYXRvcikge1xyXG4gICAgICAgIHRoaXMucmVmcyA9IHJlZnM7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTsgLy8gY2VsbFxyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG4gICAgfVxyXG4gICAgaW5jbHVkZXMocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZzIH0gPSB0aGlzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVmcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBjciA9IENlbGxSYW5nZS52YWx1ZU9mKHJlZnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoY3IuaW5jbHVkZXMocmksIGNpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhZGRSZWYocmVmKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmUoQ2VsbFJhbmdlLnZhbHVlT2YocmVmKSk7XHJcbiAgICAgICAgdGhpcy5yZWZzLnB1c2gocmVmKTtcclxuICAgIH1cclxuICAgIHJlbW92ZShjZWxsUmFuZ2UpIHtcclxuICAgICAgICBjb25zdCBucmVmcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVmcy5mb3JFYWNoKChpdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjciA9IENlbGxSYW5nZS52YWx1ZU9mKGl0KTtcclxuICAgICAgICAgICAgaWYgKGNyLmludGVyc2VjdHMoY2VsbFJhbmdlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3JzID0gY3IuZGlmZmVyZW5jZShjZWxsUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgY3JzLmZvckVhY2goKGl0MSkgPT4gbnJlZnMucHVzaChpdDEudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnJlZnMucHVzaChpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlZnMgPSBucmVmcztcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZzLCBtb2RlLCB2YWxpZGF0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCByZXF1aXJlZCwgb3BlcmF0b3IsIHZhbHVlIH0gPSB2YWxpZGF0b3I7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVmcyxcclxuICAgICAgICAgICAgbW9kZSxcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgcmVxdWlyZWQsXHJcbiAgICAgICAgICAgIG9wZXJhdG9yLFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHZhbHVlT2YoeyByZWZzLCBtb2RlLCB0eXBlLCByZXF1aXJlZCwgb3BlcmF0b3IsIHZhbHVlIH0pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb24obW9kZSwgcmVmcywgbmV3IFZhbGlkYXRvcih0eXBlLCByZXF1aXJlZCwgdmFsdWUsIG9wZXJhdG9yKSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVmFsaWRhdGlvbnMge1xyXG4gICAgXztcclxuICAgIGVycm9ycztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuXyA9IFtdO1xyXG4gICAgICAgIC8vIHJpX2NpOiBlcnJNZXNzYWdlXHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBnZXRFcnJvcihyaSwgY2kpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnMuZ2V0KGAke3JpfV8ke2NpfWApO1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGUocmksIGNpLCB0ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0KHJpLCBjaSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7cml9XyR7Y2l9YDtcclxuICAgICAgICBjb25zdCB7IGVycm9ycyB9ID0gdGhpcztcclxuICAgICAgICBpZiAodiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBbZmxhZywgbWVzc2FnZV0gPSB2LnZhbGlkYXRvci52YWxpZGF0ZSh0ZXh0KTtcclxuICAgICAgICAgICAgaWYgKCFmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuc2V0KGtleSwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5kZWxldGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyB0eXBlOiBkYXRlfG51bWJlcnxwaG9uZXxlbWFpbHxsaXN0XHJcbiAgICAvLyB2YWxpZGF0b3I6IHsgcmVxdWlyZWQsIHZhbHVlLCBvcGVyYXRvciB9XHJcbiAgICBhZGQobW9kZSwgcmVmLCB7IHR5cGUsIHJlcXVpcmVkLCB2YWx1ZSwgb3BlcmF0b3IgfSkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3IodHlwZSwgcmVxdWlyZWQsIHZhbHVlLCBvcGVyYXRvcik7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0QnlWYWxpZGF0b3IodmFsaWRhdG9yKTtcclxuICAgICAgICBpZiAodiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2LmFkZFJlZihyZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fLnB1c2gobmV3IFZhbGlkYXRpb24obW9kZSwgW3JlZl0sIHZhbGlkYXRvcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEJ5VmFsaWRhdG9yKHZhbGlkYXRvcikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLl9baV07XHJcbiAgICAgICAgICAgIGlmICh2LnZhbGlkYXRvci5lcXVhbHModmFsaWRhdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQocmksIGNpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl8ubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuX1tpXTtcclxuICAgICAgICAgICAgaWYgKHYuaW5jbHVkZXMocmksIGNpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZShjZWxsUmFuZ2UpIHtcclxuICAgICAgICB0aGlzLmVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGl0LnJlbW92ZShjZWxsUmFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWFjaChjYikge1xyXG4gICAgICAgIHRoaXMuXy5mb3JFYWNoKChpdCkgPT4gY2IoaXQpKTtcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuXy5maWx0ZXIoKGl0KSA9PiBpdC5yZWZzLmxlbmd0aCA+IDApLm1hcCgoaXQpID0+IGl0LmdldERhdGEoKSk7XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKGQpIHtcclxuICAgICAgICB0aGlzLl8gPSBkLm1hcCgoaXQpID0+IFZhbGlkYXRpb24udmFsdWVPZihpdCkpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG5leHBvcnQgeyBWYWxpZGF0aW9ucyB9O1xyXG4iLCJpbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmltcG9ydCBoZWxwZXIgZnJvbSAnLi9oZWxwZXInO1xyXG5jb25zdCBydWxlcyA9IHtcclxuICAgIHBob25lOiAvXlsxLTldXFxkezEwfSQvLFxyXG4gICAgZW1haWw6IC93KyhbLSsuXXcrKSpAdysoWy0uXXcrKSoudysoWy0uXXcrKSovLFxyXG59O1xyXG5mdW5jdGlvbiByZXR1cm5NZXNzYWdlKGZsYWcsIGtleSwgLi4uYXJnKSB7XHJcbiAgICBsZXQgbWVzc2FnZSA9ICcnO1xyXG4gICAgaWYgKCFmbGFnKSB7XHJcbiAgICAgICAgbWVzc2FnZSA9IHQoYHZhbGlkYXRpb24uJHtrZXl9YCwgLi4uYXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBbZmxhZywgbWVzc2FnZV07XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWRhdG9yIHtcclxuICAgIHJlcXVpcmVkO1xyXG4gICAgdmFsdWU7XHJcbiAgICB0eXBlO1xyXG4gICAgb3BlcmF0b3I7XHJcbiAgICBtZXNzYWdlO1xyXG4gICAgLy8gb3BlcmF0b3I6IGJ8bmJ8ZXF8bmVxfGx0fGx0ZXxndHxndGVcclxuICAgIC8vIHR5cGU6IGRhdGV8bnVtYmVyfGxpc3R8cGhvbmV8ZW1haWxcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIHJlcXVpcmVkLCB2YWx1ZSwgb3BlcmF0b3IpIHtcclxuICAgICAgICB0aGlzLnJlcXVpcmVkID0gcmVxdWlyZWQ7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICcnO1xyXG4gICAgfVxyXG4gICAgcGFyc2VWYWx1ZSh2KSB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbiAgICBlcXVhbHMob3RoZXIpIHtcclxuICAgICAgICBsZXQgZmxhZyA9IHRoaXMudHlwZSA9PT0gb3RoZXIudHlwZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVkID09PSBvdGhlci5yZXF1aXJlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLm9wZXJhdG9yID09PSBvdGhlci5vcGVyYXRvcjtcclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IGhlbHBlci5hcnJheUVxdWFscyh0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gdGhpcy52YWx1ZSA9PT0gb3RoZXIudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZsYWc7XHJcbiAgICB9XHJcbiAgICB2YWx1ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUuc3BsaXQoJywnKTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlKHYpIHtcclxuICAgICAgICBjb25zdCB7IHJlcXVpcmVkLCBvcGVyYXRvciwgdmFsdWUsIHR5cGUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHJlcXVpcmVkICYmIC9eXFxzKiQvLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UoZmFsc2UsICdyZXF1aXJlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoL15cXHMqJC8udGVzdCh2KSlcclxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlXTtcclxuICAgICAgICBpZiAocnVsZXNbdHlwZV0gJiYgIXJ1bGVzW3R5cGVdLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UoZmFsc2UsICdub3RNYXRjaCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHRoaXMudmFsdWVzKCkuaW5jbHVkZXModiksICdub3RJbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgY29uc3QgdjEgPSB0aGlzLnBhcnNlVmFsdWUodik7XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2JlJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UodjEgPj0gdGhpcy5wYXJzZVZhbHVlKG1pbikgJiYgdjEgPD0gdGhpcy5wYXJzZVZhbHVlKG1heCksICdiZXR3ZWVuJywgbWluLCBtYXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ25iZScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxIDwgdGhpcy5wYXJzZVZhbHVlKG1pbikgfHwgdjEgPiB0aGlzLnBhcnNlVmFsdWUobWF4KSwgJ25vdEJldHdlZW4nLCBtaW4sIG1heCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnZXEnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA9PT0gdGhpcy5wYXJzZVZhbHVlKHZhbHVlKSwgJ2VxdWFsJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ25lcScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxICE9PSB0aGlzLnBhcnNlVmFsdWUodmFsdWUpLCAnbm90RXF1YWwnLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnbHQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA8IHRoaXMucGFyc2VWYWx1ZSh2YWx1ZSksICdsZXNzVGhhbicsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdsdGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA8PSB0aGlzLnBhcnNlVmFsdWUodmFsdWUpLCAnbGVzc1RoYW5FcXVhbCcsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdndCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxID4gdGhpcy5wYXJzZVZhbHVlKHZhbHVlKSwgJ2dyZWF0ZXJUaGFuJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2d0ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxID49IHRoaXMucGFyc2VWYWx1ZSh2YWx1ZSksICdncmVhdGVyVGhhbkVxdWFsJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbdHJ1ZV07XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgdG9vbGJhcjoge1xyXG4gICAgICAgIHVuZG86ICdVbmRvJyxcclxuICAgICAgICByZWRvOiAnUmVkbycsXHJcbiAgICAgICAgcHJpbnQ6ICdQcmludCcsXHJcbiAgICAgICAgcGFpbnRmb3JtYXQ6ICdQYWludCBmb3JtYXQnLFxyXG4gICAgICAgIGNsZWFyZm9ybWF0OiAnQ2xlYXIgZm9ybWF0JyxcclxuICAgICAgICBmb3JtYXQ6ICdGb3JtYXQnLFxyXG4gICAgICAgIGZvbnROYW1lOiAnRm9udCcsXHJcbiAgICAgICAgZm9udFNpemU6ICdGb250IHNpemUnLFxyXG4gICAgICAgIGZvbnRCb2xkOiAnRm9udCBib2xkJyxcclxuICAgICAgICBmb250SXRhbGljOiAnRm9udCBpdGFsaWMnLFxyXG4gICAgICAgIHVuZGVybGluZTogJ1VuZGVybGluZScsXHJcbiAgICAgICAgc3RyaWtlOiAnU3RyaWtlJyxcclxuICAgICAgICBjb2xvcjogJ1RleHQgY29sb3InLFxyXG4gICAgICAgIGJnY29sb3I6ICdGaWxsIGNvbG9yJyxcclxuICAgICAgICBib3JkZXI6ICdCb3JkZXJzJyxcclxuICAgICAgICBtZXJnZTogJ01lcmdlIGNlbGxzJyxcclxuICAgICAgICBhbGlnbjogJ0hvcml6b250YWwgYWxpZ24nLFxyXG4gICAgICAgIHZhbGlnbjogJ1ZlcnRpY2FsIGFsaWduJyxcclxuICAgICAgICB0ZXh0d3JhcDogJ1RleHQgd3JhcHBpbmcnLFxyXG4gICAgICAgIGZyZWV6ZTogJ0ZyZWV6ZSBjZWxsJyxcclxuICAgICAgICBhdXRvZmlsdGVyOiAnRmlsdGVyJyxcclxuICAgICAgICBmb3JtdWxhOiAnRnVuY3Rpb25zJyxcclxuICAgICAgICBtb3JlOiAnTW9yZScsXHJcbiAgICB9LFxyXG4gICAgY29udGV4dG1lbnU6IHtcclxuICAgICAgICBjb3B5OiAnQ29weScsXHJcbiAgICAgICAgY3V0OiAnQ3V0JyxcclxuICAgICAgICBwYXN0ZTogJ1Bhc3RlJyxcclxuICAgICAgICBwYXN0ZVZhbHVlOiAnUGFzdGUgdmFsdWVzIG9ubHknLFxyXG4gICAgICAgIHBhc3RlRm9ybWF0OiAnUGFzdGUgZm9ybWF0IG9ubHknLFxyXG4gICAgICAgIGhpZGU6ICdIaWRlJyxcclxuICAgICAgICBpbnNlcnRSb3c6ICdJbnNlcnQgcm93JyxcclxuICAgICAgICBpbnNlcnRDb2x1bW46ICdJbnNlcnQgY29sdW1uJyxcclxuICAgICAgICBkZWxldGVTaGVldDogJ0RlbGV0ZScsXHJcbiAgICAgICAgZGVsZXRlUm93OiAnRGVsZXRlIHJvdycsXHJcbiAgICAgICAgZGVsZXRlQ29sdW1uOiAnRGVsZXRlIGNvbHVtbicsXHJcbiAgICAgICAgZGVsZXRlQ2VsbDogJ0RlbGV0ZSBjZWxsJyxcclxuICAgICAgICBkZWxldGVDZWxsVGV4dDogJ0RlbGV0ZSBjZWxsIHRleHQnLFxyXG4gICAgICAgIHZhbGlkYXRpb246ICdEYXRhIHZhbGlkYXRpb25zJyxcclxuICAgICAgICBjZWxscHJpbnRhYmxlOiAnRW5hYmxlIGV4cG9ydCcsXHJcbiAgICAgICAgY2VsbG5vbnByaW50YWJsZTogJ0Rpc2FibGUgZXhwb3J0JyxcclxuICAgICAgICBjZWxsZWRpdGFibGU6ICdFbmFibGUgZWRpdGluZycsXHJcbiAgICAgICAgY2VsbG5vbmVkaXRhYmxlOiAnRGlzYWJsZSBlZGl0aW5nJyxcclxuICAgIH0sXHJcbiAgICBwcmludDoge1xyXG4gICAgICAgIHNpemU6ICdQYXBlciBzaXplJyxcclxuICAgICAgICBvcmllbnRhdGlvbjogJ1BhZ2Ugb3JpZW50YXRpb24nLFxyXG4gICAgICAgIG9yaWVudGF0aW9uczogWydMYW5kc2NhcGUnLCAnUG9ydHJhaXQnXSxcclxuICAgIH0sXHJcbiAgICBmb3JtYXQ6IHtcclxuICAgICAgICBub3JtYWw6ICdOb3JtYWwnLFxyXG4gICAgICAgIHRleHQ6ICdQbGFpbiBUZXh0JyxcclxuICAgICAgICBudW1iZXI6ICdOdW1iZXInLFxyXG4gICAgICAgIHBlcmNlbnQ6ICdQZXJjZW50JyxcclxuICAgICAgICBybWI6ICdSTUInLFxyXG4gICAgICAgIHVzZDogJ1VTRCcsXHJcbiAgICAgICAgZXVyOiAnRVVSJyxcclxuICAgICAgICBkYXRlOiAnRGF0ZScsXHJcbiAgICAgICAgdGltZTogJ1RpbWUnLFxyXG4gICAgICAgIGRhdGV0aW1lOiAnRGF0ZSB0aW1lJyxcclxuICAgICAgICBkdXJhdGlvbjogJ0R1cmF0aW9uJyxcclxuICAgIH0sXHJcbiAgICBmb3JtdWxhOiB7XHJcbiAgICAgICAgc3VtOiAnU3VtJyxcclxuICAgICAgICBhdmVyYWdlOiAnQXZlcmFnZScsXHJcbiAgICAgICAgbWF4OiAnTWF4JyxcclxuICAgICAgICBtaW46ICdNaW4nLFxyXG4gICAgICAgIF9pZjogJ0lGJyxcclxuICAgICAgICBhbmQ6ICdBTkQnLFxyXG4gICAgICAgIG9yOiAnT1InLFxyXG4gICAgICAgIGNvbmNhdDogJ0NvbmNhdCcsXHJcbiAgICB9LFxyXG4gICAgdmFsaWRhdGlvbjoge1xyXG4gICAgICAgIHJlcXVpcmVkOiAnaXQgbXVzdCBiZSByZXF1aXJlZCcsXHJcbiAgICAgICAgbm90TWF0Y2g6ICdpdCBub3QgbWF0Y2ggaXRzIHZhbGlkYXRpb24gcnVsZScsXHJcbiAgICAgICAgYmV0d2VlbjogJ2l0IGlzIGJldHdlZW4ge30gYW5kIHt9JyxcclxuICAgICAgICBub3RCZXR3ZWVuOiAnaXQgaXMgbm90IGJldHdlZW4ge30gYW5kIHt9JyxcclxuICAgICAgICBub3RJbjogJ2l0IGlzIG5vdCBpbiBsaXN0JyxcclxuICAgICAgICBlcXVhbDogJ2l0IGVxdWFsIHRvIHt9JyxcclxuICAgICAgICBub3RFcXVhbDogJ2l0IG5vdCBlcXVhbCB0byB7fScsXHJcbiAgICAgICAgbGVzc1RoYW46ICdpdCBsZXNzIHRoYW4ge30nLFxyXG4gICAgICAgIGxlc3NUaGFuRXF1YWw6ICdpdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8ge30nLFxyXG4gICAgICAgIGdyZWF0ZXJUaGFuOiAnaXQgZ3JlYXRlciB0aGFuIHt9JyxcclxuICAgICAgICBncmVhdGVyVGhhbkVxdWFsOiAnaXQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHt9JyxcclxuICAgIH0sXHJcbiAgICBlcnJvcjoge1xyXG4gICAgICAgIHBhc3RlRm9yTWVyZ2VkQ2VsbDogJ1VuYWJsZSB0byBkbyB0aGlzIGZvciBtZXJnZWQgY2VsbHMnLFxyXG4gICAgfSxcclxuICAgIGNhbGVuZGFyOiB7XHJcbiAgICAgICAgd2Vla3M6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sXHJcbiAgICAgICAgbW9udGhzOiBbXHJcbiAgICAgICAgICAgICdKYW51YXJ5JyxcclxuICAgICAgICAgICAgJ0ZlYnJ1YXJ5JyxcclxuICAgICAgICAgICAgJ01hcmNoJyxcclxuICAgICAgICAgICAgJ0FwcmlsJyxcclxuICAgICAgICAgICAgJ01heScsXHJcbiAgICAgICAgICAgICdKdW5lJyxcclxuICAgICAgICAgICAgJ0p1bHknLFxyXG4gICAgICAgICAgICAnQXVndXN0JyxcclxuICAgICAgICAgICAgJ1NlcHRlbWJlcicsXHJcbiAgICAgICAgICAgICdPY3RvYmVyJyxcclxuICAgICAgICAgICAgJ05vdmVtYmVyJyxcclxuICAgICAgICAgICAgJ0RlY2VtYmVyJyxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIGJ1dHRvbjoge1xyXG4gICAgICAgIG5leHQ6ICdOZXh0JyxcclxuICAgICAgICBjYW5jZWw6ICdDYW5jZWwnLFxyXG4gICAgICAgIHJlbW92ZTogJ1JlbW92ZScsXHJcbiAgICAgICAgc2F2ZTogJ1NhdmUnLFxyXG4gICAgICAgIG9rOiAnT0snLFxyXG4gICAgfSxcclxuICAgIHNvcnQ6IHtcclxuICAgICAgICBkZXNjOiAnU29ydCBaIC0+IEEnLFxyXG4gICAgICAgIGFzYzogJ1NvcnQgQSAtPiBaJyxcclxuICAgIH0sXHJcbiAgICBmaWx0ZXI6IHtcclxuICAgICAgICBlbXB0eTogJ2VtcHR5JyxcclxuICAgIH0sXHJcbiAgICBkYXRhVmFsaWRhdGlvbjoge1xyXG4gICAgICAgIG1vZGU6ICdNb2RlJyxcclxuICAgICAgICByYW5nZTogJ0NlbGwgUmFuZ2UnLFxyXG4gICAgICAgIGNyaXRlcmlhOiAnQ3JpdGVyaWEnLFxyXG4gICAgICAgIG1vZGVUeXBlOiB7XHJcbiAgICAgICAgICAgIGNlbGw6ICdDZWxsJyxcclxuICAgICAgICAgICAgY29sdW1uOiAnQ29sdW4nLFxyXG4gICAgICAgICAgICByb3c6ICdSb3cnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZToge1xyXG4gICAgICAgICAgICBsaXN0OiAnTGlzdCcsXHJcbiAgICAgICAgICAgIG51bWJlcjogJ051bWJlcicsXHJcbiAgICAgICAgICAgIGRhdGU6ICdEYXRlJyxcclxuICAgICAgICAgICAgcGhvbmU6ICdQaG9uZScsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnRW1haWwnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlcmF0b3I6IHtcclxuICAgICAgICAgICAgYmU6ICdiZXR3ZWVuJyxcclxuICAgICAgICAgICAgbmJlOiAnbm90IGJldHd3ZW4nLFxyXG4gICAgICAgICAgICBsdDogJ2xlc3MgdGhhbicsXHJcbiAgICAgICAgICAgIGx0ZTogJ2xlc3MgdGhhbiBvciBlcXVhbCB0bycsXHJcbiAgICAgICAgICAgIGd0OiAnZ3JlYXRlciB0aGFuJyxcclxuICAgICAgICAgICAgZ3RlOiAnZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvJyxcclxuICAgICAgICAgICAgZXE6ICdlcXVhbCB0bycsXHJcbiAgICAgICAgICAgIG5lcTogJ25vdCBlcXVhbCB0bycsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn07XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IGVuIGZyb20gJy4vZW4nO1xyXG4vLyBEZWZpbmVzIHRoZSBmYWxsYmFjayBsYW5ndWFnZSBhcyBFbmdsaXNoXHJcbmxldCAkbGFuZ3VhZ2VzID0gWydlbiddO1xyXG5jb25zdCAkbWVzc2FnZXMgPSB7XHJcbiAgICBlbixcclxufTtcclxuZnVuY3Rpb24gdHJhbnNsYXRlKGtleSwgbWVzc2FnZXMpIHtcclxuICAgIGlmIChtZXNzYWdlcykge1xyXG4gICAgICAgIC8vIFJldHVybiB0aGUgdHJhbnNsYXRpb24gZnJvbSB0aGUgZmlyc3QgbGFuZ3VhZ2UgaW4gdGhlIGxhbmd1YWdlcyBhcnJheVxyXG4gICAgICAgIC8vIHRoYXQgaGFzIGEgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBrZXkuXHJcbiAgICAgICAgZm9yIChjb25zdCBsYW5nIG9mICRsYW5ndWFnZXMpIHtcclxuICAgICAgICAgICAgaWYgKCFtZXNzYWdlc1tsYW5nXSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IG1lc3NhZ2VzW2xhbmddO1xyXG4gICAgICAgICAgICAvLyBTcGxpdHMgdGhlIGtleSBhdCAnLicgZXhjZXB0IHdoZXJlIGVzY2FwZWQgYXMgJ1xcLidcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGtleS5tYXRjaCgvKD86XFxcXC58W14uXSkrL2cpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWVzc2FnZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB2YWx1ZSBkb2Vzbid0IGV4aXN0LCB0cnkgbmV4dCBsYW5ndWFnZVxyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGlmIChpID09PSBrZXlzLmxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgLy8gTW92ZSBkb3duIHRvIHRoZSBuZXh0IGxldmVsIG9mIHRoZSBtZXNzYWdlcyBvYmplY3RcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuZnVuY3Rpb24gdChrZXksIC4uLmFyZ3MpIHtcclxuICAgIGxldCB2ID0gdHJhbnNsYXRlKGtleSwgJG1lc3NhZ2VzKTtcclxuICAgIGlmICghdiAmJiB3aW5kb3cgJiYgd2luZG93Lnhfc3ByZWFkc2hlZXQgJiYgd2luZG93Lnhfc3ByZWFkc2hlZXQuJG1lc3NhZ2VzKSB7XHJcbiAgICAgICAgdiA9IHRyYW5zbGF0ZShrZXksIHdpbmRvdy54X3NwcmVhZHNoZWV0LiRtZXNzYWdlcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdiB8fCAnJztcclxufVxyXG5mdW5jdGlvbiB0ZihrZXkpIHtcclxuICAgIHJldHVybiAoKSA9PiB0KGtleSk7XHJcbn1cclxuLy8gSWYgY2xlYXJMYW5nTGlzdCBpcyBzZXQgdG8gZmFsc2UsIGxhbmcgd2lsbCBiZSBhZGRlZCB0byB0aGUgZnJvbnQgb2YgdGhlXHJcbi8vIGxhbmd1YWdlcyBhcnJheS4gVGhlIGxhbmd1YWdlcyBpbiB0aGUgbGFuZ3VhZ2UgYXJyYXkgYXJlIHNlYXJjaGVkIGluIG9yZGVyXHJcbi8vIHRvIGZpbmQgYSB0cmFuc2xhdGlvbi4gVGhpcyBhbGxvd3MgdGhlIHVzZSBvZiBvdGhlciBsYW5ndWFnZXMgYXMgYSBmYWxsYmFja1xyXG4vLyBpZiBsYW5nIGlzIG1pc3Npbmcgc29tZSBrZXlzLiBUaGUgbGFuZ3VhZ2UgYXJyYXkgaXMgcHJlbG9hZGVkIHdpdGggRW5nbGlzaC5cclxuLy8gVG8gc2V0IHRoZSBsYW5ndWFnZXMgYXJyYXkgdG8gb25seSBpbmNsdWRlIGxhbmcsIHNldCBjbGVhckxhbmdMaXN0IHRvIHRydWUuXHJcbmZ1bmN0aW9uIGxvY2FsZShsYW5nLCBtZXNzYWdlLCBjbGVhckxhbmdMaXN0ID0gZmFsc2UpIHtcclxuICAgIGlmIChjbGVhckxhbmdMaXN0KSB7XHJcbiAgICAgICAgJGxhbmd1YWdlcyA9IFtsYW5nXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEFwcGVuZCB0byBmcm9udCBvZiBhcnJheS5cclxuICAgICAgICAvLyBUcmFuc2xhdGlvbiBtZXRob2Qgd2lsbCB1c2UgdGhlIGZpcnN0IGxhbmd1YWdlIGluIHRoZSBsaXN0IHRoYXQgaGFzIGFcclxuICAgICAgICAvLyBtYXRjaGluZyBrZXkuXHJcbiAgICAgICAgJGxhbmd1YWdlcy51bnNoaWZ0KGxhbmcpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAkbWVzc2FnZXNbbGFuZ10gPSBtZXNzYWdlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHQsXHJcbn07XHJcbmV4cG9ydCB7IGxvY2FsZSwgdCwgdGYgfTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0XCJ4c3ByZWFkc2hlZXRcIjogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIl9fd2VicGFja19yZXF1aXJlX18ubmMgPSB1bmRlZmluZWQ7IiwiLyogZ2xvYmFsIHdpbmRvdywgZG9jdW1lbnQgKi9cclxuaW1wb3J0IEJvdHRvbWJhciBmcm9tICcuL2NvbXBvbmVudC9ib3R0b21iYXInO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9jb21wb25lbnQvZWxlbWVudCc7XHJcbmltcG9ydCBTaGVldCBmcm9tICcuL2NvbXBvbmVudC9zaGVldCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4vY29uZmlnJztcclxuaW1wb3J0IERhdGFQcm94eSBmcm9tICcuL2NvcmUvZGF0YV9wcm94eSc7XHJcbmltcG9ydCAnLi9pbmRleC5sZXNzJztcclxuaW1wb3J0IHsgbG9jYWxlIH0gZnJvbSAnLi9sb2NhbGUvbG9jYWxlJztcclxuZXhwb3J0IGNsYXNzIFNwcmVhZHNoZWV0IHtcclxuICAgIG9wdGlvbnM7XHJcbiAgICBzaGVldEluZGV4O1xyXG4gICAgZGF0YXM7XHJcbiAgICBib3R0b21iYXI7XHJcbiAgICBzaGVldDtcclxuICAgIGRhdGE7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvcnMsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGxldCB0YXJnZXRFbCA9IHNlbGVjdG9ycztcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IHNob3dCb3R0b21CYXI6IHRydWUsIC4uLm9wdGlvbnMgfTtcclxuICAgICAgICB0aGlzLnNoZWV0SW5kZXggPSAxO1xyXG4gICAgICAgIHRoaXMuZGF0YXMgPSBbXTtcclxuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9ycyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm90dG9tYmFyID0gdGhpcy5vcHRpb25zLnNob3dCb3R0b21CYXJcclxuICAgICAgICAgICAgPyBuZXcgQm90dG9tYmFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmFkZFNoZWV0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnJlc2V0RGF0YShkKTtcclxuICAgICAgICAgICAgfSwgKGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gdGhpcy5kYXRhc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnJlc2V0RGF0YShkKTtcclxuICAgICAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVTaGVldCgpO1xyXG4gICAgICAgICAgICB9LCAoaW5kZXgsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFzW2luZGV4XS5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5hZGRTaGVldCgpO1xyXG4gICAgICAgIGNvbnN0IHJvb3RFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH1gKS5vbignY29udGV4dG1lbnUnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XHJcbiAgICAgICAgLy8gY3JlYXRlIGNhbnZhcyBlbGVtZW50XHJcbiAgICAgICAgdGFyZ2V0RWwuYXBwZW5kQ2hpbGQocm9vdEVsLmVsKTtcclxuICAgICAgICB0aGlzLnNoZWV0ID0gbmV3IFNoZWV0KHJvb3RFbCwgdGhpcy5kYXRhKTtcclxuICAgICAgICBpZiAodGhpcy5ib3R0b21iYXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcm9vdEVsLmNoaWxkKHRoaXMuYm90dG9tYmFyLmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZGRTaGVldChuYW1lLCBhY3RpdmUgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgbiA9IG5hbWUgfHwgYHNoZWV0JHt0aGlzLnNoZWV0SW5kZXh9YDtcclxuICAgICAgICBjb25zdCBkID0gbmV3IERhdGFQcm94eShuLCB0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIGQuY2hhbmdlID0gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaGVldC50cmlnZ2VyKCdjaGFuZ2UnLCAuLi5hcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGF0YXMucHVzaChkKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZDonLCBuLCBkLCB0aGlzLmRhdGFzKTtcclxuICAgICAgICBpZiAodGhpcy5ib3R0b21iYXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5ib3R0b21iYXIuYWRkSXRlbShuLCBhY3RpdmUsIHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hlZXRJbmRleCArPSAxO1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlU2hlZXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYm90dG9tYmFyID09PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgW29sZEluZGV4LCBuaW5kZXhdID0gdGhpcy5ib3R0b21iYXIuZGVsZXRlSXRlbSgpO1xyXG4gICAgICAgIGlmIChvbGRJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YXMuc3BsaWNlKG9sZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgaWYgKG5pbmRleCA+PSAwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldC5yZXNldERhdGEodGhpcy5kYXRhc1tuaW5kZXhdKTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2FkRGF0YShkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgZHMgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcclxuICAgICAgICBpZiAodGhpcy5ib3R0b21iYXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5ib3R0b21iYXIuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhcyA9IFtdO1xyXG4gICAgICAgIGlmIChkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ID0gZHNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZCA9IHRoaXMuYWRkU2hlZXQoaXQubmFtZSwgaSA9PT0gMCk7XHJcbiAgICAgICAgICAgICAgICBuZC5zZXREYXRhKGl0KTtcclxuICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldC5yZXNldERhdGEobmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhcy5tYXAoKGl0KSA9PiBpdC5nZXREYXRhKCkpO1xyXG4gICAgfVxyXG4gICAgY2VsbFRleHQocmksIGNpLCB0ZXh0LCBzaGVldEluZGV4ID0gMCkge1xyXG4gICAgICAgIHRoaXMuZGF0YXNbc2hlZXRJbmRleF0uc2V0Q2VsbFRleHQocmksIGNpLCB0ZXh0LCAnZmluaXNoZWQnKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNlbGwocmksIGNpLCBzaGVldEluZGV4ID0gMCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFzW3NoZWV0SW5kZXhdLmdldENlbGwocmksIGNpKTtcclxuICAgIH1cclxuICAgIGNlbGxTdHlsZShyaSwgY2ksIHNoZWV0SW5kZXggPSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YXNbc2hlZXRJbmRleF0uZ2V0Q2VsbFN0eWxlKHJpLCBjaSk7XHJcbiAgICB9XHJcbiAgICByZVJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLnNoZWV0LnRhYmxlLnJlbmRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgb24oZXZlbnROYW1lLCBmdW5jKSB7XHJcbiAgICAgICAgdGhpcy5zaGVldC5vbihldmVudE5hbWUsIGZ1bmMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyB2YWxpZGF0aW9ucyB9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9ucy5lcnJvcnMuc2l6ZSA8PSAwO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlKGNiKSB7XHJcbiAgICAgICAgdGhpcy5zaGVldC5vbignY2hhbmdlJywgY2IpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGxvY2FsZShsYW5nLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgbG9jYWxlKGxhbmcsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IHNwcmVhZHNoZWV0ID0gKGVsLCBvcHRpb25zID0ge30pID0+IG5ldyBTcHJlYWRzaGVldChlbCwgb3B0aW9ucyk7XHJcbmlmICh3aW5kb3cpIHtcclxuICAgIHdpbmRvdy54X3NwcmVhZHNoZWV0ID0gc3ByZWFkc2hlZXQ7XHJcbiAgICB3aW5kb3cueF9zcHJlYWRzaGVldC5sb2NhbGUgPSAobGFuZywgbWVzc2FnZSkgPT4gbG9jYWxlKGxhbmcsIG1lc3NhZ2UpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFNwcmVhZHNoZWV0O1xyXG5leHBvcnQgeyBzcHJlYWRzaGVldCB9O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=