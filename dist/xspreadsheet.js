/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less ***!
  \*****************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/getUrl.js */ "./node_modules/css-loader/dist/runtime/getUrl.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__);
// Imports



var ___CSS_LOADER_URL_IMPORT_0___ = new URL(/* asset import */ __webpack_require__(/*! ../assets/sprite.svg */ "./assets/sprite.svg"), __webpack_require__.b);
var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
var ___CSS_LOADER_URL_REPLACEMENT_0___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_0___);
// Module
___CSS_LOADER_EXPORT___.push([module.id, "body {\n  margin: 0;\n}\n.x-spreadsheet {\n  font-size: 13px;\n  line-height: normal;\n  user-select: none;\n  -moz-user-select: none;\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  box-sizing: content-box;\n  background: #fff;\n  -webkit-font-smoothing: antialiased;\n}\n.x-spreadsheet textarea {\n  font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n}\n.x-spreadsheet-sheet {\n  position: relative;\n  overflow: hidden;\n}\n.x-spreadsheet-table {\n  vertical-align: bottom;\n}\n.x-spreadsheet-tooltip {\n  font-family: inherit;\n  position: absolute;\n  padding: 5px 10px;\n  color: #fff;\n  border-radius: 1px;\n  background: #000000;\n  font-size: 12px;\n  z-index: 201;\n}\n.x-spreadsheet-tooltip:before {\n  pointer-events: none;\n  position: absolute;\n  left: calc(50% - 4px);\n  top: -4px;\n  content: \"\";\n  width: 8px;\n  height: 8px;\n  background: inherit;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n  z-index: 1;\n  box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.3);\n}\n.x-spreadsheet-color-palette {\n  padding: 5px;\n}\n.x-spreadsheet-color-palette table {\n  margin: 0;\n  padding: 0;\n  border-collapse: separate;\n  border-spacing: 2;\n  background: #fff;\n}\n.x-spreadsheet-color-palette table td {\n  margin: 0;\n  cursor: pointer;\n  border: 1px solid transparent;\n}\n.x-spreadsheet-color-palette table td:hover {\n  border-color: #ddd;\n}\n.x-spreadsheet-color-palette table td .x-spreadsheet-color-palette-cell {\n  width: 16px;\n  height: 16px;\n}\n.x-spreadsheet-border-palette {\n  padding: 6px;\n}\n.x-spreadsheet-border-palette table {\n  margin: 0;\n  padding: 0;\n  border-collapse: separate;\n  border-spacing: 0;\n  background: #fff;\n  table-layout: fixed;\n}\n.x-spreadsheet-border-palette table td {\n  margin: 0;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left {\n  border-right: 1px solid #eee;\n  padding-right: 6px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell {\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  text-align: center;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell .x-spreadsheet-icon-img {\n  opacity: 0.8;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell:hover {\n  background-color: #eee;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right {\n  padding-left: 6px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right .x-spreadsheet-toolbar-btn {\n  margin-top: 0;\n  margin-bottom: 3px;\n}\n.x-spreadsheet-border-palette .x-spreadsheet-border-palette-right .x-spreadsheet-line-type {\n  position: relative;\n  left: 0;\n  top: -3px;\n}\n.x-spreadsheet-dropdown {\n  position: relative;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-content {\n  position: absolute;\n  z-index: 200;\n  background: #fff;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n}\n.x-spreadsheet-dropdown.bottom-left .x-spreadsheet-dropdown-content {\n  top: calc(100% + 5px);\n  left: 0;\n}\n.x-spreadsheet-dropdown.bottom-right .x-spreadsheet-dropdown-content {\n  top: calc(100% + 5px);\n  right: 0;\n}\n.x-spreadsheet-dropdown.top-left .x-spreadsheet-dropdown-content {\n  bottom: calc(100% + 5px);\n  left: 0;\n}\n.x-spreadsheet-dropdown.top-right .x-spreadsheet-dropdown-content {\n  bottom: calc(100% + 5px);\n  right: 0;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-title {\n  padding: 0 5px;\n  display: inline-block;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-left {\n  margin-left: 4px;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-right {\n  width: 10px;\n  margin-right: 4px;\n}\n.x-spreadsheet-dropdown .x-spreadsheet-dropdown-header .x-spreadsheet-icon.arrow-right .arrow-down {\n  left: -130px;\n}\n/* resizer **/\n.x-spreadsheet-resizer {\n  position: absolute;\n  z-index: 11;\n}\n.x-spreadsheet-resizer .x-spreadsheet-resizer-hover {\n  background-color: rgba(75, 137, 255, 0.25);\n}\n.x-spreadsheet-resizer .x-spreadsheet-resizer-line {\n  position: absolute;\n}\n.x-spreadsheet-resizer.horizontal {\n  cursor: row-resize;\n}\n.x-spreadsheet-resizer.horizontal .x-spreadsheet-resizer-line {\n  border-bottom: 2px dashed #4b89ff;\n  left: 0;\n  bottom: 0;\n}\n.x-spreadsheet-resizer.vertical {\n  cursor: col-resize;\n}\n.x-spreadsheet-resizer.vertical .x-spreadsheet-resizer-line {\n  border-right: 2px dashed #4b89ff;\n  top: 0;\n  right: 0;\n}\n/* scrollbar */\n.x-spreadsheet-scrollbar {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #f4f5f8;\n  opacity: 0.9;\n  z-index: 12;\n}\n.x-spreadsheet-scrollbar.horizontal {\n  right: 15px;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n.x-spreadsheet-scrollbar.horizontal > div {\n  height: 1px;\n  background: #ddd;\n}\n.x-spreadsheet-scrollbar.vertical {\n  bottom: 15px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.x-spreadsheet-scrollbar.vertical > div {\n  width: 1px;\n  background: #ddd;\n}\n/* @{css-prefix}-overlayer */\n.x-spreadsheet-overlayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 10;\n}\n.x-spreadsheet-overlayer .x-spreadsheet-overlayer-content {\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n}\n.x-spreadsheet-editor,\n.x-spreadsheet-selector {\n  box-sizing: content-box;\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n/* @{css-prefix}-selector */\n.x-spreadsheet-selector .hide-input {\n  position: absolute;\n  z-index: 0;\n}\n.x-spreadsheet-selector .hide-input input {\n  padding: 0;\n  width: 0;\n  border: none!important;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-area {\n  position: absolute;\n  border: 2px solid #4b89ff;\n  background: rgba(75, 137, 255, 0.1);\n  z-index: 5;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-clipboard,\n.x-spreadsheet-selector .x-spreadsheet-selector-autofill {\n  position: absolute;\n  background: transparent;\n  z-index: 100;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-clipboard {\n  border: 2px dashed #4b89ff;\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-autofill {\n  border: 1px dashed rgba(0, 0, 0, 0.45);\n}\n.x-spreadsheet-selector .x-spreadsheet-selector-corner {\n  pointer-events: auto;\n  position: absolute;\n  cursor: crosshair;\n  font-size: 0;\n  height: 5px;\n  width: 5px;\n  right: -5px;\n  bottom: -5px;\n  border: 2px solid #ffffff;\n  background: #4b89ff;\n}\n.x-spreadsheet-editor {\n  z-index: 20;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area {\n  position: absolute;\n  text-align: left;\n  border: 2px solid #4b89ff;\n  line-height: 0;\n  z-index: 100;\n  pointer-events: auto;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area textarea {\n  box-sizing: content-box;\n  border: none;\n  padding: 0 3px;\n  outline: none;\n  resize: none;\n  text-align: start;\n  overflow-y: hidden;\n  font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n  color: inherit;\n  white-space: normal;\n  word-wrap: break-word;\n  line-height: 22px;\n  margin: 0;\n}\n.x-spreadsheet-editor .x-spreadsheet-editor-area .textline {\n  overflow: hidden;\n  visibility: hidden;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n.x-spreadsheet-item {\n  user-select: none;\n  background: 0;\n  border: 1px solid transparent;\n  outline: none;\n  height: 26px;\n  color: rgba(0, 0, 0, 0.9);\n  line-height: 26px;\n  list-style: none;\n  padding: 2px 10px;\n  cursor: default;\n  text-align: left;\n  overflow: hidden;\n}\n.x-spreadsheet-item.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-item:hover,\n.x-spreadsheet-item.active {\n  background: rgba(0, 0, 0, 0.05);\n}\n.x-spreadsheet-item.divider {\n  height: 0;\n  padding: 0;\n  margin: 5px 0;\n  border: none;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.x-spreadsheet-item .label {\n  float: right;\n  opacity: 0.65;\n  font-size: 1em;\n}\n.x-spreadsheet-item.state,\n.x-spreadsheet-header.state {\n  padding-left: 35px!important;\n  position: relative;\n}\n.x-spreadsheet-item.state:before,\n.x-spreadsheet-header.state:before {\n  content: '';\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 12px;\n  top: calc(50% - 5px);\n  background: rgba(0, 0, 0, 0.08);\n  border-radius: 2px;\n}\n.x-spreadsheet-item.state.checked:before,\n.x-spreadsheet-header.state.checked:before {\n  background: #4b89ff;\n}\n.x-spreadsheet-checkbox {\n  position: relative;\n  display: inline-block;\n  backface-visibility: hidden;\n  outline: 0;\n  vertical-align: baseline;\n  font-style: normal;\n  font-size: 1rem;\n  line-height: 1em;\n}\n.x-spreadsheet-checkbox > input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0!important;\n  outline: 0;\n  z-index: -1;\n}\n.x-spreadsheet-suggest,\n.x-spreadsheet-contextmenu,\n.x-spreadsheet-sort-filter {\n  position: absolute;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n  background: #fff;\n  z-index: 100;\n  width: 260px;\n  pointer-events: auto;\n  overflow: auto;\n}\n.x-spreadsheet-suggest {\n  width: 200px;\n}\n.x-spreadsheet-filter {\n  border: 1px solid #e9e9e9;\n  font-size: 12px;\n  margin: 10px;\n}\n.x-spreadsheet-filter .x-spreadsheet-header {\n  padding: 0.5em 0.75em;\n  background: #f8f8f9;\n  border-bottom: 1px solid #e9e9e9;\n  border-left: 1px solid transparent;\n}\n.x-spreadsheet-filter .x-spreadsheet-body {\n  height: 200px;\n  overflow-y: auto;\n}\n.x-spreadsheet-filter .x-spreadsheet-body .x-spreadsheet-item {\n  height: 20px;\n  line-height: 20px;\n}\n.x-spreadsheet-sort-filter .x-spreadsheet-buttons {\n  margin: 10px;\n}\n.x-spreadsheet-toolbar,\n.x-spreadsheet-bottombar {\n  height: 40px;\n  padding: 0 30px;\n  text-align: left;\n  background: #f5f6f7;\n  display: flex;\n}\n.x-spreadsheet-bottombar {\n  position: relative;\n  border-top: 1px solid #e0e2e4;\n}\n.x-spreadsheet-bottombar .x-spreadsheet-menu > li {\n  line-height: 40px;\n  height: 40px;\n  padding-top: 0;\n  padding-bottom: 0;\n  vertical-align: middle;\n  border-right: 1px solid #e8eaed;\n}\n.x-spreadsheet-menu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n}\n.x-spreadsheet-menu > li {\n  float: left;\n  line-height: 1.25em;\n  padding: 0.785em 1em;\n  margin: 0;\n  vertical-align: middle;\n  text-align: left;\n  font-weight: 400;\n  color: #80868b;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-weight: bold;\n}\n.x-spreadsheet-menu > li.active {\n  background-color: #fff;\n  color: rgba(0, 0, 0, 0.65);\n}\n.x-spreadsheet-menu > li .x-spreadsheet-icon {\n  margin: 0 6px;\n}\n.x-spreadsheet-menu > li .x-spreadsheet-icon .x-spreadsheet-icon-img:hover {\n  opacity: 0.85;\n}\n.x-spreadsheet-menu > li .x-spreadsheet-dropdown {\n  display: inline-block;\n}\n.x-spreadsheet-toolbar {\n  border-bottom: 1px solid #e0e2e4;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btns {\n  display: inline-flex;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-more {\n  padding: 0 6px 6px;\n  text-align: left;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-more .x-spreadsheet-toolbar-divider {\n  margin-top: 0;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn {\n  flex: 0 0 auto;\n  display: inline-block;\n  border: 1px solid transparent;\n  height: 26px;\n  line-height: 26px;\n  min-width: 26px;\n  margin: 6px 1px 0;\n  padding: 0;\n  text-align: center;\n  border-radius: 2px;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn:hover,\n.x-spreadsheet-toolbar .x-spreadsheet-toolbar-btn.active {\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-toolbar-divider {\n  display: inline-block;\n  border-right: 1px solid #e0e2e4;\n  width: 0;\n  vertical-align: middle;\n  height: 18px;\n  margin: 12px 3px 0;\n}\n.x-spreadsheet-print {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.x-spreadsheet-print-bar {\n  background: #424242;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 30px;\n}\n.x-spreadsheet-print-bar .-title {\n  color: #fff;\n  font-weight: bold;\n  font-size: 1.2em;\n  float: left;\n}\n.x-spreadsheet-print-bar .-right {\n  float: right;\n  margin-top: 12px;\n}\n.x-spreadsheet-print-content {\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  background: #d0d0d0;\n  height: calc(100% - 60px);\n}\n.x-spreadsheet-print-content .-sider {\n  flex: 0 0 300px;\n  width: 300px;\n  border-left: 2px solid #ccc;\n  background: #fff;\n}\n.x-spreadsheet-print-content .-content {\n  flex: auto;\n  overflow-x: auto;\n  overflow-y: scroll;\n  height: 100%;\n}\n.x-spreadsheet-canvas-card-wraper {\n  margin: 40px 20px;\n}\n.x-spreadsheet-canvas-card {\n  background: #fff;\n  margin: auto;\n  page-break-before: auto;\n  page-break-after: always;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 3px rgba(0, 0, 0, 0.12), 0 4px 5px 0 rgba(0, 0, 0, 0.2);\n}\n.x-spreadsheet-calendar {\n  color: rgba(0, 0, 0, 0.65);\n  background: #ffffff;\n  user-select: none;\n}\n.x-spreadsheet-calendar .calendar-header {\n  font-weight: 700;\n  line-height: 30px;\n  text-align: center;\n  width: 100%;\n  float: left;\n  background: #f9fafb;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-left {\n  padding-left: 5px;\n  float: left;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right {\n  float: right;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right a {\n  padding: 3px 0;\n  margin-right: 2px;\n  border-radius: 2px;\n}\n.x-spreadsheet-calendar .calendar-header .calendar-header-right a:hover {\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-calendar .calendar-body {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n.x-spreadsheet-calendar .calendar-body th,\n.x-spreadsheet-calendar .calendar-body td {\n  width: 14.28571429%;\n  min-width: 32px;\n  text-align: center;\n  font-weight: 700;\n  line-height: 30px;\n  padding: 0;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell:hover {\n  background: #ecf6fd;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell.active,\n.x-spreadsheet-calendar .calendar-body td > .cell.active:hover {\n  background: #ecf6fd;\n  color: #2185D0;\n}\n.x-spreadsheet-calendar .calendar-body td > .cell.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.x-spreadsheet-datepicker {\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\n  position: absolute;\n  left: 0;\n  top: calc(100% + 5px);\n  z-index: 10;\n  width: auto;\n}\n.x-spreadsheet-buttons {\n  display: flex;\n  justify-content: flex-end;\n}\n.x-spreadsheet-buttons .x-spreadsheet-button {\n  margin-left: 8px;\n}\n.x-spreadsheet-button {\n  display: inline-block;\n  border-radius: 3px;\n  line-height: 1em;\n  min-height: 1em;\n  white-space: nowrap;\n  text-align: center;\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: 700;\n  padding: 0.75em 1em;\n  color: rgba(0, 0, 0, 0.6);\n  background: #E0E1E2;\n  text-decoration: none;\n  font-family: \"Lato\", \"proxima-nova\", \"Helvetica Neue\", Arial, sans-serif;\n  outline: none;\n  vertical-align: baseline;\n  zoom: 1;\n  user-select: none;\n  transition: all 0.1s linear;\n}\n.x-spreadsheet-button.active,\n.x-spreadsheet-button:hover {\n  background-color: #C0C1C2;\n  color: rgba(0, 0, 0, 0.8);\n}\n.x-spreadsheet-button.primary {\n  color: #fff;\n  background-color: #2185D0;\n}\n.x-spreadsheet-button.primary:hover,\n.x-spreadsheet-button.primary.active {\n  color: #fff;\n  background-color: #1678c2;\n}\n.x-spreadsheet-form-input {\n  font-size: 1em;\n  position: relative;\n  font-weight: 400;\n  display: inline-flex;\n  color: rgba(0, 0, 0, 0.87);\n}\n.x-spreadsheet-form-input input {\n  z-index: 1;\n  margin: 0;\n  max-width: 100%;\n  flex: 1 0 auto;\n  outline: 0;\n  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n  text-align: left;\n  line-height: 30px;\n  height: 30px;\n  padding: 0 8px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 3px;\n  transition: box-shadow 0.1s ease, border-color 0.1s ease;\n  box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n}\n.x-spreadsheet-form-input input:focus {\n  border-color: #4b89ff;\n  box-shadow: inset 0 1px 2px rgba(75, 137, 255, 0.2);\n}\n.x-spreadsheet-form-select {\n  position: relative;\n  display: inline-block;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 2px;\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.87);\n  user-select: none;\n  box-shadow: inset 0 1px 2px hsla(0, 0%, 4%, 0.06);\n}\n.x-spreadsheet-form-select .input-text {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  min-width: 60px;\n  width: auto;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 8px;\n}\n.x-spreadsheet-form-fields {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.x-spreadsheet-form-fields .x-spreadsheet-form-field {\n  flex: 0 1 auto;\n}\n.x-spreadsheet-form-fields .x-spreadsheet-form-field .label {\n  display: inline-block;\n  margin: 0 10px 0 0;\n}\n.x-spreadsheet-form-field {\n  display: block;\n  vertical-align: middle;\n  margin-left: 10px;\n  margin-bottom: 10px;\n}\n.x-spreadsheet-form-field:first-child {\n  margin-left: 0;\n}\n.x-spreadsheet-form-field.error .x-spreadsheet-form-select,\n.x-spreadsheet-form-field.error input {\n  border-color: #f04134;\n}\n.x-spreadsheet-form-field .tip {\n  color: #f04134;\n  font-size: 0.9em;\n}\n.x-spreadsheet-dimmer {\n  display: none;\n  position: absolute;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 0;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation-duration: 0.5s;\n  animation-duration: 0.5s;\n  transition: background-color 0.5s linear;\n  user-select: none;\n  z-index: 1000;\n}\n.x-spreadsheet-dimmer.active {\n  display: block;\n  opacity: 1;\n}\nform fieldset {\n  border: none;\n}\nform fieldset label {\n  display: block;\n  margin-bottom: 0.5em;\n  font-size: 1em;\n  color: #666;\n}\nform fieldset select {\n  font-size: 1.1em;\n  width: 100%;\n  background-color: #fff;\n  border: none;\n  border-bottom: 2px solid #ddd;\n  padding: 0.5em 0.85em;\n  border-radius: 2px;\n}\n.x-spreadsheet-modal,\n.x-spreadsheet-toast {\n  font-size: 13px;\n  position: fixed;\n  z-index: 1001;\n  text-align: left;\n  line-height: 1.25em;\n  min-width: 360px;\n  color: rgba(0, 0, 0, 0.87);\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  border-radius: 4px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n  background-clip: padding-box;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 8px;\n}\n.x-spreadsheet-toast {\n  background-color: rgba(255, 255, 255, 0.85);\n}\n.x-spreadsheet-modal-header,\n.x-spreadsheet-toast-header {\n  font-weight: 600;\n  background-clip: padding-box;\n  background-color: rgba(255, 255, 255, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 4px 4px 0 0;\n}\n.x-spreadsheet-modal-header .x-spreadsheet-icon,\n.x-spreadsheet-toast-header .x-spreadsheet-icon {\n  position: absolute;\n  right: 0.8em;\n  top: 0.65em;\n  border-radius: 18px;\n}\n.x-spreadsheet-modal-header .x-spreadsheet-icon:hover,\n.x-spreadsheet-toast-header .x-spreadsheet-icon:hover {\n  opacity: 1;\n  background: rgba(0, 0, 0, 0.08);\n}\n.x-spreadsheet-toast-header {\n  color: #F2711C;\n}\n.x-spreadsheet-modal-header {\n  border-bottom: 1px solid #e0e2e4;\n  background: rgba(0, 0, 0, 0.08);\n  font-size: 1.0785em;\n}\n.x-spreadsheet-modal-header,\n.x-spreadsheet-modal-content,\n.x-spreadsheet-toast-header,\n.x-spreadsheet-toast-content {\n  padding: 0.75em 1em;\n}\n@media screen and (min-width: 320px) and (max-width: 480px) {\n  .x-spreadsheet-toolbar {\n    display: none;\n  }\n}\n.x-spreadsheet-icon {\n  width: 18px;\n  height: 18px;\n  margin: 1px 1px 2px 1px;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  line-height: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img {\n  background-image: url(" + ___CSS_LOADER_URL_REPLACEMENT_0___ + ");\n  position: absolute;\n  width: 262px;\n  height: 444px;\n  opacity: 0.56;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.undo {\n  left: 0;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.redo {\n  left: -18px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.print {\n  left: -36px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.paintformat {\n  left: -54px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.clearformat {\n  left: -72px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.font-bold {\n  left: -90px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.font-italic {\n  left: -108px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.underline {\n  left: -126px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.strike {\n  left: -144px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.color {\n  left: -162px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.bgcolor {\n  left: -180px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.merge {\n  left: -198px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-left {\n  left: -216px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-center {\n  left: -234px;\n  top: 0;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-right {\n  left: 0;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-top {\n  left: -18px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-middle {\n  left: -36px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.align-bottom {\n  left: -54px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.textwrap {\n  left: -72px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.autofilter {\n  left: -90px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.formula {\n  left: -108px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.arrow-down {\n  left: -126px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.arrow-right {\n  left: -144px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.link {\n  left: -162px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chart {\n  left: -180px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.freeze {\n  left: -198px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.ellipsis {\n  left: -216px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.add {\n  left: -234px;\n  top: -18px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-all {\n  left: 0;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-inside {\n  left: -18px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-horizontal {\n  left: -36px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-vertical {\n  left: -54px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-outside {\n  left: -72px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-left {\n  left: -90px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-top {\n  left: -108px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-right {\n  left: -126px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-bottom {\n  left: -144px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.border-none {\n  left: -162px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.line-color {\n  left: -180px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.line-type {\n  left: -198px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.close {\n  left: -234px;\n  top: -36px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-down {\n  left: 0;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-up {\n  left: -18px;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-left {\n  left: -36px;\n  top: -54px;\n}\n.x-spreadsheet-icon .x-spreadsheet-icon-img.chevron-right {\n  left: -54px;\n  top: -54px;\n}\n", "",{"version":3,"sources":["webpack://./src/index.less"],"names":[],"mappings":"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EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,OAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,YAAA;EACA,UAAA;AA1MN;AA4MI;EACE,OAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN;AA4MI;EACE,WAAA;EACA,UAAA;AA1MN","sourcesContent":["@css-prefix: x-spreadsheet;\n// color\n@red-color: #DB2828;\n@red-hover-color: #d01919;\n@orange-color: #F2711C;\n@orange-hover-color: #f26202;\n@yellow-color: #FBBD08;\n@yellow-hover-color: #eaae00;\n@olive-color: #B5CC18;\n@olive-hover-color: #a7bd0d;\n@green-color: #21BA45;\n@green-hover-color: #16ab39;\n@teal-color: #00B5AD;\n@teal-hover-color: #009c95;\n@blue-color: #2185D0;\n@blue-hover-color: #1678c2;\n@violet-color: #6435C9;\n@violet-hover-color: #5829bb;\n@purple-color: #A333C8;\n@purple-hover-color: #9627ba;\n@pink-color: #E03997;\n@pink-hover-color: #e61a8d;\n@brown-color: #A5673F;\n@brown-hover-color: #975b33;\n@grey-color: #767676;\n@grey-hover-color: #838383;\n@dark-color: #343a40;\n@dark-hover-color: darken(@dark-color, 10%);\n@black-color: #1B1C1D;\n@black-hover-color: #27292a;\n\n// base\n@border-style: 1px solid #e0e2e4;\n@icon-size: 18px;\n@line-height: 1.25em;\n@border-color: #e9e9e9;\n@border: 1px solid @border-color;\n@input-border: @border;\n@input-padding: 0.5em 0.75em;\n@input-box-shadow: inset 0 1px 2px hsla(0,0%,4%,.06);\n@border-radius: 2px;\n@form-field-height: 30px;\n@primary-color: @blue-color;\n@primary-hover-color: @blue-hover-color;\n\n// method\n.type-primary() {\n  color: #fff;\n  background-color: @primary-color;\n  &:hover, &.active {\n    color: #fff;\n    background-color: @primary-hover-color;\n  }\n}\n\nbody {\n  margin: 0;\n}\n\n.@{css-prefix} {\n  font-size: 13px;\n  line-height: normal;\n  user-select: none;\n  -moz-user-select: none;\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  box-sizing: content-box;\n  background: #fff;\n  -webkit-font-smoothing: antialiased;\n\n  textarea {\n    font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n  }\n}\n\n.@{css-prefix}-sheet {\n  position: relative;\n  overflow: hidden;\n}\n\n.@{css-prefix}-table {\n  // html5 bottom margin bug\n  vertical-align: bottom;\n}\n\n.@{css-prefix}-tooltip {\n  font-family: inherit;\n  position: absolute;\n  padding: 5px 10px;\n  color: #fff;\n  border-radius: 1px;\n  background: rgba(0, 0, 0, 1);\n  font-size: 12px;\n  z-index: 201;\n\n  &:before {\n    pointer-events: none;\n    position: absolute;\n    left: calc(50% - 4px);\n    top: -4px;\n    content: \"\";\n    width: 8px;\n    height: 8px;\n    background: inherit;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    z-index: 1;\n    box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, .3);\n  }\n}\n\n.@{css-prefix}-color-palette {\n  padding: 5px;\n\n  table {\n    margin: 0;\n    padding: 0;\n    border-collapse: separate;\n    border-spacing: 2;\n    background: #fff;\n\n    td {\n      margin: 0;\n      cursor: pointer;\n      border: 1px solid transparent;\n\n      &:hover {\n        border-color: #ddd;\n      }\n\n      .@{css-prefix}-color-palette-cell {\n        width: 16px;\n        height: 16px;\n      }\n    }\n  }\n}\n\n.@{css-prefix}-border-palette {\n  padding: 6px;\n\n  table {\n    margin: 0;\n    padding: 0;\n    border-collapse: separate;\n    border-spacing: 0;\n    background: #fff;\n    table-layout: fixed;\n\n    td {\n      margin: 0;\n    }\n  }\n\n  .@{css-prefix}-border-palette-left {\n    border-right: 1px solid #eee;\n    padding-right: 6px;\n\n    .@{css-prefix}-border-palette-cell {\n      width: 30px;\n      height: 30px;\n      cursor: pointer;\n      text-align: center;\n\n      .@{css-prefix}-icon-img {\n        opacity: .8;\n      }\n\n      &:hover {\n        background-color: #eee;\n      }\n    }\n  }\n\n  .@{css-prefix}-border-palette-right {\n    padding-left: 6px;\n\n    .@{css-prefix}-toolbar-btn {\n      margin-top: 0;\n      margin-bottom: 3px;\n    }\n\n    .@{css-prefix}-line-type {\n      position: relative;\n      left: 0;\n      top: -3px;\n    }\n\n  }\n\n}\n\n.@{css-prefix}-dropdown {\n  position: relative;\n\n  .@{css-prefix}-dropdown-content {\n    position: absolute;\n    z-index: 200;\n    background: #fff;\n    box-shadow: 1px 2px 5px 2px rgba(51,51,51,.15);\n  }\n\n  &.bottom-left {\n    .@{css-prefix}-dropdown-content {\n      top: calc(~'100% + 5px');\n      left: 0;\n    }\n  }\n\n  &.bottom-right {\n    .@{css-prefix}-dropdown-content {\n      top: calc(~'100% + 5px');\n      right: 0;\n    }\n  }\n\n  &.top-left {\n    .@{css-prefix}-dropdown-content {\n      bottom: calc(~'100% + 5px');\n      left: 0;\n    }\n  }\n\n  &.top-right {\n    .@{css-prefix}-dropdown-content {\n      bottom: calc(~'100% + 5px');\n      right: 0;\n    }\n  }\n\n\n  .@{css-prefix}-dropdown-title {\n    padding: 0 5px;\n    display: inline-block;\n  }\n\n  .@{css-prefix}-dropdown-header {\n    .@{css-prefix}-icon.arrow-left {\n      margin-left: 4px;\n    }\n    .@{css-prefix}-icon.arrow-right {\n      width: 10px;\n      margin-right: 4px;\n      .arrow-down {\n        left: -130px;\n      }\n    }\n  }\n}\n/* resizer **/\n.@{css-prefix}-resizer {\n  position: absolute;\n  z-index: 11;\n\n  .@{css-prefix}-resizer-hover {\n    background-color: rgba(75, 137, 255, .25);\n  }\n  .@{css-prefix}-resizer-line {\n    position: absolute;\n  }\n\n  &.horizontal {\n    cursor: row-resize;\n    .@{css-prefix}-resizer-line {\n      border-bottom: 2px dashed rgb(75, 137, 255);\n      left: 0;\n      bottom: 0;\n    }\n  }\n  &.vertical {\n    cursor: col-resize;\n    .@{css-prefix}-resizer-line {\n      border-right: 2px dashed rgb(75, 137, 255);\n      top: 0;\n      right: 0;\n    }\n  }\n}\n/* scrollbar */\n.@{css-prefix}-scrollbar {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #f4f5f8;\n  opacity: 0.9;\n  z-index: 12;\n  &.horizontal {\n    right: 15px;\n    overflow-x: scroll;\n    overflow-y: hidden;\n    > div {\n      height: 1px;\n      background: #ddd;\n    }\n  }\n  &.vertical {\n    bottom: 15px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    > div {\n      width: 1px;\n      background: #ddd;\n    }\n  }\n  &:hover {\n    // opacity: .85;\n  }\n}\n\n/* @{css-prefix}-overlayer */\n.@{css-prefix}-overlayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 10;\n  .@{css-prefix}-overlayer-content {\n    position: absolute;\n    overflow: hidden;\n    pointer-events: none;\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.@{css-prefix}-editor, .@{css-prefix}-selector {\n  box-sizing: content-box;\n  position: absolute;\n  overflow: hidden;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n/* @{css-prefix}-selector */\n.@{css-prefix}-selector {\n  .hide-input {\n    position: absolute;\n    z-index: 0;\n    input {\n      padding: 0;\n      width: 0;\n      border: none!important;\n    }\n  }\n  .@{css-prefix}-selector-area {\n    position: absolute;\n    border: 2px solid rgb(75, 137, 255);\n    background: rgba(75, 137, 255, .1);\n    z-index: 5;\n  }\n  .@{css-prefix}-selector-clipboard, .@{css-prefix}-selector-autofill {\n    position: absolute;\n    background: transparent;\n    z-index: 100;\n  }\n  .@{css-prefix}-selector-clipboard {\n    border: 2px dashed rgb(75, 137, 255);\n  }\n  .@{css-prefix}-selector-autofill {\n    border: 1px dashed rgba(0, 0, 0, .45); // #606060; // rgba(0, 0, 0, .2);\n  }\n  .@{css-prefix}-selector-corner {\n    pointer-events: auto;\n    position: absolute;\n    cursor: crosshair;\n    font-size: 0;\n    height: 5px;\n    width: 5px;\n    right: -5px;\n    bottom: -5px;\n    border: 2px solid rgb(255, 255, 255);\n    background: rgb(75, 137, 255);\n  }\n}\n.@{css-prefix}-editor {\n  z-index: 20;\n  .@{css-prefix}-editor-area {\n    position: absolute;\n    text-align: left;\n    border: 2px solid rgb(75, 137, 255);\n    line-height: 0;\n    z-index: 100;\n    pointer-events: auto;\n\n    textarea {\n      box-sizing: content-box;\n      border: none;\n      padding: 0 3px;\n      outline: none;\n      resize: none;\n      text-align: start;\n      overflow-y: hidden;\n      font: 400 13px Arial, 'Lato', 'Source Sans Pro', Roboto, Helvetica, sans-serif;\n      color: inherit;\n      white-space: normal;\n      word-wrap: break-word;\n      line-height: 22px;\n      margin: 0;\n    }\n\n    .textline {\n      overflow: hidden;\n      visibility: hidden;\n      position: fixed;\n      top: 0;\n      left: 0;\n    }\n  }\n}\n\n.@{css-prefix}-item {\n  user-select: none;\n  background: 0;\n  border: 1px solid transparent;\n  outline: none;\n  height: 26px;\n  color: rgba(0, 0, 0, .9);\n  line-height: 26px;\n  list-style: none;\n  padding: 2px 10px;\n  cursor: default;\n  text-align: left;\n  overflow: hidden;\n\n  &.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n\n  &:hover, &.active {\n    background: rgba(0, 0, 0, .05);\n  }\n\n  // &.active {\n    ////   background: #89aef53d;\n  // }\n\n  &.divider {\n    height: 0;\n    padding: 0;\n    margin: 5px 0;\n    border: none;\n    border-bottom: 1px solid rgba(0, 0, 0, .1);\n  }\n\n  .label {\n    float: right;\n    opacity: .65;\n    font-size: 1em;\n  }\n}\n\n.x-spreadsheet-item,\n.x-spreadsheet-header,\n{\n\n  &.state {\n    padding-left: 35px!important;\n    position: relative;\n\n    &:before {\n      content: '';\n      position: absolute;\n      width: 10px;\n      height: 10px;\n      left: 12px;\n      top: calc(50% - 5px);\n      background: rgba(0, 0, 0, 0.08);\n      // border: 1px solid rgba(0, 0, 0, 0.1);\n      border-radius: 2px;\n    }\n  }\n  &.state.checked:before {\n    background: #4b89ff;\n    // content: '';\n    // position: absolute;\n    // width: 5px;\n    // height: 12px;\n    // color: #4b89ff; // #353A41;\n    // border-left: none;\n    // border-top: none;\n    // border-bottom: 2px solid;\n    // border-right: 2px solid;\n    // left: 15px;\n    // top: 6px;\n    // background: none;\n    // border-radius: 0;\n    // transform-origin: center;\n    // transform: rotate(45deg);\n    // -webkit-transform: rotate(45deg);\n  }\n\n}\n\n.@{css-prefix}-checkbox {\n  position: relative;\n  display: inline-block;\n  backface-visibility: hidden;\n  outline: 0;\n  vertical-align: baseline;\n  font-style: normal;\n  font-size: 1rem;\n  line-height: 1em;\n  > input {\n    position: absolute;\n    top: 0;\n    left: 0;\n    opacity: 0!important;\n    outline: 0;\n    z-index: -1;\n  }\n}\n\n.@{css-prefix}-suggest,\n.@{css-prefix}-contextmenu,\n.@{css-prefix}-sort-filter {\n  position: absolute;\n  box-shadow: 1px 2px 5px 2px rgba(51, 51, 51, 0.15);\n  background: #fff;\n  z-index: 100;\n  width: 260px;\n  pointer-events: auto;\n  overflow: auto;\n}\n\n.@{css-prefix}-suggest {\n  width: 200px;\n}\n\n.@{css-prefix}-filter {\n  border: 1px solid #e9e9e9;\n  font-size: 12px;\n  margin: 10px;\n\n  .@{css-prefix}-header {\n    padding: .5em .75em;\n    background: #f8f8f9;\n    border-bottom: 1px solid #e9e9e9;\n    border-left: 1px solid transparent;\n  }\n  .@{css-prefix}-body {\n    height: 200px;\n    overflow-y: auto;\n\n    .@{css-prefix}-item {\n      height: 20px;\n      line-height: 20px;\n    }\n  }\n}\n\n.@{css-prefix}-sort-filter {\n  .@{css-prefix}-buttons {\n    margin: 10px;\n  }\n}\n\n.@{css-prefix}-toolbar, .@{css-prefix}-bottombar {\n  height: 40px;\n  padding: 0 30px;\n  text-align: left;\n  background: #f5f6f7;\n  display: flex;\n}\n\n.@{css-prefix}-bottombar {\n  position: relative;\n  border-top: 1px solid #e0e2e4;\n\n  .@{css-prefix}-menu > li {\n    line-height: 40px;\n    height: 40px;\n    padding-top: 0;\n    padding-bottom: 0;\n    vertical-align: middle;\n    border-right: 1px solid #e8eaed;\n  }\n}\n\n.@{css-prefix}-menu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n}\n.@{css-prefix}-menu > li {\n  float: left;\n  line-height: 1.25em;\n  padding: .785em 1em;\n  margin: 0;\n  vertical-align: middle;\n  text-align: left;\n  font-weight: 400;\n  color: #80868b;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all .3s;\n  font-weight: bold;\n\n  &.active {\n    background-color: #fff;\n    color: rgba(0, 0, 0, .65);\n  }\n\n  .@{css-prefix}-icon {\n    margin: 0 6px;\n\n    .@{css-prefix}-icon-img {\n      &:hover {\n        opacity: .85;\n      }\n    }\n  }\n\n  .@{css-prefix}-dropdown {\n    display: inline-block;\n  }\n}\n\n.@{css-prefix}-toolbar {\n  border-bottom: 1px solid #e0e2e4;\n\n  .@{css-prefix}-toolbar-btns {\n    display: inline-flex;\n  }\n\n  .@{css-prefix}-toolbar-more {\n    padding: 0 6px 6px;\n    text-align: left;\n    .@{css-prefix}-toolbar-divider {\n      margin-top: 0;\n    }\n  }\n\n  .@{css-prefix}-toolbar-btn {\n    flex: 0 0 auto;\n    display: inline-block;\n    border: 1px solid transparent;\n    height: 26px;\n    line-height: 26px;\n    min-width: 26px;\n    margin: 6px 1px 0;\n    padding: 0;\n    text-align: center;\n    border-radius: 2px;\n\n    &.disabled {\n      pointer-events: none;\n      opacity: 0.5;\n    }\n\n    &:hover, &.active {\n      background: rgba(0, 0, 0, .08);\n    }\n  }\n}\n\n.@{css-prefix}-toolbar-divider {\n  display: inline-block;\n  border-right: 1px solid #e0e2e4;\n  width: 0;\n  vertical-align: middle;\n  height: 18px;\n  margin: 12px 3px 0;\n}\n\n.@{css-prefix}-print {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.@{css-prefix}-print-bar {\n  background: #424242;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 30px;\n\n  .-title {\n    color: #fff;\n    font-weight: bold;\n    font-size: 1.2em;\n    float: left;\n  }\n\n  .-right {\n    float: right;\n    margin-top: 12px;\n  }\n}\n.@{css-prefix}-print-content {\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  background: #d0d0d0;\n  height: calc(100% - 60px);\n\n  .-sider {\n    flex: 0 0 300px;\n    width: 300px;\n    border-left: 2px solid #ccc;\n    background: #fff;\n  }\n\n  .-content {\n    flex: auto;\n    overflow-x: auto;\n    overflow-y: scroll;\n    height: 100%;\n  }\n}\n\n\n.@{css-prefix}-canvas-card-wraper {\n  margin: 40px 20px;\n}\n.@{css-prefix}-canvas-card {\n  background: #fff;\n  margin: auto;\n  page-break-before: auto;\n  page-break-after: always;\n  box-shadow: 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 3px rgba(0,0,0,0.12), 0 4px 5px 0 rgba(0,0,0,0.20);\n}\n\n.@{css-prefix}-calendar {\n  color: rgba(0,0,0,.65);\n  background: #ffffff;\n  user-select: none;\n\n  .calendar-header {\n    font-weight: 700;\n    line-height: 30px;\n    text-align: center;\n    width: 100%;\n    float: left;\n    background: #f9fafb;\n\n    .calendar-header-left {\n      padding-left: 5px;\n      float: left;\n    }\n\n    .calendar-header-right {\n      float: right;\n\n      a {\n        padding: 3px 0;\n        margin-right: 2px;\n        border-radius: 2px;\n      }\n      a:hover {\n        background: rgba(0,0,0,.08);\n      }\n    }\n  }\n\n  .calendar-body {\n    border-collapse: collapse;\n    border-spacing: 0;\n\n    th, td {\n      width: 100%/7;\n      min-width: 32px;\n      text-align: center;\n      font-weight: 700;\n      line-height: 30px;\n      padding: 0;\n    }\n\n    td > .cell {\n      // border: 1px solid rgba(0,0,0,.05);\n\n      &:hover {\n        background: #ecf6fd;\n      }\n\n      &.active, &.active:hover {\n        background: #ecf6fd;\n        color: #2185D0;\n      }\n\n      &.disabled {\n        pointer-events: none;\n        opacity: 0.5;\n      }\n    }\n  }\n}\n\n.@{css-prefix}-datepicker {\n  box-shadow: 2px 2px 5px rgba(0,0,0,.2);\n  position: absolute;\n  left: 0;\n  top: calc(100% + 5px);\n  z-index: 10;\n  width: auto;\n}\n\n.@{css-prefix}-buttons {\n  display: flex;\n  justify-content: flex-end;\n\n  .@{css-prefix}-button {\n    margin-left: 8px;\n  }\n}\n.@{css-prefix}-button {\n  display: inline-block;\n  border-radius: 3px;\n  line-height: 1em;\n  min-height: 1em;\n  white-space: nowrap;\n  text-align: center;\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: 700;\n  padding: .75em 1em;\n  color: rgba(0,0,0,.6);\n  background: #E0E1E2;\n  text-decoration: none;\n  font-family: \"Lato\",\"proxima-nova\",\"Helvetica Neue\",Arial,sans-serif;\n  //box-shadow: 0px 1px 2px -1px rgba(255,255,255,0.5) inset, 0px -2px 0px 0px rgba(0,0,0,0.1) inset;\n  //box-shadow: 0 0 0 0 rgba(0,0,0,.5) inset;\n  outline: none;\n  vertical-align: baseline;\n  zoom: 1;\n  user-select: none;\n  transition: all 0.1s linear;\n\n  &.active, &:hover {\n    background-color: #C0C1C2;\n    color: rgba(0,0,0,.8);\n  }\n\n  &.primary {\n    .type-primary;\n  }\n}\n\n// form begin\n.@{css-prefix}-form-input {\n  font-size: 1em;\n  position: relative;\n  font-weight: 400;\n  display: inline-flex;\n  color: rgba(0,0,0,.87);\n\n  input {\n    z-index: 1;\n    margin: 0;\n    max-width: 100%;\n    flex: 1 0 auto;\n    outline: 0;\n    -webkit-tap-highlight-color: rgba(255,255,255,0);\n    text-align: left;\n    line-height: @form-field-height;\n    height: @form-field-height;\n    padding: 0 8px;\n    background: #fff;\n    border: 1px solid #e9e9e9;\n    border-radius: 3px;\n    transition: box-shadow .1s ease,border-color .1s ease;\n    box-shadow: inset 0 1px 2px hsla(0,0%,4%,.06);\n\n    &:focus {\n      border-color: rgb(75, 137, 255);\n      box-shadow: inset 0 1px 2px rgba(75, 137, 255, .2);\n    }\n  }\n}\n\n.@{css-prefix}-form-select {\n  position: relative;\n  display: inline-block;\n  background: #fff;\n  border: @input-border;\n  border-radius: 2px;\n  cursor: pointer;\n  color: rgba(0,0,0,.87);\n  user-select: none;\n  box-shadow: inset 0 1px 2px hsla(0,0%,4%,.06);\n\n  .input-text {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    min-width: 60px;\n    width: auto;\n    height: @form-field-height;\n    line-height: @form-field-height;\n    padding: 0 8px;\n  }\n}\n.@{css-prefix}-form-fields {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  .@{css-prefix}-form-field {\n    flex: 0 1 auto;\n    .label {\n      display: inline-block;\n      margin: 0 10px 0 0;\n    }\n  }\n}\n.@{css-prefix}-form-field {\n  display: block;\n  vertical-align: middle;\n  margin-left: 10px;\n  margin-bottom: 10px;\n\n  &:first-child {\n    margin-left: 0;\n  }\n\n  &.error {\n    .@{css-prefix}-form-select, input {\n      border-color: #f04134;\n    }\n  }\n\n  .tip {\n    color: #f04134;\n    font-size: .9em;\n  }\n}\n// form end\n.@{css-prefix}-dimmer {\n  display: none;\n  position: absolute;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 0;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation-duration: 0.5s;\n  animation-duration: 0.5s;\n  transition: background-color 0.5s linear;\n  user-select: none;\n  z-index: 1000;\n\n  &.active {\n    display: block;\n    opacity: 1;\n  }\n}\n\nform fieldset {\n  border: none;\n\n  label {\n    display: block;\n    margin-bottom: .5em;\n    font-size: 1em;\n    color: #666;\n  }\n\n  select {\n    font-size: 1.1em;\n    width: 100%;\n    background-color: #fff;\n    border: none;\n    border-bottom: 2px solid #ddd;\n    padding: .5em .85em;\n    border-radius: 2px;\n  }\n}\n\n.@{css-prefix}-modal, .@{css-prefix}-toast {\n  font-size: 13px;\n  position: fixed;\n  z-index: 1001;\n  text-align: left;\n  line-height: @line-height;\n  min-width: 360px;\n  color: rgba(0,0,0,.87);\n  font-family: 'Lato', 'Source Sans Pro', Roboto, Helvetica, Arial, sans-serif;\n  border-radius: 4px;\n  border: 1px solid rgba(0,0,0,.1);\n  background-color: #fff;\n  background-clip: padding-box;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 8px;\n}\n\n.@{css-prefix}-toast {\n  background-color: rgba(255,255,255,.85);\n}\n\n.@{css-prefix}-modal-header, .@{css-prefix}-toast-header {\n  font-weight: 600;\n  background-clip: padding-box;\n  background-color: rgba(255,255,255,.85);\n  border-bottom: 1px solid rgba(0,0,0,.05);\n  border-radius: 4px 4px 0 0;\n\n  .@{css-prefix}-icon {\n    position: absolute;\n    right: .8em;\n    top: .65em;\n    border-radius: 18px;\n\n    &:hover {\n      opacity: 1;\n      background: rgba(0, 0, 0, 0.08);\n    }\n  }\n}\n\n.@{css-prefix}-toast-header {\n  color: @orange-color;\n}\n\n.@{css-prefix}-modal-header {\n  border-bottom: @border-style;\n  background: rgba(0, 0, 0, .08);\n  font-size: 1.0785em;\n}\n\n.@{css-prefix}-modal-header,\n.@{css-prefix}-modal-content,\n.@{css-prefix}-toast-header,\n.@{css-prefix}-toast-content {\n  padding: .75em 1em;\n}\n\n@media screen and (min-width: 320px) and (max-width: 480px) {\n  .@{css-prefix}-toolbar {\n    display: none;\n  }\n}\n\n.@{css-prefix}-icon {\n  width: 18px;\n  height: 18px;\n  margin: 1px 1px 2px 1px;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  line-height: 0;\n\n  .@{css-prefix}-icon-img {\n    background-image: url('../assets/sprite.svg');\n    position: absolute;\n    width: 262px;\n    height: 444px;\n    opacity: 0.56;\n\n    &.undo {\n      left: 0;\n      top: 0;\n    }\n    &.redo {\n      left: -1 * @icon-size;\n      top: 0;\n    }\n    &.print {\n      left: -2 * @icon-size;\n      top: 0;\n    }\n    &.paintformat {\n      left: -3 * @icon-size;\n      top: 0;\n    }\n    &.clearformat {\n      left: -4 * @icon-size;\n      top: 0;\n    }\n    &.font-bold {\n      left: -5 * @icon-size;\n      top: 0;\n    }\n    &.font-italic {\n      left: -6 * @icon-size;\n      top: 0;\n    }\n    &.underline {\n      left: -7 * @icon-size;\n      top: 0;\n    }\n    &.strike {\n      left: -8 * @icon-size;\n      top: 0;\n    }\n    &.color {\n      left: -9 * @icon-size;\n      top: 0;\n    }\n    &.bgcolor {\n      left: -10 * @icon-size;\n      top: 0;\n    }\n    &.merge {\n      left: -11 * @icon-size;\n      top: 0;\n    }\n    &.align-left {\n      left: -12 * @icon-size;\n      top: 0;\n    }\n    &.align-center {\n      left: -13 * @icon-size;\n      top: 0;\n    }\n    &.align-right {\n      left: 0;\n      top: -1 * @icon-size;\n    }\n    &.align-top {\n      left: -1 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.align-middle {\n      left: -2 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.align-bottom {\n      left: -3 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.textwrap {\n      left: -4 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.autofilter {\n      left: -5 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.formula {\n      left: -6 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.arrow-down {\n      left: -7 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.arrow-right {\n      left: -8 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.link {\n      left: -9 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.chart {\n      left: -10 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.freeze {\n      left: -11 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.ellipsis {\n      left: -12 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.add {\n      left: -13 * @icon-size;\n      top: -1 * @icon-size;\n    }\n    &.border-all {\n      left: 0;\n      top: -2 * @icon-size;\n    }\n    &.border-inside {\n      left: -1 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-horizontal {\n      left: -2 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-vertical {\n      left: -3 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-outside {\n      left: -4 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-left {\n      left: -5 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-top {\n      left: -6 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-right {\n      left: -7 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-bottom {\n      left: -8 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.border-none {\n      left: -9 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.line-color {\n      left: -10 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.line-type {\n      left: -11 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.close {\n      left: -13 * @icon-size;\n      top: -2 * @icon-size;\n    }\n    &.chevron-down {\n      left: 0;\n      top: -3 * @icon-size;\n    }\n    &.chevron-up {\n      left: -1 * @icon-size;\n      top: -3 * @icon-size;\n    }\n    &.chevron-left {\n      left: -2 * @icon-size;\n      top: -3 * @icon-size;\n    }\n    &.chevron-right {\n      left: -3 * @icon-size;\n      top: -3 * @icon-size;\n    }\n  }\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";

      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }

      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }

      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }

      content += cssWithMappingToString(item);

      if (needLayer) {
        content += "}";
      }

      if (item[2]) {
        content += "}";
      }

      if (item[4]) {
        content += "}";
      }

      return content;
    }).join("");
  }; // import a list of modules into the list


  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }

      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }

      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }

      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }

      list.push(item);
    }
  };

  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/getUrl.js":
/*!********************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/getUrl.js ***!
  \********************************************************/
/***/ ((module) => {



module.exports = function (url, options) {
  if (!options) {
    options = {};
  }

  if (!url) {
    return url;
  }

  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them

  if (/^['"].*['"]$/.test(url)) {
    url = url.slice(1, -1);
  }

  if (options.hash) {
    url += options.hash;
  } // Should url be wrapped?
  // See https://drafts.csswg.org/css-values-3/#urls


  if (/["'() \t\n]|(%20)/.test(url) || options.needQuotes) {
    return "\"".concat(url.replace(/"/g, '\\"').replace(/\n/g, "\\n"), "\"");
  }

  return url;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {



module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || "").concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
  }

  return [content].join("\n");
};

/***/ }),

/***/ "./src/index.less":
/*!************************!*\
  !*** ./src/index.less ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./index.less */ "./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/index.less");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_less_loader_dist_cjs_js_index_less__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {



var stylesInDOM = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };

    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);

  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }

      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };

  return updater;
}

module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();

        stylesInDOM.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {



var memo = {};
/* istanbul ignore next  */

function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }

    memo[target] = styleTarget;
  }

  return memo[target];
}
/* istanbul ignore next  */


function insertBySelector(insert, style) {
  var target = getTarget(insert);

  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }

  target.appendChild(style);
}

module.exports = insertBySelector;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}

module.exports = insertStyleElement;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;

  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}

module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";

  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }

  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }

  var needLayer = typeof obj.layer !== "undefined";

  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }

  css += obj.css;

  if (needLayer) {
    css += "}";
  }

  if (obj.media) {
    css += "}";
  }

  if (obj.supports) {
    css += "}";
  }

  var sourceMap = obj.sourceMap;

  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  options.styleTagTransform(css, styleElement, options.options);
}

function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }

  styleElement.parentNode.removeChild(styleElement);
}
/* istanbul ignore next  */


function domAPI(options) {
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}

module.exports = domAPI;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }

    styleElement.appendChild(document.createTextNode(css));
  }
}

module.exports = styleTagTransform;

/***/ }),

/***/ "./src/canvas/draw.ts":
/*!****************************!*\
  !*** ./src/canvas/draw.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Draw": () => (/* binding */ Draw),
/* harmony export */   "DrawBox": () => (/* binding */ DrawBox),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "npx": () => (/* binding */ npx),
/* harmony export */   "thinLineWidth": () => (/* binding */ thinLineWidth)
/* harmony export */ });
/* global window */
function dpr() {
    return window.devicePixelRatio || 1;
}
function thinLineWidth() {
    return dpr() - 0.5;
}
function npx(px) {
    return Math.floor(px * dpr());
}
function npxLine(px) {
    const n = npx(px);
    return n > 0 ? n - 0.5 : 0.5;
}
class DrawBox {
    x;
    y;
    width;
    height;
    padding;
    bgcolor;
    borderTop;
    borderRight;
    borderBottom;
    borderLeft;
    constructor(x, y, w, h, padding = 0) {
        this.x = x;
        this.y = y;
        this.width = w;
        this.height = h;
        this.padding = padding;
        this.bgcolor = '#ffffff';
        // border: [width, style, color]
        this.borderTop = null;
        this.borderRight = null;
        this.borderBottom = null;
        this.borderLeft = null;
    }
    setBorders({ top, bottom, left, right }) {
        if (top)
            this.borderTop = top;
        if (right)
            this.borderRight = right;
        if (bottom)
            this.borderBottom = bottom;
        if (left)
            this.borderLeft = left;
    }
    innerWidth() {
        return this.width - this.padding * 2 - 2;
    }
    innerHeight() {
        return this.height - this.padding * 2 - 2;
    }
    textx(align) {
        const { width, padding } = this;
        let { x } = this;
        if (align === 'left') {
            x += padding;
        }
        else if (align === 'center') {
            x += width / 2;
        }
        else if (align === 'right') {
            x += width - padding;
        }
        return x;
    }
    texty(align, h) {
        const { height, padding } = this;
        let { y } = this;
        if (align === 'top') {
            y += padding;
        }
        else if (align === 'middle') {
            y += height / 2 - h / 2;
        }
        else if (align === 'bottom') {
            y += height - padding - h;
        }
        return y;
    }
    topxys() {
        const { x, y, width } = this;
        return [
            [x, y],
            [x + width, y],
        ];
    }
    rightxys() {
        const { x, y, width, height } = this;
        return [
            [x + width, y],
            [x + width, y + height],
        ];
    }
    bottomxys() {
        const { x, y, width, height } = this;
        return [
            [x, y + height],
            [x + width, y + height],
        ];
    }
    leftxys() {
        const { x, y, height } = this;
        return [
            [x, y],
            [x, y + height],
        ];
    }
}
function drawFontLine(type, tx, ty, align, valign, blheight, blwidth) {
    const floffset = { x: 0, y: 0 };
    if (type === 'underline') {
        if (valign === 'bottom') {
            floffset.y = 0;
        }
        else if (valign === 'top') {
            floffset.y = -(blheight + 2);
        }
        else {
            floffset.y = -blheight / 2;
        }
    }
    else if (type === 'strike') {
        if (valign === 'bottom') {
            floffset.y = blheight / 2;
        }
        else if (valign === 'top') {
            floffset.y = -(blheight / 2 + 2);
        }
    }
    if (align === 'center') {
        floffset.x = blwidth / 2;
    }
    else if (align === 'right') {
        floffset.x = blwidth;
    }
    this.line([tx - floffset.x, ty - floffset.y], [tx - floffset.x + blwidth, ty - floffset.y]);
}
class Draw {
    el;
    ctx;
    constructor(el, width, height) {
        this.el = el;
        this.ctx = el.getContext('2d');
        this.resize(width, height);
        this.ctx.scale(dpr(), dpr());
    }
    resize(width, height) {
        // console.log('dpr:', dpr);
        this.el.style.width = `${width}px`;
        this.el.style.height = `${height}px`;
        this.el.width = npx(width);
        this.el.height = npx(height);
    }
    clear() {
        const { width, height } = this.el;
        this.ctx.clearRect(0, 0, width, height);
        return this;
    }
    attr(options) {
        Object.assign(this.ctx, options);
        return this;
    }
    save() {
        this.ctx.save();
        this.ctx.beginPath();
        return this;
    }
    restore() {
        this.ctx.restore();
        return this;
    }
    beginPath() {
        this.ctx.beginPath();
        return this;
    }
    translate(x, y) {
        this.ctx.translate(npx(x), npx(y));
        return this;
    }
    scale(x, y) {
        this.ctx.scale(x, y);
        return this;
    }
    clearRect(x, y, w, h) {
        this.ctx.clearRect(x, y, w, h);
        return this;
    }
    fillRect(x, y, w, h) {
        this.ctx.fillRect(npx(x) - 0.5, npx(y) - 0.5, npx(w), npx(h));
        return this;
    }
    fillText(text, x, y) {
        this.ctx.fillText(text, npx(x), npx(y));
        return this;
    }
    /*
      txt: render text
      box: DrawBox
      attr: {
        align: left | center | right
        valign: top | middle | bottom
        color: '#333333',
        strike: false,
        font: {
          name: 'Arial',
          size: 14,
          bold: false,
          italic: false,
        }
      }
      textWrap: text wrapping
    */
    text(mtxt, box, attr = {}, textWrap = true) {
        const { ctx } = this;
        const { align, valign, font, color, strike, underline } = attr;
        const tx = box.textx(align);
        ctx.save();
        ctx.beginPath();
        this.attr({
            textAlign: align,
            textBaseline: valign,
            font: `${font.italic ? 'italic' : ''} ${font.bold ? 'bold' : ''} ${npx(font.size)}px ${font.name}`,
            fillStyle: color,
            strokeStyle: color,
        });
        const txts = `${mtxt}`.split('\n');
        const biw = box.innerWidth();
        const ntxts = [];
        txts.forEach((it) => {
            const txtWidth = ctx.measureText(it).width;
            if (textWrap && txtWidth > npx(biw)) {
                let textLine = { w: 0, len: 0, start: 0 };
                for (let i = 0; i < it.length; i += 1) {
                    if (textLine.w >= npx(biw)) {
                        ntxts.push(it.substr(textLine.start, textLine.len));
                        textLine = { w: 0, len: 0, start: i };
                    }
                    textLine.len += 1;
                    textLine.w += ctx.measureText(it[i]).width + 1;
                }
                if (textLine.len > 0) {
                    ntxts.push(it.substr(textLine.start, textLine.len));
                }
            }
            else {
                ntxts.push(it);
            }
        });
        const txtHeight = (ntxts.length - 1) * (font.size + 2);
        let ty = box.texty(valign, txtHeight);
        ntxts.forEach((txt) => {
            const txtWidth = ctx.measureText(txt).width;
            this.fillText(txt, tx, ty);
            if (strike) {
                drawFontLine.call(this, 'strike', tx, ty, align, valign, font.size, txtWidth);
            }
            if (underline) {
                drawFontLine.call(this, 'underline', tx, ty, align, valign, font.size, txtWidth);
            }
            ty += font.size + 2;
        });
        ctx.restore();
        return this;
    }
    border(style, color) {
        const { ctx } = this;
        ctx.lineWidth = thinLineWidth;
        ctx.strokeStyle = color;
        // console.log('style:', style);
        if (style === 'medium') {
            ctx.lineWidth = npx(2) - 0.5;
        }
        else if (style === 'thick') {
            ctx.lineWidth = npx(3);
        }
        else if (style === 'dashed') {
            ctx.setLineDash([npx(3), npx(2)]);
        }
        else if (style === 'dotted') {
            ctx.setLineDash([npx(1), npx(1)]);
        }
        else if (style === 'double') {
            ctx.setLineDash([npx(2), 0]);
        }
        return this;
    }
    line(...xys) {
        const { ctx } = this;
        if (xys.length > 1) {
            ctx.beginPath();
            const [x, y] = xys[0];
            ctx.moveTo(npxLine(x), npxLine(y));
            for (let i = 1; i < xys.length; i += 1) {
                const [x1, y1] = xys[i];
                ctx.lineTo(npxLine(x1), npxLine(y1));
            }
            ctx.stroke();
        }
        return this;
    }
    // strokeBorders(box) {
    //   const { ctx } = this;
    //   ctx.save();
    //   // border
    //   const {
    //     borderTop, borderRight, borderBottom, borderLeft,
    //   } = box;
    //   if (borderTop) {
    //     this.border(...borderTop);
    //     // console.log('box.topxys:', box.topxys());
    //     this.line(...box.topxys());
    //   }
    //   if (borderRight) {
    //     this.border(...borderRight);
    //     this.line(...box.rightxys());
    //   }
    //   if (borderBottom) {
    //     this.border(...borderBottom);
    //     this.line(...box.bottomxys());
    //   }
    //   if (borderLeft) {
    //     this.border(...borderLeft);
    //     this.line(...box.leftxys());
    //   }
    //   ctx.restore();
    // }
    dropdown(box) {
        const { ctx } = this;
        const { x, y, width, height } = box;
        const sx = x + width - 15;
        const sy = y + height - 15;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx), npx(sy));
        ctx.lineTo(npx(sx + 8), npx(sy));
        ctx.lineTo(npx(sx + 4), npx(sy + 6));
        ctx.closePath();
        ctx.fillStyle = 'rgba(0, 0, 0, .45)';
        ctx.fill();
        ctx.restore();
    }
    error(box) {
        const { ctx } = this;
        const { x, y, width } = box;
        const sx = x + width - 1;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx - 8), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y + 8));
        ctx.closePath();
        ctx.fillStyle = 'rgba(255, 0, 0, .65)';
        ctx.fill();
        ctx.restore();
    }
    frozen(box) {
        const { ctx } = this;
        const { x, y, width } = box;
        const sx = x + width - 1;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(npx(sx - 8), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y - 1));
        ctx.lineTo(npx(sx), npx(y + 8));
        ctx.closePath();
        ctx.fillStyle = 'rgba(0, 255, 0, .85)';
        ctx.fill();
        ctx.restore();
    }
    rect(box, dtextcb) {
        const { ctx } = this;
        const { x, y, width, height, bgcolor } = box;
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = bgcolor || '#fff';
        ctx.rect(npxLine(x + 1), npxLine(y + 1), npx(width - 2), npx(height - 2));
        ctx.clip();
        ctx.fill();
        dtextcb();
        ctx.restore();
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/component/border_palette.ts":
/*!*****************************************!*\
  !*** ./src/component/border_palette.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BorderPalette)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dropdown_color */ "./src/component/dropdown_color.ts");
/* harmony import */ var _dropdown_linetype__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dropdown_linetype */ "./src/component/dropdown_linetype.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./src/config.ts");





function buildTable(...trs) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '').children(...trs));
}
function buildTd(iconName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-cell`).child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](`border-${iconName}`)).on('click', () => {
        this.mode = iconName;
        const { mode, style, color } = this;
        this.change({ mode, style, color });
    }));
}
class BorderPalette {
    color;
    style;
    mode;
    change;
    ddColor;
    ddType;
    el;
    constructor() {
        this.color = '#000';
        this.style = 'thin';
        this.mode = 'all';
        this.change = () => { };
        this.ddColor = new _dropdown_color__WEBPACK_IMPORTED_MODULE_2__["default"]('line-color', this.color);
        this.ddColor.change = (color) => {
            this.color = color;
        };
        this.ddType = new _dropdown_linetype__WEBPACK_IMPORTED_MODULE_3__["default"](this.style);
        this.ddType.change = ([s]) => {
            this.style = s;
        };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette`);
        const table = buildTable((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-left`).child(buildTable((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...['all', 'inside', 'horizontal', 'vertical', 'outside'].map(it => buildTd.call(this, it))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...['left', 'top', 'right', 'bottom', 'none'].map(it => buildTd.call(this, it))))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-border-palette-right`).children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-toolbar-btn`).child(this.ddColor.el), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-toolbar-btn`).child(this.ddType.el))));
        this.el.child(table);
    }
}


/***/ }),

/***/ "./src/component/bottombar.ts":
/*!************************************!*\
  !*** ./src/component/bottombar.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Bottombar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _form_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./form_input */ "./src/component/form_input.ts");
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");







class DropdownMore extends _dropdown__WEBPACK_IMPORTED_MODULE_5__["default"] {
    contentClick;
    constructor(click) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_3__["default"]('ellipsis');
        super(icon, 'auto', false, 'top-left');
        this.contentClick = click;
    }
    reset(items) {
        const eles = items.map((it, i) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
            .css('width', '150px')
            .css('font-weight', 'normal')
            .on('click', () => {
            this.contentClick(i);
            this.hide();
        })
            .child(it));
        this.setContentChildren(...eles);
    }
    setTitle() { }
}
const menuItems = [{ key: 'delete', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.tf)('contextmenu.deleteSheet') }];
function buildMenuItem(item) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
        .child(item.title())
        .on('click', () => {
        this.itemClick(item.key);
        this.hide();
    });
}
function buildMenu() {
    return menuItems.map((it) => buildMenuItem.call(this, it));
}
class ContextMenu {
    el;
    itemClick;
    constructor() {
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-contextmenu`)
            .css('width', '160px')
            .children(...buildMenu.call(this))
            .hide();
        this.itemClick = () => { };
    }
    hide() {
        const { el } = this;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(el);
    }
    setOffset(offset) {
        const { el } = this;
        el.offset(offset);
        el.show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el);
    }
}
class Bottombar {
    swapFunc;
    updateFunc;
    dataNames;
    activeEl;
    deleteEl;
    items;
    moreEl;
    contextMenu;
    el;
    menuEl;
    constructor(addFunc = () => { }, swapFunc = (index) => { }, deleteFunc = () => { }, updateFunc = (index, value) => { }) {
        this.swapFunc = swapFunc;
        this.updateFunc = updateFunc;
        this.dataNames = [];
        this.activeEl = null;
        this.deleteEl = null;
        this.items = [];
        this.moreEl = new DropdownMore((i) => {
            this.clickSwap2(this.items[i]);
        });
        this.contextMenu = new ContextMenu();
        this.contextMenu.itemClick = deleteFunc;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-bottombar`).children(this.contextMenu.el, (this.menuEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('ul', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-menu`).child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('li', '').children(new _icon__WEBPACK_IMPORTED_MODULE_3__["default"]('add').on('click', () => {
            addFunc();
        }), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('span', '').child(this.moreEl)))));
    }
    addItem(name, active, options) {
        this.dataNames.push(name);
        const item = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('li', active ? 'active' : '').child(name);
        item
            .on('click', () => {
            this.clickSwap2(item);
        })
            .on('contextmenu', (evt) => {
            if (options.mode === 'read')
                return;
            const { offsetLeft, offsetHeight } = evt.target;
            this.contextMenu.setOffset({
                left: offsetLeft,
                bottom: offsetHeight + 1,
            });
            this.deleteEl = item;
        })
            .on('dblclick', () => {
            if (options.mode === 'read')
                return;
            const v = item.html();
            const input = new _form_input__WEBPACK_IMPORTED_MODULE_4__["default"]('auto', '');
            input.val(v);
            input.input.on('blur', ({ target }) => {
                const { value } = target;
                const nindex = this.dataNames.findIndex((it) => it === v);
                this.renameItem(nindex, value);
                /*
              this.dataNames.splice(nindex, 1, value);
              this.moreEl.reset(this.dataNames);
              item.html('').child(value);
              this.updateFunc(nindex, value);
              */
            });
            item.html('').child(input.el);
            input.focus();
        });
        if (active) {
            this.clickSwap(item);
        }
        this.items.push(item);
        this.menuEl.child(item);
        this.moreEl.reset(this.dataNames);
    }
    renameItem(index, value) {
        this.dataNames.splice(index, 1, value);
        this.moreEl.reset(this.dataNames);
        this.items[index].html('').child(value);
        this.updateFunc(index, value);
    }
    clear() {
        this.items.forEach((it) => {
            this.menuEl.removeChild(it.el);
        });
        this.items = [];
        this.dataNames = [];
        this.moreEl.reset(this.dataNames);
    }
    deleteItem() {
        const { activeEl, deleteEl } = this;
        if (this.items.length > 1) {
            const index = this.items.findIndex((it) => it === deleteEl);
            this.items.splice(index, 1);
            this.dataNames.splice(index, 1);
            this.menuEl.removeChild(deleteEl.el);
            this.moreEl.reset(this.dataNames);
            if (activeEl === deleteEl) {
                const [f] = this.items;
                this.activeEl = f;
                this.activeEl.toggle();
                return [index, 0];
            }
            return [index, -1];
        }
        return [-1];
    }
    clickSwap2(item) {
        const index = this.items.findIndex((it) => it === item);
        this.clickSwap(item);
        this.activeEl.toggle();
        this.swapFunc(index);
    }
    clickSwap(item) {
        if (this.activeEl !== null) {
            this.activeEl.toggle();
        }
        this.activeEl = item;
    }
}


/***/ }),

/***/ "./src/component/button.ts":
/*!*********************************!*\
  !*** ./src/component/button.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Button)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



class Button extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    // type: primary
    constructor(title, type = '') {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-button ${type}`);
        this.child((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)(`button.${title}`));
    }
}


/***/ }),

/***/ "./src/component/calendar.ts":
/*!***********************************!*\
  !*** ./src/component/calendar.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Calendar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



function addMonth(date, step) {
    date.setMonth(date.getMonth() + step);
}
function weekday(date, index) {
    const d = new Date(date);
    d.setDate(index - date.getDay() + 1);
    return d;
}
function monthDays(year, month, cdate) {
    // the first day of month
    const startDate = new Date(year, month, 1, 23, 59, 59);
    const datess = [[], [], [], [], [], []];
    for (let i = 0; i < 6; i += 1) {
        for (let j = 0; j < 7; j += 1) {
            const index = i * 7 + j;
            const d = weekday(startDate, index);
            const disabled = d.getMonth() !== month;
            // console.log('d:', d, ', cdate:', cdate);
            const active = d.getMonth() === cdate.getMonth() && d.getDate() === cdate.getDate();
            datess[i][j] = { d, disabled, active };
        }
    }
    return datess;
}
class Calendar {
    value;
    cvalue;
    headerLeftEl;
    bodyEl;
    el;
    selectChange;
    constructor(value) {
        this.value = value;
        this.cvalue = new Date(value);
        this.headerLeftEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header-left');
        this.bodyEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '');
        this.buildAll();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'x-spreadsheet-calendar').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header').children(this.headerLeftEl, (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'calendar-header-right').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('a', 'calendar-prev')
            .on('click.stop', () => this.prev())
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('chevron-left')), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('a', 'calendar-next')
            .on('click.stop', () => this.next())
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('chevron-right')))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', 'calendar-body').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('thead', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...(0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('calendar.weeks').map((week) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('th', 'cell').child(week)))), this.bodyEl));
        this.selectChange = () => { };
    }
    setValue(value) {
        this.value = value;
        this.cvalue = new Date(value);
        this.buildAll();
    }
    prev() {
        const { value } = this;
        addMonth(value, -1);
        this.buildAll();
    }
    next() {
        const { value } = this;
        addMonth(value, 1);
        this.buildAll();
    }
    buildAll() {
        this.buildHeaderLeft();
        this.buildBody();
    }
    buildHeaderLeft() {
        const { value } = this;
        this.headerLeftEl.html(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('calendar.months')[value.getMonth()]} ${value.getFullYear()}`);
    }
    buildBody() {
        const { value, cvalue, bodyEl } = this;
        const mDays = monthDays(value.getFullYear(), value.getMonth(), cvalue);
        const trs = mDays.map((it) => {
            const tds = it.map((it1) => {
                let cls = 'cell';
                if (it1.disabled)
                    cls += ' disabled';
                if (it1.active)
                    cls += ' active';
                return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', cls)
                    .on('click.stop', () => {
                    this.selectChange(it1.d);
                })
                    .child(it1.d.getDate().toString()));
            });
            return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', '').children(...tds);
        });
        bodyEl.html('').children(...trs);
    }
}


/***/ }),

/***/ "./src/component/color_palette.ts":
/*!****************************************!*\
  !*** ./src/component/color_palette.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ColorPalette)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


const themeColorPlaceHolders = ['#ffffff', '#000100', '#e7e5e6', '#445569', '#5b9cd6', '#ed7d31', '#a5a5a5', '#ffc001', '#4371c6', '#71ae47'];
const themeColors = [
    ['#f2f2f2', '#7f7f7f', '#d0cecf', '#d5dce4', '#deeaf6', '#fce5d5', '#ededed', '#fff2cd', '#d9e2f3', '#e3efd9'],
    ['#d8d8d8', '#595959', '#afabac', '#adb8ca', '#bdd7ee', '#f7ccac', '#dbdbdb', '#ffe59a', '#b3c6e7', '#c5e0b3'],
    ['#bfbfbf', '#3f3f3f', '#756f6f', '#8596b0', '#9cc2e6', '#f4b184', '#c9c9c9', '#fed964', '#8eaada', '#a7d08c'],
    ['#a5a5a5', '#262626', '#3a3839', '#333f4f', '#2e75b5', '#c45a10', '#7b7b7b', '#bf8e01', '#2f5596', '#538136'],
    ['#7f7f7f', '#0c0c0c', '#171516', '#222a35', '#1f4e7a', '#843c0a', '#525252', '#7e6000', '#203864', '#365624'],
];
const standardColors = ['#c00000', '#fe0000', '#fdc101', '#ffff01', '#93d051', '#00b04e', '#01b0f1', '#0170c1', '#012060', '#7030a0'];
function buildTd(bgcolor) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('td', '').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-color-palette-cell`)
        .on('click.stop', () => this.change(bgcolor))
        .css('background-color', bgcolor));
}
class ColorPalette {
    el;
    change;
    constructor() {
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-color-palette`);
        this.change = () => { };
        const table = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('table', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tbody', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-theme-color-placeholders`).children(...themeColorPlaceHolders.map(color => buildTd.call(this, color))), ...themeColors.map(it => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-theme-colors`).children(...it.map(color => buildTd.call(this, color)))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('tr', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-standard-colors`).children(...standardColors.map(color => buildTd.call(this, color)))));
        this.el.child(table);
    }
}


/***/ }),

/***/ "./src/component/contextmenu.ts":
/*!**************************************!*\
  !*** ./src/component/contextmenu.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ContextMenu)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");




const menuItems = [
    { key: 'copy', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.copy'), label: 'Ctrl+C' },
    { key: 'cut', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cut'), label: 'Ctrl+X' },
    { key: 'paste', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.paste'), label: 'Ctrl+V' },
    { key: 'paste-value', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.pasteValue'), label: 'Ctrl+Shift+V' },
    { key: 'paste-format', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.pasteFormat'), label: 'Ctrl+Alt+V' },
    { key: 'divider' },
    { key: 'insert-row', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.insertRow') },
    { key: 'insert-column', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.insertColumn') },
    { key: 'divider' },
    { key: 'delete-row', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteRow') },
    { key: 'delete-column', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteColumn') },
    { key: 'delete-cell-text', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.deleteCellText') },
    { key: 'hide', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.hide') },
    { key: 'divider' },
    { key: 'validation', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.validation') },
    { key: 'divider' },
    { key: 'cell-printable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellprintable') },
    { key: 'cell-non-printable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellnonprintable') },
    { key: 'divider' },
    { key: 'cell-editable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.celleditable') },
    { key: 'cell-non-editable', title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.tf)('contextmenu.cellnoneditable') },
];
function buildMenuItem(item) {
    if (item.key === 'divider') {
        return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item divider`);
    }
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
        .on('click', () => {
        this.itemClick(item.key);
        this.hide();
    })
        .children(item.title(), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').child(item.label || ''));
}
function buildMenu() {
    return menuItems.map(it => buildMenuItem.call(this, it));
}
class ContextMenu {
    menuItems;
    el;
    viewFn;
    itemClick;
    isHide;
    constructor(viewFn, isHide = false) {
        this.menuItems = buildMenu.call(this);
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-contextmenu`)
            .children(...this.menuItems)
            .hide();
        this.viewFn = viewFn;
        this.itemClick = () => { };
        this.isHide = isHide;
        this.setMode('range');
    }
    // row-col: the whole rows or the whole cols
    // range: select range
    setMode(mode) {
        const hideEl = this.menuItems[12];
        if (mode === 'row-col') {
            hideEl.show();
        }
        else {
            hideEl.hide();
        }
    }
    hide() {
        const { el } = this;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(el);
    }
    setPosition(x, y) {
        if (this.isHide)
            return;
        const { el } = this;
        const { width } = el.show().offset();
        const view = this.viewFn();
        const vhf = view.height / 2;
        let left = x;
        if (view.width - x <= width) {
            left -= width;
        }
        el.css('left', `${left}px`);
        if (y > vhf) {
            el.css('bottom', `${view.height - y}px`)
                .css('max-height', `${y}px`)
                .css('top', 'auto');
        }
        else {
            el.css('top', `${y}px`)
                .css('max-height', `${view.height - y}px`)
                .css('bottom', 'auto');
        }
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el);
    }
}


/***/ }),

/***/ "./src/component/datepicker.ts":
/*!*************************************!*\
  !*** ./src/component/datepicker.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Datepicker)
/* harmony export */ });
/* harmony import */ var _calendar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendar */ "./src/component/calendar.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class Datepicker {
    calendar;
    el;
    constructor() {
        this.calendar = new _calendar__WEBPACK_IMPORTED_MODULE_0__["default"](new Date());
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-datepicker`)
            .child(this.calendar.el)
            .hide();
    }
    setValue(date) {
        // console.log(':::::::', date, typeof date, date instanceof string);
        const { calendar } = this;
        if (typeof date === 'string') {
            // console.log(/^\d{4}-\d{1,2}-\d{1,2}$/.test(date));
            if (/^\d{4}-\d{1,2}-\d{1,2}$/.test(date)) {
                calendar.setValue(new Date(date.replace(new RegExp('-', 'g'), '/')));
            }
        }
        else if (date instanceof Date) {
            calendar.setValue(date);
        }
        return this;
    }
    change(cb) {
        this.calendar.selectChange = (d) => {
            cb(d);
            this.hide();
        };
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown.ts":
/*!***********************************!*\
  !*** ./src/component/dropdown.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Dropdown)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class Dropdown extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    title;
    headerClick;
    contentEl;
    headerEl;
    change;
    constructor(title, width, showArrow, placement, ...children) {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown ${placement}`);
        this.title = title;
        // this.change = () => {};
        this.headerClick = () => { };
        if (typeof title === 'string') {
            this.title = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-title`).child(title);
        }
        else if (showArrow) {
            this.title.addClass('arrow-left');
        }
        this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-content`)
            .css('width', width)
            .hide();
        this.setContentChildren(...children);
        this.headerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dropdown-header`);
        this.headerEl
            .on('click', () => {
            if (this.contentEl.css('display') !== 'block') {
                this.show();
            }
            else {
                this.hide();
            }
        })
            .children(this.title, showArrow
            ? (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-icon arrow-right`).child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-icon-img arrow-down`))
            : '');
    }
    setContentChildren(...children) {
        this.contentEl.html('');
        if (children.length > 0) {
            this.contentEl.children(...children);
        }
    }
    setTitle(title) {
        this.title.html(title);
        this.hide();
    }
    show() {
        const { contentEl } = this;
        contentEl.show();
        // this.parent().active();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(this.parent(), () => {
            this.hide();
        });
        return this;
    }
    parent() {
        return this;
    }
    hide() {
        this.parent().active(false);
        this.contentEl.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(this.parent());
        return this;
    }
}


/***/ }),

/***/ "./src/component/dropdown_align.ts":
/*!*****************************************!*\
  !*** ./src/component/dropdown_align.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownAlign)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




function buildItemWithIcon(iconName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`).child(new _icon__WEBPACK_IMPORTED_MODULE_2__["default"](iconName));
}
class DropdownAlign extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(aligns, align) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_2__["default"](`align-${align}`);
        const naligns = aligns.map((it) => buildItemWithIcon(`align-${it}`).on('click', () => {
            this.setTitle(it);
            this.change(it);
        }));
        super(icon, 'auto', true, 'bottom-left', ...naligns);
    }
    setTitle(align) {
        this.title.setName(`align-${align}`);
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_border.ts":
/*!******************************************!*\
  !*** ./src/component/dropdown_border.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownBorder)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _border_palette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./border_palette */ "./src/component/border_palette.ts");



class DropdownBorder extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('border-all');
        const borderPalette = new _border_palette__WEBPACK_IMPORTED_MODULE_2__["default"]();
        borderPalette.change = (v) => {
            this.change(v);
            this.hide();
        };
        super(icon, 'auto', false, 'bottom-left', borderPalette.el);
    }
}


/***/ }),

/***/ "./src/component/dropdown_color.ts":
/*!*****************************************!*\
  !*** ./src/component/dropdown_color.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownColor)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _color_palette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./color_palette */ "./src/component/color_palette.ts");



class DropdownColor extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(iconName, color) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](iconName)
            .css('height', '16px')
            .css('border-bottom', `3px solid ${color}`);
        const colorPalette = new _color_palette__WEBPACK_IMPORTED_MODULE_2__["default"]();
        colorPalette.change = (v) => {
            this.setTitle(v);
            this.change(v);
        };
        super(icon, 'auto', false, 'bottom-left', colorPalette.el);
    }
    setTitle(color) {
        this.title.css('border-color', color);
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_font.ts":
/*!****************************************!*\
  !*** ./src/component/dropdown_font.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFont)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




class DropdownFont extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nfonts = _core_font__WEBPACK_IMPORTED_MODULE_2__.baseFonts.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`)
            .on('click', () => {
            this.setTitle(it.title);
            this.change(it);
        })
            .child(it.title));
        super(_core_font__WEBPACK_IMPORTED_MODULE_2__.baseFonts[0].title, '160px', true, 'bottom-left', ...nfonts);
    }
}


/***/ }),

/***/ "./src/component/dropdown_fontsize.ts":
/*!********************************************!*\
  !*** ./src/component/dropdown_fontsize.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFontSize)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




class DropdownFontSize extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nfontSizes = _core_font__WEBPACK_IMPORTED_MODULE_2__.fontSizes.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item`)
            .on('click', () => {
            this.setTitle(`${it.pt}`);
            this.change(it);
        })
            .child(`${it.pt}`));
        super('10', '60px', true, 'bottom-left', ...nfontSizes);
    }
}


/***/ }),

/***/ "./src/component/dropdown_format.ts":
/*!******************************************!*\
  !*** ./src/component/dropdown_format.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFormat)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/format */ "./src/core/format.ts");
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");




class DropdownFormat extends _dropdown__WEBPACK_IMPORTED_MODULE_2__["default"] {
    constructor() {
        let nformats = _core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats.slice(0);
        nformats.splice(2, 0, { key: 'divider' });
        nformats.splice(8, 0, { key: 'divider' });
        nformats = nformats.map((it) => {
            const item = (0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-item`);
            if (it.key === 'divider') {
                item.addClass('divider');
            }
            else {
                item.child(it.title()).on('click', () => {
                    this.setTitle(it.title());
                    this.change(it);
                });
                if (it.label)
                    item.child((0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', 'label').html(it.label));
            }
            return item;
        });
        super('Normal', '220px', true, 'bottom-left', ...nformats);
    }
    setTitle(key) {
        for (let i = 0; i < _core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats.length; i += 1) {
            if (_core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats[i].key === key) {
                this.title.html(_core_format__WEBPACK_IMPORTED_MODULE_1__.baseFormats[i].title());
            }
        }
        this.hide();
    }
}


/***/ }),

/***/ "./src/component/dropdown_formula.ts":
/*!*******************************************!*\
  !*** ./src/component/dropdown_formula.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownFormula)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./src/config.ts");





class DropdownFormula extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        const nformulas = _core_formula__WEBPACK_IMPORTED_MODULE_3__.baseFormulas.map((it) => (0,_element__WEBPACK_IMPORTED_MODULE_2__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_4__.cssPrefix}-item`)
            .on('click', () => {
            this.hide();
            this.change(it);
        })
            .child(it.key));
        super(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('formula'), '180px', true, 'bottom-left', ...nformulas);
    }
}


/***/ }),

/***/ "./src/component/dropdown_linetype.ts":
/*!********************************************!*\
  !*** ./src/component/dropdown_linetype.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DropdownLineType)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");




const lineTypes = [
    [
        'thin',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'medium',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="2" style="user-select: none;"><line x1="0" y1="1.0" x2="50" y2="1.0" stroke-width="2" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'thick',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="1.5" x2="50" y2="1.5" stroke-width="3" stroke="black" style="user-select: none;"></line></svg>',
    ],
    [
        'dashed',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="2" style="user-select: none;"></line></svg>',
    ],
    [
        'dotted',
        '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="1" style="user-select: none;"></line></svg>',
    ],
    // ['double', '<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line><line x1="0" y1="2.5" x2="50" y2="2.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>'],
];
class DropdownLineType extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(type) {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_2__["default"]('line-type');
        let beforei = 0;
        const lineTypeEls = lineTypes.map((it, iti) => (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item state ${type === it[0] ? 'checked' : ''}`)
            .on('click', () => {
            lineTypeEls[beforei].toggle('checked');
            lineTypeEls[iti].toggle('checked');
            beforei = iti;
            this.hide();
            this.change(it);
        })
            .child((0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-line-type`).html(it[1])));
        super(icon, 'auto', false, 'bottom-left', ...lineTypeEls);
    }
}


/***/ }),

/***/ "./src/component/editor.ts":
/*!*********************************!*\
  !*** ./src/component/editor.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Editor)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _suggest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./suggest */ "./src/component/suggest.ts");
/* harmony import */ var _datepicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./datepicker */ "./src/component/datepicker.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");
//* global window */




function resetTextareaSize() {
    const { inputText } = this;
    if (!/^\s*$/.test(inputText)) {
        const { textlineEl, textEl, areaOffset } = this;
        const txts = inputText.split('\n');
        const maxTxtSize = Math.max(...txts.map((it) => it.length));
        const tlOffset = textlineEl.offset();
        const fontWidth = tlOffset.width / inputText.length;
        const tlineWidth = (maxTxtSize + 1) * fontWidth + 5;
        const maxWidth = this.viewFn().width - areaOffset.left - fontWidth;
        let h1 = txts.length;
        if (tlineWidth > areaOffset.width) {
            let twidth = tlineWidth;
            if (tlineWidth > maxWidth) {
                twidth = maxWidth;
                h1 += Math.floor(tlineWidth / maxWidth);
                h1 += tlineWidth % maxWidth > 0 ? 1 : 0;
            }
            textEl.css('width', `${twidth}px`);
        }
        h1 *= this.rowHeight;
        if (h1 > areaOffset.height) {
            textEl.css('height', `${h1}px`);
        }
    }
}
function insertText({ target }, itxt) {
    const { value, selectionEnd } = target;
    const ntxt = `${value.slice(0, selectionEnd)}${itxt}${value.slice(selectionEnd)}`;
    target.value = ntxt;
    target.setSelectionRange(selectionEnd + 1, selectionEnd + 1);
    this.inputText = ntxt;
    this.textlineEl.html(ntxt);
    resetTextareaSize.call(this);
}
function keydownEventHandler(evt) {
    const { keyCode, altKey } = evt;
    if (keyCode !== 13 && keyCode !== 9)
        evt.stopPropagation();
    if (keyCode === 13 && altKey) {
        insertText.call(this, evt, '\n');
        evt.stopPropagation();
    }
    if (keyCode === 13 && !altKey)
        evt.preventDefault();
}
function inputEventHandler(evt) {
    const v = evt.target.value;
    // console.log(evt, 'v:', v);
    const { suggest, textlineEl, validator } = this;
    const { cell } = this;
    if (cell !== null) {
        if (('editable' in cell && cell.editable === true) ||
            cell.editable === undefined) {
            this.inputText = v;
            if (validator) {
                if (validator.type === 'list') {
                    suggest.search(v);
                }
                else {
                    suggest.hide();
                }
            }
            else {
                const start = v.lastIndexOf('=');
                if (start !== -1) {
                    suggest.search(v.substring(start + 1));
                }
                else {
                    suggest.hide();
                }
            }
            textlineEl.html(v);
            resetTextareaSize.call(this);
            this.change('input', v);
        }
        else {
            evt.target.value = cell.text || '';
        }
    }
    else {
        this.inputText = v;
        if (validator) {
            if (validator.type === 'list') {
                suggest.search(v);
            }
            else {
                suggest.hide();
            }
        }
        else {
            const start = v.lastIndexOf('=');
            if (start !== -1) {
                suggest.search(v.substring(start + 1));
            }
            else {
                suggest.hide();
            }
        }
        textlineEl.html(v);
        resetTextareaSize.call(this);
        this.change('input', v);
    }
}
function setTextareaRange(position) {
    const { el } = this.textEl;
    setTimeout(() => {
        el.focus();
        el.setSelectionRange(position, position);
    }, 0);
}
function setText(text, position) {
    const { textEl, textlineEl } = this;
    // firefox bug
    textEl.el.blur();
    textEl.val(text);
    textlineEl.html(text);
    setTextareaRange.call(this, position);
}
function suggestItemClick(it) {
    const { inputText, validator } = this;
    let position = 0;
    if (validator && validator.type === 'list') {
        this.inputText = it;
        position = this.inputText.length;
    }
    else {
        const start = inputText.lastIndexOf('=');
        const sit = inputText.substring(0, start + 1);
        let eit = inputText.substring(start + 1);
        if (eit.indexOf(')') !== -1) {
            eit = eit.substring(eit.indexOf(')'));
        }
        else {
            eit = '';
        }
        this.inputText = `${sit + it.key}(`;
        // console.log('inputText:', this.inputText);
        position = this.inputText.length;
        this.inputText += `)${eit}`;
    }
    setText.call(this, this.inputText, position);
}
function resetSuggestItems() {
    this.suggest.setItems(this.formulas);
}
function dateFormat(d) {
    let month = d.getMonth() + 1;
    let date = d.getDate();
    if (month < 10)
        month = `0${month}`;
    if (date < 10)
        date = `0${date}`;
    return `${d.getFullYear()}-${month}-${date}`;
}
class Editor {
    viewFn;
    rowHeight;
    formulas;
    suggest;
    datepicker;
    areaEl;
    textEl;
    textlineEl;
    el;
    areaOffset;
    freeze;
    cell;
    inputText;
    change;
    validator;
    constructor(formulas, viewFn, rowHeight) {
        this.viewFn = viewFn;
        this.rowHeight = rowHeight;
        this.formulas = formulas;
        this.suggest = new _suggest__WEBPACK_IMPORTED_MODULE_1__["default"](formulas, (it) => {
            suggestItemClick.call(this, it);
        });
        this.datepicker = new _datepicker__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.datepicker.change((d) => {
            // console.log('d:', d);
            this.setText(dateFormat(d));
            this.clear();
        });
        this.areaEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-editor-area`)
            .children((this.textEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('textarea', '')
            .on('input', (evt) => inputEventHandler.call(this, evt))
            .on('paste.stop', () => { })
            .on('keydown', (evt) => keydownEventHandler.call(this, evt))), (this.textlineEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'textline')), this.suggest.el, this.datepicker.el)
            .on('mousemove.stop', () => { })
            .on('mousedown.stop', () => { });
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-editor`).child(this.areaEl).hide();
        this.suggest.bindInputEvents(this.textEl);
        this.areaOffset = null;
        this.freeze = { w: 0, h: 0 };
        this.cell = null;
        this.inputText = '';
        this.change = () => { };
    }
    setFreezeLengths(width, height) {
        this.freeze.w = width;
        this.freeze.h = height;
    }
    clear() {
        // const { cell } = this;
        // const cellText = (cell && cell.text) || '';
        if (this.inputText !== '') {
            this.change('finished', this.inputText);
        }
        this.cell = null;
        this.areaOffset = null;
        this.inputText = '';
        this.el.hide();
        this.textEl.val('');
        this.textlineEl.html('');
        resetSuggestItems.call(this);
        this.datepicker.hide();
    }
    setOffset(offset, suggestPosition = 'top') {
        const { textEl, areaEl, suggest, freeze, el } = this;
        if (offset) {
            this.areaOffset = offset;
            const { left, top, width, height, l, t } = offset;
            // console.log('left:', left, ',top:', top, ', freeze:', freeze);
            const elOffset = { left: 0, top: 0 };
            // top left
            if (freeze.w > l && freeze.h > t) {
                //
            }
            else if (freeze.w < l && freeze.h < t) {
                elOffset.left = freeze.w;
                elOffset.top = freeze.h;
            }
            else if (freeze.w > l) {
                elOffset.top = freeze.h;
            }
            else if (freeze.h > t) {
                elOffset.left = freeze.w;
            }
            el.offset(elOffset);
            areaEl.offset({
                left: left - elOffset.left - 0.8,
                top: top - elOffset.top - 0.8,
            });
            textEl.offset({ width: width - 9 + 0.8, height: height - 3 + 0.8 });
            const sOffset = { left: 0 };
            sOffset[suggestPosition] = height;
            suggest.setOffset(sOffset);
            suggest.hide();
        }
    }
    setCell(cell, validator) {
        if (cell && cell.editable === false)
            return;
        // console.log('::', validator);
        const { el, datepicker, suggest } = this;
        el.show();
        this.cell = cell;
        const text = (cell && cell.text) || '';
        this.setText(text);
        this.validator = validator;
        if (validator) {
            const { type } = validator;
            if (type === 'date') {
                datepicker.show();
                if (!/^\s*$/.test(text)) {
                    datepicker.setValue(text);
                }
            }
            if (type === 'list') {
                suggest.setItems(validator.values());
                suggest.search('');
            }
        }
    }
    setText(text) {
        this.inputText = text;
        // console.log('text>>:', text);
        setText.call(this, text, text.length);
        resetTextareaSize.call(this);
    }
}


/***/ }),

/***/ "./src/component/element.ts":
/*!**********************************!*\
  !*** ./src/component/element.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Element": () => (/* binding */ Element),
/* harmony export */   "h": () => (/* binding */ h)
/* harmony export */ });
class Element {
    el;
    constructor(tag, className = '') {
        if (typeof tag === 'string') {
            this.el = document.createElement(tag);
            this.el.className = className;
        }
        else {
            this.el = tag;
        }
        // this.data = {};
    }
    data(key, value) {
        if (value !== undefined) {
            this.data[key] = value;
            return this;
        }
        return this.data[key];
    }
    on(eventNames, handler) {
        const [fen, ...oen] = eventNames.split('.');
        let eventName = fen;
        if (eventName === 'mousewheel' &&
            /Firefox/i.test(window.navigator.userAgent)) {
            eventName = 'DOMMouseScroll';
        }
        this.el.addEventListener(eventName, (evt) => {
            handler(evt);
            for (let i = 0; i < oen.length; i += 1) {
                const k = oen[i];
                if (k === 'left' && evt instanceof MouseEvent && evt.button !== 0) {
                    return;
                }
                if (k === 'right' && evt instanceof MouseEvent && evt.button !== 2) {
                    return;
                }
                if (k === 'stop') {
                    evt.stopPropagation();
                }
            }
        });
        return this;
    }
    offset(value) {
        if (value !== undefined) {
            Object.keys(value).forEach((k) => {
                this.css(k, `${value[k]}px`);
            });
            return this;
        }
        const { offsetTop, offsetLeft, offsetHeight, offsetWidth } = this.el;
        return {
            top: offsetTop,
            left: offsetLeft,
            height: offsetHeight,
            width: offsetWidth,
        };
    }
    scroll(v) {
        const { el } = this;
        if (v !== undefined) {
            if (v.left !== undefined) {
                el.scrollLeft = v.left;
            }
            if (v.top !== undefined) {
                el.scrollTop = v.top;
            }
        }
        return { left: el.scrollLeft, top: el.scrollTop };
    }
    box() {
        return this.el.getBoundingClientRect();
    }
    parent() {
        const parent = this.el.parentElement;
        return new Element(parent);
    }
    children(...eles) {
        if (arguments.length === 0) {
            return Array.from(this.el.children);
        }
        eles.forEach((ele) => this.child(ele));
        return this;
    }
    removeChild(el) {
        this.el.removeChild(el);
    }
    /*
    first() {
      return this.el.firstChild;
    }
  
    last() {
      return this.el.lastChild;
    }
  
    remove(ele) {
      return this.el.removeChild(ele);
    }
  
    prepend(ele) {
      const { el } = this;
      if (el.children.length > 0) {
        el.insertBefore(ele, el.firstChild);
      } else {
        el.appendChild(ele);
      }
      return this;
    }
  
    prev() {
      return this.el.previousSibling;
    }
  
    next() {
      return this.el.nextSibling;
    }
    */
    child(arg) {
        let ele;
        if (typeof arg === 'string') {
            ele = document.createTextNode(arg);
        }
        else if (arg instanceof Element) {
            ele = arg.el;
        }
        else {
            ele = arg;
        }
        this.el.appendChild(ele);
        return this;
    }
    contains(ele) {
        return this.el.contains(ele);
    }
    className(v) {
        if (v !== undefined) {
            this.el.className = v;
            return this;
        }
        return this.el.className;
    }
    addClass(name) {
        this.el.classList.add(name);
        return this;
    }
    hasClass(name) {
        return this.el.classList.contains(name);
    }
    removeClass(name) {
        this.el.classList.remove(name);
        return this;
    }
    toggle(cls = 'active') {
        return this.toggleClass(cls);
    }
    toggleClass(name) {
        return this.el.classList.toggle(name);
    }
    active(flag = true, cls = 'active') {
        if (flag)
            this.addClass(cls);
        else
            this.removeClass(cls);
        return this;
    }
    checked(flag = true) {
        this.active(flag, 'checked');
        return this;
    }
    disabled(flag = true) {
        if (flag)
            this.addClass('disabled');
        else
            this.removeClass('disabled');
        return this;
    }
    attr(key, value) {
        if (value !== undefined) {
            this.el.setAttribute(key, value);
        }
        else {
            if (typeof key === 'string') {
                return this.el.getAttribute(key);
            }
            Object.keys(key).forEach((k) => {
                this.el.setAttribute(k, key[k]);
            });
        }
        return this;
    }
    removeAttr(key) {
        this.el.removeAttribute(key);
        return this;
    }
    html(content) {
        if (content !== undefined) {
            this.el.innerHTML = content;
            return this;
        }
        return this.el.innerHTML;
    }
    val(v) {
        const el = this.el;
        if (v !== undefined) {
            el.value = v;
            return this;
        }
        return el.value;
    }
    focus() {
        this.el.focus();
    }
    cssRemoveKeys(...keys) {
        keys.forEach((k) => this.el.style.removeProperty(k));
        return this;
    }
    css(name, value) {
        if (value === undefined && typeof name !== 'string') {
            Object.keys(name).forEach((k) => {
                this.el.style[k] = name[k];
            });
            return this;
        }
        if (value !== undefined) {
            this.el.style[name] = value;
            return this;
        }
        return this.el.style[name];
    }
    computedStyle() {
        return window.getComputedStyle(this.el, null);
    }
    show() {
        this.css('display', 'block');
        return this;
    }
    hide() {
        this.css('display', 'none');
        return this;
    }
}
const h = (tag, className = '') => new Element(tag, className);



/***/ }),

/***/ "./src/component/event.ts":
/*!********************************!*\
  !*** ./src/component/event.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bind": () => (/* binding */ bind),
/* harmony export */   "bindClickoutside": () => (/* binding */ bindClickoutside),
/* harmony export */   "bindTouch": () => (/* binding */ bindTouch),
/* harmony export */   "createEventEmitter": () => (/* binding */ createEventEmitter),
/* harmony export */   "mouseMoveUp": () => (/* binding */ mouseMoveUp),
/* harmony export */   "unbind": () => (/* binding */ unbind),
/* harmony export */   "unbindClickoutside": () => (/* binding */ unbindClickoutside)
/* harmony export */ });
/* global window */
function bind(target, name, fn) {
    target.addEventListener(name, fn);
}
function unbind(target, name, fn) {
    target.removeEventListener(name, fn);
}
function unbindClickoutside(el) {
    if (el.xclickoutside) {
        unbind(window.document.body, 'click', el.xclickoutside);
        delete el.xclickoutside;
    }
}
// the left mouse button: mousedown → mouseup → click
// the right mouse button: mousedown → contenxtmenu → mouseup
// the right mouse button in firefox(>65.0): mousedown → contenxtmenu → mouseup → click on window
function bindClickoutside(el, cb) {
    el.xclickoutside = (evt) => {
        // ignore double click
        // console.log('evt:', evt);
        if (evt.detail === 2 || el.contains(evt.target))
            return;
        if (cb) {
            cb(el);
        }
        else {
            el.hide();
            unbindClickoutside(el);
        }
    };
    bind(window.document.body, 'click', el.xclickoutside);
}
function mouseMoveUp(target, movefunc, upfunc) {
    bind(target, 'mousemove', movefunc);
    const t = target;
    t.xEvtUp = (evt) => {
        // console.log('mouseup>>>');
        unbind(target, 'mousemove', movefunc);
        unbind(target, 'mouseup', target.xEvtUp);
        upfunc(evt);
    };
    bind(target, 'mouseup', target.xEvtUp);
}
function calTouchDirection(spanx, spany, evt, cb) {
    let direction = '';
    // console.log('spanx:', spanx, ', spany:', spany);
    if (Math.abs(spanx) > Math.abs(spany)) {
        // horizontal
        direction = spanx > 0 ? 'right' : 'left';
        cb(direction, spanx, evt);
    }
    else {
        // vertical
        direction = spany > 0 ? 'down' : 'up';
        cb(direction, spany, evt);
    }
}
// cb = (direction, distance) => {}
function bindTouch(target, { move, end }) {
    let startx = 0;
    let starty = 0;
    bind(target, 'touchstart', (evt) => {
        const { pageX, pageY } = evt.touches[0];
        startx = pageX;
        starty = pageY;
    });
    bind(target, 'touchmove', (evt) => {
        if (!move)
            return;
        const { pageX, pageY } = evt.changedTouches[0];
        const spanx = pageX - startx;
        const spany = pageY - starty;
        if (Math.abs(spanx) > 10 || Math.abs(spany) > 10) {
            // console.log('spanx:', spanx, ', spany:', spany);
            calTouchDirection(spanx, spany, evt, move);
            startx = pageX;
            starty = pageY;
        }
        evt.preventDefault();
    });
    bind(target, 'touchend', (evt) => {
        if (!end)
            return;
        const { pageX, pageY } = evt.changedTouches[0];
        const spanx = pageX - startx;
        const spany = pageY - starty;
        calTouchDirection(spanx, spany, evt, end);
    });
}
// eventemiter
function createEventEmitter() {
    const listeners = new Map();
    function on(eventName, callback) {
        const push = () => {
            const currentListener = listeners.get(eventName);
            return ((Array.isArray(currentListener) && currentListener.push(callback)) ||
                false);
        };
        const create = () => listeners.set(eventName, [].concat(callback));
        return (listeners.has(eventName) && push()) || create();
    }
    function fire(eventName, args) {
        const exec = () => {
            const currentListener = listeners.get(eventName);
            for (const callback of currentListener)
                callback.call(null, ...args);
        };
        return listeners.has(eventName) && exec();
    }
    function removeListener(eventName, callback) {
        const remove = () => {
            const currentListener = listeners.get(eventName);
            const idx = currentListener.indexOf(callback);
            return (idx >= 0 &&
                currentListener.splice(idx, 1) &&
                listeners.get(eventName).length === 0 &&
                listeners.delete(eventName));
        };
        return listeners.has(eventName) && remove();
    }
    function once(eventName, callback) {
        const execCalllback = (...args) => {
            callback.call(null, ...args);
            removeListener(eventName, execCalllback);
        };
        return on(eventName, execCalllback);
    }
    function removeAllListeners() {
        listeners.clear();
    }
    return {
        get current() {
            return listeners;
        },
        on,
        once,
        fire,
        removeListener,
        removeAllListeners,
    };
}


/***/ }),

/***/ "./src/component/form_field.ts":
/*!*************************************!*\
  !*** ./src/component/form_field.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormField)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");



const patterns = {
    number: /(^\d+$)|(^\d+(\.\d{0,4})?$)/,
    date: /^\d{4}-\d{1,2}-\d{1,2}$/,
};
// rule: { required: false, type, pattern: // }
class FormField {
    label;
    rule;
    tip;
    input;
    el;
    constructor(input, rule, label, labelWidth) {
        this.label = '';
        this.rule = rule;
        if (label) {
            this.label = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', 'label').css('width', `${labelWidth}px`).html(label);
        }
        this.tip = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'tip').child('tip').hide();
        this.input = input;
        this.input.vchange = () => this.validate();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-form-field`)
            .children(this.label, input.el, this.tip);
    }
    isShow() {
        return this.el.css('display') !== 'none';
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
        return this;
    }
    val(v) {
        return this.input.val(v);
    }
    hint(hint) {
        this.input.hint(hint);
    }
    validate() {
        const { input, rule, tip, el, } = this;
        const v = input.val();
        if (rule.required) {
            if (/^\s*$/.test(v)) {
                tip.html((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('validation.required'));
                el.addClass('error');
                return false;
            }
        }
        if (rule.type || rule.pattern) {
            const pattern = rule.pattern || patterns[rule.type];
            if (!pattern.test(v)) {
                tip.html((0,_locale_locale__WEBPACK_IMPORTED_MODULE_2__.t)('validation.notMatch'));
                el.addClass('error');
                return false;
            }
        }
        el.removeClass('error');
        return true;
    }
}


/***/ }),

/***/ "./src/component/form_input.ts":
/*!*************************************!*\
  !*** ./src/component/form_input.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormInput)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class FormInput {
    vchange;
    el;
    input;
    constructor(width, hint) {
        this.vchange = () => { };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-form-input`);
        this.input = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('input', '').css('width', width)
            .on('input', evt => this.vchange(evt))
            .attr('placeholder', hint);
        this.el.child(this.input);
    }
    focus() {
        setTimeout(() => {
            this.input.el.focus();
        }, 10);
    }
    hint(v) {
        this.input.attr('placeholder', v);
    }
    val(v) {
        return this.input.val(v);
    }
}


/***/ }),

/***/ "./src/component/form_select.ts":
/*!**************************************!*\
  !*** ./src/component/form_select.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormSelect)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _suggest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./suggest */ "./src/component/suggest.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



class FormSelect {
    key;
    getTitle;
    vchange;
    el;
    suggest;
    itemEl;
    constructor(key, items, width, getTitle = (it) => it, change = (key) => { }) {
        this.key = key;
        this.getTitle = getTitle;
        this.vchange = () => { };
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-form-select`);
        this.suggest = new _suggest__WEBPACK_IMPORTED_MODULE_1__["default"](items.map((it) => {
            return { key: it, title: this.getTitle(it) };
        }), (it) => {
            this.itemClick(it.key);
            change(it.key);
            this.vchange(it.key);
        }, width);
        this.el
            .children((this.itemEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'input-text').html(this.getTitle(key))), this.suggest.el)
            .on('click', () => this.show());
    }
    show() {
        this.suggest.search('');
    }
    itemClick(it) {
        this.key = it;
        this.itemEl.html(this.getTitle(it));
    }
    val(v) {
        if (v !== undefined) {
            this.key = v;
            this.itemEl.html(this.getTitle(v));
            return this;
        }
        return this.key;
    }
}


/***/ }),

/***/ "./src/component/icon.ts":
/*!*******************************!*\
  !*** ./src/component/icon.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Icon)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class Icon extends _element__WEBPACK_IMPORTED_MODULE_0__.Element {
    iconNameEl;
    constructor(name) {
        super('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon`);
        this.iconNameEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon-img ${name}`);
        this.child(this.iconNameEl);
    }
    setName(name) {
        this.iconNameEl.className(`${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-icon-img ${name}`);
    }
}


/***/ }),

/***/ "./src/component/message.ts":
/*!**********************************!*\
  !*** ./src/component/message.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "xtoast": () => (/* binding */ xtoast)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global document */



function xtoast(title, content) {
    const el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast`);
    const dimmer = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dimmer active`);
    const remove = () => {
        document.body.removeChild(el.el);
        document.body.removeChild(dimmer.el);
    };
    el.children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast-header`).children(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('close').on('click.stop', () => remove()), title), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toast-content`).html(content));
    document.body.appendChild(el.el);
    document.body.appendChild(dimmer.el);
    // set offset
    const { width, height } = el.box();
    const { clientHeight, clientWidth } = document.documentElement;
    el.offset({
        left: (clientWidth - width) / 2,
        top: (clientHeight - height) / 3,
    });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});


/***/ }),

/***/ "./src/component/modal.ts":
/*!********************************!*\
  !*** ./src/component/modal.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon */ "./src/component/icon.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* global document */
/* global window */




class Modal {
    title;
    el;
    dimmer;
    constructor(title, content, width = '600px') {
        this.title = title;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal`)
            .css('width', width)
            .children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal-header`).children(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"]('close').on('click.stop', () => this.hide()), this.title), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-modal-content`).children(...content))
            .hide();
    }
    show() {
        // dimmer
        this.dimmer = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-dimmer active`);
        document.body.appendChild(this.dimmer.el);
        const { width, height } = this.el.show().box();
        const { clientHeight, clientWidth } = document.documentElement;
        this.el.offset({
            left: (clientWidth - width) / 2,
            top: (clientHeight - height) / 3,
        });
        window.xkeydownEsc = (evt) => {
            if (evt.keyCode === 27) {
                this.hide();
            }
        };
        (0,_event__WEBPACK_IMPORTED_MODULE_3__.bind)(window, 'keydown', window.xkeydownEsc);
    }
    hide() {
        this.el.hide();
        document.body.removeChild(this.dimmer.el);
        (0,_event__WEBPACK_IMPORTED_MODULE_3__.unbind)(window, 'keydown', window.xkeydownEsc);
        delete window.xkeydownEsc;
    }
}


/***/ }),

/***/ "./src/component/modal_validation.ts":
/*!*******************************************!*\
  !*** ./src/component/modal_validation.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ModalValidation)
/* harmony export */ });
/* harmony import */ var _modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal */ "./src/component/modal.ts");
/* harmony import */ var _form_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form_input */ "./src/component/form_input.ts");
/* harmony import */ var _form_select__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form_select */ "./src/component/form_select.ts");
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./form_field */ "./src/component/form_field.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../config */ "./src/config.ts");








const fieldLabelWidth = 100;
class ModalValidation extends _modal__WEBPACK_IMPORTED_MODULE_0__["default"] {
    mf;
    rf;
    cf;
    of;
    minvf;
    maxvf;
    vf;
    svf;
    change;
    constructor() {
        const mf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('cell', ['cell'], // cell|row|column
        '100%', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.modeType.${it}`)), { required: true }, `${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('dataValidation.range')}:`, fieldLabelWidth);
        const rf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('120px', 'E3 or E3:F12'), {
            required: true,
            pattern: /^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/,
        });
        const cf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('list', ['list', 'number', 'date', 'phone', 'email'], '100%', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.type.${it}`), (it) => this.criteriaSelected(it)), { required: true }, `${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('dataValidation.criteria')}:`, fieldLabelWidth);
        // operator
        const of = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_select__WEBPACK_IMPORTED_MODULE_2__["default"]('be', ['be', 'nbe', 'eq', 'neq', 'lt', 'lte', 'gt', 'gte'], '160px', (it) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)(`dataValidation.operator.${it}`), (it) => this.criteriaOperatorSelected(it)), { required: true }).hide();
        // min, max
        const minvf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '10'), {
            required: true,
        }).hide();
        const maxvf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '100'), {
            required: true,
            type: 'number',
        }).hide();
        // value
        const svf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('120px', 'a,b,c'), {
            required: true,
        });
        const vf = new _form_field__WEBPACK_IMPORTED_MODULE_3__["default"](new _form_input__WEBPACK_IMPORTED_MODULE_1__["default"]('70px', '10'), {
            required: true,
            type: 'number',
        }).hide();
        super((0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('contextmenu.validation'), [
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-form-fields`).children(mf.el, rf.el),
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-form-fields`).children(cf.el, of.el, minvf.el, maxvf.el, vf.el, svf.el),
            (0,_element__WEBPACK_IMPORTED_MODULE_6__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_7__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('cancel').on('click', () => this.btnClick('cancel')), new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('remove').on('click', () => this.btnClick('remove')), new _button__WEBPACK_IMPORTED_MODULE_4__["default"]('save', 'primary').on('click', () => this.btnClick('save'))),
        ]);
        this.mf = mf;
        this.rf = rf;
        this.cf = cf;
        this.of = of;
        this.minvf = minvf;
        this.maxvf = maxvf;
        this.vf = vf;
        this.svf = svf;
        this.change = () => { };
    }
    showVf(it) {
        const hint = it === 'date' ? '2018-11-12' : '10';
        const { vf } = this;
        vf.input.hint(hint);
        vf.show();
    }
    criteriaSelected(it) {
        const { of, minvf, maxvf, vf, svf } = this;
        if (it === 'date' || it === 'number') {
            of.show();
            minvf.rule.type = it;
            maxvf.rule.type = it;
            if (it === 'date') {
                minvf.hint('2018-11-12');
                maxvf.hint('2019-11-12');
            }
            else {
                minvf.hint('10');
                maxvf.hint('100');
            }
            minvf.show();
            maxvf.show();
            vf.hide();
            svf.hide();
        }
        else {
            if (it === 'list') {
                svf.show();
            }
            else {
                svf.hide();
            }
            vf.hide();
            of.hide();
            minvf.hide();
            maxvf.hide();
        }
    }
    criteriaOperatorSelected(it) {
        if (!it)
            return;
        const { minvf, maxvf, vf } = this;
        if (it === 'be' || it === 'nbe') {
            minvf.show();
            maxvf.show();
            vf.hide();
        }
        else {
            const type = this.cf.val();
            vf.rule.type = type;
            if (type === 'date') {
                vf.hint('2018-11-12');
            }
            else {
                vf.hint('10');
            }
            vf.show();
            minvf.hide();
            maxvf.hide();
        }
    }
    btnClick(action) {
        if (action === 'cancel') {
            this.hide();
        }
        else if (action === 'remove') {
            this.change('remove');
            this.hide();
        }
        else if (action === 'save') {
            // validate
            const attrs = ['mf', 'rf', 'cf', 'of', 'svf', 'vf', 'minvf', 'maxvf'];
            for (let i = 0; i < attrs.length; i += 1) {
                const field = this[attrs[i]];
                // console.log('field:', field);
                if (field.isShow()) {
                    // console.log('it:', it);
                    if (!field.validate())
                        return;
                }
            }
            const mode = this.mf.val();
            const ref = this.rf.val();
            const type = this.cf.val();
            const operator = this.of.val();
            let value = this.svf.val();
            if (type === 'number' || type === 'date') {
                if (operator === 'be' || operator === 'nbe') {
                    value = [this.minvf.val(), this.maxvf.val()];
                }
                else {
                    value = this.vf.val();
                }
            }
            // console.log(mode, ref, type, operator, value);
            this.change('save', mode, ref, {
                type,
                operator,
                required: false,
                value,
            });
            this.hide();
        }
    }
    hide() {
        throw new Error('Method not implemented.');
    }
    // validation: { mode, ref, validator }
    setValue(v) {
        if (v) {
            const { mf, rf, cf, of, svf, vf, minvf, maxvf } = this;
            const { mode, ref, validator } = v;
            const { type, operator, value } = validator || { type: 'list' };
            mf.val(mode || 'cell');
            rf.val(ref);
            cf.val(type);
            of.val(operator);
            if (Array.isArray(value)) {
                minvf.val(value[0]);
                maxvf.val(value[1]);
            }
            else {
                svf.val(value || '');
                vf.val(value || '');
            }
            this.criteriaSelected(type);
            this.criteriaOperatorSelected(operator);
        }
        this.show();
    }
    show() {
        throw new Error('Method not implemented.');
    }
}


/***/ }),

/***/ "./src/component/print.ts":
/*!********************************!*\
  !*** ./src/component/print.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Print)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _canvas_draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../canvas/draw */ "./src/canvas/draw.ts");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./table */ "./src/component/table.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* global window document */






// resolution: 72 => 595 x 842
// 150 => 1240 x 1754
// 200 => 1654 x 2339
// 300 => 2479 x 3508
// 96 * cm / 2.54 , 96 * cm / 2.54
const PAGER_SIZES = [
    ['A3', 11.69, 16.54],
    ['A4', 8.27, 11.69],
    ['A5', 5.83, 8.27],
    ['B4', 9.84, 13.90],
    ['B5', 6.93, 9.84],
];
const PAGER_ORIENTATIONS = ['landscape', 'portrait'];
function inches2px(inc) {
    return Math.floor(96 * inc);
}
function btnClick(type) {
    if (type === 'cancel') {
        this.el.hide();
    }
    else {
        this.toPrint();
    }
}
function pagerSizeChange(evt) {
    const { paper } = this;
    const { value } = evt.target;
    const ps = PAGER_SIZES[value];
    paper.w = inches2px(ps[1]);
    paper.h = inches2px(ps[2]);
    // console.log('paper:', ps, paper);
    this.preview();
}
function pagerOrientationChange(evt) {
    const { paper } = this;
    const { value } = evt.target;
    const v = PAGER_ORIENTATIONS[value];
    paper.orientation = v;
    this.preview();
}
class Print {
    paper;
    data;
    el;
    contentEl;
    canvases;
    constructor(data) {
        this.paper = {
            w: inches2px(PAGER_SIZES[0][1]),
            h: inches2px(PAGER_SIZES[0][2]),
            padding: 50,
            orientation: PAGER_ORIENTATIONS[0],
            get width() {
                return this.orientation === 'landscape' ? this.h : this.w;
            },
            get height() {
                return this.orientation === 'landscape' ? this.w : this.h;
            },
        };
        this.data = data;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print`)
            .children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print-bar`)
            .children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-title').child('Print settings'), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-right').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_2__["default"]('cancel').on('click', btnClick.bind(this, 'cancel')), new _button__WEBPACK_IMPORTED_MODULE_2__["default"]('next', 'primary').on('click', btnClick.bind(this, 'next'))))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-print-content`)
            .children(this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-content'), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', '-sider').child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('form', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('fieldset', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', '').child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.size')}`), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('select', '').children(...PAGER_SIZES.map((it, index) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('option', '').attr('value', index).child(`${it[0]} ( ${it[1]}''x${it[2]}'' )`))).on('change', pagerSizeChange.bind(this))), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('fieldset', '').children((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('label', '').child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.orientation')}`), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('select', '').children(...PAGER_ORIENTATIONS.map((it, index) => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('option', '').attr('value', index).child(`${(0,_locale_locale__WEBPACK_IMPORTED_MODULE_5__.t)('print.orientations')[index]}`))).on('change', pagerOrientationChange.bind(this))))))).hide();
    }
    resetData(data) {
        this.data = data;
    }
    preview() {
        const { data, paper } = this;
        const { width, height, padding } = paper;
        const iwidth = width - padding * 2;
        const iheight = height - padding * 2;
        const cr = data.contentRange();
        const pages = Math.floor(cr.h / iheight) + 1;
        const scale = iwidth / cr.w;
        let left = padding;
        const top = padding;
        if (scale > 1) {
            left += (iwidth - cr.w) / 2;
        }
        let ri = 0;
        let yoffset = 0;
        this.contentEl.html('');
        this.canvases = [];
        const mViewRange = {
            sri: 0,
            sci: 0,
            eri: 0,
            eci: 0,
        };
        for (let i = 0; i < pages; i += 1) {
            let th = 0;
            let yo = 0;
            const wrap = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas-card`);
            const canvas = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('canvas', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas`);
            this.canvases.push(canvas.el);
            const draw = new _canvas_draw__WEBPACK_IMPORTED_MODULE_3__.Draw(canvas.el, width, height);
            // cell-content
            draw.save();
            draw.translate(left, top);
            if (scale < 1)
                draw.scale(scale, scale);
            // console.log('ri:', ri, cr.eri, yoffset);
            for (; ri <= cr.eri; ri += 1) {
                const rh = data.rows.getHeight(ri);
                th += rh;
                if (th < iheight) {
                    for (let ci = 0; ci <= cr.eci; ci += 1) {
                        (0,_table__WEBPACK_IMPORTED_MODULE_4__.renderCell)(draw, data, ri, ci, yoffset);
                        mViewRange.eci = ci;
                    }
                }
                else {
                    yo = -(th - rh);
                    break;
                }
            }
            mViewRange.eri = ri;
            draw.restore();
            // merge-cell
            draw.save();
            draw.translate(left, top);
            if (scale < 1)
                draw.scale(scale, scale);
            const yof = yoffset;
            data.eachMergesInView(mViewRange, ({ sri, sci }) => {
                (0,_table__WEBPACK_IMPORTED_MODULE_4__.renderCell)(draw, data, sri, sci, yof);
            });
            draw.restore();
            mViewRange.sri = mViewRange.eri;
            mViewRange.sci = mViewRange.eci;
            yoffset += yo;
            this.contentEl.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-canvas-card-wraper`).child(wrap.child(canvas)));
        }
        this.el.show();
    }
    toPrint() {
        this.el.hide();
        const { paper } = this;
        const iframe = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('iframe', '').hide();
        const el = iframe.el;
        window.document.body.appendChild(el);
        const { contentWindow } = el;
        const idoc = contentWindow.document;
        const style = document.createElement('style');
        style.innerHTML = `
      @page { size: ${paper.width}px ${paper.height}px; };
      canvas {
        page-break-before: auto;        
        page-break-after: always;
        image-rendering: pixelated;
      };
    `;
        idoc.head.appendChild(style);
        this.canvases.forEach((it) => {
            const cn = it.cloneNode(false);
            const ctx = cn.getContext('2d');
            // ctx.imageSmoothingEnabled = true;
            ctx.drawImage(it, 0, 0);
            idoc.body.appendChild(cn);
        });
        contentWindow.print();
    }
}


/***/ }),

/***/ "./src/component/resizer.ts":
/*!**********************************!*\
  !*** ./src/component/resizer.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Resizer)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global window */



class Resizer {
    moving;
    vertical;
    el;
    unhideHoverEl;
    hoverEl;
    lineEl;
    cRect;
    finishedFn;
    minDistance;
    unhideFn;
    unhideIndex;
    constructor(vertical = false, minDistance) {
        this.moving = false;
        this.vertical = vertical;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer ${vertical ? 'vertical' : 'horizontal'}`)
            .children((this.unhideHoverEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-hover`)
            .on('dblclick.stop', (evt) => this.mousedblclickHandler())
            .css('position', 'absolute')
            .hide()), (this.hoverEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-hover`).on('mousedown.stop', (evt) => this.mousedownHandler(evt))), (this.lineEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-resizer-line`).hide()))
            .hide();
        // cell rect
        this.cRect = null;
        this.finishedFn = null;
        this.minDistance = minDistance;
        this.unhideFn = () => { };
    }
    showUnhide(index) {
        this.unhideIndex = index;
        this.unhideHoverEl.show();
    }
    hideUnhide() {
        this.unhideHoverEl.hide();
    }
    // rect : {top, left, width, height}
    // line : {width, height}
    show(rect, line) {
        const { moving, vertical, hoverEl, lineEl, el, unhideHoverEl } = this;
        if (moving)
            return;
        this.cRect = rect;
        const { left, top, width, height } = rect;
        el.offset({
            left: vertical ? left + width - 5 : left,
            top: vertical ? top : top + height - 5,
        }).show();
        hoverEl.offset({
            width: vertical ? 5 : width,
            height: vertical ? height : 5,
        });
        lineEl.offset({
            width: vertical ? 0 : line.width,
            height: vertical ? line.height : 0,
        });
        unhideHoverEl.offset({
            left: vertical ? 5 - width : left,
            top: vertical ? top : 5 - height,
            width: vertical ? 5 : width,
            height: vertical ? height : 5,
        });
    }
    hide() {
        this.el
            .offset({
            left: 0,
            top: 0,
        })
            .hide();
        this.hideUnhide();
    }
    mousedblclickHandler() {
        if (this.unhideIndex) {
            this.unhideFn(this.unhideIndex);
        }
    }
    mousedownHandler(evt) {
        let startEvt = evt;
        const { el, lineEl, cRect, vertical, minDistance } = this;
        let distance = vertical ? cRect.width : cRect.height;
        // console.log('distance:', distance);
        lineEl.show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.mouseMoveUp)(window, (e) => {
            this.moving = true;
            if (startEvt !== null && e.buttons === 1) {
                // console.log('top:', top, ', left:', top, ', cRect:', cRect);
                if (vertical) {
                    distance += e.movementX;
                    if (distance > minDistance) {
                        el.css('left', `${cRect.left + distance}px`);
                    }
                }
                else {
                    distance += e.movementY;
                    if (distance > minDistance) {
                        el.css('top', `${cRect.top + distance}px`);
                    }
                }
                startEvt = e;
            }
        }, () => {
            startEvt = null;
            lineEl.hide();
            this.moving = false;
            this.hide();
            if (this.finishedFn) {
                if (distance < minDistance)
                    distance = minDistance;
                this.finishedFn(cRect, distance);
            }
        });
    }
}


/***/ }),

/***/ "./src/component/scrollbar.ts":
/*!************************************!*\
  !*** ./src/component/scrollbar.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Scrollbar)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");


class Scrollbar {
    vertical;
    moveFn;
    el;
    contentEl;
    constructor(vertical) {
        this.vertical = vertical;
        this.moveFn = null;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-scrollbar ${vertical ? 'vertical' : 'horizontal'}`)
            .child(this.contentEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', ''))
            .on('mousemove.stop', () => { })
            .on('scroll.stop', (evt) => {
            const { scrollTop, scrollLeft } = evt.target;
            // console.log('scrollTop:', scrollTop);
            if (this.moveFn) {
                this.moveFn(this.vertical ? scrollTop : scrollLeft, evt);
            }
            // console.log('evt:::', evt);
        });
    }
    move(v) {
        this.el.scroll(v);
        return this;
    }
    scroll() {
        return this.el.scroll();
    }
    set(distance, contentDistance) {
        const d = distance - 1;
        // console.log('distance:', distance, ', contentDistance:', contentDistance);
        if (contentDistance > d) {
            const cssKey = this.vertical ? 'height' : 'width';
            // console.log('d:', d);
            this.el.css(cssKey, `${d - 15}px`).show();
            this.contentEl
                .css(this.vertical ? 'width' : 'height', '1px')
                .css(cssKey, `${contentDistance}px`);
        }
        else {
            this.el.hide();
        }
        return this;
    }
}


/***/ }),

/***/ "./src/component/selector.ts":
/*!***********************************!*\
  !*** ./src/component/selector.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Selector)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_cell_range__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/cell_range */ "./src/core/cell_range.ts");



const selectorHeightBorderWidth = 2 * 2 - 1;
let startZIndex = 10;
class SelectorElement {
    useHideInput;
    autoFocus;
    inputChange;
    cornerEl;
    areaEl;
    clipboardEl;
    autofillEl;
    el;
    hideInput;
    hideInputDiv;
    constructor(useHideInput = false, autoFocus = true) {
        this.useHideInput = useHideInput;
        this.autoFocus = autoFocus;
        this.inputChange = () => { };
        this.cornerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-corner`);
        this.areaEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-area`)
            .child(this.cornerEl).hide();
        this.clipboardEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-clipboard`).hide();
        this.autofillEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector-autofill`).hide();
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selector`)
            .css('z-index', `${startZIndex}`)
            .children(this.areaEl, this.clipboardEl, this.autofillEl)
            .hide();
        if (useHideInput) {
            this.hideInput = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('input', '')
                .on('compositionend', (evt) => {
                this.inputChange(evt.target.value);
            });
            this.el.child(this.hideInputDiv = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'hide-input').child(this.hideInput));
            this.el.child(this.hideInputDiv = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'hide-input').child(this.hideInput));
        }
        startZIndex += 1;
    }
    setOffset(v) {
        this.el.offset(v).show();
        return this;
    }
    hide() {
        this.el.hide();
        return this;
    }
    setAreaOffset(v) {
        const { left, top, width, height, } = v;
        const of = {
            width: width - selectorHeightBorderWidth + 0.8,
            height: height - selectorHeightBorderWidth + 0.8,
            left: left - 0.8,
            top: top - 0.8,
        };
        this.areaEl.offset(of).show();
        if (this.useHideInput) {
            this.hideInputDiv.offset(of);
            if (this.autoFocus) {
                this.hideInput.val('').focus();
            }
            else {
                this.hideInput.val('');
            }
        }
    }
    setClipboardOffset(v) {
        const { left, top, width, height, } = v;
        this.clipboardEl.offset({
            left,
            top,
            width: width - 5,
            height: height - 5,
        });
    }
    showAutofill(v) {
        const { left, top, width, height, } = v;
        this.autofillEl.offset({
            width: width - selectorHeightBorderWidth,
            height: height - selectorHeightBorderWidth,
            left,
            top,
        }).show();
    }
    hideAutofill() {
        this.autofillEl.hide();
    }
    showClipboard() {
        this.clipboardEl.show();
    }
    hideClipboard() {
        this.clipboardEl.hide();
    }
}
function calBRAreaOffset(offset) {
    const { data } = this;
    const { left, top, width, height, scroll, l, t, } = offset;
    const ftwidth = data.freezeTotalWidth();
    const ftheight = data.freezeTotalHeight();
    let left0 = left - ftwidth;
    if (ftwidth > l)
        left0 -= scroll.x;
    let top0 = top - ftheight;
    if (ftheight > t)
        top0 -= scroll.y;
    return {
        left: left0,
        top: top0,
        width,
        height,
    };
}
function calTAreaOffset(offset) {
    const { data } = this;
    const { left, width, height, l, t, scroll, } = offset;
    const ftwidth = data.freezeTotalWidth();
    let left0 = left - ftwidth;
    if (ftwidth > l)
        left0 -= scroll.x;
    return {
        left: left0, top: t, width, height,
    };
}
function calLAreaOffset(offset) {
    const { data } = this;
    const { top, width, height, l, t, scroll, } = offset;
    const ftheight = data.freezeTotalHeight();
    let top0 = top - ftheight;
    // console.log('ftheight:', ftheight, ', t:', t);
    if (ftheight > t)
        top0 -= scroll.y;
    return {
        left: l, top: top0, width, height,
    };
}
function setBRAreaOffset(offset) {
    const { br } = this;
    br.setAreaOffset(calBRAreaOffset.call(this, offset));
}
function setTLAreaOffset(offset) {
    const { tl } = this;
    tl.setAreaOffset(offset);
}
function setTAreaOffset(offset) {
    const { t } = this;
    t.setAreaOffset(calTAreaOffset.call(this, offset));
}
function setLAreaOffset(offset) {
    const { l } = this;
    l.setAreaOffset(calLAreaOffset.call(this, offset));
}
function setLClipboardOffset(offset) {
    const { l } = this;
    l.setClipboardOffset(calLAreaOffset.call(this, offset));
}
function setBRClipboardOffset(offset) {
    const { br } = this;
    br.setClipboardOffset(calBRAreaOffset.call(this, offset));
}
function setTLClipboardOffset(offset) {
    const { tl } = this;
    tl.setClipboardOffset(offset);
}
function setTClipboardOffset(offset) {
    const { t } = this;
    t.setClipboardOffset(calTAreaOffset.call(this, offset));
}
function setAllAreaOffset(offset) {
    setBRAreaOffset.call(this, offset);
    setTLAreaOffset.call(this, offset);
    setTAreaOffset.call(this, offset);
    setLAreaOffset.call(this, offset);
}
function setAllClipboardOffset(offset) {
    setBRClipboardOffset.call(this, offset);
    setTLClipboardOffset.call(this, offset);
    setTClipboardOffset.call(this, offset);
    setLClipboardOffset.call(this, offset);
}
class Selector {
    inputChange;
    data;
    br;
    t;
    l;
    tl;
    offset;
    areaOffset;
    indexes;
    range;
    arange;
    el;
    lastri;
    lastci;
    moveIndexes;
    constructor(data) {
        const { autoFocus } = data.settings;
        this.inputChange = () => { };
        this.data = data;
        this.br = new SelectorElement(true, autoFocus);
        this.t = new SelectorElement();
        this.l = new SelectorElement();
        this.tl = new SelectorElement();
        this.br.inputChange = (v) => {
            this.inputChange(v);
        };
        this.br.el.show();
        this.offset = null;
        this.areaOffset = null;
        this.indexes = null;
        this.range = null;
        this.arange = null;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_1__.cssPrefix}-selectors`)
            .children(this.tl.el, this.t.el, this.l.el, this.br.el).hide();
        // for performance
        this.lastri = -1;
        this.lastci = -1;
        startZIndex += 1;
    }
    resetData(data) {
        this.data = data;
        this.range = data.selector.range;
        this.resetAreaOffset();
    }
    hide() {
        this.el.hide();
    }
    resetOffset() {
        const { data, tl, t, l, br, } = this;
        const freezeHeight = data.freezeTotalHeight();
        const freezeWidth = data.freezeTotalWidth();
        if (freezeHeight > 0 || freezeWidth > 0) {
            tl.setOffset({ width: freezeWidth, height: freezeHeight });
            t.setOffset({ left: freezeWidth, height: freezeHeight });
            l.setOffset({ top: freezeHeight, width: freezeWidth });
            br.setOffset({ left: freezeWidth, top: freezeHeight });
        }
        else {
            tl.hide();
            t.hide();
            l.hide();
            br.setOffset({ left: 0, top: 0 });
        }
    }
    resetAreaOffset() {
        // console.log('offset:', offset);
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setAllAreaOffset.call(this, offset);
        setAllClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    resetBRTAreaOffset() {
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setBRAreaOffset.call(this, offset);
        setTAreaOffset.call(this, offset);
        setBRClipboardOffset.call(this, coffset);
        setTClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    resetBRLAreaOffset() {
        const offset = this.data.getSelectedRect();
        const coffset = this.data.getClipboardRect();
        setBRAreaOffset.call(this, offset);
        setLAreaOffset.call(this, offset);
        setBRClipboardOffset.call(this, coffset);
        setLClipboardOffset.call(this, coffset);
        this.resetOffset();
    }
    set(ri, ci, indexesUpdated = true) {
        const { data } = this;
        const cellRange = data.calSelectedRangeByStart(ri, ci);
        const { sri, sci } = cellRange;
        if (indexesUpdated) {
            let [cri, cci] = [ri, ci];
            if (ri < 0)
                cri = 0;
            if (ci < 0)
                cci = 0;
            data.selector.setIndexes(cri, cci);
            this.indexes = [cri, cci];
        }
        this.moveIndexes = [sri, sci];
        // this.sIndexes = sIndexes;
        // this.eIndexes = eIndexes;
        this.range = cellRange;
        this.resetAreaOffset();
        this.el.show();
    }
    setEnd(ri, ci, moving = true) {
        const { data, lastri, lastci } = this;
        if (moving) {
            if (ri === lastri && ci === lastci)
                return;
            this.lastri = ri;
            this.lastci = ci;
        }
        this.range = data.calSelectedRangeByEnd(ri, ci);
        setAllAreaOffset.call(this, this.data.getSelectedRect());
    }
    reset() {
        // console.log('::::', this.data);
        const { eri, eci } = this.data.selector.range;
        this.setEnd(eri, eci);
    }
    showAutofill(ri, ci) {
        if (ri === -1 && ci === -1)
            return;
        // console.log('ri:', ri, ', ci:', ci);
        // const [sri, sci] = this.sIndexes;
        // const [eri, eci] = this.eIndexes;
        const { sri, sci, eri, eci, } = this.range;
        const [nri, nci] = [ri, ci];
        // const rn = eri - sri;
        // const cn = eci - sci;
        const srn = sri - ri;
        const scn = sci - ci;
        const ern = eri - ri;
        const ecn = eci - ci;
        if (scn > 0) {
            // left
            // console.log('left');
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(sri, nci, eri, sci - 1);
            // this.saIndexes = [sri, nci];
            // this.eaIndexes = [eri, sci - 1];
            // data.calRangeIndexes2(
        }
        else if (srn > 0) {
            // top
            // console.log('top');
            // nri = sri;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(nri, sci, sri - 1, eci);
            // this.saIndexes = [nri, sci];
            // this.eaIndexes = [sri - 1, eci];
        }
        else if (ecn < 0) {
            // right
            // console.log('right');
            // nci = eci;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(sri, eci + 1, eri, nci);
            // this.saIndexes = [sri, eci + 1];
            // this.eaIndexes = [eri, nci];
        }
        else if (ern < 0) {
            // bottom
            // console.log('bottom');
            // nri = eri;
            this.arange = new _core_cell_range__WEBPACK_IMPORTED_MODULE_2__.CellRange(eri + 1, sci, nri, eci);
            // this.saIndexes = [eri + 1, sci];
            // this.eaIndexes = [nri, eci];
        }
        else {
            // console.log('else:');
            this.arange = null;
            // this.saIndexes = null;
            // this.eaIndexes = null;
            return;
        }
        if (this.arange !== null) {
            // console.log(this.saIndexes, ':', this.eaIndexes);
            const offset = this.data.getRect(this.arange);
            offset.width += 2;
            offset.height += 2;
            const { br, l, t, tl, } = this;
            br.showAutofill(calBRAreaOffset.call(this, offset));
            l.showAutofill(calLAreaOffset.call(this, offset));
            t.showAutofill(calTAreaOffset.call(this, offset));
            tl.showAutofill(offset);
        }
    }
    hideAutofill() {
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].hideAutofill();
        });
    }
    showClipboard() {
        const coffset = this.data.getClipboardRect();
        setAllClipboardOffset.call(this, coffset);
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].showClipboard();
        });
    }
    hideClipboard() {
        ['br', 'l', 't', 'tl'].forEach((property) => {
            this[property].hideClipboard();
        });
    }
}


/***/ }),

/***/ "./src/component/sheet.ts":
/*!********************************!*\
  !*** ./src/component/sheet.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Sheet)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _resizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resizer */ "./src/component/resizer.ts");
/* harmony import */ var _scrollbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scrollbar */ "./src/component/scrollbar.ts");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selector */ "./src/component/selector.ts");
/* harmony import */ var _editor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor */ "./src/component/editor.ts");
/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./print */ "./src/component/print.ts");
/* harmony import */ var _contextmenu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./contextmenu */ "./src/component/contextmenu.ts");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./table */ "./src/component/table.ts");
/* harmony import */ var _toolbar_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./toolbar/index */ "./src/component/toolbar/index.ts");
/* harmony import */ var _modal_validation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modal_validation */ "./src/component/modal_validation.ts");
/* harmony import */ var _sort_filter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sort_filter */ "./src/component/sort_filter.ts");
/* harmony import */ var _message__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./message */ "./src/component/message.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* global window */















/**
 * @desc throttle fn
 * @param func function
 * @param wait Delay in milliseconds
 */
function throttle(func, wait) {
    let timeout;
    return (...arg) => {
        const that = this;
        const args = arg;
        if (!timeout) {
            timeout = setTimeout(() => {
                timeout = null;
                func.apply(that, args);
            }, wait);
        }
    };
}
function scrollbarMove() {
    const { data, verticalScrollbar, horizontalScrollbar, } = this;
    const { l, t, left, top, width, height, } = data.getSelectedRect();
    const tableOffset = this.getTableOffset();
    // console.log(',l:', l, ', left:', left, ', tOffset.left:', tableOffset.width);
    if (Math.abs(left) + width > tableOffset.width) {
        horizontalScrollbar.move({ left: l + width - tableOffset.width });
    }
    else {
        const fsw = data.freezeTotalWidth();
        if (left < fsw) {
            horizontalScrollbar.move({ left: l - 1 - fsw });
        }
    }
    // console.log('top:', top, ', height:', height, ', tof.height:', tableOffset.height);
    if (Math.abs(top) + height > tableOffset.height) {
        verticalScrollbar.move({ top: t + height - tableOffset.height - 1 });
    }
    else {
        const fsh = data.freezeTotalHeight();
        if (top < fsh) {
            verticalScrollbar.move({ top: t - 1 - fsh });
        }
    }
}
function selectorSet(multiple, ri, ci, indexesUpdated = true, moving = false) {
    if (ri === -1 && ci === -1)
        return;
    const { table, selector, toolbar, data, contextMenu, } = this;
    const cell = data.getCell(ri, ci);
    if (multiple) {
        selector.setEnd(ri, ci, moving);
        this.trigger('cells-selected', cell, selector.range);
    }
    else {
        // trigger click event
        selector.set(ri, ci, indexesUpdated);
        this.trigger('cell-selected', cell, ri, ci);
    }
    contextMenu.setMode((ri === -1 || ci === -1) ? 'row-col' : 'range');
    toolbar.reset();
    table.render();
}
// multiple: boolean
// direction: left | right | up | down | row-first | row-last | col-first | col-last
function selectorMove(multiple, direction) {
    const { selector, data, } = this;
    const { rows, cols } = data;
    let [ri, ci] = selector.indexes;
    const { eri, eci } = selector.range;
    if (multiple) {
        [ri, ci] = selector.moveIndexes;
    }
    // console.log('selector.move:', ri, ci);
    if (direction === 'left') {
        if (ci > 0)
            ci -= 1;
    }
    else if (direction === 'right') {
        if (eci !== ci)
            ci = eci;
        if (ci < cols.len - 1)
            ci += 1;
    }
    else if (direction === 'up') {
        if (ri > 0)
            ri -= 1;
    }
    else if (direction === 'down') {
        if (eri !== ri)
            ri = eri;
        if (ri < rows.len - 1)
            ri += 1;
    }
    else if (direction === 'row-first') {
        ci = 0;
    }
    else if (direction === 'row-last') {
        ci = cols.len - 1;
    }
    else if (direction === 'col-first') {
        ri = 0;
    }
    else if (direction === 'col-last') {
        ri = rows.len - 1;
    }
    if (multiple) {
        selector.moveIndexes = [ri, ci];
    }
    selectorSet.call(this, multiple, ri, ci);
    scrollbarMove.call(this);
}
// private methods
function overlayerMousemove(evt) {
    // console.log('x:', evt.offsetX, ', y:', evt.offsetY);
    if (evt.buttons !== 0)
        return;
    if (evt.target.className === `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-resizer-hover`)
        return;
    const { offsetX, offsetY } = evt;
    const { rowResizer, colResizer, tableEl, data, } = this;
    const { rows, cols } = data;
    if (offsetX > cols.indexWidth && offsetY > rows.height) {
        rowResizer.hide();
        colResizer.hide();
        return;
    }
    const tRect = tableEl.box();
    const cRect = data.getCellRectByXY(evt.offsetX, evt.offsetY);
    if (cRect.ri >= 0 && cRect.ci === -1) {
        cRect.width = cols.indexWidth;
        rowResizer.show(cRect, {
            width: tRect.width,
        });
        if (rows.isHide(cRect.ri - 1)) {
            rowResizer.showUnhide(cRect.ri);
        }
        else {
            rowResizer.hideUnhide();
        }
    }
    else {
        rowResizer.hide();
    }
    if (cRect.ri === -1 && cRect.ci >= 0) {
        cRect.height = rows.height;
        colResizer.show(cRect, {
            height: tRect.height,
        });
        if (cols.isHide(cRect.ci - 1)) {
            colResizer.showUnhide(cRect.ci);
        }
        else {
            colResizer.hideUnhide();
        }
    }
    else {
        colResizer.hide();
    }
}
// let scrollThreshold = 15;
function overlayerMousescroll(evt) {
    // scrollThreshold -= 1;
    // if (scrollThreshold > 0) return;
    // scrollThreshold = 15;
    const { verticalScrollbar, horizontalScrollbar, data } = this;
    const { top } = verticalScrollbar.scroll();
    const { left } = horizontalScrollbar.scroll();
    // console.log('evt:::', evt.wheelDelta, evt.detail * 40);
    const { rows, cols } = data;
    // deltaY for vertical delta
    const { deltaY, deltaX } = evt;
    const loopValue = (ii, vFunc) => {
        let i = ii;
        let v = 0;
        do {
            v = vFunc(i);
            i += 1;
        } while (v <= 0);
        return v;
    };
    // console.log('deltaX', deltaX, 'evt.detail', evt.detail);
    // if (evt.detail) deltaY = evt.detail * 40;
    const moveY = (vertical) => {
        if (vertical > 0) {
            // up
            const ri = data.scroll.ri + 1;
            if (ri < rows.len) {
                const rh = loopValue(ri, i => rows.getHeight(i));
                verticalScrollbar.move({ top: top + rh - 1 });
            }
        }
        else {
            // down
            const ri = data.scroll.ri - 1;
            if (ri >= 0) {
                const rh = loopValue(ri, i => rows.getHeight(i));
                verticalScrollbar.move({ top: ri === 0 ? 0 : top - rh });
            }
        }
    };
    // deltaX for Mac horizontal scroll
    const moveX = (horizontal) => {
        if (horizontal > 0) {
            // left
            const ci = data.scroll.ci + 1;
            if (ci < cols.len) {
                const cw = loopValue(ci, i => cols.getWidth(i));
                horizontalScrollbar.move({ left: left + cw - 1 });
            }
        }
        else {
            // right
            const ci = data.scroll.ci - 1;
            if (ci >= 0) {
                const cw = loopValue(ci, i => cols.getWidth(i));
                horizontalScrollbar.move({ left: ci === 0 ? 0 : left - cw });
            }
        }
    };
    const tempY = Math.abs(deltaY);
    const tempX = Math.abs(deltaX);
    const temp = Math.max(tempY, tempX);
    // console.log('event:', evt);
    // detail for windows/mac firefox vertical scroll
    if (/Firefox/i.test(window.navigator.userAgent))
        throttle(moveY(evt.detail), 50);
    if (temp === tempX)
        throttle(moveX(deltaX), 50);
    if (temp === tempY)
        throttle(moveY(deltaY), 50);
}
function overlayerTouch(direction, distance) {
    const { verticalScrollbar, horizontalScrollbar } = this;
    const { top } = verticalScrollbar.scroll();
    const { left } = horizontalScrollbar.scroll();
    if (direction === 'left' || direction === 'right') {
        horizontalScrollbar.move({ left: left - distance });
    }
    else if (direction === 'up' || direction === 'down') {
        verticalScrollbar.move({ top: top - distance });
    }
}
function verticalScrollbarSet() {
    const { data, verticalScrollbar } = this;
    const { height } = this.getTableOffset();
    const erth = data.exceptRowTotalHeight(0, -1);
    // console.log('erth:', erth);
    verticalScrollbar.set(height, data.rows.totalHeight() - erth);
}
function horizontalScrollbarSet() {
    const { data, horizontalScrollbar } = this;
    const { width } = this.getTableOffset();
    if (data) {
        horizontalScrollbar.set(width, data.cols.totalWidth());
    }
}
function sheetFreeze() {
    const { selector, data, editor, } = this;
    const [ri, ci] = data.freeze;
    if (ri > 0 || ci > 0) {
        const fwidth = data.freezeTotalWidth();
        const fheight = data.freezeTotalHeight();
        editor.setFreezeLengths(fwidth, fheight);
    }
    selector.resetAreaOffset();
}
function sheetReset() {
    const { tableEl, overlayerEl, overlayerCEl, table, toolbar, selector, el, } = this;
    const tOffset = this.getTableOffset();
    const vRect = this.getRect();
    tableEl.attr(vRect);
    overlayerEl.offset(vRect);
    overlayerCEl.offset(tOffset);
    el.css('width', `${vRect.width}px`);
    verticalScrollbarSet.call(this);
    horizontalScrollbarSet.call(this);
    sheetFreeze.call(this);
    table.render();
    toolbar.reset();
    selector.reset();
}
function clearClipboard() {
    const { data, selector } = this;
    data.clearClipboard();
    selector.hideClipboard();
}
function copy(evt) {
    const { data, selector } = this;
    if (data.settings.mode === 'read')
        return;
    data.copy();
    data.copyToSystemClipboard(evt);
    selector.showClipboard();
}
function cut() {
    const { data, selector } = this;
    if (data.settings.mode === 'read')
        return;
    data.cut();
    selector.showClipboard();
}
function paste(what, evt) {
    const { data } = this;
    if (data.settings.mode === 'read')
        return;
    if (data.clipboard.isClear()) {
        const resetSheet = () => sheetReset.call(this);
        const eventTrigger = (rows) => {
            this.trigger('pasted-clipboard', rows);
        };
        // pastFromSystemClipboard is async operation, need to tell it how to reset sheet and trigger event after it finishes
        // pasting content from system clipboard
        data.pasteFromSystemClipboard(resetSheet, eventTrigger);
    }
    else if (data.paste(what, msg => (0,_message__WEBPACK_IMPORTED_MODULE_12__.xtoast)('Tip', msg))) {
        sheetReset.call(this);
    }
    else if (evt) {
        const cdata = evt.clipboardData.getData('text/plain');
        this.data.pasteFromText(cdata);
        sheetReset.call(this);
    }
}
function hideRowsOrCols() {
    this.data.hideRowsOrCols();
    sheetReset.call(this);
}
function unhideRowsOrCols(type, index) {
    this.data.unhideRowsOrCols(type, index);
    sheetReset.call(this);
}
function autofilter() {
    const { data } = this;
    data.autofilter();
    sheetReset.call(this);
}
function toolbarChangePaintformatPaste() {
    const { toolbar } = this;
    if (toolbar.paintformatActive()) {
        paste.call(this, 'format');
        clearClipboard.call(this);
        toolbar.paintformatToggle();
    }
}
function overlayerMousedown(evt) {
    // console.log(':::::overlayer.mousedown:', evt.detail, evt.button, evt.buttons, evt.shiftKey);
    // console.log('evt.target.className:', evt.target.className);
    const { selector, data, table, sortFilter, } = this;
    const { offsetX, offsetY } = evt;
    const isAutofillEl = evt.target.className === `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-selector-corner`;
    const cellRect = data.getCellRectByXY(offsetX, offsetY);
    const { left, top, width, height, } = cellRect;
    let { ri, ci } = cellRect;
    // sort or filter
    const { autoFilter } = data;
    if (autoFilter.includes(ri, ci)) {
        if (left + width - 20 < offsetX && top + height - 20 < offsetY) {
            const items = autoFilter.items(ci, (r, c) => data.rows.getCell(r, c));
            sortFilter.hide();
            sortFilter.set(ci, items, autoFilter.getFilter(ci), autoFilter.getSort(ci));
            sortFilter.setOffset({ left, top: top + height + 2 });
            return;
        }
    }
    // console.log('ri:', ri, ', ci:', ci);
    if (!evt.shiftKey) {
        // console.log('selectorSetStart:::');
        if (isAutofillEl) {
            selector.showAutofill(ri, ci);
        }
        else {
            selectorSet.call(this, false, ri, ci);
        }
        // mouse move up
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.mouseMoveUp)(window, (e) => {
            // console.log('mouseMoveUp::::');
            ({ ri, ci } = data.getCellRectByXY(e.offsetX, e.offsetY));
            if (isAutofillEl) {
                selector.showAutofill(ri, ci);
            }
            else if (e.buttons === 1 && !e.shiftKey) {
                selectorSet.call(this, true, ri, ci, true, true);
            }
        }, () => {
            if (isAutofillEl && selector.arange && data.settings.mode !== 'read') {
                if (data.autofill(selector.arange, 'all', msg => (0,_message__WEBPACK_IMPORTED_MODULE_12__.xtoast)('Tip', msg))) {
                    table.render();
                }
            }
            selector.hideAutofill();
            toolbarChangePaintformatPaste.call(this);
        });
    }
    if (!isAutofillEl && evt.buttons === 1) {
        if (evt.shiftKey) {
            // console.log('shiftKey::::');
            selectorSet.call(this, true, ri, ci);
        }
    }
}
function editorSetOffset() {
    const { editor, data } = this;
    const sOffset = data.getSelectedRect();
    const tOffset = this.getTableOffset();
    let sPosition = 'top';
    // console.log('sOffset:', sOffset, ':', tOffset);
    if (sOffset.top > tOffset.height / 2) {
        sPosition = 'bottom';
    }
    editor.setOffset(sOffset, sPosition);
}
function editorSet() {
    const { editor, data } = this;
    if (data.settings.mode === 'read')
        return;
    editorSetOffset.call(this);
    editor.setCell(data.getSelectedCell(), data.getSelectedValidator());
    clearClipboard.call(this);
}
function verticalScrollbarMove(distance) {
    const { data, table, selector } = this;
    data.scrolly(distance, () => {
        selector.resetBRLAreaOffset();
        editorSetOffset.call(this);
        table.render();
    });
}
function horizontalScrollbarMove(distance) {
    const { data, table, selector } = this;
    data.scrollx(distance, () => {
        selector.resetBRTAreaOffset();
        editorSetOffset.call(this);
        table.render();
    });
}
function rowResizerFinished(cRect, distance) {
    const { ri } = cRect;
    const { table, selector, data } = this;
    const { sri, eri } = selector.range;
    if (ri >= sri && ri <= eri) {
        for (let row = sri; row <= eri; row += 1) {
            data.rows.setHeight(row, distance);
        }
    }
    else {
        data.rows.setHeight(ri, distance);
    }
    table.render();
    selector.resetAreaOffset();
    verticalScrollbarSet.call(this);
    editorSetOffset.call(this);
}
function colResizerFinished(cRect, distance) {
    const { ci } = cRect;
    const { table, selector, data } = this;
    const { sci, eci } = selector.range;
    if (ci >= sci && ci <= eci) {
        for (let col = sci; col <= eci; col += 1) {
            data.cols.setWidth(col, distance);
        }
    }
    else {
        data.cols.setWidth(ci, distance);
    }
    table.render();
    selector.resetAreaOffset();
    horizontalScrollbarSet.call(this);
    editorSetOffset.call(this);
}
function dataSetCellText(text, state = 'finished') {
    const { data, table } = this;
    // const [ri, ci] = selector.indexes;
    if (data.settings.mode === 'read')
        return;
    data.setSelectedCellText(text, state);
    const { ri, ci } = data.selector;
    if (state === 'finished') {
        table.render();
    }
    else {
        this.trigger('cell-edited', text, ri, ci);
    }
}
function insertDeleteRowColumn(type) {
    const { data } = this;
    if (data.settings.mode === 'read')
        return;
    if (type === 'insert-row') {
        data.insert('row');
    }
    else if (type === 'delete-row') {
        data.delete('row');
    }
    else if (type === 'insert-column') {
        data.insert('column');
    }
    else if (type === 'delete-column') {
        data.delete('column');
    }
    else if (type === 'delete-cell') {
        data.deleteCell();
    }
    else if (type === 'delete-cell-format') {
        data.deleteCell('format');
    }
    else if (type === 'delete-cell-text') {
        data.deleteCell('text');
    }
    else if (type === 'cell-printable') {
        data.setSelectedCellAttr('printable', true);
    }
    else if (type === 'cell-non-printable') {
        data.setSelectedCellAttr('printable', false);
    }
    else if (type === 'cell-editable') {
        data.setSelectedCellAttr('editable', true);
    }
    else if (type === 'cell-non-editable') {
        data.setSelectedCellAttr('editable', false);
    }
    clearClipboard.call(this);
    sheetReset.call(this);
}
function toolbarChange(type, value) {
    const { data } = this;
    if (type === 'undo') {
        this.undo();
    }
    else if (type === 'redo') {
        this.redo();
    }
    else if (type === 'print') {
        this.print.preview();
    }
    else if (type === 'paintformat') {
        if (value === true)
            copy.call(this);
        else
            clearClipboard.call(this);
    }
    else if (type === 'clearformat') {
        insertDeleteRowColumn.call(this, 'delete-cell-format');
    }
    else if (type === 'link') {
        // link
    }
    else if (type === 'chart') {
        // chart
    }
    else if (type === 'autofilter') {
        // filter
        autofilter.call(this);
    }
    else if (type === 'freeze') {
        if (value) {
            const { ri, ci } = data.selector;
            this.freeze(ri, ci);
        }
        else {
            this.freeze(0, 0);
        }
    }
    else {
        data.setSelectedCellAttr(type, value);
        if (type === 'formula' && !data.selector.multiple()) {
            editorSet.call(this);
        }
        sheetReset.call(this);
    }
}
function sortFilterChange(ci, order, operator, value) {
    // console.log('sort:', sortDesc, operator, value);
    this.data.setAutoFilter(ci, order, operator, value);
    sheetReset.call(this);
}
function sheetInitEvents() {
    const { selector, overlayerEl, rowResizer, colResizer, verticalScrollbar, horizontalScrollbar, editor, contextMenu, toolbar, modalValidation, sortFilter, } = this;
    // overlayer
    overlayerEl
        .on('mousemove', (evt) => {
        overlayerMousemove.call(this, evt);
    })
        .on('mousedown', (evt) => {
        editor.clear();
        contextMenu.hide();
        // the left mouse button: mousedown → mouseup → click
        // the right mouse button: mousedown → contenxtmenu → mouseup
        if (evt.buttons === 2) {
            if (this.data.xyInSelectedRect(evt.offsetX, evt.offsetY)) {
                contextMenu.setPosition(evt.offsetX, evt.offsetY);
            }
            else {
                overlayerMousedown.call(this, evt);
                contextMenu.setPosition(evt.offsetX, evt.offsetY);
            }
            evt.stopPropagation();
        }
        else if (evt.detail === 2) {
            editorSet.call(this);
        }
        else {
            overlayerMousedown.call(this, evt);
        }
    })
        .on('mousewheel.stop', (evt) => {
        overlayerMousescroll.call(this, evt);
    })
        .on('mouseout', (evt) => {
        const { offsetX, offsetY } = evt;
        if (offsetY <= 0)
            colResizer.hide();
        if (offsetX <= 0)
            rowResizer.hide();
    });
    selector.inputChange = (v) => {
        dataSetCellText.call(this, v, 'input');
        editorSet.call(this);
    };
    // slide on mobile
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindTouch)(overlayerEl.el, {
        move: (direction, d) => {
            overlayerTouch.call(this, direction, d);
        },
    });
    // toolbar change
    toolbar.change = (type, value) => toolbarChange.call(this, type, value);
    // sort filter ok
    sortFilter.ok = (ci, order, o, v) => sortFilterChange.call(this, ci, order, o, v);
    // resizer finished callback
    rowResizer.finishedFn = (cRect, distance) => {
        rowResizerFinished.call(this, cRect, distance);
    };
    colResizer.finishedFn = (cRect, distance) => {
        colResizerFinished.call(this, cRect, distance);
    };
    // resizer unhide callback
    rowResizer.unhideFn = (index) => {
        unhideRowsOrCols.call(this, 'row', index);
    };
    colResizer.unhideFn = (index) => {
        unhideRowsOrCols.call(this, 'col', index);
    };
    // scrollbar move callback
    verticalScrollbar.moveFn = (distance, evt) => {
        verticalScrollbarMove.call(this, distance, evt);
    };
    horizontalScrollbar.moveFn = (distance, evt) => {
        horizontalScrollbarMove.call(this, distance, evt);
    };
    // editor
    editor.change = (state, itext) => {
        dataSetCellText.call(this, itext, state);
    };
    // modal validation
    modalValidation.change = (action, ...args) => {
        if (action === 'save') {
            this.data.addValidation(...args);
        }
        else {
            this.data.removeValidation();
        }
    };
    // contextmenu
    contextMenu.itemClick = (type) => {
        // console.log('type:', type);
        if (type === 'validation') {
            modalValidation.setValue(this.data.getSelectedValidation());
        }
        else if (type === 'copy') {
            copy.call(this);
        }
        else if (type === 'cut') {
            cut.call(this);
        }
        else if (type === 'paste') {
            paste.call(this, 'all');
        }
        else if (type === 'paste-value') {
            paste.call(this, 'text');
        }
        else if (type === 'paste-format') {
            paste.call(this, 'format');
        }
        else if (type === 'hide') {
            hideRowsOrCols.call(this);
        }
        else {
            insertDeleteRowColumn.call(this, type);
        }
    };
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'resize', () => {
        this.reload();
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'click', (evt) => {
        this.focusing = overlayerEl.contains(evt.target);
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'paste', (evt) => {
        if (!this.focusing)
            return;
        paste.call(this, 'all', evt);
        evt.preventDefault();
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'copy', (evt) => {
        if (!this.focusing)
            return;
        copy.call(this, evt);
        evt.preventDefault();
    });
    // for selector
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(window, 'keydown', (evt) => {
        if (!this.focusing)
            return;
        const keyCode = evt.keyCode || evt.which;
        const { key, ctrlKey, shiftKey, metaKey, } = evt;
        // console.log('keydown.evt: ', keyCode);
        if (ctrlKey || metaKey) {
            // const { sIndexes, eIndexes } = selector;
            // let what = 'all';
            // if (shiftKey) what = 'text';
            // if (altKey) what = 'format';
            switch (keyCode) {
                case 90:
                    // undo: ctrl + z
                    this.undo();
                    evt.preventDefault();
                    break;
                case 89:
                    // redo: ctrl + y
                    this.redo();
                    evt.preventDefault();
                    break;
                case 67:
                    // ctrl + c
                    // => copy
                    // copy.call(this);
                    // evt.preventDefault();
                    break;
                case 88:
                    // ctrl + x
                    cut.call(this);
                    evt.preventDefault();
                    break;
                case 85:
                    // ctrl + u
                    toolbar.trigger('underline');
                    evt.preventDefault();
                    break;
                case 86:
                    // ctrl + v
                    // => paste
                    // evt.preventDefault();
                    break;
                case 37:
                    // ctrl + left
                    selectorMove.call(this, shiftKey, 'row-first');
                    evt.preventDefault();
                    break;
                case 38:
                    // ctrl + up
                    selectorMove.call(this, shiftKey, 'col-first');
                    evt.preventDefault();
                    break;
                case 39:
                    // ctrl + right
                    selectorMove.call(this, shiftKey, 'row-last');
                    evt.preventDefault();
                    break;
                case 40:
                    // ctrl + down
                    selectorMove.call(this, shiftKey, 'col-last');
                    evt.preventDefault();
                    break;
                case 32:
                    // ctrl + space, all cells in col
                    selectorSet.call(this, false, -1, this.data.selector.ci, false);
                    evt.preventDefault();
                    break;
                case 66:
                    // ctrl + B
                    toolbar.trigger('bold');
                    break;
                case 73:
                    // ctrl + I
                    toolbar.trigger('italic');
                    break;
                default:
                    break;
            }
        }
        else {
            // console.log('evt.keyCode:', evt.keyCode);
            switch (keyCode) {
                case 32:
                    if (shiftKey) {
                        // shift + space, all cells in row
                        selectorSet.call(this, false, this.data.selector.ri, -1, false);
                    }
                    break;
                case 27: // esc
                    contextMenu.hide();
                    clearClipboard.call(this);
                    break;
                case 37: // left
                    selectorMove.call(this, shiftKey, 'left');
                    evt.preventDefault();
                    break;
                case 38: // up
                    selectorMove.call(this, shiftKey, 'up');
                    evt.preventDefault();
                    break;
                case 39: // right
                    selectorMove.call(this, shiftKey, 'right');
                    evt.preventDefault();
                    break;
                case 40: // down
                    selectorMove.call(this, shiftKey, 'down');
                    evt.preventDefault();
                    break;
                case 9: // tab
                    editor.clear();
                    // shift + tab => move left
                    // tab => move right
                    selectorMove.call(this, false, shiftKey ? 'left' : 'right');
                    evt.preventDefault();
                    break;
                case 13: // enter
                    editor.clear();
                    // shift + enter => move up
                    // enter => move down
                    selectorMove.call(this, false, shiftKey ? 'up' : 'down');
                    evt.preventDefault();
                    break;
                case 8: // backspace
                    insertDeleteRowColumn.call(this, 'delete-cell-text');
                    evt.preventDefault();
                    break;
                default:
                    break;
            }
            if (key === 'Delete') {
                insertDeleteRowColumn.call(this, 'delete-cell-text');
                evt.preventDefault();
            }
            else if ((keyCode >= 65 && keyCode <= 90)
                || (keyCode >= 48 && keyCode <= 57)
                || (keyCode >= 96 && keyCode <= 105)
                || evt.key === '=') {
                dataSetCellText.call(this, evt.key, 'input');
                editorSet.call(this);
            }
            else if (keyCode === 113) {
                // F2
                editorSet.call(this);
            }
        }
    });
}
class Sheet {
    eventMap;
    el;
    toolbar;
    print;
    data;
    tableEl;
    rowResizer;
    colResizer;
    verticalScrollbar;
    horizontalScrollbar;
    editor;
    modalValidation;
    contextMenu;
    selector;
    overlayerCEl;
    overlayerEl;
    sortFilter;
    table;
    constructor(targetEl, data) {
        this.eventMap = (0,_event__WEBPACK_IMPORTED_MODULE_1__.createEventEmitter)();
        const { view, showToolbar, showContextmenu } = data.settings;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-sheet`);
        this.toolbar = new _toolbar_index__WEBPACK_IMPORTED_MODULE_9__["default"](data, view.width, !showToolbar);
        this.print = new _print__WEBPACK_IMPORTED_MODULE_6__["default"](data);
        targetEl.children(this.toolbar.el, this.el, this.print.el);
        this.data = data;
        // table
        this.tableEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('canvas', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-table`);
        // resizer
        this.rowResizer = new _resizer__WEBPACK_IMPORTED_MODULE_2__["default"](false, data.rows.height);
        this.colResizer = new _resizer__WEBPACK_IMPORTED_MODULE_2__["default"](true, data.cols.minWidth);
        // scrollbar
        this.verticalScrollbar = new _scrollbar__WEBPACK_IMPORTED_MODULE_3__["default"](true);
        this.horizontalScrollbar = new _scrollbar__WEBPACK_IMPORTED_MODULE_3__["default"](false);
        // editor
        this.editor = new _editor__WEBPACK_IMPORTED_MODULE_5__["default"](_core_formula__WEBPACK_IMPORTED_MODULE_14__.formulas, () => this.getTableOffset(), data.rows.height);
        // data validation
        this.modalValidation = new _modal_validation__WEBPACK_IMPORTED_MODULE_10__["default"]();
        // contextMenu
        this.contextMenu = new _contextmenu__WEBPACK_IMPORTED_MODULE_7__["default"](() => this.getRect(), !showContextmenu);
        // selector
        this.selector = new _selector__WEBPACK_IMPORTED_MODULE_4__["default"](data);
        this.overlayerCEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-overlayer-content`)
            .children(this.editor.el, this.selector.el);
        this.overlayerEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_13__.cssPrefix}-overlayer`)
            .child(this.overlayerCEl);
        // sortFilter
        this.sortFilter = new _sort_filter__WEBPACK_IMPORTED_MODULE_11__["default"]();
        // root element
        this.el.children(this.tableEl, this.overlayerEl.el, this.rowResizer.el, this.colResizer.el, this.verticalScrollbar.el, this.horizontalScrollbar.el, this.contextMenu.el, this.modalValidation.el, this.sortFilter.el);
        // table
        this.table = new _table__WEBPACK_IMPORTED_MODULE_8__["default"](this.tableEl.el, data);
        sheetInitEvents.call(this);
        sheetReset.call(this);
        // init selector [0, 0]
        selectorSet.call(this, false, 0, 0);
    }
    on(eventName, func) {
        this.eventMap.on(eventName, func);
        return this;
    }
    trigger(eventName, ...args) {
        const { eventMap } = this;
        eventMap.fire(eventName, args);
    }
    resetData(data) {
        // before
        this.editor.clear();
        // after
        this.data = data;
        verticalScrollbarSet.call(this);
        horizontalScrollbarSet.call(this);
        this.toolbar.resetData(data);
        this.print.resetData(data);
        this.selector.resetData(data);
        this.table.resetData(data);
    }
    loadData(data) {
        this.data.setData(data);
        sheetReset.call(this);
        return this;
    }
    // freeze rows or cols
    freeze(ri, ci) {
        const { data } = this;
        data.setFreeze(ri, ci);
        sheetReset.call(this);
        return this;
    }
    undo() {
        this.data.undo();
        sheetReset.call(this);
    }
    redo() {
        this.data.redo();
        sheetReset.call(this);
    }
    reload() {
        sheetReset.call(this);
        return this;
    }
    getRect() {
        const { data } = this;
        return { width: data.viewWidth(), height: data.viewHeight() };
    }
    getTableOffset() {
        const { rows, cols } = this.data;
        const { width, height } = this.getRect();
        return {
            width: width - cols.indexWidth,
            height: height - rows.height,
            left: cols.indexWidth,
            top: rows.height,
        };
    }
}


/***/ }),

/***/ "./src/component/sort_filter.ts":
/*!**************************************!*\
  !*** ./src/component/sort_filter.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SortFilter)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button */ "./src/component/button.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");





function buildMenu(clsName) {
    return (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item ${clsName}`);
}
function buildSortItem(it) {
    return buildMenu('state').child((0,_locale_locale__WEBPACK_IMPORTED_MODULE_4__.t)(`sort.${it}`))
        .on('click.stop', () => this.itemClick(it));
}
function buildFilterBody(items) {
    const { filterbEl, filterValues } = this;
    filterbEl.html('');
    const itemKeys = Object.keys(items);
    itemKeys.forEach((it, index) => {
        const cnt = items[it];
        const active = filterValues.includes(it) ? 'checked' : '';
        filterbEl.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-item state ${active}`)
            .on('click.stop', () => this.filterClick(index, it))
            .children(it === '' ? (0,_locale_locale__WEBPACK_IMPORTED_MODULE_4__.t)('filter.empty') : it, (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').html(`(${cnt})`)));
    });
}
function resetFilterHeader() {
    const { filterhEl, filterValues, values } = this;
    filterhEl.html(`${filterValues.length} / ${values.length}`);
    filterhEl.checked(filterValues.length === values.length);
}
class SortFilter {
    filterbEl;
    filterhEl;
    el;
    sortAscEl;
    sortDescEl;
    ci;
    sortDesc;
    values;
    filterValues;
    ok;
    sort;
    constructor() {
        this.filterbEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-body`);
        this.filterhEl = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-header state`).on('click.stop', () => this.filterClick(0, 'all'));
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-sort-filter`).children(this.sortAscEl = buildSortItem.call(this, 'asc'), this.sortDescEl = buildSortItem.call(this, 'desc'), buildMenu('divider'), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-filter`).children(this.filterhEl, this.filterbEl), (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}-buttons`).children(new _button__WEBPACK_IMPORTED_MODULE_1__["default"]('cancel').on('click', () => this.btnClick('cancel')), new _button__WEBPACK_IMPORTED_MODULE_1__["default"]('ok', 'primary').on('click', () => this.btnClick('ok')))).hide();
        // this.setFilters(['test1', 'test2', 'text3']);
        this.ci = null;
        this.sortDesc = null;
        this.values = null;
        this.filterValues = [];
    }
    btnClick(it) {
        if (it === 'ok') {
            const { ci, sort, filterValues } = this;
            if (this.ok) {
                this.ok(ci, sort, 'in', filterValues);
            }
        }
        this.hide();
    }
    itemClick(it) {
        // console.log('it:', it);
        this.sort = it;
        const { sortAscEl, sortDescEl } = this;
        sortAscEl.checked(it === 'asc');
        sortDescEl.checked(it === 'desc');
    }
    filterClick(index, it) {
        // console.log('index:', index, it);
        const { filterbEl, filterValues, values } = this;
        const children = filterbEl.children();
        if (it === 'all') {
            if (children.length === filterValues.length) {
                this.filterValues = [];
                children.forEach(i => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(i).checked(false));
            }
            else {
                this.filterValues = Array.from(values);
                children.forEach(i => (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(i).checked(true));
            }
        }
        else {
            const checked = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)(children[index]).toggle('checked');
            if (checked) {
                filterValues.push(it);
            }
            else {
                filterValues.splice(filterValues.findIndex(i => i === it), 1);
            }
        }
        resetFilterHeader.call(this);
    }
    // v: autoFilter
    // items: {value: cnt}
    // sort { ci, order }
    set(ci, items, filter, sort) {
        this.ci = ci;
        const { sortAscEl, sortDescEl } = this;
        if (sort !== null) {
            this.sort = sort.order;
            sortAscEl.checked(sort.asc());
            sortDescEl.checked(sort.desc());
        }
        else {
            this.sortDesc = null;
            sortAscEl.checked(false);
            sortDescEl.checked(false);
        }
        // this.setFilters(items, filter);
        this.values = Object.keys(items);
        this.filterValues = filter ? Array.from(filter.value) : Object.keys(items);
        buildFilterBody.call(this, items, filter);
        resetFilterHeader.call(this);
    }
    setOffset(v) {
        this.el.offset(v).show();
        let tindex = 1;
        (0,_event__WEBPACK_IMPORTED_MODULE_2__.bindClickoutside)(this.el, () => {
            if (tindex <= 0) {
                this.hide();
            }
            tindex -= 1;
        });
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_2__.unbindClickoutside)(this.el);
    }
}


/***/ }),

/***/ "./src/component/suggest.ts":
/*!**********************************!*\
  !*** ./src/component/suggest.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Suggest)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");



function inputMovePrev(evt) {
    evt.preventDefault();
    evt.stopPropagation();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    if (this.itemIndex >= 0)
        filterItems[this.itemIndex].toggle();
    this.itemIndex -= 1;
    if (this.itemIndex < 0) {
        this.itemIndex = filterItems.length - 1;
    }
    filterItems[this.itemIndex].toggle();
}
function inputMoveNext(evt) {
    evt.stopPropagation();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    if (this.itemIndex >= 0)
        filterItems[this.itemIndex].toggle();
    this.itemIndex += 1;
    if (this.itemIndex > filterItems.length - 1) {
        this.itemIndex = 0;
    }
    filterItems[this.itemIndex].toggle();
}
function inputEnter(evt) {
    evt.preventDefault();
    const { filterItems } = this;
    if (filterItems.length <= 0)
        return;
    evt.stopPropagation();
    if (this.itemIndex < 0)
        this.itemIndex = 0;
    filterItems[this.itemIndex].el.click();
    this.hide();
}
function inputKeydownHandler(evt) {
    const { keyCode } = evt;
    if (evt.ctrlKey) {
        evt.stopPropagation();
    }
    switch (keyCode) {
        case 37: // left
            evt.stopPropagation();
            break;
        case 38: // up
            inputMovePrev.call(this, evt);
            break;
        case 39: // right
            evt.stopPropagation();
            break;
        case 40: // down
            inputMoveNext.call(this, evt);
            break;
        case 13: // enter
            inputEnter.call(this, evt);
            break;
        case 9:
            inputEnter.call(this, evt);
            break;
        default:
            evt.stopPropagation();
            break;
    }
}
class Suggest {
    filterItems;
    items;
    el;
    itemClick;
    itemIndex;
    constructor(items, itemClick, width = '200px') {
        this.filterItems = [];
        this.items = items;
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-suggest`).css('width', width).hide();
        this.itemClick = itemClick;
        this.itemIndex = -1;
    }
    setOffset(v) {
        this.el.cssRemoveKeys('top', 'bottom')
            .offset(v);
    }
    hide() {
        const { el } = this;
        this.filterItems = [];
        this.itemIndex = -1;
        el.hide();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.unbindClickoutside)(this.el.parent());
    }
    setItems(items) {
        this.items = items;
        // this.search('');
    }
    search(word) {
        let { items } = this;
        if (!/^\s*$/.test(word)) {
            items = items.filter(it => (it.key || it).startsWith(word.toUpperCase()));
        }
        items = items.map((it) => {
            let { title } = it;
            if (title) {
                if (typeof title === 'function') {
                    title = title();
                }
            }
            else {
                title = it;
            }
            const item = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-item`)
                .child(title)
                .on('click.stop', () => {
                this.itemClick(it);
                this.hide();
            });
            if (it.label) {
                item.child((0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', 'label').html(it.label));
            }
            return item;
        });
        this.filterItems = items;
        if (items.length <= 0) {
            return;
        }
        const { el } = this;
        // items[0].toggle();
        el.html('').children(...items).show();
        (0,_event__WEBPACK_IMPORTED_MODULE_1__.bindClickoutside)(el.parent(), () => { this.hide(); });
    }
    bindInputEvents(input) {
        input.on('keydown', evt => inputKeydownHandler.call(this, evt));
    }
}


/***/ }),

/***/ "./src/component/table.ts":
/*!********************************!*\
  !*** ./src/component/table.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "renderCell": () => (/* binding */ renderCell)
/* harmony export */ });
/* harmony import */ var _core_alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _core_font__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/font */ "./src/core/font.ts");
/* harmony import */ var _core_cell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/cell */ "./src/core/cell.ts");
/* harmony import */ var _core_formula__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/formula */ "./src/core/formula.ts");
/* harmony import */ var _core_format__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/format */ "./src/core/format.ts");
/* harmony import */ var _canvas_draw__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../canvas/draw */ "./src/canvas/draw.ts");






// gobal var
const cellPaddingWidth = 5;
const tableFixedHeaderCleanStyle = { fillStyle: '#f4f5f8' };
const tableGridStyle = {
    fillStyle: '#fff',
    lineWidth: _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.thinLineWidth,
    strokeStyle: '#e6e6e6',
};
function tableFixedHeaderStyle() {
    return {
        textAlign: 'center',
        textBaseline: 'middle',
        font: `500 ${(0,_canvas_draw__WEBPACK_IMPORTED_MODULE_5__.npx)(12)}px Source Sans Pro`,
        fillStyle: '#585757',
        lineWidth: (0,_canvas_draw__WEBPACK_IMPORTED_MODULE_5__.thinLineWidth)(),
        strokeStyle: '#e6e6e6',
    };
}
function getDrawBox(data, rindex, cindex, yoffset = 0) {
    const { left, top, width, height, } = data.cellRect(rindex, cindex);
    return new _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.DrawBox(left, top + yoffset, width, height, cellPaddingWidth);
}
/*
function renderCellBorders(bboxes, translateFunc) {
  const { draw } = this;
  if (bboxes) {
    const rset = new Set();
    // console.log('bboxes:', bboxes);
    bboxes.forEach(({ ri, ci, box }) => {
      if (!rset.has(ri)) {
        rset.add(ri);
        translateFunc(ri);
      }
      draw.strokeBorders(box);
    });
  }
}
*/
function renderCell(draw, data, rindex, cindex, yoffset = 0) {
    const { sortedRowMap, rows, cols } = data;
    if (rows.isHide(rindex) || cols.isHide(cindex))
        return;
    let nrindex = rindex;
    if (sortedRowMap.has(rindex)) {
        nrindex = sortedRowMap.get(rindex);
    }
    const cell = data.getCell(nrindex, cindex);
    if (cell === null)
        return;
    let frozen = false;
    if ('editable' in cell && cell.editable === false) {
        frozen = true;
    }
    const style = data.getCellStyleOrDefault(nrindex, cindex);
    const dbox = getDrawBox(data, rindex, cindex, yoffset);
    dbox.bgcolor = style.bgcolor;
    if (style.border !== undefined) {
        dbox.setBorders(style.border);
        // bboxes.push({ ri: rindex, ci: cindex, box: dbox });
        draw.strokeBorders(dbox);
    }
    draw.rect(dbox, () => {
        // render text
        let cellText = '';
        if (!data.settings.evalPaused) {
            cellText = _core_cell__WEBPACK_IMPORTED_MODULE_2__["default"].render(cell.text || '', _core_formula__WEBPACK_IMPORTED_MODULE_3__.formulam, (y, x) => (data.getCellTextOrDefault(x, y)));
        }
        else {
            cellText = cell.text || '';
        }
        if (style.format) {
            // console.log(data.formatm, '>>', cell.format);
            cellText = _core_format__WEBPACK_IMPORTED_MODULE_4__.formatm[style.format].render(cellText);
        }
        const font = Object.assign({}, style.font);
        font.size = (0,_core_font__WEBPACK_IMPORTED_MODULE_1__.getFontSizePxByPt)(font.size);
        // console.log('style:', style);
        draw.text(cellText, dbox, {
            align: style.align,
            valign: style.valign,
            font,
            color: style.color,
            strike: style.strike,
            underline: style.underline,
        }, style.textwrap);
        // error
        const error = data.validations.getError(rindex, cindex);
        if (error) {
            // console.log('error:', rindex, cindex, error);
            draw.error(dbox);
        }
        if (frozen) {
            draw.frozen(dbox);
        }
    });
}
function renderAutofilter(viewRange) {
    const { data, draw } = this;
    if (viewRange) {
        const { autoFilter } = data;
        if (!autoFilter.active())
            return;
        const afRange = autoFilter.hrange();
        if (viewRange.intersects(afRange)) {
            afRange.each((ri, ci) => {
                const dbox = getDrawBox(data, ri, ci);
                draw.dropdown(dbox);
            });
        }
    }
}
function renderContent(viewRange, fw, fh, tx, ty) {
    const { draw, data } = this;
    draw.save();
    draw.translate(fw, fh)
        .translate(tx, ty);
    const { exceptRowSet } = data;
    // const exceptRows = Array.from(exceptRowSet);
    const filteredTranslateFunc = (ri) => {
        const ret = exceptRowSet.has(ri);
        if (ret) {
            const height = data.rows.getHeight(ri);
            draw.translate(0, -height);
        }
        return !ret;
    };
    const exceptRowTotalHeight = data.exceptRowTotalHeight(viewRange.sri, viewRange.eri);
    // 1 render cell
    draw.save();
    draw.translate(0, -exceptRowTotalHeight);
    viewRange.each((ri, ci) => {
        renderCell(draw, data, ri, ci);
    }, ri => filteredTranslateFunc(ri));
    draw.restore();
    // 2 render mergeCell
    const rset = new Set();
    draw.save();
    draw.translate(0, -exceptRowTotalHeight);
    data.eachMergesInView(viewRange, ({ sri, sci, eri }) => {
        if (!exceptRowSet.has(sri)) {
            renderCell(draw, data, sri, sci);
        }
        else if (!rset.has(sri)) {
            rset.add(sri);
            const height = data.rows.sumHeight(sri, eri + 1);
            draw.translate(0, -height);
        }
    });
    draw.restore();
    // 3 render autofilter
    renderAutofilter.call(this, viewRange);
    draw.restore();
}
function renderSelectedHeaderCell(x, y, w, h) {
    const { draw } = this;
    draw.save();
    draw.attr({ fillStyle: 'rgba(75, 137, 255, 0.08)' })
        .fillRect(x, y, w, h);
    draw.restore();
}
// viewRange
// type: all | left | top
// w: the fixed width of header
// h: the fixed height of header
// tx: moving distance on x-axis
// ty: moving distance on y-axis
function renderFixedHeaders(type, viewRange, w, h, tx, ty) {
    const { draw, data } = this;
    const sumHeight = viewRange.h; // rows.sumHeight(viewRange.sri, viewRange.eri + 1);
    const sumWidth = viewRange.w; // cols.sumWidth(viewRange.sci, viewRange.eci + 1);
    const nty = ty + h;
    const ntx = tx + w;
    draw.save();
    // draw rect background
    draw.attr(tableFixedHeaderCleanStyle);
    if (type === 'all' || type === 'left')
        draw.fillRect(0, nty, w, sumHeight);
    if (type === 'all' || type === 'top')
        draw.fillRect(ntx, 0, sumWidth, h);
    const { sri, sci, eri, eci, } = data.selector.range;
    // console.log(data.selectIndexes);
    // draw text
    // text font, align...
    draw.attr(tableFixedHeaderStyle());
    // y-header-text
    if (type === 'all' || type === 'left') {
        data.rowEach(viewRange.sri, viewRange.eri, (i, y1, rowHeight) => {
            const y = nty + y1;
            const ii = i;
            draw.line([0, y], [w, y]);
            if (sri <= ii && ii < eri + 1) {
                renderSelectedHeaderCell.call(this, 0, y, w, rowHeight);
            }
            draw.fillText(ii + 1, w / 2, y + (rowHeight / 2));
            if (i > 0 && data.rows.isHide(i - 1)) {
                draw.save();
                draw.attr({ strokeStyle: '#c6c6c6' });
                draw.line([5, y + 5], [w - 5, y + 5]);
                draw.restore();
            }
        });
        draw.line([0, sumHeight + nty], [w, sumHeight + nty]);
        draw.line([w, nty], [w, sumHeight + nty]);
    }
    // x-header-text
    if (type === 'all' || type === 'top') {
        data.colEach(viewRange.sci, viewRange.eci, (i, x1, colWidth) => {
            const x = ntx + x1;
            const ii = i;
            draw.line([x, 0], [x, h]);
            if (sci <= ii && ii < eci + 1) {
                renderSelectedHeaderCell.call(this, x, 0, colWidth, h);
            }
            draw.fillText((0,_core_alphabet__WEBPACK_IMPORTED_MODULE_0__.stringAt)(ii), x + (colWidth / 2), h / 2);
            if (i > 0 && data.cols.isHide(i - 1)) {
                draw.save();
                draw.attr({ strokeStyle: '#c6c6c6' });
                draw.line([x + 5, 5], [x + 5, h - 5]);
                draw.restore();
            }
        });
        draw.line([sumWidth + ntx, 0], [sumWidth + ntx, h]);
        draw.line([0, h], [sumWidth + ntx, h]);
    }
    draw.restore();
}
function renderFixedLeftTopCell(fw, fh) {
    const { draw } = this;
    draw.save();
    // left-top-cell
    draw.attr({ fillStyle: '#f4f5f8' })
        .fillRect(0, 0, fw, fh);
    draw.restore();
}
function renderContentGrid({ sri, sci, eri, eci, w, h, }, fw, fh, tx, ty) {
    const { draw, data } = this;
    const { settings } = data;
    draw.save();
    draw.attr(tableGridStyle)
        .translate(fw + tx, fh + ty);
    // const sumWidth = cols.sumWidth(sci, eci + 1);
    // const sumHeight = rows.sumHeight(sri, eri + 1);
    // console.log('sumWidth:', sumWidth);
    // draw.clearRect(0, 0, w, h);
    if (!settings.showGrid) {
        draw.restore();
        return;
    }
    // console.log('rowStart:', rowStart, ', rowLen:', rowLen);
    data.rowEach(sri, eri, (i, y, ch) => {
        // console.log('y:', y);
        if (i !== sri)
            draw.line([0, y], [w, y]);
        if (i === eri)
            draw.line([0, y + ch], [w, y + ch]);
    });
    data.colEach(sci, eci, (i, x, cw) => {
        if (i !== sci)
            draw.line([x, 0], [x, h]);
        if (i === eci)
            draw.line([x + cw, 0], [x + cw, h]);
    });
    draw.restore();
}
function renderFreezeHighlightLine(fw, fh, ftw, fth) {
    const { draw, data } = this;
    const twidth = data.viewWidth() - fw;
    const theight = data.viewHeight() - fh;
    draw.save()
        .translate(fw, fh)
        .attr({ strokeStyle: 'rgba(75, 137, 255, .6)' });
    draw.line([0, fth], [twidth, fth]);
    draw.line([ftw, 0], [ftw, theight]);
    draw.restore();
}
/** end */
class Table {
    el;
    draw;
    data;
    constructor(el, data) {
        this.el = el;
        this.draw = new _canvas_draw__WEBPACK_IMPORTED_MODULE_5__.Draw(el, data.viewWidth(), data.viewHeight());
        this.data = data;
    }
    resetData(data) {
        this.data = data;
        this.render();
    }
    render() {
        // resize canvas
        const { data } = this;
        const { rows, cols } = data;
        // fixed width of header
        const fw = cols.indexWidth;
        // fixed height of header
        const fh = rows.height;
        this.draw.resize(data.viewWidth(), data.viewHeight());
        this.clear();
        const viewRange = data.viewRange();
        // renderAll.call(this, viewRange, data.scroll);
        const tx = data.freezeTotalWidth();
        const ty = data.freezeTotalHeight();
        const { x, y } = data.scroll;
        // 1
        renderContentGrid.call(this, viewRange, fw, fh, tx, ty);
        renderContent.call(this, viewRange, fw, fh, -x, -y);
        renderFixedHeaders.call(this, 'all', viewRange, fw, fh, tx, ty);
        renderFixedLeftTopCell.call(this, fw, fh);
        const [fri, fci] = data.freeze;
        if (fri > 0 || fci > 0) {
            // 2
            if (fri > 0) {
                const vr = viewRange.clone();
                vr.sri = 0;
                vr.eri = fri - 1;
                vr.h = ty;
                renderContentGrid.call(this, vr, fw, fh, tx, 0);
                renderContent.call(this, vr, fw, fh, -x, 0);
                renderFixedHeaders.call(this, 'top', vr, fw, fh, tx, 0);
            }
            // 3
            if (fci > 0) {
                const vr = viewRange.clone();
                vr.sci = 0;
                vr.eci = fci - 1;
                vr.w = tx;
                renderContentGrid.call(this, vr, fw, fh, 0, ty);
                renderFixedHeaders.call(this, 'left', vr, fw, fh, 0, ty);
                renderContent.call(this, vr, fw, fh, 0, -y);
            }
            // 4
            const freezeViewRange = data.freezeViewRange();
            renderContentGrid.call(this, freezeViewRange, fw, fh, 0, 0);
            renderFixedHeaders.call(this, 'all', freezeViewRange, fw, fh, 0, 0);
            renderContent.call(this, freezeViewRange, fw, fh, 0, 0);
            // 5
            renderFreezeHighlightLine.call(this, fw, fh, tx, ty);
        }
    }
    clear() {
        this.draw.clear();
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Table);


/***/ }),

/***/ "./src/component/toolbar/align.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/align.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Align)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_align__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_align */ "./src/component/dropdown_align.ts");


class Align extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(value) {
        super('align', '', value);
        this.dd = new _dropdown_align__WEBPACK_IMPORTED_MODULE_1__["default"](['left', 'center', 'right'], value);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/autofilter.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/autofilter.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Autofilter)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Autofilter extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('autofilter');
    }
    setState() { }
}


/***/ }),

/***/ "./src/component/toolbar/bold.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/bold.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Bold)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Bold extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('font-bold', 'Ctrl+B');
    }
}


/***/ }),

/***/ "./src/component/toolbar/border.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/border.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Border)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_border__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_border */ "./src/component/dropdown_border.ts");


class Border extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('border');
        this.dd = new _dropdown_border__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/clearformat.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/clearformat.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Clearformat)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Clearformat extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('clearformat');
    }
}


/***/ }),

/***/ "./src/component/toolbar/dropdown_item.ts":
/*!************************************************!*\
  !*** ./src/component/toolbar/dropdown_item.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DropdownItem": () => (/* binding */ DropdownItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");

class DropdownItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    dd;
    getValue(v) {
        return v;
    }
    setState(v) {
        if (v) {
            // this.value = v;
            this.dd.setTitle(v);
        }
    }
}


/***/ }),

/***/ "./src/component/toolbar/fill_color.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/fill_color.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FillColor)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_color */ "./src/component/dropdown_color.ts");


class FillColor extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(color) {
        super('bgcolor', undefined, color);
        this.dd = new _dropdown_color__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag, color);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/font.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/font.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Font)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_font__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_font */ "./src/component/dropdown_font.ts");


class Font extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('font-name');
        this.dd = new _dropdown_font__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/font_size.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/font_size.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_fontsize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_fontsize */ "./src/component/dropdown_fontsize.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('font-size');
        this.dd = new _dropdown_fontsize__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.pt;
    }
}


/***/ }),

/***/ "./src/component/toolbar/format.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/format.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_format */ "./src/component/dropdown_format.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('format');
        this.dd = new _dropdown_format__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/formula.ts":
/*!******************************************!*\
  !*** ./src/component/toolbar/formula.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Format)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_formula__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_formula */ "./src/component/dropdown_formula.ts");


class Format extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor() {
        super('formula');
        this.dd = new _dropdown_formula__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
    getValue(it) {
        return it.key;
    }
}


/***/ }),

/***/ "./src/component/toolbar/freeze.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/freeze.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Freeze)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Freeze extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('freeze');
    }
}


/***/ }),

/***/ "./src/component/toolbar/icon_item.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/icon_item.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ IconItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");


class IconItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    element() {
        return super.element()
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag))
            .on('click', () => this.change(this.tag));
    }
    setState(disabled) {
        this.el.disabled(disabled);
    }
}


/***/ }),

/***/ "./src/component/toolbar/index.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Toolbar)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../event */ "./src/component/event.ts");
/* harmony import */ var _align__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./align */ "./src/component/toolbar/align.ts");
/* harmony import */ var _autofilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./autofilter */ "./src/component/toolbar/autofilter.ts");
/* harmony import */ var _bold__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./bold */ "./src/component/toolbar/bold.ts");
/* harmony import */ var _border__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./border */ "./src/component/toolbar/border.ts");
/* harmony import */ var _clearformat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./clearformat */ "./src/component/toolbar/clearformat.ts");
/* harmony import */ var _fill_color__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./fill_color */ "./src/component/toolbar/fill_color.ts");
/* harmony import */ var _font__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./font */ "./src/component/toolbar/font.ts");
/* harmony import */ var _font_size__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./font_size */ "./src/component/toolbar/font_size.ts");
/* harmony import */ var _format__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./format */ "./src/component/toolbar/format.ts");
/* harmony import */ var _formula__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./formula */ "./src/component/toolbar/formula.ts");
/* harmony import */ var _freeze__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./freeze */ "./src/component/toolbar/freeze.ts");
/* harmony import */ var _italic__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./italic */ "./src/component/toolbar/italic.ts");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./merge */ "./src/component/toolbar/merge.ts");
/* harmony import */ var _more__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./more */ "./src/component/toolbar/more.ts");
/* harmony import */ var _paintformat__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./paintformat */ "./src/component/toolbar/paintformat.ts");
/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./print */ "./src/component/toolbar/print.ts");
/* harmony import */ var _redo__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./redo */ "./src/component/toolbar/redo.ts");
/* harmony import */ var _strike__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./strike */ "./src/component/toolbar/strike.ts");
/* harmony import */ var _text_color__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./text_color */ "./src/component/toolbar/text_color.ts");
/* harmony import */ var _textwrap__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./textwrap */ "./src/component/toolbar/textwrap.ts");
/* harmony import */ var _underline__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./underline */ "./src/component/toolbar/underline.ts");
/* harmony import */ var _undo__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./undo */ "./src/component/toolbar/undo.ts");
/* harmony import */ var _valign__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./valign */ "./src/component/toolbar/valign.ts");
/* global window */



























function buildDivider() {
    return (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-divider`);
}
function genBtn(it) {
    const btn = new _item__WEBPACK_IMPORTED_MODULE_15__["default"]();
    btn.el.on('click', () => {
        if (it.onClick)
            it.onClick(this.data.getData(), this.data);
    });
    btn.tip = it.tip || '';
    let { el } = it;
    if (it.icon) {
        el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('img').attr('src', it.icon);
    }
    if (el) {
        const icon = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-icon`);
        icon.child(el);
        btn.el.child(icon);
    }
    return btn;
}
class Toolbar {
    data;
    change;
    widthFn;
    isHide;
    items;
    undoEl;
    redoEl;
    paintformatEl;
    clearformatEl;
    formatEl;
    fontEl;
    fontSizeEl;
    boldEl;
    italicEl;
    underlineEl;
    strikeEl;
    textColorEl;
    fillColorEl;
    borderEl;
    mergeEl;
    alignEl;
    valignEl;
    textwrapEl;
    freezeEl;
    autofilterEl;
    formulaEl;
    moreEl;
    el;
    btns;
    btns2;
    constructor(data, widthFn, isHide = false) {
        this.data = data;
        this.change = () => { };
        this.widthFn = widthFn;
        this.isHide = isHide;
        const style = data.defaultStyle();
        this.items = [
            [
                (this.undoEl = new _undo__WEBPACK_IMPORTED_MODULE_25__["default"]()),
                (this.redoEl = new _redo__WEBPACK_IMPORTED_MODULE_20__["default"]()),
                new _print__WEBPACK_IMPORTED_MODULE_19__["default"](),
                (this.paintformatEl = new _paintformat__WEBPACK_IMPORTED_MODULE_18__["default"]()),
                (this.clearformatEl = new _clearformat__WEBPACK_IMPORTED_MODULE_7__["default"]()),
            ],
            buildDivider(),
            [(this.formatEl = new _format__WEBPACK_IMPORTED_MODULE_11__["default"]())],
            buildDivider(),
            [(this.fontEl = new _font__WEBPACK_IMPORTED_MODULE_9__["default"]()), (this.fontSizeEl = new _font_size__WEBPACK_IMPORTED_MODULE_10__["default"]())],
            buildDivider(),
            [
                (this.boldEl = new _bold__WEBPACK_IMPORTED_MODULE_5__["default"]()),
                (this.italicEl = new _italic__WEBPACK_IMPORTED_MODULE_14__["default"]()),
                (this.underlineEl = new _underline__WEBPACK_IMPORTED_MODULE_24__["default"]()),
                (this.strikeEl = new _strike__WEBPACK_IMPORTED_MODULE_21__["default"]()),
                (this.textColorEl = new _text_color__WEBPACK_IMPORTED_MODULE_22__["default"](style.color)),
            ],
            buildDivider(),
            [
                (this.fillColorEl = new _fill_color__WEBPACK_IMPORTED_MODULE_8__["default"](style.bgcolor)),
                (this.borderEl = new _border__WEBPACK_IMPORTED_MODULE_6__["default"]()),
                (this.mergeEl = new _merge__WEBPACK_IMPORTED_MODULE_16__["default"]()),
            ],
            buildDivider(),
            [
                (this.alignEl = new _align__WEBPACK_IMPORTED_MODULE_3__["default"](style.align)),
                (this.valignEl = new _valign__WEBPACK_IMPORTED_MODULE_26__["default"](style.valign)),
                (this.textwrapEl = new _textwrap__WEBPACK_IMPORTED_MODULE_23__["default"]()),
            ],
            buildDivider(),
            [
                (this.freezeEl = new _freeze__WEBPACK_IMPORTED_MODULE_13__["default"]()),
                (this.autofilterEl = new _autofilter__WEBPACK_IMPORTED_MODULE_4__["default"]()),
                (this.formulaEl = new _formula__WEBPACK_IMPORTED_MODULE_12__["default"]()),
            ],
        ];
        const { extendToolbar = {} } = data.settings;
        if (extendToolbar.left && extendToolbar.left.length > 0) {
            this.items.unshift(buildDivider());
            const btns = extendToolbar.left.map(genBtn.bind(this));
            this.items.unshift(btns);
        }
        if (extendToolbar.right && extendToolbar.right.length > 0) {
            this.items.push(buildDivider());
            const btns = extendToolbar.right.map(genBtn.bind(this));
            this.items.push(btns);
        }
        this.items.push([(this.moreEl = new _more__WEBPACK_IMPORTED_MODULE_17__["default"]())]);
        this.el = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar`);
        this.btns = (0,_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-btns`);
        this.items.forEach((it) => {
            if (Array.isArray(it)) {
                it.forEach((i) => {
                    this.btns.child(i.el);
                    i.change = (...args) => {
                        this.change(...args);
                    };
                });
            }
            else {
                this.btns.child(it.el);
            }
        });
        this.el.child(this.btns);
        if (isHide) {
            this.el.hide();
        }
        else {
            this.reset();
            setTimeout(() => {
                this.initBtns2();
                this.moreResize();
            }, 0);
            (0,_event__WEBPACK_IMPORTED_MODULE_2__.bind)(window, 'resize', () => {
                this.moreResize();
            });
        }
    }
    moreResize() {
        const { el, btns, moreEl, btns2 } = this;
        const { moreBtns, contentEl } = moreEl.dd;
        el.css('width', `${this.widthFn()}px`);
        const elBox = el.box();
        let sumWidth = 160;
        let sumWidth2 = 12;
        const list1 = [];
        const list2 = [];
        btns2.forEach(([it, w], index) => {
            sumWidth += w;
            if (index === btns2.length - 1 || sumWidth < elBox.width) {
                list1.push(it);
            }
            else {
                sumWidth2 += w;
                list2.push(it);
            }
        });
        btns.html('').children(...list1);
        moreBtns.html('').children(...list2);
        contentEl.css('width', `${sumWidth2}px`);
        if (list2.length > 0) {
            moreEl.show();
        }
        else {
            moreEl.hide();
        }
    }
    initBtns2() {
        this.btns2 = [];
        this.items.forEach((it) => {
            if (Array.isArray(it)) {
                it.forEach(({ el }) => {
                    const rect = el.box();
                    const { marginLeft, marginRight } = el.computedStyle();
                    this.btns2.push([
                        el,
                        rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10),
                    ]);
                });
            }
            else {
                const rect = it.box();
                const { marginLeft, marginRight } = it.computedStyle();
                this.btns2.push([
                    it,
                    rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10),
                ]);
            }
        });
    }
    paintformatActive() {
        return this.paintformatEl.active();
    }
    paintformatToggle() {
        this.paintformatEl.toggle();
    }
    trigger(type) {
        this[`${type}El`].click();
    }
    resetData(data) {
        this.data = data;
        this.reset();
    }
    reset() {
        if (this.isHide)
            return;
        const { data } = this;
        const style = data.getSelectedCellStyle();
        // console.log('canUndo:', data.canUndo());
        this.undoEl.setState(!data.canUndo());
        this.redoEl.setState(!data.canRedo());
        this.mergeEl.setState(data.canUnmerge(), !data.selector.multiple());
        // this.autofilterEl.setState(!data.canAutofilter());
        // this.mergeEl.disabled();
        // console.log('selectedCell:', style, cell);
        const { font, format } = style;
        this.formatEl.setState(format);
        this.fontEl.setState(font.name);
        this.fontSizeEl.setState(font.size);
        this.boldEl.setState(font.bold);
        this.italicEl.setState(font.italic);
        this.underlineEl.setState(style.underline);
        this.strikeEl.setState(style.strike);
        this.textColorEl.setState(style.color);
        this.fillColorEl.setState(style.bgcolor);
        this.alignEl.setState(style.align);
        this.valignEl.setState(style.valign);
        this.textwrapEl.setState(style.textwrap);
        // console.log('freeze is Active:', data.freezeIsActive());
        this.freezeEl.setState(data.freezeIsActive());
    }
}


/***/ }),

/***/ "./src/component/toolbar/italic.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/italic.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Italic)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Italic extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('font-italic', 'Ctrl+I');
    }
}


/***/ }),

/***/ "./src/component/toolbar/item.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/item.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Item)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tooltip */ "./src/component/tooltip.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../locale/locale */ "./src/locale/locale.ts");




class Item {
    tip;
    tag;
    shortcut;
    // value: any;
    el;
    change;
    // tooltip
    // tag: the subclass type
    // shortcut: shortcut key
    constructor(tag, shortcut, value) {
        this.tip = '';
        if (tag) {
            this.tip = (0,_locale_locale__WEBPACK_IMPORTED_MODULE_3__.t)(`toolbar.${tag.replace(/-[a-z]/g, (c) => c[1].toUpperCase())}`);
        }
        if (shortcut) {
            this.tip += ` (${shortcut})`;
        }
        this.tag = tag;
        this.shortcut = shortcut;
        // this.value = value;
        this.el = this.element();
        this.change = () => { };
    }
    element() {
        const { tip } = this;
        return (0,_element__WEBPACK_IMPORTED_MODULE_2__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_0__.cssPrefix}-toolbar-btn`)
            .on('mouseenter', (evt) => {
            if (this.tip)
                (0,_tooltip__WEBPACK_IMPORTED_MODULE_1__.tooltip)(this.tip, evt.target);
        })
            .attr('data-tooltip', tip);
    }
    setState(...args) { }
}


/***/ }),

/***/ "./src/component/toolbar/merge.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/merge.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Merge)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Merge extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('merge');
    }
    setState(active, disabled) {
        this.el.active(active).disabled(disabled);
    }
}


/***/ }),

/***/ "./src/component/toolbar/more.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/more.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ More)
/* harmony export */ });
/* harmony import */ var _dropdown__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dropdown */ "./src/component/dropdown.ts");
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./src/config.ts");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../element */ "./src/component/element.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");





class DropdownMore extends _dropdown__WEBPACK_IMPORTED_MODULE_0__["default"] {
    moreBtns;
    constructor() {
        const icon = new _icon__WEBPACK_IMPORTED_MODULE_4__["default"]('ellipsis');
        const moreBtns = (0,_element__WEBPACK_IMPORTED_MODULE_3__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-toolbar-more`);
        super(icon, 'auto', false, 'bottom-right', moreBtns);
        this.moreBtns = moreBtns;
        this.contentEl.css('max-width', '420px');
    }
}
class More extends _dropdown_item__WEBPACK_IMPORTED_MODULE_1__.DropdownItem {
    constructor() {
        super('more');
        this.dd = new DropdownMore();
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
        this.el.hide();
    }
    show() {
        this.el.show();
    }
    hide() {
        this.el.hide();
    }
}


/***/ }),

/***/ "./src/component/toolbar/paintformat.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/paintformat.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Paintformat)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Paintformat extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('paintformat');
    }
    setState() { }
}


/***/ }),

/***/ "./src/component/toolbar/print.ts":
/*!****************************************!*\
  !*** ./src/component/toolbar/print.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Print)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Print extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('print', 'Ctrl+P');
    }
}


/***/ }),

/***/ "./src/component/toolbar/redo.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/redo.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Redo)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Redo extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('redo', 'Ctrl+Y');
    }
}


/***/ }),

/***/ "./src/component/toolbar/strike.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/strike.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Strike)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Strike extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('strike', 'Ctrl+U');
    }
}


/***/ }),

/***/ "./src/component/toolbar/text_color.ts":
/*!*********************************************!*\
  !*** ./src/component/toolbar/text_color.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TextColor)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_color */ "./src/component/dropdown_color.ts");


class TextColor extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(color) {
        super('color', undefined, color);
        this.dd = new _dropdown_color__WEBPACK_IMPORTED_MODULE_1__["default"](this.tag, color);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/toolbar/textwrap.ts":
/*!*******************************************!*\
  !*** ./src/component/toolbar/textwrap.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Textwrap)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Textwrap extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('textwrap');
    }
}


/***/ }),

/***/ "./src/component/toolbar/toggle_item.ts":
/*!**********************************************!*\
  !*** ./src/component/toolbar/toggle_item.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ToggleItem)
/* harmony export */ });
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item */ "./src/component/toolbar/item.ts");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../icon */ "./src/component/icon.ts");


class ToggleItem extends _item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    element() {
        const { tag } = this;
        return super
            .element()
            .child(new _icon__WEBPACK_IMPORTED_MODULE_1__["default"](tag))
            .on('click', () => this.click());
    }
    click() {
        this.change(this.tag, this.toggle());
    }
    setState(active, disabled) {
        this.el.active(active);
    }
    toggle() {
        return this.el.toggle();
    }
    active() {
        return this.el.hasClass('active');
    }
}


/***/ }),

/***/ "./src/component/toolbar/underline.ts":
/*!********************************************!*\
  !*** ./src/component/toolbar/underline.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Underline)
/* harmony export */ });
/* harmony import */ var _toggle_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toggle_item */ "./src/component/toolbar/toggle_item.ts");

class Underline extends _toggle_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('underline', 'Ctrl+U');
    }
}


/***/ }),

/***/ "./src/component/toolbar/undo.ts":
/*!***************************************!*\
  !*** ./src/component/toolbar/undo.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Undo)
/* harmony export */ });
/* harmony import */ var _icon_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon_item */ "./src/component/toolbar/icon_item.ts");

class Undo extends _icon_item__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor() {
        super('undo', 'Ctrl+Z');
    }
}


/***/ }),

/***/ "./src/component/toolbar/valign.ts":
/*!*****************************************!*\
  !*** ./src/component/toolbar/valign.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Valign)
/* harmony export */ });
/* harmony import */ var _dropdown_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dropdown_item */ "./src/component/toolbar/dropdown_item.ts");
/* harmony import */ var _dropdown_align__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dropdown_align */ "./src/component/dropdown_align.ts");


class Valign extends _dropdown_item__WEBPACK_IMPORTED_MODULE_0__.DropdownItem {
    constructor(value) {
        super('valign', '', value);
        this.dd = new _dropdown_align__WEBPACK_IMPORTED_MODULE_1__["default"](['top', 'middle', 'bottom'], value);
        this.dd.change = (it) => this.change(this.tag, this.getValue(it));
        this.el.child(this.dd);
    }
}


/***/ }),

/***/ "./src/component/tooltip.ts":
/*!**********************************!*\
  !*** ./src/component/tooltip.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "tooltip": () => (/* binding */ tooltip)
/* harmony export */ });
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ "./src/component/element.ts");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event */ "./src/component/event.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./src/config.ts");
/* global document */



function tooltip(html, target) {
    if (target.classList.contains('active')) {
        return;
    }
    const { left, top, width, height } = target.getBoundingClientRect();
    const el = (0,_element__WEBPACK_IMPORTED_MODULE_0__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_2__.cssPrefix}-tooltip`).html(html).show();
    document.body.appendChild(el.el);
    const elBox = el.box();
    // console.log('elBox:', elBox);
    el.css('left', `${left + width / 2 - elBox.width / 2}px`).css('top', `${top + height + 2}px`);
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(target, 'mouseleave', () => {
        if (document.body.contains(el.el)) {
            document.body.removeChild(el.el);
        }
    });
    (0,_event__WEBPACK_IMPORTED_MODULE_1__.bind)(target, 'click', () => {
        if (document.body.contains(el.el)) {
            document.body.removeChild(el.el);
        }
    });
}


/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cssPrefix": () => (/* binding */ cssPrefix),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "dpr": () => (/* binding */ dpr)
/* harmony export */ });
/* global window */
const cssPrefix = 'x-spreadsheet';
const dpr = window.devicePixelRatio || 1;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    cssPrefix,
    dpr,
});


/***/ }),

/***/ "./src/core/alphabet.ts":
/*!******************************!*\
  !*** ./src/core/alphabet.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "expr2expr": () => (/* binding */ expr2expr),
/* harmony export */   "expr2xy": () => (/* binding */ expr2xy),
/* harmony export */   "indexAt": () => (/* binding */ indexAt),
/* harmony export */   "stringAt": () => (/* binding */ stringAt),
/* harmony export */   "xy2expr": () => (/* binding */ xy2expr)
/* harmony export */ });
const alphabets = [
    'A',
    'B',
    'C',
    'D',
    'E',
    'F',
    'G',
    'H',
    'I',
    'J',
    'K',
    'L',
    'M',
    'N',
    'O',
    'P',
    'Q',
    'R',
    'S',
    'T',
    'U',
    'V',
    'W',
    'X',
    'Y',
    'Z',
];
/** index number 2 letters
 * @example stringAt(26) ==> 'AA'
 * @date 2019-10-10
 * @export
 * @param {number} index
 * @returns {string}
 */
function stringAt(index) {
    let str = '';
    let cindex = index;
    while (cindex >= alphabets.length) {
        cindex /= alphabets.length;
        cindex -= 1;
        str += alphabets[parseInt(cindex, 10) % alphabets.length];
    }
    const last = index % alphabets.length;
    str += alphabets[last];
    return str;
}
/** translate letter in A1-tag to number
 * @date 2019-10-10
 * @export
 * @param {string} str "AA" in A1-tag "AA1"
 * @returns {number}
 */
function indexAt(str) {
    let ret = 0;
    for (let i = 0; i !== str.length; ++i)
        ret = 26 * ret + str.charCodeAt(i) - 64;
    return ret - 1;
}
// B10 => x,y
/** translate A1-tag to XY-tag
 * @date 2019-10-10
 * @export
 * @param {tagA1} src
 * @returns {tagXY}
 */
function expr2xy(src) {
    let x = '';
    let y = '';
    for (let i = 0; i < src.length; i += 1) {
        if (src.charAt(i) >= '0' && src.charAt(i) <= '9') {
            y += src.charAt(i);
        }
        else {
            x += src.charAt(i);
        }
    }
    return [indexAt(x), parseInt(y, 10) - 1];
}
/** translate XY-tag to A1-tag
 * @example x,y => B10
 * @date 2019-10-10
 * @export
 * @param {number} x
 * @param {number} y
 * @returns {tagA1}
 */
function xy2expr(x, y) {
    return `${stringAt(x)}${y + 1}`;
}
/** translate A1-tag src by (xn, yn)
 * @date 2019-10-10
 * @export
 * @param {tagA1} src
 * @param {number} xn
 * @param {number} yn
 * @returns {tagA1}
 */
function expr2expr(src, xn, yn, condition = (x, y) => true) {
    if (xn === 0 && yn === 0)
        return src;
    const [x, y] = expr2xy(src);
    if (!condition(x, y))
        return src;
    return xy2expr(x + xn, y + yn);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    stringAt,
    indexAt,
    expr2xy,
    xy2expr,
    expr2expr,
});


/***/ }),

/***/ "./src/core/auto_filter.ts":
/*!*********************************!*\
  !*** ./src/core/auto_filter.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AutoFilter)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

// operator: all|eq|neq|gt|gte|lt|lte|in|be
// value:
//   in => []
//   be => [min, max]
class Filter {
    ci;
    operator;
    value;
    constructor(ci, operator, value) {
        this.ci = ci;
        this.operator = operator;
        this.value = value;
    }
    set(operator, value) {
        this.operator = operator;
        this.value = value;
    }
    includes(v) {
        const { operator, value } = this;
        if (operator === 'all') {
            return true;
        }
        if (operator === 'in') {
            return value.includes(v);
        }
        return false;
    }
    vlength() {
        const { operator, value } = this;
        if (operator === 'in') {
            return value.length;
        }
        return 0;
    }
    getData() {
        const { ci, operator, value } = this;
        return { ci, operator, value };
    }
}
class Sort {
    ci;
    order;
    constructor(ci, order) {
        this.ci = ci;
        this.order = order;
    }
    asc() {
        return this.order === 'asc';
    }
    desc() {
        return this.order === 'desc';
    }
}
class AutoFilter {
    ref;
    filters;
    sort;
    constructor() {
        this.ref = null;
        this.filters = [];
        this.sort = null;
    }
    setData({ ref, filters, sort }) {
        if (ref != null) {
            this.ref = ref;
            this.filters = filters.map(it => new Filter(it.ci, it.operator, it.value));
            if (sort) {
                this.sort = new Sort(sort.ci, sort.order);
            }
        }
    }
    getData() {
        if (this.active()) {
            const { ref, filters, sort } = this;
            return { ref, filters: filters.map(it => it.getData()), sort };
        }
        return {};
    }
    addFilter(ci, operator, value) {
        const filter = this.getFilter(ci);
        if (filter == null) {
            this.filters.push(new Filter(ci, operator, value));
        }
        else {
            filter.set(operator, value);
        }
    }
    setSort(ci, order) {
        this.sort = order ? new Sort(ci, order) : null;
    }
    includes(ri, ci) {
        if (this.active()) {
            return this.hrange().includes(ri, ci);
        }
        return false;
    }
    getSort(ci) {
        const { sort } = this;
        if (sort && sort.ci === ci) {
            return sort;
        }
        return null;
    }
    getFilter(ci) {
        const { filters } = this;
        for (let i = 0; i < filters.length; i += 1) {
            if (filters[i].ci === ci) {
                return filters[i];
            }
        }
        return null;
    }
    filteredRows(getCell) {
        // const ary = [];
        // let lastri = 0;
        const rset = new Set();
        const fset = new Set();
        if (this.active()) {
            const { sri, eri } = this.range();
            const { filters } = this;
            for (let ri = sri + 1; ri <= eri; ri += 1) {
                for (let i = 0; i < filters.length; i += 1) {
                    const filter = filters[i];
                    const cell = getCell(ri, filter.ci);
                    const ctext = cell ? cell.text : '';
                    if (!filter.includes(ctext)) {
                        rset.add(ri);
                        break;
                    }
                    else {
                        fset.add(ri);
                    }
                }
            }
        }
        return { rset, fset };
    }
    items(ci, getCell) {
        const m = {};
        if (this.active()) {
            const { sri, eri } = this.range();
            for (let ri = sri + 1; ri <= eri; ri += 1) {
                const cell = getCell(ri, ci);
                if (cell !== null && !/^\s*$/.test(cell.text)) {
                    const key = cell.text;
                    const cnt = (m[key] || 0) + 1;
                    m[key] = cnt;
                }
                else {
                    m[''] = (m[''] || 0) + 1;
                }
            }
        }
        return m;
    }
    range() {
        return _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange.valueOf(this.ref);
    }
    hrange() {
        const r = this.range();
        r.eri = r.sri;
        return r;
    }
    clear() {
        this.ref = null;
        this.filters = [];
        this.sort = null;
    }
    active() {
        return this.ref !== null;
    }
}


/***/ }),

/***/ "./src/core/cell.ts":
/*!**************************!*\
  !*** ./src/core/cell.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "infixExprToSuffixExpr": () => (/* binding */ infixExprToSuffixExpr)
/* harmony export */ });
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");


// Converting infix expression to a suffix expression
// src: AVERAGE(SUM(A1,A2), B1) + 50 + B20
// return: [A1, A2], SUM[, B1],AVERAGE,50,+,B20,+
const infixExprToSuffixExpr = (src) => {
    const operatorStack = [];
    const stack = [];
    let subStrs = []; // SUM, A1, B2, 50 ...
    let fnArgType = 0; // 1 => , 2 => :
    let fnArgOperator = '';
    let fnArgsLen = 1; // A1,A2,A3...
    let oldc = '';
    for (let i = 0; i < src.length; i += 1) {
        const c = src.charAt(i);
        if (c !== ' ') {
            if (c >= 'a' && c <= 'z') {
                subStrs.push(c.toUpperCase());
            }
            else if ((c >= '0' && c <= '9') || (c >= 'A' && c <= 'Z') || c === '.') {
                subStrs.push(c);
            }
            else if (c === '"') {
                i += 1;
                while (src.charAt(i) !== '"') {
                    subStrs.push(src.charAt(i));
                    i += 1;
                }
                stack.push(`"${subStrs.join('')}`);
                subStrs = [];
            }
            else if (c === '-' && /[+\-*/,(]/.test(oldc)) {
                subStrs.push(c);
            }
            else {
                // console.log('subStrs:', subStrs.join(''), stack);
                if (c !== '(' && subStrs.length > 0) {
                    stack.push(subStrs.join(''));
                }
                if (c === ')') {
                    let c1 = operatorStack.pop();
                    if (fnArgType === 2) {
                        // fn argument range => A1:B5
                        try {
                            const [ex, ey] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(stack.pop());
                            const [sx, sy] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(stack.pop());
                            // console.log('::', sx, sy, ex, ey);
                            let rangelen = 0;
                            for (let x = sx; x <= ex; x += 1) {
                                for (let y = sy; y <= ey; y += 1) {
                                    stack.push((0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(x, y));
                                    rangelen += 1;
                                }
                            }
                            stack.push([c1, rangelen]);
                        }
                        catch (e) {
                            // console.log(e);
                        }
                    }
                    else if (fnArgType === 1 || fnArgType === 3) {
                        if (fnArgType === 3)
                            stack.push(fnArgOperator);
                        // fn argument => A1,A2,B5
                        stack.push([c1, fnArgsLen]);
                        fnArgsLen = 1;
                    }
                    else {
                        // console.log('c1:', c1, fnArgType, stack, operatorStack);
                        while (c1 !== '(') {
                            stack.push(c1);
                            if (operatorStack.length <= 0)
                                break;
                            c1 = operatorStack.pop();
                        }
                    }
                    fnArgType = 0;
                }
                else if (c === '=' || c === '>' || c === '<') {
                    const nc = src.charAt(i + 1);
                    fnArgOperator = c;
                    if (nc === '=' || nc === '-') {
                        fnArgOperator += nc;
                        i += 1;
                    }
                    fnArgType = 3;
                }
                else if (c === ':') {
                    fnArgType = 2;
                }
                else if (c === ',') {
                    if (fnArgType === 3) {
                        stack.push(fnArgOperator);
                    }
                    fnArgType = 1;
                    fnArgsLen += 1;
                }
                else if (c === '(' && subStrs.length > 0) {
                    // function
                    operatorStack.push(subStrs.join(''));
                }
                else {
                    // priority: */ > +-
                    // console.log('xxxx:', operatorStack, c, stack);
                    if (operatorStack.length > 0 && (c === '+' || c === '-')) {
                        let top = operatorStack[operatorStack.length - 1];
                        if (top !== '(')
                            stack.push(operatorStack.pop());
                        if (top === '*' || top === '/') {
                            while (operatorStack.length > 0) {
                                top = operatorStack[operatorStack.length - 1];
                                if (top !== '(')
                                    stack.push(operatorStack.pop());
                                else
                                    break;
                            }
                        }
                    }
                    else if (operatorStack.length > 0) {
                        const top = operatorStack[operatorStack.length - 1];
                        if (top === '*' || top === '/')
                            stack.push(operatorStack.pop());
                    }
                    operatorStack.push(c);
                }
                subStrs = [];
            }
            oldc = c;
        }
    }
    if (subStrs.length > 0) {
        stack.push(subStrs.join(''));
    }
    while (operatorStack.length > 0) {
        stack.push(operatorStack.pop());
    }
    return stack;
};
const evalSubExpr = (subExpr, cellRender) => {
    const [fl] = subExpr;
    let expr = subExpr;
    if (fl === '"') {
        return subExpr.substring(1);
    }
    let ret = 1;
    if (fl === '-') {
        expr = subExpr.substring(1);
        ret = -1;
    }
    if (expr[0] >= '0' && expr[0] <= '9') {
        return ret * Number(expr);
    }
    const [x, y] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(expr);
    return ret * cellRender(x, y);
};
// evaluate the suffix expression
// srcStack: <= infixExprToSufixExpr
// formulaMap: {'SUM': {}, ...}
// cellRender: (x, y) => {}
const evalSuffixExpr = (srcStack, formulaMap, cellRender, cellList) => {
    const stack = [];
    // console.log(':::::formulaMap:', formulaMap);
    for (let i = 0; i < srcStack.length; i += 1) {
        // console.log(':::>>>', srcStack[i]);
        const expr = srcStack[i];
        const fc = expr[0];
        if (expr === '+') {
            const top = stack.pop();
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('+', stack.pop(), top));
        }
        else if (expr === '-') {
            if (stack.length === 1) {
                const top = stack.pop();
                stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('*', top, -1));
            }
            else {
                const top = stack.pop();
                stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('-', stack.pop(), top));
            }
        }
        else if (expr === '*') {
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('*', stack.pop(), stack.pop()));
        }
        else if (expr === '/') {
            const top = stack.pop();
            stack.push((0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('/', stack.pop(), top));
        }
        else if (fc === '=' || fc === '>' || fc === '<') {
            let top = stack.pop();
            if (!Number.isNaN(top))
                top = Number(top);
            let left = stack.pop();
            if (!Number.isNaN(left))
                left = Number(left);
            let ret = false;
            if (fc === '=') {
                ret = (left === top);
            }
            else if (expr === '>') {
                ret = (left > top);
            }
            else if (expr === '>=') {
                ret = (left >= top);
            }
            else if (expr === '<') {
                ret = (left < top);
            }
            else if (expr === '<=') {
                ret = (left <= top);
            }
            stack.push(ret);
        }
        else if (Array.isArray(expr)) {
            const [formula, len] = expr;
            const params = [];
            for (let j = 0; j < len; j += 1) {
                params.push(stack.pop());
            }
            stack.push(formulaMap[formula].render(params.reverse()));
        }
        else {
            if (cellList.includes(expr)) {
                return 0;
            }
            if ((fc >= 'a' && fc <= 'z') || (fc >= 'A' && fc <= 'Z')) {
                cellList.push(expr);
            }
            stack.push(evalSubExpr(expr, cellRender));
            cellList.pop();
        }
        // console.log('stack:', stack);
    }
    return stack[0];
};
const cellRender = (src, formulaMap, getCellText, cellList = []) => {
    if (src[0] === '=') {
        const stack = infixExprToSuffixExpr(src.substring(1));
        if (stack.length <= 0)
            return src;
        return evalSuffixExpr(stack, formulaMap, (x, y) => cellRender(getCellText(x, y), formulaMap, getCellText, cellList), cellList);
    }
    return src;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    render: cellRender,
});



/***/ }),

/***/ "./src/core/cell_range.ts":
/*!********************************!*\
  !*** ./src/core/cell_range.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CellRange": () => (/* binding */ CellRange),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");

class CellRange {
    sri;
    sci;
    eri;
    eci;
    w;
    h;
    constructor(sri, sci, eri, eci, w = 0, h = 0) {
        this.sri = sri;
        this.sci = sci;
        this.eri = eri;
        this.eci = eci;
        this.w = w;
        this.h = h;
    }
    set(sri, sci, eri, eci) {
        this.sri = sri;
        this.sci = sci;
        this.eri = eri;
        this.eci = eci;
    }
    multiple() {
        return this.eri - this.sri > 0 || this.eci - this.sci > 0;
    }
    // cell-index: ri, ci
    // cell-ref: A10
    includes(...args) {
        let [ri, ci] = [0, 0];
        if (args.length === 1) {
            [ci, ri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(args[0]);
        }
        else if (args.length === 2) {
            [ri, ci] = args;
        }
        const { sri, sci, eri, eci } = this;
        return sri <= ri && ri <= eri && sci <= ci && ci <= eci;
    }
    each(cb, rowFilter = (i) => true) {
        const { sri, sci, eri, eci } = this;
        for (let i = sri; i <= eri; i += 1) {
            if (rowFilter(i)) {
                for (let j = sci; j <= eci; j += 1) {
                    cb(i, j);
                }
            }
        }
    }
    contains(other) {
        return (this.sri <= other.sri &&
            this.sci <= other.sci &&
            this.eri >= other.eri &&
            this.eci >= other.eci);
    }
    // within
    within(other) {
        return (this.sri >= other.sri &&
            this.sci >= other.sci &&
            this.eri <= other.eri &&
            this.eci <= other.eci);
    }
    // disjoint
    disjoint(other) {
        return (this.sri > other.eri ||
            this.sci > other.eci ||
            other.sri > this.eri ||
            other.sci > this.eci);
    }
    // intersects
    intersects(other) {
        return (this.sri <= other.eri &&
            this.sci <= other.eci &&
            other.sri <= this.eri &&
            other.sci <= this.eci);
    }
    // union
    union(other) {
        const { sri, sci, eri, eci } = this;
        return new CellRange(other.sri < sri ? other.sri : sri, other.sci < sci ? other.sci : sci, other.eri > eri ? other.eri : eri, other.eci > eci ? other.eci : eci);
    }
    // intersection
    // intersection(other) {}
    // Returns Array<CellRange> that represents that part of this that does not intersect with other
    // difference
    difference(other) {
        const ret = [];
        const addRet = (sri, sci, eri, eci) => {
            ret.push(new CellRange(sri, sci, eri, eci));
        };
        const { sri, sci, eri, eci } = this;
        const dsr = other.sri - sri;
        const dsc = other.sci - sci;
        const der = eri - other.eri;
        const dec = eci - other.eci;
        if (dsr > 0) {
            addRet(sri, sci, other.sri - 1, eci);
            if (der > 0) {
                addRet(other.eri + 1, sci, eri, eci);
                if (dsc > 0) {
                    addRet(other.sri, sci, other.eri, other.sci - 1);
                }
                if (dec > 0) {
                    addRet(other.sri, other.eci + 1, other.eri, eci);
                }
            }
            else {
                if (dsc > 0) {
                    addRet(other.sri, sci, eri, other.sci - 1);
                }
                if (dec > 0) {
                    addRet(other.sri, other.eci + 1, eri, eci);
                }
            }
        }
        else if (der > 0) {
            addRet(other.eri + 1, sci, eri, eci);
            if (dsc > 0) {
                addRet(sri, sci, other.eri, other.sci - 1);
            }
            if (dec > 0) {
                addRet(sri, other.eci + 1, other.eri, eci);
            }
        }
        if (dsc > 0) {
            addRet(sri, sci, eri, other.sci - 1);
            if (dec > 0) {
                addRet(sri, other.eri + 1, eri, eci);
                if (dsr > 0) {
                    addRet(sri, other.sci, other.sri - 1, other.eci);
                }
                if (der > 0) {
                    addRet(other.sri + 1, other.sci, eri, other.eci);
                }
            }
            else {
                if (dsr > 0) {
                    addRet(sri, other.sci, other.sri - 1, eci);
                }
                if (der > 0) {
                    addRet(other.sri + 1, other.sci, eri, eci);
                }
            }
        }
        else if (dec > 0) {
            addRet(eri, other.eci + 1, eri, eci);
            if (dsr > 0) {
                addRet(sri, sci, other.sri - 1, other.eci);
            }
            if (der > 0) {
                addRet(other.eri + 1, sci, eri, other.eci);
            }
        }
        return ret;
    }
    size() {
        return [this.eri - this.sri + 1, this.eci - this.sci + 1];
    }
    toString() {
        const { sri, sci, eri, eci } = this;
        let ref = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(sci, sri);
        if (this.multiple()) {
            ref = `${ref}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.xy2expr)(eci, eri)}`;
        }
        return ref;
    }
    clone() {
        const { sri, sci, eri, eci, w, h } = this;
        return new CellRange(sri, sci, eri, eci, w, h);
    }
    /*
    toJSON() {
      return this.toString();
    }
    */
    equals(other) {
        return (this.eri === other.eri &&
            this.eci === other.eci &&
            this.sri === other.sri &&
            this.sci === other.sci);
    }
    static valueOf(ref) {
        // B1:B8, B1 => 1 x 1 cell range
        const refs = ref.split(':');
        const [sci, sri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(refs[0]);
        let [eri, eci] = [sri, sci];
        if (refs.length > 1) {
            [eci, eri] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_0__.expr2xy)(refs[1]);
        }
        return new CellRange(sri, sci, eri, eci);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CellRange);



/***/ }),

/***/ "./src/core/clipboard.ts":
/*!*******************************!*\
  !*** ./src/core/clipboard.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Clipboard)
/* harmony export */ });
class Clipboard {
    range;
    state;
    constructor() {
        this.range = null; // CellRange
        this.state = 'clear';
    }
    copy(cellRange) {
        this.range = cellRange;
        this.state = 'copy';
        return this;
    }
    cut(cellRange) {
        this.range = cellRange;
        this.state = 'cut';
        return this;
    }
    isCopy() {
        return this.state === 'copy';
    }
    isCut() {
        return this.state === 'cut';
    }
    isClear() {
        return this.state === 'clear';
    }
    clear() {
        this.range = null;
        this.state = 'clear';
    }
}


/***/ }),

/***/ "./src/core/col.ts":
/*!*************************!*\
  !*** ./src/core/col.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cols": () => (/* binding */ Cols),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");

class Cols {
    _;
    len;
    width;
    indexWidth;
    minWidth;
    constructor({ len, width, indexWidth, minWidth, }) {
        this._ = {};
        this.len = len;
        this.width = width;
        this.indexWidth = indexWidth;
        this.minWidth = minWidth;
    }
    setData(d) {
        if (d.len) {
            this.len = d.len;
            delete d.len;
        }
        this._ = d;
    }
    getData() {
        const { len } = this;
        return Object.assign({ len }, this._);
    }
    getWidth(i) {
        if (this.isHide(i))
            return 0;
        const col = this._[i];
        if (col && col.width) {
            return col.width;
        }
        return this.width;
    }
    getOrNew(ci) {
        this._[ci] = this._[ci] || {};
        return this._[ci];
    }
    setWidth(ci, width) {
        const col = this.getOrNew(ci);
        col.width = width;
    }
    unhide(idx) {
        let index = idx;
        while (index > 0) {
            index -= 1;
            if (this.isHide(index)) {
                this.setHide(index, false);
            }
            else
                break;
        }
    }
    isHide(ci) {
        const col = this._[ci];
        return col && col.hide;
    }
    setHide(ci, v) {
        const col = this.getOrNew(ci);
        if (v === true)
            col.hide = true;
        else
            delete col.hide;
    }
    setStyle(ci, style) {
        const col = this.getOrNew(ci);
        col.style = style;
    }
    sumWidth(min, max) {
        return _helper__WEBPACK_IMPORTED_MODULE_0__["default"].rangeSum(min, max, i => this.getWidth(i));
    }
    totalWidth() {
        return this.sumWidth(0, this.len);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/data_proxy.ts":
/*!********************************!*\
  !*** ./src/core/data_proxy.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DataProxy),
/* harmony export */   "defaultSettings": () => (/* binding */ defaultSettings)
/* harmony export */ });
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selector */ "./src/core/selector.ts");
/* harmony import */ var _scroll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scroll */ "./src/core/scroll.ts");
/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./history */ "./src/core/history.ts");
/* harmony import */ var _clipboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./clipboard */ "./src/core/clipboard.ts");
/* harmony import */ var _auto_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auto_filter */ "./src/core/auto_filter.ts");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./merge */ "./src/core/merge.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/* harmony import */ var _row__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./row */ "./src/core/row.ts");
/* harmony import */ var _col__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./col */ "./src/core/col.ts");
/* harmony import */ var _validation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./validation */ "./src/core/validation.ts");
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* global document */













// private methods
/*
 * {
 *  name: ''
 *  freeze: [0, 0],
 *  formats: [],
 *  styles: [
 *    {
 *      bgcolor: '',
 *      align: '',
 *      valign: '',
 *      textwrap: false,
 *      strike: false,
 *      underline: false,
 *      color: '',
 *      format: 1,
 *      border: {
 *        left: [style, color],
 *        right: [style, color],
 *        top: [style, color],
 *        bottom: [style, color],
 *      },
 *      font: {
 *        name: 'Helvetica',
 *        size: 10,
 *        bold: false,
 *        italic: false,
 *      }
 *    }
 *  ],
 *  merges: [
 *    'A1:F11',
 *    ...
 *  ],
 *  rows: {
 *    1: {
 *      height: 50,
 *      style: 1,
 *      cells: {
 *        1: {
 *          style: 2,
 *          type: 'string',
 *          text: '',
 *          value: '', // cal result
 *        }
 *      }
 *    },
 *    ...
 *  },
 *  cols: {
 *    2: { width: 100, style: 1 }
 *  }
 * }
 */
const defaultSettings = {
    mode: 'edit',
    view: {
        height: () => document.documentElement.clientHeight,
        width: () => document.documentElement.clientWidth,
    },
    showGrid: true,
    showToolbar: true,
    showContextmenu: true,
    showBottomBar: true,
    row: {
        len: 100,
        height: 25,
    },
    col: {
        len: 26,
        width: 100,
        indexWidth: 60,
        minWidth: 60,
    },
    style: {
        bgcolor: '#ffffff',
        align: 'left',
        valign: 'middle',
        textwrap: false,
        strike: false,
        underline: false,
        color: '#0a0a0a',
        font: {
            name: 'Arial',
            size: 10,
            bold: false,
            italic: false,
        },
        format: 'normal',
    },
};
const toolbarHeight = 41;
const bottombarHeight = 41;
// src: cellRange
// dst: cellRange
function canPaste(src, dst, error = (arg) => { }) {
    const { merges } = this;
    const cellRange = dst.clone();
    const [srn, scn] = src.size();
    const [drn, dcn] = dst.size();
    if (srn > drn) {
        cellRange.eri = dst.sri + srn - 1;
    }
    if (scn > dcn) {
        cellRange.eci = dst.sci + scn - 1;
    }
    if (merges.intersects(cellRange)) {
        error((0,_locale_locale__WEBPACK_IMPORTED_MODULE_12__.t)('error.pasteForMergedCell'));
        return false;
    }
    return true;
}
function copyPaste(srcCellRange, dstCellRange, what, autofill = false) {
    const { rows, merges } = this;
    // delete dest merge
    if (what === 'all' || what === 'format') {
        rows.deleteCells(dstCellRange, what);
        merges.deleteWithin(dstCellRange);
    }
    rows.copyPaste(srcCellRange, dstCellRange, what, autofill, (ri, ci, cell) => {
        if (cell && cell.merge) {
            // console.log('cell:', ri, ci, cell);
            const [rn, cn] = cell.merge;
            if (rn <= 0 && cn <= 0)
                return;
            merges.add(new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, ri + rn, ci + cn));
        }
    });
}
function cutPaste(srcCellRange, dstCellRange) {
    const { clipboard, rows, merges } = this;
    rows.cutPaste(srcCellRange, dstCellRange);
    merges.move(srcCellRange, dstCellRange.sri - srcCellRange.sri, dstCellRange.sci - srcCellRange.sci);
    clipboard.clear();
}
// bss: { top, bottom, left, right }
function setStyleBorder(ri, ci, bss) {
    const { styles, rows } = this;
    const cell = rows.getCellOrNew(ri, ci);
    let cstyle = {};
    if (cell.style !== undefined) {
        cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
    }
    cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(cstyle, { border: bss });
    cell.style = this.addStyle(cstyle);
}
function setStyleBorders({ mode, style, color }) {
    const { styles, selector, rows } = this;
    const { sri, sci, eri, eci } = selector.range;
    const multiple = !this.isSingleSelected();
    if (!multiple) {
        if (mode === 'inside' || mode === 'horizontal' || mode === 'vertical') {
            return;
        }
    }
    if (mode === 'outside' && !multiple) {
        setStyleBorder.call(this, sri, sci, {
            top: [style, color],
            bottom: [style, color],
            left: [style, color],
            right: [style, color],
        });
    }
    else if (mode === 'none') {
        selector.range.each((ri, ci) => {
            const cell = rows.getCell(ri, ci);
            if (cell && cell.style !== undefined) {
                const ns = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
                delete ns.border;
                // ['bottom', 'top', 'left', 'right'].forEach((prop) => {
                //   if (ns[prop]) delete ns[prop];
                // });
                cell.style = this.addStyle(ns);
            }
        });
    }
    else if (mode === 'all' ||
        mode === 'inside' ||
        mode === 'outside' ||
        mode === 'horizontal' ||
        mode === 'vertical') {
        const merges = [];
        for (let ri = sri; ri <= eri; ri += 1) {
            for (let ci = sci; ci <= eci; ci += 1) {
                // jump merges -- start
                const mergeIndexes = [];
                for (let ii = 0; ii < merges.length; ii += 1) {
                    const [mri, mci, rn, cn] = merges[ii];
                    if (ri === mri + rn + 1)
                        mergeIndexes.push(ii);
                    if (mri <= ri && ri <= mri + rn) {
                        if (ci === mci) {
                            ci += cn + 1;
                            break;
                        }
                    }
                }
                mergeIndexes.forEach((it) => merges.splice(it, 1));
                if (ci > eci)
                    break;
                // jump merges -- end
                const cell = rows.getCell(ri, ci);
                let [rn, cn] = [0, 0];
                if (cell && cell.merge) {
                    [rn, cn] = cell.merge;
                    merges.push([ri, ci, rn, cn]);
                }
                const mrl = rn > 0 && ri + rn === eri;
                const mcl = cn > 0 && ci + cn === eci;
                let bss = {};
                if (mode === 'all') {
                    bss = {
                        bottom: [style, color],
                        top: [style, color],
                        left: [style, color],
                        right: [style, color],
                    };
                }
                else if (mode === 'inside') {
                    if (!mcl && ci < eci)
                        bss.right = [style, color];
                    if (!mrl && ri < eri)
                        bss.bottom = [style, color];
                }
                else if (mode === 'horizontal') {
                    if (!mrl && ri < eri)
                        bss.bottom = [style, color];
                }
                else if (mode === 'vertical') {
                    if (!mcl && ci < eci)
                        bss.right = [style, color];
                }
                else if (mode === 'outside' && multiple) {
                    if (sri === ri)
                        bss.top = [style, color];
                    if (mrl || eri === ri)
                        bss.bottom = [style, color];
                    if (sci === ci)
                        bss.left = [style, color];
                    if (mcl || eci === ci)
                        bss.right = [style, color];
                }
                if (Object.keys(bss).length > 0) {
                    setStyleBorder.call(this, ri, ci, bss);
                }
                ci += cn;
            }
        }
    }
    else if (mode === 'top' || mode === 'bottom') {
        for (let ci = sci; ci <= eci; ci += 1) {
            if (mode === 'top') {
                setStyleBorder.call(this, sri, ci, { top: [style, color] });
                ci += rows.getCellMerge(sri, ci)[1];
            }
            if (mode === 'bottom') {
                setStyleBorder.call(this, eri, ci, { bottom: [style, color] });
                ci += rows.getCellMerge(eri, ci)[1];
            }
        }
    }
    else if (mode === 'left' || mode === 'right') {
        for (let ri = sri; ri <= eri; ri += 1) {
            if (mode === 'left') {
                setStyleBorder.call(this, ri, sci, { left: [style, color] });
                ri += rows.getCellMerge(ri, sci)[0];
            }
            if (mode === 'right') {
                setStyleBorder.call(this, ri, eci, { right: [style, color] });
                ri += rows.getCellMerge(ri, eci)[0];
            }
        }
    }
}
function getCellRowByY(y, scrollOffsety) {
    const { rows } = this;
    const fsh = this.freezeTotalHeight();
    // console.log('y:', y, ', fsh:', fsh);
    let inits = rows.height;
    if (fsh + rows.height < y)
        inits -= scrollOffsety;
    // handle ri in autofilter
    const frset = this.exceptRowSet;
    let ri = 0;
    let top = inits;
    let { height } = rows;
    for (; ri < rows.len; ri += 1) {
        if (top > y)
            break;
        if (!frset.has(ri)) {
            height = rows.getHeight(ri);
            top += height;
        }
    }
    top -= height;
    // console.log('ri:', ri, ', top:', top, ', height:', height);
    if (top <= 0) {
        return { ri: -1, top: 0, height };
    }
    return { ri: ri - 1, top, height };
}
function getCellColByX(x, scrollOffsetx) {
    const { cols } = this;
    const fsw = this.freezeTotalWidth();
    let inits = cols.indexWidth;
    if (fsw + cols.indexWidth < x)
        inits -= scrollOffsetx;
    const [ci, left, width] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(0, cols.len, inits, cols.indexWidth, x, (i) => cols.getWidth(i));
    if (left <= 0) {
        return { ci: -1, left: 0, width: cols.indexWidth };
    }
    return { ci: ci - 1, left, width };
}
class DataProxy {
    settings;
    name;
    freeze;
    styles;
    merges;
    rows;
    cols;
    validations;
    hyperlinks;
    comments;
    selector;
    scroll;
    history;
    clipboard;
    autoFilter;
    change;
    exceptRowSet;
    sortedRowMap;
    unsortedRowMap;
    constructor(name, settings) {
        this.settings = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(defaultSettings, settings || {});
        // save data begin
        this.name = name || 'sheet';
        this.freeze = [0, 0];
        this.styles = []; // Array<Style>
        this.merges = new _merge__WEBPACK_IMPORTED_MODULE_5__.Merges(); // [CellRange, ...]
        this.rows = new _row__WEBPACK_IMPORTED_MODULE_7__.Rows(this.settings.row);
        this.cols = new _col__WEBPACK_IMPORTED_MODULE_8__.Cols(this.settings.col);
        this.validations = new _validation__WEBPACK_IMPORTED_MODULE_9__.Validations();
        this.hyperlinks = {};
        this.comments = {};
        // save data end
        // don't save object
        this.selector = new _selector__WEBPACK_IMPORTED_MODULE_0__["default"]();
        this.scroll = new _scroll__WEBPACK_IMPORTED_MODULE_1__["default"]();
        this.history = new _history__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.clipboard = new _clipboard__WEBPACK_IMPORTED_MODULE_3__["default"]();
        this.autoFilter = new _auto_filter__WEBPACK_IMPORTED_MODULE_4__["default"]();
        this.change = () => { };
        this.exceptRowSet = new Set();
        this.sortedRowMap = new Map();
        this.unsortedRowMap = new Map();
    }
    addValidation(mode, ref, validator) {
        // console.log('mode:', mode, ', ref:', ref, ', validator:', validator);
        this.changeData(() => {
            this.validations.add(mode, ref, validator);
        });
    }
    removeValidation() {
        const { range } = this.selector;
        this.changeData(() => {
            this.validations.remove(range);
        });
    }
    getSelectedValidator() {
        const { ri, ci } = this.selector;
        const v = this.validations.get(ri, ci);
        return v ? v.validator : null;
    }
    getSelectedValidation() {
        const { ri, ci, range } = this.selector;
        const v = this.validations.get(ri, ci);
        const ret = { ref: range.toString() };
        if (v !== null) {
            ret.mode = v.mode;
            ret.validator = v.validator;
        }
        return ret;
    }
    canUndo() {
        return this.history.canUndo();
    }
    canRedo() {
        return this.history.canRedo();
    }
    undo() {
        this.history.undo(this.getData(), (d) => {
            this.setData(d);
        });
    }
    redo() {
        this.history.redo(this.getData(), (d) => {
            this.setData(d);
        });
    }
    copy() {
        this.clipboard.copy(this.selector.range);
    }
    copyToSystemClipboard(evt) {
        let copyText = [];
        const { sri, eri, sci, eci } = this.selector.range;
        for (let ri = sri; ri <= eri; ri += 1) {
            const row = [];
            for (let ci = sci; ci <= eci; ci += 1) {
                const cell = this.getCell(ri, ci);
                row.push((cell && cell.text) || '');
            }
            copyText.push(row);
        }
        // Adding \n and why not adding \r\n is to support online office and client MS office and WPS
        copyText = copyText.map((row) => row.join('\t')).join('\n');
        // why used this
        // cuz http protocol will be blocked request clipboard by browser
        if (evt) {
            evt.clipboardData.clearData();
            evt.clipboardData.setData('text/plain', copyText);
            evt.preventDefault();
        }
        // this need https protocol
        /* global navigator */
        if (navigator.clipboard) {
            navigator.clipboard.writeText(copyText).then(() => { }, (err) => {
                console.log('text copy to the system clipboard error  ', copyText, err);
            });
        }
    }
    cut() {
        this.clipboard.cut(this.selector.range);
    }
    // what: all | text | format
    paste(what = 'all', error = () => { }) {
        // console.log('sIndexes:', sIndexes);
        const { clipboard, selector } = this;
        if (clipboard.isClear())
            return false;
        if (!canPaste.call(this, clipboard.range, selector.range, error))
            return false;
        this.changeData(() => {
            if (clipboard.isCopy()) {
                copyPaste.call(this, clipboard.range, selector.range, what);
            }
            else if (clipboard.isCut()) {
                cutPaste.call(this, clipboard.range, selector.range);
            }
        });
        return true;
    }
    pasteFromSystemClipboard(resetSheet, eventTrigger) {
        const { selector } = this;
        navigator.clipboard.readText().then((content) => {
            const contentToPaste = this.parseClipboardContent(content);
            let startRow = selector.ri;
            contentToPaste.forEach((row) => {
                let startColumn = selector.ci;
                row.forEach((cellContent) => {
                    this.setCellText(startRow, startColumn, cellContent, 'input');
                    startColumn += 1;
                });
                startRow += 1;
            });
            resetSheet();
            eventTrigger(this.rows.getData());
        });
    }
    parseClipboardContent(clipboardContent) {
        const parsedData = [];
        // first we need to figure out how many rows we need to paste
        const rows = clipboardContent.split('\n');
        // for each row parse cell data
        let i = 0;
        rows.forEach((row) => {
            parsedData[i] = row.split('\t');
            i += 1;
        });
        return parsedData;
    }
    pasteFromText(txt) {
        let lines = [];
        if (/\r\n/.test(txt))
            lines = txt.split('\r\n').map((it) => it.replace(/"/g, '').split('\t'));
        else
            lines = txt.split('\n').map((it) => it.replace(/"/g, '').split('\t'));
        if (lines.length) {
            const { rows, selector } = this;
            this.changeData(() => {
                rows.paste(lines, selector.range);
            });
        }
    }
    autofill(cellRange, what, error = () => { }) {
        const srcRange = this.selector.range;
        if (!canPaste.call(this, srcRange, cellRange, error))
            return false;
        this.changeData(() => {
            copyPaste.call(this, srcRange, cellRange, what, true);
        });
        return true;
    }
    clearClipboard() {
        this.clipboard.clear();
    }
    calSelectedRangeByEnd(ri, ci) {
        const { selector, rows, cols, merges } = this;
        let { sri, sci, eri, eci } = selector.range;
        const cri = selector.ri;
        const cci = selector.ci;
        let [nri, nci] = [ri, ci];
        if (ri < 0)
            nri = rows.len - 1;
        if (ci < 0)
            nci = cols.len - 1;
        if (nri > cri)
            [sri, eri] = [cri, nri];
        else
            [sri, eri] = [nri, cri];
        if (nci > cci)
            [sci, eci] = [cci, nci];
        else
            [sci, eci] = [nci, cci];
        selector.range = merges.union(new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(sri, sci, eri, eci));
        selector.range = merges.union(selector.range);
        // console.log('selector.range:', selector.range);
        return selector.range;
    }
    calSelectedRangeByStart(ri, ci) {
        const { selector, rows, cols, merges } = this;
        let cellRange = merges.getFirstIncludes(ri, ci);
        // console.log('cellRange:', cellRange, ri, ci, merges);
        if (cellRange === null) {
            cellRange = new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, ri, ci);
            if (ri === -1) {
                cellRange.sri = 0;
                cellRange.eri = rows.len - 1;
            }
            if (ci === -1) {
                cellRange.sci = 0;
                cellRange.eci = cols.len - 1;
            }
        }
        selector.range = cellRange;
        return cellRange;
    }
    setSelectedCellAttr(property, value) {
        this.changeData(() => {
            const { selector, styles, rows } = this;
            if (property === 'merge') {
                if (value)
                    this.merge();
                else
                    this.unmerge();
            }
            else if (property === 'border') {
                setStyleBorders.call(this, value);
            }
            else if (property === 'formula') {
                // console.log('>>>', selector.multiple());
                const { ri, ci, range } = selector;
                if (selector.multiple()) {
                    const [rn, cn] = selector.size();
                    const { sri, sci, eri, eci } = range;
                    if (rn > 1) {
                        for (let i = sci; i <= eci; i += 1) {
                            const cell = rows.getCellOrNew(eri + 1, i);
                            cell.text = `=${value}(${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(i, sri)}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(i, eri)})`;
                        }
                    }
                    else if (cn > 1) {
                        const cell = rows.getCellOrNew(ri, eci + 1);
                        cell.text = `=${value}(${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(sci, ri)}:${(0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(eci, ri)})`;
                    }
                }
                else {
                    const cell = rows.getCellOrNew(ri, ci);
                    cell.text = `=${value}()`;
                }
            }
            else {
                selector.range.each((ri, ci) => {
                    const cell = rows.getCellOrNew(ri, ci);
                    let cstyle = {};
                    if (cell.style !== undefined) {
                        cstyle = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].cloneDeep(styles[cell.style]);
                    }
                    if (property === 'format') {
                        cstyle.format = value;
                        cell.style = this.addStyle(cstyle);
                    }
                    else if (property === 'font-bold' ||
                        property === 'font-italic' ||
                        property === 'font-name' ||
                        property === 'font-size') {
                        const nfont = {};
                        nfont[property.split('-')[1]] = value;
                        cstyle.font = Object.assign(cstyle.font || {}, nfont);
                        cell.style = this.addStyle(cstyle);
                    }
                    else if (property === 'strike' ||
                        property === 'textwrap' ||
                        property === 'underline' ||
                        property === 'align' ||
                        property === 'valign' ||
                        property === 'color' ||
                        property === 'bgcolor') {
                        cstyle[property] = value;
                        cell.style = this.addStyle(cstyle);
                    }
                    else {
                        cell[property] = value;
                    }
                });
            }
        });
    }
    // state: input | finished
    setSelectedCellText(text, state = 'input') {
        const { autoFilter, selector, rows } = this;
        const { ri, ci } = selector;
        let nri = ri;
        if (this.unsortedRowMap.has(ri)) {
            nri = this.unsortedRowMap.get(ri);
        }
        const oldCell = rows.getCell(nri, ci);
        const oldText = oldCell ? oldCell.text : '';
        this.setCellText(nri, ci, text, state);
        // replace filter.value
        if (autoFilter.active()) {
            const filter = autoFilter.getFilter(ci);
            if (filter) {
                const vIndex = filter.value.findIndex((v) => v === oldText);
                if (vIndex >= 0) {
                    filter.value.splice(vIndex, 1, text);
                }
                // console.log('filter:', filter, oldCell);
            }
        }
        // this.resetAutoFilter();
    }
    getSelectedCell() {
        const { ri, ci } = this.selector;
        let nri = ri;
        if (this.unsortedRowMap.has(ri)) {
            nri = this.unsortedRowMap.get(ri);
        }
        return this.rows.getCell(nri, ci);
    }
    xyInSelectedRect(x, y) {
        const { left, top, width, height } = this.getSelectedRect();
        const x1 = x - this.cols.indexWidth;
        const y1 = y - this.rows.height;
        // console.log('x:', x, ',y:', y, 'left:', left, 'top:', top);
        return x1 > left && x1 < left + width && y1 > top && y1 < top + height;
    }
    getSelectedRect() {
        return this.getRect(this.selector.range);
    }
    getClipboardRect() {
        const { clipboard } = this;
        if (!clipboard.isClear()) {
            return this.getRect(clipboard.range);
        }
        return { left: -100, top: -100 };
    }
    getRect(cellRange) {
        const { scroll, rows, cols, exceptRowSet } = this;
        const { sri, sci, eri, eci } = cellRange;
        // console.log('sri:', sri, ',sci:', sci, ', eri:', eri, ', eci:', eci);
        // no selector
        if (sri < 0 && sci < 0) {
            return {
                left: 0,
                l: 0,
                top: 0,
                t: 0,
                scroll,
            };
        }
        const left = cols.sumWidth(0, sci);
        const top = rows.sumHeight(0, sri, exceptRowSet);
        const height = rows.sumHeight(sri, eri + 1, exceptRowSet);
        const width = cols.sumWidth(sci, eci + 1);
        // console.log('sri:', sri, ', sci:', sci, ', eri:', eri, ', eci:', eci);
        let left0 = left - scroll.x;
        let top0 = top - scroll.y;
        const fsh = this.freezeTotalHeight();
        const fsw = this.freezeTotalWidth();
        if (fsw > 0 && fsw > left) {
            left0 = left;
        }
        if (fsh > 0 && fsh > top) {
            top0 = top;
        }
        return {
            l: left,
            t: top,
            left: left0,
            top: top0,
            height,
            width,
            scroll,
        };
    }
    getCellRectByXY(x, y) {
        const { scroll, merges, rows, cols } = this;
        let { ri, top, height } = getCellRowByY.call(this, y, scroll.y);
        let { ci, left, width } = getCellColByX.call(this, x, scroll.x);
        if (ci === -1) {
            width = cols.totalWidth();
        }
        if (ri === -1) {
            height = rows.totalHeight();
        }
        if (ri >= 0 || ci >= 0) {
            const merge = merges.getFirstIncludes(ri, ci);
            if (merge) {
                ri = merge.sri;
                ci = merge.sci;
                ({ left, top, width, height } = this.cellRect(ri, ci));
            }
        }
        return {
            ri,
            ci,
            left,
            top,
            width,
            height,
        };
    }
    isSingleSelected() {
        const { sri, sci, eri, eci } = this.selector.range;
        const cell = this.getCell(sri, sci);
        if (cell && cell.merge) {
            const [rn, cn] = cell.merge;
            if (sri + rn === eri && sci + cn === eci)
                return true;
        }
        return !this.selector.multiple();
    }
    canUnmerge() {
        const { sri, sci, eri, eci } = this.selector.range;
        const cell = this.getCell(sri, sci);
        if (cell && cell.merge) {
            const [rn, cn] = cell.merge;
            if (sri + rn === eri && sci + cn === eci)
                return true;
        }
        return false;
    }
    merge() {
        const { selector, rows } = this;
        if (this.isSingleSelected())
            return;
        const [rn, cn] = selector.size();
        // console.log('merge:', rn, cn);
        if (rn > 1 || cn > 1) {
            const { sri, sci } = selector.range;
            this.changeData(() => {
                const cell = rows.getCellOrNew(sri, sci);
                cell.merge = [rn - 1, cn - 1];
                this.merges.add(selector.range);
                // delete merge cells
                this.rows.deleteCells(selector.range);
                // console.log('cell:', cell, this.d);
                this.rows.setCell(sri, sci, cell);
            });
        }
    }
    unmerge() {
        const { selector } = this;
        if (!this.isSingleSelected())
            return;
        const { sri, sci } = selector.range;
        this.changeData(() => {
            this.rows.deleteCell(sri, sci, 'merge');
            this.merges.deleteWithin(selector.range);
        });
    }
    canAutofilter() {
        return !this.autoFilter.active();
    }
    autofilter() {
        const { autoFilter, selector } = this;
        this.changeData(() => {
            if (autoFilter.active()) {
                autoFilter.clear();
                this.exceptRowSet = new Set();
                this.sortedRowMap = new Map();
                this.unsortedRowMap = new Map();
            }
            else {
                autoFilter.ref = selector.range.toString();
            }
        });
    }
    setAutoFilter(ci, order, operator, value) {
        const { autoFilter } = this;
        autoFilter.addFilter(ci, operator, value);
        autoFilter.setSort(ci, order);
        this.resetAutoFilter();
    }
    resetAutoFilter() {
        const { autoFilter, rows } = this;
        if (!autoFilter.active())
            return;
        const { sort } = autoFilter;
        const { rset, fset } = autoFilter.filteredRows((r, c) => rows.getCell(r, c));
        const fary = Array.from(fset);
        const oldAry = Array.from(fset);
        if (sort) {
            fary.sort((a, b) => {
                if (sort.order === 'asc') {
                    return a - b;
                }
                ;
                if (sort.order === 'desc') {
                    return b - a;
                }
                ;
                return 0;
            });
        }
        this.exceptRowSet = rset;
        this.sortedRowMap = new Map();
        this.unsortedRowMap = new Map();
        fary.forEach((it, index) => {
            this.sortedRowMap.set(oldAry[index], it);
            this.unsortedRowMap.set(it, oldAry[index]);
        });
    }
    deleteCell(what = 'all') {
        const { selector } = this;
        this.changeData(() => {
            this.rows.deleteCells(selector.range, what);
            if (what === 'all' || what === 'format') {
                this.merges.deleteWithin(selector.range);
            }
        });
    }
    // type: row | column
    insert(type, n = 1) {
        this.changeData(() => {
            const { sri, sci } = this.selector.range;
            const { rows, merges, cols } = this;
            let si = sri;
            if (type === 'row') {
                rows.insert(sri, n);
            }
            else if (type === 'column') {
                rows.insertColumn(sci, n);
                si = sci;
                cols.len += 1;
            }
            merges.shift(type, si, n, (ri, ci, rn, cn) => {
                const cell = rows.getCell(ri, ci);
                cell.merge[0] += rn;
                cell.merge[1] += cn;
            });
        });
    }
    // type: row | column
    delete(type) {
        this.changeData(() => {
            const { rows, merges, selector, cols } = this;
            const { range } = selector;
            const { sri, sci, eri, eci } = selector.range;
            const [rsize, csize] = selector.range.size();
            let si = sri;
            let size = rsize;
            if (type === 'row') {
                rows.delete(sri, eri);
            }
            else if (type === 'column') {
                rows.deleteColumn(sci, eci);
                si = range.sci;
                size = csize;
                cols.len -= eci - sci + 1;
            }
            // console.log('type:', type, ', si:', si, ', size:', size);
            merges.shift(type, si, -size, (ri, ci, rn, cn) => {
                // console.log('ri:', ri, ', ci:', ci, ', rn:', rn, ', cn:', cn);
                const cell = rows.getCell(ri, ci);
                cell.merge[0] += rn;
                cell.merge[1] += cn;
                if (cell.merge[0] === 0 && cell.merge[1] === 0) {
                    delete cell.merge;
                }
            });
        });
    }
    scrollx(x, cb) {
        const { scroll, freeze, cols } = this;
        const [, fci] = freeze;
        const [ci, left, width] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(fci, cols.len, 0, 0, x, (i) => cols.getWidth(i));
        // console.log('fci:', fci, ', ci:', ci);
        let x1 = left;
        if (x > 0)
            x1 += width;
        if (scroll.x !== x1) {
            scroll.ci = x > 0 ? ci : 0;
            scroll.x = x1;
            cb();
        }
    }
    scrolly(y, cb) {
        const { scroll, freeze, rows } = this;
        const [fri] = freeze;
        const [ri, top, height] = _helper__WEBPACK_IMPORTED_MODULE_6__["default"].rangeReduceIf(fri, rows.len, 0, 0, y, (i) => rows.getHeight(i));
        let y1 = top;
        if (y > 0)
            y1 += height;
        // console.log('ri:', ri, ' ,y:', y1);
        if (scroll.y !== y1) {
            scroll.ri = y > 0 ? ri : 0;
            scroll.y = y1;
            cb();
        }
    }
    cellRect(ri, ci) {
        const { rows, cols } = this;
        const left = cols.sumWidth(0, ci);
        const top = rows.sumHeight(0, ri);
        const cell = rows.getCell(ri, ci);
        let width = cols.getWidth(ci);
        let height = rows.getHeight(ri);
        if (cell !== null) {
            if (cell.merge) {
                const [rn, cn] = cell.merge;
                // console.log('cell.merge:', cell.merge);
                if (rn > 0) {
                    for (let i = 1; i <= rn; i += 1) {
                        height += rows.getHeight(ri + i);
                    }
                }
                if (cn > 0) {
                    for (let i = 1; i <= cn; i += 1) {
                        width += cols.getWidth(ci + i);
                    }
                }
            }
        }
        // console.log('data:', this.d);
        return {
            left,
            top,
            width,
            height,
            cell,
        };
    }
    getCell(ri, ci) {
        return this.rows.getCell(ri, ci);
    }
    getCellTextOrDefault(ri, ci) {
        const cell = this.getCell(ri, ci);
        return cell && cell.text ? cell.text : '';
    }
    getCellStyle(ri, ci) {
        const cell = this.getCell(ri, ci);
        if (cell && cell.style !== undefined) {
            return this.styles[cell.style];
        }
        return null;
    }
    getCellStyleOrDefault(ri, ci) {
        const { styles, rows } = this;
        const cell = rows.getCell(ri, ci);
        const cellStyle = cell && cell.style !== undefined ? styles[cell.style] : {};
        return _helper__WEBPACK_IMPORTED_MODULE_6__["default"].merge(this.defaultStyle(), cellStyle);
    }
    getSelectedCellStyle() {
        const { ri, ci } = this.selector;
        return this.getCellStyleOrDefault(ri, ci);
    }
    // state: input | finished
    setCellText(ri, ci, text, state) {
        const { rows, history, validations } = this;
        if (state === 'finished') {
            rows.setCellText(ri, ci, '');
            history.add(this.getData());
            rows.setCellText(ri, ci, text);
        }
        else {
            rows.setCellText(ri, ci, text);
            this.change(this.getData());
        }
        // validator
        validations.validate(ri, ci, text);
    }
    freezeIsActive() {
        const [ri, ci] = this.freeze;
        return ri > 0 || ci > 0;
    }
    setFreeze(ri, ci) {
        this.changeData(() => {
            this.freeze = [ri, ci];
        });
    }
    freezeTotalWidth() {
        return this.cols.sumWidth(0, this.freeze[1]);
    }
    freezeTotalHeight() {
        return this.rows.sumHeight(0, this.freeze[0]);
    }
    setRowHeight(ri, height) {
        this.changeData(() => {
            this.rows.setHeight(ri, height);
        });
    }
    setColWidth(ci, width) {
        this.changeData(() => {
            this.cols.setWidth(ci, width);
        });
    }
    viewHeight() {
        const { view, showToolbar, showBottomBar } = this.settings;
        let h = view.height();
        if (showBottomBar) {
            h -= bottombarHeight;
        }
        if (showToolbar) {
            h -= toolbarHeight;
        }
        return h;
    }
    viewWidth() {
        return this.settings.view.width();
    }
    freezeViewRange() {
        const [ri, ci] = this.freeze;
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(0, 0, ri - 1, ci - 1, this.freezeTotalWidth(), this.freezeTotalHeight());
    }
    contentRange() {
        const { rows, cols } = this;
        const [ri, ci] = rows.maxCell();
        const h = rows.sumHeight(0, ri + 1);
        const w = cols.sumWidth(0, ci + 1);
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(0, 0, ri, ci, w, h);
    }
    exceptRowTotalHeight(sri, eri) {
        const { exceptRowSet, rows } = this;
        const exceptRows = Array.from(exceptRowSet);
        let exceptRowTH = 0;
        exceptRows.forEach((ri) => {
            if (ri < sri || ri > eri) {
                const height = rows.getHeight(ri);
                exceptRowTH += height;
            }
        });
        return exceptRowTH;
    }
    viewRange() {
        const { scroll, rows, cols, freeze, exceptRowSet } = this;
        // console.log('scroll:', scroll, ', freeze:', freeze)
        let { ri, ci } = scroll;
        if (ri <= 0)
            [ri] = freeze;
        if (ci <= 0)
            [, ci] = freeze;
        let [x, y] = [0, 0];
        let [eri, eci] = [rows.len, cols.len];
        for (let i = ri; i < rows.len; i += 1) {
            if (!exceptRowSet.has(i)) {
                y += rows.getHeight(i);
                eri = i;
            }
            if (y > this.viewHeight())
                break;
        }
        for (let j = ci; j < cols.len; j += 1) {
            x += cols.getWidth(j);
            eci = j;
            if (x > this.viewWidth())
                break;
        }
        // console.log(ri, ci, eri, eci, x, y);
        return new _cell_range__WEBPACK_IMPORTED_MODULE_10__.CellRange(ri, ci, eri, eci, x, y);
    }
    eachMergesInView(viewRange, cb) {
        this.merges.filterIntersects(viewRange).forEach((it) => cb(it));
    }
    hideRowsOrCols() {
        const { rows, cols, selector } = this;
        const [rlen, clen] = selector.size();
        const { sri, sci, eri, eci } = selector.range;
        if (rlen === rows.len) {
            for (let ci = sci; ci <= eci; ci += 1) {
                cols.setHide(ci, true);
            }
        }
        else if (clen === cols.len) {
            for (let ri = sri; ri <= eri; ri += 1) {
                rows.setHide(ri, true);
            }
        }
    }
    // type: row | col
    // index row-index | col-index
    unhideRowsOrCols(type, index) {
        this[`${type}s`].unhide(index);
    }
    rowEach(min, max, cb) {
        let y = 0;
        const { rows } = this;
        const frset = this.exceptRowSet;
        const frary = [...frset];
        let offset = 0;
        for (let i = 0; i < frary.length; i += 1) {
            if (frary[i] < min) {
                offset += 1;
            }
        }
        // console.log('min:', min, ', max:', max, ', scroll:', scroll);
        for (let i = min + offset; i <= max + offset; i += 1) {
            if (frset.has(i)) {
                offset += 1;
            }
            else {
                const rowHeight = rows.getHeight(i);
                if (rowHeight > 0) {
                    cb(i, y, rowHeight);
                    y += rowHeight;
                    if (y > this.viewHeight())
                        break;
                }
            }
        }
    }
    colEach(min, max, cb) {
        let x = 0;
        const { cols } = this;
        for (let i = min; i <= max; i += 1) {
            const colWidth = cols.getWidth(i);
            if (colWidth > 0) {
                cb(i, x, colWidth);
                x += colWidth;
                if (x > this.viewWidth())
                    break;
            }
        }
    }
    defaultStyle() {
        return this.settings.style;
    }
    addStyle(nstyle) {
        const { styles } = this;
        // console.log('old.styles:', styles, nstyle);
        for (let i = 0; i < styles.length; i += 1) {
            const style = styles[i];
            if (_helper__WEBPACK_IMPORTED_MODULE_6__["default"].equals(style, nstyle))
                return i;
        }
        styles.push(nstyle);
        return styles.length - 1;
    }
    changeData(cb) {
        this.history.add(this.getData());
        cb();
        this.change(this.getData());
    }
    setData(d) {
        Object.keys(d).forEach((property) => {
            if (property === 'merges' ||
                property === 'rows' ||
                property === 'cols' ||
                property === 'validations') {
                this[property].setData(d[property]);
            }
            else if (property === 'freeze') {
                const [x, y] = (0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.expr2xy)(d[property]);
                this.freeze = [y, x];
            }
            else if (property === 'autofilter') {
                this.autoFilter.setData(d[property]);
            }
            else if (d[property] !== undefined) {
                this[property] = d[property];
            }
        });
        return this;
    }
    getData() {
        const { name, freeze, styles, merges, rows, cols, validations, autoFilter, } = this;
        return {
            name,
            freeze: (0,_alphabet__WEBPACK_IMPORTED_MODULE_11__.xy2expr)(freeze[1], freeze[0]),
            styles,
            merges: merges.getData(),
            rows: rows.getData(),
            cols: cols.getData(),
            validations: validations.getData(),
            autofilter: autoFilter.getData(),
        };
    }
}


/***/ }),

/***/ "./src/core/font.ts":
/*!**************************!*\
  !*** ./src/core/font.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFonts": () => (/* binding */ baseFonts),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "fontSizes": () => (/* binding */ fontSizes),
/* harmony export */   "fonts": () => (/* binding */ fonts),
/* harmony export */   "getFontSizePxByPt": () => (/* binding */ getFontSizePxByPt)
/* harmony export */ });
// docs
/** default font list
 * @type {BaseFont[]}
 */
const baseFonts = [
    { key: 'Arial', title: 'Arial' },
    { key: 'Helvetica', title: 'Helvetica' },
    { key: 'Source Sans Pro', title: 'Source Sans Pro' },
    { key: 'Comic Sans MS', title: 'Comic Sans MS' },
    { key: 'Courier New', title: 'Courier New' },
    { key: 'Verdana', title: 'Verdana' },
    { key: 'Lato', title: 'Lato' },
];
/** default fontSize list
 * @type {FontSize[]}
 */
const fontSizes = [
    { pt: 7.5, px: 10 },
    { pt: 8, px: 11 },
    { pt: 9, px: 12 },
    { pt: 10, px: 13 },
    { pt: 10.5, px: 14 },
    { pt: 11, px: 15 },
    { pt: 12, px: 16 },
    { pt: 14, px: 18.7 },
    { pt: 15, px: 20 },
    { pt: 16, px: 21.3 },
    { pt: 18, px: 24 },
    { pt: 22, px: 29.3 },
    { pt: 24, px: 32 },
    { pt: 26, px: 34.7 },
    { pt: 36, px: 48 },
    { pt: 42, px: 56 },
    // { pt: 54, px: 71.7 },
    // { pt: 63, px: 83.7 },
    // { pt: 72, px: 95.6 },
];
/** map pt to px
 * @date 2019-10-10
 * @param {fontsizePT} pt
 * @returns {fontsizePX}
 */
function getFontSizePxByPt(pt) {
    for (let i = 0; i < fontSizes.length; i += 1) {
        const fontSize = fontSizes[i];
        if (fontSize.pt === pt) {
            return fontSize.px;
        }
    }
    return pt;
}
/** transform baseFonts to map
 * @date 2019-10-10
 * @param {BaseFont[]} [ary=[]]
 * @returns {object}
 */
function fonts(ary = []) {
    const map = {};
    baseFonts.concat(ary).forEach((f) => {
        map[f.key] = f;
    });
    return map;
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/format.ts":
/*!****************************!*\
  !*** ./src/core/format.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFormats": () => (/* binding */ baseFormats),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "formatm": () => (/* binding */ formatm)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");

const formatStringRender = v => v;
const formatNumberRender = (v) => {
    // match "-12.1" or "12" or "12.1"
    if (/^(-?\d*.?\d*)$/.test(v)) {
        const v1 = Number(v).toFixed(2).toString();
        const [first, ...parts] = v1.split('\\.');
        return [first.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,'), ...parts];
    }
    return v;
};
const baseFormats = [
    {
        key: 'normal',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.normal'),
        type: 'string',
        render: formatStringRender,
    },
    {
        key: 'text',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.text'),
        type: 'string',
        render: formatStringRender,
    },
    {
        key: 'number',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.number'),
        type: 'number',
        label: '1,000.12',
        render: formatNumberRender,
    },
    {
        key: 'percent',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.percent'),
        type: 'number',
        label: '10.12%',
        render: v => `${v}%`,
    },
    {
        key: 'rmb',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.rmb'),
        type: 'number',
        label: '￥10.00',
        render: v => `￥${formatNumberRender(v)}`,
    },
    {
        key: 'usd',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.usd'),
        type: 'number',
        label: '$10.00',
        render: v => `$${formatNumberRender(v)}`,
    },
    {
        key: 'eur',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.eur'),
        type: 'number',
        label: '€10.00',
        render: v => `€${formatNumberRender(v)}`,
    },
    {
        key: 'date',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.date'),
        type: 'date',
        label: '26/09/2008',
        render: formatStringRender,
    },
    {
        key: 'time',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.time'),
        type: 'date',
        label: '15:59:00',
        render: formatStringRender,
    },
    {
        key: 'datetime',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.datetime'),
        type: 'date',
        label: '26/09/2008 15:59:00',
        render: formatStringRender,
    },
    {
        key: 'duration',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('format.duration'),
        type: 'date',
        label: '24:01:00',
        render: formatStringRender,
    },
];
// const formats = (ary = []) => {
//   const map = {};
//   baseFormats.concat(ary).forEach((f) => {
//     map[f.key] = f;
//   });
//   return map;
// };
const formatm = {};
baseFormats.forEach((f) => {
    formatm[f.key] = f;
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/formula.ts":
/*!*****************************!*\
  !*** ./src/core/formula.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseFormulas": () => (/* binding */ baseFormulas),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "formulam": () => (/* binding */ formulam),
/* harmony export */   "formulas": () => (/* binding */ formulas)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/**
  formula:
    key
    title
    render
*/
/**
 * @typedef {object} Formula
 * @property {string} key
 * @property {function} title
 * @property {function} render
 */


/** @type {Formula[]} */
const baseFormulas = [
    {
        key: 'SUM',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.sum'),
        render: ary => ary.reduce((a, b) => (0,_helper__WEBPACK_IMPORTED_MODULE_1__.numberCalc)('+', a, b), 0),
    },
    {
        key: 'AVERAGE',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.average'),
        render: ary => ary.reduce((a, b) => Number(a) + Number(b), 0) / ary.length,
    },
    {
        key: 'MAX',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.max'),
        render: ary => Math.max(...ary.map(v => Number(v))),
    },
    {
        key: 'MIN',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.min'),
        render: ary => Math.min(...ary.map(v => Number(v))),
    },
    {
        key: 'IF',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula._if'),
        render: ([b, t, f]) => (b ? t : f),
    },
    {
        key: 'AND',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.and'),
        render: ary => ary.every(it => it),
    },
    {
        key: 'OR',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.or'),
        render: ary => ary.some(it => it),
    },
    {
        key: 'CONCAT',
        title: (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.tf)('formula.concat'),
        render: ary => ary.join(''),
    },
    /* support:  1 + A1 + B2 * 3
    {
      key: 'DIVIDE',
      title: tf('formula.divide'),
      render: ary => ary.reduce((a, b) => Number(a) / Number(b)),
    },
    {
      key: 'PRODUCT',
      title: tf('formula.product'),
      render: ary => ary.reduce((a, b) => Number(a) * Number(b),1),
    },
    {
      key: 'SUBTRACT',
      title: tf('formula.subtract'),
      render: ary => ary.reduce((a, b) => Number(a) - Number(b)),
    },
    */
];
const formulas = baseFormulas;
// const formulas = (formulaAry = []) => {
//   const formulaMap = {};
//   baseFormulas.concat(formulaAry).forEach((f) => {
//     formulaMap[f.key] = f;
//   });
//   return formulaMap;
// };
const formulam = {};
baseFormulas.forEach((f) => {
    formulam[f.key] = f;
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/helper.ts":
/*!****************************!*\
  !*** ./src/core/helper.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "numberCalc": () => (/* binding */ numberCalc)
/* harmony export */ });
/* eslint-disable no-param-reassign */
function cloneDeep(obj) {
    return JSON.parse(JSON.stringify(obj));
}
const mergeDeep = (object = {}, ...sources) => {
    sources.forEach((source) => {
        Object.keys(source).forEach((key) => {
            const v = source[key];
            // console.log('k:', key, ', v:', source[key], typeof v, v instanceof Object);
            if (typeof v === 'string' ||
                typeof v === 'number' ||
                typeof v === 'boolean') {
                object[key] = v;
            }
            else if (typeof v !== 'function' &&
                !Array.isArray(v) &&
                v instanceof Object) {
                object[key] = object[key] || {};
                mergeDeep(object[key], v);
            }
            else {
                object[key] = v;
            }
        });
    });
    // console.log('::', object);
    return object;
};
function equals(obj1, obj2) {
    const keys = Object.keys(obj1);
    if (keys.length !== Object.keys(obj2).length)
        return false;
    for (let i = 0; i < keys.length; i += 1) {
        const k = keys[i];
        const v1 = obj1[k];
        const v2 = obj2[k];
        if (v2 === undefined)
            return false;
        if (typeof v1 === 'string' ||
            typeof v1 === 'number' ||
            typeof v1 === 'boolean') {
            if (v1 !== v2)
                return false;
        }
        else if (Array.isArray(v1)) {
            if (v1.length !== v2.length)
                return false;
            for (let ai = 0; ai < v1.length; ai += 1) {
                if (!equals(v1[ai], v2[ai]))
                    return false;
            }
        }
        else if (typeof v1 !== 'function' &&
            !Array.isArray(v1) &&
            v1 instanceof Object) {
            if (!equals(v1, v2))
                return false;
        }
    }
    return true;
}
/*
  objOrAry: obejct or Array
  cb: (value, index | key) => { return value }
*/
const sum = (objOrAry, cb = (value, k) => value) => {
    let total = 0;
    let size = 0;
    Object.keys(objOrAry).forEach((key) => {
        total += cb(objOrAry[key], key);
        size += 1;
    });
    return [total, size];
};
function deleteProperty(obj, property) {
    const oldv = obj[`${property}`];
    delete obj[`${property}`];
    return oldv;
}
function rangeReduceIf(min, max, inits, initv, ifv, getv) {
    let s = inits;
    let v = initv;
    let i = min;
    for (; i < max; i += 1) {
        if (s > ifv)
            break;
        v = getv(i);
        s += v;
    }
    return [i, s - v, v];
}
function rangeSum(min, max, getv) {
    let s = 0;
    for (let i = min; i < max; i += 1) {
        s += getv(i);
    }
    return s;
}
function rangeEach(min, max, cb) {
    for (let i = min; i < max; i += 1) {
        cb(i);
    }
}
function arrayEquals(a1, a2) {
    if (a1.length === a2.length) {
        for (let i = 0; i < a1.length; i += 1) {
            if (a1[i] !== a2[i])
                return false;
        }
    }
    else
        return false;
    return true;
}
function digits(a) {
    const v = `${a}`;
    let ret = 0;
    let flag = false;
    for (let i = 0; i < v.length; i += 1) {
        if (flag === true)
            ret += 1;
        if (v.charAt(i) === '.')
            flag = true;
    }
    return ret;
}
function numberCalc(type, a1, a2) {
    if (Number.isNaN(a1) || Number.isNaN(a2)) {
        return a1 + type + a2;
    }
    const al1 = digits(a1);
    const al2 = digits(a2);
    const num1 = Number(a1);
    const num2 = Number(a2);
    let ret = 0;
    if (type === '-') {
        ret = num1 - num2;
    }
    else if (type === '+') {
        ret = num1 + num2;
    }
    else if (type === '*') {
        ret = num1 * num2;
    }
    else if (type === '/') {
        ret = num1 / num2;
        if (digits(ret) > 5)
            return ret.toFixed(2);
        return ret;
    }
    return ret.toFixed(Math.max(al1, al2));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    cloneDeep,
    merge: (...sources) => mergeDeep({}, ...sources),
    equals,
    arrayEquals,
    sum,
    rangeEach,
    rangeSum,
    rangeReduceIf,
    deleteProperty,
    numberCalc,
});


/***/ }),

/***/ "./src/core/history.ts":
/*!*****************************!*\
  !*** ./src/core/history.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ History)
/* harmony export */ });
// import helper from '../helper';
class History {
    undoItems;
    redoItems;
    constructor() {
        this.undoItems = [];
        this.redoItems = [];
    }
    add(data) {
        this.undoItems.push(JSON.stringify(data));
        this.redoItems = [];
    }
    canUndo() {
        return this.undoItems.length > 0;
    }
    canRedo() {
        return this.redoItems.length > 0;
    }
    undo(currentd, cb) {
        const { undoItems, redoItems } = this;
        if (this.canUndo()) {
            redoItems.push(JSON.stringify(currentd));
            cb(JSON.parse(undoItems.pop()));
        }
    }
    redo(currentd, cb) {
        const { undoItems, redoItems } = this;
        if (this.canRedo()) {
            undoItems.push(JSON.stringify(currentd));
            cb(JSON.parse(redoItems.pop()));
        }
    }
}


/***/ }),

/***/ "./src/core/merge.ts":
/*!***************************!*\
  !*** ./src/core/merge.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Merges": () => (/* binding */ Merges),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

class Merges {
    _;
    constructor(d = []) {
        this._ = d;
    }
    forEach(cb) {
        this._.forEach(cb);
    }
    deleteWithin(cr) {
        this._ = this._.filter(it => !it.within(cr));
    }
    getFirstIncludes(ri, ci) {
        for (let i = 0; i < this._.length; i += 1) {
            const it = this._[i];
            if (it.includes(ri, ci)) {
                return it;
            }
        }
        return null;
    }
    filterIntersects(cellRange) {
        return new Merges(this._.filter(it => it.intersects(cellRange)));
    }
    intersects(cellRange) {
        for (let i = 0; i < this._.length; i += 1) {
            const it = this._[i];
            if (it.intersects(cellRange)) {
                // console.log('intersects');
                return true;
            }
        }
        return false;
    }
    union(cellRange) {
        let cr = cellRange;
        this._.forEach((it) => {
            if (it.intersects(cr)) {
                cr = it.union(cr);
            }
        });
        return cr;
    }
    add(cr) {
        this.deleteWithin(cr);
        this._.push(cr);
    }
    // type: row | column
    shift(type, index, n, cbWithin) {
        this._.forEach((cellRange) => {
            const { sri, sci, eri, eci, } = cellRange;
            const range = cellRange;
            if (type === 'row') {
                if (sri >= index) {
                    range.sri += n;
                    range.eri += n;
                }
                else if (sri < index && index <= eri) {
                    range.eri += n;
                    cbWithin(sri, sci, n, 0);
                }
            }
            else if (type === 'column') {
                if (sci >= index) {
                    range.sci += n;
                    range.eci += n;
                }
                else if (sci < index && index <= eci) {
                    range.eci += n;
                    cbWithin(sri, sci, 0, n);
                }
            }
        });
    }
    move(cellRange, rn, cn) {
        this._.forEach((it1) => {
            const it = it1;
            if (it.within(cellRange)) {
                it.eri += rn;
                it.sri += rn;
                it.sci += cn;
                it.eci += cn;
            }
        });
    }
    setData(merges) {
        this._ = merges.map(merge => _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange.valueOf(merge));
        return this;
    }
    getData() {
        return this._.map(merge => merge.toString());
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/row.ts":
/*!*************************!*\
  !*** ./src/core/row.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Rows": () => (/* binding */ Rows),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");
/* harmony import */ var _alphabet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./alphabet */ "./src/core/alphabet.ts");


class Rows {
    _;
    len;
    height;
    constructor({ len, height }) {
        this._ = {};
        this.len = len;
        // default row height
        this.height = height;
    }
    getHeight(ri) {
        if (this.isHide(ri))
            return 0;
        const row = this.get(ri);
        if (row && row.height) {
            return row.height;
        }
        return this.height;
    }
    setHeight(ri, v) {
        const row = this.getOrNew(ri);
        row.height = v;
    }
    unhide(idx) {
        let index = idx;
        while (index > 0) {
            index -= 1;
            if (this.isHide(index)) {
                this.setHide(index, false);
            }
            else
                break;
        }
    }
    isHide(ri) {
        const row = this.get(ri);
        return row && row.hide;
    }
    setHide(ri, v) {
        const row = this.getOrNew(ri);
        if (v === true)
            row.hide = true;
        else
            delete row.hide;
    }
    setStyle(ri, style) {
        const row = this.getOrNew(ri);
        row.style = style;
    }
    sumHeight(min, max, exceptSet) {
        return _helper__WEBPACK_IMPORTED_MODULE_0__["default"].rangeSum(min, max, (i) => {
            if (exceptSet && exceptSet.has(i))
                return 0;
            return this.getHeight(i);
        });
    }
    totalHeight() {
        return this.sumHeight(0, this.len);
    }
    get(ri) {
        return this._[ri];
    }
    getOrNew(ri) {
        this._[ri] = this._[ri] || { cells: {} };
        return this._[ri];
    }
    getCell(ri, ci) {
        const row = this.get(ri);
        if (row !== undefined && row.cells !== undefined && row.cells[ci] !== undefined) {
            return row.cells[ci];
        }
        return null;
    }
    getCellMerge(ri, ci) {
        const cell = this.getCell(ri, ci);
        if (cell && cell.merge)
            return cell.merge;
        return [0, 0];
    }
    getCellOrNew(ri, ci) {
        const row = this.getOrNew(ri);
        row.cells[ci] = row.cells[ci] || {};
        return row.cells[ci];
    }
    // what: all | text | format
    setCell(ri, ci, cell, what = 'all') {
        const row = this.getOrNew(ri);
        if (what === 'all') {
            row.cells[ci] = cell;
        }
        else if (what === 'text') {
            row.cells[ci] = row.cells[ci] || {};
            row.cells[ci].text = cell.text;
        }
        else if (what === 'format') {
            row.cells[ci] = row.cells[ci] || {};
            row.cells[ci].style = cell.style;
            if (cell.merge)
                row.cells[ci].merge = cell.merge;
        }
    }
    setCellText(ri, ci, text) {
        const cell = this.getCellOrNew(ri, ci);
        if (cell.editable !== false)
            cell.text = text;
    }
    // what: all | format | text
    copyPaste(srcCellRange, dstCellRange, what, autofill = false, cb = (...args) => { }) {
        const { sri, sci, eri, eci, } = srcCellRange;
        const dsri = dstCellRange.sri;
        const dsci = dstCellRange.sci;
        const deri = dstCellRange.eri;
        const deci = dstCellRange.eci;
        const [rn, cn] = srcCellRange.size();
        const [drn, dcn] = dstCellRange.size();
        // console.log(srcIndexes, dstIndexes);
        let isAdd = true;
        let dn = 0;
        if (deri < sri || deci < sci) {
            isAdd = false;
            if (deri < sri)
                dn = drn;
            else
                dn = dcn;
        }
        for (let i = sri; i <= eri; i += 1) {
            if (this._[i]) {
                for (let j = sci; j <= eci; j += 1) {
                    if (this._[i].cells && this._[i].cells[j]) {
                        for (let ii = dsri; ii <= deri; ii += rn) {
                            for (let jj = dsci; jj <= deci; jj += cn) {
                                const nri = ii + (i - sri);
                                const nci = jj + (j - sci);
                                const ncell = _helper__WEBPACK_IMPORTED_MODULE_0__["default"].cloneDeep(this._[i].cells[j]);
                                // ncell.text
                                if (autofill && ncell && ncell.text && ncell.text.length > 0) {
                                    const { text } = ncell;
                                    let n = (jj - dsci) + (ii - dsri) + 2;
                                    if (!isAdd) {
                                        n -= dn + 1;
                                    }
                                    if (text[0] === '=') {
                                        ncell.text = text.replace(/[a-zA-Z]{1,3}\d+/g, (word) => {
                                            let [xn, yn] = [0, 0];
                                            if (sri === dsri) {
                                                xn = n - 1;
                                                // if (isAdd) xn -= 1;
                                            }
                                            else {
                                                yn = n - 1;
                                            }
                                            if (/^\d+$/.test(word))
                                                return word;
                                            return (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, xn, yn);
                                        });
                                    }
                                    else if ((rn <= 1 && cn > 1 && (dsri > eri || deri < sri))
                                        || (cn <= 1 && rn > 1 && (dsci > eci || deci < sci))
                                        || (rn <= 1 && cn <= 1)) {
                                        const result = /[\\.\d]+$/.exec(text);
                                        // console.log('result:', result);
                                        if (result !== null) {
                                            const index = Number(result[0]) + n - 1;
                                            ncell.text = text.substring(0, result.index) + index;
                                        }
                                    }
                                }
                                this.setCell(nri, nci, ncell, what);
                                cb(nri, nci, ncell);
                            }
                        }
                    }
                }
            }
        }
    }
    cutPaste(srcCellRange, dstCellRange) {
        const ncellmm = {};
        this.each((ri) => {
            this.eachCells(ri, (ci) => {
                let nri = parseInt(ri, 10);
                let nci = parseInt(ci, 10);
                if (srcCellRange.includes(ri, ci)) {
                    nri = dstCellRange.sri + (nri - srcCellRange.sri);
                    nci = dstCellRange.sci + (nci - srcCellRange.sci);
                }
                ncellmm[nri] = ncellmm[nri] || { cells: {} };
                ncellmm[nri].cells[nci] = this._[ri].cells[ci];
            });
        });
        this._ = ncellmm;
    }
    // src: Array<Array<String>>
    paste(src, dstCellRange) {
        if (src.length <= 0)
            return;
        const { sri, sci } = dstCellRange;
        src.forEach((row, i) => {
            const ri = sri + i;
            row.forEach((cell, j) => {
                const ci = sci + j;
                this.setCellText(ri, ci, cell);
            });
        });
    }
    insert(sri, n = 1) {
        const ndata = {};
        this.each((ri, row) => {
            let nri = parseInt(ri, 10);
            if (nri >= sri) {
                nri += n;
                this.eachCells(ri, (ci, cell) => {
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, word => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, 0, n, (x, y) => y >= sri));
                    }
                });
            }
            ndata[nri] = row;
        });
        this._ = ndata;
        this.len += n;
    }
    delete(sri, eri) {
        const n = eri - sri + 1;
        const ndata = {};
        this.each((ri, row) => {
            const nri = parseInt(ri, 10);
            if (nri < sri) {
                ndata[nri] = row;
            }
            else if (ri > eri) {
                ndata[nri - n] = row;
                this.eachCells(ri, (ci, cell) => {
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, word => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, 0, -n, (x, y) => y > eri));
                    }
                });
            }
        });
        this._ = ndata;
        this.len -= n;
    }
    insertColumn(sci, n = 1) {
        this.each((ri, row) => {
            const rndata = {};
            this.eachCells(ri, (ci, cell) => {
                let nci = parseInt(ci, 10);
                if (nci >= sci) {
                    nci += n;
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, word => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, n, 0, x => x >= sci));
                    }
                }
                rndata[nci] = cell;
            });
            row.cells = rndata;
        });
    }
    deleteColumn(sci, eci) {
        const n = eci - sci + 1;
        this.each((ri, row) => {
            const rndata = {};
            this.eachCells(ri, (ci, cell) => {
                const nci = parseInt(ci, 10);
                if (nci < sci) {
                    rndata[nci] = cell;
                }
                else if (nci > eci) {
                    rndata[nci - n] = cell;
                    if (cell.text && cell.text[0] === '=') {
                        cell.text = cell.text.replace(/[a-zA-Z]{1,3}\d+/g, word => (0,_alphabet__WEBPACK_IMPORTED_MODULE_1__.expr2expr)(word, -n, 0, x => x > eci));
                    }
                }
            });
            row.cells = rndata;
        });
    }
    // what: all | text | format | merge
    deleteCells(cellRange, what = 'all') {
        cellRange.each((i, j) => {
            this.deleteCell(i, j, what);
        });
    }
    // what: all | text | format | merge
    deleteCell(ri, ci, what = 'all') {
        const row = this.get(ri);
        if (row !== null) {
            const cell = this.getCell(ri, ci);
            if (cell !== null && cell.editable !== false) {
                if (what === 'all') {
                    delete row.cells[ci];
                }
                else if (what === 'text') {
                    if (cell.text)
                        delete cell.text;
                    if (cell.value)
                        delete cell.value;
                }
                else if (what === 'format') {
                    if (cell.style !== undefined)
                        delete cell.style;
                    if (cell.merge)
                        delete cell.merge;
                }
                else if (what === 'merge') {
                    if (cell.merge)
                        delete cell.merge;
                }
            }
        }
    }
    maxCell() {
        const keys = Object.keys(this._);
        const ri = keys[keys.length - 1];
        const col = this._[ri];
        if (col) {
            const { cells } = col;
            const ks = Object.keys(cells);
            const ci = ks[ks.length - 1];
            return [parseInt(ri, 10), parseInt(ci, 10)];
        }
        return [0, 0];
    }
    each(cb) {
        Object.entries(this._).forEach(([ri, row]) => {
            cb(ri, row);
        });
    }
    eachCells(ri, cb) {
        if (this._[ri] && this._[ri].cells) {
            Object.entries(this._[ri].cells).forEach(([ci, cell]) => {
                cb(ci, cell);
            });
        }
    }
    setData(d) {
        if (d.len) {
            this.len = d.len;
            delete d.len;
        }
        this._ = d;
    }
    getData() {
        const { len } = this;
        return Object.assign({ len }, this._);
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/scroll.ts":
/*!****************************!*\
  !*** ./src/core/scroll.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Scroll)
/* harmony export */ });
class Scroll {
    x;
    y;
    ri;
    ci;
    constructor() {
        this.x = 0; // left
        this.y = 0; // top
        this.ri = 0; // cell row-index
        this.ci = 0; // cell col-index
    }
}


/***/ }),

/***/ "./src/core/selector.ts":
/*!******************************!*\
  !*** ./src/core/selector.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Selector)
/* harmony export */ });
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");

class Selector {
    range;
    ri;
    ci;
    constructor() {
        this.range = new _cell_range__WEBPACK_IMPORTED_MODULE_0__.CellRange(0, 0, 0, 0);
        this.ri = 0;
        this.ci = 0;
    }
    multiple() {
        return this.range.multiple();
    }
    setIndexes(ri, ci) {
        this.ri = ri;
        this.ci = ci;
    }
    size() {
        return this.range.size();
    }
}


/***/ }),

/***/ "./src/core/validation.ts":
/*!********************************!*\
  !*** ./src/core/validation.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Validations": () => (/* binding */ Validations),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _validator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validator */ "./src/core/validator.ts");
/* harmony import */ var _cell_range__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cell_range */ "./src/core/cell_range.ts");


class Validation {
    refs;
    mode;
    validator;
    constructor(mode, refs, validator) {
        this.refs = refs;
        this.mode = mode; // cell
        this.validator = validator;
    }
    includes(ri, ci) {
        const { refs } = this;
        for (let i = 0; i < refs.length; i += 1) {
            const cr = _cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(refs[i]);
            if (cr.includes(ri, ci))
                return true;
        }
        return false;
    }
    addRef(ref) {
        this.remove(_cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(ref));
        this.refs.push(ref);
    }
    remove(cellRange) {
        const nrefs = [];
        this.refs.forEach((it) => {
            const cr = _cell_range__WEBPACK_IMPORTED_MODULE_1__.CellRange.valueOf(it);
            if (cr.intersects(cellRange)) {
                const crs = cr.difference(cellRange);
                crs.forEach(it1 => nrefs.push(it1.toString()));
            }
            else {
                nrefs.push(it);
            }
        });
        this.refs = nrefs;
    }
    getData() {
        const { refs, mode, validator } = this;
        const { type, required, operator, value, } = validator;
        return {
            refs, mode, type, required, operator, value,
        };
    }
    static valueOf({ refs, mode, type, required, operator, value, }) {
        return new Validation(mode, refs, new _validator__WEBPACK_IMPORTED_MODULE_0__["default"](type, required, value, operator));
    }
}
class Validations {
    _;
    errors;
    constructor() {
        this._ = [];
        // ri_ci: errMessage
        this.errors = new Map();
    }
    getError(ri, ci) {
        return this.errors.get(`${ri}_${ci}`);
    }
    validate(ri, ci, text) {
        const v = this.get(ri, ci);
        const key = `${ri}_${ci}`;
        const { errors } = this;
        if (v !== null) {
            const [flag, message] = v.validator.validate(text);
            if (!flag) {
                errors.set(key, message);
            }
            else {
                errors.delete(key);
            }
        }
        else {
            errors.delete(key);
        }
        return true;
    }
    // type: date|number|phone|email|list
    // validator: { required, value, operator }
    add(mode, ref, { type, required, value, operator, }) {
        const validator = new _validator__WEBPACK_IMPORTED_MODULE_0__["default"](type, required, value, operator);
        const v = this.getByValidator(validator);
        if (v !== null) {
            v.addRef(ref);
        }
        else {
            this._.push(new Validation(mode, [ref], validator));
        }
    }
    getByValidator(validator) {
        for (let i = 0; i < this._.length; i += 1) {
            const v = this._[i];
            if (v.validator.equals(validator)) {
                return v;
            }
        }
        return null;
    }
    get(ri, ci) {
        for (let i = 0; i < this._.length; i += 1) {
            const v = this._[i];
            if (v.includes(ri, ci))
                return v;
        }
        return null;
    }
    remove(cellRange) {
        this.each((it) => {
            it.remove(cellRange);
        });
    }
    each(cb) {
        this._.forEach(it => cb(it));
    }
    getData() {
        return this._.filter(it => it.refs.length > 0).map(it => it.getData());
    }
    setData(d) {
        this._ = d.map(it => Validation.valueOf(it));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});



/***/ }),

/***/ "./src/core/validator.ts":
/*!*******************************!*\
  !*** ./src/core/validator.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Validator)
/* harmony export */ });
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../locale/locale */ "./src/locale/locale.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/core/helper.ts");


const rules = {
    phone: /^[1-9]\d{10}$/,
    email: /w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/,
};
function returnMessage(flag, key, ...arg) {
    let message = '';
    if (!flag) {
        message = (0,_locale_locale__WEBPACK_IMPORTED_MODULE_0__.t)(`validation.${key}`, ...arg);
    }
    return [flag, message];
}
class Validator {
    required;
    value;
    type;
    operator;
    message;
    // operator: b|nb|eq|neq|lt|lte|gt|gte
    // type: date|number|list|phone|email
    constructor(type, required, value, operator) {
        this.required = required;
        this.value = value;
        this.type = type;
        this.operator = operator;
        this.message = '';
    }
    parseValue(v) {
        const { type } = this;
        if (type === 'date') {
            return new Date(v);
        }
        if (type === 'number') {
            return Number(v);
        }
        return v;
    }
    equals(other) {
        let flag = this.type === other.type
            && this.required === other.required
            && this.operator === other.operator;
        if (flag) {
            if (Array.isArray(this.value)) {
                flag = _helper__WEBPACK_IMPORTED_MODULE_1__["default"].arrayEquals(this.value, other.value);
            }
            else {
                flag = this.value === other.value;
            }
        }
        return flag;
    }
    values() {
        return this.value.split(',');
    }
    validate(v) {
        const { required, operator, value, type, } = this;
        if (required && /^\s*$/.test(v)) {
            return returnMessage(false, 'required');
        }
        if (/^\s*$/.test(v))
            return [true];
        if (rules[type] && !rules[type].test(v)) {
            return returnMessage(false, 'notMatch');
        }
        if (type === 'list') {
            return returnMessage(this.values().includes(v), 'notIn');
        }
        if (operator) {
            const v1 = this.parseValue(v);
            if (operator === 'be') {
                const [min, max] = value;
                return returnMessage(v1 >= this.parseValue(min) && v1 <= this.parseValue(max), 'between', min, max);
            }
            if (operator === 'nbe') {
                const [min, max] = value;
                return returnMessage(v1 < this.parseValue(min) || v1 > this.parseValue(max), 'notBetween', min, max);
            }
            if (operator === 'eq') {
                return returnMessage(v1 === this.parseValue(value), 'equal', value);
            }
            if (operator === 'neq') {
                return returnMessage(v1 !== this.parseValue(value), 'notEqual', value);
            }
            if (operator === 'lt') {
                return returnMessage(v1 < this.parseValue(value), 'lessThan', value);
            }
            if (operator === 'lte') {
                return returnMessage(v1 <= this.parseValue(value), 'lessThanEqual', value);
            }
            if (operator === 'gt') {
                return returnMessage(v1 > this.parseValue(value), 'greaterThan', value);
            }
            if (operator === 'gte') {
                return returnMessage(v1 >= this.parseValue(value), 'greaterThanEqual', value);
            }
        }
        return [true];
    }
}


/***/ }),

/***/ "./src/locale/en.ts":
/*!**************************!*\
  !*** ./src/locale/en.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    toolbar: {
        undo: 'Undo',
        redo: 'Redo',
        print: 'Print',
        paintformat: 'Paint format',
        clearformat: 'Clear format',
        format: 'Format',
        fontName: 'Font',
        fontSize: 'Font size',
        fontBold: 'Font bold',
        fontItalic: 'Font italic',
        underline: 'Underline',
        strike: 'Strike',
        color: 'Text color',
        bgcolor: 'Fill color',
        border: 'Borders',
        merge: 'Merge cells',
        align: 'Horizontal align',
        valign: 'Vertical align',
        textwrap: 'Text wrapping',
        freeze: 'Freeze cell',
        autofilter: 'Filter',
        formula: 'Functions',
        more: 'More',
    },
    contextmenu: {
        copy: 'Copy',
        cut: 'Cut',
        paste: 'Paste',
        pasteValue: 'Paste values only',
        pasteFormat: 'Paste format only',
        hide: 'Hide',
        insertRow: 'Insert row',
        insertColumn: 'Insert column',
        deleteSheet: 'Delete',
        deleteRow: 'Delete row',
        deleteColumn: 'Delete column',
        deleteCell: 'Delete cell',
        deleteCellText: 'Delete cell text',
        validation: 'Data validations',
        cellprintable: 'Enable export',
        cellnonprintable: 'Disable export',
        celleditable: 'Enable editing',
        cellnoneditable: 'Disable editing',
    },
    print: {
        size: 'Paper size',
        orientation: 'Page orientation',
        orientations: ['Landscape', 'Portrait'],
    },
    format: {
        normal: 'Normal',
        text: 'Plain Text',
        number: 'Number',
        percent: 'Percent',
        rmb: 'RMB',
        usd: 'USD',
        eur: 'EUR',
        date: 'Date',
        time: 'Time',
        datetime: 'Date time',
        duration: 'Duration',
    },
    formula: {
        sum: 'Sum',
        average: 'Average',
        max: 'Max',
        min: 'Min',
        _if: 'IF',
        and: 'AND',
        or: 'OR',
        concat: 'Concat',
    },
    validation: {
        required: 'it must be required',
        notMatch: 'it not match its validation rule',
        between: 'it is between {} and {}',
        notBetween: 'it is not between {} and {}',
        notIn: 'it is not in list',
        equal: 'it equal to {}',
        notEqual: 'it not equal to {}',
        lessThan: 'it less than {}',
        lessThanEqual: 'it less than or equal to {}',
        greaterThan: 'it greater than {}',
        greaterThanEqual: 'it greater than or equal to {}',
    },
    error: {
        pasteForMergedCell: 'Unable to do this for merged cells',
    },
    calendar: {
        weeks: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    },
    button: {
        next: 'Next',
        cancel: 'Cancel',
        remove: 'Remove',
        save: 'Save',
        ok: 'OK',
    },
    sort: {
        desc: 'Sort Z -> A',
        asc: 'Sort A -> Z',
    },
    filter: {
        empty: 'empty',
    },
    dataValidation: {
        mode: 'Mode',
        range: 'Cell Range',
        criteria: 'Criteria',
        modeType: {
            cell: 'Cell',
            column: 'Colun',
            row: 'Row',
        },
        type: {
            list: 'List',
            number: 'Number',
            date: 'Date',
            phone: 'Phone',
            email: 'Email',
        },
        operator: {
            be: 'between',
            nbe: 'not betwwen',
            lt: 'less than',
            lte: 'less than or equal to',
            gt: 'greater than',
            gte: 'greater than or equal to',
            eq: 'equal to',
            neq: 'not equal to',
        },
    },
});


/***/ }),

/***/ "./src/locale/locale.ts":
/*!******************************!*\
  !*** ./src/locale/locale.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "locale": () => (/* binding */ locale),
/* harmony export */   "t": () => (/* binding */ t),
/* harmony export */   "tf": () => (/* binding */ tf)
/* harmony export */ });
/* harmony import */ var _en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./en */ "./src/locale/en.ts");
/* global window */

// Defines the fallback language as English
let $languages = ['en'];
const $messages = {
    en: _en__WEBPACK_IMPORTED_MODULE_0__["default"],
};
function translate(key, messages) {
    if (messages) {
        // Return the translation from the first language in the languages array
        // that has a value for the provided key.
        for (const lang of $languages) {
            if (!messages[lang])
                break;
            let message = messages[lang];
            // Splits the key at '.' except where escaped as '\.'
            const keys = key.match(/(?:\\.|[^.])+/g);
            for (let i = 0; i < keys.length; i += 1) {
                const property = keys[i];
                const value = message[property];
                // If value doesn't exist, try next language
                if (!value)
                    break;
                if (i === keys.length - 1)
                    return value;
                // Move down to the next level of the messages object
                message = value;
            }
        }
    }
    return undefined;
}
function t(key, ...args) {
    let v = translate(key, $messages);
    if (!v && window && window.x_spreadsheet && window.x_spreadsheet.$messages) {
        v = translate(key, window.x_spreadsheet.$messages);
    }
    return v || '';
}
function tf(key) {
    return () => t(key);
}
// If clearLangList is set to false, lang will be added to the front of the
// languages array. The languages in the language array are searched in order
// to find a translation. This allows the use of other languages as a fallback
// if lang is missing some keys. The language array is preloaded with English.
// To set the languages array to only include lang, set clearLangList to true.
function locale(lang, message, clearLangList = false) {
    if (clearLangList) {
        $languages = [lang];
    }
    else {
        // Append to front of array.
        // Translation method will use the first language in the list that has a
        // matching key.
        $languages.unshift(lang);
    }
    if (message) {
        $messages[lang] = message;
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    t,
});



/***/ }),

/***/ "./assets/sprite.svg":
/*!***************************!*\
  !*** ./assets/sprite.svg ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "7a05ab5bcad662d05f5c.svg";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		__webpack_require__.b = document.baseURI || self.location.href;
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"xspreadsheet": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// no jsonp function
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Spreadsheet": () => (/* binding */ Spreadsheet),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "spreadsheet": () => (/* binding */ spreadsheet)
/* harmony export */ });
/* harmony import */ var _component_bottombar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/bottombar */ "./src/component/bottombar.ts");
/* harmony import */ var _component_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/element */ "./src/component/element.ts");
/* harmony import */ var _component_sheet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component/sheet */ "./src/component/sheet.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ "./src/config.ts");
/* harmony import */ var _core_data_proxy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/data_proxy */ "./src/core/data_proxy.ts");
/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.less */ "./src/index.less");
/* harmony import */ var _locale_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locale/locale */ "./src/locale/locale.ts");
/* global window, document */







class Spreadsheet {
    options;
    sheetIndex;
    datas;
    bottombar;
    sheet;
    data;
    constructor(selectors, options = {}) {
        let targetEl = selectors;
        this.options = { showBottomBar: true, ...options };
        this.sheetIndex = 1;
        this.datas = [];
        if (typeof selectors === 'string') {
            targetEl = document.querySelector(selectors);
        }
        this.bottombar = this.options.showBottomBar
            ? new _component_bottombar__WEBPACK_IMPORTED_MODULE_0__["default"](() => {
                if (this.options.mode === 'read')
                    return;
                const d = this.addSheet();
                this.sheet.resetData(d);
            }, (index) => {
                const d = this.datas[index];
                this.sheet.resetData(d);
            }, () => {
                this.deleteSheet();
            }, (index, value) => {
                this.datas[index].name = value;
                this.sheet.trigger('change');
            })
            : null;
        this.data = this.addSheet();
        const rootEl = (0,_component_element__WEBPACK_IMPORTED_MODULE_1__.h)('div', `${_config__WEBPACK_IMPORTED_MODULE_3__.cssPrefix}`).on('contextmenu', (evt) => evt.preventDefault());
        // create canvas element
        targetEl.appendChild(rootEl.el);
        this.sheet = new _component_sheet__WEBPACK_IMPORTED_MODULE_2__["default"](rootEl, this.data);
        if (this.bottombar !== null) {
            rootEl.child(this.bottombar.el);
        }
    }
    addSheet(name, active = true) {
        const n = name || `sheet${this.sheetIndex}`;
        const d = new _core_data_proxy__WEBPACK_IMPORTED_MODULE_4__["default"](n, this.options);
        d.change = (...args) => {
            this.sheet.trigger('change', ...args);
        };
        this.datas.push(d);
        // console.log('d:', n, d, this.datas);
        if (this.bottombar !== null) {
            this.bottombar.addItem(n, active, this.options);
        }
        this.sheetIndex += 1;
        return d;
    }
    deleteSheet() {
        if (this.bottombar === null)
            return;
        const [oldIndex, nindex] = this.bottombar.deleteItem();
        if (oldIndex >= 0) {
            this.datas.splice(oldIndex, 1);
            if (nindex >= 0)
                this.sheet.resetData(this.datas[nindex]);
            this.sheet.trigger('change');
        }
    }
    loadData(data) {
        const ds = Array.isArray(data) ? data : [data];
        if (this.bottombar !== null) {
            this.bottombar.clear();
        }
        this.datas = [];
        if (ds.length > 0) {
            for (let i = 0; i < ds.length; i += 1) {
                const it = ds[i];
                const nd = this.addSheet(it.name, i === 0);
                nd.setData(it);
                if (i === 0) {
                    this.sheet.resetData(nd);
                }
            }
        }
        return this;
    }
    getData() {
        return this.datas.map((it) => it.getData());
    }
    cellText(ri, ci, text, sheetIndex = 0) {
        this.datas[sheetIndex].setCellText(ri, ci, text, 'finished');
        return this;
    }
    cell(ri, ci, sheetIndex = 0) {
        return this.datas[sheetIndex].getCell(ri, ci);
    }
    cellStyle(ri, ci, sheetIndex = 0) {
        return this.datas[sheetIndex].getCellStyle(ri, ci);
    }
    reRender() {
        this.sheet.table.render();
        return this;
    }
    on(eventName, func) {
        this.sheet.on(eventName, func);
        return this;
    }
    validate() {
        const { validations } = this.data;
        return validations.errors.size <= 0;
    }
    change(cb) {
        this.sheet.on('change', cb);
        return this;
    }
    static locale(lang, message) {
        (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.locale)(lang, message);
    }
}
const spreadsheet = (el, options = {}) => new Spreadsheet(el, options);
if (window) {
    window.x_spreadsheet = spreadsheet;
    window.x_spreadsheet.locale = (lang, message) => (0,_locale_locale__WEBPACK_IMPORTED_MODULE_6__.locale)(lang, message);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Spreadsheet);


})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxNQUFNLFlBQVksVUFBVSxVQUFVLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sTUFBTSxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsV0FBVyxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sVUFBVSxNQUFNLFlBQVksVUFBVSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLFVBQVUsTUFBTSxNQUFNLFdBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE1BQU0sVUFBVSxNQUFNLFlBQVksVUFBVSxVQUFVLFdBQVcsVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sVUFBVSxXQUFXLE1BQU0sTUFBTSxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sVUFBVSxXQUFXLE1BQU0sWUFBWSxPQUFPLFlBQVksVUFBVSxVQUFVLFVBQVUsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsVUFBVSxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsV0FBVyxVQUFVLFVBQVUsVUFBVSxVQUFVLE1BQU0sWUFBWSxPQUFPLFlBQVksVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsTUFBTSxPQUFPLFlBQVksV0FBVyxVQUFVLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLE1BQU0sTUFBTSxZQUFZLFdBQVcsV0FBVyxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLE1BQU0sTUFBTSxZQUFZLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxNQUFNLE1BQU0sWUFBWSxVQUFVLFVBQVUsVUFBVSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsVUFBVSxNQUFNLE1BQU0sWUFBWSxXQUFXLFVBQVUsVUFBVSxVQUFVLE1BQU0sTUFBTSxZQUFZLFVBQVUsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sTUFBTSxVQUFVLFVBQVUsVUFBVSxVQUFVLFdBQVcsTUFBTSxNQUFNLFdBQVcsVUFBVSxVQUFVLE1BQU0sT0FBTyxXQUFXLFdBQVcsTUFBTSxPQUFPLFVBQVUsV0FBVyxVQUFVLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLE9BQU8sV0FBVyxNQUFNLE1BQU0sWUFBWSxXQUFXLFdBQVcsVUFBVSxXQUFXLFdBQVcsVUFBVSxXQUFXLE1BQU0sTUFBTSxZQUFZLFVBQVUsVUFBVSxXQUFXLFVBQVUsVUFBVSxNQUFNLFFBQVEsYUFBYSxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsVUFBVSxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsTUFBTSxNQUFNLGFBQWEsV0FBVyxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxNQUFNLE1BQU0sWUFBWSxXQUFXLE1BQU0sTUFBTSxZQUFZLE1BQU0sT0FBTyxZQUFZLFVBQVUsV0FBVyxXQUFXLFVBQVUsTUFBTSxNQUFNLGFBQWEsV0FBVyxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsTUFBTSxNQUFNLGFBQWEsVUFBVSxVQUFVLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksTUFBTSxNQUFNLFVBQVUsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsTUFBTSxNQUFNLGFBQWEsV0FBVyxNQUFNLE1BQU0sWUFBWSxNQUFNLE1BQU0sWUFBWSxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sTUFBTSxhQUFhLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxNQUFNLE1BQU0sYUFBYSxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxXQUFXLE1BQU0sT0FBTyxhQUFhLFVBQVUsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsTUFBTSxPQUFPLFlBQVksVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLE9BQU8sWUFBWSxVQUFVLFdBQVcsV0FBVyxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsVUFBVSxNQUFNLE9BQU8sYUFBYSxNQUFNLE9BQU8sYUFBYSxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLFdBQVcsV0FBVyxNQUFNLE9BQU8sYUFBYSxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsTUFBTSxPQUFPLGFBQWEsVUFBVSxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sWUFBWSxXQUFXLFdBQVcsTUFBTSxPQUFPLGFBQWEsTUFBTSxPQUFPLGFBQWEsV0FBVyxNQUFNLFFBQVEsYUFBYSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsTUFBTSxNQUFNLFdBQVcsTUFBTSxPQUFPLFdBQVcsVUFBVSxNQUFNLE1BQU0sV0FBVyxVQUFVLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxXQUFXLFVBQVUsVUFBVSxNQUFNLE9BQU8sWUFBWSxXQUFXLE1BQU0sT0FBTyxhQUFhLE1BQU0sT0FBTyxhQUFhLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsVUFBVSxXQUFXLFVBQVUsV0FBVyxXQUFXLE1BQU0sT0FBTyxXQUFXLFdBQVcsTUFBTSxNQUFNLFlBQVksV0FBVyxPQUFPLFFBQVEsVUFBVSxXQUFXLE9BQU8sT0FBTyxZQUFZLFdBQVcsV0FBVyxXQUFXLFdBQVcsTUFBTSxPQUFPLFlBQVksVUFBVSxVQUFVLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sTUFBTSxXQUFXLFdBQVcsTUFBTSxPQUFPLGFBQWEsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxVQUFVLFVBQVUsV0FBVyxVQUFVLE1BQU0sT0FBTyxZQUFZLFdBQVcsVUFBVSxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sYUFBYSxXQUFXLE1BQU0sT0FBTyxZQUFZLFdBQVcsV0FBVyxXQUFXLE1BQU0sTUFBTSxVQUFVLE1BQU0sT0FBTyxXQUFXLE1BQU0sT0FBTyxZQUFZLFdBQVcsTUFBTSxPQUFPLFlBQVksV0FBVyxXQUFXLFdBQVcsVUFBVSxVQUFVLFdBQVcsV0FBVyxXQUFXLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLE1BQU0sTUFBTSxVQUFVLFdBQVcsVUFBVSxVQUFVLE1BQU0sTUFBTSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxXQUFXLE1BQU0sUUFBUSxZQUFZLFVBQVUsVUFBVSxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sT0FBTyxhQUFhLE1BQU0sUUFBUSxhQUFhLFdBQVcsV0FBVyxXQUFXLFdBQVcsTUFBTSxRQUFRLGFBQWEsVUFBVSxVQUFVLFdBQVcsTUFBTSxPQUFPLFVBQVUsV0FBVyxNQUFNLE9BQU8sWUFBWSxNQUFNLE9BQU8sYUFBYSxXQUFXLFdBQVcsTUFBTSxVQUFVLGFBQWEsTUFBTSxNQUFNLE9BQU8sWUFBWSxNQUFNLEtBQUssT0FBTyxZQUFZLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsV0FBVyxVQUFVLE1BQU0sT0FBTyxhQUFhLFdBQVcsVUFBVSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUsTUFBTSxNQUFNLFVBQVUsVUFBVSxNQUFNLE1BQU0sVUFBVSxVQUFVLE1BQU0sTUFBTSxVQUFVLFVBQVUscURBQXFELGdDQUFnQyw0QkFBNEIseUJBQXlCLCtCQUErQix5QkFBeUIsK0JBQStCLHdCQUF3Qiw4QkFBOEIsd0JBQXdCLDhCQUE4Qix1QkFBdUIsNkJBQTZCLHVCQUF1Qiw2QkFBNkIseUJBQXlCLCtCQUErQix5QkFBeUIsK0JBQStCLHVCQUF1Qiw2QkFBNkIsd0JBQXdCLDhCQUE4Qix1QkFBdUIsNkJBQTZCLHVCQUF1Qiw4Q0FBOEMsd0JBQXdCLDhCQUE4Qiw4Q0FBOEMsbUJBQW1CLHVCQUF1Qix5QkFBeUIsbUNBQW1DLHlCQUF5QiwrQkFBK0IsdURBQXVELHNCQUFzQiwyQkFBMkIsOEJBQThCLDBDQUEwQyxnQ0FBZ0MsZ0JBQWdCLHFDQUFxQyx1QkFBdUIsa0JBQWtCLDZDQUE2QyxLQUFLLEdBQUcsVUFBVSxjQUFjLEdBQUcsT0FBTyxhQUFhLG9CQUFvQix3QkFBd0Isc0JBQXNCLDJCQUEyQixpRkFBaUYsNEJBQTRCLHFCQUFxQix3Q0FBd0MsZ0JBQWdCLHFGQUFxRixLQUFLLEdBQUcsT0FBTyxXQUFXLFFBQVEsdUJBQXVCLHFCQUFxQixHQUFHLE9BQU8sV0FBVyxRQUFRLHlEQUF5RCxHQUFHLE9BQU8sV0FBVyxVQUFVLHlCQUF5Qix1QkFBdUIsc0JBQXNCLGdCQUFnQix1QkFBdUIsaUNBQWlDLG9CQUFvQixpQkFBaUIsZ0JBQWdCLDJCQUEyQix5QkFBeUIsNEJBQTRCLGdCQUFnQixvQkFBb0IsaUJBQWlCLGtCQUFrQiwwQkFBMEIsdUNBQXVDLCtCQUErQixpQkFBaUIscURBQXFELEtBQUssR0FBRyxPQUFPLFdBQVcsZ0JBQWdCLGlCQUFpQixhQUFhLGdCQUFnQixpQkFBaUIsZ0NBQWdDLHdCQUF3Qix1QkFBdUIsWUFBWSxrQkFBa0Isd0JBQXdCLHNDQUFzQyxtQkFBbUIsNkJBQTZCLFNBQVMsYUFBYSxXQUFXLHFCQUFxQixzQkFBc0IsdUJBQXVCLFNBQVMsT0FBTyxLQUFLLEdBQUcsT0FBTyxXQUFXLGlCQUFpQixpQkFBaUIsYUFBYSxnQkFBZ0IsaUJBQWlCLGdDQUFnQyx3QkFBd0IsdUJBQXVCLDBCQUEwQixZQUFZLGtCQUFrQixPQUFPLEtBQUssU0FBUyxXQUFXLHNCQUFzQixtQ0FBbUMseUJBQXlCLFdBQVcsV0FBVyxzQkFBc0Isb0JBQW9CLHFCQUFxQix3QkFBd0IsMkJBQTJCLGFBQWEsV0FBVyxXQUFXLHNCQUFzQixTQUFTLG1CQUFtQixpQ0FBaUMsU0FBUyxPQUFPLEtBQUssU0FBUyxXQUFXLHVCQUF1Qix3QkFBd0IsV0FBVyxXQUFXLGNBQWMsc0JBQXNCLDJCQUEyQixPQUFPLFdBQVcsV0FBVyxZQUFZLDJCQUEyQixnQkFBZ0Isa0JBQWtCLE9BQU8sT0FBTyxLQUFLLE9BQU8sV0FBVyxXQUFXLHVCQUF1QixTQUFTLFdBQVcsbUJBQW1CLHlCQUF5QixtQkFBbUIsdUJBQXVCLHFEQUFxRCxLQUFLLHFCQUFxQixTQUFTLFdBQVcsbUJBQW1CLGlDQUFpQyxnQkFBZ0IsT0FBTyxLQUFLLHNCQUFzQixTQUFTLFdBQVcsbUJBQW1CLGlDQUFpQyxpQkFBaUIsT0FBTyxLQUFLLGtCQUFrQixTQUFTLFdBQVcsbUJBQW1CLG9DQUFvQyxnQkFBZ0IsT0FBTyxLQUFLLG1CQUFtQixTQUFTLFdBQVcsbUJBQW1CLG9DQUFvQyxpQkFBaUIsT0FBTyxLQUFLLFdBQVcsV0FBVyxpQkFBaUIscUJBQXFCLDRCQUE0QixLQUFLLFNBQVMsV0FBVyxrQkFBa0IsU0FBUyxXQUFXLGtCQUFrQix5QkFBeUIsT0FBTyxTQUFTLFdBQVcsbUJBQW1CLG9CQUFvQiwwQkFBMEIscUJBQXFCLHVCQUF1QixTQUFTLE9BQU8sS0FBSyxHQUFHLHFCQUFxQixXQUFXLFVBQVUsdUJBQXVCLGdCQUFnQixTQUFTLFdBQVcsZ0JBQWdCLGdEQUFnRCxLQUFLLE9BQU8sV0FBVyxlQUFlLHlCQUF5QixLQUFLLG9CQUFvQix5QkFBeUIsU0FBUyxXQUFXLGVBQWUsb0RBQW9ELGdCQUFnQixrQkFBa0IsT0FBTyxLQUFLLGdCQUFnQix5QkFBeUIsU0FBUyxXQUFXLGVBQWUsbURBQW1ELGVBQWUsaUJBQWlCLE9BQU8sS0FBSyxHQUFHLHNCQUFzQixXQUFXLFlBQVksdUJBQXVCLGNBQWMsYUFBYSw4QkFBOEIsaUJBQWlCLGdCQUFnQixrQkFBa0Isa0JBQWtCLHlCQUF5Qix5QkFBeUIsYUFBYSxvQkFBb0IseUJBQXlCLE9BQU8sS0FBSyxnQkFBZ0IsbUJBQW1CLHlCQUF5Qix5QkFBeUIsYUFBYSxtQkFBbUIseUJBQXlCLE9BQU8sS0FBSyxhQUFhLHNCQUFzQixLQUFLLEdBQUcsU0FBUyxXQUFXLGtCQUFrQixXQUFXLFlBQVksdUJBQXVCLFlBQVksV0FBVyxnQkFBZ0IsT0FBTyxXQUFXLG9CQUFvQix5QkFBeUIsdUJBQXVCLDJCQUEyQixrQkFBa0IsbUJBQW1CLEtBQUssR0FBRyxPQUFPLFdBQVcsWUFBWSxXQUFXLFdBQVcsNEJBQTRCLHVCQUF1QixxQkFBcUIseUJBQXlCLFdBQVcsWUFBWSxnQkFBZ0IsaUJBQWlCLEdBQUcsU0FBUyxXQUFXLGlCQUFpQixXQUFXLFdBQVcsaUJBQWlCLHlCQUF5QixpQkFBaUIsYUFBYSxtQkFBbUIsaUJBQWlCLCtCQUErQixPQUFPLEtBQUssT0FBTyxXQUFXLGdCQUFnQix5QkFBeUIsMENBQTBDLHlDQUF5QyxpQkFBaUIsS0FBSyxPQUFPLFdBQVcsd0JBQXdCLFdBQVcsb0JBQW9CLHlCQUF5Qiw4QkFBOEIsbUJBQW1CLEtBQUssT0FBTyxXQUFXLHFCQUFxQiwyQ0FBMkMsS0FBSyxPQUFPLFdBQVcsb0JBQW9CLDZDQUE2QyxZQUFZLHFCQUFxQixLQUFLLE9BQU8sV0FBVyxrQkFBa0IsMkJBQTJCLHlCQUF5Qix3QkFBd0IsbUJBQW1CLGtCQUFrQixpQkFBaUIsa0JBQWtCLG1CQUFtQiwyQ0FBMkMsb0NBQW9DLEtBQUssR0FBRyxLQUFLLFdBQVcsU0FBUyxnQkFBZ0IsT0FBTyxXQUFXLGNBQWMseUJBQXlCLHVCQUF1QiwwQ0FBMEMscUJBQXFCLG1CQUFtQiwyQkFBMkIsa0JBQWtCLGdDQUFnQyxxQkFBcUIsdUJBQXVCLHNCQUFzQixxQkFBcUIsMEJBQTBCLDJCQUEyQix1RkFBdUYsdUJBQXVCLDRCQUE0Qiw4QkFBOEIsMEJBQTBCLGtCQUFrQixPQUFPLG1CQUFtQix5QkFBeUIsMkJBQTJCLHdCQUF3QixlQUFlLGdCQUFnQixPQUFPLEtBQUssR0FBRyxPQUFPLFdBQVcsT0FBTyxzQkFBc0Isa0JBQWtCLGtDQUFrQyxrQkFBa0IsaUJBQWlCLDZCQUE2QixzQkFBc0IscUJBQXFCLHNCQUFzQixvQkFBb0IscUJBQXFCLHFCQUFxQixrQkFBa0IsMkJBQTJCLG1CQUFtQixLQUFLLHlCQUF5QixxQ0FBcUMsS0FBSyxtQkFBbUIsbUNBQW1DLFFBQVEsaUJBQWlCLGdCQUFnQixpQkFBaUIsb0JBQW9CLG1CQUFtQixpREFBaUQsS0FBSyxjQUFjLG1CQUFtQixtQkFBbUIscUJBQXFCLEtBQUssR0FBRyxtREFBbUQsZUFBZSxtQ0FBbUMseUJBQXlCLGtCQUFrQixvQkFBb0IsMkJBQTJCLG9CQUFvQixxQkFBcUIsbUJBQW1CLDZCQUE2Qix3Q0FBd0MsZ0RBQWdELDJCQUEyQixPQUFPLEtBQUssNEJBQTRCLDBCQUEwQixxQkFBcUIsNEJBQTRCLG9CQUFvQixzQkFBc0IseUJBQXlCLFdBQVcsMkJBQTJCLDBCQUEwQixrQ0FBa0MsaUNBQWlDLG9CQUFvQixrQkFBa0IsMEJBQTBCLDBCQUEwQixrQ0FBa0Msa0NBQWtDLDBDQUEwQyxLQUFLLEtBQUssT0FBTyxXQUFXLFdBQVcsdUJBQXVCLDBCQUEwQixnQ0FBZ0MsZUFBZSw2QkFBNkIsdUJBQXVCLG9CQUFvQixxQkFBcUIsYUFBYSx5QkFBeUIsYUFBYSxjQUFjLDJCQUEyQixpQkFBaUIsa0JBQWtCLEtBQUssR0FBRyxPQUFPLFdBQVcsY0FBYyxXQUFXLGtCQUFrQixXQUFXLGNBQWMsdUJBQXVCLHVEQUF1RCxxQkFBcUIsaUJBQWlCLGlCQUFpQix5QkFBeUIsbUJBQW1CLEdBQUcsT0FBTyxXQUFXLFVBQVUsaUJBQWlCLEdBQUcsT0FBTyxXQUFXLFNBQVMsOEJBQThCLG9CQUFvQixpQkFBaUIsU0FBUyxXQUFXLFNBQVMsMEJBQTBCLDBCQUEwQix1Q0FBdUMseUNBQXlDLEtBQUssT0FBTyxXQUFXLE9BQU8sb0JBQW9CLHVCQUF1QixXQUFXLFdBQVcsT0FBTyxxQkFBcUIsMEJBQTBCLE9BQU8sS0FBSyxHQUFHLE9BQU8sV0FBVyxjQUFjLE9BQU8sV0FBVyxVQUFVLG1CQUFtQixLQUFLLEdBQUcsT0FBTyxXQUFXLGFBQWEsV0FBVyxZQUFZLGlCQUFpQixvQkFBb0IscUJBQXFCLHdCQUF3QixrQkFBa0IsR0FBRyxPQUFPLFdBQVcsWUFBWSx1QkFBdUIsa0NBQWtDLFNBQVMsV0FBVyxZQUFZLHdCQUF3QixtQkFBbUIscUJBQXFCLHdCQUF3Qiw2QkFBNkIsc0NBQXNDLEtBQUssR0FBRyxPQUFPLFdBQVcsT0FBTyxxQkFBcUIsY0FBYyxlQUFlLHNCQUFzQixHQUFHLEtBQUssV0FBVyxZQUFZLGdCQUFnQix3QkFBd0Isd0JBQXdCLGNBQWMsMkJBQTJCLHFCQUFxQixxQkFBcUIsbUJBQW1CLHdCQUF3QixvQkFBb0Isd0JBQXdCLHNCQUFzQixnQkFBZ0IsNkJBQTZCLGdDQUFnQyxLQUFLLFNBQVMsV0FBVyxPQUFPLG9CQUFvQixXQUFXLFdBQVcsV0FBVyxpQkFBaUIsdUJBQXVCLFNBQVMsT0FBTyxLQUFLLFNBQVMsV0FBVyxXQUFXLDRCQUE0QixLQUFLLEdBQUcsT0FBTyxXQUFXLFVBQVUscUNBQXFDLFNBQVMsV0FBVyxlQUFlLDJCQUEyQixLQUFLLFNBQVMsV0FBVyxlQUFlLHlCQUF5Qix1QkFBdUIsU0FBUyxXQUFXLGtCQUFrQixzQkFBc0IsT0FBTyxLQUFLLFNBQVMsV0FBVyxjQUFjLHFCQUFxQiw0QkFBNEIsb0NBQW9DLG1CQUFtQix3QkFBd0Isc0JBQXNCLHdCQUF3QixpQkFBaUIseUJBQXlCLHlCQUF5QixvQkFBb0IsNkJBQTZCLHFCQUFxQixPQUFPLDJCQUEyQix1Q0FBdUMsT0FBTyxLQUFLLEdBQUcsT0FBTyxXQUFXLGtCQUFrQiwwQkFBMEIsb0NBQW9DLGFBQWEsMkJBQTJCLGlCQUFpQix1QkFBdUIsR0FBRyxPQUFPLFdBQVcsUUFBUSx1QkFBdUIsWUFBWSxXQUFXLGlCQUFpQixnQkFBZ0IsaUJBQWlCLGtCQUFrQiwyQkFBMkIsR0FBRyxLQUFLLFdBQVcsWUFBWSx3QkFBd0IsaUJBQWlCLHNCQUFzQixvQkFBb0IsZUFBZSxrQkFBa0Isd0JBQXdCLHVCQUF1QixrQkFBa0IsS0FBSyxlQUFlLG1CQUFtQix1QkFBdUIsS0FBSyxHQUFHLEtBQUssV0FBVyxnQkFBZ0Isa0JBQWtCLGVBQWUsd0JBQXdCLHdCQUF3Qiw4QkFBOEIsZUFBZSxzQkFBc0IsbUJBQW1CLGtDQUFrQyx1QkFBdUIsS0FBSyxpQkFBaUIsaUJBQWlCLHVCQUF1Qix5QkFBeUIsbUJBQW1CLEtBQUssR0FBRyxTQUFTLFdBQVcscUJBQXFCLHNCQUFzQixHQUFHLEtBQUssV0FBVyxjQUFjLHFCQUFxQixpQkFBaUIsNEJBQTRCLDZCQUE2QiwrR0FBK0csR0FBRyxPQUFPLFdBQVcsV0FBVywyQkFBMkIsd0JBQXdCLHNCQUFzQix3QkFBd0IsdUJBQXVCLHdCQUF3Qix5QkFBeUIsa0JBQWtCLGtCQUFrQiwwQkFBMEIsK0JBQStCLDBCQUEwQixvQkFBb0IsT0FBTyxnQ0FBZ0MscUJBQXFCLGFBQWEseUJBQXlCLDRCQUE0Qiw2QkFBNkIsU0FBUyxpQkFBaUIsc0NBQXNDLFNBQVMsT0FBTyxLQUFLLHNCQUFzQixnQ0FBZ0Msd0JBQXdCLGdCQUFnQixzQkFBc0Isd0JBQXdCLDJCQUEyQix5QkFBeUIsMEJBQTBCLG1CQUFtQixPQUFPLG9CQUFvQiw2Q0FBNkMsbUJBQW1CLDhCQUE4QixTQUFTLG9DQUFvQyw4QkFBOEIseUJBQXlCLFNBQVMsc0JBQXNCLCtCQUErQix1QkFBdUIsU0FBUyxPQUFPLEtBQUssR0FBRyxPQUFPLFdBQVcsYUFBYSwyQ0FBMkMsdUJBQXVCLFlBQVksMEJBQTBCLGdCQUFnQixnQkFBZ0IsR0FBRyxPQUFPLFdBQVcsVUFBVSxrQkFBa0IsOEJBQThCLFNBQVMsV0FBVyxTQUFTLHVCQUF1QixLQUFLLEdBQUcsS0FBSyxXQUFXLFNBQVMsMEJBQTBCLHVCQUF1QixxQkFBcUIsb0JBQW9CLHdCQUF3Qix1QkFBdUIsb0JBQW9CLG1CQUFtQixxQkFBcUIsdUJBQXVCLDBCQUEwQix3QkFBd0IsMEJBQTBCLCtFQUErRSx1R0FBdUcsK0NBQStDLGtCQUFrQiw2QkFBNkIsWUFBWSxzQkFBc0IsZ0NBQWdDLHlCQUF5QixnQ0FBZ0MsNEJBQTRCLEtBQUssaUJBQWlCLG9CQUFvQixLQUFLLEdBQUcsc0JBQXNCLFdBQVcsYUFBYSxtQkFBbUIsdUJBQXVCLHFCQUFxQix5QkFBeUIsMkJBQTJCLGFBQWEsaUJBQWlCLGdCQUFnQixzQkFBc0IscUJBQXFCLGlCQUFpQix1REFBdUQsdUJBQXVCLHNDQUFzQyxpQ0FBaUMscUJBQXFCLHVCQUF1QixnQ0FBZ0MseUJBQXlCLDREQUE0RCxvREFBb0QsaUJBQWlCLHdDQUF3QywyREFBMkQsT0FBTyxLQUFLLEdBQUcsT0FBTyxXQUFXLGNBQWMsdUJBQXVCLDBCQUEwQixxQkFBcUIsMEJBQTBCLHVCQUF1QixvQkFBb0IsMkJBQTJCLHNCQUFzQixrREFBa0QsbUJBQW1CLDhCQUE4QiwwQkFBMEIsc0JBQXNCLGtCQUFrQixpQ0FBaUMsc0NBQXNDLHFCQUFxQixLQUFLLEdBQUcsS0FBSyxXQUFXLGNBQWMsa0JBQWtCLHdCQUF3QixvQkFBb0IsU0FBUyxXQUFXLGFBQWEscUJBQXFCLGNBQWMsOEJBQThCLDJCQUEyQixPQUFPLEtBQUssR0FBRyxLQUFLLFdBQVcsYUFBYSxtQkFBbUIsMkJBQTJCLHNCQUFzQix3QkFBd0IscUJBQXFCLHFCQUFxQixLQUFLLGVBQWUsU0FBUyxXQUFXLHFCQUFxQiw4QkFBOEIsT0FBTyxLQUFLLFlBQVkscUJBQXFCLHNCQUFzQixLQUFLLEdBQUcsa0JBQWtCLFdBQVcsU0FBUyxrQkFBa0IsdUJBQXVCLHNCQUFzQix1QkFBdUIsZ0JBQWdCLGlCQUFpQix1QkFBdUIsMkJBQTJCLHlDQUF5QyxlQUFlLHNDQUFzQyw4QkFBOEIscUNBQXFDLDZCQUE2Qiw2Q0FBNkMsc0JBQXNCLGtCQUFrQixnQkFBZ0IscUJBQXFCLGlCQUFpQixLQUFLLEdBQUcsbUJBQW1CLGlCQUFpQixhQUFhLHFCQUFxQiwwQkFBMEIscUJBQXFCLGtCQUFrQixLQUFLLGNBQWMsdUJBQXVCLGtCQUFrQiw2QkFBNkIsbUJBQW1CLG9DQUFvQywwQkFBMEIseUJBQXlCLEtBQUssR0FBRyxPQUFPLFdBQVcsV0FBVyxXQUFXLFFBQVEsb0JBQW9CLG9CQUFvQixrQkFBa0IscUJBQXFCLDhCQUE4QixxQkFBcUIsMkJBQTJCLGlGQUFpRix1QkFBdUIscUNBQXFDLDJCQUEyQixpQ0FBaUMsK0NBQStDLEdBQUcsT0FBTyxXQUFXLFFBQVEsNENBQTRDLEdBQUcsT0FBTyxXQUFXLGtCQUFrQixXQUFXLGVBQWUscUJBQXFCLGlDQUFpQyw0Q0FBNEMsNkNBQTZDLCtCQUErQixTQUFTLFdBQVcsT0FBTyx5QkFBeUIsa0JBQWtCLGlCQUFpQiwwQkFBMEIsaUJBQWlCLG1CQUFtQix3Q0FBd0MsT0FBTyxLQUFLLEdBQUcsT0FBTyxXQUFXLGVBQWUseUJBQXlCLEdBQUcsT0FBTyxXQUFXLGVBQWUsaUNBQWlDLG1DQUFtQyx3QkFBd0IsR0FBRyxPQUFPLFdBQVcsbUJBQW1CLFdBQVcsb0JBQW9CLFdBQVcsbUJBQW1CLFdBQVcsZ0JBQWdCLHVCQUF1QixHQUFHLGlFQUFpRSxPQUFPLFdBQVcsVUFBVSxvQkFBb0IsS0FBSyxHQUFHLE9BQU8sV0FBVyxPQUFPLGdCQUFnQixpQkFBaUIsNEJBQTRCLHVCQUF1QiwyQkFBMkIsc0JBQXNCLHFCQUFxQix1QkFBdUIsMEJBQTBCLG1CQUFtQixTQUFTLFdBQVcsV0FBVyxvREFBb0QseUJBQXlCLG1CQUFtQixvQkFBb0Isb0JBQW9CLGdCQUFnQixnQkFBZ0IsZUFBZSxPQUFPLGNBQWMsOEJBQThCLGVBQWUsT0FBTyxlQUFlLDhCQUE4QixlQUFlLE9BQU8scUJBQXFCLDhCQUE4QixlQUFlLE9BQU8scUJBQXFCLDhCQUE4QixlQUFlLE9BQU8sbUJBQW1CLDhCQUE4QixlQUFlLE9BQU8scUJBQXFCLDhCQUE4QixlQUFlLE9BQU8sbUJBQW1CLDhCQUE4QixlQUFlLE9BQU8sZ0JBQWdCLDhCQUE4QixlQUFlLE9BQU8sZUFBZSw4QkFBOEIsZUFBZSxPQUFPLGlCQUFpQiwrQkFBK0IsZUFBZSxPQUFPLGVBQWUsK0JBQStCLGVBQWUsT0FBTyxvQkFBb0IsK0JBQStCLGVBQWUsT0FBTyxzQkFBc0IsK0JBQStCLGVBQWUsT0FBTyxxQkFBcUIsZ0JBQWdCLDZCQUE2QixPQUFPLG1CQUFtQiw4QkFBOEIsNkJBQTZCLE9BQU8sc0JBQXNCLDhCQUE4Qiw2QkFBNkIsT0FBTyxzQkFBc0IsOEJBQThCLDZCQUE2QixPQUFPLGtCQUFrQiw4QkFBOEIsNkJBQTZCLE9BQU8sb0JBQW9CLDhCQUE4Qiw2QkFBNkIsT0FBTyxpQkFBaUIsOEJBQThCLDZCQUE2QixPQUFPLG9CQUFvQiw4QkFBOEIsNkJBQTZCLE9BQU8scUJBQXFCLDhCQUE4Qiw2QkFBNkIsT0FBTyxjQUFjLDhCQUE4Qiw2QkFBNkIsT0FBTyxlQUFlLCtCQUErQiw2QkFBNkIsT0FBTyxnQkFBZ0IsK0JBQStCLDZCQUE2QixPQUFPLGtCQUFrQiwrQkFBK0IsNkJBQTZCLE9BQU8sYUFBYSwrQkFBK0IsNkJBQTZCLE9BQU8sb0JBQW9CLGdCQUFnQiw2QkFBNkIsT0FBTyx1QkFBdUIsOEJBQThCLDZCQUE2QixPQUFPLDJCQUEyQiw4QkFBOEIsNkJBQTZCLE9BQU8seUJBQXlCLDhCQUE4Qiw2QkFBNkIsT0FBTyx3QkFBd0IsOEJBQThCLDZCQUE2QixPQUFPLHFCQUFxQiw4QkFBOEIsNkJBQTZCLE9BQU8sb0JBQW9CLDhCQUE4Qiw2QkFBNkIsT0FBTyxzQkFBc0IsOEJBQThCLDZCQUE2QixPQUFPLHVCQUF1Qiw4QkFBOEIsNkJBQTZCLE9BQU8scUJBQXFCLDhCQUE4Qiw2QkFBNkIsT0FBTyxvQkFBb0IsK0JBQStCLDZCQUE2QixPQUFPLG1CQUFtQiwrQkFBK0IsNkJBQTZCLE9BQU8sZUFBZSwrQkFBK0IsNkJBQTZCLE9BQU8sc0JBQXNCLGdCQUFnQiw2QkFBNkIsT0FBTyxvQkFBb0IsOEJBQThCLDZCQUE2QixPQUFPLHNCQUFzQiw4QkFBOEIsNkJBQTZCLE9BQU8sdUJBQXVCLDhCQUE4Qiw2QkFBNkIsT0FBTyxLQUFLLEdBQUcscUJBQXFCO0FBQ3p4eUQ7QUFDQSxpRUFBZSx1QkFBdUIsRUFBQzs7Ozs7Ozs7Ozs7QUNWMUI7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxREFBcUQ7QUFDckQ7O0FBRUE7QUFDQSxnREFBZ0Q7QUFDaEQ7O0FBRUE7QUFDQSxxRkFBcUY7QUFDckY7O0FBRUE7O0FBRUE7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsS0FBSzs7O0FBR0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxzQkFBc0IsaUJBQWlCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHFCQUFxQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHNGQUFzRixxQkFBcUI7QUFDM0c7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixpREFBaUQscUJBQXFCO0FBQ3RFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysc0RBQXNELHFCQUFxQjtBQUMzRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7QUNyR2E7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG9EQUFvRDs7QUFFcEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7O0FDNUJhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RCxjQUFjO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQkEsTUFBK0Y7QUFDL0YsTUFBcUY7QUFDckYsTUFBNEY7QUFDNUYsTUFBK0c7QUFDL0csTUFBd0c7QUFDeEcsTUFBd0c7QUFDeEcsTUFBNEk7QUFDNUk7QUFDQTs7QUFFQTs7QUFFQSw0QkFBNEIscUdBQW1CO0FBQy9DLHdCQUF3QixrSEFBYTs7QUFFckMsdUJBQXVCLHVHQUFhO0FBQ3BDO0FBQ0EsaUJBQWlCLCtGQUFNO0FBQ3ZCLDZCQUE2QixzR0FBa0I7O0FBRS9DLGFBQWEsMEdBQUcsQ0FBQyw0SEFBTzs7OztBQUlzRjtBQUM5RyxPQUFPLGlFQUFlLDRIQUFPLElBQUksbUlBQWMsR0FBRyxtSUFBYyxZQUFZLEVBQUM7Ozs7Ozs7Ozs7O0FDMUJoRTs7QUFFYjs7QUFFQTtBQUNBOztBQUVBLGtCQUFrQix3QkFBd0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsaUJBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHFCQUFxQiw2QkFBNkI7QUFDbEQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FDdkdhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNEQUFzRDs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7Ozs7Ozs7OztBQ3RDYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7OztBQ1ZhOztBQUViO0FBQ0E7QUFDQSxjQUFjLEtBQXdDLEdBQUcsc0JBQWlCLEdBQUcsQ0FBSTs7QUFFakY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7QUNYYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrREFBa0Q7QUFDbEQ7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7O0FBRUE7O0FBRUE7QUFDQSxpRkFBaUY7QUFDakY7O0FBRUE7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7O0FBRUE7QUFDQSx5REFBeUQ7QUFDekQsSUFBSTs7QUFFSjs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7O0FDckVhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQyxjQUFjLElBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtCQUFrQjtBQUNsQyxjQUFjLElBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTTtBQUN2QyxrQ0FBa0MsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLGdCQUFnQixNQUFNO0FBQ3RCLGdCQUFnQixnREFBZ0Q7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDZCQUE2QixFQUFFLHlCQUF5QixFQUFFLGVBQWUsS0FBSyxVQUFVO0FBQzdHO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsd0JBQXdCLEtBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxnQ0FBZ0MsZUFBZTtBQUMvQztBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE1BQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE1BQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE1BQU07QUFDdEIsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCLGdCQUFnQiwrQkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxFQUFFLEVBQUM7QUFDMkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbFlmO0FBQ0o7QUFDbUI7QUFDTTtBQUNiO0FBQ3RDO0FBQ0EsV0FBVywyQ0FBQyxvQkFBb0IsMkNBQUM7QUFDakM7QUFDQTtBQUNBLFdBQVcsMkNBQUMsaUJBQWlCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQyxpQ0FBaUMsNkNBQUksV0FBVyxTQUFTO0FBQzVHO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQyxzQkFBc0Isb0JBQW9CO0FBQzFDLEtBQUs7QUFDTDtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwREFBZ0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QyxpQ0FBaUMsMkNBQUMsb0JBQW9CLDJDQUFDLFVBQVUsOENBQVMsQ0FBQyx3Q0FBd0MsMkNBQUMsa0hBQWtILDJDQUFDLHdHQUF3RywyQ0FBQyxVQUFVLDhDQUFTLENBQUMsaUNBQWlDLDJDQUFDLFdBQVcsOENBQVMsQ0FBQyx1Q0FBdUMsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ3hkO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hDOEI7QUFDaUM7QUFDekI7QUFDWjtBQUNXO0FBQ0g7QUFDSTtBQUN0QywyQkFBMkIsaURBQVE7QUFDbkM7QUFDQTtBQUNBLHlCQUF5Qiw2Q0FBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNCQUFzQixrREFBRSw2QkFBNkI7QUFDMUU7QUFDQSxXQUFXLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBSztBQUNyQjtBQUNBLFFBQVEsMERBQWtCO0FBQzFCO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBSztBQUNyQjtBQUNBO0FBQ0EsUUFBUSx3REFBZ0I7QUFDeEI7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkJBQTJCLHdCQUF3QixvQ0FBb0M7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQywwREFBMEQsMkNBQUMsVUFBVSw4Q0FBUyxDQUFDLGNBQWMsMkNBQUMsd0JBQXdCLDZDQUFJO0FBQ2xLO0FBQ0EsU0FBUyxHQUFHLDJDQUFDO0FBQ2I7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJDQUFDO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkJBQTJCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtREFBUztBQUN2QztBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoTG9DO0FBQ0U7QUFDRDtBQUN0QixxQkFBcUIsNkNBQU87QUFDM0M7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBUyxDQUFDLFVBQVUsS0FBSztBQUNqRCxtQkFBbUIsaURBQUMsV0FBVyxNQUFNO0FBQ3JDO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1Q4QjtBQUNKO0FBQ1c7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0Isd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJDQUFDO0FBQzdCLHNCQUFzQiwyQ0FBQztBQUN2QjtBQUNBLGtCQUFrQiwyQ0FBQywyQ0FBMkMsMkNBQUMsdURBQXVELDJDQUFDLDBDQUEwQywyQ0FBQztBQUNsSztBQUNBLHVCQUF1Qiw2Q0FBSSxtQkFBbUIsMkNBQUM7QUFDL0M7QUFDQSx1QkFBdUIsNkNBQUksc0JBQXNCLDJDQUFDLG9DQUFvQywyQ0FBQyxvQkFBb0IsMkNBQUMsdUJBQXVCLGlEQUFDLGlDQUFpQywyQ0FBQztBQUN0SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsa0NBQWtDLGlEQUFDLHVDQUF1QyxFQUFFLG9CQUFvQjtBQUNoRztBQUNBO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJDQUFDLGlCQUFpQiwyQ0FBQztBQUMxQztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLG1CQUFtQiwyQ0FBQztBQUNwQixTQUFTO0FBQ1Q7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzFGOEI7QUFDUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQUMsaUJBQWlCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUNuRDtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEM7QUFDQSxzQkFBc0IsMkNBQUMsdUJBQXVCLDJDQUFDLHVCQUF1QiwyQ0FBQyxVQUFVLDhDQUFTLENBQUMsa0lBQWtJLDJDQUFDLFVBQVUsOENBQVMsQ0FBQywwRUFBMEUsMkNBQUMsVUFBVSw4Q0FBUyxDQUFDO0FBQ2pWO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pCOEI7QUFDaUM7QUFDekI7QUFDQTtBQUN0QztBQUNBLE1BQU0sb0JBQW9CLGtEQUFFLHVDQUF1QztBQUNuRSxNQUFNLG1CQUFtQixrREFBRSxzQ0FBc0M7QUFDakUsTUFBTSxxQkFBcUIsa0RBQUUsd0NBQXdDO0FBQ3JFLE1BQU0sMkJBQTJCLGtEQUFFLG1EQUFtRDtBQUN0RixNQUFNLDRCQUE0QixrREFBRSxrREFBa0Q7QUFDdEYsTUFBTSxnQkFBZ0I7QUFDdEIsTUFBTSwwQkFBMEIsa0RBQUUsMkJBQTJCO0FBQzdELE1BQU0sNkJBQTZCLGtEQUFFLDhCQUE4QjtBQUNuRSxNQUFNLGdCQUFnQjtBQUN0QixNQUFNLDBCQUEwQixrREFBRSwyQkFBMkI7QUFDN0QsTUFBTSw2QkFBNkIsa0RBQUUsOEJBQThCO0FBQ25FLE1BQU0sZ0NBQWdDLGtEQUFFLGdDQUFnQztBQUN4RSxNQUFNLG9CQUFvQixrREFBRSxzQkFBc0I7QUFDbEQsTUFBTSxnQkFBZ0I7QUFDdEIsTUFBTSwwQkFBMEIsa0RBQUUsNEJBQTRCO0FBQzlELE1BQU0sZ0JBQWdCO0FBQ3RCLE1BQU0sOEJBQThCLGtEQUFFLCtCQUErQjtBQUNyRSxNQUFNLGtDQUFrQyxrREFBRSxrQ0FBa0M7QUFDNUUsTUFBTSxnQkFBZ0I7QUFDdEIsTUFBTSw2QkFBNkIsa0RBQUUsOEJBQThCO0FBQ25FLE1BQU0saUNBQWlDLGtEQUFFLGlDQUFpQztBQUMxRTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUNyQztBQUNBLFdBQVcsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0MsMkNBQUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixLQUFLO0FBQ3JCO0FBQ0EsUUFBUSwwREFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBSztBQUNyQixnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsS0FBSztBQUMvQjtBQUNBLGdDQUFnQyxnQkFBZ0I7QUFDaEQsc0NBQXNDLEVBQUU7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEVBQUU7QUFDL0Isc0NBQXNDLGdCQUFnQjtBQUN0RDtBQUNBO0FBQ0EsUUFBUSx3REFBZ0I7QUFDeEI7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakdrQztBQUNKO0FBQ1E7QUFDdkI7QUFDZjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQVE7QUFDcEMsa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQSxnQ0FBZ0MsRUFBRSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ2xELHFCQUFxQixFQUFFLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0Q3VDO0FBQ3dCO0FBQ3pCO0FBQ3ZCLHVCQUF1Qiw2Q0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOENBQVMsQ0FBQyxZQUFZLFVBQVU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUMvQztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxjQUFjLDJDQUFDLFdBQVcsOENBQVMsQ0FBQywwQkFBMEIsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBLFFBQVEsd0RBQWdCO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFrQjtBQUMxQjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsRWtDO0FBQ0o7QUFDSjtBQUNZO0FBQ3RDO0FBQ0EsV0FBVywyQ0FBQyxXQUFXLDhDQUFTLENBQUMsa0JBQWtCLDZDQUFJO0FBQ3ZEO0FBQ2UsNEJBQTRCLGlEQUFRO0FBQ25EO0FBQ0EseUJBQXlCLDZDQUFJLFVBQVUsTUFBTTtBQUM3QyxzRUFBc0UsR0FBRztBQUN6RTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxNQUFNO0FBQzFDO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJrQztBQUNSO0FBQ21CO0FBQzlCLDZCQUE2QixpREFBUTtBQUNwRDtBQUNBLHlCQUF5Qiw2Q0FBSTtBQUM3QixrQ0FBa0MsdURBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JrQztBQUNSO0FBQ2lCO0FBQzVCLDRCQUE0QixpREFBUTtBQUNuRDtBQUNBLHlCQUF5Qiw2Q0FBSTtBQUM3QjtBQUNBLCtDQUErQyxNQUFNO0FBQ3JELGlDQUFpQyxzREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkJrQztBQUNKO0FBQ1c7QUFDSDtBQUN2QiwyQkFBMkIsaURBQVE7QUFDbEQ7QUFDQSx1QkFBdUIscURBQWEsU0FBUywyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsY0FBYywwREFBa0I7QUFDaEM7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2RrQztBQUNKO0FBQ1c7QUFDSDtBQUN2QiwrQkFBK0IsaURBQVE7QUFDdEQ7QUFDQSwyQkFBMkIscURBQWEsU0FBUywyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDdkU7QUFDQSw2QkFBNkIsTUFBTTtBQUNuQztBQUNBLFNBQVM7QUFDVCxzQkFBc0IsTUFBTTtBQUM1QjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNkc0M7QUFDTztBQUNYO0FBQ0o7QUFDZiw2QkFBNkIsaURBQVE7QUFDcEQ7QUFDQSx1QkFBdUIsMkRBQWlCO0FBQ3hDLGdDQUFnQyxnQkFBZ0I7QUFDaEQsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBLHlCQUF5QiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSwrQkFBK0IsMkNBQUM7QUFDaEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsSUFBSSw0REFBa0IsRUFBRTtBQUNoRCxnQkFBZ0IscURBQVc7QUFDM0IsZ0NBQWdDLHFEQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbENrQztBQUNSO0FBQ0k7QUFDaUI7QUFDVDtBQUN2Qiw4QkFBOEIsaURBQVE7QUFDckQ7QUFDQSwwQkFBMEIsMkRBQWdCLFNBQVMsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGtCQUFrQiw2Q0FBSTtBQUN0QjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZmtDO0FBQ0o7QUFDSjtBQUNZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxrR0FBa0c7QUFDbE07QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLGtHQUFrRztBQUNsTTtBQUNBO0FBQ0E7QUFDQSxnR0FBZ0csa0dBQWtHO0FBQ2xNO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyx1SEFBdUg7QUFDdk47QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLHVIQUF1SDtBQUN2TjtBQUNBLDBHQUEwRyxrR0FBa0cseUdBQXlHO0FBQ3JUO0FBQ2UsK0JBQStCLGlEQUFRO0FBQ3REO0FBQ0EseUJBQXlCLDZDQUFJO0FBQzdCO0FBQ0EsdURBQXVELDJDQUFDLFdBQVcsOENBQVMsQ0FBQyxjQUFjLGdDQUFnQztBQUMzSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsbUJBQW1CLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN6QztBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQ0E7QUFDOEI7QUFDRTtBQUNNO0FBQ0E7QUFDdEM7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQSxnQkFBZ0IsaUNBQWlDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsR0FBRztBQUN2QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QixZQUFZLHNCQUFzQjtBQUNsQyxvQkFBb0IsNkJBQTZCLEVBQUUsS0FBSyxFQUFFLDBCQUEwQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUNBQWlDO0FBQzdDLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0E7QUFDQSw4QkFBOEIsSUFBSTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNO0FBQzFCO0FBQ0EsbUJBQW1CLEtBQUs7QUFDeEIsY0FBYyxnQkFBZ0IsR0FBRyxNQUFNLEdBQUcsS0FBSztBQUMvQztBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0RBQU87QUFDbEM7QUFDQSxTQUFTO0FBQ1QsOEJBQThCLG1EQUFVO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHNCQUFzQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDNUMscUNBQXFDLDJDQUFDO0FBQ3RDO0FBQ0EsdUNBQXVDO0FBQ3ZDLDhGQUE4RiwyQ0FBQztBQUMvRiwyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEM7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNDQUFzQztBQUN0RDtBQUNBO0FBQ0Esb0JBQW9CLGlDQUFpQztBQUNyRDtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsNEJBQTRCLGtEQUFrRDtBQUM5RSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBCQUEwQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQzlSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFNBQVM7QUFDeEMsYUFBYTtBQUNiO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQW1EO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLEtBQUs7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuUHRCO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNkJBQTZCLFdBQVc7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUk4QjtBQUNRO0FBQ0Q7QUFDckM7QUFDQSxnQ0FBZ0MsSUFBSTtBQUNwQyxlQUFlLEVBQUUsSUFBSSxJQUFJLElBQUksSUFBSTtBQUNqQztBQUNBLFdBQVc7QUFDSTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyQ0FBQyxtQ0FBbUMsV0FBVztBQUN4RTtBQUNBLG1CQUFtQiwyQ0FBQztBQUNwQjtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3QkFBd0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFDO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFDO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0Q4QjtBQUNRO0FBQ3ZCO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEMscUJBQXFCLDJDQUFDO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pCOEI7QUFDRTtBQUNNO0FBQ3ZCO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEMsMkJBQTJCLGdEQUFPO0FBQ2xDLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUNBQXFDLDJDQUFDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6Q3VDO0FBQ0Q7QUFDdkIsbUJBQW1CLDZDQUFPO0FBQ3pDO0FBQ0E7QUFDQSx3QkFBd0IsOENBQVMsQ0FBQztBQUNsQywwQkFBMEIsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDLFlBQVksS0FBSztBQUNqRTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsOENBQVMsQ0FBQyxZQUFZLEtBQUs7QUFDaEU7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1pBO0FBQzhCO0FBQ0o7QUFDWTtBQUMvQjtBQUNQLGVBQWUsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ3JDLG1CQUFtQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDLDZCQUE2Qiw2Q0FBSSxvREFBb0QsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCLFlBQVksNEJBQTRCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlFQUFlLEVBQUUsRUFBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RCbEI7QUFDQTtBQUM4QjtBQUNKO0FBQ1k7QUFDQztBQUN4QjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ3hDO0FBQ0Esc0JBQXNCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQyw2QkFBNkIsNkNBQUksNERBQTRELDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUMvSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDNUM7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhDQUFNO0FBQ2Q7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hDNEI7QUFDUztBQUNFO0FBQ0Y7QUFDUDtBQUNPO0FBQ1A7QUFDUTtBQUN0QztBQUNlLDhCQUE4Qiw4Q0FBSztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtREFBUyxLQUFLLG9EQUFVO0FBQy9DLHdCQUF3QixpREFBQyw0QkFBNEIsR0FBRyxPQUFPLGdCQUFnQixLQUFLLGlEQUFDLHlCQUF5QjtBQUM5Ryx1QkFBdUIsbURBQVMsS0FBSyxtREFBUztBQUM5QztBQUNBLDhCQUE4QixJQUFJLGlCQUFpQixJQUFJO0FBQ3ZELFNBQVM7QUFDVCx1QkFBdUIsbURBQVMsS0FBSyxvREFBVSx1RUFBdUUsaURBQUMsd0JBQXdCLEdBQUcsMENBQTBDLGdCQUFnQixLQUFLLGlEQUFDLDRCQUE0QjtBQUM5TztBQUNBLHVCQUF1QixtREFBUyxLQUFLLG9EQUFVLDhFQUE4RSxpREFBQyw0QkFBNEIsR0FBRyxrREFBa0QsZ0JBQWdCO0FBQy9OO0FBQ0EsMEJBQTBCLG1EQUFTLEtBQUssbURBQVM7QUFDakQ7QUFDQSxTQUFTO0FBQ1QsMEJBQTBCLG1EQUFTLEtBQUssbURBQVM7QUFDakQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHdCQUF3QixtREFBUyxLQUFLLG1EQUFTO0FBQy9DO0FBQ0EsU0FBUztBQUNULHVCQUF1QixtREFBUyxLQUFLLG1EQUFTO0FBQzlDO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsY0FBYyxpREFBQztBQUNmLFlBQVksMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ2xDLFlBQVksMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ2xDLFlBQVksMkNBQUMsV0FBVyw4Q0FBUyxDQUFDLHdCQUF3QiwrQ0FBTSwyREFBMkQsK0NBQU0sMkRBQTJELCtDQUFNO0FBQ2xNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNEJBQTRCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtQkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxvQkFBb0Isd0NBQXdDO0FBQzVELG9CQUFvQix1QkFBdUI7QUFDM0Msb0JBQW9CLHdCQUF3QixpQkFBaUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqTUE7QUFDOEI7QUFDUTtBQUNSO0FBQ1E7QUFDRDtBQUNBO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEMsc0JBQXNCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUM1QyxzQkFBc0IsMkNBQUMsMkNBQTJDLDJDQUFDLDJCQUEyQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUMsd0JBQXdCLCtDQUFNLDJEQUEyRCwrQ0FBTSxpRUFBaUUsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQzFTLHVDQUF1QywyQ0FBQyxxQkFBcUIsMkNBQUMsd0JBQXdCLDJDQUFDLHNCQUFzQiwyQ0FBQywwQkFBMEIsMkNBQUMsdUJBQXVCLGlEQUFDLGVBQWUsSUFBSSwyQ0FBQywwREFBMEQsMkNBQUMsNkNBQTZDLE9BQU8sSUFBSSxNQUFNLEtBQUssTUFBTSxvREFBb0QsMkNBQUMsMEJBQTBCLDJDQUFDLHVCQUF1QixpREFBQyxzQkFBc0IsSUFBSSwyQ0FBQyxpRUFBaUUsMkNBQUMsNkNBQTZDLGlEQUFDLDhCQUE4QjtBQUMxa0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQix5QkFBeUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQSx5QkFBeUIsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQy9DLDJCQUEyQiwyQ0FBQyxjQUFjLDhDQUFTLENBQUM7QUFDcEQ7QUFDQSw2QkFBNkIsOENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGNBQWM7QUFDbkQsd0JBQXdCLGtEQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELFVBQVU7QUFDM0QsZ0JBQWdCLGtEQUFVO0FBQzFCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLHVCQUF1QiwyQ0FBQztBQUN4QjtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVEsWUFBWSxLQUFLLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzS0E7QUFDOEI7QUFDUTtBQUNBO0FBQ3ZCO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUMsV0FBVyxxQ0FBcUM7QUFDeEYsNENBQTRDLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUNsRTtBQUNBO0FBQ0Esc0NBQXNDLDJDQUFDLFdBQVcsOENBQVMsQ0FBQyw0RkFBNEYsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQzlLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsZUFBZTtBQUNmO0FBQ0EsZ0JBQWdCLHVEQUF1RDtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkJBQTJCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1EQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxzQkFBc0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxxQkFBcUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkg4QjtBQUNRO0FBQ3ZCO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDLGFBQWEscUNBQXFDO0FBQzFGLG9DQUFvQywyQ0FBQztBQUNyQywyQ0FBMkM7QUFDM0M7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxPQUFPO0FBQzFDO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3QzhCO0FBQ1E7QUFDUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUM5QyxzQkFBc0IsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQzVDO0FBQ0EsMkJBQTJCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUNqRCwwQkFBMEIsMkNBQUMsV0FBVyw4Q0FBUyxDQUFDO0FBQ2hELGtCQUFrQiwyQ0FBQyxXQUFXLDhDQUFTLENBQUM7QUFDeEMsK0JBQStCLFlBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJDQUFDO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOENBQThDLDJDQUFDO0FBQy9DLDhDQUE4QywyQ0FBQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNEJBQTRCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0QkFBNEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLDRCQUE0QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQixZQUFZLDBDQUEwQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQixZQUFZLHFDQUFxQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsWUFBWSxvQ0FBb0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxLQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLElBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFDLFdBQVcsOENBQVMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQ0FBMEM7QUFDckUsMEJBQTBCLHlDQUF5QztBQUNuRSwwQkFBMEIsdUNBQXVDO0FBQ2pFLDJCQUEyQixzQ0FBc0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1QkFBdUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUFTO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BZQTtBQUM4QjtBQUM4QztBQUM1QztBQUNJO0FBQ0Y7QUFDSjtBQUNGO0FBQ1k7QUFDWjtBQUNVO0FBQ1c7QUFDVjtBQUNKO0FBQ0c7QUFDSztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBZ0Q7QUFDNUQsWUFBWSxrQ0FBa0M7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHFDQUFxQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxtQkFBbUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMENBQTBDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGtCQUFrQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtDQUErQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsWUFBWSxhQUFhO0FBQ3pCO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0NBQVMsQ0FBQztBQUM5QztBQUNBLFlBQVksbUJBQW1CO0FBQy9CLFlBQVkseUNBQXlDO0FBQ3JELFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtDQUErQztBQUMzRCxZQUFZLE1BQU07QUFDbEIsWUFBWSxPQUFPO0FBQ25CO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG1CQUFtQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw4QkFBOEI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdDQUFnQztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUNBQXlDO0FBQ3JELFlBQVksTUFBTTtBQUNsQixZQUFZLE9BQU87QUFDbkI7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQSxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCO0FBQ3RDLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEMsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBCQUEwQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9FQUFvRTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxpREFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUNBQXFDO0FBQ2pELFlBQVksbUJBQW1CO0FBQy9CLHFEQUFxRCwrQ0FBUyxDQUFDO0FBQy9EO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEMsVUFBVSxTQUFTO0FBQ25CO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNkJBQTZCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBVztBQUNuQjtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpRUFBaUUsaURBQU07QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVksS0FBSztBQUNqQixZQUFZLHdCQUF3QjtBQUNwQyxZQUFZLFdBQVc7QUFDdkI7QUFDQSw0QkFBNEIsWUFBWTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakIsWUFBWSx3QkFBd0I7QUFDcEMsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9KQUFvSjtBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGdCQUFnQixtQkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksaURBQVM7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRDQUFJO0FBQ1I7QUFDQSxLQUFLO0FBQ0wsSUFBSSw0Q0FBSTtBQUNSO0FBQ0EsS0FBSztBQUNMLElBQUksNENBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLDRDQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJLDRDQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1DQUFtQztBQUNuRDtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxJQUFJLGVBQWUsb0RBQVM7QUFDNUY7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsSUFBSSxlQUFlLG9EQUFTO0FBQzVGO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsSUFBSSxlQUFlLG9EQUFTO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxJQUFJLGVBQWUsb0RBQVM7QUFDNUY7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsTUFBTTtBQUN0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Iiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2luZGV4Lmxlc3MiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9pbmRleC5sZXNzPzJiODMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY2FudmFzL2RyYXcudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9ib3JkZXJfcGFsZXR0ZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2JvdHRvbWJhci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2J1dHRvbi50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2NhbGVuZGFyLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvY29sb3JfcGFsZXR0ZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2NvbnRleHRtZW51LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZGF0ZXBpY2tlci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Ryb3Bkb3duLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZHJvcGRvd25fYWxpZ24udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9ib3JkZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9jb2xvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Ryb3Bkb3duX2ZvbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9mb250c2l6ZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Ryb3Bkb3duX2Zvcm1hdC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Ryb3Bkb3duX2Zvcm11bGEudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9kcm9wZG93bl9saW5ldHlwZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2VkaXRvci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2VsZW1lbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9ldmVudC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L2Zvcm1fZmllbGQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9mb3JtX2lucHV0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvZm9ybV9zZWxlY3QudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9pY29uLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvbWVzc2FnZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L21vZGFsLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvbW9kYWxfdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3ByaW50LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvcmVzaXplci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Njcm9sbGJhci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3NlbGVjdG9yLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvc2hlZXQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC9zb3J0X2ZpbHRlci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3N1Z2dlc3QudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90YWJsZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvYWxpZ24udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2F1dG9maWx0ZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2JvbGQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2JvcmRlci50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvY2xlYXJmb3JtYXQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2Ryb3Bkb3duX2l0ZW0udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2ZpbGxfY29sb3IudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2ZvbnQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2ZvbnRfc2l6ZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvZm9ybWF0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9mb3JtdWxhLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9mcmVlemUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2ljb25faXRlbS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL2l0YWxpYy50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvaXRlbS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvbWVyZ2UudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL21vcmUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3BhaW50Zm9ybWF0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci9wcmludC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvcmVkby50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvc3RyaWtlLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci90ZXh0X2NvbG9yLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbGJhci90ZXh0d3JhcC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvdG9nZ2xlX2l0ZW0udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvbXBvbmVudC90b29sYmFyL3VuZGVybGluZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvdW5kby50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29tcG9uZW50L3Rvb2xiYXIvdmFsaWduLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb21wb25lbnQvdG9vbHRpcC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2FscGhhYmV0LnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2F1dG9fZmlsdGVyLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2NlbGwudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvY2VsbF9yYW5nZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9jbGlwYm9hcmQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvY29sLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL2RhdGFfcHJveHkudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvZm9udC50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9mb3JtYXQudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvZm9ybXVsYS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9oZWxwZXIudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvaGlzdG9yeS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9tZXJnZS50cyIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvY29yZS9yb3cudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvc2Nyb2xsLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL3NlbGVjdG9yLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9jb3JlL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2NvcmUvdmFsaWRhdG9yLnRzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC8uL3NyYy9sb2NhbGUvZW4udHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0Ly4vc3JjL2xvY2FsZS9sb2NhbGUudHMiLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3gtZGF0YS1zcHJlYWRzaGVldC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8veC1kYXRhLXNwcmVhZHNoZWV0L3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly94LWRhdGEtc3ByZWFkc2hlZXQvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4uL2Fzc2V0cy9zcHJpdGUuc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSB7XFxuICBtYXJnaW46IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0IHtcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIGxpbmUtaGVpZ2h0OiBub3JtYWw7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgYm94LXNpemluZzogY29udGVudC1ib3g7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XFxufVxcbi54LXNwcmVhZHNoZWV0IHRleHRhcmVhIHtcXG4gIGZvbnQ6IDQwMCAxM3B4IEFyaWFsLCAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2hlZXQge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuLngtc3ByZWFkc2hlZXQtdGFibGUge1xcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbHRpcCB7XFxuICBmb250LWZhbWlseTogaW5oZXJpdDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHBhZGRpbmc6IDVweCAxMHB4O1xcbiAgY29sb3I6ICNmZmY7XFxuICBib3JkZXItcmFkaXVzOiAxcHg7XFxuICBiYWNrZ3JvdW5kOiAjMDAwMDAwO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgei1pbmRleDogMjAxO1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sdGlwOmJlZm9yZSB7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IGNhbGMoNTAlIC0gNHB4KTtcXG4gIHRvcDogLTRweDtcXG4gIGNvbnRlbnQ6IFxcXCJcXFwiO1xcbiAgd2lkdGg6IDhweDtcXG4gIGhlaWdodDogOHB4O1xcbiAgYmFja2dyb3VuZDogaW5oZXJpdDtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xcbiAgdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xcbiAgei1pbmRleDogMTtcXG4gIGJveC1zaGFkb3c6IDFweCAxcHggM3B4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jb2xvci1wYWxldHRlIHtcXG4gIHBhZGRpbmc6IDVweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY29sb3ItcGFsZXR0ZSB0YWJsZSB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcXG4gIGJvcmRlci1zcGFjaW5nOiAyO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG59XFxuLngtc3ByZWFkc2hlZXQtY29sb3ItcGFsZXR0ZSB0YWJsZSB0ZCB7XFxuICBtYXJnaW46IDA7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY29sb3ItcGFsZXR0ZSB0YWJsZSB0ZDpob3ZlciB7XFxuICBib3JkZXItY29sb3I6ICNkZGQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNvbG9yLXBhbGV0dGUgdGFibGUgdGQgLngtc3ByZWFkc2hlZXQtY29sb3ItcGFsZXR0ZS1jZWxsIHtcXG4gIHdpZHRoOiAxNnB4O1xcbiAgaGVpZ2h0OiAxNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSB7XFxuICBwYWRkaW5nOiA2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIHRhYmxlIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgdGFibGUtbGF5b3V0OiBmaXhlZDtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgdGFibGUgdGQge1xcbiAgbWFyZ2luOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1sZWZ0IHtcXG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlZWU7XFxuICBwYWRkaW5nLXJpZ2h0OiA2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIC54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlLWxlZnQgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtY2VsbCB7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtbGVmdCAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1jZWxsIC54LXNwcmVhZHNoZWV0LWljb24taW1nIHtcXG4gIG9wYWNpdHk6IDAuODtcXG59XFxuLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUgLngtc3ByZWFkc2hlZXQtYm9yZGVyLXBhbGV0dGUtbGVmdCAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1jZWxsOmhvdmVyIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlIC54LXNwcmVhZHNoZWV0LWJvcmRlci1wYWxldHRlLXJpZ2h0IHtcXG4gIHBhZGRpbmctbGVmdDogNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1yaWdodCAueC1zcHJlYWRzaGVldC10b29sYmFyLWJ0biB7XFxuICBtYXJnaW4tdG9wOiAwO1xcbiAgbWFyZ2luLWJvdHRvbTogM3B4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZSAueC1zcHJlYWRzaGVldC1ib3JkZXItcGFsZXR0ZS1yaWdodCAueC1zcHJlYWRzaGVldC1saW5lLXR5cGUge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogLTNweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24ge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kcm9wZG93biAueC1zcHJlYWRzaGVldC1kcm9wZG93bi1jb250ZW50IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IDIwMDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBib3gtc2hhZG93OiAxcHggMnB4IDVweCAycHggcmdiYSg1MSwgNTEsIDUxLCAwLjE1KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24uYm90dG9tLWxlZnQgLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tY29udGVudCB7XFxuICB0b3A6IGNhbGMoMTAwJSArIDVweCk7XFxuICBsZWZ0OiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kcm9wZG93bi5ib3R0b20tcmlnaHQgLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tY29udGVudCB7XFxuICB0b3A6IGNhbGMoMTAwJSArIDVweCk7XFxuICByaWdodDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24udG9wLWxlZnQgLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tY29udGVudCB7XFxuICBib3R0b206IGNhbGMoMTAwJSArIDVweCk7XFxuICBsZWZ0OiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1kcm9wZG93bi50b3AtcmlnaHQgLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tY29udGVudCB7XFxuICBib3R0b206IGNhbGMoMTAwJSArIDVweCk7XFxuICByaWdodDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24gLngtc3ByZWFkc2hlZXQtZHJvcGRvd24tdGl0bGUge1xcbiAgcGFkZGluZzogMCA1cHg7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRyb3Bkb3duIC54LXNwcmVhZHNoZWV0LWRyb3Bkb3duLWhlYWRlciAueC1zcHJlYWRzaGVldC1pY29uLmFycm93LWxlZnQge1xcbiAgbWFyZ2luLWxlZnQ6IDRweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24gLngtc3ByZWFkc2hlZXQtZHJvcGRvd24taGVhZGVyIC54LXNwcmVhZHNoZWV0LWljb24uYXJyb3ctcmlnaHQge1xcbiAgd2lkdGg6IDEwcHg7XFxuICBtYXJnaW4tcmlnaHQ6IDRweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZHJvcGRvd24gLngtc3ByZWFkc2hlZXQtZHJvcGRvd24taGVhZGVyIC54LXNwcmVhZHNoZWV0LWljb24uYXJyb3ctcmlnaHQgLmFycm93LWRvd24ge1xcbiAgbGVmdDogLTEzMHB4O1xcbn1cXG4vKiByZXNpemVyICoqL1xcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgei1pbmRleDogMTE7XFxufVxcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIgLngtc3ByZWFkc2hlZXQtcmVzaXplci1ob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDc1LCAxMzcsIDI1NSwgMC4yNSk7XFxufVxcbi54LXNwcmVhZHNoZWV0LXJlc2l6ZXIgLngtc3ByZWFkc2hlZXQtcmVzaXplci1saW5lIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtcmVzaXplci5ob3Jpem9udGFsIHtcXG4gIGN1cnNvcjogcm93LXJlc2l6ZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtcmVzaXplci5ob3Jpem9udGFsIC54LXNwcmVhZHNoZWV0LXJlc2l6ZXItbGluZSB7XFxuICBib3JkZXItYm90dG9tOiAycHggZGFzaGVkICM0Yjg5ZmY7XFxuICBsZWZ0OiAwO1xcbiAgYm90dG9tOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1yZXNpemVyLnZlcnRpY2FsIHtcXG4gIGN1cnNvcjogY29sLXJlc2l6ZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtcmVzaXplci52ZXJ0aWNhbCAueC1zcHJlYWRzaGVldC1yZXNpemVyLWxpbmUge1xcbiAgYm9yZGVyLXJpZ2h0OiAycHggZGFzaGVkICM0Yjg5ZmY7XFxuICB0b3A6IDA7XFxuICByaWdodDogMDtcXG59XFxuLyogc2Nyb2xsYmFyICovXFxuLngtc3ByZWFkc2hlZXQtc2Nyb2xsYmFyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjVmODtcXG4gIG9wYWNpdHk6IDAuOTtcXG4gIHotaW5kZXg6IDEyO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zY3JvbGxiYXIuaG9yaXpvbnRhbCB7XFxuICByaWdodDogMTVweDtcXG4gIG92ZXJmbG93LXg6IHNjcm9sbDtcXG4gIG92ZXJmbG93LXk6IGhpZGRlbjtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2Nyb2xsYmFyLmhvcml6b250YWwgPiBkaXYge1xcbiAgaGVpZ2h0OiAxcHg7XFxuICBiYWNrZ3JvdW5kOiAjZGRkO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zY3JvbGxiYXIudmVydGljYWwge1xcbiAgYm90dG9tOiAxNXB4O1xcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xcbiAgb3ZlcmZsb3cteTogc2Nyb2xsO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zY3JvbGxiYXIudmVydGljYWwgPiBkaXYge1xcbiAgd2lkdGg6IDFweDtcXG4gIGJhY2tncm91bmQ6ICNkZGQ7XFxufVxcbi8qIEB7Y3NzLXByZWZpeH0tb3ZlcmxheWVyICovXFxuLngtc3ByZWFkc2hlZXQtb3ZlcmxheWVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxuICB6LWluZGV4OiAxMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtb3ZlcmxheWVyIC54LXNwcmVhZHNoZWV0LW92ZXJsYXllci1jb250ZW50IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1lZGl0b3IsXFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3Ige1xcbiAgYm94LXNpemluZzogY29udGVudC1ib3g7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxufVxcbi8qIEB7Y3NzLXByZWZpeH0tc2VsZWN0b3IgKi9cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAuaGlkZS1pbnB1dCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB6LWluZGV4OiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAuaGlkZS1pbnB1dCBpbnB1dCB7XFxuICBwYWRkaW5nOiAwO1xcbiAgd2lkdGg6IDA7XFxuICBib3JkZXI6IG5vbmUhaW1wb3J0YW50O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAueC1zcHJlYWRzaGVldC1zZWxlY3Rvci1hcmVhIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvcmRlcjogMnB4IHNvbGlkICM0Yjg5ZmY7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDc1LCAxMzcsIDI1NSwgMC4xKTtcXG4gIHotaW5kZXg6IDU7XFxufVxcbi54LXNwcmVhZHNoZWV0LXNlbGVjdG9yIC54LXNwcmVhZHNoZWV0LXNlbGVjdG9yLWNsaXBib2FyZCxcXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAueC1zcHJlYWRzaGVldC1zZWxlY3Rvci1hdXRvZmlsbCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXG4gIHotaW5kZXg6IDEwMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3IgLngtc3ByZWFkc2hlZXQtc2VsZWN0b3ItY2xpcGJvYXJkIHtcXG4gIGJvcmRlcjogMnB4IGRhc2hlZCAjNGI4OWZmO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zZWxlY3RvciAueC1zcHJlYWRzaGVldC1zZWxlY3Rvci1hdXRvZmlsbCB7XFxuICBib3JkZXI6IDFweCBkYXNoZWQgcmdiYSgwLCAwLCAwLCAwLjQ1KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtc2VsZWN0b3IgLngtc3ByZWFkc2hlZXQtc2VsZWN0b3ItY29ybmVyIHtcXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgY3Vyc29yOiBjcm9zc2hhaXI7XFxuICBmb250LXNpemU6IDA7XFxuICBoZWlnaHQ6IDVweDtcXG4gIHdpZHRoOiA1cHg7XFxuICByaWdodDogLTVweDtcXG4gIGJvdHRvbTogLTVweDtcXG4gIGJvcmRlcjogMnB4IHNvbGlkICNmZmZmZmY7XFxuICBiYWNrZ3JvdW5kOiAjNGI4OWZmO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1lZGl0b3Ige1xcbiAgei1pbmRleDogMjA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWVkaXRvciAueC1zcHJlYWRzaGVldC1lZGl0b3ItYXJlYSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgYm9yZGVyOiAycHggc29saWQgIzRiODlmZjtcXG4gIGxpbmUtaGVpZ2h0OiAwO1xcbiAgei1pbmRleDogMTAwO1xcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxufVxcbi54LXNwcmVhZHNoZWV0LWVkaXRvciAueC1zcHJlYWRzaGVldC1lZGl0b3ItYXJlYSB0ZXh0YXJlYSB7XFxuICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIHBhZGRpbmc6IDAgM3B4O1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIHJlc2l6ZTogbm9uZTtcXG4gIHRleHQtYWxpZ246IHN0YXJ0O1xcbiAgb3ZlcmZsb3cteTogaGlkZGVuO1xcbiAgZm9udDogNDAwIDEzcHggQXJpYWwsICdMYXRvJywgJ1NvdXJjZSBTYW5zIFBybycsIFJvYm90bywgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcbiAgY29sb3I6IGluaGVyaXQ7XFxuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xcbiAgbGluZS1oZWlnaHQ6IDIycHg7XFxuICBtYXJnaW46IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWVkaXRvciAueC1zcHJlYWRzaGVldC1lZGl0b3ItYXJlYSAudGV4dGxpbmUge1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWl0ZW0ge1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICBiYWNrZ3JvdW5kOiAwO1xcbiAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgaGVpZ2h0OiAyNnB4O1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC45KTtcXG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG4gIHBhZGRpbmc6IDJweCAxMHB4O1xcbiAgY3Vyc29yOiBkZWZhdWx0O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxufVxcbi54LXNwcmVhZHNoZWV0LWl0ZW0uZGlzYWJsZWQge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcbi54LXNwcmVhZHNoZWV0LWl0ZW06aG92ZXIsXFxuLngtc3ByZWFkc2hlZXQtaXRlbS5hY3RpdmUge1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtaXRlbS5kaXZpZGVyIHtcXG4gIGhlaWdodDogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBtYXJnaW46IDVweCAwO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xKTtcXG59XFxuLngtc3ByZWFkc2hlZXQtaXRlbSAubGFiZWwge1xcbiAgZmxvYXQ6IHJpZ2h0O1xcbiAgb3BhY2l0eTogMC42NTtcXG4gIGZvbnQtc2l6ZTogMWVtO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLnN0YXRlLFxcbi54LXNwcmVhZHNoZWV0LWhlYWRlci5zdGF0ZSB7XFxuICBwYWRkaW5nLWxlZnQ6IDM1cHghaW1wb3J0YW50O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLnN0YXRlOmJlZm9yZSxcXG4ueC1zcHJlYWRzaGVldC1oZWFkZXIuc3RhdGU6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDEwcHg7XFxuICBoZWlnaHQ6IDEwcHg7XFxuICBsZWZ0OiAxMnB4O1xcbiAgdG9wOiBjYWxjKDUwJSAtIDVweCk7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pdGVtLnN0YXRlLmNoZWNrZWQ6YmVmb3JlLFxcbi54LXNwcmVhZHNoZWV0LWhlYWRlci5zdGF0ZS5jaGVja2VkOmJlZm9yZSB7XFxuICBiYWNrZ3JvdW5kOiAjNGI4OWZmO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jaGVja2JveCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICBvdXRsaW5lOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xcbiAgZm9udC1zaXplOiAxcmVtO1xcbiAgbGluZS1oZWlnaHQ6IDFlbTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2hlY2tib3ggPiBpbnB1dCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgb3BhY2l0eTogMCFpbXBvcnRhbnQ7XFxuICBvdXRsaW5lOiAwO1xcbiAgei1pbmRleDogLTE7XFxufVxcbi54LXNwcmVhZHNoZWV0LXN1Z2dlc3QsXFxuLngtc3ByZWFkc2hlZXQtY29udGV4dG1lbnUsXFxuLngtc3ByZWFkc2hlZXQtc29ydC1maWx0ZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm94LXNoYWRvdzogMXB4IDJweCA1cHggMnB4IHJnYmEoNTEsIDUxLCA1MSwgMC4xNSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgei1pbmRleDogMTAwO1xcbiAgd2lkdGg6IDI2MHB4O1xcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICBvdmVyZmxvdzogYXV0bztcXG59XFxuLngtc3ByZWFkc2hlZXQtc3VnZ2VzdCB7XFxuICB3aWR0aDogMjAwcHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZpbHRlciB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5O1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbWFyZ2luOiAxMHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1maWx0ZXIgLngtc3ByZWFkc2hlZXQtaGVhZGVyIHtcXG4gIHBhZGRpbmc6IDAuNWVtIDAuNzVlbTtcXG4gIGJhY2tncm91bmQ6ICNmOGY4Zjk7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U5ZTllOTtcXG4gIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZpbHRlciAueC1zcHJlYWRzaGVldC1ib2R5IHtcXG4gIGhlaWdodDogMjAwcHg7XFxuICBvdmVyZmxvdy15OiBhdXRvO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1maWx0ZXIgLngtc3ByZWFkc2hlZXQtYm9keSAueC1zcHJlYWRzaGVldC1pdGVtIHtcXG4gIGhlaWdodDogMjBweDtcXG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1zb3J0LWZpbHRlciAueC1zcHJlYWRzaGVldC1idXR0b25zIHtcXG4gIG1hcmdpbjogMTBweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhcixcXG4ueC1zcHJlYWRzaGVldC1ib3R0b21iYXIge1xcbiAgaGVpZ2h0OiA0MHB4O1xcbiAgcGFkZGluZzogMCAzMHB4O1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIGJhY2tncm91bmQ6ICNmNWY2Zjc7XFxuICBkaXNwbGF5OiBmbGV4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1ib3R0b21iYXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUyZTQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJvdHRvbWJhciAueC1zcHJlYWRzaGVldC1tZW51ID4gbGkge1xcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XFxuICBoZWlnaHQ6IDQwcHg7XFxuICBwYWRkaW5nLXRvcDogMDtcXG4gIHBhZGRpbmctYm90dG9tOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlOGVhZWQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUge1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtbWVudSA+IGxpIHtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgbGluZS1oZWlnaHQ6IDEuMjVlbTtcXG4gIHBhZGRpbmc6IDAuNzg1ZW0gMWVtO1xcbiAgbWFyZ2luOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgY29sb3I6ICM4MDg2OGI7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3M7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuLngtc3ByZWFkc2hlZXQtbWVudSA+IGxpLmFjdGl2ZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUgPiBsaSAueC1zcHJlYWRzaGVldC1pY29uIHtcXG4gIG1hcmdpbjogMCA2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUgPiBsaSAueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nOmhvdmVyIHtcXG4gIG9wYWNpdHk6IDAuODU7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1lbnUgPiBsaSAueC1zcHJlYWRzaGVldC1kcm9wZG93biB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIge1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUyZTQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG5zIHtcXG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIC54LXNwcmVhZHNoZWV0LXRvb2xiYXItbW9yZSB7XFxuICBwYWRkaW5nOiAwIDZweCA2cHg7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b29sYmFyIC54LXNwcmVhZHNoZWV0LXRvb2xiYXItbW9yZSAueC1zcHJlYWRzaGVldC10b29sYmFyLWRpdmlkZXIge1xcbiAgbWFyZ2luLXRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhciAueC1zcHJlYWRzaGVldC10b29sYmFyLWJ0biB7XFxuICBmbGV4OiAwIDAgYXV0bztcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgaGVpZ2h0OiAyNnB4O1xcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XFxuICBtaW4td2lkdGg6IDI2cHg7XFxuICBtYXJnaW46IDZweCAxcHggMDtcXG4gIHBhZGRpbmc6IDA7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG4uZGlzYWJsZWQge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcbi54LXNwcmVhZHNoZWV0LXRvb2xiYXIgLngtc3ByZWFkc2hlZXQtdG9vbGJhci1idG46aG92ZXIsXFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhciAueC1zcHJlYWRzaGVldC10b29sYmFyLWJ0bi5hY3RpdmUge1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9vbGJhci1kaXZpZGVyIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlMGUyZTQ7XFxuICB3aWR0aDogMDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICBoZWlnaHQ6IDE4cHg7XFxuICBtYXJnaW46IDEycHggM3B4IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LXByaW50IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxuICB6LWluZGV4OiAxMDA7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludC1iYXIge1xcbiAgYmFja2dyb3VuZDogIzQyNDI0MjtcXG4gIGhlaWdodDogNjBweDtcXG4gIGxpbmUtaGVpZ2h0OiA2MHB4O1xcbiAgcGFkZGluZzogMCAzMHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludC1iYXIgLi10aXRsZSB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgZm9udC1zaXplOiAxLjJlbTtcXG4gIGZsb2F0OiBsZWZ0O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludC1iYXIgLi1yaWdodCB7XFxuICBmbG9hdDogcmlnaHQ7XFxuICBtYXJnaW4tdG9wOiAxMnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludC1jb250ZW50IHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4OiBhdXRvO1xcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gIGJhY2tncm91bmQ6ICNkMGQwZDA7XFxuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDYwcHgpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1wcmludC1jb250ZW50IC4tc2lkZXIge1xcbiAgZmxleDogMCAwIDMwMHB4O1xcbiAgd2lkdGg6IDMwMHB4O1xcbiAgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCAjY2NjO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG59XFxuLngtc3ByZWFkc2hlZXQtcHJpbnQtY29udGVudCAuLWNvbnRlbnQge1xcbiAgZmxleDogYXV0bztcXG4gIG92ZXJmbG93LXg6IGF1dG87XFxuICBvdmVyZmxvdy15OiBzY3JvbGw7XFxuICBoZWlnaHQ6IDEwMCU7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbnZhcy1jYXJkLXdyYXBlciB7XFxuICBtYXJnaW46IDQwcHggMjBweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FudmFzLWNhcmQge1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIG1hcmdpbjogYXV0bztcXG4gIHBhZ2UtYnJlYWstYmVmb3JlOiBhdXRvO1xcbiAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzO1xcbiAgYm94LXNoYWRvdzogMCA4cHggMTBweCAxcHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAzcHggMTRweCAzcHggcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCA0cHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciB7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjY1KTtcXG4gIGJhY2tncm91bmQ6ICNmZmZmZmY7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciB7XFxuICBmb250LXdlaWdodDogNzAwO1xcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICB3aWR0aDogMTAwJTtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgYmFja2dyb3VuZDogI2Y5ZmFmYjtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciAuY2FsZW5kYXItaGVhZGVyLWxlZnQge1xcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XFxuICBmbG9hdDogbGVmdDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciAuY2FsZW5kYXItaGVhZGVyLXJpZ2h0IHtcXG4gIGZsb2F0OiByaWdodDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciAuY2FsZW5kYXItaGVhZGVyLXJpZ2h0IGEge1xcbiAgcGFkZGluZzogM3B4IDA7XFxuICBtYXJnaW4tcmlnaHQ6IDJweDtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciAuY2FsZW5kYXItaGVhZGVyLXJpZ2h0IGE6aG92ZXIge1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkge1xcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG4gIGJvcmRlci1zcGFjaW5nOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciAuY2FsZW5kYXItYm9keSB0aCxcXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciAuY2FsZW5kYXItYm9keSB0ZCB7XFxuICB3aWR0aDogMTQuMjg1NzE0MjklO1xcbiAgbWluLXdpZHRoOiAzMnB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgcGFkZGluZzogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtY2FsZW5kYXIgLmNhbGVuZGFyLWJvZHkgdGQgPiAuY2VsbDpob3ZlciB7XFxuICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciAuY2FsZW5kYXItYm9keSB0ZCA+IC5jZWxsLmFjdGl2ZSxcXG4ueC1zcHJlYWRzaGVldC1jYWxlbmRhciAuY2FsZW5kYXItYm9keSB0ZCA+IC5jZWxsLmFjdGl2ZTpob3ZlciB7XFxuICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xcbiAgY29sb3I6ICMyMTg1RDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWNhbGVuZGFyIC5jYWxlbmRhci1ib2R5IHRkID4gLmNlbGwuZGlzYWJsZWQge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcbi54LXNwcmVhZHNoZWV0LWRhdGVwaWNrZXIge1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogY2FsYygxMDAlICsgNXB4KTtcXG4gIHotaW5kZXg6IDEwO1xcbiAgd2lkdGg6IGF1dG87XFxufVxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbnMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbnMgLngtc3ByZWFkc2hlZXQtYnV0dG9uIHtcXG4gIG1hcmdpbi1sZWZ0OiA4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbiB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBib3JkZXItcmFkaXVzOiAzcHg7XFxuICBsaW5lLWhlaWdodDogMWVtO1xcbiAgbWluLWhlaWdodDogMWVtO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGZvbnQtc2l6ZTogMWVtO1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIHBhZGRpbmc6IDAuNzVlbSAxZW07XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjYpO1xcbiAgYmFja2dyb3VuZDogI0UwRTFFMjtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG4gIGZvbnQtZmFtaWx5OiBcXFwiTGF0b1xcXCIsIFxcXCJwcm94aW1hLW5vdmFcXFwiLCBcXFwiSGVsdmV0aWNhIE5ldWVcXFwiLCBBcmlhbCwgc2Fucy1zZXJpZjtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxuICB6b29tOiAxO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBsaW5lYXI7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbi5hY3RpdmUsXFxuLngtc3ByZWFkc2hlZXQtYnV0dG9uOmhvdmVyIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNDMEMxQzI7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1idXR0b24ucHJpbWFyeSB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMyMTg1RDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbi5wcmltYXJ5OmhvdmVyLFxcbi54LXNwcmVhZHNoZWV0LWJ1dHRvbi5wcmltYXJ5LmFjdGl2ZSB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMxNjc4YzI7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0taW5wdXQge1xcbiAgZm9udC1zaXplOiAxZW07XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtZm9ybS1pbnB1dCBpbnB1dCB7XFxuICB6LWluZGV4OiAxO1xcbiAgbWFyZ2luOiAwO1xcbiAgbWF4LXdpZHRoOiAxMDAlO1xcbiAgZmxleDogMSAwIGF1dG87XFxuICBvdXRsaW5lOiAwO1xcbiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDApO1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgcGFkZGluZzogMCA4cHg7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2U5ZTllOTtcXG4gIGJvcmRlci1yYWRpdXM6IDNweDtcXG4gIHRyYW5zaXRpb246IGJveC1zaGFkb3cgMC4xcyBlYXNlLCBib3JkZXItY29sb3IgMC4xcyBlYXNlO1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IGhzbGEoMCwgMCUsIDQlLCAwLjA2KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtZm9ybS1pbnB1dCBpbnB1dDpmb2N1cyB7XFxuICBib3JkZXItY29sb3I6ICM0Yjg5ZmY7XFxuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSg3NSwgMTM3LCAyNTUsIDAuMik7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tc2VsZWN0IHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5O1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDJweCBoc2xhKDAsIDAlLCA0JSwgMC4wNik7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tc2VsZWN0IC5pbnB1dC10ZXh0IHtcXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gIG1pbi13aWR0aDogNjBweDtcXG4gIHdpZHRoOiBhdXRvO1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XFxuICBwYWRkaW5nOiAwIDhweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZm9ybS1maWVsZHMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGRzIC54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQge1xcbiAgZmxleDogMCAxIGF1dG87XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGRzIC54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQgLmxhYmVsIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIG1hcmdpbjogMCAxMHB4IDAgMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZm9ybS1maWVsZCB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICBtYXJnaW4tbGVmdDogMTBweDtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQ6Zmlyc3QtY2hpbGQge1xcbiAgbWFyZ2luLWxlZnQ6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQuZXJyb3IgLngtc3ByZWFkc2hlZXQtZm9ybS1zZWxlY3QsXFxuLngtc3ByZWFkc2hlZXQtZm9ybS1maWVsZC5lcnJvciBpbnB1dCB7XFxuICBib3JkZXItY29sb3I6ICNmMDQxMzQ7XFxufVxcbi54LXNwcmVhZHNoZWV0LWZvcm0tZmllbGQgLnRpcCB7XFxuICBjb2xvcjogI2YwNDEzNDtcXG4gIGZvbnQtc2l6ZTogMC45ZW07XFxufVxcbi54LXNwcmVhZHNoZWV0LWRpbW1lciB7XFxuICBkaXNwbGF5OiBub25lO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwICFpbXBvcnRhbnQ7XFxuICBsZWZ0OiAwICFpbXBvcnRhbnQ7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7XFxuICBvcGFjaXR5OiAwO1xcbiAgLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOiBib3RoO1xcbiAgYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDtcXG4gIC13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOiAwLjVzO1xcbiAgYW5pbWF0aW9uLWR1cmF0aW9uOiAwLjVzO1xcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjVzIGxpbmVhcjtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgei1pbmRleDogMTAwMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtZGltbWVyLmFjdGl2ZSB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG9wYWNpdHk6IDE7XFxufVxcbmZvcm0gZmllbGRzZXQge1xcbiAgYm9yZGVyOiBub25lO1xcbn1cXG5mb3JtIGZpZWxkc2V0IGxhYmVsIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWFyZ2luLWJvdHRvbTogMC41ZW07XFxuICBmb250LXNpemU6IDFlbTtcXG4gIGNvbG9yOiAjNjY2O1xcbn1cXG5mb3JtIGZpZWxkc2V0IHNlbGVjdCB7XFxuICBmb250LXNpemU6IDEuMWVtO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNkZGQ7XFxuICBwYWRkaW5nOiAwLjVlbSAwLjg1ZW07XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1vZGFsLFxcbi54LXNwcmVhZHNoZWV0LXRvYXN0IHtcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHotaW5kZXg6IDEwMDE7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgbGluZS1oZWlnaHQ6IDEuMjVlbTtcXG4gIG1pbi13aWR0aDogMzYwcHg7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcXG4gIGZvbnQtZmFtaWx5OiAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBib3JkZXItcmFkaXVzOiA0cHg7XFxuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4yKSAwcHggMnB4IDhweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtdG9hc3Qge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjg1KTtcXG59XFxuLngtc3ByZWFkc2hlZXQtbW9kYWwtaGVhZGVyLFxcbi54LXNwcmVhZHNoZWV0LXRvYXN0LWhlYWRlciB7XFxuICBmb250LXdlaWdodDogNjAwO1xcbiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44NSk7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjA1KTtcXG4gIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tb2RhbC1oZWFkZXIgLngtc3ByZWFkc2hlZXQtaWNvbixcXG4ueC1zcHJlYWRzaGVldC10b2FzdC1oZWFkZXIgLngtc3ByZWFkc2hlZXQtaWNvbiB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICByaWdodDogMC44ZW07XFxuICB0b3A6IDAuNjVlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1vZGFsLWhlYWRlciAueC1zcHJlYWRzaGVldC1pY29uOmhvdmVyLFxcbi54LXNwcmVhZHNoZWV0LXRvYXN0LWhlYWRlciAueC1zcHJlYWRzaGVldC1pY29uOmhvdmVyIHtcXG4gIG9wYWNpdHk6IDE7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpO1xcbn1cXG4ueC1zcHJlYWRzaGVldC10b2FzdC1oZWFkZXIge1xcbiAgY29sb3I6ICNGMjcxMUM7XFxufVxcbi54LXNwcmVhZHNoZWV0LW1vZGFsLWhlYWRlciB7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2UwZTJlNDtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wOCk7XFxuICBmb250LXNpemU6IDEuMDc4NWVtO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1tb2RhbC1oZWFkZXIsXFxuLngtc3ByZWFkc2hlZXQtbW9kYWwtY29udGVudCxcXG4ueC1zcHJlYWRzaGVldC10b2FzdC1oZWFkZXIsXFxuLngtc3ByZWFkc2hlZXQtdG9hc3QtY29udGVudCB7XFxuICBwYWRkaW5nOiAwLjc1ZW0gMWVtO1xcbn1cXG5AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAzMjBweCkgYW5kIChtYXgtd2lkdGg6IDQ4MHB4KSB7XFxuICAueC1zcHJlYWRzaGVldC10b29sYmFyIHtcXG4gICAgZGlzcGxheTogbm9uZTtcXG4gIH1cXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiB7XFxuICB3aWR0aDogMThweDtcXG4gIGhlaWdodDogMThweDtcXG4gIG1hcmdpbjogMXB4IDFweCAycHggMXB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGxpbmUtaGVpZ2h0OiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nIHtcXG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gKyBcIik7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMjYycHg7XFxuICBoZWlnaHQ6IDQ0NHB4O1xcbiAgb3BhY2l0eTogMC41NjtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy51bmRvIHtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcucmVkbyB7XFxuICBsZWZ0OiAtMThweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5wcmludCB7XFxuICBsZWZ0OiAtMzZweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5wYWludGZvcm1hdCB7XFxuICBsZWZ0OiAtNTRweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5jbGVhcmZvcm1hdCB7XFxuICBsZWZ0OiAtNzJweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5mb250LWJvbGQge1xcbiAgbGVmdDogLTkwcHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuZm9udC1pdGFsaWMge1xcbiAgbGVmdDogLTEwOHB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLnVuZGVybGluZSB7XFxuICBsZWZ0OiAtMTI2cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuc3RyaWtlIHtcXG4gIGxlZnQ6IC0xNDRweDtcXG4gIHRvcDogMDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5jb2xvciB7XFxuICBsZWZ0OiAtMTYycHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYmdjb2xvciB7XFxuICBsZWZ0OiAtMTgwcHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcubWVyZ2Uge1xcbiAgbGVmdDogLTE5OHB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFsaWduLWxlZnQge1xcbiAgbGVmdDogLTIxNnB4O1xcbiAgdG9wOiAwO1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFsaWduLWNlbnRlciB7XFxuICBsZWZ0OiAtMjM0cHg7XFxuICB0b3A6IDA7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYWxpZ24tcmlnaHQge1xcbiAgbGVmdDogMDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYWxpZ24tdG9wIHtcXG4gIGxlZnQ6IC0xOHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hbGlnbi1taWRkbGUge1xcbiAgbGVmdDogLTM2cHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFsaWduLWJvdHRvbSB7XFxuICBsZWZ0OiAtNTRweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcudGV4dHdyYXAge1xcbiAgbGVmdDogLTcycHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmF1dG9maWx0ZXIge1xcbiAgbGVmdDogLTkwcHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmZvcm11bGEge1xcbiAgbGVmdDogLTEwOHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5hcnJvdy1kb3duIHtcXG4gIGxlZnQ6IC0xMjZweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYXJyb3ctcmlnaHQge1xcbiAgbGVmdDogLTE0NHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5saW5rIHtcXG4gIGxlZnQ6IC0xNjJweDtcXG4gIHRvcDogLTE4cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuY2hhcnQge1xcbiAgbGVmdDogLTE4MHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5mcmVlemUge1xcbiAgbGVmdDogLTE5OHB4O1xcbiAgdG9wOiAtMThweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5lbGxpcHNpcyB7XFxuICBsZWZ0OiAtMjE2cHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmFkZCB7XFxuICBsZWZ0OiAtMjM0cHg7XFxuICB0b3A6IC0xOHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1hbGwge1xcbiAgbGVmdDogMDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLWluc2lkZSB7XFxuICBsZWZ0OiAtMThweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLWhvcml6b250YWwge1xcbiAgbGVmdDogLTM2cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci12ZXJ0aWNhbCB7XFxuICBsZWZ0OiAtNTRweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLW91dHNpZGUge1xcbiAgbGVmdDogLTcycHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1sZWZ0IHtcXG4gIGxlZnQ6IC05MHB4O1xcbiAgdG9wOiAtMzZweDtcXG59XFxuLngtc3ByZWFkc2hlZXQtaWNvbiAueC1zcHJlYWRzaGVldC1pY29uLWltZy5ib3JkZXItdG9wIHtcXG4gIGxlZnQ6IC0xMDhweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLXJpZ2h0IHtcXG4gIGxlZnQ6IC0xMjZweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuYm9yZGVyLWJvdHRvbSB7XFxuICBsZWZ0OiAtMTQ0cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmJvcmRlci1ub25lIHtcXG4gIGxlZnQ6IC0xNjJweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcubGluZS1jb2xvciB7XFxuICBsZWZ0OiAtMTgwcHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmxpbmUtdHlwZSB7XFxuICBsZWZ0OiAtMTk4cHg7XFxuICB0b3A6IC0zNnB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNsb3NlIHtcXG4gIGxlZnQ6IC0yMzRweDtcXG4gIHRvcDogLTM2cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuY2hldnJvbi1kb3duIHtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IC01NHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNoZXZyb24tdXAge1xcbiAgbGVmdDogLTE4cHg7XFxuICB0b3A6IC01NHB4O1xcbn1cXG4ueC1zcHJlYWRzaGVldC1pY29uIC54LXNwcmVhZHNoZWV0LWljb24taW1nLmNoZXZyb24tbGVmdCB7XFxuICBsZWZ0OiAtMzZweDtcXG4gIHRvcDogLTU0cHg7XFxufVxcbi54LXNwcmVhZHNoZWV0LWljb24gLngtc3ByZWFkc2hlZXQtaWNvbi1pbWcuY2hldnJvbi1yaWdodCB7XFxuICBsZWZ0OiAtNTRweDtcXG4gIHRvcDogLTU0cHg7XFxufVxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9pbmRleC5sZXNzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQXVEQTtFQUNFLFNBQUE7QUF0REY7QUFGQztFQTREQyxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLHNCQUFB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QUE0TUk7RUFDRSxPQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsT0FBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxZQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFlBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxPQUFBO0VBQ0EsVUFBQTtBQTFNTjtBQTRNSTtFQUNFLFdBQUE7RUFDQSxVQUFBO0FBMU1OO0FBNE1JO0VBQ0UsV0FBQTtFQUNBLFVBQUE7QUExTU47QUE0TUk7RUFDRSxXQUFBO0VBQ0EsVUFBQTtBQTFNTlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJAY3NzLXByZWZpeDogeC1zcHJlYWRzaGVldDtcXG4vLyBjb2xvclxcbkByZWQtY29sb3I6ICNEQjI4Mjg7XFxuQHJlZC1ob3Zlci1jb2xvcjogI2QwMTkxOTtcXG5Ab3JhbmdlLWNvbG9yOiAjRjI3MTFDO1xcbkBvcmFuZ2UtaG92ZXItY29sb3I6ICNmMjYyMDI7XFxuQHllbGxvdy1jb2xvcjogI0ZCQkQwODtcXG5AeWVsbG93LWhvdmVyLWNvbG9yOiAjZWFhZTAwO1xcbkBvbGl2ZS1jb2xvcjogI0I1Q0MxODtcXG5Ab2xpdmUtaG92ZXItY29sb3I6ICNhN2JkMGQ7XFxuQGdyZWVuLWNvbG9yOiAjMjFCQTQ1O1xcbkBncmVlbi1ob3Zlci1jb2xvcjogIzE2YWIzOTtcXG5AdGVhbC1jb2xvcjogIzAwQjVBRDtcXG5AdGVhbC1ob3Zlci1jb2xvcjogIzAwOWM5NTtcXG5AYmx1ZS1jb2xvcjogIzIxODVEMDtcXG5AYmx1ZS1ob3Zlci1jb2xvcjogIzE2NzhjMjtcXG5AdmlvbGV0LWNvbG9yOiAjNjQzNUM5O1xcbkB2aW9sZXQtaG92ZXItY29sb3I6ICM1ODI5YmI7XFxuQHB1cnBsZS1jb2xvcjogI0EzMzNDODtcXG5AcHVycGxlLWhvdmVyLWNvbG9yOiAjOTYyN2JhO1xcbkBwaW5rLWNvbG9yOiAjRTAzOTk3O1xcbkBwaW5rLWhvdmVyLWNvbG9yOiAjZTYxYThkO1xcbkBicm93bi1jb2xvcjogI0E1NjczRjtcXG5AYnJvd24taG92ZXItY29sb3I6ICM5NzViMzM7XFxuQGdyZXktY29sb3I6ICM3Njc2NzY7XFxuQGdyZXktaG92ZXItY29sb3I6ICM4MzgzODM7XFxuQGRhcmstY29sb3I6ICMzNDNhNDA7XFxuQGRhcmstaG92ZXItY29sb3I6IGRhcmtlbihAZGFyay1jb2xvciwgMTAlKTtcXG5AYmxhY2stY29sb3I6ICMxQjFDMUQ7XFxuQGJsYWNrLWhvdmVyLWNvbG9yOiAjMjcyOTJhO1xcblxcbi8vIGJhc2VcXG5AYm9yZGVyLXN0eWxlOiAxcHggc29saWQgI2UwZTJlNDtcXG5AaWNvbi1zaXplOiAxOHB4O1xcbkBsaW5lLWhlaWdodDogMS4yNWVtO1xcbkBib3JkZXItY29sb3I6ICNlOWU5ZTk7XFxuQGJvcmRlcjogMXB4IHNvbGlkIEBib3JkZXItY29sb3I7XFxuQGlucHV0LWJvcmRlcjogQGJvcmRlcjtcXG5AaW5wdXQtcGFkZGluZzogMC41ZW0gMC43NWVtO1xcbkBpbnB1dC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggaHNsYSgwLDAlLDQlLC4wNik7XFxuQGJvcmRlci1yYWRpdXM6IDJweDtcXG5AZm9ybS1maWVsZC1oZWlnaHQ6IDMwcHg7XFxuQHByaW1hcnktY29sb3I6IEBibHVlLWNvbG9yO1xcbkBwcmltYXJ5LWhvdmVyLWNvbG9yOiBAYmx1ZS1ob3Zlci1jb2xvcjtcXG5cXG4vLyBtZXRob2RcXG4udHlwZS1wcmltYXJ5KCkge1xcbiAgY29sb3I6ICNmZmY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBAcHJpbWFyeS1jb2xvcjtcXG4gICY6aG92ZXIsICYuYWN0aXZlIHtcXG4gICAgY29sb3I6ICNmZmY7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IEBwcmltYXJ5LWhvdmVyLWNvbG9yO1xcbiAgfVxcbn1cXG5cXG5ib2R5IHtcXG4gIG1hcmdpbjogMDtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0ge1xcbiAgZm9udC1zaXplOiAxM3B4O1xcbiAgbGluZS1oZWlnaHQ6IG5vcm1hbDtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gIGZvbnQtZmFtaWx5OiAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcXG5cXG4gIHRleHRhcmVhIHtcXG4gICAgZm9udDogNDAwIDEzcHggQXJpYWwsICdMYXRvJywgJ1NvdXJjZSBTYW5zIFBybycsIFJvYm90bywgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1zaGVldCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10YWJsZSB7XFxuICAvLyBodG1sNSBib3R0b20gbWFyZ2luIGJ1Z1xcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tdG9vbHRpcCB7XFxuICBmb250LWZhbWlseTogaW5oZXJpdDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHBhZGRpbmc6IDVweCAxMHB4O1xcbiAgY29sb3I6ICNmZmY7XFxuICBib3JkZXItcmFkaXVzOiAxcHg7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDEpO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgei1pbmRleDogMjAxO1xcblxcbiAgJjpiZWZvcmUge1xcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBsZWZ0OiBjYWxjKDUwJSAtIDRweCk7XFxuICAgIHRvcDogLTRweDtcXG4gICAgY29udGVudDogXFxcIlxcXCI7XFxuICAgIHdpZHRoOiA4cHg7XFxuICAgIGhlaWdodDogOHB4O1xcbiAgICBiYWNrZ3JvdW5kOiBpbmhlcml0O1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xcbiAgICB6LWluZGV4OiAxO1xcbiAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAtMXB4IHJnYmEoMCwgMCwgMCwgLjMpO1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1jb2xvci1wYWxldHRlIHtcXG4gIHBhZGRpbmc6IDVweDtcXG5cXG4gIHRhYmxlIHtcXG4gICAgbWFyZ2luOiAwO1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xcbiAgICBib3JkZXItc3BhY2luZzogMjtcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG5cXG4gICAgdGQge1xcbiAgICAgIG1hcmdpbjogMDtcXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuXFxuICAgICAgJjpob3ZlciB7XFxuICAgICAgICBib3JkZXItY29sb3I6ICNkZGQ7XFxuICAgICAgfVxcblxcbiAgICAgIC5Ae2Nzcy1wcmVmaXh9LWNvbG9yLXBhbGV0dGUtY2VsbCB7XFxuICAgICAgICB3aWR0aDogMTZweDtcXG4gICAgICAgIGhlaWdodDogMTZweDtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tYm9yZGVyLXBhbGV0dGUge1xcbiAgcGFkZGluZzogNnB4O1xcblxcbiAgdGFibGUge1xcbiAgICBtYXJnaW46IDA7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XFxuICAgIGJvcmRlci1zcGFjaW5nOiAwO1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xcblxcbiAgICB0ZCB7XFxuICAgICAgbWFyZ2luOiAwO1xcbiAgICB9XFxuICB9XFxuXFxuICAuQHtjc3MtcHJlZml4fS1ib3JkZXItcGFsZXR0ZS1sZWZ0IHtcXG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZTtcXG4gICAgcGFkZGluZy1yaWdodDogNnB4O1xcblxcbiAgICAuQHtjc3MtcHJlZml4fS1ib3JkZXItcGFsZXR0ZS1jZWxsIHtcXG4gICAgICB3aWR0aDogMzBweDtcXG4gICAgICBoZWlnaHQ6IDMwcHg7XFxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG5cXG4gICAgICAuQHtjc3MtcHJlZml4fS1pY29uLWltZyB7XFxuICAgICAgICBvcGFjaXR5OiAuODtcXG4gICAgICB9XFxuXFxuICAgICAgJjpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgLkB7Y3NzLXByZWZpeH0tYm9yZGVyLXBhbGV0dGUtcmlnaHQge1xcbiAgICBwYWRkaW5nLWxlZnQ6IDZweDtcXG5cXG4gICAgLkB7Y3NzLXByZWZpeH0tdG9vbGJhci1idG4ge1xcbiAgICAgIG1hcmdpbi10b3A6IDA7XFxuICAgICAgbWFyZ2luLWJvdHRvbTogM3B4O1xcbiAgICB9XFxuXFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWxpbmUtdHlwZSB7XFxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgdG9wOiAtM3B4O1xcbiAgICB9XFxuXFxuICB9XFxuXFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnQge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHotaW5kZXg6IDIwMDtcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG4gICAgYm94LXNoYWRvdzogMXB4IDJweCA1cHggMnB4IHJnYmEoNTEsNTEsNTEsLjE1KTtcXG4gIH1cXG5cXG4gICYuYm90dG9tLWxlZnQge1xcbiAgICAuQHtjc3MtcHJlZml4fS1kcm9wZG93bi1jb250ZW50IHtcXG4gICAgICB0b3A6IGNhbGMoficxMDAlICsgNXB4Jyk7XFxuICAgICAgbGVmdDogMDtcXG4gICAgfVxcbiAgfVxcblxcbiAgJi5ib3R0b20tcmlnaHQge1xcbiAgICAuQHtjc3MtcHJlZml4fS1kcm9wZG93bi1jb250ZW50IHtcXG4gICAgICB0b3A6IGNhbGMoficxMDAlICsgNXB4Jyk7XFxuICAgICAgcmlnaHQ6IDA7XFxuICAgIH1cXG4gIH1cXG5cXG4gICYudG9wLWxlZnQge1xcbiAgICAuQHtjc3MtcHJlZml4fS1kcm9wZG93bi1jb250ZW50IHtcXG4gICAgICBib3R0b206IGNhbGMoficxMDAlICsgNXB4Jyk7XFxuICAgICAgbGVmdDogMDtcXG4gICAgfVxcbiAgfVxcblxcbiAgJi50b3AtcmlnaHQge1xcbiAgICAuQHtjc3MtcHJlZml4fS1kcm9wZG93bi1jb250ZW50IHtcXG4gICAgICBib3R0b206IGNhbGMoficxMDAlICsgNXB4Jyk7XFxuICAgICAgcmlnaHQ6IDA7XFxuICAgIH1cXG4gIH1cXG5cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLXRpdGxlIHtcXG4gICAgcGFkZGluZzogMCA1cHg7XFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIH1cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWRyb3Bkb3duLWhlYWRlciB7XFxuICAgIC5Ae2Nzcy1wcmVmaXh9LWljb24uYXJyb3ctbGVmdCB7XFxuICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcXG4gICAgfVxcbiAgICAuQHtjc3MtcHJlZml4fS1pY29uLmFycm93LXJpZ2h0IHtcXG4gICAgICB3aWR0aDogMTBweDtcXG4gICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcXG4gICAgICAuYXJyb3ctZG93biB7XFxuICAgICAgICBsZWZ0OiAtMTMwcHg7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxufVxcbi8qIHJlc2l6ZXIgKiovXFxuLkB7Y3NzLXByZWZpeH0tcmVzaXplciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB6LWluZGV4OiAxMTtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LXJlc2l6ZXItaG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDc1LCAxMzcsIDI1NSwgLjI1KTtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LXJlc2l6ZXItbGluZSB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIH1cXG5cXG4gICYuaG9yaXpvbnRhbCB7XFxuICAgIGN1cnNvcjogcm93LXJlc2l6ZTtcXG4gICAgLkB7Y3NzLXByZWZpeH0tcmVzaXplci1saW5lIHtcXG4gICAgICBib3JkZXItYm90dG9tOiAycHggZGFzaGVkIHJnYig3NSwgMTM3LCAyNTUpO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgYm90dG9tOiAwO1xcbiAgICB9XFxuICB9XFxuICAmLnZlcnRpY2FsIHtcXG4gICAgY3Vyc29yOiBjb2wtcmVzaXplO1xcbiAgICAuQHtjc3MtcHJlZml4fS1yZXNpemVyLWxpbmUge1xcbiAgICAgIGJvcmRlci1yaWdodDogMnB4IGRhc2hlZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgICB0b3A6IDA7XFxuICAgICAgcmlnaHQ6IDA7XFxuICAgIH1cXG4gIH1cXG59XFxuLyogc2Nyb2xsYmFyICovXFxuLkB7Y3NzLXByZWZpeH0tc2Nyb2xsYmFyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjVmODtcXG4gIG9wYWNpdHk6IDAuOTtcXG4gIHotaW5kZXg6IDEyO1xcbiAgJi5ob3Jpem9udGFsIHtcXG4gICAgcmlnaHQ6IDE1cHg7XFxuICAgIG92ZXJmbG93LXg6IHNjcm9sbDtcXG4gICAgb3ZlcmZsb3cteTogaGlkZGVuO1xcbiAgICA+IGRpdiB7XFxuICAgICAgaGVpZ2h0OiAxcHg7XFxuICAgICAgYmFja2dyb3VuZDogI2RkZDtcXG4gICAgfVxcbiAgfVxcbiAgJi52ZXJ0aWNhbCB7XFxuICAgIGJvdHRvbTogMTVweDtcXG4gICAgb3ZlcmZsb3cteDogaGlkZGVuO1xcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XFxuICAgID4gZGl2IHtcXG4gICAgICB3aWR0aDogMXB4O1xcbiAgICAgIGJhY2tncm91bmQ6ICNkZGQ7XFxuICAgIH1cXG4gIH1cXG4gICY6aG92ZXIge1xcbiAgICAvLyBvcGFjaXR5OiAuODU7XFxuICB9XFxufVxcblxcbi8qIEB7Y3NzLXByZWZpeH0tb3ZlcmxheWVyICovXFxuLkB7Y3NzLXByZWZpeH0tb3ZlcmxheWVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxuICB6LWluZGV4OiAxMDtcXG4gIC5Ae2Nzcy1wcmVmaXh9LW92ZXJsYXllci1jb250ZW50IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tZWRpdG9yLCAuQHtjc3MtcHJlZml4fS1zZWxlY3RvciB7XFxuICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG59XFxuXFxuLyogQHtjc3MtcHJlZml4fS1zZWxlY3RvciAqL1xcbi5Ae2Nzcy1wcmVmaXh9LXNlbGVjdG9yIHtcXG4gIC5oaWRlLWlucHV0IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB6LWluZGV4OiAwO1xcbiAgICBpbnB1dCB7XFxuICAgICAgcGFkZGluZzogMDtcXG4gICAgICB3aWR0aDogMDtcXG4gICAgICBib3JkZXI6IG5vbmUhaW1wb3J0YW50O1xcbiAgICB9XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1hcmVhIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgYmFja2dyb3VuZDogcmdiYSg3NSwgMTM3LCAyNTUsIC4xKTtcXG4gICAgei1pbmRleDogNTtcXG4gIH1cXG4gIC5Ae2Nzcy1wcmVmaXh9LXNlbGVjdG9yLWNsaXBib2FyZCwgLkB7Y3NzLXByZWZpeH0tc2VsZWN0b3ItYXV0b2ZpbGwge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbiAgICB6LWluZGV4OiAxMDA7XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1jbGlwYm9hcmQge1xcbiAgICBib3JkZXI6IDJweCBkYXNoZWQgcmdiKDc1LCAxMzcsIDI1NSk7XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1zZWxlY3Rvci1hdXRvZmlsbCB7XFxuICAgIGJvcmRlcjogMXB4IGRhc2hlZCByZ2JhKDAsIDAsIDAsIC40NSk7IC8vICM2MDYwNjA7IC8vIHJnYmEoMCwgMCwgMCwgLjIpO1xcbiAgfVxcbiAgLkB7Y3NzLXByZWZpeH0tc2VsZWN0b3ItY29ybmVyIHtcXG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgY3Vyc29yOiBjcm9zc2hhaXI7XFxuICAgIGZvbnQtc2l6ZTogMDtcXG4gICAgaGVpZ2h0OiA1cHg7XFxuICAgIHdpZHRoOiA1cHg7XFxuICAgIHJpZ2h0OiAtNXB4O1xcbiAgICBib3R0b206IC01cHg7XFxuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYigyNTUsIDI1NSwgMjU1KTtcXG4gICAgYmFja2dyb3VuZDogcmdiKDc1LCAxMzcsIDI1NSk7XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWVkaXRvciB7XFxuICB6LWluZGV4OiAyMDtcXG4gIC5Ae2Nzcy1wcmVmaXh9LWVkaXRvci1hcmVhIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoNzUsIDEzNywgMjU1KTtcXG4gICAgbGluZS1oZWlnaHQ6IDA7XFxuICAgIHotaW5kZXg6IDEwMDtcXG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuXFxuICAgIHRleHRhcmVhIHtcXG4gICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcXG4gICAgICBib3JkZXI6IG5vbmU7XFxuICAgICAgcGFkZGluZzogMCAzcHg7XFxuICAgICAgb3V0bGluZTogbm9uZTtcXG4gICAgICByZXNpemU6IG5vbmU7XFxuICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7XFxuICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xcbiAgICAgIGZvbnQ6IDQwMCAxM3B4IEFyaWFsLCAnTGF0bycsICdTb3VyY2UgU2FucyBQcm8nLCBSb2JvdG8sIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcXG4gICAgICBjb2xvcjogaW5oZXJpdDtcXG4gICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xcbiAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcXG4gICAgICBsaW5lLWhlaWdodDogMjJweDtcXG4gICAgICBtYXJnaW46IDA7XFxuICAgIH1cXG5cXG4gICAgLnRleHRsaW5lIHtcXG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcXG4gICAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgICAgdG9wOiAwO1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0taXRlbSB7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIGJhY2tncm91bmQ6IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICBoZWlnaHQ6IDI2cHg7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAuOSk7XFxuICBsaW5lLWhlaWdodDogMjZweDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBwYWRkaW5nOiAycHggMTBweDtcXG4gIGN1cnNvcjogZGVmYXVsdDtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcblxcbiAgJi5kaXNhYmxlZCB7XFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbiAgICBvcGFjaXR5OiAwLjU7XFxuICB9XFxuXFxuICAmOmhvdmVyLCAmLmFjdGl2ZSB7XFxuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA1KTtcXG4gIH1cXG5cXG4gIC8vICYuYWN0aXZlIHtcXG4gICAgLy8vLyAgIGJhY2tncm91bmQ6ICM4OWFlZjUzZDtcXG4gIC8vIH1cXG5cXG4gICYuZGl2aWRlciB7XFxuICAgIGhlaWdodDogMDtcXG4gICAgcGFkZGluZzogMDtcXG4gICAgbWFyZ2luOiA1cHggMDtcXG4gICAgYm9yZGVyOiBub25lO1xcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAuMSk7XFxuICB9XFxuXFxuICAubGFiZWwge1xcbiAgICBmbG9hdDogcmlnaHQ7XFxuICAgIG9wYWNpdHk6IC42NTtcXG4gICAgZm9udC1zaXplOiAxZW07XFxuICB9XFxufVxcblxcbi54LXNwcmVhZHNoZWV0LWl0ZW0sXFxuLngtc3ByZWFkc2hlZXQtaGVhZGVyLFxcbntcXG5cXG4gICYuc3RhdGUge1xcbiAgICBwYWRkaW5nLWxlZnQ6IDM1cHghaW1wb3J0YW50O1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuXFxuICAgICY6YmVmb3JlIHtcXG4gICAgICBjb250ZW50OiAnJztcXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgICAgd2lkdGg6IDEwcHg7XFxuICAgICAgaGVpZ2h0OiAxMHB4O1xcbiAgICAgIGxlZnQ6IDEycHg7XFxuICAgICAgdG9wOiBjYWxjKDUwJSAtIDVweCk7XFxuICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA4KTtcXG4gICAgICAvLyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxuICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgICB9XFxuICB9XFxuICAmLnN0YXRlLmNoZWNrZWQ6YmVmb3JlIHtcXG4gICAgYmFja2dyb3VuZDogIzRiODlmZjtcXG4gICAgLy8gY29udGVudDogJyc7XFxuICAgIC8vIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgLy8gd2lkdGg6IDVweDtcXG4gICAgLy8gaGVpZ2h0OiAxMnB4O1xcbiAgICAvLyBjb2xvcjogIzRiODlmZjsgLy8gIzM1M0E0MTtcXG4gICAgLy8gYm9yZGVyLWxlZnQ6IG5vbmU7XFxuICAgIC8vIGJvcmRlci10b3A6IG5vbmU7XFxuICAgIC8vIGJvcmRlci1ib3R0b206IDJweCBzb2xpZDtcXG4gICAgLy8gYm9yZGVyLXJpZ2h0OiAycHggc29saWQ7XFxuICAgIC8vIGxlZnQ6IDE1cHg7XFxuICAgIC8vIHRvcDogNnB4O1xcbiAgICAvLyBiYWNrZ3JvdW5kOiBub25lO1xcbiAgICAvLyBib3JkZXItcmFkaXVzOiAwO1xcbiAgICAvLyB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXI7XFxuICAgIC8vIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXG4gICAgLy8gLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XFxuICB9XFxuXFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWNoZWNrYm94IHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcXG4gIG91dGxpbmU6IDA7XFxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxuICBmb250LXN0eWxlOiBub3JtYWw7XFxuICBmb250LXNpemU6IDFyZW07XFxuICBsaW5lLWhlaWdodDogMWVtO1xcbiAgPiBpbnB1dCB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgdG9wOiAwO1xcbiAgICBsZWZ0OiAwO1xcbiAgICBvcGFjaXR5OiAwIWltcG9ydGFudDtcXG4gICAgb3V0bGluZTogMDtcXG4gICAgei1pbmRleDogLTE7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXN1Z2dlc3QsXFxuLkB7Y3NzLXByZWZpeH0tY29udGV4dG1lbnUsXFxuLkB7Y3NzLXByZWZpeH0tc29ydC1maWx0ZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm94LXNoYWRvdzogMXB4IDJweCA1cHggMnB4IHJnYmEoNTEsIDUxLCA1MSwgMC4xNSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgei1pbmRleDogMTAwO1xcbiAgd2lkdGg6IDI2MHB4O1xcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxuICBvdmVyZmxvdzogYXV0bztcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tc3VnZ2VzdCB7XFxuICB3aWR0aDogMjAwcHg7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWZpbHRlciB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5O1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbWFyZ2luOiAxMHB4O1xcblxcbiAgLkB7Y3NzLXByZWZpeH0taGVhZGVyIHtcXG4gICAgcGFkZGluZzogLjVlbSAuNzVlbTtcXG4gICAgYmFja2dyb3VuZDogI2Y4ZjhmOTtcXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlOWU5ZTk7XFxuICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICB9XFxuICAuQHtjc3MtcHJlZml4fS1ib2R5IHtcXG4gICAgaGVpZ2h0OiAyMDBweDtcXG4gICAgb3ZlcmZsb3cteTogYXV0bztcXG5cXG4gICAgLkB7Y3NzLXByZWZpeH0taXRlbSB7XFxuICAgICAgaGVpZ2h0OiAyMHB4O1xcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xcbiAgICB9XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXNvcnQtZmlsdGVyIHtcXG4gIC5Ae2Nzcy1wcmVmaXh9LWJ1dHRvbnMge1xcbiAgICBtYXJnaW46IDEwcHg7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXIsIC5Ae2Nzcy1wcmVmaXh9LWJvdHRvbWJhciB7XFxuICBoZWlnaHQ6IDQwcHg7XFxuICBwYWRkaW5nOiAwIDMwcHg7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgYmFja2dyb3VuZDogI2Y1ZjZmNztcXG4gIGRpc3BsYXk6IGZsZXg7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWJvdHRvbWJhciB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgI2UwZTJlNDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LW1lbnUgPiBsaSB7XFxuICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xcbiAgICBoZWlnaHQ6IDQwcHg7XFxuICAgIHBhZGRpbmctdG9wOiAwO1xcbiAgICBwYWRkaW5nLWJvdHRvbTogMDtcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2U4ZWFlZDtcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tbWVudSB7XFxuICBsaXN0LXN0eWxlOiBub25lO1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbn1cXG4uQHtjc3MtcHJlZml4fS1tZW51ID4gbGkge1xcbiAgZmxvYXQ6IGxlZnQ7XFxuICBsaW5lLWhlaWdodDogMS4yNWVtO1xcbiAgcGFkZGluZzogLjc4NWVtIDFlbTtcXG4gIG1hcmdpbjogMDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgZm9udC13ZWlnaHQ6IDQwMDtcXG4gIGNvbG9yOiAjODA4NjhiO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRyYW5zaXRpb246IGFsbCAuM3M7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG5cXG4gICYuYWN0aXZlIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgLjY1KTtcXG4gIH1cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWljb24ge1xcbiAgICBtYXJnaW46IDAgNnB4O1xcblxcbiAgICAuQHtjc3MtcHJlZml4fS1pY29uLWltZyB7XFxuICAgICAgJjpob3ZlciB7XFxuICAgICAgICBvcGFjaXR5OiAuODU7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICAuQHtjc3MtcHJlZml4fS1kcm9wZG93biB7XFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tdG9vbGJhciB7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2UwZTJlNDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXItYnRucyB7XFxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xcbiAgfVxcblxcbiAgLkB7Y3NzLXByZWZpeH0tdG9vbGJhci1tb3JlIHtcXG4gICAgcGFkZGluZzogMCA2cHggNnB4O1xcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgICAuQHtjc3MtcHJlZml4fS10b29sYmFyLWRpdmlkZXIge1xcbiAgICAgIG1hcmdpbi10b3A6IDA7XFxuICAgIH1cXG4gIH1cXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LXRvb2xiYXItYnRuIHtcXG4gICAgZmxleDogMCAwIGF1dG87XFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGhlaWdodDogMjZweDtcXG4gICAgbGluZS1oZWlnaHQ6IDI2cHg7XFxuICAgIG1pbi13aWR0aDogMjZweDtcXG4gICAgbWFyZ2luOiA2cHggMXB4IDA7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xcblxcbiAgICAmLmRpc2FibGVkIHtcXG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG4gICAgICBvcGFjaXR5OiAwLjU7XFxuICAgIH1cXG5cXG4gICAgJjpob3ZlciwgJi5hY3RpdmUge1xcbiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA4KTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS10b29sYmFyLWRpdmlkZXIge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2UwZTJlNDtcXG4gIHdpZHRoOiAwO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGhlaWdodDogMThweDtcXG4gIG1hcmdpbjogMTJweCAzcHggMDtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tcHJpbnQge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG4gIHotaW5kZXg6IDEwMDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LXByaW50LWJhciB7XFxuICBiYWNrZ3JvdW5kOiAjNDI0MjQyO1xcbiAgaGVpZ2h0OiA2MHB4O1xcbiAgbGluZS1oZWlnaHQ6IDYwcHg7XFxuICBwYWRkaW5nOiAwIDMwcHg7XFxuXFxuICAuLXRpdGxlIHtcXG4gICAgY29sb3I6ICNmZmY7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICBmb250LXNpemU6IDEuMmVtO1xcbiAgICBmbG9hdDogbGVmdDtcXG4gIH1cXG5cXG4gIC4tcmlnaHQge1xcbiAgICBmbG9hdDogcmlnaHQ7XFxuICAgIG1hcmdpbi10b3A6IDEycHg7XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LXByaW50LWNvbnRlbnQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXg6IGF1dG87XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgYmFja2dyb3VuZDogI2QwZDBkMDtcXG4gIGhlaWdodDogY2FsYygxMDAlIC0gNjBweCk7XFxuXFxuICAuLXNpZGVyIHtcXG4gICAgZmxleDogMCAwIDMwMHB4O1xcbiAgICB3aWR0aDogMzAwcHg7XFxuICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgI2NjYztcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIH1cXG5cXG4gIC4tY29udGVudCB7XFxuICAgIGZsZXg6IGF1dG87XFxuICAgIG92ZXJmbG93LXg6IGF1dG87XFxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgfVxcbn1cXG5cXG5cXG4uQHtjc3MtcHJlZml4fS1jYW52YXMtY2FyZC13cmFwZXIge1xcbiAgbWFyZ2luOiA0MHB4IDIwcHg7XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWNhbnZhcy1jYXJkIHtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBtYXJnaW46IGF1dG87XFxuICBwYWdlLWJyZWFrLWJlZm9yZTogYXV0bztcXG4gIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cztcXG4gIGJveC1zaGFkb3c6IDAgOHB4IDEwcHggMXB4IHJnYmEoMCwwLDAsMC4xNCksIDAgM3B4IDE0cHggM3B4IHJnYmEoMCwwLDAsMC4xMiksIDAgNHB4IDVweCAwIHJnYmEoMCwwLDAsMC4yMCk7XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWNhbGVuZGFyIHtcXG4gIGNvbG9yOiByZ2JhKDAsMCwwLC42NSk7XFxuICBiYWNrZ3JvdW5kOiAjZmZmZmZmO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuXFxuICAuY2FsZW5kYXItaGVhZGVyIHtcXG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gICAgbGluZS1oZWlnaHQ6IDMwcHg7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGZsb2F0OiBsZWZ0O1xcbiAgICBiYWNrZ3JvdW5kOiAjZjlmYWZiO1xcblxcbiAgICAuY2FsZW5kYXItaGVhZGVyLWxlZnQge1xcbiAgICAgIHBhZGRpbmctbGVmdDogNXB4O1xcbiAgICAgIGZsb2F0OiBsZWZ0O1xcbiAgICB9XFxuXFxuICAgIC5jYWxlbmRhci1oZWFkZXItcmlnaHQge1xcbiAgICAgIGZsb2F0OiByaWdodDtcXG5cXG4gICAgICBhIHtcXG4gICAgICAgIHBhZGRpbmc6IDNweCAwO1xcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XFxuICAgICAgfVxcbiAgICAgIGE6aG92ZXIge1xcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDgpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgLmNhbGVuZGFyLWJvZHkge1xcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbiAgICBib3JkZXItc3BhY2luZzogMDtcXG5cXG4gICAgdGgsIHRkIHtcXG4gICAgICB3aWR0aDogMTAwJS83O1xcbiAgICAgIG1pbi13aWR0aDogMzJweDtcXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gICAgICBsaW5lLWhlaWdodDogMzBweDtcXG4gICAgICBwYWRkaW5nOiAwO1xcbiAgICB9XFxuXFxuICAgIHRkID4gLmNlbGwge1xcbiAgICAgIC8vIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjA1KTtcXG5cXG4gICAgICAmOmhvdmVyIHtcXG4gICAgICAgIGJhY2tncm91bmQ6ICNlY2Y2ZmQ7XFxuICAgICAgfVxcblxcbiAgICAgICYuYWN0aXZlLCAmLmFjdGl2ZTpob3ZlciB7XFxuICAgICAgICBiYWNrZ3JvdW5kOiAjZWNmNmZkO1xcbiAgICAgICAgY29sb3I6ICMyMTg1RDA7XFxuICAgICAgfVxcblxcbiAgICAgICYuZGlzYWJsZWQge1xcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICAgICAgICBvcGFjaXR5OiAwLjU7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWRhdGVwaWNrZXIge1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCA1cHggcmdiYSgwLDAsMCwuMik7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiBjYWxjKDEwMCUgKyA1cHgpO1xcbiAgei1pbmRleDogMTA7XFxuICB3aWR0aDogYXV0bztcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tYnV0dG9ucyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWJ1dHRvbiB7XFxuICAgIG1hcmdpbi1sZWZ0OiA4cHg7XFxuICB9XFxufVxcbi5Ae2Nzcy1wcmVmaXh9LWJ1dHRvbiB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBib3JkZXItcmFkaXVzOiAzcHg7XFxuICBsaW5lLWhlaWdodDogMWVtO1xcbiAgbWluLWhlaWdodDogMWVtO1xcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGZvbnQtc2l6ZTogMWVtO1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIHBhZGRpbmc6IC43NWVtIDFlbTtcXG4gIGNvbG9yOiByZ2JhKDAsMCwwLC42KTtcXG4gIGJhY2tncm91bmQ6ICNFMEUxRTI7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICBmb250LWZhbWlseTogXFxcIkxhdG9cXFwiLFxcXCJwcm94aW1hLW5vdmFcXFwiLFxcXCJIZWx2ZXRpY2EgTmV1ZVxcXCIsQXJpYWwsc2Fucy1zZXJpZjtcXG4gIC8vYm94LXNoYWRvdzogMHB4IDFweCAycHggLTFweCByZ2JhKDI1NSwyNTUsMjU1LDAuNSkgaW5zZXQsIDBweCAtMnB4IDBweCAwcHggcmdiYSgwLDAsMCwwLjEpIGluc2V0O1xcbiAgLy9ib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMCwwLDAsLjUpIGluc2V0O1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG4gIHpvb206IDE7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjFzIGxpbmVhcjtcXG5cXG4gICYuYWN0aXZlLCAmOmhvdmVyIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0MwQzFDMjtcXG4gICAgY29sb3I6IHJnYmEoMCwwLDAsLjgpO1xcbiAgfVxcblxcbiAgJi5wcmltYXJ5IHtcXG4gICAgLnR5cGUtcHJpbWFyeTtcXG4gIH1cXG59XFxuXFxuLy8gZm9ybSBiZWdpblxcbi5Ae2Nzcy1wcmVmaXh9LWZvcm0taW5wdXQge1xcbiAgZm9udC1zaXplOiAxZW07XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XFxuICBjb2xvcjogcmdiYSgwLDAsMCwuODcpO1xcblxcbiAgaW5wdXQge1xcbiAgICB6LWluZGV4OiAxO1xcbiAgICBtYXJnaW46IDA7XFxuICAgIG1heC13aWR0aDogMTAwJTtcXG4gICAgZmxleDogMSAwIGF1dG87XFxuICAgIG91dGxpbmU6IDA7XFxuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwKTtcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXG4gICAgbGluZS1oZWlnaHQ6IEBmb3JtLWZpZWxkLWhlaWdodDtcXG4gICAgaGVpZ2h0OiBAZm9ybS1maWVsZC1oZWlnaHQ7XFxuICAgIHBhZGRpbmc6IDAgOHB4O1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5O1xcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxuICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjFzIGVhc2UsYm9yZGVyLWNvbG9yIC4xcyBlYXNlO1xcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggaHNsYSgwLDAlLDQlLC4wNik7XFxuXFxuICAgICY6Zm9jdXMge1xcbiAgICAgIGJvcmRlci1jb2xvcjogcmdiKDc1LCAxMzcsIDI1NSk7XFxuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoNzUsIDEzNywgMjU1LCAuMik7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tZm9ybS1zZWxlY3Qge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG4gIGJvcmRlcjogQGlucHV0LWJvcmRlcjtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGNvbG9yOiByZ2JhKDAsMCwwLC44Nyk7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDJweCBoc2xhKDAsMCUsNCUsLjA2KTtcXG5cXG4gIC5pbnB1dC10ZXh0IHtcXG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICAgIG1pbi13aWR0aDogNjBweDtcXG4gICAgd2lkdGg6IGF1dG87XFxuICAgIGhlaWdodDogQGZvcm0tZmllbGQtaGVpZ2h0O1xcbiAgICBsaW5lLWhlaWdodDogQGZvcm0tZmllbGQtaGVpZ2h0O1xcbiAgICBwYWRkaW5nOiAwIDhweDtcXG4gIH1cXG59XFxuLkB7Y3NzLXByZWZpeH0tZm9ybS1maWVsZHMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuXFxuICAuQHtjc3MtcHJlZml4fS1mb3JtLWZpZWxkIHtcXG4gICAgZmxleDogMCAxIGF1dG87XFxuICAgIC5sYWJlbCB7XFxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICAgIG1hcmdpbjogMCAxMHB4IDAgMDtcXG4gICAgfVxcbiAgfVxcbn1cXG4uQHtjc3MtcHJlZml4fS1mb3JtLWZpZWxkIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcXG5cXG4gICY6Zmlyc3QtY2hpbGQge1xcbiAgICBtYXJnaW4tbGVmdDogMDtcXG4gIH1cXG5cXG4gICYuZXJyb3Ige1xcbiAgICAuQHtjc3MtcHJlZml4fS1mb3JtLXNlbGVjdCwgaW5wdXQge1xcbiAgICAgIGJvcmRlci1jb2xvcjogI2YwNDEzNDtcXG4gICAgfVxcbiAgfVxcblxcbiAgLnRpcCB7XFxuICAgIGNvbG9yOiAjZjA0MTM0O1xcbiAgICBmb250LXNpemU6IC45ZW07XFxuICB9XFxufVxcbi8vIGZvcm0gZW5kXFxuLkB7Y3NzLXByZWZpeH0tZGltbWVyIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDAgIWltcG9ydGFudDtcXG4gIGxlZnQ6IDAgIWltcG9ydGFudDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcXG4gIG9wYWNpdHk6IDA7XFxuICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7XFxuICBhbmltYXRpb24tZmlsbC1tb2RlOiBib3RoO1xcbiAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDAuNXM7XFxuICBhbmltYXRpb24tZHVyYXRpb246IDAuNXM7XFxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuNXMgbGluZWFyO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB6LWluZGV4OiAxMDAwO1xcblxcbiAgJi5hY3RpdmUge1xcbiAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgb3BhY2l0eTogMTtcXG4gIH1cXG59XFxuXFxuZm9ybSBmaWVsZHNldCB7XFxuICBib3JkZXI6IG5vbmU7XFxuXFxuICBsYWJlbCB7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBtYXJnaW4tYm90dG9tOiAuNWVtO1xcbiAgICBmb250LXNpemU6IDFlbTtcXG4gICAgY29sb3I6ICM2NjY7XFxuICB9XFxuXFxuICBzZWxlY3Qge1xcbiAgICBmb250LXNpemU6IDEuMWVtO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gICAgYm9yZGVyOiBub25lO1xcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2RkZDtcXG4gICAgcGFkZGluZzogLjVlbSAuODVlbTtcXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgfVxcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1tb2RhbCwgLkB7Y3NzLXByZWZpeH0tdG9hc3Qge1xcbiAgZm9udC1zaXplOiAxM3B4O1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgei1pbmRleDogMTAwMTtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxuICBsaW5lLWhlaWdodDogQGxpbmUtaGVpZ2h0O1xcbiAgbWluLXdpZHRoOiAzNjBweDtcXG4gIGNvbG9yOiByZ2JhKDAsMCwwLC44Nyk7XFxuICBmb250LWZhbWlseTogJ0xhdG8nLCAnU291cmNlIFNhbnMgUHJvJywgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwuMSk7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4yKSAwcHggMnB4IDhweDtcXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tdG9hc3Qge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwuODUpO1xcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1tb2RhbC1oZWFkZXIsIC5Ae2Nzcy1wcmVmaXh9LXRvYXN0LWhlYWRlciB7XFxuICBmb250LXdlaWdodDogNjAwO1xcbiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsLjg1KTtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNSk7XFxuICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWljb24ge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHJpZ2h0OiAuOGVtO1xcbiAgICB0b3A6IC42NWVtO1xcbiAgICBib3JkZXItcmFkaXVzOiAxOHB4O1xcblxcbiAgICAmOmhvdmVyIHtcXG4gICAgICBvcGFjaXR5OiAxO1xcbiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wOCk7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuLkB7Y3NzLXByZWZpeH0tdG9hc3QtaGVhZGVyIHtcXG4gIGNvbG9yOiBAb3JhbmdlLWNvbG9yO1xcbn1cXG5cXG4uQHtjc3MtcHJlZml4fS1tb2RhbC1oZWFkZXIge1xcbiAgYm9yZGVyLWJvdHRvbTogQGJvcmRlci1zdHlsZTtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA4KTtcXG4gIGZvbnQtc2l6ZTogMS4wNzg1ZW07XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LW1vZGFsLWhlYWRlcixcXG4uQHtjc3MtcHJlZml4fS1tb2RhbC1jb250ZW50LFxcbi5Ae2Nzcy1wcmVmaXh9LXRvYXN0LWhlYWRlcixcXG4uQHtjc3MtcHJlZml4fS10b2FzdC1jb250ZW50IHtcXG4gIHBhZGRpbmc6IC43NWVtIDFlbTtcXG59XFxuXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzIwcHgpIGFuZCAobWF4LXdpZHRoOiA0ODBweCkge1xcbiAgLkB7Y3NzLXByZWZpeH0tdG9vbGJhciB7XFxuICAgIGRpc3BsYXk6IG5vbmU7XFxuICB9XFxufVxcblxcbi5Ae2Nzcy1wcmVmaXh9LWljb24ge1xcbiAgd2lkdGg6IDE4cHg7XFxuICBoZWlnaHQ6IDE4cHg7XFxuICBtYXJnaW46IDFweCAxcHggMnB4IDFweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBsaW5lLWhlaWdodDogMDtcXG5cXG4gIC5Ae2Nzcy1wcmVmaXh9LWljb24taW1nIHtcXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9hc3NldHMvc3ByaXRlLnN2ZycpO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHdpZHRoOiAyNjJweDtcXG4gICAgaGVpZ2h0OiA0NDRweDtcXG4gICAgb3BhY2l0eTogMC41NjtcXG5cXG4gICAgJi51bmRvIHtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLnJlZG8ge1xcbiAgICAgIGxlZnQ6IC0xICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5wcmludCB7XFxuICAgICAgbGVmdDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLnBhaW50Zm9ybWF0IHtcXG4gICAgICBsZWZ0OiAtMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuY2xlYXJmb3JtYXQge1xcbiAgICAgIGxlZnQ6IC00ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5mb250LWJvbGQge1xcbiAgICAgIGxlZnQ6IC01ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5mb250LWl0YWxpYyB7XFxuICAgICAgbGVmdDogLTYgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLnVuZGVybGluZSB7XFxuICAgICAgbGVmdDogLTcgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLnN0cmlrZSB7XFxuICAgICAgbGVmdDogLTggKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLmNvbG9yIHtcXG4gICAgICBsZWZ0OiAtOSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAwO1xcbiAgICB9XFxuICAgICYuYmdjb2xvciB7XFxuICAgICAgbGVmdDogLTEwICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5tZXJnZSB7XFxuICAgICAgbGVmdDogLTExICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5hbGlnbi1sZWZ0IHtcXG4gICAgICBsZWZ0OiAtMTIgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogMDtcXG4gICAgfVxcbiAgICAmLmFsaWduLWNlbnRlciB7XFxuICAgICAgbGVmdDogLTEzICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IDA7XFxuICAgIH1cXG4gICAgJi5hbGlnbi1yaWdodCB7XFxuICAgICAgbGVmdDogMDtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmFsaWduLXRvcCB7XFxuICAgICAgbGVmdDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYWxpZ24tbWlkZGxlIHtcXG4gICAgICBsZWZ0OiAtMiAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hbGlnbi1ib3R0b20ge1xcbiAgICAgIGxlZnQ6IC0zICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLnRleHR3cmFwIHtcXG4gICAgICBsZWZ0OiAtNCAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hdXRvZmlsdGVyIHtcXG4gICAgICBsZWZ0OiAtNSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5mb3JtdWxhIHtcXG4gICAgICBsZWZ0OiAtNiAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hcnJvdy1kb3duIHtcXG4gICAgICBsZWZ0OiAtNyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5hcnJvdy1yaWdodCB7XFxuICAgICAgbGVmdDogLTggKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYubGluayB7XFxuICAgICAgbGVmdDogLTkgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTEgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuY2hhcnQge1xcbiAgICAgIGxlZnQ6IC0xMCAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5mcmVlemUge1xcbiAgICAgIGxlZnQ6IC0xMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMSAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5lbGxpcHNpcyB7XFxuICAgICAgbGVmdDogLTEyICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmFkZCB7XFxuICAgICAgbGVmdDogLTEzICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0xICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci1hbGwge1xcbiAgICAgIGxlZnQ6IDA7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItaW5zaWRlIHtcXG4gICAgICBsZWZ0OiAtMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItaG9yaXpvbnRhbCB7XFxuICAgICAgbGVmdDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLXZlcnRpY2FsIHtcXG4gICAgICBsZWZ0OiAtMyAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5ib3JkZXItb3V0c2lkZSB7XFxuICAgICAgbGVmdDogLTQgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLWxlZnQge1xcbiAgICAgIGxlZnQ6IC01ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci10b3Age1xcbiAgICAgIGxlZnQ6IC02ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmJvcmRlci1yaWdodCB7XFxuICAgICAgbGVmdDogLTcgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLWJvdHRvbSB7XFxuICAgICAgbGVmdDogLTggKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuYm9yZGVyLW5vbmUge1xcbiAgICAgIGxlZnQ6IC05ICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmxpbmUtY29sb3Ige1xcbiAgICAgIGxlZnQ6IC0xMCAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5saW5lLXR5cGUge1xcbiAgICAgIGxlZnQ6IC0xMSAqIEBpY29uLXNpemU7XFxuICAgICAgdG9wOiAtMiAqIEBpY29uLXNpemU7XFxuICAgIH1cXG4gICAgJi5jbG9zZSB7XFxuICAgICAgbGVmdDogLTEzICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0yICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmNoZXZyb24tZG93biB7XFxuICAgICAgbGVmdDogMDtcXG4gICAgICB0b3A6IC0zICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmNoZXZyb24tdXAge1xcbiAgICAgIGxlZnQ6IC0xICogQGljb24tc2l6ZTtcXG4gICAgICB0b3A6IC0zICogQGljb24tc2l6ZTtcXG4gICAgfVxcbiAgICAmLmNoZXZyb24tbGVmdCB7XFxuICAgICAgbGVmdDogLTIgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTMgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICAgICYuY2hldnJvbi1yaWdodCB7XFxuICAgICAgbGVmdDogLTMgKiBAaWNvbi1zaXplO1xcbiAgICAgIHRvcDogLTMgKiBAaWNvbi1zaXplO1xcbiAgICB9XFxuICB9XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cblxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuXG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB1cmwgPSBTdHJpbmcodXJsLl9fZXNNb2R1bGUgPyB1cmwuZGVmYXVsdCA6IHVybCk7IC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuXG4gIGlmICgvXlsnXCJdLipbJ1wiXSQvLnRlc3QodXJsKSkge1xuICAgIHVybCA9IHVybC5zbGljZSgxLCAtMSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgdXJsICs9IG9wdGlvbnMuaGFzaDtcbiAgfSAvLyBTaG91bGQgdXJsIGJlIHdyYXBwZWQ/XG4gIC8vIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXZhbHVlcy0zLyN1cmxzXG5cblxuICBpZiAoL1tcIicoKSBcXHRcXG5dfCglMjApLy50ZXN0KHVybCkgfHwgb3B0aW9ucy5uZWVkUXVvdGVzKSB7XG4gICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdCh1cmwucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpLCBcIlxcXCJcIik7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8IFwiXCIpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL2xlc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXgubGVzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9sZXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4Lmxlc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcblxuICB2YXIgdXBkYXRlciA9IGZ1bmN0aW9uIHVwZGF0ZXIobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCAmJiBuZXdPYmouc3VwcG9ydHMgPT09IG9iai5zdXBwb3J0cyAmJiBuZXdPYmoubGF5ZXIgPT09IG9iai5sYXllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gdXBkYXRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cblxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcblxuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cblxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gIG9wdGlvbnMuc2V0QXR0cmlidXRlcyhlbGVtZW50LCBvcHRpb25zLmF0dHJpYnV0ZXMpO1xuICBvcHRpb25zLmluc2VydChlbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlczsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gXCJcIjtcblxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuXG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuXG4gIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2Ygb2JqLmxheWVyICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cblxuICBjc3MgKz0gb2JqLmNzcztcblxuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIG9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG5mdW5jdGlvbiBkb21BUEkob3B0aW9ucykge1xuICB2YXIgc3R5bGVFbGVtZW50ID0gb3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2JqKSB7XG4gICAgICBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3R5bGVUYWdUcmFuc2Zvcm07IiwiLyogZ2xvYmFsIHdpbmRvdyAqL1xyXG5mdW5jdGlvbiBkcHIoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcclxufVxyXG5mdW5jdGlvbiB0aGluTGluZVdpZHRoKCkge1xyXG4gICAgcmV0dXJuIGRwcigpIC0gMC41O1xyXG59XHJcbmZ1bmN0aW9uIG5weChweCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IocHggKiBkcHIoKSk7XHJcbn1cclxuZnVuY3Rpb24gbnB4TGluZShweCkge1xyXG4gICAgY29uc3QgbiA9IG5weChweCk7XHJcbiAgICByZXR1cm4gbiA+IDAgPyBuIC0gMC41IDogMC41O1xyXG59XHJcbmNsYXNzIERyYXdCb3gge1xyXG4gICAgeDtcclxuICAgIHk7XHJcbiAgICB3aWR0aDtcclxuICAgIGhlaWdodDtcclxuICAgIHBhZGRpbmc7XHJcbiAgICBiZ2NvbG9yO1xyXG4gICAgYm9yZGVyVG9wO1xyXG4gICAgYm9yZGVyUmlnaHQ7XHJcbiAgICBib3JkZXJCb3R0b207XHJcbiAgICBib3JkZXJMZWZ0O1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSwgdywgaCwgcGFkZGluZyA9IDApIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHc7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoO1xyXG4gICAgICAgIHRoaXMucGFkZGluZyA9IHBhZGRpbmc7XHJcbiAgICAgICAgdGhpcy5iZ2NvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIC8vIGJvcmRlcjogW3dpZHRoLCBzdHlsZSwgY29sb3JdXHJcbiAgICAgICAgdGhpcy5ib3JkZXJUb3AgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYm9yZGVyUmlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYm9yZGVyQm90dG9tID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvcmRlckxlZnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0Qm9yZGVycyh7IHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCB9KSB7XHJcbiAgICAgICAgaWYgKHRvcClcclxuICAgICAgICAgICAgdGhpcy5ib3JkZXJUb3AgPSB0b3A7XHJcbiAgICAgICAgaWYgKHJpZ2h0KVxyXG4gICAgICAgICAgICB0aGlzLmJvcmRlclJpZ2h0ID0gcmlnaHQ7XHJcbiAgICAgICAgaWYgKGJvdHRvbSlcclxuICAgICAgICAgICAgdGhpcy5ib3JkZXJCb3R0b20gPSBib3R0b207XHJcbiAgICAgICAgaWYgKGxlZnQpXHJcbiAgICAgICAgICAgIHRoaXMuYm9yZGVyTGVmdCA9IGxlZnQ7XHJcbiAgICB9XHJcbiAgICBpbm5lcldpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoIC0gdGhpcy5wYWRkaW5nICogMiAtIDI7XHJcbiAgICB9XHJcbiAgICBpbm5lckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQgLSB0aGlzLnBhZGRpbmcgKiAyIC0gMjtcclxuICAgIH1cclxuICAgIHRleHR4KGFsaWduKSB7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgcGFkZGluZyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgeyB4IH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhbGlnbiA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIHggKz0gcGFkZGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7XHJcbiAgICAgICAgICAgIHggKz0gd2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhbGlnbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICB4ICs9IHdpZHRoIC0gcGFkZGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHg7XHJcbiAgICB9XHJcbiAgICB0ZXh0eShhbGlnbiwgaCkge1xyXG4gICAgICAgIGNvbnN0IHsgaGVpZ2h0LCBwYWRkaW5nIH0gPSB0aGlzO1xyXG4gICAgICAgIGxldCB7IHkgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGFsaWduID09PSAndG9wJykge1xyXG4gICAgICAgICAgICB5ICs9IHBhZGRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFsaWduID09PSAnbWlkZGxlJykge1xyXG4gICAgICAgICAgICB5ICs9IGhlaWdodCAvIDIgLSBoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWxpZ24gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgIHkgKz0gaGVpZ2h0IC0gcGFkZGluZyAtIGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB5O1xyXG4gICAgfVxyXG4gICAgdG9weHlzKCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGggfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgW3gsIHldLFxyXG4gICAgICAgICAgICBbeCArIHdpZHRoLCB5XSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgcmlnaHR4eXMoKSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIFt4ICsgd2lkdGgsIHldLFxyXG4gICAgICAgICAgICBbeCArIHdpZHRoLCB5ICsgaGVpZ2h0XSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgYm90dG9teHlzKCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbeCwgeSArIGhlaWdodF0sXHJcbiAgICAgICAgICAgIFt4ICsgd2lkdGgsIHkgKyBoZWlnaHRdLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICBsZWZ0eHlzKCkge1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgaGVpZ2h0IH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIFt4LCB5XSxcclxuICAgICAgICAgICAgW3gsIHkgKyBoZWlnaHRdLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZHJhd0ZvbnRMaW5lKHR5cGUsIHR4LCB0eSwgYWxpZ24sIHZhbGlnbiwgYmxoZWlnaHQsIGJsd2lkdGgpIHtcclxuICAgIGNvbnN0IGZsb2Zmc2V0ID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBpZiAodHlwZSA9PT0gJ3VuZGVybGluZScpIHtcclxuICAgICAgICBpZiAodmFsaWduID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICBmbG9mZnNldC55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsaWduID09PSAndG9wJykge1xyXG4gICAgICAgICAgICBmbG9mZnNldC55ID0gLShibGhlaWdodCArIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmxvZmZzZXQueSA9IC1ibGhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmlrZScpIHtcclxuICAgICAgICBpZiAodmFsaWduID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICBmbG9mZnNldC55ID0gYmxoZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWxpZ24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICAgIGZsb2Zmc2V0LnkgPSAtKGJsaGVpZ2h0IC8gMiArIDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChhbGlnbiA9PT0gJ2NlbnRlcicpIHtcclxuICAgICAgICBmbG9mZnNldC54ID0gYmx3aWR0aCAvIDI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhbGlnbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGZsb2Zmc2V0LnggPSBibHdpZHRoO1xyXG4gICAgfVxyXG4gICAgdGhpcy5saW5lKFt0eCAtIGZsb2Zmc2V0LngsIHR5IC0gZmxvZmZzZXQueV0sIFt0eCAtIGZsb2Zmc2V0LnggKyBibHdpZHRoLCB0eSAtIGZsb2Zmc2V0LnldKTtcclxufVxyXG5jbGFzcyBEcmF3IHtcclxuICAgIGVsO1xyXG4gICAgY3R4O1xyXG4gICAgY29uc3RydWN0b3IoZWwsIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICB0aGlzLmVsID0gZWw7XHJcbiAgICAgICAgdGhpcy5jdHggPSBlbC5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHRoaXMucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuY3R4LnNjYWxlKGRwcigpLCBkcHIoKSk7XHJcbiAgICB9XHJcbiAgICByZXNpemUod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkcHI6JywgZHByKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcclxuICAgICAgICB0aGlzLmVsLndpZHRoID0gbnB4KHdpZHRoKTtcclxuICAgICAgICB0aGlzLmVsLmhlaWdodCA9IG5weChoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmVsO1xyXG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGF0dHIob3B0aW9ucykge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jdHgsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2F2ZSgpIHtcclxuICAgICAgICB0aGlzLmN0eC5zYXZlKCk7XHJcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZXN0b3JlKCkge1xyXG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGJlZ2luUGF0aCgpIHtcclxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHRyYW5zbGF0ZSh4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKG5weCh4KSwgbnB4KHkpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNjYWxlKHgsIHkpIHtcclxuICAgICAgICB0aGlzLmN0eC5zY2FsZSh4LCB5KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNsZWFyUmVjdCh4LCB5LCB3LCBoKSB7XHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZmlsbFJlY3QoeCwgeSwgdywgaCkge1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KG5weCh4KSAtIDAuNSwgbnB4KHkpIC0gMC41LCBucHgodyksIG5weChoKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBmaWxsVGV4dCh0ZXh0LCB4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQodGV4dCwgbnB4KHgpLCBucHgoeSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAgdHh0OiByZW5kZXIgdGV4dFxyXG4gICAgICBib3g6IERyYXdCb3hcclxuICAgICAgYXR0cjoge1xyXG4gICAgICAgIGFsaWduOiBsZWZ0IHwgY2VudGVyIHwgcmlnaHRcclxuICAgICAgICB2YWxpZ246IHRvcCB8IG1pZGRsZSB8IGJvdHRvbVxyXG4gICAgICAgIGNvbG9yOiAnIzMzMzMzMycsXHJcbiAgICAgICAgc3RyaWtlOiBmYWxzZSxcclxuICAgICAgICBmb250OiB7XHJcbiAgICAgICAgICBuYW1lOiAnQXJpYWwnLFxyXG4gICAgICAgICAgc2l6ZTogMTQsXHJcbiAgICAgICAgICBib2xkOiBmYWxzZSxcclxuICAgICAgICAgIGl0YWxpYzogZmFsc2UsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRleHRXcmFwOiB0ZXh0IHdyYXBwaW5nXHJcbiAgICAqL1xyXG4gICAgdGV4dChtdHh0LCBib3gsIGF0dHIgPSB7fSwgdGV4dFdyYXAgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyBhbGlnbiwgdmFsaWduLCBmb250LCBjb2xvciwgc3RyaWtlLCB1bmRlcmxpbmUgfSA9IGF0dHI7XHJcbiAgICAgICAgY29uc3QgdHggPSBib3gudGV4dHgoYWxpZ24pO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuYXR0cih7XHJcbiAgICAgICAgICAgIHRleHRBbGlnbjogYWxpZ24sXHJcbiAgICAgICAgICAgIHRleHRCYXNlbGluZTogdmFsaWduLFxyXG4gICAgICAgICAgICBmb250OiBgJHtmb250Lml0YWxpYyA/ICdpdGFsaWMnIDogJyd9ICR7Zm9udC5ib2xkID8gJ2JvbGQnIDogJyd9ICR7bnB4KGZvbnQuc2l6ZSl9cHggJHtmb250Lm5hbWV9YCxcclxuICAgICAgICAgICAgZmlsbFN0eWxlOiBjb2xvcixcclxuICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IGNvbG9yLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHR4dHMgPSBgJHttdHh0fWAuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGNvbnN0IGJpdyA9IGJveC5pbm5lcldpZHRoKCk7XHJcbiAgICAgICAgY29uc3QgbnR4dHMgPSBbXTtcclxuICAgICAgICB0eHRzLmZvckVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR4dFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KGl0KS53aWR0aDtcclxuICAgICAgICAgICAgaWYgKHRleHRXcmFwICYmIHR4dFdpZHRoID4gbnB4KGJpdykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0TGluZSA9IHsgdzogMCwgbGVuOiAwLCBzdGFydDogMCB9O1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdC5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0TGluZS53ID49IG5weChiaXcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG50eHRzLnB1c2goaXQuc3Vic3RyKHRleHRMaW5lLnN0YXJ0LCB0ZXh0TGluZS5sZW4pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmUgPSB7IHc6IDAsIGxlbjogMCwgc3RhcnQ6IGkgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dExpbmUubGVuICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dExpbmUudyArPSBjdHgubWVhc3VyZVRleHQoaXRbaV0pLndpZHRoICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0TGluZS5sZW4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnR4dHMucHVzaChpdC5zdWJzdHIodGV4dExpbmUuc3RhcnQsIHRleHRMaW5lLmxlbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnR4dHMucHVzaChpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB0eHRIZWlnaHQgPSAobnR4dHMubGVuZ3RoIC0gMSkgKiAoZm9udC5zaXplICsgMik7XHJcbiAgICAgICAgbGV0IHR5ID0gYm94LnRleHR5KHZhbGlnbiwgdHh0SGVpZ2h0KTtcclxuICAgICAgICBudHh0cy5mb3JFYWNoKCh0eHQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdHh0V2lkdGggPSBjdHgubWVhc3VyZVRleHQodHh0KS53aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5maWxsVGV4dCh0eHQsIHR4LCB0eSk7XHJcbiAgICAgICAgICAgIGlmIChzdHJpa2UpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdGb250TGluZS5jYWxsKHRoaXMsICdzdHJpa2UnLCB0eCwgdHksIGFsaWduLCB2YWxpZ24sIGZvbnQuc2l6ZSwgdHh0V2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh1bmRlcmxpbmUpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdGb250TGluZS5jYWxsKHRoaXMsICd1bmRlcmxpbmUnLCB0eCwgdHksIGFsaWduLCB2YWxpZ24sIGZvbnQuc2l6ZSwgdHh0V2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHR5ICs9IGZvbnQuc2l6ZSArIDI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGJvcmRlcihzdHlsZSwgY29sb3IpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcztcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gdGhpbkxpbmVXaWR0aDtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc3R5bGU6Jywgc3R5bGUpO1xyXG4gICAgICAgIGlmIChzdHlsZSA9PT0gJ21lZGl1bScpIHtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG5weCgyKSAtIDAuNTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3R5bGUgPT09ICd0aGljaycpIHtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG5weCgzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3R5bGUgPT09ICdkYXNoZWQnKSB7XHJcbiAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChbbnB4KDMpLCBucHgoMildKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3R5bGUgPT09ICdkb3R0ZWQnKSB7XHJcbiAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChbbnB4KDEpLCBucHgoMSldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3R5bGUgPT09ICdkb3VibGUnKSB7XHJcbiAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChbbnB4KDIpLCAwXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbGluZSguLi54eXMpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcztcclxuICAgICAgICBpZiAoeHlzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjb25zdCBbeCwgeV0gPSB4eXNbMF07XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8obnB4TGluZSh4KSwgbnB4TGluZSh5KSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgeHlzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbeDEsIHkxXSA9IHh5c1tpXTtcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obnB4TGluZSh4MSksIG5weExpbmUoeTEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gc3Ryb2tlQm9yZGVycyhib3gpIHtcclxuICAgIC8vICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAvLyAgIGN0eC5zYXZlKCk7XHJcbiAgICAvLyAgIC8vIGJvcmRlclxyXG4gICAgLy8gICBjb25zdCB7XHJcbiAgICAvLyAgICAgYm9yZGVyVG9wLCBib3JkZXJSaWdodCwgYm9yZGVyQm90dG9tLCBib3JkZXJMZWZ0LFxyXG4gICAgLy8gICB9ID0gYm94O1xyXG4gICAgLy8gICBpZiAoYm9yZGVyVG9wKSB7XHJcbiAgICAvLyAgICAgdGhpcy5ib3JkZXIoLi4uYm9yZGVyVG9wKTtcclxuICAgIC8vICAgICAvLyBjb25zb2xlLmxvZygnYm94LnRvcHh5czonLCBib3gudG9weHlzKCkpO1xyXG4gICAgLy8gICAgIHRoaXMubGluZSguLi5ib3gudG9weHlzKCkpO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChib3JkZXJSaWdodCkge1xyXG4gICAgLy8gICAgIHRoaXMuYm9yZGVyKC4uLmJvcmRlclJpZ2h0KTtcclxuICAgIC8vICAgICB0aGlzLmxpbmUoLi4uYm94LnJpZ2h0eHlzKCkpO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChib3JkZXJCb3R0b20pIHtcclxuICAgIC8vICAgICB0aGlzLmJvcmRlciguLi5ib3JkZXJCb3R0b20pO1xyXG4gICAgLy8gICAgIHRoaXMubGluZSguLi5ib3guYm90dG9teHlzKCkpO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChib3JkZXJMZWZ0KSB7XHJcbiAgICAvLyAgICAgdGhpcy5ib3JkZXIoLi4uYm9yZGVyTGVmdCk7XHJcbiAgICAvLyAgICAgdGhpcy5saW5lKC4uLmJveC5sZWZ0eHlzKCkpO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAvLyB9XHJcbiAgICBkcm9wZG93bihib3gpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IGJveDtcclxuICAgICAgICBjb25zdCBzeCA9IHggKyB3aWR0aCAtIDE1O1xyXG4gICAgICAgIGNvbnN0IHN5ID0geSArIGhlaWdodCAtIDE1O1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8obnB4KHN4KSwgbnB4KHN5KSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhucHgoc3ggKyA4KSwgbnB4KHN5KSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhucHgoc3ggKyA0KSwgbnB4KHN5ICsgNikpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgLjQ1KSc7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoYm94KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCB9ID0gYm94O1xyXG4gICAgICAgIGNvbnN0IHN4ID0geCArIHdpZHRoIC0gMTtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubW92ZVRvKG5weChzeCAtIDgpLCBucHgoeSAtIDEpKTtcclxuICAgICAgICBjdHgubGluZVRvKG5weChzeCksIG5weCh5IC0gMSkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obnB4KHN4KSwgbnB4KHkgKyA4KSk7XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDAsIDAsIC42NSknO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgIH1cclxuICAgIGZyb3plbihib3gpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoIH0gPSBib3g7XHJcbiAgICAgICAgY29uc3Qgc3ggPSB4ICsgd2lkdGggLSAxO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8obnB4KHN4IC0gOCksIG5weCh5IC0gMSkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obnB4KHN4KSwgbnB4KHkgLSAxKSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhucHgoc3gpLCBucHgoeSArIDgpKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDI1NSwgMCwgLjg1KSc7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG4gICAgcmVjdChib3gsIGR0ZXh0Y2IpIHtcclxuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQsIGJnY29sb3IgfSA9IGJveDtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gYmdjb2xvciB8fCAnI2ZmZic7XHJcbiAgICAgICAgY3R4LnJlY3QobnB4TGluZSh4ICsgMSksIG5weExpbmUoeSArIDEpLCBucHgod2lkdGggLSAyKSwgbnB4KGhlaWdodCAtIDIpKTtcclxuICAgICAgICBjdHguY2xpcCgpO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgZHRleHRjYigpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbmV4cG9ydCB7IERyYXcsIERyYXdCb3gsIHRoaW5MaW5lV2lkdGgsIG5weCB9O1xyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IERyb3Bkb3duQ29sb3IgZnJvbSAnLi9kcm9wZG93bl9jb2xvcic7XHJcbmltcG9ydCBEcm9wZG93bkxpbmVUeXBlIGZyb20gJy4vZHJvcGRvd25fbGluZXR5cGUnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5mdW5jdGlvbiBidWlsZFRhYmxlKC4uLnRycykge1xyXG4gICAgcmV0dXJuIGgoJ3RhYmxlJywgJycpLmNoaWxkKGgoJ3Rib2R5JywgJycpLmNoaWxkcmVuKC4uLnRycykpO1xyXG59XHJcbmZ1bmN0aW9uIGJ1aWxkVGQoaWNvbk5hbWUpIHtcclxuICAgIHJldHVybiBoKCd0ZCcsICcnKS5jaGlsZChoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWJvcmRlci1wYWxldHRlLWNlbGxgKS5jaGlsZChuZXcgSWNvbihgYm9yZGVyLSR7aWNvbk5hbWV9YCkpLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLm1vZGUgPSBpY29uTmFtZTtcclxuICAgICAgICBjb25zdCB7IG1vZGUsIHN0eWxlLCBjb2xvciB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLmNoYW5nZSh7IG1vZGUsIHN0eWxlLCBjb2xvciB9KTtcclxuICAgIH0pKTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3JkZXJQYWxldHRlIHtcclxuICAgIGNvbG9yO1xyXG4gICAgc3R5bGU7XHJcbiAgICBtb2RlO1xyXG4gICAgY2hhbmdlO1xyXG4gICAgZGRDb2xvcjtcclxuICAgIGRkVHlwZTtcclxuICAgIGVsO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9ICcjMDAwJztcclxuICAgICAgICB0aGlzLnN0eWxlID0gJ3RoaW4nO1xyXG4gICAgICAgIHRoaXMubW9kZSA9ICdhbGwnO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuZGRDb2xvciA9IG5ldyBEcm9wZG93bkNvbG9yKCdsaW5lLWNvbG9yJywgdGhpcy5jb2xvcik7XHJcbiAgICAgICAgdGhpcy5kZENvbG9yLmNoYW5nZSA9IChjb2xvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRkVHlwZSA9IG5ldyBEcm9wZG93bkxpbmVUeXBlKHRoaXMuc3R5bGUpO1xyXG4gICAgICAgIHRoaXMuZGRUeXBlLmNoYW5nZSA9IChbc10pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IHM7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1ib3JkZXItcGFsZXR0ZWApO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gYnVpbGRUYWJsZShoKCd0cicsICcnKS5jaGlsZHJlbihoKCd0ZCcsIGAke2Nzc1ByZWZpeH0tYm9yZGVyLXBhbGV0dGUtbGVmdGApLmNoaWxkKGJ1aWxkVGFibGUoaCgndHInLCAnJykuY2hpbGRyZW4oLi4uWydhbGwnLCAnaW5zaWRlJywgJ2hvcml6b250YWwnLCAndmVydGljYWwnLCAnb3V0c2lkZSddLm1hcChpdCA9PiBidWlsZFRkLmNhbGwodGhpcywgaXQpKSksIGgoJ3RyJywgJycpLmNoaWxkcmVuKC4uLlsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ25vbmUnXS5tYXAoaXQgPT4gYnVpbGRUZC5jYWxsKHRoaXMsIGl0KSkpKSksIGgoJ3RkJywgYCR7Y3NzUHJlZml4fS1ib3JkZXItcGFsZXR0ZS1yaWdodGApLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhci1idG5gKS5jaGlsZCh0aGlzLmRkQ29sb3IuZWwpLCBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXItYnRuYCkuY2hpbGQodGhpcy5kZFR5cGUuZWwpKSkpO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGFibGUpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kQ2xpY2tvdXRzaWRlLCB1bmJpbmRDbGlja291dHNpZGUgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IEZvcm1JbnB1dCBmcm9tICcuL2Zvcm1faW5wdXQnO1xyXG5pbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCB7IHRmIH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmNsYXNzIERyb3Bkb3duTW9yZSBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnRlbnRDbGljaztcclxuICAgIGNvbnN0cnVjdG9yKGNsaWNrKSB7XHJcbiAgICAgICAgY29uc3QgaWNvbiA9IG5ldyBJY29uKCdlbGxpcHNpcycpO1xyXG4gICAgICAgIHN1cGVyKGljb24sICdhdXRvJywgZmFsc2UsICd0b3AtbGVmdCcpO1xyXG4gICAgICAgIHRoaXMuY29udGVudENsaWNrID0gY2xpY2s7XHJcbiAgICB9XHJcbiAgICByZXNldChpdGVtcykge1xyXG4gICAgICAgIGNvbnN0IGVsZXMgPSBpdGVtcy5tYXAoKGl0LCBpKSA9PiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW1gKVxyXG4gICAgICAgICAgICAuY3NzKCd3aWR0aCcsICcxNTBweCcpXHJcbiAgICAgICAgICAgIC5jc3MoJ2ZvbnQtd2VpZ2h0JywgJ25vcm1hbCcpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudENsaWNrKGkpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2hpbGQoaXQpKTtcclxuICAgICAgICB0aGlzLnNldENvbnRlbnRDaGlsZHJlbiguLi5lbGVzKTtcclxuICAgIH1cclxuICAgIHNldFRpdGxlKCkgeyB9XHJcbn1cclxuY29uc3QgbWVudUl0ZW1zID0gW3sga2V5OiAnZGVsZXRlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5kZWxldGVTaGVldCcpIH1dO1xyXG5mdW5jdGlvbiBidWlsZE1lbnVJdGVtKGl0ZW0pIHtcclxuICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW1gKVxyXG4gICAgICAgIC5jaGlsZChpdGVtLnRpdGxlKCkpXHJcbiAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLml0ZW1DbGljayhpdGVtLmtleSk7XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBidWlsZE1lbnUoKSB7XHJcbiAgICByZXR1cm4gbWVudUl0ZW1zLm1hcCgoaXQpID0+IGJ1aWxkTWVudUl0ZW0uY2FsbCh0aGlzLCBpdCkpO1xyXG59XHJcbmNsYXNzIENvbnRleHRNZW51IHtcclxuICAgIGVsO1xyXG4gICAgaXRlbUNsaWNrO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tY29udGV4dG1lbnVgKVxyXG4gICAgICAgICAgICAuY3NzKCd3aWR0aCcsICcxNjBweCcpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbiguLi5idWlsZE1lbnUuY2FsbCh0aGlzKSlcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICB0aGlzLml0ZW1DbGljayA9ICgpID0+IHsgfTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICBlbC5oaWRlKCk7XHJcbiAgICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgIH1cclxuICAgIHNldE9mZnNldChvZmZzZXQpIHtcclxuICAgICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGVsLm9mZnNldChvZmZzZXQpO1xyXG4gICAgICAgIGVsLnNob3coKTtcclxuICAgICAgICBiaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3R0b21iYXIge1xyXG4gICAgc3dhcEZ1bmM7XHJcbiAgICB1cGRhdGVGdW5jO1xyXG4gICAgZGF0YU5hbWVzO1xyXG4gICAgYWN0aXZlRWw7XHJcbiAgICBkZWxldGVFbDtcclxuICAgIGl0ZW1zO1xyXG4gICAgbW9yZUVsO1xyXG4gICAgY29udGV4dE1lbnU7XHJcbiAgICBlbDtcclxuICAgIG1lbnVFbDtcclxuICAgIGNvbnN0cnVjdG9yKGFkZEZ1bmMgPSAoKSA9PiB7IH0sIHN3YXBGdW5jID0gKGluZGV4KSA9PiB7IH0sIGRlbGV0ZUZ1bmMgPSAoKSA9PiB7IH0sIHVwZGF0ZUZ1bmMgPSAoaW5kZXgsIHZhbHVlKSA9PiB7IH0pIHtcclxuICAgICAgICB0aGlzLnN3YXBGdW5jID0gc3dhcEZ1bmM7XHJcbiAgICAgICAgdGhpcy51cGRhdGVGdW5jID0gdXBkYXRlRnVuYztcclxuICAgICAgICB0aGlzLmRhdGFOYW1lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlRWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlRWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLm1vcmVFbCA9IG5ldyBEcm9wZG93bk1vcmUoKGkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N3YXAyKHRoaXMuaXRlbXNbaV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUgPSBuZXcgQ29udGV4dE1lbnUoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHRNZW51Lml0ZW1DbGljayA9IGRlbGV0ZUZ1bmM7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYm90dG9tYmFyYCkuY2hpbGRyZW4odGhpcy5jb250ZXh0TWVudS5lbCwgKHRoaXMubWVudUVsID0gaCgndWwnLCBgJHtjc3NQcmVmaXh9LW1lbnVgKS5jaGlsZChoKCdsaScsICcnKS5jaGlsZHJlbihuZXcgSWNvbignYWRkJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhZGRGdW5jKCk7XHJcbiAgICAgICAgfSksIGgoJ3NwYW4nLCAnJykuY2hpbGQodGhpcy5tb3JlRWwpKSkpKTtcclxuICAgIH1cclxuICAgIGFkZEl0ZW0obmFtZSwgYWN0aXZlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhTmFtZXMucHVzaChuYW1lKTtcclxuICAgICAgICBjb25zdCBpdGVtID0gaCgnbGknLCBhY3RpdmUgPyAnYWN0aXZlJyA6ICcnKS5jaGlsZChuYW1lKTtcclxuICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTd2FwMihpdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2NvbnRleHRtZW51JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHsgb2Zmc2V0TGVmdCwgb2Zmc2V0SGVpZ2h0IH0gPSBldnQudGFyZ2V0O1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnNldE9mZnNldCh7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXRMZWZ0LFxyXG4gICAgICAgICAgICAgICAgYm90dG9tOiBvZmZzZXRIZWlnaHQgKyAxLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVFbCA9IGl0ZW07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdkYmxjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gaXRlbS5odG1sKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gbmV3IEZvcm1JbnB1dCgnYXV0bycsICcnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsKHYpO1xyXG4gICAgICAgICAgICBpbnB1dC5pbnB1dC5vbignYmx1cicsICh7IHRhcmdldCB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuaW5kZXggPSB0aGlzLmRhdGFOYW1lcy5maW5kSW5kZXgoKGl0KSA9PiBpdCA9PT0gdik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmFtZUl0ZW0obmluZGV4LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgIHRoaXMuZGF0YU5hbWVzLnNwbGljZShuaW5kZXgsIDEsIHZhbHVlKTtcclxuICAgICAgICAgICAgICB0aGlzLm1vcmVFbC5yZXNldCh0aGlzLmRhdGFOYW1lcyk7XHJcbiAgICAgICAgICAgICAgaXRlbS5odG1sKCcnKS5jaGlsZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy51cGRhdGVGdW5jKG5pbmRleCwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpdGVtLmh0bWwoJycpLmNoaWxkKGlucHV0LmVsKTtcclxuICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTd2FwKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgdGhpcy5tZW51RWwuY2hpbGQoaXRlbSk7XHJcbiAgICAgICAgdGhpcy5tb3JlRWwucmVzZXQodGhpcy5kYXRhTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgcmVuYW1lSXRlbShpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmRhdGFOYW1lcy5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLm1vcmVFbC5yZXNldCh0aGlzLmRhdGFOYW1lcyk7XHJcbiAgICAgICAgdGhpcy5pdGVtc1tpbmRleF0uaHRtbCgnJykuY2hpbGQodmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRnVuYyhpbmRleCwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVFbC5yZW1vdmVDaGlsZChpdC5lbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzID0gW107XHJcbiAgICAgICAgdGhpcy5tb3JlRWwucmVzZXQodGhpcy5kYXRhTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlSXRlbSgpIHtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZUVsLCBkZWxldGVFbCB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgoKGl0KSA9PiBpdCA9PT0gZGVsZXRlRWwpO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YU5hbWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUVsLnJlbW92ZUNoaWxkKGRlbGV0ZUVsLmVsKTtcclxuICAgICAgICAgICAgdGhpcy5tb3JlRWwucmVzZXQodGhpcy5kYXRhTmFtZXMpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlRWwgPT09IGRlbGV0ZUVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbZl0gPSB0aGlzLml0ZW1zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFbCA9IGY7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVsLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtpbmRleCwgMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFtpbmRleCwgLTFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWy0xXTtcclxuICAgIH1cclxuICAgIGNsaWNrU3dhcDIoaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgoKGl0KSA9PiBpdCA9PT0gaXRlbSk7XHJcbiAgICAgICAgdGhpcy5jbGlja1N3YXAoaXRlbSk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFbC50b2dnbGUoKTtcclxuICAgICAgICB0aGlzLnN3YXBGdW5jKGluZGV4KTtcclxuICAgIH1cclxuICAgIGNsaWNrU3dhcChpdGVtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVFbC50b2dnbGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFbCA9IGl0ZW07XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgRWxlbWVudCB7XHJcbiAgICAvLyB0eXBlOiBwcmltYXJ5XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdHlwZSA9ICcnKSB7XHJcbiAgICAgICAgc3VwZXIoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYnV0dG9uICR7dHlwZX1gKTtcclxuICAgICAgICB0aGlzLmNoaWxkKHQoYGJ1dHRvbi4ke3RpdGxlfWApKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5mdW5jdGlvbiBhZGRNb250aChkYXRlLCBzdGVwKSB7XHJcbiAgICBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIHN0ZXApO1xyXG59XHJcbmZ1bmN0aW9uIHdlZWtkYXkoZGF0ZSwgaW5kZXgpIHtcclxuICAgIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIGQuc2V0RGF0ZShpbmRleCAtIGRhdGUuZ2V0RGF5KCkgKyAxKTtcclxuICAgIHJldHVybiBkO1xyXG59XHJcbmZ1bmN0aW9uIG1vbnRoRGF5cyh5ZWFyLCBtb250aCwgY2RhdGUpIHtcclxuICAgIC8vIHRoZSBmaXJzdCBkYXkgb2YgbW9udGhcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxLCAyMywgNTksIDU5KTtcclxuICAgIGNvbnN0IGRhdGVzcyA9IFtbXSwgW10sIFtdLCBbXSwgW10sIFtdXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA3OyBqICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpICogNyArIGo7XHJcbiAgICAgICAgICAgIGNvbnN0IGQgPSB3ZWVrZGF5KHN0YXJ0RGF0ZSwgaW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9IGQuZ2V0TW9udGgoKSAhPT0gbW9udGg7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkOicsIGQsICcsIGNkYXRlOicsIGNkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gZC5nZXRNb250aCgpID09PSBjZGF0ZS5nZXRNb250aCgpICYmIGQuZ2V0RGF0ZSgpID09PSBjZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGRhdGVzc1tpXVtqXSA9IHsgZCwgZGlzYWJsZWQsIGFjdGl2ZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkYXRlc3M7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsZW5kYXIge1xyXG4gICAgdmFsdWU7XHJcbiAgICBjdmFsdWU7XHJcbiAgICBoZWFkZXJMZWZ0RWw7XHJcbiAgICBib2R5RWw7XHJcbiAgICBlbDtcclxuICAgIHNlbGVjdENoYW5nZTtcclxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY3ZhbHVlID0gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyTGVmdEVsID0gaCgnZGl2JywgJ2NhbGVuZGFyLWhlYWRlci1sZWZ0Jyk7XHJcbiAgICAgICAgdGhpcy5ib2R5RWwgPSBoKCd0Ym9keScsICcnKTtcclxuICAgICAgICB0aGlzLmJ1aWxkQWxsKCk7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsICd4LXNwcmVhZHNoZWV0LWNhbGVuZGFyJykuY2hpbGRyZW4oaCgnZGl2JywgJ2NhbGVuZGFyLWhlYWRlcicpLmNoaWxkcmVuKHRoaXMuaGVhZGVyTGVmdEVsLCBoKCdkaXYnLCAnY2FsZW5kYXItaGVhZGVyLXJpZ2h0JykuY2hpbGRyZW4oaCgnYScsICdjYWxlbmRhci1wcmV2JylcclxuICAgICAgICAgICAgLm9uKCdjbGljay5zdG9wJywgKCkgPT4gdGhpcy5wcmV2KCkpXHJcbiAgICAgICAgICAgIC5jaGlsZChuZXcgSWNvbignY2hldnJvbi1sZWZ0JykpLCBoKCdhJywgJ2NhbGVuZGFyLW5leHQnKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLm5leHQoKSlcclxuICAgICAgICAgICAgLmNoaWxkKG5ldyBJY29uKCdjaGV2cm9uLXJpZ2h0JykpKSksIGgoJ3RhYmxlJywgJ2NhbGVuZGFyLWJvZHknKS5jaGlsZHJlbihoKCd0aGVhZCcsICcnKS5jaGlsZChoKCd0cicsICcnKS5jaGlsZHJlbiguLi50KCdjYWxlbmRhci53ZWVrcycpLm1hcCgod2VlaykgPT4gaCgndGgnLCAnY2VsbCcpLmNoaWxkKHdlZWspKSkpLCB0aGlzLmJvZHlFbCkpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0Q2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgc2V0VmFsdWUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5idWlsZEFsbCgpO1xyXG4gICAgfVxyXG4gICAgcHJldigpIHtcclxuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIGFkZE1vbnRoKHZhbHVlLCAtMSk7XHJcbiAgICAgICAgdGhpcy5idWlsZEFsbCgpO1xyXG4gICAgfVxyXG4gICAgbmV4dCgpIHtcclxuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIGFkZE1vbnRoKHZhbHVlLCAxKTtcclxuICAgICAgICB0aGlzLmJ1aWxkQWxsKCk7XHJcbiAgICB9XHJcbiAgICBidWlsZEFsbCgpIHtcclxuICAgICAgICB0aGlzLmJ1aWxkSGVhZGVyTGVmdCgpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRCb2R5KCk7XHJcbiAgICB9XHJcbiAgICBidWlsZEhlYWRlckxlZnQoKSB7XHJcbiAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLmhlYWRlckxlZnRFbC5odG1sKGAke3QoJ2NhbGVuZGFyLm1vbnRocycpW3ZhbHVlLmdldE1vbnRoKCldfSAke3ZhbHVlLmdldEZ1bGxZZWFyKCl9YCk7XHJcbiAgICB9XHJcbiAgICBidWlsZEJvZHkoKSB7XHJcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgY3ZhbHVlLCBib2R5RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgbURheXMgPSBtb250aERheXModmFsdWUuZ2V0RnVsbFllYXIoKSwgdmFsdWUuZ2V0TW9udGgoKSwgY3ZhbHVlKTtcclxuICAgICAgICBjb25zdCB0cnMgPSBtRGF5cy5tYXAoKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRkcyA9IGl0Lm1hcCgoaXQxKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2xzID0gJ2NlbGwnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0MS5kaXNhYmxlZClcclxuICAgICAgICAgICAgICAgICAgICBjbHMgKz0gJyBkaXNhYmxlZCc7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXQxLmFjdGl2ZSlcclxuICAgICAgICAgICAgICAgICAgICBjbHMgKz0gJyBhY3RpdmUnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3RkJywgJycpLmNoaWxkKGgoJ2RpdicsIGNscylcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDaGFuZ2UoaXQxLmQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2hpbGQoaXQxLmQuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoKCd0cicsICcnKS5jaGlsZHJlbiguLi50ZHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJvZHlFbC5odG1sKCcnKS5jaGlsZHJlbiguLi50cnMpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5jb25zdCB0aGVtZUNvbG9yUGxhY2VIb2xkZXJzID0gWycjZmZmZmZmJywgJyMwMDAxMDAnLCAnI2U3ZTVlNicsICcjNDQ1NTY5JywgJyM1YjljZDYnLCAnI2VkN2QzMScsICcjYTVhNWE1JywgJyNmZmMwMDEnLCAnIzQzNzFjNicsICcjNzFhZTQ3J107XHJcbmNvbnN0IHRoZW1lQ29sb3JzID0gW1xyXG4gICAgWycjZjJmMmYyJywgJyM3ZjdmN2YnLCAnI2QwY2VjZicsICcjZDVkY2U0JywgJyNkZWVhZjYnLCAnI2ZjZTVkNScsICcjZWRlZGVkJywgJyNmZmYyY2QnLCAnI2Q5ZTJmMycsICcjZTNlZmQ5J10sXHJcbiAgICBbJyNkOGQ4ZDgnLCAnIzU5NTk1OScsICcjYWZhYmFjJywgJyNhZGI4Y2EnLCAnI2JkZDdlZScsICcjZjdjY2FjJywgJyNkYmRiZGInLCAnI2ZmZTU5YScsICcjYjNjNmU3JywgJyNjNWUwYjMnXSxcclxuICAgIFsnI2JmYmZiZicsICcjM2YzZjNmJywgJyM3NTZmNmYnLCAnIzg1OTZiMCcsICcjOWNjMmU2JywgJyNmNGIxODQnLCAnI2M5YzljOScsICcjZmVkOTY0JywgJyM4ZWFhZGEnLCAnI2E3ZDA4YyddLFxyXG4gICAgWycjYTVhNWE1JywgJyMyNjI2MjYnLCAnIzNhMzgzOScsICcjMzMzZjRmJywgJyMyZTc1YjUnLCAnI2M0NWExMCcsICcjN2I3YjdiJywgJyNiZjhlMDEnLCAnIzJmNTU5NicsICcjNTM4MTM2J10sXHJcbiAgICBbJyM3ZjdmN2YnLCAnIzBjMGMwYycsICcjMTcxNTE2JywgJyMyMjJhMzUnLCAnIzFmNGU3YScsICcjODQzYzBhJywgJyM1MjUyNTInLCAnIzdlNjAwMCcsICcjMjAzODY0JywgJyMzNjU2MjQnXSxcclxuXTtcclxuY29uc3Qgc3RhbmRhcmRDb2xvcnMgPSBbJyNjMDAwMDAnLCAnI2ZlMDAwMCcsICcjZmRjMTAxJywgJyNmZmZmMDEnLCAnIzkzZDA1MScsICcjMDBiMDRlJywgJyMwMWIwZjEnLCAnIzAxNzBjMScsICcjMDEyMDYwJywgJyM3MDMwYTAnXTtcclxuZnVuY3Rpb24gYnVpbGRUZChiZ2NvbG9yKSB7XHJcbiAgICByZXR1cm4gaCgndGQnLCAnJykuY2hpbGQoaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1jb2xvci1wYWxldHRlLWNlbGxgKVxyXG4gICAgICAgIC5vbignY2xpY2suc3RvcCcsICgpID0+IHRoaXMuY2hhbmdlKGJnY29sb3IpKVxyXG4gICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBiZ2NvbG9yKSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQYWxldHRlIHtcclxuICAgIGVsO1xyXG4gICAgY2hhbmdlO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tY29sb3ItcGFsZXR0ZWApO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gaCgndGFibGUnLCAnJykuY2hpbGRyZW4oaCgndGJvZHknLCAnJykuY2hpbGRyZW4oaCgndHInLCBgJHtjc3NQcmVmaXh9LXRoZW1lLWNvbG9yLXBsYWNlaG9sZGVyc2ApLmNoaWxkcmVuKC4uLnRoZW1lQ29sb3JQbGFjZUhvbGRlcnMubWFwKGNvbG9yID0+IGJ1aWxkVGQuY2FsbCh0aGlzLCBjb2xvcikpKSwgLi4udGhlbWVDb2xvcnMubWFwKGl0ID0+IGgoJ3RyJywgYCR7Y3NzUHJlZml4fS10aGVtZS1jb2xvcnNgKS5jaGlsZHJlbiguLi5pdC5tYXAoY29sb3IgPT4gYnVpbGRUZC5jYWxsKHRoaXMsIGNvbG9yKSkpKSwgaCgndHInLCBgJHtjc3NQcmVmaXh9LXN0YW5kYXJkLWNvbG9yc2ApLmNoaWxkcmVuKC4uLnN0YW5kYXJkQ29sb3JzLm1hcChjb2xvciA9PiBidWlsZFRkLmNhbGwodGhpcywgY29sb3IpKSkpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRhYmxlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmluZENsaWNrb3V0c2lkZSwgdW5iaW5kQ2xpY2tvdXRzaWRlIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IHRmIH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmNvbnN0IG1lbnVJdGVtcyA9IFtcclxuICAgIHsga2V5OiAnY29weScsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuY29weScpLCBsYWJlbDogJ0N0cmwrQycgfSxcclxuICAgIHsga2V5OiAnY3V0JywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5jdXQnKSwgbGFiZWw6ICdDdHJsK1gnIH0sXHJcbiAgICB7IGtleTogJ3Bhc3RlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5wYXN0ZScpLCBsYWJlbDogJ0N0cmwrVicgfSxcclxuICAgIHsga2V5OiAncGFzdGUtdmFsdWUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LnBhc3RlVmFsdWUnKSwgbGFiZWw6ICdDdHJsK1NoaWZ0K1YnIH0sXHJcbiAgICB7IGtleTogJ3Bhc3RlLWZvcm1hdCcsIHRpdGxlOiB0ZignY29udGV4dG1lbnUucGFzdGVGb3JtYXQnKSwgbGFiZWw6ICdDdHJsK0FsdCtWJyB9LFxyXG4gICAgeyBrZXk6ICdkaXZpZGVyJyB9LFxyXG4gICAgeyBrZXk6ICdpbnNlcnQtcm93JywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5pbnNlcnRSb3cnKSB9LFxyXG4gICAgeyBrZXk6ICdpbnNlcnQtY29sdW1uJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5pbnNlcnRDb2x1bW4nKSB9LFxyXG4gICAgeyBrZXk6ICdkaXZpZGVyJyB9LFxyXG4gICAgeyBrZXk6ICdkZWxldGUtcm93JywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5kZWxldGVSb3cnKSB9LFxyXG4gICAgeyBrZXk6ICdkZWxldGUtY29sdW1uJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5kZWxldGVDb2x1bW4nKSB9LFxyXG4gICAgeyBrZXk6ICdkZWxldGUtY2VsbC10ZXh0JywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5kZWxldGVDZWxsVGV4dCcpIH0sXHJcbiAgICB7IGtleTogJ2hpZGUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LmhpZGUnKSB9LFxyXG4gICAgeyBrZXk6ICdkaXZpZGVyJyB9LFxyXG4gICAgeyBrZXk6ICd2YWxpZGF0aW9uJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS52YWxpZGF0aW9uJykgfSxcclxuICAgIHsga2V5OiAnZGl2aWRlcicgfSxcclxuICAgIHsga2V5OiAnY2VsbC1wcmludGFibGUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LmNlbGxwcmludGFibGUnKSB9LFxyXG4gICAgeyBrZXk6ICdjZWxsLW5vbi1wcmludGFibGUnLCB0aXRsZTogdGYoJ2NvbnRleHRtZW51LmNlbGxub25wcmludGFibGUnKSB9LFxyXG4gICAgeyBrZXk6ICdkaXZpZGVyJyB9LFxyXG4gICAgeyBrZXk6ICdjZWxsLWVkaXRhYmxlJywgdGl0bGU6IHRmKCdjb250ZXh0bWVudS5jZWxsZWRpdGFibGUnKSB9LFxyXG4gICAgeyBrZXk6ICdjZWxsLW5vbi1lZGl0YWJsZScsIHRpdGxlOiB0ZignY29udGV4dG1lbnUuY2VsbG5vbmVkaXRhYmxlJykgfSxcclxuXTtcclxuZnVuY3Rpb24gYnVpbGRNZW51SXRlbShpdGVtKSB7XHJcbiAgICBpZiAoaXRlbS5rZXkgPT09ICdkaXZpZGVyJykge1xyXG4gICAgICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWl0ZW0gZGl2aWRlcmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApXHJcbiAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLml0ZW1DbGljayhpdGVtLmtleSk7XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5jaGlsZHJlbihpdGVtLnRpdGxlKCksIGgoJ2RpdicsICdsYWJlbCcpLmNoaWxkKGl0ZW0ubGFiZWwgfHwgJycpKTtcclxufVxyXG5mdW5jdGlvbiBidWlsZE1lbnUoKSB7XHJcbiAgICByZXR1cm4gbWVudUl0ZW1zLm1hcChpdCA9PiBidWlsZE1lbnVJdGVtLmNhbGwodGhpcywgaXQpKTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0TWVudSB7XHJcbiAgICBtZW51SXRlbXM7XHJcbiAgICBlbDtcclxuICAgIHZpZXdGbjtcclxuICAgIGl0ZW1DbGljaztcclxuICAgIGlzSGlkZTtcclxuICAgIGNvbnN0cnVjdG9yKHZpZXdGbiwgaXNIaWRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IGJ1aWxkTWVudS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWNvbnRleHRtZW51YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKC4uLnRoaXMubWVudUl0ZW1zKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMudmlld0ZuID0gdmlld0ZuO1xyXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuaXNIaWRlID0gaXNIaWRlO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZSgncmFuZ2UnKTtcclxuICAgIH1cclxuICAgIC8vIHJvdy1jb2w6IHRoZSB3aG9sZSByb3dzIG9yIHRoZSB3aG9sZSBjb2xzXHJcbiAgICAvLyByYW5nZTogc2VsZWN0IHJhbmdlXHJcbiAgICBzZXRNb2RlKG1vZGUpIHtcclxuICAgICAgICBjb25zdCBoaWRlRWwgPSB0aGlzLm1lbnVJdGVtc1sxMl07XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICdyb3ctY29sJykge1xyXG4gICAgICAgICAgICBoaWRlRWwuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGlkZUVsLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgZWwuaGlkZSgpO1xyXG4gICAgICAgIHVuYmluZENsaWNrb3V0c2lkZShlbCk7XHJcbiAgICB9XHJcbiAgICBzZXRQb3NpdGlvbih4LCB5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSBlbC5zaG93KCkub2Zmc2V0KCk7XHJcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMudmlld0ZuKCk7XHJcbiAgICAgICAgY29uc3QgdmhmID0gdmlldy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIGxldCBsZWZ0ID0geDtcclxuICAgICAgICBpZiAodmlldy53aWR0aCAtIHggPD0gd2lkdGgpIHtcclxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwuY3NzKCdsZWZ0JywgYCR7bGVmdH1weGApO1xyXG4gICAgICAgIGlmICh5ID4gdmhmKSB7XHJcbiAgICAgICAgICAgIGVsLmNzcygnYm90dG9tJywgYCR7dmlldy5oZWlnaHQgLSB5fXB4YClcclxuICAgICAgICAgICAgICAgIC5jc3MoJ21heC1oZWlnaHQnLCBgJHt5fXB4YClcclxuICAgICAgICAgICAgICAgIC5jc3MoJ3RvcCcsICdhdXRvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5jc3MoJ3RvcCcsIGAke3l9cHhgKVxyXG4gICAgICAgICAgICAgICAgLmNzcygnbWF4LWhlaWdodCcsIGAke3ZpZXcuaGVpZ2h0IC0geX1weGApXHJcbiAgICAgICAgICAgICAgICAuY3NzKCdib3R0b20nLCAnYXV0bycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FsZW5kYXIgZnJvbSAnLi9jYWxlbmRhcic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlcGlja2VyIHtcclxuICAgIGNhbGVuZGFyO1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhbGVuZGFyID0gbmV3IENhbGVuZGFyKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRhdGVwaWNrZXJgKVxyXG4gICAgICAgICAgICAuY2hpbGQodGhpcy5jYWxlbmRhci5lbClcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgIH1cclxuICAgIHNldFZhbHVlKGRhdGUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnOjo6Ojo6OicsIGRhdGUsIHR5cGVvZiBkYXRlLCBkYXRlIGluc3RhbmNlb2Ygc3RyaW5nKTtcclxuICAgICAgICBjb25zdCB7IGNhbGVuZGFyIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coL15cXGR7NH0tXFxkezEsMn0tXFxkezEsMn0kLy50ZXN0KGRhdGUpKTtcclxuICAgICAgICAgICAgaWYgKC9eXFxkezR9LVxcZHsxLDJ9LVxcZHsxLDJ9JC8udGVzdChkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgY2FsZW5kYXIuc2V0VmFsdWUobmV3IERhdGUoZGF0ZS5yZXBsYWNlKG5ldyBSZWdFeHAoJy0nLCAnZycpLCAnLycpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIuc2V0VmFsdWUoZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlKGNiKSB7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhci5zZWxlY3RDaGFuZ2UgPSAoZCkgPT4ge1xyXG4gICAgICAgICAgICBjYihkKTtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVsZW1lbnQsIGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kQ2xpY2tvdXRzaWRlLCB1bmJpbmRDbGlja291dHNpZGUgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd24gZXh0ZW5kcyBFbGVtZW50IHtcclxuICAgIHRpdGxlO1xyXG4gICAgaGVhZGVyQ2xpY2s7XHJcbiAgICBjb250ZW50RWw7XHJcbiAgICBoZWFkZXJFbDtcclxuICAgIGNoYW5nZTtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB3aWR0aCwgc2hvd0Fycm93LCBwbGFjZW1lbnQsIC4uLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgc3VwZXIoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZHJvcGRvd24gJHtwbGFjZW1lbnR9YCk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIC8vIHRoaXMuY2hhbmdlID0gKCkgPT4ge307XHJcbiAgICAgICAgdGhpcy5oZWFkZXJDbGljayA9ICgpID0+IHsgfTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1kcm9wZG93bi10aXRsZWApLmNoaWxkKHRpdGxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2hvd0Fycm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUuYWRkQ2xhc3MoJ2Fycm93LWxlZnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRyb3Bkb3duLWNvbnRlbnRgKVxyXG4gICAgICAgICAgICAuY3NzKCd3aWR0aCcsIHdpZHRoKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0Q29udGVudENoaWxkcmVuKC4uLmNoaWxkcmVuKTtcclxuICAgICAgICB0aGlzLmhlYWRlckVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1kcm9wZG93bi1oZWFkZXJgKTtcclxuICAgICAgICB0aGlzLmhlYWRlckVsXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbC5jc3MoJ2Rpc3BsYXknKSAhPT0gJ2Jsb2NrJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbih0aGlzLnRpdGxlLCBzaG93QXJyb3dcclxuICAgICAgICAgICAgPyBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb24gYXJyb3ctcmlnaHRgKS5jaGlsZChoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb24taW1nIGFycm93LWRvd25gKSlcclxuICAgICAgICAgICAgOiAnJyk7XHJcbiAgICB9XHJcbiAgICBzZXRDb250ZW50Q2hpbGRyZW4oLi4uY2hpbGRyZW4pIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5odG1sKCcnKTtcclxuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jaGlsZHJlbiguLi5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0VGl0bGUodGl0bGUpIHtcclxuICAgICAgICB0aGlzLnRpdGxlLmh0bWwodGl0bGUpO1xyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuc2hvdygpO1xyXG4gICAgICAgIC8vIHRoaXMucGFyZW50KCkuYWN0aXZlKCk7XHJcbiAgICAgICAgYmluZENsaWNrb3V0c2lkZSh0aGlzLnBhcmVudCgpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLnBhcmVudCgpLmFjdGl2ZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuaGlkZSgpO1xyXG4gICAgICAgIHVuYmluZENsaWNrb3V0c2lkZSh0aGlzLnBhcmVudCgpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5mdW5jdGlvbiBidWlsZEl0ZW1XaXRoSWNvbihpY29uTmFtZSkge1xyXG4gICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApLmNoaWxkKG5ldyBJY29uKGljb25OYW1lKSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25BbGlnbiBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKGFsaWducywgYWxpZ24pIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oYGFsaWduLSR7YWxpZ259YCk7XHJcbiAgICAgICAgY29uc3QgbmFsaWducyA9IGFsaWducy5tYXAoKGl0KSA9PiBidWlsZEl0ZW1XaXRoSWNvbihgYWxpZ24tJHtpdH1gKS5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUoaXQpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHN1cGVyKGljb24sICdhdXRvJywgdHJ1ZSwgJ2JvdHRvbS1sZWZ0JywgLi4ubmFsaWducyk7XHJcbiAgICB9XHJcbiAgICBzZXRUaXRsZShhbGlnbikge1xyXG4gICAgICAgIHRoaXMudGl0bGUuc2V0TmFtZShgYWxpZ24tJHthbGlnbn1gKTtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCBJY29uIGZyb20gJy4vaWNvbic7XHJcbmltcG9ydCBCb3JkZXJQYWxldHRlIGZyb20gJy4vYm9yZGVyX3BhbGV0dGUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wZG93bkJvcmRlciBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnN0IGljb24gPSBuZXcgSWNvbignYm9yZGVyLWFsbCcpO1xyXG4gICAgICAgIGNvbnN0IGJvcmRlclBhbGV0dGUgPSBuZXcgQm9yZGVyUGFsZXR0ZSgpO1xyXG4gICAgICAgIGJvcmRlclBhbGV0dGUuY2hhbmdlID0gKHYpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2Uodik7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ2JvdHRvbS1sZWZ0JywgYm9yZGVyUGFsZXR0ZS5lbCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgQ29sb3JQYWxldHRlIGZyb20gJy4vY29sb3JfcGFsZXR0ZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERyb3Bkb3duQ29sb3IgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcihpY29uTmFtZSwgY29sb3IpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oaWNvbk5hbWUpXHJcbiAgICAgICAgICAgIC5jc3MoJ2hlaWdodCcsICcxNnB4JylcclxuICAgICAgICAgICAgLmNzcygnYm9yZGVyLWJvdHRvbScsIGAzcHggc29saWQgJHtjb2xvcn1gKTtcclxuICAgICAgICBjb25zdCBjb2xvclBhbGV0dGUgPSBuZXcgQ29sb3JQYWxldHRlKCk7XHJcbiAgICAgICAgY29sb3JQYWxldHRlLmNoYW5nZSA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUodik7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKHYpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ2JvdHRvbS1sZWZ0JywgY29sb3JQYWxldHRlLmVsKTtcclxuICAgIH1cclxuICAgIHNldFRpdGxlKGNvbG9yKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZS5jc3MoJ2JvcmRlci1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiYXNlRm9udHMgfSBmcm9tICcuLi9jb3JlL2ZvbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wZG93bkZvbnQgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBuZm9udHMgPSBiYXNlRm9udHMubWFwKChpdCkgPT4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtYClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZShpdC50aXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKGl0KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2hpbGQoaXQudGl0bGUpKTtcclxuICAgICAgICBzdXBlcihiYXNlRm9udHNbMF0udGl0bGUsICcxNjBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb250cyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgZm9udFNpemVzIH0gZnJvbSAnLi4vY29yZS9mb250JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb250U2l6ZSBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnN0IG5mb250U2l6ZXMgPSBmb250U2l6ZXMubWFwKChpdCkgPT4gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtYClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZShgJHtpdC5wdH1gKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoaXQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jaGlsZChgJHtpdC5wdH1gKSk7XHJcbiAgICAgICAgc3VwZXIoJzEwJywgJzYwcHgnLCB0cnVlLCAnYm90dG9tLWxlZnQnLCAuLi5uZm9udFNpemVzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQgeyBiYXNlRm9ybWF0cyB9IGZyb20gJy4uL2NvcmUvZm9ybWF0JztcclxuaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb3JtYXQgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBsZXQgbmZvcm1hdHMgPSBiYXNlRm9ybWF0cy5zbGljZSgwKTtcclxuICAgICAgICBuZm9ybWF0cy5zcGxpY2UoMiwgMCwgeyBrZXk6ICdkaXZpZGVyJyB9KTtcclxuICAgICAgICBuZm9ybWF0cy5zcGxpY2UoOCwgMCwgeyBrZXk6ICdkaXZpZGVyJyB9KTtcclxuICAgICAgICBuZm9ybWF0cyA9IG5mb3JtYXRzLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApO1xyXG4gICAgICAgICAgICBpZiAoaXQua2V5ID09PSAnZGl2aWRlcicpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoJ2RpdmlkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hpbGQoaXQudGl0bGUoKSkub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGl0bGUoaXQudGl0bGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoaXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXQubGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZChoKCdkaXYnLCAnbGFiZWwnKS5odG1sKGl0LmxhYmVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIoJ05vcm1hbCcsICcyMjBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb3JtYXRzKTtcclxuICAgIH1cclxuICAgIHNldFRpdGxlKGtleSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmFzZUZvcm1hdHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGJhc2VGb3JtYXRzW2ldLmtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlLmh0bWwoYmFzZUZvcm1hdHNbaV0udGl0bGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmFzZUZvcm11bGFzIH0gZnJvbSAnLi4vY29yZS9mb3JtdWxhJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Gb3JtdWxhIGV4dGVuZHMgRHJvcGRvd24ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc3QgbmZvcm11bGFzID0gYmFzZUZvcm11bGFzLm1hcCgoaXQpID0+IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbWApXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNoaWxkKGl0LmtleSkpO1xyXG4gICAgICAgIHN1cGVyKG5ldyBJY29uKCdmb3JtdWxhJyksICcxODBweCcsIHRydWUsICdib3R0b20tbGVmdCcsIC4uLm5mb3JtdWxhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuY29uc3QgbGluZVR5cGVzID0gW1xyXG4gICAgW1xyXG4gICAgICAgICd0aGluJyxcclxuICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjFcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjxsaW5lIHgxPVwiMFwiIHkxPVwiMC41XCIgeDI9XCI1MFwiIHkyPVwiMC41XCIgc3Ryb2tlLXdpZHRoPVwiMVwiIHN0cm9rZT1cImJsYWNrXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48L2xpbmU+PC9zdmc+JyxcclxuICAgIF0sXHJcbiAgICBbXHJcbiAgICAgICAgJ21lZGl1bScsXHJcbiAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCIyXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48bGluZSB4MT1cIjBcIiB5MT1cIjEuMFwiIHgyPVwiNTBcIiB5Mj1cIjEuMFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJibGFja1wiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICd0aGljaycsXHJcbiAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCIzXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48bGluZSB4MT1cIjBcIiB5MT1cIjEuNVwiIHgyPVwiNTBcIiB5Mj1cIjEuNVwiIHN0cm9rZS13aWR0aD1cIjNcIiBzdHJva2U9XCJibGFja1wiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICdkYXNoZWQnLFxyXG4gICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PGxpbmUgeDE9XCIwXCIgeTE9XCIwLjVcIiB4Mj1cIjUwXCIgeTI9XCIwLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiMlwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgICdkb3R0ZWQnLFxyXG4gICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PGxpbmUgeDE9XCIwXCIgeTE9XCIwLjVcIiB4Mj1cIjUwXCIgeTI9XCIwLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiMVwiIHN0eWxlPVwidXNlci1zZWxlY3Q6IG5vbmU7XCI+PC9saW5lPjwvc3ZnPicsXHJcbiAgICBdLFxyXG4gICAgLy8gWydkb3VibGUnLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjNcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjxsaW5lIHgxPVwiMFwiIHkxPVwiMC41XCIgeDI9XCI1MFwiIHkyPVwiMC41XCIgc3Ryb2tlLXdpZHRoPVwiMVwiIHN0cm9rZT1cImJsYWNrXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48L2xpbmU+PGxpbmUgeDE9XCIwXCIgeTE9XCIyLjVcIiB4Mj1cIjUwXCIgeTI9XCIyLjVcIiBzdHJva2Utd2lkdGg9XCIxXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHlsZT1cInVzZXItc2VsZWN0OiBub25lO1wiPjwvbGluZT48L3N2Zz4nXSxcclxuXTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25MaW5lVHlwZSBleHRlbmRzIERyb3Bkb3duIHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUpIHtcclxuICAgICAgICBjb25zdCBpY29uID0gbmV3IEljb24oJ2xpbmUtdHlwZScpO1xyXG4gICAgICAgIGxldCBiZWZvcmVpID0gMDtcclxuICAgICAgICBjb25zdCBsaW5lVHlwZUVscyA9IGxpbmVUeXBlcy5tYXAoKGl0LCBpdGkpID0+IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbSBzdGF0ZSAke3R5cGUgPT09IGl0WzBdID8gJ2NoZWNrZWQnIDogJyd9YClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbGluZVR5cGVFbHNbYmVmb3JlaV0udG9nZ2xlKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgIGxpbmVUeXBlRWxzW2l0aV0udG9nZ2xlKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgIGJlZm9yZWkgPSBpdGk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShpdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNoaWxkKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tbGluZS10eXBlYCkuaHRtbChpdFsxXSkpKTtcclxuICAgICAgICBzdXBlcihpY29uLCAnYXV0bycsIGZhbHNlLCAnYm90dG9tLWxlZnQnLCAuLi5saW5lVHlwZUVscyk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBTdWdnZXN0IGZyb20gJy4vc3VnZ2VzdCc7XHJcbmltcG9ydCBEYXRlcGlja2VyIGZyb20gJy4vZGF0ZXBpY2tlcic7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmZ1bmN0aW9uIHJlc2V0VGV4dGFyZWFTaXplKCkge1xyXG4gICAgY29uc3QgeyBpbnB1dFRleHQgfSA9IHRoaXM7XHJcbiAgICBpZiAoIS9eXFxzKiQvLnRlc3QoaW5wdXRUZXh0KSkge1xyXG4gICAgICAgIGNvbnN0IHsgdGV4dGxpbmVFbCwgdGV4dEVsLCBhcmVhT2Zmc2V0IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHR4dHMgPSBpbnB1dFRleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGNvbnN0IG1heFR4dFNpemUgPSBNYXRoLm1heCguLi50eHRzLm1hcCgoaXQpID0+IGl0Lmxlbmd0aCkpO1xyXG4gICAgICAgIGNvbnN0IHRsT2Zmc2V0ID0gdGV4dGxpbmVFbC5vZmZzZXQoKTtcclxuICAgICAgICBjb25zdCBmb250V2lkdGggPSB0bE9mZnNldC53aWR0aCAvIGlucHV0VGV4dC5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgdGxpbmVXaWR0aCA9IChtYXhUeHRTaXplICsgMSkgKiBmb250V2lkdGggKyA1O1xyXG4gICAgICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy52aWV3Rm4oKS53aWR0aCAtIGFyZWFPZmZzZXQubGVmdCAtIGZvbnRXaWR0aDtcclxuICAgICAgICBsZXQgaDEgPSB0eHRzLmxlbmd0aDtcclxuICAgICAgICBpZiAodGxpbmVXaWR0aCA+IGFyZWFPZmZzZXQud2lkdGgpIHtcclxuICAgICAgICAgICAgbGV0IHR3aWR0aCA9IHRsaW5lV2lkdGg7XHJcbiAgICAgICAgICAgIGlmICh0bGluZVdpZHRoID4gbWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHR3aWR0aCA9IG1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgaDEgKz0gTWF0aC5mbG9vcih0bGluZVdpZHRoIC8gbWF4V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgaDEgKz0gdGxpbmVXaWR0aCAlIG1heFdpZHRoID4gMCA/IDEgOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRFbC5jc3MoJ3dpZHRoJywgYCR7dHdpZHRofXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGgxICo9IHRoaXMucm93SGVpZ2h0O1xyXG4gICAgICAgIGlmIChoMSA+IGFyZWFPZmZzZXQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRleHRFbC5jc3MoJ2hlaWdodCcsIGAke2gxfXB4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluc2VydFRleHQoeyB0YXJnZXQgfSwgaXR4dCkge1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgc2VsZWN0aW9uRW5kIH0gPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBudHh0ID0gYCR7dmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uRW5kKX0ke2l0eHR9JHt2YWx1ZS5zbGljZShzZWxlY3Rpb25FbmQpfWA7XHJcbiAgICB0YXJnZXQudmFsdWUgPSBudHh0O1xyXG4gICAgdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvbkVuZCArIDEsIHNlbGVjdGlvbkVuZCArIDEpO1xyXG4gICAgdGhpcy5pbnB1dFRleHQgPSBudHh0O1xyXG4gICAgdGhpcy50ZXh0bGluZUVsLmh0bWwobnR4dCk7XHJcbiAgICByZXNldFRleHRhcmVhU2l6ZS5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIGtleWRvd25FdmVudEhhbmRsZXIoZXZ0KSB7XHJcbiAgICBjb25zdCB7IGtleUNvZGUsIGFsdEtleSB9ID0gZXZ0O1xyXG4gICAgaWYgKGtleUNvZGUgIT09IDEzICYmIGtleUNvZGUgIT09IDkpXHJcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGtleUNvZGUgPT09IDEzICYmIGFsdEtleSkge1xyXG4gICAgICAgIGluc2VydFRleHQuY2FsbCh0aGlzLCBldnQsICdcXG4nKTtcclxuICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoa2V5Q29kZSA9PT0gMTMgJiYgIWFsdEtleSlcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxufVxyXG5mdW5jdGlvbiBpbnB1dEV2ZW50SGFuZGxlcihldnQpIHtcclxuICAgIGNvbnN0IHYgPSBldnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgLy8gY29uc29sZS5sb2coZXZ0LCAndjonLCB2KTtcclxuICAgIGNvbnN0IHsgc3VnZ2VzdCwgdGV4dGxpbmVFbCwgdmFsaWRhdG9yIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBjZWxsIH0gPSB0aGlzO1xyXG4gICAgaWYgKGNlbGwgIT09IG51bGwpIHtcclxuICAgICAgICBpZiAoKCdlZGl0YWJsZScgaW4gY2VsbCAmJiBjZWxsLmVkaXRhYmxlID09PSB0cnVlKSB8fFxyXG4gICAgICAgICAgICBjZWxsLmVkaXRhYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dFRleHQgPSB2O1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdG9yLnR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Quc2VhcmNoKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IHYubGFzdEluZGV4T2YoJz0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0LnNlYXJjaCh2LnN1YnN0cmluZyhzdGFydCArIDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRsaW5lRWwuaHRtbCh2KTtcclxuICAgICAgICAgICAgcmVzZXRUZXh0YXJlYVNpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoJ2lucHV0Jywgdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBldnQudGFyZ2V0LnZhbHVlID0gY2VsbC50ZXh0IHx8ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gdjtcclxuICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IudHlwZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0LnNlYXJjaCh2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN1Z2dlc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHYubGFzdEluZGV4T2YoJz0nKTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZWFyY2godi5zdWJzdHJpbmcoc3RhcnQgKyAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0LmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0bGluZUVsLmh0bWwodik7XHJcbiAgICAgICAgcmVzZXRUZXh0YXJlYVNpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSgnaW5wdXQnLCB2KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRUZXh0YXJlYVJhbmdlKHBvc2l0aW9uKSB7XHJcbiAgICBjb25zdCB7IGVsIH0gPSB0aGlzLnRleHRFbDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGVsLmZvY3VzKCk7XHJcbiAgICAgICAgZWwuc2V0U2VsZWN0aW9uUmFuZ2UocG9zaXRpb24sIHBvc2l0aW9uKTtcclxuICAgIH0sIDApO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRleHQodGV4dCwgcG9zaXRpb24pIHtcclxuICAgIGNvbnN0IHsgdGV4dEVsLCB0ZXh0bGluZUVsIH0gPSB0aGlzO1xyXG4gICAgLy8gZmlyZWZveCBidWdcclxuICAgIHRleHRFbC5lbC5ibHVyKCk7XHJcbiAgICB0ZXh0RWwudmFsKHRleHQpO1xyXG4gICAgdGV4dGxpbmVFbC5odG1sKHRleHQpO1xyXG4gICAgc2V0VGV4dGFyZWFSYW5nZS5jYWxsKHRoaXMsIHBvc2l0aW9uKTtcclxufVxyXG5mdW5jdGlvbiBzdWdnZXN0SXRlbUNsaWNrKGl0KSB7XHJcbiAgICBjb25zdCB7IGlucHV0VGV4dCwgdmFsaWRhdG9yIH0gPSB0aGlzO1xyXG4gICAgbGV0IHBvc2l0aW9uID0gMDtcclxuICAgIGlmICh2YWxpZGF0b3IgJiYgdmFsaWRhdG9yLnR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gaXQ7XHJcbiAgICAgICAgcG9zaXRpb24gPSB0aGlzLmlucHV0VGV4dC5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBzdGFydCA9IGlucHV0VGV4dC5sYXN0SW5kZXhPZignPScpO1xyXG4gICAgICAgIGNvbnN0IHNpdCA9IGlucHV0VGV4dC5zdWJzdHJpbmcoMCwgc3RhcnQgKyAxKTtcclxuICAgICAgICBsZXQgZWl0ID0gaW5wdXRUZXh0LnN1YnN0cmluZyhzdGFydCArIDEpO1xyXG4gICAgICAgIGlmIChlaXQuaW5kZXhPZignKScpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBlaXQgPSBlaXQuc3Vic3RyaW5nKGVpdC5pbmRleE9mKCcpJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWl0ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gYCR7c2l0ICsgaXQua2V5fShgO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnB1dFRleHQ6JywgdGhpcy5pbnB1dFRleHQpO1xyXG4gICAgICAgIHBvc2l0aW9uID0gdGhpcy5pbnB1dFRleHQubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ICs9IGApJHtlaXR9YDtcclxuICAgIH1cclxuICAgIHNldFRleHQuY2FsbCh0aGlzLCB0aGlzLmlucHV0VGV4dCwgcG9zaXRpb24pO1xyXG59XHJcbmZ1bmN0aW9uIHJlc2V0U3VnZ2VzdEl0ZW1zKCkge1xyXG4gICAgdGhpcy5zdWdnZXN0LnNldEl0ZW1zKHRoaXMuZm9ybXVsYXMpO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGVGb3JtYXQoZCkge1xyXG4gICAgbGV0IG1vbnRoID0gZC5nZXRNb250aCgpICsgMTtcclxuICAgIGxldCBkYXRlID0gZC5nZXREYXRlKCk7XHJcbiAgICBpZiAobW9udGggPCAxMClcclxuICAgICAgICBtb250aCA9IGAwJHttb250aH1gO1xyXG4gICAgaWYgKGRhdGUgPCAxMClcclxuICAgICAgICBkYXRlID0gYDAke2RhdGV9YDtcclxuICAgIHJldHVybiBgJHtkLmdldEZ1bGxZZWFyKCl9LSR7bW9udGh9LSR7ZGF0ZX1gO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRvciB7XHJcbiAgICB2aWV3Rm47XHJcbiAgICByb3dIZWlnaHQ7XHJcbiAgICBmb3JtdWxhcztcclxuICAgIHN1Z2dlc3Q7XHJcbiAgICBkYXRlcGlja2VyO1xyXG4gICAgYXJlYUVsO1xyXG4gICAgdGV4dEVsO1xyXG4gICAgdGV4dGxpbmVFbDtcclxuICAgIGVsO1xyXG4gICAgYXJlYU9mZnNldDtcclxuICAgIGZyZWV6ZTtcclxuICAgIGNlbGw7XHJcbiAgICBpbnB1dFRleHQ7XHJcbiAgICBjaGFuZ2U7XHJcbiAgICB2YWxpZGF0b3I7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtdWxhcywgdmlld0ZuLCByb3dIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLnZpZXdGbiA9IHZpZXdGbjtcclxuICAgICAgICB0aGlzLnJvd0hlaWdodCA9IHJvd0hlaWdodDtcclxuICAgICAgICB0aGlzLmZvcm11bGFzID0gZm9ybXVsYXM7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0ID0gbmV3IFN1Z2dlc3QoZm9ybXVsYXMsIChpdCkgPT4ge1xyXG4gICAgICAgICAgICBzdWdnZXN0SXRlbUNsaWNrLmNhbGwodGhpcywgaXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGF0ZXBpY2tlciA9IG5ldyBEYXRlcGlja2VyKCk7XHJcbiAgICAgICAgdGhpcy5kYXRlcGlja2VyLmNoYW5nZSgoZCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZDonLCBkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0KGRhdGVGb3JtYXQoZCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcmVhRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWVkaXRvci1hcmVhYClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCh0aGlzLnRleHRFbCA9IGgoJ3RleHRhcmVhJywgJycpXHJcbiAgICAgICAgICAgIC5vbignaW5wdXQnLCAoZXZ0KSA9PiBpbnB1dEV2ZW50SGFuZGxlci5jYWxsKHRoaXMsIGV2dCkpXHJcbiAgICAgICAgICAgIC5vbigncGFzdGUuc3RvcCcsICgpID0+IHsgfSlcclxuICAgICAgICAgICAgLm9uKCdrZXlkb3duJywgKGV2dCkgPT4ga2V5ZG93bkV2ZW50SGFuZGxlci5jYWxsKHRoaXMsIGV2dCkpKSwgKHRoaXMudGV4dGxpbmVFbCA9IGgoJ2RpdicsICd0ZXh0bGluZScpKSwgdGhpcy5zdWdnZXN0LmVsLCB0aGlzLmRhdGVwaWNrZXIuZWwpXHJcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlLnN0b3AnLCAoKSA9PiB7IH0pXHJcbiAgICAgICAgICAgIC5vbignbW91c2Vkb3duLnN0b3AnLCAoKSA9PiB7IH0pO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWVkaXRvcmApLmNoaWxkKHRoaXMuYXJlYUVsKS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0LmJpbmRJbnB1dEV2ZW50cyh0aGlzLnRleHRFbCk7XHJcbiAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZyZWV6ZSA9IHsgdzogMCwgaDogMCB9O1xyXG4gICAgICAgIHRoaXMuY2VsbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnB1dFRleHQgPSAnJztcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgIH1cclxuICAgIHNldEZyZWV6ZUxlbmd0aHMod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuZnJlZXplLncgPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmZyZWV6ZS5oID0gaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgLy8gY29uc3QgeyBjZWxsIH0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGNvbnN0IGNlbGxUZXh0ID0gKGNlbGwgJiYgY2VsbC50ZXh0KSB8fCAnJztcclxuICAgICAgICBpZiAodGhpcy5pbnB1dFRleHQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCdmaW5pc2hlZCcsIHRoaXMuaW5wdXRUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZWxsID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFyZWFPZmZzZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy50ZXh0RWwudmFsKCcnKTtcclxuICAgICAgICB0aGlzLnRleHRsaW5lRWwuaHRtbCgnJyk7XHJcbiAgICAgICAgcmVzZXRTdWdnZXN0SXRlbXMuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRhdGVwaWNrZXIuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2V0T2Zmc2V0KG9mZnNldCwgc3VnZ2VzdFBvc2l0aW9uID0gJ3RvcCcpIHtcclxuICAgICAgICBjb25zdCB7IHRleHRFbCwgYXJlYUVsLCBzdWdnZXN0LCBmcmVlemUsIGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChvZmZzZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgbCwgdCB9ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGVmdDonLCBsZWZ0LCAnLHRvcDonLCB0b3AsICcsIGZyZWV6ZTonLCBmcmVlemUpO1xyXG4gICAgICAgICAgICBjb25zdCBlbE9mZnNldCA9IHsgbGVmdDogMCwgdG9wOiAwIH07XHJcbiAgICAgICAgICAgIC8vIHRvcCBsZWZ0XHJcbiAgICAgICAgICAgIGlmIChmcmVlemUudyA+IGwgJiYgZnJlZXplLmggPiB0KSB7XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZyZWV6ZS53IDwgbCAmJiBmcmVlemUuaCA8IHQpIHtcclxuICAgICAgICAgICAgICAgIGVsT2Zmc2V0LmxlZnQgPSBmcmVlemUudztcclxuICAgICAgICAgICAgICAgIGVsT2Zmc2V0LnRvcCA9IGZyZWV6ZS5oO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZyZWV6ZS53ID4gbCkge1xyXG4gICAgICAgICAgICAgICAgZWxPZmZzZXQudG9wID0gZnJlZXplLmg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZnJlZXplLmggPiB0KSB7XHJcbiAgICAgICAgICAgICAgICBlbE9mZnNldC5sZWZ0ID0gZnJlZXplLnc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwub2Zmc2V0KGVsT2Zmc2V0KTtcclxuICAgICAgICAgICAgYXJlYUVsLm9mZnNldCh7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0IC0gZWxPZmZzZXQubGVmdCAtIDAuOCxcclxuICAgICAgICAgICAgICAgIHRvcDogdG9wIC0gZWxPZmZzZXQudG9wIC0gMC44LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGV4dEVsLm9mZnNldCh7IHdpZHRoOiB3aWR0aCAtIDkgKyAwLjgsIGhlaWdodDogaGVpZ2h0IC0gMyArIDAuOCB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc09mZnNldCA9IHsgbGVmdDogMCB9O1xyXG4gICAgICAgICAgICBzT2Zmc2V0W3N1Z2dlc3RQb3NpdGlvbl0gPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIHN1Z2dlc3Quc2V0T2Zmc2V0KHNPZmZzZXQpO1xyXG4gICAgICAgICAgICBzdWdnZXN0LmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRDZWxsKGNlbGwsIHZhbGlkYXRvcikge1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwuZWRpdGFibGUgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJzo6JywgdmFsaWRhdG9yKTtcclxuICAgICAgICBjb25zdCB7IGVsLCBkYXRlcGlja2VyLCBzdWdnZXN0IH0gPSB0aGlzO1xyXG4gICAgICAgIGVsLnNob3coKTtcclxuICAgICAgICB0aGlzLmNlbGwgPSBjZWxsO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSAoY2VsbCAmJiBjZWxsLnRleHQpIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dCh0ZXh0KTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcclxuICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdmFsaWRhdG9yO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlcGlja2VyLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGlmICghL15cXHMqJC8udGVzdCh0ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVwaWNrZXIuc2V0VmFsdWUodGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdsaXN0Jykge1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZXRJdGVtcyh2YWxpZGF0b3IudmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdC5zZWFyY2goJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0VGV4dCh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dFRleHQgPSB0ZXh0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0ZXh0Pj46JywgdGV4dCk7XHJcbiAgICAgICAgc2V0VGV4dC5jYWxsKHRoaXMsIHRleHQsIHRleHQubGVuZ3RoKTtcclxuICAgICAgICByZXNldFRleHRhcmVhU2l6ZS5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbiIsImNsYXNzIEVsZW1lbnQge1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWcsIGNsYXNzTmFtZSA9ICcnKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbCA9IHRhZztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhID0ge307XHJcbiAgICB9XHJcbiAgICBkYXRhKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldO1xyXG4gICAgfVxyXG4gICAgb24oZXZlbnROYW1lcywgaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IFtmZW4sIC4uLm9lbl0gPSBldmVudE5hbWVzLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IGV2ZW50TmFtZSA9IGZlbjtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnbW91c2V3aGVlbCcgJiZcclxuICAgICAgICAgICAgL0ZpcmVmb3gvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xyXG4gICAgICAgICAgICBldmVudE5hbWUgPSAnRE9NTW91c2VTY3JvbGwnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIoZXZ0KTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvZW4ubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBvZW5baV07XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PT0gJ2xlZnQnICYmIGV2dCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZXZ0LmJ1dHRvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrID09PSAncmlnaHQnICYmIGV2dCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZXZ0LmJ1dHRvbiAhPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrID09PSAnc3RvcCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIG9mZnNldCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNzcyhrLCBgJHt2YWx1ZVtrXX1weGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0VG9wLCBvZmZzZXRMZWZ0LCBvZmZzZXRIZWlnaHQsIG9mZnNldFdpZHRoIH0gPSB0aGlzLmVsO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogb2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBvZmZzZXRMZWZ0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG9mZnNldEhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGg6IG9mZnNldFdpZHRoLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzY3JvbGwodikge1xyXG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodi5sZWZ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnNjcm9sbExlZnQgPSB2LmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHYudG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IHYudG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGxlZnQ6IGVsLnNjcm9sbExlZnQsIHRvcDogZWwuc2Nyb2xsVG9wIH07XHJcbiAgICB9XHJcbiAgICBib3goKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB9XHJcbiAgICBwYXJlbnQoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHJldHVybiBuZXcgRWxlbWVudChwYXJlbnQpO1xyXG4gICAgfVxyXG4gICAgY2hpbGRyZW4oLi4uZWxlcykge1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVzLmZvckVhY2goKGVsZSkgPT4gdGhpcy5jaGlsZChlbGUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHJlbW92ZUNoaWxkKGVsKSB7XHJcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgZmlyc3QoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsLmZpcnN0Q2hpbGQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBsYXN0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5sYXN0Q2hpbGQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICByZW1vdmUoZWxlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsLnJlbW92ZUNoaWxkKGVsZSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcmVwZW5kKGVsZSkge1xyXG4gICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xyXG4gICAgICBpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGVsLmluc2VydEJlZm9yZShlbGUsIGVsLmZpcnN0Q2hpbGQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGVsZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcmV2KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBuZXh0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbC5uZXh0U2libGluZztcclxuICAgIH1cclxuICAgICovXHJcbiAgICBjaGlsZChhcmcpIHtcclxuICAgICAgICBsZXQgZWxlO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBlbGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhcmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZSA9IGFyZy5lbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZSA9IGFyZztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChlbGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY29udGFpbnMoZWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuY29udGFpbnMoZWxlKTtcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZSh2KSB7XHJcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNsYXNzTmFtZSA9IHY7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5jbGFzc05hbWU7XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzcyhuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGFzQ2xhc3MobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUNsYXNzKG5hbWUpIHtcclxuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB0b2dnbGUoY2xzID0gJ2FjdGl2ZScpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVDbGFzcyhjbHMpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlQ2xhc3MobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUobmFtZSk7XHJcbiAgICB9XHJcbiAgICBhY3RpdmUoZmxhZyA9IHRydWUsIGNscyA9ICdhY3RpdmUnKSB7XHJcbiAgICAgICAgaWYgKGZsYWcpXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoY2xzKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoY2xzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNoZWNrZWQoZmxhZyA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZShmbGFnLCAnY2hlY2tlZCcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZGlzYWJsZWQoZmxhZyA9IHRydWUpIHtcclxuICAgICAgICBpZiAoZmxhZylcclxuICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhdHRyKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoa2V5KS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShrLCBrZXlba10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdHRyKGtleSkge1xyXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBodG1sKGNvbnRlbnQpIHtcclxuICAgICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLmlubmVySFRNTDtcclxuICAgIH1cclxuICAgIHZhbCh2KSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmVsO1xyXG4gICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSB2O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZm9jdXMoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xyXG4gICAgfVxyXG4gICAgY3NzUmVtb3ZlS2V5cyguLi5rZXlzKSB7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKChrKSA9PiB0aGlzLmVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KGspKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNzcyhuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhuYW1lKS5mb3JFYWNoKChrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlW2tdID0gbmFtZVtrXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnN0eWxlW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5zdHlsZVtuYW1lXTtcclxuICAgIH1cclxuICAgIGNvbXB1dGVkU3R5bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwsIG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgaCA9ICh0YWcsIGNsYXNzTmFtZSA9ICcnKSA9PiBuZXcgRWxlbWVudCh0YWcsIGNsYXNzTmFtZSk7XHJcbmV4cG9ydCB7IEVsZW1lbnQsIGggfTtcclxuIiwiLyogZ2xvYmFsIHdpbmRvdyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYmluZCh0YXJnZXQsIG5hbWUsIGZuKSB7XHJcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmbik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHVuYmluZCh0YXJnZXQsIG5hbWUsIGZuKSB7XHJcbiAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmbik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHVuYmluZENsaWNrb3V0c2lkZShlbCkge1xyXG4gICAgaWYgKGVsLnhjbGlja291dHNpZGUpIHtcclxuICAgICAgICB1bmJpbmQod2luZG93LmRvY3VtZW50LmJvZHksICdjbGljaycsIGVsLnhjbGlja291dHNpZGUpO1xyXG4gICAgICAgIGRlbGV0ZSBlbC54Y2xpY2tvdXRzaWRlO1xyXG4gICAgfVxyXG59XHJcbi8vIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbjogbW91c2Vkb3duIOKGkiBtb3VzZXVwIOKGkiBjbGlja1xyXG4vLyB0aGUgcmlnaHQgbW91c2UgYnV0dG9uOiBtb3VzZWRvd24g4oaSIGNvbnRlbnh0bWVudSDihpIgbW91c2V1cFxyXG4vLyB0aGUgcmlnaHQgbW91c2UgYnV0dG9uIGluIGZpcmVmb3goPjY1LjApOiBtb3VzZWRvd24g4oaSIGNvbnRlbnh0bWVudSDihpIgbW91c2V1cCDihpIgY2xpY2sgb24gd2luZG93XHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kQ2xpY2tvdXRzaWRlKGVsLCBjYikge1xyXG4gICAgZWwueGNsaWNrb3V0c2lkZSA9IChldnQpID0+IHtcclxuICAgICAgICAvLyBpZ25vcmUgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2V2dDonLCBldnQpO1xyXG4gICAgICAgIGlmIChldnQuZGV0YWlsID09PSAyIHx8IGVsLmNvbnRhaW5zKGV2dC50YXJnZXQpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGNiKSB7XHJcbiAgICAgICAgICAgIGNiKGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLmhpZGUoKTtcclxuICAgICAgICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYmluZCh3aW5kb3cuZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgZWwueGNsaWNrb3V0c2lkZSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIG1vdXNlTW92ZVVwKHRhcmdldCwgbW92ZWZ1bmMsIHVwZnVuYykge1xyXG4gICAgYmluZCh0YXJnZXQsICdtb3VzZW1vdmUnLCBtb3ZlZnVuYyk7XHJcbiAgICBjb25zdCB0ID0gdGFyZ2V0O1xyXG4gICAgdC54RXZ0VXAgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNldXA+Pj4nKTtcclxuICAgICAgICB1bmJpbmQodGFyZ2V0LCAnbW91c2Vtb3ZlJywgbW92ZWZ1bmMpO1xyXG4gICAgICAgIHVuYmluZCh0YXJnZXQsICdtb3VzZXVwJywgdGFyZ2V0LnhFdnRVcCk7XHJcbiAgICAgICAgdXBmdW5jKGV2dCk7XHJcbiAgICB9O1xyXG4gICAgYmluZCh0YXJnZXQsICdtb3VzZXVwJywgdGFyZ2V0LnhFdnRVcCk7XHJcbn1cclxuZnVuY3Rpb24gY2FsVG91Y2hEaXJlY3Rpb24oc3BhbngsIHNwYW55LCBldnQsIGNiKSB7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gJyc7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc3Bhbng6Jywgc3BhbngsICcsIHNwYW55OicsIHNwYW55KTtcclxuICAgIGlmIChNYXRoLmFicyhzcGFueCkgPiBNYXRoLmFicyhzcGFueSkpIHtcclxuICAgICAgICAvLyBob3Jpem9udGFsXHJcbiAgICAgICAgZGlyZWN0aW9uID0gc3BhbnggPiAwID8gJ3JpZ2h0JyA6ICdsZWZ0JztcclxuICAgICAgICBjYihkaXJlY3Rpb24sIHNwYW54LCBldnQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gdmVydGljYWxcclxuICAgICAgICBkaXJlY3Rpb24gPSBzcGFueSA+IDAgPyAnZG93bicgOiAndXAnO1xyXG4gICAgICAgIGNiKGRpcmVjdGlvbiwgc3BhbnksIGV2dCk7XHJcbiAgICB9XHJcbn1cclxuLy8gY2IgPSAoZGlyZWN0aW9uLCBkaXN0YW5jZSkgPT4ge31cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRUb3VjaCh0YXJnZXQsIHsgbW92ZSwgZW5kIH0pIHtcclxuICAgIGxldCBzdGFydHggPSAwO1xyXG4gICAgbGV0IHN0YXJ0eSA9IDA7XHJcbiAgICBiaW5kKHRhcmdldCwgJ3RvdWNoc3RhcnQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBwYWdlWCwgcGFnZVkgfSA9IGV2dC50b3VjaGVzWzBdO1xyXG4gICAgICAgIHN0YXJ0eCA9IHBhZ2VYO1xyXG4gICAgICAgIHN0YXJ0eSA9IHBhZ2VZO1xyXG4gICAgfSk7XHJcbiAgICBiaW5kKHRhcmdldCwgJ3RvdWNobW92ZScsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIW1vdmUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHBhZ2VYLCBwYWdlWSB9ID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgICAgIGNvbnN0IHNwYW54ID0gcGFnZVggLSBzdGFydHg7XHJcbiAgICAgICAgY29uc3Qgc3BhbnkgPSBwYWdlWSAtIHN0YXJ0eTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoc3BhbngpID4gMTAgfHwgTWF0aC5hYnMoc3BhbnkpID4gMTApIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NwYW54OicsIHNwYW54LCAnLCBzcGFueTonLCBzcGFueSk7XHJcbiAgICAgICAgICAgIGNhbFRvdWNoRGlyZWN0aW9uKHNwYW54LCBzcGFueSwgZXZ0LCBtb3ZlKTtcclxuICAgICAgICAgICAgc3RhcnR4ID0gcGFnZVg7XHJcbiAgICAgICAgICAgIHN0YXJ0eSA9IHBhZ2VZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgYmluZCh0YXJnZXQsICd0b3VjaGVuZCcsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIWVuZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgcGFnZVgsIHBhZ2VZIH0gPSBldnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICAgICAgY29uc3Qgc3BhbnggPSBwYWdlWCAtIHN0YXJ0eDtcclxuICAgICAgICBjb25zdCBzcGFueSA9IHBhZ2VZIC0gc3RhcnR5O1xyXG4gICAgICAgIGNhbFRvdWNoRGlyZWN0aW9uKHNwYW54LCBzcGFueSwgZXZ0LCBlbmQpO1xyXG4gICAgfSk7XHJcbn1cclxuLy8gZXZlbnRlbWl0ZXJcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW1pdHRlcigpIHtcclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCBwdXNoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdGVuZXIgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKEFycmF5LmlzQXJyYXkoY3VycmVudExpc3RlbmVyKSAmJiBjdXJyZW50TGlzdGVuZXIucHVzaChjYWxsYmFjaykpIHx8XHJcbiAgICAgICAgICAgICAgICBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjcmVhdGUgPSAoKSA9PiBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgW10uY29uY2F0KGNhbGxiYWNrKSk7XHJcbiAgICAgICAgcmV0dXJuIChsaXN0ZW5lcnMuaGFzKGV2ZW50TmFtZSkgJiYgcHVzaCgpKSB8fCBjcmVhdGUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZpcmUoZXZlbnROYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgY29uc3QgZXhlYyA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpc3RlbmVyID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGN1cnJlbnRMaXN0ZW5lcilcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgLi4uYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzLmhhcyhldmVudE5hbWUpICYmIGV4ZWMoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCByZW1vdmUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lciA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgY29uc3QgaWR4ID0gY3VycmVudExpc3RlbmVyLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gKGlkeCA+PSAwICYmXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlzdGVuZXIuc3BsaWNlKGlkeCwgMSkgJiZcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKS5sZW5ndGggPT09IDAgJiZcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzLmhhcyhldmVudE5hbWUpICYmIHJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25jZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgY29uc3QgZXhlY0NhbGxsYmFjayA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobnVsbCwgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgZXhlY0NhbGxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gb24oZXZlbnROYW1lLCBleGVjQ2FsbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycygpIHtcclxuICAgICAgICBsaXN0ZW5lcnMuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0IGN1cnJlbnQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbixcclxuICAgICAgICBvbmNlLFxyXG4gICAgICAgIGZpcmUsXHJcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIsXHJcbiAgICAgICAgcmVtb3ZlQWxsTGlzdGVuZXJzLFxyXG4gICAgfTtcclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5jb25zdCBwYXR0ZXJucyA9IHtcclxuICAgIG51bWJlcjogLyheXFxkKyQpfCheXFxkKyhcXC5cXGR7MCw0fSk/JCkvLFxyXG4gICAgZGF0ZTogL15cXGR7NH0tXFxkezEsMn0tXFxkezEsMn0kLyxcclxufTtcclxuLy8gcnVsZTogeyByZXF1aXJlZDogZmFsc2UsIHR5cGUsIHBhdHRlcm46IC8vIH1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybUZpZWxkIHtcclxuICAgIGxhYmVsO1xyXG4gICAgcnVsZTtcclxuICAgIHRpcDtcclxuICAgIGlucHV0O1xyXG4gICAgZWw7XHJcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCwgcnVsZSwgbGFiZWwsIGxhYmVsV2lkdGgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsID0gJyc7XHJcbiAgICAgICAgdGhpcy5ydWxlID0gcnVsZTtcclxuICAgICAgICBpZiAobGFiZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGgoJ2xhYmVsJywgJ2xhYmVsJykuY3NzKCd3aWR0aCcsIGAke2xhYmVsV2lkdGh9cHhgKS5odG1sKGxhYmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aXAgPSBoKCdkaXYnLCAndGlwJykuY2hpbGQoJ3RpcCcpLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XHJcbiAgICAgICAgdGhpcy5pbnB1dC52Y2hhbmdlID0gKCkgPT4gdGhpcy52YWxpZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWZvcm0tZmllbGRgKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4odGhpcy5sYWJlbCwgaW5wdXQuZWwsIHRoaXMudGlwKTtcclxuICAgIH1cclxuICAgIGlzU2hvdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbC5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmVsLnNob3coKTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB2YWwodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0LnZhbCh2KTtcclxuICAgIH1cclxuICAgIGhpbnQoaGludCkge1xyXG4gICAgICAgIHRoaXMuaW5wdXQuaGludChoaW50KTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5wdXQsIHJ1bGUsIHRpcCwgZWwsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHYgPSBpbnB1dC52YWwoKTtcclxuICAgICAgICBpZiAocnVsZS5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgICBpZiAoL15cXHMqJC8udGVzdCh2KSkge1xyXG4gICAgICAgICAgICAgICAgdGlwLmh0bWwodCgndmFsaWRhdGlvbi5yZXF1aXJlZCcpKTtcclxuICAgICAgICAgICAgICAgIGVsLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChydWxlLnR5cGUgfHwgcnVsZS5wYXR0ZXJuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBydWxlLnBhdHRlcm4gfHwgcGF0dGVybnNbcnVsZS50eXBlXTtcclxuICAgICAgICAgICAgaWYgKCFwYXR0ZXJuLnRlc3QodikpIHtcclxuICAgICAgICAgICAgICAgIHRpcC5odG1sKHQoJ3ZhbGlkYXRpb24ubm90TWF0Y2gnKSk7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbC5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybUlucHV0IHtcclxuICAgIHZjaGFuZ2U7XHJcbiAgICBlbDtcclxuICAgIGlucHV0O1xyXG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhpbnQpIHtcclxuICAgICAgICB0aGlzLnZjaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZm9ybS1pbnB1dGApO1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSBoKCdpbnB1dCcsICcnKS5jc3MoJ3dpZHRoJywgd2lkdGgpXHJcbiAgICAgICAgICAgIC5vbignaW5wdXQnLCBldnQgPT4gdGhpcy52Y2hhbmdlKGV2dCkpXHJcbiAgICAgICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsIGhpbnQpO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGhpcy5pbnB1dCk7XHJcbiAgICB9XHJcbiAgICBmb2N1cygpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dC5lbC5mb2N1cygpO1xyXG4gICAgICAgIH0sIDEwKTtcclxuICAgIH1cclxuICAgIGhpbnQodikge1xyXG4gICAgICAgIHRoaXMuaW5wdXQuYXR0cigncGxhY2Vob2xkZXInLCB2KTtcclxuICAgIH1cclxuICAgIHZhbCh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQudmFsKHYpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgU3VnZ2VzdCBmcm9tICcuL3N1Z2dlc3QnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtU2VsZWN0IHtcclxuICAgIGtleTtcclxuICAgIGdldFRpdGxlO1xyXG4gICAgdmNoYW5nZTtcclxuICAgIGVsO1xyXG4gICAgc3VnZ2VzdDtcclxuICAgIGl0ZW1FbDtcclxuICAgIGNvbnN0cnVjdG9yKGtleSwgaXRlbXMsIHdpZHRoLCBnZXRUaXRsZSA9IChpdCkgPT4gaXQsIGNoYW5nZSA9IChrZXkpID0+IHsgfSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuZ2V0VGl0bGUgPSBnZXRUaXRsZTtcclxuICAgICAgICB0aGlzLnZjaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZm9ybS1zZWxlY3RgKTtcclxuICAgICAgICB0aGlzLnN1Z2dlc3QgPSBuZXcgU3VnZ2VzdChpdGVtcy5tYXAoKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGtleTogaXQsIHRpdGxlOiB0aGlzLmdldFRpdGxlKGl0KSB9O1xyXG4gICAgICAgIH0pLCAoaXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtQ2xpY2soaXQua2V5KTtcclxuICAgICAgICAgICAgY2hhbmdlKGl0LmtleSk7XHJcbiAgICAgICAgICAgIHRoaXMudmNoYW5nZShpdC5rZXkpO1xyXG4gICAgICAgIH0sIHdpZHRoKTtcclxuICAgICAgICB0aGlzLmVsXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbigodGhpcy5pdGVtRWwgPSBoKCdkaXYnLCAnaW5wdXQtdGV4dCcpLmh0bWwodGhpcy5nZXRUaXRsZShrZXkpKSksIHRoaXMuc3VnZ2VzdC5lbClcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHRoaXMuc2hvdygpKTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0LnNlYXJjaCgnJyk7XHJcbiAgICB9XHJcbiAgICBpdGVtQ2xpY2soaXQpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGl0O1xyXG4gICAgICAgIHRoaXMuaXRlbUVsLmh0bWwodGhpcy5nZXRUaXRsZShpdCkpO1xyXG4gICAgfVxyXG4gICAgdmFsKHYpIHtcclxuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMua2V5ID0gdjtcclxuICAgICAgICAgICAgdGhpcy5pdGVtRWwuaHRtbCh0aGlzLmdldFRpdGxlKHYpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmtleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBFbGVtZW50LCBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvbiBleHRlbmRzIEVsZW1lbnQge1xyXG4gICAgaWNvbk5hbWVFbDtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICBzdXBlcignZGl2JywgYCR7Y3NzUHJlZml4fS1pY29uYCk7XHJcbiAgICAgICAgdGhpcy5pY29uTmFtZUVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pY29uLWltZyAke25hbWV9YCk7XHJcbiAgICAgICAgdGhpcy5jaGlsZCh0aGlzLmljb25OYW1lRWwpO1xyXG4gICAgfVxyXG4gICAgc2V0TmFtZShuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5pY29uTmFtZUVsLmNsYXNzTmFtZShgJHtjc3NQcmVmaXh9LWljb24taW1nICR7bmFtZX1gKTtcclxuICAgIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgZG9jdW1lbnQgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBJY29uIGZyb20gJy4vaWNvbic7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmV4cG9ydCBmdW5jdGlvbiB4dG9hc3QodGl0bGUsIGNvbnRlbnQpIHtcclxuICAgIGNvbnN0IGVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b2FzdGApO1xyXG4gICAgY29uc3QgZGltbWVyID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1kaW1tZXIgYWN0aXZlYCk7XHJcbiAgICBjb25zdCByZW1vdmUgPSAoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbC5lbCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaW1tZXIuZWwpO1xyXG4gICAgfTtcclxuICAgIGVsLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9hc3QtaGVhZGVyYCkuY2hpbGRyZW4obmV3IEljb24oJ2Nsb3NlJykub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiByZW1vdmUoKSksIHRpdGxlKSwgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b2FzdC1jb250ZW50YCkuaHRtbChjb250ZW50KSk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsLmVsKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGltbWVyLmVsKTtcclxuICAgIC8vIHNldCBvZmZzZXRcclxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZWwuYm94KCk7XHJcbiAgICBjb25zdCB7IGNsaWVudEhlaWdodCwgY2xpZW50V2lkdGggfSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgIGVsLm9mZnNldCh7XHJcbiAgICAgICAgbGVmdDogKGNsaWVudFdpZHRoIC0gd2lkdGgpIC8gMixcclxuICAgICAgICB0b3A6IChjbGllbnRIZWlnaHQgLSBoZWlnaHQpIC8gMyxcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCIvKiBnbG9iYWwgZG9jdW1lbnQgKi9cclxuLyogZ2xvYmFsIHdpbmRvdyAqL1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IEljb24gZnJvbSAnLi9pY29uJztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgYmluZCwgdW5iaW5kIH0gZnJvbSAnLi9ldmVudCc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICAgIHRpdGxlO1xyXG4gICAgZWw7XHJcbiAgICBkaW1tZXI7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgY29udGVudCwgd2lkdGggPSAnNjAwcHgnKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LW1vZGFsYClcclxuICAgICAgICAgICAgLmNzcygnd2lkdGgnLCB3aWR0aClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tbW9kYWwtaGVhZGVyYCkuY2hpbGRyZW4obmV3IEljb24oJ2Nsb3NlJykub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLmhpZGUoKSksIHRoaXMudGl0bGUpLCBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LW1vZGFsLWNvbnRlbnRgKS5jaGlsZHJlbiguLi5jb250ZW50KSlcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgLy8gZGltbWVyXHJcbiAgICAgICAgdGhpcy5kaW1tZXIgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWRpbW1lciBhY3RpdmVgKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZGltbWVyLmVsKTtcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZWwuc2hvdygpLmJveCgpO1xyXG4gICAgICAgIGNvbnN0IHsgY2xpZW50SGVpZ2h0LCBjbGllbnRXaWR0aCB9ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuZWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgbGVmdDogKGNsaWVudFdpZHRoIC0gd2lkdGgpIC8gMixcclxuICAgICAgICAgICAgdG9wOiAoY2xpZW50SGVpZ2h0IC0gaGVpZ2h0KSAvIDMsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LnhrZXlkb3duRXNjID0gKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDI3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYmluZCh3aW5kb3csICdrZXlkb3duJywgd2luZG93LnhrZXlkb3duRXNjKTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmRpbW1lci5lbCk7XHJcbiAgICAgICAgdW5iaW5kKHdpbmRvdywgJ2tleWRvd24nLCB3aW5kb3cueGtleWRvd25Fc2MpO1xyXG4gICAgICAgIGRlbGV0ZSB3aW5kb3cueGtleWRvd25Fc2M7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gJy4vbW9kYWwnO1xyXG5pbXBvcnQgRm9ybUlucHV0IGZyb20gJy4vZm9ybV9pbnB1dCc7XHJcbmltcG9ydCBGb3JtU2VsZWN0IGZyb20gJy4vZm9ybV9zZWxlY3QnO1xyXG5pbXBvcnQgRm9ybUZpZWxkIGZyb20gJy4vZm9ybV9maWVsZCc7XHJcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9idXR0b24nO1xyXG5pbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5jb25zdCBmaWVsZExhYmVsV2lkdGggPSAxMDA7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsVmFsaWRhdGlvbiBleHRlbmRzIE1vZGFsIHtcclxuICAgIG1mO1xyXG4gICAgcmY7XHJcbiAgICBjZjtcclxuICAgIG9mO1xyXG4gICAgbWludmY7XHJcbiAgICBtYXh2ZjtcclxuICAgIHZmO1xyXG4gICAgc3ZmO1xyXG4gICAgY2hhbmdlO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc3QgbWYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtU2VsZWN0KCdjZWxsJywgWydjZWxsJ10sIC8vIGNlbGx8cm93fGNvbHVtblxyXG4gICAgICAgICcxMDAlJywgKGl0KSA9PiB0KGBkYXRhVmFsaWRhdGlvbi5tb2RlVHlwZS4ke2l0fWApKSwgeyByZXF1aXJlZDogdHJ1ZSB9LCBgJHt0KCdkYXRhVmFsaWRhdGlvbi5yYW5nZScpfTpgLCBmaWVsZExhYmVsV2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IHJmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCcxMjBweCcsICdFMyBvciBFMzpGMTInKSwge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGF0dGVybjogL14oW0EtWl17MSwyfVsxLTldXFxkKikoOltBLVpdezEsMn1bMS05XVxcZCopPyQvLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybVNlbGVjdCgnbGlzdCcsIFsnbGlzdCcsICdudW1iZXInLCAnZGF0ZScsICdwaG9uZScsICdlbWFpbCddLCAnMTAwJScsIChpdCkgPT4gdChgZGF0YVZhbGlkYXRpb24udHlwZS4ke2l0fWApLCAoaXQpID0+IHRoaXMuY3JpdGVyaWFTZWxlY3RlZChpdCkpLCB7IHJlcXVpcmVkOiB0cnVlIH0sIGAke3QoJ2RhdGFWYWxpZGF0aW9uLmNyaXRlcmlhJyl9OmAsIGZpZWxkTGFiZWxXaWR0aCk7XHJcbiAgICAgICAgLy8gb3BlcmF0b3JcclxuICAgICAgICBjb25zdCBvZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1TZWxlY3QoJ2JlJywgWydiZScsICduYmUnLCAnZXEnLCAnbmVxJywgJ2x0JywgJ2x0ZScsICdndCcsICdndGUnXSwgJzE2MHB4JywgKGl0KSA9PiB0KGBkYXRhVmFsaWRhdGlvbi5vcGVyYXRvci4ke2l0fWApLCAoaXQpID0+IHRoaXMuY3JpdGVyaWFPcGVyYXRvclNlbGVjdGVkKGl0KSksIHsgcmVxdWlyZWQ6IHRydWUgfSkuaGlkZSgpO1xyXG4gICAgICAgIC8vIG1pbiwgbWF4XHJcbiAgICAgICAgY29uc3QgbWludmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzcwcHgnLCAnMTAnKSwge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9KS5oaWRlKCk7XHJcbiAgICAgICAgY29uc3QgbWF4dmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzcwcHgnLCAnMTAwJyksIHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgIH0pLmhpZGUoKTtcclxuICAgICAgICAvLyB2YWx1ZVxyXG4gICAgICAgIGNvbnN0IHN2ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnMTIwcHgnLCAnYSxiLGMnKSwge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB2ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnNzBweCcsICcxMCcpLCB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICB9KS5oaWRlKCk7XHJcbiAgICAgICAgc3VwZXIodCgnY29udGV4dG1lbnUudmFsaWRhdGlvbicpLCBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tZm9ybS1maWVsZHNgKS5jaGlsZHJlbihtZi5lbCwgcmYuZWwpLFxyXG4gICAgICAgICAgICBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWZvcm0tZmllbGRzYCkuY2hpbGRyZW4oY2YuZWwsIG9mLmVsLCBtaW52Zi5lbCwgbWF4dmYuZWwsIHZmLmVsLCBzdmYuZWwpLFxyXG4gICAgICAgICAgICBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWJ1dHRvbnNgKS5jaGlsZHJlbihuZXcgQnV0dG9uKCdjYW5jZWwnKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdjYW5jZWwnKSksIG5ldyBCdXR0b24oJ3JlbW92ZScpLm9uKCdjbGljaycsICgpID0+IHRoaXMuYnRuQ2xpY2soJ3JlbW92ZScpKSwgbmV3IEJ1dHRvbignc2F2ZScsICdwcmltYXJ5Jykub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5idG5DbGljaygnc2F2ZScpKSksXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdGhpcy5tZiA9IG1mO1xyXG4gICAgICAgIHRoaXMucmYgPSByZjtcclxuICAgICAgICB0aGlzLmNmID0gY2Y7XHJcbiAgICAgICAgdGhpcy5vZiA9IG9mO1xyXG4gICAgICAgIHRoaXMubWludmYgPSBtaW52ZjtcclxuICAgICAgICB0aGlzLm1heHZmID0gbWF4dmY7XHJcbiAgICAgICAgdGhpcy52ZiA9IHZmO1xyXG4gICAgICAgIHRoaXMuc3ZmID0gc3ZmO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgc2hvd1ZmKGl0KSB7XHJcbiAgICAgICAgY29uc3QgaGludCA9IGl0ID09PSAnZGF0ZScgPyAnMjAxOC0xMS0xMicgOiAnMTAnO1xyXG4gICAgICAgIGNvbnN0IHsgdmYgfSA9IHRoaXM7XHJcbiAgICAgICAgdmYuaW5wdXQuaGludChoaW50KTtcclxuICAgICAgICB2Zi5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBjcml0ZXJpYVNlbGVjdGVkKGl0KSB7XHJcbiAgICAgICAgY29uc3QgeyBvZiwgbWludmYsIG1heHZmLCB2Ziwgc3ZmIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChpdCA9PT0gJ2RhdGUnIHx8IGl0ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBvZi5zaG93KCk7XHJcbiAgICAgICAgICAgIG1pbnZmLnJ1bGUudHlwZSA9IGl0O1xyXG4gICAgICAgICAgICBtYXh2Zi5ydWxlLnR5cGUgPSBpdDtcclxuICAgICAgICAgICAgaWYgKGl0ID09PSAnZGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIG1pbnZmLmhpbnQoJzIwMTgtMTEtMTInKTtcclxuICAgICAgICAgICAgICAgIG1heHZmLmhpbnQoJzIwMTktMTEtMTInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1pbnZmLmhpbnQoJzEwJyk7XHJcbiAgICAgICAgICAgICAgICBtYXh2Zi5oaW50KCcxMDAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtaW52Zi5zaG93KCk7XHJcbiAgICAgICAgICAgIG1heHZmLnNob3coKTtcclxuICAgICAgICAgICAgdmYuaGlkZSgpO1xyXG4gICAgICAgICAgICBzdmYuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGl0ID09PSAnbGlzdCcpIHtcclxuICAgICAgICAgICAgICAgIHN2Zi5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdmYuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZmLmhpZGUoKTtcclxuICAgICAgICAgICAgb2YuaGlkZSgpO1xyXG4gICAgICAgICAgICBtaW52Zi5oaWRlKCk7XHJcbiAgICAgICAgICAgIG1heHZmLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQoaXQpIHtcclxuICAgICAgICBpZiAoIWl0KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeyBtaW52ZiwgbWF4dmYsIHZmIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChpdCA9PT0gJ2JlJyB8fCBpdCA9PT0gJ25iZScpIHtcclxuICAgICAgICAgICAgbWludmYuc2hvdygpO1xyXG4gICAgICAgICAgICBtYXh2Zi5zaG93KCk7XHJcbiAgICAgICAgICAgIHZmLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLmNmLnZhbCgpO1xyXG4gICAgICAgICAgICB2Zi5ydWxlLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICB2Zi5oaW50KCcyMDE4LTExLTEyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2Zi5oaW50KCcxMCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZmLnNob3coKTtcclxuICAgICAgICAgICAgbWludmYuaGlkZSgpO1xyXG4gICAgICAgICAgICBtYXh2Zi5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYnRuQ2xpY2soYWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UoJ3JlbW92ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnc2F2ZScpIHtcclxuICAgICAgICAgICAgLy8gdmFsaWRhdGVcclxuICAgICAgICAgICAgY29uc3QgYXR0cnMgPSBbJ21mJywgJ3JmJywgJ2NmJywgJ29mJywgJ3N2ZicsICd2ZicsICdtaW52ZicsICdtYXh2ZiddO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXNbYXR0cnNbaV1dO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpZWxkOicsIGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5pc1Nob3coKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpdDonLCBpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWVsZC52YWxpZGF0ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMubWYudmFsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IHRoaXMucmYudmFsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLmNmLnZhbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBvcGVyYXRvciA9IHRoaXMub2YudmFsKCk7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuc3ZmLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicgfHwgdHlwZSA9PT0gJ2RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZScgfHwgb3BlcmF0b3IgPT09ICduYmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBbdGhpcy5taW52Zi52YWwoKSwgdGhpcy5tYXh2Zi52YWwoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmYudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobW9kZSwgcmVmLCB0eXBlLCBvcGVyYXRvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZSgnc2F2ZScsIG1vZGUsIHJlZiwge1xyXG4gICAgICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgICAgIG9wZXJhdG9yLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcclxuICAgIH1cclxuICAgIC8vIHZhbGlkYXRpb246IHsgbW9kZSwgcmVmLCB2YWxpZGF0b3IgfVxyXG4gICAgc2V0VmFsdWUodikge1xyXG4gICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWYsIHJmLCBjZiwgb2YsIHN2ZiwgdmYsIG1pbnZmLCBtYXh2ZiB9ID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3QgeyBtb2RlLCByZWYsIHZhbGlkYXRvciB9ID0gdjtcclxuICAgICAgICAgICAgY29uc3QgeyB0eXBlLCBvcGVyYXRvciwgdmFsdWUgfSA9IHZhbGlkYXRvciB8fCB7IHR5cGU6ICdsaXN0JyB9O1xyXG4gICAgICAgICAgICBtZi52YWwobW9kZSB8fCAnY2VsbCcpO1xyXG4gICAgICAgICAgICByZi52YWwocmVmKTtcclxuICAgICAgICAgICAgY2YudmFsKHR5cGUpO1xyXG4gICAgICAgICAgICBvZi52YWwob3BlcmF0b3IpO1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIG1pbnZmLnZhbCh2YWx1ZVswXSk7XHJcbiAgICAgICAgICAgICAgICBtYXh2Zi52YWwodmFsdWVbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3ZmLnZhbCh2YWx1ZSB8fCAnJyk7XHJcbiAgICAgICAgICAgICAgICB2Zi52YWwodmFsdWUgfHwgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY3JpdGVyaWFTZWxlY3RlZCh0eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5jcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQob3BlcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3coKTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgZG9jdW1lbnQgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9idXR0b24nO1xyXG5pbXBvcnQgeyBEcmF3IH0gZnJvbSAnLi4vY2FudmFzL2RyYXcnO1xyXG5pbXBvcnQgeyByZW5kZXJDZWxsIH0gZnJvbSAnLi90YWJsZSc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuLy8gcmVzb2x1dGlvbjogNzIgPT4gNTk1IHggODQyXHJcbi8vIDE1MCA9PiAxMjQwIHggMTc1NFxyXG4vLyAyMDAgPT4gMTY1NCB4IDIzMzlcclxuLy8gMzAwID0+IDI0NzkgeCAzNTA4XHJcbi8vIDk2ICogY20gLyAyLjU0ICwgOTYgKiBjbSAvIDIuNTRcclxuY29uc3QgUEFHRVJfU0laRVMgPSBbXHJcbiAgICBbJ0EzJywgMTEuNjksIDE2LjU0XSxcclxuICAgIFsnQTQnLCA4LjI3LCAxMS42OV0sXHJcbiAgICBbJ0E1JywgNS44MywgOC4yN10sXHJcbiAgICBbJ0I0JywgOS44NCwgMTMuOTBdLFxyXG4gICAgWydCNScsIDYuOTMsIDkuODRdLFxyXG5dO1xyXG5jb25zdCBQQUdFUl9PUklFTlRBVElPTlMgPSBbJ2xhbmRzY2FwZScsICdwb3J0cmFpdCddO1xyXG5mdW5jdGlvbiBpbmNoZXMycHgoaW5jKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcig5NiAqIGluYyk7XHJcbn1cclxuZnVuY3Rpb24gYnRuQ2xpY2sodHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT09ICdjYW5jZWwnKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLnRvUHJpbnQoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwYWdlclNpemVDaGFuZ2UoZXZ0KSB7XHJcbiAgICBjb25zdCB7IHBhcGVyIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gZXZ0LnRhcmdldDtcclxuICAgIGNvbnN0IHBzID0gUEFHRVJfU0laRVNbdmFsdWVdO1xyXG4gICAgcGFwZXIudyA9IGluY2hlczJweChwc1sxXSk7XHJcbiAgICBwYXBlci5oID0gaW5jaGVzMnB4KHBzWzJdKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdwYXBlcjonLCBwcywgcGFwZXIpO1xyXG4gICAgdGhpcy5wcmV2aWV3KCk7XHJcbn1cclxuZnVuY3Rpb24gcGFnZXJPcmllbnRhdGlvbkNoYW5nZShldnQpIHtcclxuICAgIGNvbnN0IHsgcGFwZXIgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHZhbHVlIH0gPSBldnQudGFyZ2V0O1xyXG4gICAgY29uc3QgdiA9IFBBR0VSX09SSUVOVEFUSU9OU1t2YWx1ZV07XHJcbiAgICBwYXBlci5vcmllbnRhdGlvbiA9IHY7XHJcbiAgICB0aGlzLnByZXZpZXcoKTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmludCB7XHJcbiAgICBwYXBlcjtcclxuICAgIGRhdGE7XHJcbiAgICBlbDtcclxuICAgIGNvbnRlbnRFbDtcclxuICAgIGNhbnZhc2VzO1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIHRoaXMucGFwZXIgPSB7XHJcbiAgICAgICAgICAgIHc6IGluY2hlczJweChQQUdFUl9TSVpFU1swXVsxXSksXHJcbiAgICAgICAgICAgIGg6IGluY2hlczJweChQQUdFUl9TSVpFU1swXVsyXSksXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDUwLFxyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogUEFHRVJfT1JJRU5UQVRJT05TWzBdLFxyXG4gICAgICAgICAgICBnZXQgd2lkdGgoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScgPyB0aGlzLmggOiB0aGlzLnc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldCBoZWlnaHQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScgPyB0aGlzLncgOiB0aGlzLmg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXByaW50YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tcHJpbnQtYmFyYClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKGgoJ2RpdicsICctdGl0bGUnKS5jaGlsZCgnUHJpbnQgc2V0dGluZ3MnKSwgaCgnZGl2JywgJy1yaWdodCcpLmNoaWxkcmVuKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tYnV0dG9uc2ApLmNoaWxkcmVuKG5ldyBCdXR0b24oJ2NhbmNlbCcpLm9uKCdjbGljaycsIGJ0bkNsaWNrLmJpbmQodGhpcywgJ2NhbmNlbCcpKSwgbmV3IEJ1dHRvbignbmV4dCcsICdwcmltYXJ5Jykub24oJ2NsaWNrJywgYnRuQ2xpY2suYmluZCh0aGlzLCAnbmV4dCcpKSkpKSwgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1wcmludC1jb250ZW50YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKHRoaXMuY29udGVudEVsID0gaCgnZGl2JywgJy1jb250ZW50JyksIGgoJ2RpdicsICctc2lkZXInKS5jaGlsZChoKCdmb3JtJywgJycpLmNoaWxkcmVuKGgoJ2ZpZWxkc2V0JywgJycpLmNoaWxkcmVuKGgoJ2xhYmVsJywgJycpLmNoaWxkKGAke3QoJ3ByaW50LnNpemUnKX1gKSwgaCgnc2VsZWN0JywgJycpLmNoaWxkcmVuKC4uLlBBR0VSX1NJWkVTLm1hcCgoaXQsIGluZGV4KSA9PiBoKCdvcHRpb24nLCAnJykuYXR0cigndmFsdWUnLCBpbmRleCkuY2hpbGQoYCR7aXRbMF19ICggJHtpdFsxXX0nJ3gke2l0WzJdfScnIClgKSkpLm9uKCdjaGFuZ2UnLCBwYWdlclNpemVDaGFuZ2UuYmluZCh0aGlzKSkpLCBoKCdmaWVsZHNldCcsICcnKS5jaGlsZHJlbihoKCdsYWJlbCcsICcnKS5jaGlsZChgJHt0KCdwcmludC5vcmllbnRhdGlvbicpfWApLCBoKCdzZWxlY3QnLCAnJykuY2hpbGRyZW4oLi4uUEFHRVJfT1JJRU5UQVRJT05TLm1hcCgoaXQsIGluZGV4KSA9PiBoKCdvcHRpb24nLCAnJykuYXR0cigndmFsdWUnLCBpbmRleCkuY2hpbGQoYCR7dCgncHJpbnQub3JpZW50YXRpb25zJylbaW5kZXhdfWApKSkub24oJ2NoYW5nZScsIHBhZ2VyT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSkpKSkpKS5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICBwcmV2aWV3KCkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgcGFwZXIgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBwYWRkaW5nIH0gPSBwYXBlcjtcclxuICAgICAgICBjb25zdCBpd2lkdGggPSB3aWR0aCAtIHBhZGRpbmcgKiAyO1xyXG4gICAgICAgIGNvbnN0IGloZWlnaHQgPSBoZWlnaHQgLSBwYWRkaW5nICogMjtcclxuICAgICAgICBjb25zdCBjciA9IGRhdGEuY29udGVudFJhbmdlKCk7XHJcbiAgICAgICAgY29uc3QgcGFnZXMgPSBNYXRoLmZsb29yKGNyLmggLyBpaGVpZ2h0KSArIDE7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBpd2lkdGggLyBjci53O1xyXG4gICAgICAgIGxldCBsZWZ0ID0gcGFkZGluZztcclxuICAgICAgICBjb25zdCB0b3AgPSBwYWRkaW5nO1xyXG4gICAgICAgIGlmIChzY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgbGVmdCArPSAoaXdpZHRoIC0gY3IudykgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmkgPSAwO1xyXG4gICAgICAgIGxldCB5b2Zmc2V0ID0gMDtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5odG1sKCcnKTtcclxuICAgICAgICB0aGlzLmNhbnZhc2VzID0gW107XHJcbiAgICAgICAgY29uc3QgbVZpZXdSYW5nZSA9IHtcclxuICAgICAgICAgICAgc3JpOiAwLFxyXG4gICAgICAgICAgICBzY2k6IDAsXHJcbiAgICAgICAgICAgIGVyaTogMCxcclxuICAgICAgICAgICAgZWNpOiAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlczsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGxldCB0aCA9IDA7XHJcbiAgICAgICAgICAgIGxldCB5byA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHdyYXAgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWNhbnZhcy1jYXJkYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGgoJ2NhbnZhcycsIGAke2Nzc1ByZWZpeH0tY2FudmFzYCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzZXMucHVzaChjYW52YXMuZWwpO1xyXG4gICAgICAgICAgICBjb25zdCBkcmF3ID0gbmV3IERyYXcoY2FudmFzLmVsLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gY2VsbC1jb250ZW50XHJcbiAgICAgICAgICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgICAgICAgICBkcmF3LnRyYW5zbGF0ZShsZWZ0LCB0b3ApO1xyXG4gICAgICAgICAgICBpZiAoc2NhbGUgPCAxKVxyXG4gICAgICAgICAgICAgICAgZHJhdy5zY2FsZShzY2FsZSwgc2NhbGUpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksIGNyLmVyaSwgeW9mZnNldCk7XHJcbiAgICAgICAgICAgIGZvciAoOyByaSA8PSBjci5lcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJoID0gZGF0YS5yb3dzLmdldEhlaWdodChyaSk7XHJcbiAgICAgICAgICAgICAgICB0aCArPSByaDtcclxuICAgICAgICAgICAgICAgIGlmICh0aCA8IGloZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjaSA9IDA7IGNpIDw9IGNyLmVjaTsgY2kgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDZWxsKGRyYXcsIGRhdGEsIHJpLCBjaSwgeW9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1WaWV3UmFuZ2UuZWNpID0gY2k7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeW8gPSAtKHRoIC0gcmgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1WaWV3UmFuZ2UuZXJpID0gcmk7XHJcbiAgICAgICAgICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAvLyBtZXJnZS1jZWxsXHJcbiAgICAgICAgICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgICAgICAgICBkcmF3LnRyYW5zbGF0ZShsZWZ0LCB0b3ApO1xyXG4gICAgICAgICAgICBpZiAoc2NhbGUgPCAxKVxyXG4gICAgICAgICAgICAgICAgZHJhdy5zY2FsZShzY2FsZSwgc2NhbGUpO1xyXG4gICAgICAgICAgICBjb25zdCB5b2YgPSB5b2Zmc2V0O1xyXG4gICAgICAgICAgICBkYXRhLmVhY2hNZXJnZXNJblZpZXcobVZpZXdSYW5nZSwgKHsgc3JpLCBzY2kgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChkcmF3LCBkYXRhLCBzcmksIHNjaSwgeW9mKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICBtVmlld1JhbmdlLnNyaSA9IG1WaWV3UmFuZ2UuZXJpO1xyXG4gICAgICAgICAgICBtVmlld1JhbmdlLnNjaSA9IG1WaWV3UmFuZ2UuZWNpO1xyXG4gICAgICAgICAgICB5b2Zmc2V0ICs9IHlvO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jaGlsZChoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWNhbnZhcy1jYXJkLXdyYXBlcmApLmNoaWxkKHdyYXAuY2hpbGQoY2FudmFzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsLnNob3coKTtcclxuICAgIH1cclxuICAgIHRvUHJpbnQoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgY29uc3QgeyBwYXBlciB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSBoKCdpZnJhbWUnLCAnJykuaGlkZSgpO1xyXG4gICAgICAgIGNvbnN0IGVsID0gaWZyYW1lLmVsO1xyXG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRXaW5kb3cgfSA9IGVsO1xyXG4gICAgICAgIGNvbnN0IGlkb2MgPSBjb250ZW50V2luZG93LmRvY3VtZW50O1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBgXHJcbiAgICAgIEBwYWdlIHsgc2l6ZTogJHtwYXBlci53aWR0aH1weCAke3BhcGVyLmhlaWdodH1weDsgfTtcclxuICAgICAgY2FudmFzIHtcclxuICAgICAgICBwYWdlLWJyZWFrLWJlZm9yZTogYXV0bzsgICAgICAgIFxyXG4gICAgICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cztcclxuICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDtcclxuICAgICAgfTtcclxuICAgIGA7XHJcbiAgICAgICAgaWRvYy5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgICAgICB0aGlzLmNhbnZhc2VzLmZvckVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNuID0gaXQuY2xvbmVOb2RlKGZhbHNlKTtcclxuICAgICAgICAgICAgY29uc3QgY3R4ID0gY24uZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgLy8gY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaXQsIDAsIDApO1xyXG4gICAgICAgICAgICBpZG9jLmJvZHkuYXBwZW5kQ2hpbGQoY24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnRlbnRXaW5kb3cucHJpbnQoKTtcclxuICAgIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgd2luZG93ICovXHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBtb3VzZU1vdmVVcCB9IGZyb20gJy4vZXZlbnQnO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNpemVyIHtcclxuICAgIG1vdmluZztcclxuICAgIHZlcnRpY2FsO1xyXG4gICAgZWw7XHJcbiAgICB1bmhpZGVIb3ZlckVsO1xyXG4gICAgaG92ZXJFbDtcclxuICAgIGxpbmVFbDtcclxuICAgIGNSZWN0O1xyXG4gICAgZmluaXNoZWRGbjtcclxuICAgIG1pbkRpc3RhbmNlO1xyXG4gICAgdW5oaWRlRm47XHJcbiAgICB1bmhpZGVJbmRleDtcclxuICAgIGNvbnN0cnVjdG9yKHZlcnRpY2FsID0gZmFsc2UsIG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5tb3ZpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZlcnRpY2FsID0gdmVydGljYWw7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tcmVzaXplciAke3ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ31gKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oKHRoaXMudW5oaWRlSG92ZXJFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tcmVzaXplci1ob3ZlcmApXHJcbiAgICAgICAgICAgIC5vbignZGJsY2xpY2suc3RvcCcsIChldnQpID0+IHRoaXMubW91c2VkYmxjbGlja0hhbmRsZXIoKSlcclxuICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKVxyXG4gICAgICAgICAgICAuaGlkZSgpKSwgKHRoaXMuaG92ZXJFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tcmVzaXplci1ob3ZlcmApLm9uKCdtb3VzZWRvd24uc3RvcCcsIChldnQpID0+IHRoaXMubW91c2Vkb3duSGFuZGxlcihldnQpKSksICh0aGlzLmxpbmVFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tcmVzaXplci1saW5lYCkuaGlkZSgpKSlcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAvLyBjZWxsIHJlY3RcclxuICAgICAgICB0aGlzLmNSZWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZpbmlzaGVkRm4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWluRGlzdGFuY2UgPSBtaW5EaXN0YW5jZTtcclxuICAgICAgICB0aGlzLnVuaGlkZUZuID0gKCkgPT4geyB9O1xyXG4gICAgfVxyXG4gICAgc2hvd1VuaGlkZShpbmRleCkge1xyXG4gICAgICAgIHRoaXMudW5oaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLnVuaGlkZUhvdmVyRWwuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZVVuaGlkZSgpIHtcclxuICAgICAgICB0aGlzLnVuaGlkZUhvdmVyRWwuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gcmVjdCA6IHt0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHR9XHJcbiAgICAvLyBsaW5lIDoge3dpZHRoLCBoZWlnaHR9XHJcbiAgICBzaG93KHJlY3QsIGxpbmUpIHtcclxuICAgICAgICBjb25zdCB7IG1vdmluZywgdmVydGljYWwsIGhvdmVyRWwsIGxpbmVFbCwgZWwsIHVuaGlkZUhvdmVyRWwgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG1vdmluZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY1JlY3QgPSByZWN0O1xyXG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSByZWN0O1xyXG4gICAgICAgIGVsLm9mZnNldCh7XHJcbiAgICAgICAgICAgIGxlZnQ6IHZlcnRpY2FsID8gbGVmdCArIHdpZHRoIC0gNSA6IGxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogdmVydGljYWwgPyB0b3AgOiB0b3AgKyBoZWlnaHQgLSA1LFxyXG4gICAgICAgIH0pLnNob3coKTtcclxuICAgICAgICBob3ZlckVsLm9mZnNldCh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB2ZXJ0aWNhbCA/IDUgOiB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB2ZXJ0aWNhbCA/IGhlaWdodCA6IDUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGluZUVsLm9mZnNldCh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB2ZXJ0aWNhbCA/IDAgOiBsaW5lLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHZlcnRpY2FsID8gbGluZS5oZWlnaHQgOiAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuaGlkZUhvdmVyRWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgbGVmdDogdmVydGljYWwgPyA1IC0gd2lkdGggOiBsZWZ0LFxyXG4gICAgICAgICAgICB0b3A6IHZlcnRpY2FsID8gdG9wIDogNSAtIGhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGg6IHZlcnRpY2FsID8gNSA6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHZlcnRpY2FsID8gaGVpZ2h0IDogNSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbFxyXG4gICAgICAgICAgICAub2Zmc2V0KHtcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5oaWRlVW5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBtb3VzZWRibGNsaWNrSGFuZGxlcigpIHtcclxuICAgICAgICBpZiAodGhpcy51bmhpZGVJbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuaGlkZUZuKHRoaXMudW5oaWRlSW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vdXNlZG93bkhhbmRsZXIoZXZ0KSB7XHJcbiAgICAgICAgbGV0IHN0YXJ0RXZ0ID0gZXZ0O1xyXG4gICAgICAgIGNvbnN0IHsgZWwsIGxpbmVFbCwgY1JlY3QsIHZlcnRpY2FsLCBtaW5EaXN0YW5jZSB9ID0gdGhpcztcclxuICAgICAgICBsZXQgZGlzdGFuY2UgPSB2ZXJ0aWNhbCA/IGNSZWN0LndpZHRoIDogY1JlY3QuaGVpZ2h0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZTonLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgbGluZUVsLnNob3coKTtcclxuICAgICAgICBtb3VzZU1vdmVVcCh3aW5kb3csIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW92aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0RXZ0ICE9PSBudWxsICYmIGUuYnV0dG9ucyA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvcDonLCB0b3AsICcsIGxlZnQ6JywgdG9wLCAnLCBjUmVjdDonLCBjUmVjdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSArPSBlLm1vdmVtZW50WDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiBtaW5EaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jc3MoJ2xlZnQnLCBgJHtjUmVjdC5sZWZ0ICsgZGlzdGFuY2V9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSArPSBlLm1vdmVtZW50WTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiBtaW5EaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jc3MoJ3RvcCcsIGAke2NSZWN0LnRvcCArIGRpc3RhbmNlfXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RhcnRFdnQgPSBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBzdGFydEV2dCA9IG51bGw7XHJcbiAgICAgICAgICAgIGxpbmVFbC5oaWRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMubW92aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5maW5pc2hlZEZuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSlcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IG1pbkRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5pc2hlZEZuKGNSZWN0LCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Nyb2xsYmFyIHtcclxuICAgIHZlcnRpY2FsO1xyXG4gICAgbW92ZUZuO1xyXG4gICAgZWw7XHJcbiAgICBjb250ZW50RWw7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJ0aWNhbCkge1xyXG4gICAgICAgIHRoaXMudmVydGljYWwgPSB2ZXJ0aWNhbDtcclxuICAgICAgICB0aGlzLm1vdmVGbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2Nyb2xsYmFyICR7dmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnfWApXHJcbiAgICAgICAgICAgIC5jaGlsZCh0aGlzLmNvbnRlbnRFbCA9IGgoJ2RpdicsICcnKSlcclxuICAgICAgICAgICAgLm9uKCdtb3VzZW1vdmUuc3RvcCcsICgpID0+IHsgfSlcclxuICAgICAgICAgICAgLm9uKCdzY3JvbGwuc3RvcCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxUb3AsIHNjcm9sbExlZnQgfSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzY3JvbGxUb3A6Jywgc2Nyb2xsVG9wKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW92ZUZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGbih0aGlzLnZlcnRpY2FsID8gc2Nyb2xsVG9wIDogc2Nyb2xsTGVmdCwgZXZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZXZ0Ojo6JywgZXZ0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG1vdmUodikge1xyXG4gICAgICAgIHRoaXMuZWwuc2Nyb2xsKHYpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2Nyb2xsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsLnNjcm9sbCgpO1xyXG4gICAgfVxyXG4gICAgc2V0KGRpc3RhbmNlLCBjb250ZW50RGlzdGFuY2UpIHtcclxuICAgICAgICBjb25zdCBkID0gZGlzdGFuY2UgLSAxO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0YW5jZTonLCBkaXN0YW5jZSwgJywgY29udGVudERpc3RhbmNlOicsIGNvbnRlbnREaXN0YW5jZSk7XHJcbiAgICAgICAgaWYgKGNvbnRlbnREaXN0YW5jZSA+IGQpIHtcclxuICAgICAgICAgICAgY29uc3QgY3NzS2V5ID0gdGhpcy52ZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Q6JywgZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuY3NzKGNzc0tleSwgYCR7ZCAtIDE1fXB4YCkuc2hvdygpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbFxyXG4gICAgICAgICAgICAgICAgLmNzcyh0aGlzLnZlcnRpY2FsID8gJ3dpZHRoJyA6ICdoZWlnaHQnLCAnMXB4JylcclxuICAgICAgICAgICAgICAgIC5jc3MoY3NzS2V5LCBgJHtjb250ZW50RGlzdGFuY2V9cHhgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgQ2VsbFJhbmdlIH0gZnJvbSAnLi4vY29yZS9jZWxsX3JhbmdlJztcclxuY29uc3Qgc2VsZWN0b3JIZWlnaHRCb3JkZXJXaWR0aCA9IDIgKiAyIC0gMTtcclxubGV0IHN0YXJ0WkluZGV4ID0gMTA7XHJcbmNsYXNzIFNlbGVjdG9yRWxlbWVudCB7XHJcbiAgICB1c2VIaWRlSW5wdXQ7XHJcbiAgICBhdXRvRm9jdXM7XHJcbiAgICBpbnB1dENoYW5nZTtcclxuICAgIGNvcm5lckVsO1xyXG4gICAgYXJlYUVsO1xyXG4gICAgY2xpcGJvYXJkRWw7XHJcbiAgICBhdXRvZmlsbEVsO1xyXG4gICAgZWw7XHJcbiAgICBoaWRlSW5wdXQ7XHJcbiAgICBoaWRlSW5wdXREaXY7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VIaWRlSW5wdXQgPSBmYWxzZSwgYXV0b0ZvY3VzID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMudXNlSGlkZUlucHV0ID0gdXNlSGlkZUlucHV0O1xyXG4gICAgICAgIHRoaXMuYXV0b0ZvY3VzID0gYXV0b0ZvY3VzO1xyXG4gICAgICAgIHRoaXMuaW5wdXRDaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5jb3JuZXJFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2VsZWN0b3ItY29ybmVyYCk7XHJcbiAgICAgICAgdGhpcy5hcmVhRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWFyZWFgKVxyXG4gICAgICAgICAgICAuY2hpbGQodGhpcy5jb3JuZXJFbCkuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWNsaXBib2FyZGApLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmF1dG9maWxsRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWF1dG9maWxsYCkuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuZWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yYClcclxuICAgICAgICAgICAgLmNzcygnei1pbmRleCcsIGAke3N0YXJ0WkluZGV4fWApXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbih0aGlzLmFyZWFFbCwgdGhpcy5jbGlwYm9hcmRFbCwgdGhpcy5hdXRvZmlsbEVsKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgIGlmICh1c2VIaWRlSW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQgPSBoKCdpbnB1dCcsICcnKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjb21wb3NpdGlvbmVuZCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRDaGFuZ2UoZXZ0LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuaGlkZUlucHV0RGl2ID0gaCgnZGl2JywgJ2hpZGUtaW5wdXQnKS5jaGlsZCh0aGlzLmhpZGVJbnB1dCkpO1xyXG4gICAgICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuaGlkZUlucHV0RGl2ID0gaCgnZGl2JywgJ2hpZGUtaW5wdXQnKS5jaGlsZCh0aGlzLmhpZGVJbnB1dCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFydFpJbmRleCArPSAxO1xyXG4gICAgfVxyXG4gICAgc2V0T2Zmc2V0KHYpIHtcclxuICAgICAgICB0aGlzLmVsLm9mZnNldCh2KS5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0QXJlYU9mZnNldCh2KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIH0gPSB2O1xyXG4gICAgICAgIGNvbnN0IG9mID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggLSBzZWxlY3RvckhlaWdodEJvcmRlcldpZHRoICsgMC44LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAtIHNlbGVjdG9ySGVpZ2h0Qm9yZGVyV2lkdGggKyAwLjgsXHJcbiAgICAgICAgICAgIGxlZnQ6IGxlZnQgLSAwLjgsXHJcbiAgICAgICAgICAgIHRvcDogdG9wIC0gMC44LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hcmVhRWwub2Zmc2V0KG9mKS5zaG93KCk7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlSGlkZUlucHV0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUlucHV0RGl2Lm9mZnNldChvZik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9Gb2N1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQudmFsKCcnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQudmFsKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldENsaXBib2FyZE9mZnNldCh2KSB7XHJcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIH0gPSB2O1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkRWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgbGVmdCxcclxuICAgICAgICAgICAgdG9wLFxyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGggLSA1LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAtIDUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93QXV0b2ZpbGwodikge1xyXG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0LCB9ID0gdjtcclxuICAgICAgICB0aGlzLmF1dG9maWxsRWwub2Zmc2V0KHtcclxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoIC0gc2VsZWN0b3JIZWlnaHRCb3JkZXJXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgLSBzZWxlY3RvckhlaWdodEJvcmRlcldpZHRoLFxyXG4gICAgICAgICAgICBsZWZ0LFxyXG4gICAgICAgICAgICB0b3AsXHJcbiAgICAgICAgfSkuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZUF1dG9maWxsKCkge1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpbGxFbC5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBzaG93Q2xpcGJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkRWwuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgaGlkZUNsaXBib2FyZCgpIHtcclxuICAgICAgICB0aGlzLmNsaXBib2FyZEVsLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjYWxCUkFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgc2Nyb2xsLCBsLCB0LCB9ID0gb2Zmc2V0O1xyXG4gICAgY29uc3QgZnR3aWR0aCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgY29uc3QgZnRoZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICBsZXQgbGVmdDAgPSBsZWZ0IC0gZnR3aWR0aDtcclxuICAgIGlmIChmdHdpZHRoID4gbClcclxuICAgICAgICBsZWZ0MCAtPSBzY3JvbGwueDtcclxuICAgIGxldCB0b3AwID0gdG9wIC0gZnRoZWlnaHQ7XHJcbiAgICBpZiAoZnRoZWlnaHQgPiB0KVxyXG4gICAgICAgIHRvcDAgLT0gc2Nyb2xsLnk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxlZnQ6IGxlZnQwLFxyXG4gICAgICAgIHRvcDogdG9wMCxcclxuICAgICAgICB3aWR0aCxcclxuICAgICAgICBoZWlnaHQsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNhbFRBcmVhT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBsZWZ0LCB3aWR0aCwgaGVpZ2h0LCBsLCB0LCBzY3JvbGwsIH0gPSBvZmZzZXQ7XHJcbiAgICBjb25zdCBmdHdpZHRoID0gZGF0YS5mcmVlemVUb3RhbFdpZHRoKCk7XHJcbiAgICBsZXQgbGVmdDAgPSBsZWZ0IC0gZnR3aWR0aDtcclxuICAgIGlmIChmdHdpZHRoID4gbClcclxuICAgICAgICBsZWZ0MCAtPSBzY3JvbGwueDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGVmdDogbGVmdDAsIHRvcDogdCwgd2lkdGgsIGhlaWdodCxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY2FsTEFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHRvcCwgd2lkdGgsIGhlaWdodCwgbCwgdCwgc2Nyb2xsLCB9ID0gb2Zmc2V0O1xyXG4gICAgY29uc3QgZnRoZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICBsZXQgdG9wMCA9IHRvcCAtIGZ0aGVpZ2h0O1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2Z0aGVpZ2h0OicsIGZ0aGVpZ2h0LCAnLCB0OicsIHQpO1xyXG4gICAgaWYgKGZ0aGVpZ2h0ID4gdClcclxuICAgICAgICB0b3AwIC09IHNjcm9sbC55O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsZWZ0OiBsLCB0b3A6IHRvcDAsIHdpZHRoLCBoZWlnaHQsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHNldEJSQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgYnIgfSA9IHRoaXM7XHJcbiAgICBici5zZXRBcmVhT2Zmc2V0KGNhbEJSQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRMQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgdGwgfSA9IHRoaXM7XHJcbiAgICB0bC5zZXRBcmVhT2Zmc2V0KG9mZnNldCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VEFyZWFPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IHQgfSA9IHRoaXM7XHJcbiAgICB0LnNldEFyZWFPZmZzZXQoY2FsVEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRMQXJlYU9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgbCB9ID0gdGhpcztcclxuICAgIGwuc2V0QXJlYU9mZnNldChjYWxMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldExDbGlwYm9hcmRPZmZzZXQob2Zmc2V0KSB7XHJcbiAgICBjb25zdCB7IGwgfSA9IHRoaXM7XHJcbiAgICBsLnNldENsaXBib2FyZE9mZnNldChjYWxMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG59XHJcbmZ1bmN0aW9uIHNldEJSQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyBiciB9ID0gdGhpcztcclxuICAgIGJyLnNldENsaXBib2FyZE9mZnNldChjYWxCUkFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRUTENsaXBib2FyZE9mZnNldChvZmZzZXQpIHtcclxuICAgIGNvbnN0IHsgdGwgfSA9IHRoaXM7XHJcbiAgICB0bC5zZXRDbGlwYm9hcmRPZmZzZXQob2Zmc2V0KTtcclxufVxyXG5mdW5jdGlvbiBzZXRUQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgY29uc3QgeyB0IH0gPSB0aGlzO1xyXG4gICAgdC5zZXRDbGlwYm9hcmRPZmZzZXQoY2FsVEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpKTtcclxufVxyXG5mdW5jdGlvbiBzZXRBbGxBcmVhT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgc2V0QlJBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgIHNldFRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRUQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0QWxsQ2xpcGJvYXJkT2Zmc2V0KG9mZnNldCkge1xyXG4gICAgc2V0QlJDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgc2V0VExDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgc2V0VENsaXBib2FyZE9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICBzZXRMQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RvciB7XHJcbiAgICBpbnB1dENoYW5nZTtcclxuICAgIGRhdGE7XHJcbiAgICBicjtcclxuICAgIHQ7XHJcbiAgICBsO1xyXG4gICAgdGw7XHJcbiAgICBvZmZzZXQ7XHJcbiAgICBhcmVhT2Zmc2V0O1xyXG4gICAgaW5kZXhlcztcclxuICAgIHJhbmdlO1xyXG4gICAgYXJhbmdlO1xyXG4gICAgZWw7XHJcbiAgICBsYXN0cmk7XHJcbiAgICBsYXN0Y2k7XHJcbiAgICBtb3ZlSW5kZXhlcztcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IGF1dG9Gb2N1cyB9ID0gZGF0YS5zZXR0aW5ncztcclxuICAgICAgICB0aGlzLmlucHV0Q2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5iciA9IG5ldyBTZWxlY3RvckVsZW1lbnQodHJ1ZSwgYXV0b0ZvY3VzKTtcclxuICAgICAgICB0aGlzLnQgPSBuZXcgU2VsZWN0b3JFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5sID0gbmV3IFNlbGVjdG9yRWxlbWVudCgpO1xyXG4gICAgICAgIHRoaXMudGwgPSBuZXcgU2VsZWN0b3JFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5ici5pbnB1dENoYW5nZSA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRDaGFuZ2Uodik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmJyLmVsLnNob3coKTtcclxuICAgICAgICB0aGlzLm9mZnNldCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hcmVhT2Zmc2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluZGV4ZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1zZWxlY3RvcnNgKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4odGhpcy50bC5lbCwgdGhpcy50LmVsLCB0aGlzLmwuZWwsIHRoaXMuYnIuZWwpLmhpZGUoKTtcclxuICAgICAgICAvLyBmb3IgcGVyZm9ybWFuY2VcclxuICAgICAgICB0aGlzLmxhc3RyaSA9IC0xO1xyXG4gICAgICAgIHRoaXMubGFzdGNpID0gLTE7XHJcbiAgICAgICAgc3RhcnRaSW5kZXggKz0gMTtcclxuICAgIH1cclxuICAgIHJlc2V0RGF0YShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnJhbmdlID0gZGF0YS5zZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICB0aGlzLnJlc2V0QXJlYU9mZnNldCgpO1xyXG4gICAgfVxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLmVsLmhpZGUoKTtcclxuICAgIH1cclxuICAgIHJlc2V0T2Zmc2V0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgdGwsIHQsIGwsIGJyLCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBmcmVlemVIZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc3QgZnJlZXplV2lkdGggPSBkYXRhLmZyZWV6ZVRvdGFsV2lkdGgoKTtcclxuICAgICAgICBpZiAoZnJlZXplSGVpZ2h0ID4gMCB8fCBmcmVlemVXaWR0aCA+IDApIHtcclxuICAgICAgICAgICAgdGwuc2V0T2Zmc2V0KHsgd2lkdGg6IGZyZWV6ZVdpZHRoLCBoZWlnaHQ6IGZyZWV6ZUhlaWdodCB9KTtcclxuICAgICAgICAgICAgdC5zZXRPZmZzZXQoeyBsZWZ0OiBmcmVlemVXaWR0aCwgaGVpZ2h0OiBmcmVlemVIZWlnaHQgfSk7XHJcbiAgICAgICAgICAgIGwuc2V0T2Zmc2V0KHsgdG9wOiBmcmVlemVIZWlnaHQsIHdpZHRoOiBmcmVlemVXaWR0aCB9KTtcclxuICAgICAgICAgICAgYnIuc2V0T2Zmc2V0KHsgbGVmdDogZnJlZXplV2lkdGgsIHRvcDogZnJlZXplSGVpZ2h0IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGwuaGlkZSgpO1xyXG4gICAgICAgICAgICB0LmhpZGUoKTtcclxuICAgICAgICAgICAgbC5oaWRlKCk7XHJcbiAgICAgICAgICAgIGJyLnNldE9mZnNldCh7IGxlZnQ6IDAsIHRvcDogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNldEFyZWFPZmZzZXQoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29mZnNldDonLCBvZmZzZXQpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZGF0YS5nZXRTZWxlY3RlZFJlY3QoKTtcclxuICAgICAgICBjb25zdCBjb2Zmc2V0ID0gdGhpcy5kYXRhLmdldENsaXBib2FyZFJlY3QoKTtcclxuICAgICAgICBzZXRBbGxBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgICAgICBzZXRBbGxDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBjb2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnJlc2V0T2Zmc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldEJSVEFyZWFPZmZzZXQoKSB7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5kYXRhLmdldFNlbGVjdGVkUmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGNvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0Q2xpcGJvYXJkUmVjdCgpO1xyXG4gICAgICAgIHNldEJSQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICAgICAgc2V0VEFyZWFPZmZzZXQuY2FsbCh0aGlzLCBvZmZzZXQpO1xyXG4gICAgICAgIHNldEJSQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgY29mZnNldCk7XHJcbiAgICAgICAgc2V0VENsaXBib2FyZE9mZnNldC5jYWxsKHRoaXMsIGNvZmZzZXQpO1xyXG4gICAgICAgIHRoaXMucmVzZXRPZmZzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0QlJMQXJlYU9mZnNldCgpIHtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgY29mZnNldCA9IHRoaXMuZGF0YS5nZXRDbGlwYm9hcmRSZWN0KCk7XHJcbiAgICAgICAgc2V0QlJBcmVhT2Zmc2V0LmNhbGwodGhpcywgb2Zmc2V0KTtcclxuICAgICAgICBzZXRMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCk7XHJcbiAgICAgICAgc2V0QlJDbGlwYm9hcmRPZmZzZXQuY2FsbCh0aGlzLCBjb2Zmc2V0KTtcclxuICAgICAgICBzZXRMQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgY29mZnNldCk7XHJcbiAgICAgICAgdGhpcy5yZXNldE9mZnNldCgpO1xyXG4gICAgfVxyXG4gICAgc2V0KHJpLCBjaSwgaW5kZXhlc1VwZGF0ZWQgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGNlbGxSYW5nZSA9IGRhdGEuY2FsU2VsZWN0ZWRSYW5nZUJ5U3RhcnQocmksIGNpKTtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgaWYgKGluZGV4ZXNVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgIGxldCBbY3JpLCBjY2ldID0gW3JpLCBjaV07XHJcbiAgICAgICAgICAgIGlmIChyaSA8IDApXHJcbiAgICAgICAgICAgICAgICBjcmkgPSAwO1xyXG4gICAgICAgICAgICBpZiAoY2kgPCAwKVxyXG4gICAgICAgICAgICAgICAgY2NpID0gMDtcclxuICAgICAgICAgICAgZGF0YS5zZWxlY3Rvci5zZXRJbmRleGVzKGNyaSwgY2NpKTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleGVzID0gW2NyaSwgY2NpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb3ZlSW5kZXhlcyA9IFtzcmksIHNjaV07XHJcbiAgICAgICAgLy8gdGhpcy5zSW5kZXhlcyA9IHNJbmRleGVzO1xyXG4gICAgICAgIC8vIHRoaXMuZUluZGV4ZXMgPSBlSW5kZXhlcztcclxuICAgICAgICB0aGlzLnJhbmdlID0gY2VsbFJhbmdlO1xyXG4gICAgICAgIHRoaXMucmVzZXRBcmVhT2Zmc2V0KCk7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBzZXRFbmQocmksIGNpLCBtb3ZpbmcgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBsYXN0cmksIGxhc3RjaSB9ID0gdGhpcztcclxuICAgICAgICBpZiAobW92aW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChyaSA9PT0gbGFzdHJpICYmIGNpID09PSBsYXN0Y2kpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMubGFzdHJpID0gcmk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdGNpID0gY2k7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBkYXRhLmNhbFNlbGVjdGVkUmFuZ2VCeUVuZChyaSwgY2kpO1xyXG4gICAgICAgIHNldEFsbEFyZWFPZmZzZXQuY2FsbCh0aGlzLCB0aGlzLmRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCkpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJzo6OjonLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHsgZXJpLCBlY2kgfSA9IHRoaXMuZGF0YS5zZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICB0aGlzLnNldEVuZChlcmksIGVjaSk7XHJcbiAgICB9XHJcbiAgICBzaG93QXV0b2ZpbGwocmksIGNpKSB7XHJcbiAgICAgICAgaWYgKHJpID09PSAtMSAmJiBjaSA9PT0gLTEpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksICcsIGNpOicsIGNpKTtcclxuICAgICAgICAvLyBjb25zdCBbc3JpLCBzY2ldID0gdGhpcy5zSW5kZXhlcztcclxuICAgICAgICAvLyBjb25zdCBbZXJpLCBlY2ldID0gdGhpcy5lSW5kZXhlcztcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSwgfSA9IHRoaXMucmFuZ2U7XHJcbiAgICAgICAgY29uc3QgW25yaSwgbmNpXSA9IFtyaSwgY2ldO1xyXG4gICAgICAgIC8vIGNvbnN0IHJuID0gZXJpIC0gc3JpO1xyXG4gICAgICAgIC8vIGNvbnN0IGNuID0gZWNpIC0gc2NpO1xyXG4gICAgICAgIGNvbnN0IHNybiA9IHNyaSAtIHJpO1xyXG4gICAgICAgIGNvbnN0IHNjbiA9IHNjaSAtIGNpO1xyXG4gICAgICAgIGNvbnN0IGVybiA9IGVyaSAtIHJpO1xyXG4gICAgICAgIGNvbnN0IGVjbiA9IGVjaSAtIGNpO1xyXG4gICAgICAgIGlmIChzY24gPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGxlZnRcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xlZnQnKTtcclxuICAgICAgICAgICAgdGhpcy5hcmFuZ2UgPSBuZXcgQ2VsbFJhbmdlKHNyaSwgbmNpLCBlcmksIHNjaSAtIDEpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNhSW5kZXhlcyA9IFtzcmksIG5jaV07XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZWFJbmRleGVzID0gW2VyaSwgc2NpIC0gMV07XHJcbiAgICAgICAgICAgIC8vIGRhdGEuY2FsUmFuZ2VJbmRleGVzMihcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3JuID4gMCkge1xyXG4gICAgICAgICAgICAvLyB0b3BcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvcCcpO1xyXG4gICAgICAgICAgICAvLyBucmkgPSBzcmk7XHJcbiAgICAgICAgICAgIHRoaXMuYXJhbmdlID0gbmV3IENlbGxSYW5nZShucmksIHNjaSwgc3JpIC0gMSwgZWNpKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5zYUluZGV4ZXMgPSBbbnJpLCBzY2ldO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmVhSW5kZXhlcyA9IFtzcmkgLSAxLCBlY2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlY24gPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIHJpZ2h0XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyaWdodCcpO1xyXG4gICAgICAgICAgICAvLyBuY2kgPSBlY2k7XHJcbiAgICAgICAgICAgIHRoaXMuYXJhbmdlID0gbmV3IENlbGxSYW5nZShzcmksIGVjaSArIDEsIGVyaSwgbmNpKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5zYUluZGV4ZXMgPSBbc3JpLCBlY2kgKyAxXTtcclxuICAgICAgICAgICAgLy8gdGhpcy5lYUluZGV4ZXMgPSBbZXJpLCBuY2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlcm4gPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIGJvdHRvbVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYm90dG9tJyk7XHJcbiAgICAgICAgICAgIC8vIG5yaSA9IGVyaTtcclxuICAgICAgICAgICAgdGhpcy5hcmFuZ2UgPSBuZXcgQ2VsbFJhbmdlKGVyaSArIDEsIHNjaSwgbnJpLCBlY2kpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNhSW5kZXhlcyA9IFtlcmkgKyAxLCBzY2ldO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmVhSW5kZXhlcyA9IFtucmksIGVjaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxzZTonKTtcclxuICAgICAgICAgICAgdGhpcy5hcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNhSW5kZXhlcyA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZWFJbmRleGVzID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcmFuZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zYUluZGV4ZXMsICc6JywgdGhpcy5lYUluZGV4ZXMpO1xyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmRhdGEuZ2V0UmVjdCh0aGlzLmFyYW5nZSk7XHJcbiAgICAgICAgICAgIG9mZnNldC53aWR0aCArPSAyO1xyXG4gICAgICAgICAgICBvZmZzZXQuaGVpZ2h0ICs9IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYnIsIGwsIHQsIHRsLCB9ID0gdGhpcztcclxuICAgICAgICAgICAgYnIuc2hvd0F1dG9maWxsKGNhbEJSQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG4gICAgICAgICAgICBsLnNob3dBdXRvZmlsbChjYWxMQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG4gICAgICAgICAgICB0LnNob3dBdXRvZmlsbChjYWxUQXJlYU9mZnNldC5jYWxsKHRoaXMsIG9mZnNldCkpO1xyXG4gICAgICAgICAgICB0bC5zaG93QXV0b2ZpbGwob2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoaWRlQXV0b2ZpbGwoKSB7XHJcbiAgICAgICAgWydicicsICdsJywgJ3QnLCAndGwnXS5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzW3Byb3BlcnR5XS5oaWRlQXV0b2ZpbGwoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNob3dDbGlwYm9hcmQoKSB7XHJcbiAgICAgICAgY29uc3QgY29mZnNldCA9IHRoaXMuZGF0YS5nZXRDbGlwYm9hcmRSZWN0KCk7XHJcbiAgICAgICAgc2V0QWxsQ2xpcGJvYXJkT2Zmc2V0LmNhbGwodGhpcywgY29mZnNldCk7XHJcbiAgICAgICAgWydicicsICdsJywgJ3QnLCAndGwnXS5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzW3Byb3BlcnR5XS5zaG93Q2xpcGJvYXJkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBoaWRlQ2xpcGJvYXJkKCkge1xyXG4gICAgICAgIFsnYnInLCAnbCcsICd0JywgJ3RsJ10uZm9yRWFjaCgocHJvcGVydHkpID0+IHtcclxuICAgICAgICAgICAgdGhpc1twcm9wZXJ0eV0uaGlkZUNsaXBib2FyZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCB7IGJpbmQsIG1vdXNlTW92ZVVwLCBiaW5kVG91Y2gsIGNyZWF0ZUV2ZW50RW1pdHRlciwgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IFJlc2l6ZXIgZnJvbSAnLi9yZXNpemVyJztcclxuaW1wb3J0IFNjcm9sbGJhciBmcm9tICcuL3Njcm9sbGJhcic7XHJcbmltcG9ydCBTZWxlY3RvciBmcm9tICcuL3NlbGVjdG9yJztcclxuaW1wb3J0IEVkaXRvciBmcm9tICcuL2VkaXRvcic7XHJcbmltcG9ydCBQcmludCBmcm9tICcuL3ByaW50JztcclxuaW1wb3J0IENvbnRleHRNZW51IGZyb20gJy4vY29udGV4dG1lbnUnO1xyXG5pbXBvcnQgVGFibGUgZnJvbSAnLi90YWJsZSc7XHJcbmltcG9ydCBUb29sYmFyIGZyb20gJy4vdG9vbGJhci9pbmRleCc7XHJcbmltcG9ydCBNb2RhbFZhbGlkYXRpb24gZnJvbSAnLi9tb2RhbF92YWxpZGF0aW9uJztcclxuaW1wb3J0IFNvcnRGaWx0ZXIgZnJvbSAnLi9zb3J0X2ZpbHRlcic7XHJcbmltcG9ydCB7IHh0b2FzdCB9IGZyb20gJy4vbWVzc2FnZSc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IGZvcm11bGFzIH0gZnJvbSAnLi4vY29yZS9mb3JtdWxhJztcclxuLyoqXHJcbiAqIEBkZXNjIHRocm90dGxlIGZuXHJcbiAqIEBwYXJhbSBmdW5jIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB3YWl0IERlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG4gKi9cclxuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCkge1xyXG4gICAgbGV0IHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gKC4uLmFyZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBhcmc7XHJcbiAgICAgICAgaWYgKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZnVuYy5hcHBseSh0aGF0LCBhcmdzKTtcclxuICAgICAgICAgICAgfSwgd2FpdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzY3JvbGxiYXJNb3ZlKCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCB2ZXJ0aWNhbFNjcm9sbGJhciwgaG9yaXpvbnRhbFNjcm9sbGJhciwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IGwsIHQsIGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgfSA9IGRhdGEuZ2V0U2VsZWN0ZWRSZWN0KCk7XHJcbiAgICBjb25zdCB0YWJsZU9mZnNldCA9IHRoaXMuZ2V0VGFibGVPZmZzZXQoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCcsbDonLCBsLCAnLCBsZWZ0OicsIGxlZnQsICcsIHRPZmZzZXQubGVmdDonLCB0YWJsZU9mZnNldC53aWR0aCk7XHJcbiAgICBpZiAoTWF0aC5hYnMobGVmdCkgKyB3aWR0aCA+IHRhYmxlT2Zmc2V0LndpZHRoKSB7XHJcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhci5tb3ZlKHsgbGVmdDogbCArIHdpZHRoIC0gdGFibGVPZmZzZXQud2lkdGggfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBmc3cgPSBkYXRhLmZyZWV6ZVRvdGFsV2lkdGgoKTtcclxuICAgICAgICBpZiAobGVmdCA8IGZzdykge1xyXG4gICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsYmFyLm1vdmUoeyBsZWZ0OiBsIC0gMSAtIGZzdyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygndG9wOicsIHRvcCwgJywgaGVpZ2h0OicsIGhlaWdodCwgJywgdG9mLmhlaWdodDonLCB0YWJsZU9mZnNldC5oZWlnaHQpO1xyXG4gICAgaWYgKE1hdGguYWJzKHRvcCkgKyBoZWlnaHQgPiB0YWJsZU9mZnNldC5oZWlnaHQpIHtcclxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhci5tb3ZlKHsgdG9wOiB0ICsgaGVpZ2h0IC0gdGFibGVPZmZzZXQuaGVpZ2h0IC0gMSB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGZzaCA9IGRhdGEuZnJlZXplVG90YWxIZWlnaHQoKTtcclxuICAgICAgICBpZiAodG9wIDwgZnNoKSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmUoeyB0b3A6IHQgLSAxIC0gZnNoIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZWxlY3RvclNldChtdWx0aXBsZSwgcmksIGNpLCBpbmRleGVzVXBkYXRlZCA9IHRydWUsIG1vdmluZyA9IGZhbHNlKSB7XHJcbiAgICBpZiAocmkgPT09IC0xICYmIGNpID09PSAtMSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCB7IHRhYmxlLCBzZWxlY3RvciwgdG9vbGJhciwgZGF0YSwgY29udGV4dE1lbnUsIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgY2VsbCA9IGRhdGEuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgc2VsZWN0b3Iuc2V0RW5kKHJpLCBjaSwgbW92aW5nKTtcclxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NlbGxzLXNlbGVjdGVkJywgY2VsbCwgc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gdHJpZ2dlciBjbGljayBldmVudFxyXG4gICAgICAgIHNlbGVjdG9yLnNldChyaSwgY2ksIGluZGV4ZXNVcGRhdGVkKTtcclxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NlbGwtc2VsZWN0ZWQnLCBjZWxsLCByaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgY29udGV4dE1lbnUuc2V0TW9kZSgocmkgPT09IC0xIHx8IGNpID09PSAtMSkgPyAncm93LWNvbCcgOiAncmFuZ2UnKTtcclxuICAgIHRvb2xiYXIucmVzZXQoKTtcclxuICAgIHRhYmxlLnJlbmRlcigpO1xyXG59XHJcbi8vIG11bHRpcGxlOiBib29sZWFuXHJcbi8vIGRpcmVjdGlvbjogbGVmdCB8IHJpZ2h0IHwgdXAgfCBkb3duIHwgcm93LWZpcnN0IHwgcm93LWxhc3QgfCBjb2wtZmlyc3QgfCBjb2wtbGFzdFxyXG5mdW5jdGlvbiBzZWxlY3Rvck1vdmUobXVsdGlwbGUsIGRpcmVjdGlvbikge1xyXG4gICAgY29uc3QgeyBzZWxlY3RvciwgZGF0YSwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IGRhdGE7XHJcbiAgICBsZXQgW3JpLCBjaV0gPSBzZWxlY3Rvci5pbmRleGVzO1xyXG4gICAgY29uc3QgeyBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICBbcmksIGNpXSA9IHNlbGVjdG9yLm1vdmVJbmRleGVzO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdG9yLm1vdmU6JywgcmksIGNpKTtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgIGlmIChjaSA+IDApXHJcbiAgICAgICAgICAgIGNpIC09IDE7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICBpZiAoZWNpICE9PSBjaSlcclxuICAgICAgICAgICAgY2kgPSBlY2k7XHJcbiAgICAgICAgaWYgKGNpIDwgY29scy5sZW4gLSAxKVxyXG4gICAgICAgICAgICBjaSArPSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAndXAnKSB7XHJcbiAgICAgICAgaWYgKHJpID4gMClcclxuICAgICAgICAgICAgcmkgLT0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgaWYgKGVyaSAhPT0gcmkpXHJcbiAgICAgICAgICAgIHJpID0gZXJpO1xyXG4gICAgICAgIGlmIChyaSA8IHJvd3MubGVuIC0gMSlcclxuICAgICAgICAgICAgcmkgKz0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3Jvdy1maXJzdCcpIHtcclxuICAgICAgICBjaSA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyb3ctbGFzdCcpIHtcclxuICAgICAgICBjaSA9IGNvbHMubGVuIC0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2NvbC1maXJzdCcpIHtcclxuICAgICAgICByaSA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdjb2wtbGFzdCcpIHtcclxuICAgICAgICByaSA9IHJvd3MubGVuIC0gMTtcclxuICAgIH1cclxuICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdG9yLm1vdmVJbmRleGVzID0gW3JpLCBjaV07XHJcbiAgICB9XHJcbiAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIG11bHRpcGxlLCByaSwgY2kpO1xyXG4gICAgc2Nyb2xsYmFyTW92ZS5jYWxsKHRoaXMpO1xyXG59XHJcbi8vIHByaXZhdGUgbWV0aG9kc1xyXG5mdW5jdGlvbiBvdmVybGF5ZXJNb3VzZW1vdmUoZXZ0KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygneDonLCBldnQub2Zmc2V0WCwgJywgeTonLCBldnQub2Zmc2V0WSk7XHJcbiAgICBpZiAoZXZ0LmJ1dHRvbnMgIT09IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NOYW1lID09PSBgJHtjc3NQcmVmaXh9LXJlc2l6ZXItaG92ZXJgKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IHsgb2Zmc2V0WCwgb2Zmc2V0WSB9ID0gZXZ0O1xyXG4gICAgY29uc3QgeyByb3dSZXNpemVyLCBjb2xSZXNpemVyLCB0YWJsZUVsLCBkYXRhLCB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gZGF0YTtcclxuICAgIGlmIChvZmZzZXRYID4gY29scy5pbmRleFdpZHRoICYmIG9mZnNldFkgPiByb3dzLmhlaWdodCkge1xyXG4gICAgICAgIHJvd1Jlc2l6ZXIuaGlkZSgpO1xyXG4gICAgICAgIGNvbFJlc2l6ZXIuaGlkZSgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHRSZWN0ID0gdGFibGVFbC5ib3goKTtcclxuICAgIGNvbnN0IGNSZWN0ID0gZGF0YS5nZXRDZWxsUmVjdEJ5WFkoZXZ0Lm9mZnNldFgsIGV2dC5vZmZzZXRZKTtcclxuICAgIGlmIChjUmVjdC5yaSA+PSAwICYmIGNSZWN0LmNpID09PSAtMSkge1xyXG4gICAgICAgIGNSZWN0LndpZHRoID0gY29scy5pbmRleFdpZHRoO1xyXG4gICAgICAgIHJvd1Jlc2l6ZXIuc2hvdyhjUmVjdCwge1xyXG4gICAgICAgICAgICB3aWR0aDogdFJlY3Qud2lkdGgsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJvd3MuaXNIaWRlKGNSZWN0LnJpIC0gMSkpIHtcclxuICAgICAgICAgICAgcm93UmVzaXplci5zaG93VW5oaWRlKGNSZWN0LnJpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJvd1Jlc2l6ZXIuaGlkZVVuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJvd1Jlc2l6ZXIuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNSZWN0LnJpID09PSAtMSAmJiBjUmVjdC5jaSA+PSAwKSB7XHJcbiAgICAgICAgY1JlY3QuaGVpZ2h0ID0gcm93cy5oZWlnaHQ7XHJcbiAgICAgICAgY29sUmVzaXplci5zaG93KGNSZWN0LCB7XHJcbiAgICAgICAgICAgIGhlaWdodDogdFJlY3QuaGVpZ2h0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChjb2xzLmlzSGlkZShjUmVjdC5jaSAtIDEpKSB7XHJcbiAgICAgICAgICAgIGNvbFJlc2l6ZXIuc2hvd1VuaGlkZShjUmVjdC5jaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb2xSZXNpemVyLmhpZGVVbmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb2xSZXNpemVyLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG4vLyBsZXQgc2Nyb2xsVGhyZXNob2xkID0gMTU7XHJcbmZ1bmN0aW9uIG92ZXJsYXllck1vdXNlc2Nyb2xsKGV2dCkge1xyXG4gICAgLy8gc2Nyb2xsVGhyZXNob2xkIC09IDE7XHJcbiAgICAvLyBpZiAoc2Nyb2xsVGhyZXNob2xkID4gMCkgcmV0dXJuO1xyXG4gICAgLy8gc2Nyb2xsVGhyZXNob2xkID0gMTU7XHJcbiAgICBjb25zdCB7IHZlcnRpY2FsU2Nyb2xsYmFyLCBob3Jpem9udGFsU2Nyb2xsYmFyLCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyB0b3AgfSA9IHZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbCgpO1xyXG4gICAgY29uc3QgeyBsZWZ0IH0gPSBob3Jpem9udGFsU2Nyb2xsYmFyLnNjcm9sbCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2V2dDo6OicsIGV2dC53aGVlbERlbHRhLCBldnQuZGV0YWlsICogNDApO1xyXG4gICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBkYXRhO1xyXG4gICAgLy8gZGVsdGFZIGZvciB2ZXJ0aWNhbCBkZWx0YVxyXG4gICAgY29uc3QgeyBkZWx0YVksIGRlbHRhWCB9ID0gZXZ0O1xyXG4gICAgY29uc3QgbG9vcFZhbHVlID0gKGlpLCB2RnVuYykgPT4ge1xyXG4gICAgICAgIGxldCBpID0gaWk7XHJcbiAgICAgICAgbGV0IHYgPSAwO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdiA9IHZGdW5jKGkpO1xyXG4gICAgICAgICAgICBpICs9IDE7XHJcbiAgICAgICAgfSB3aGlsZSAodiA8PSAwKTtcclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH07XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZGVsdGFYJywgZGVsdGFYLCAnZXZ0LmRldGFpbCcsIGV2dC5kZXRhaWwpO1xyXG4gICAgLy8gaWYgKGV2dC5kZXRhaWwpIGRlbHRhWSA9IGV2dC5kZXRhaWwgKiA0MDtcclxuICAgIGNvbnN0IG1vdmVZID0gKHZlcnRpY2FsKSA9PiB7XHJcbiAgICAgICAgaWYgKHZlcnRpY2FsID4gMCkge1xyXG4gICAgICAgICAgICAvLyB1cFxyXG4gICAgICAgICAgICBjb25zdCByaSA9IGRhdGEuc2Nyb2xsLnJpICsgMTtcclxuICAgICAgICAgICAgaWYgKHJpIDwgcm93cy5sZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJoID0gbG9vcFZhbHVlKHJpLCBpID0+IHJvd3MuZ2V0SGVpZ2h0KGkpKTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmUoeyB0b3A6IHRvcCArIHJoIC0gMSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZG93blxyXG4gICAgICAgICAgICBjb25zdCByaSA9IGRhdGEuc2Nyb2xsLnJpIC0gMTtcclxuICAgICAgICAgICAgaWYgKHJpID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJoID0gbG9vcFZhbHVlKHJpLCBpID0+IHJvd3MuZ2V0SGVpZ2h0KGkpKTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmUoeyB0b3A6IHJpID09PSAwID8gMCA6IHRvcCAtIHJoIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGRlbHRhWCBmb3IgTWFjIGhvcml6b250YWwgc2Nyb2xsXHJcbiAgICBjb25zdCBtb3ZlWCA9IChob3Jpem9udGFsKSA9PiB7XHJcbiAgICAgICAgaWYgKGhvcml6b250YWwgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGxlZnRcclxuICAgICAgICAgICAgY29uc3QgY2kgPSBkYXRhLnNjcm9sbC5jaSArIDE7XHJcbiAgICAgICAgICAgIGlmIChjaSA8IGNvbHMubGVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdyA9IGxvb3BWYWx1ZShjaSwgaSA9PiBjb2xzLmdldFdpZHRoKGkpKTtcclxuICAgICAgICAgICAgICAgIGhvcml6b250YWxTY3JvbGxiYXIubW92ZSh7IGxlZnQ6IGxlZnQgKyBjdyAtIDEgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJpZ2h0XHJcbiAgICAgICAgICAgIGNvbnN0IGNpID0gZGF0YS5zY3JvbGwuY2kgLSAxO1xyXG4gICAgICAgICAgICBpZiAoY2kgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3cgPSBsb29wVmFsdWUoY2ksIGkgPT4gY29scy5nZXRXaWR0aChpKSk7XHJcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsYmFyLm1vdmUoeyBsZWZ0OiBjaSA9PT0gMCA/IDAgOiBsZWZ0IC0gY3cgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdGVtcFkgPSBNYXRoLmFicyhkZWx0YVkpO1xyXG4gICAgY29uc3QgdGVtcFggPSBNYXRoLmFicyhkZWx0YVgpO1xyXG4gICAgY29uc3QgdGVtcCA9IE1hdGgubWF4KHRlbXBZLCB0ZW1wWCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZXZlbnQ6JywgZXZ0KTtcclxuICAgIC8vIGRldGFpbCBmb3Igd2luZG93cy9tYWMgZmlyZWZveCB2ZXJ0aWNhbCBzY3JvbGxcclxuICAgIGlmICgvRmlyZWZveC9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKVxyXG4gICAgICAgIHRocm90dGxlKG1vdmVZKGV2dC5kZXRhaWwpLCA1MCk7XHJcbiAgICBpZiAodGVtcCA9PT0gdGVtcFgpXHJcbiAgICAgICAgdGhyb3R0bGUobW92ZVgoZGVsdGFYKSwgNTApO1xyXG4gICAgaWYgKHRlbXAgPT09IHRlbXBZKVxyXG4gICAgICAgIHRocm90dGxlKG1vdmVZKGRlbHRhWSksIDUwKTtcclxufVxyXG5mdW5jdGlvbiBvdmVybGF5ZXJUb3VjaChkaXJlY3Rpb24sIGRpc3RhbmNlKSB7XHJcbiAgICBjb25zdCB7IHZlcnRpY2FsU2Nyb2xsYmFyLCBob3Jpem9udGFsU2Nyb2xsYmFyIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyB0b3AgfSA9IHZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbCgpO1xyXG4gICAgY29uc3QgeyBsZWZ0IH0gPSBob3Jpem9udGFsU2Nyb2xsYmFyLnNjcm9sbCgpO1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxiYXIubW92ZSh7IGxlZnQ6IGxlZnQgLSBkaXN0YW5jZSB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3VwJyB8fCBkaXJlY3Rpb24gPT09ICdkb3duJykge1xyXG4gICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmUoeyB0b3A6IHRvcCAtIGRpc3RhbmNlIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZlcnRpY2FsU2Nyb2xsYmFyU2V0KCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCB2ZXJ0aWNhbFNjcm9sbGJhciB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgaGVpZ2h0IH0gPSB0aGlzLmdldFRhYmxlT2Zmc2V0KCk7XHJcbiAgICBjb25zdCBlcnRoID0gZGF0YS5leGNlcHRSb3dUb3RhbEhlaWdodCgwLCAtMSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZXJ0aDonLCBlcnRoKTtcclxuICAgIHZlcnRpY2FsU2Nyb2xsYmFyLnNldChoZWlnaHQsIGRhdGEucm93cy50b3RhbEhlaWdodCgpIC0gZXJ0aCk7XHJcbn1cclxuZnVuY3Rpb24gaG9yaXpvbnRhbFNjcm9sbGJhclNldCgpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgaG9yaXpvbnRhbFNjcm9sbGJhciB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgd2lkdGggfSA9IHRoaXMuZ2V0VGFibGVPZmZzZXQoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhci5zZXQod2lkdGgsIGRhdGEuY29scy50b3RhbFdpZHRoKCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNoZWV0RnJlZXplKCkge1xyXG4gICAgY29uc3QgeyBzZWxlY3RvciwgZGF0YSwgZWRpdG9yLCB9ID0gdGhpcztcclxuICAgIGNvbnN0IFtyaSwgY2ldID0gZGF0YS5mcmVlemU7XHJcbiAgICBpZiAocmkgPiAwIHx8IGNpID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGZ3aWR0aCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IGZoZWlnaHQgPSBkYXRhLmZyZWV6ZVRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgZWRpdG9yLnNldEZyZWV6ZUxlbmd0aHMoZndpZHRoLCBmaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIHNlbGVjdG9yLnJlc2V0QXJlYU9mZnNldCgpO1xyXG59XHJcbmZ1bmN0aW9uIHNoZWV0UmVzZXQoKSB7XHJcbiAgICBjb25zdCB7IHRhYmxlRWwsIG92ZXJsYXllckVsLCBvdmVybGF5ZXJDRWwsIHRhYmxlLCB0b29sYmFyLCBzZWxlY3RvciwgZWwsIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgdE9mZnNldCA9IHRoaXMuZ2V0VGFibGVPZmZzZXQoKTtcclxuICAgIGNvbnN0IHZSZWN0ID0gdGhpcy5nZXRSZWN0KCk7XHJcbiAgICB0YWJsZUVsLmF0dHIodlJlY3QpO1xyXG4gICAgb3ZlcmxheWVyRWwub2Zmc2V0KHZSZWN0KTtcclxuICAgIG92ZXJsYXllckNFbC5vZmZzZXQodE9mZnNldCk7XHJcbiAgICBlbC5jc3MoJ3dpZHRoJywgYCR7dlJlY3Qud2lkdGh9cHhgKTtcclxuICAgIHZlcnRpY2FsU2Nyb2xsYmFyU2V0LmNhbGwodGhpcyk7XHJcbiAgICBob3Jpem9udGFsU2Nyb2xsYmFyU2V0LmNhbGwodGhpcyk7XHJcbiAgICBzaGVldEZyZWV6ZS5jYWxsKHRoaXMpO1xyXG4gICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB0b29sYmFyLnJlc2V0KCk7XHJcbiAgICBzZWxlY3Rvci5yZXNldCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFyQ2xpcGJvYXJkKCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgIGRhdGEuY2xlYXJDbGlwYm9hcmQoKTtcclxuICAgIHNlbGVjdG9yLmhpZGVDbGlwYm9hcmQoKTtcclxufVxyXG5mdW5jdGlvbiBjb3B5KGV2dCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgIGlmIChkYXRhLnNldHRpbmdzLm1vZGUgPT09ICdyZWFkJylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBkYXRhLmNvcHkoKTtcclxuICAgIGRhdGEuY29weVRvU3lzdGVtQ2xpcGJvYXJkKGV2dCk7XHJcbiAgICBzZWxlY3Rvci5zaG93Q2xpcGJvYXJkKCk7XHJcbn1cclxuZnVuY3Rpb24gY3V0KCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgIGlmIChkYXRhLnNldHRpbmdzLm1vZGUgPT09ICdyZWFkJylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBkYXRhLmN1dCgpO1xyXG4gICAgc2VsZWN0b3Iuc2hvd0NsaXBib2FyZCgpO1xyXG59XHJcbmZ1bmN0aW9uIHBhc3RlKHdoYXQsIGV2dCkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgaWYgKGRhdGEuc2V0dGluZ3MubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmIChkYXRhLmNsaXBib2FyZC5pc0NsZWFyKCkpIHtcclxuICAgICAgICBjb25zdCByZXNldFNoZWV0ID0gKCkgPT4gc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50VHJpZ2dlciA9IChyb3dzKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigncGFzdGVkLWNsaXBib2FyZCcsIHJvd3MpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gcGFzdEZyb21TeXN0ZW1DbGlwYm9hcmQgaXMgYXN5bmMgb3BlcmF0aW9uLCBuZWVkIHRvIHRlbGwgaXQgaG93IHRvIHJlc2V0IHNoZWV0IGFuZCB0cmlnZ2VyIGV2ZW50IGFmdGVyIGl0IGZpbmlzaGVzXHJcbiAgICAgICAgLy8gcGFzdGluZyBjb250ZW50IGZyb20gc3lzdGVtIGNsaXBib2FyZFxyXG4gICAgICAgIGRhdGEucGFzdGVGcm9tU3lzdGVtQ2xpcGJvYXJkKHJlc2V0U2hlZXQsIGV2ZW50VHJpZ2dlcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkYXRhLnBhc3RlKHdoYXQsIG1zZyA9PiB4dG9hc3QoJ1RpcCcsIG1zZykpKSB7XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXZ0KSB7XHJcbiAgICAgICAgY29uc3QgY2RhdGEgPSBldnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICAgICAgdGhpcy5kYXRhLnBhc3RlRnJvbVRleHQoY2RhdGEpO1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBoaWRlUm93c09yQ29scygpIHtcclxuICAgIHRoaXMuZGF0YS5oaWRlUm93c09yQ29scygpO1xyXG4gICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIHVuaGlkZVJvd3NPckNvbHModHlwZSwgaW5kZXgpIHtcclxuICAgIHRoaXMuZGF0YS51bmhpZGVSb3dzT3JDb2xzKHR5cGUsIGluZGV4KTtcclxuICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxufVxyXG5mdW5jdGlvbiBhdXRvZmlsdGVyKCkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgZGF0YS5hdXRvZmlsdGVyKCk7XHJcbiAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gdG9vbGJhckNoYW5nZVBhaW50Zm9ybWF0UGFzdGUoKSB7XHJcbiAgICBjb25zdCB7IHRvb2xiYXIgfSA9IHRoaXM7XHJcbiAgICBpZiAodG9vbGJhci5wYWludGZvcm1hdEFjdGl2ZSgpKSB7XHJcbiAgICAgICAgcGFzdGUuY2FsbCh0aGlzLCAnZm9ybWF0Jyk7XHJcbiAgICAgICAgY2xlYXJDbGlwYm9hcmQuY2FsbCh0aGlzKTtcclxuICAgICAgICB0b29sYmFyLnBhaW50Zm9ybWF0VG9nZ2xlKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gb3ZlcmxheWVyTW91c2Vkb3duKGV2dCkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJzo6Ojo6b3ZlcmxheWVyLm1vdXNlZG93bjonLCBldnQuZGV0YWlsLCBldnQuYnV0dG9uLCBldnQuYnV0dG9ucywgZXZ0LnNoaWZ0S2V5KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdldnQudGFyZ2V0LmNsYXNzTmFtZTonLCBldnQudGFyZ2V0LmNsYXNzTmFtZSk7XHJcbiAgICBjb25zdCB7IHNlbGVjdG9yLCBkYXRhLCB0YWJsZSwgc29ydEZpbHRlciwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFkgfSA9IGV2dDtcclxuICAgIGNvbnN0IGlzQXV0b2ZpbGxFbCA9IGV2dC50YXJnZXQuY2xhc3NOYW1lID09PSBgJHtjc3NQcmVmaXh9LXNlbGVjdG9yLWNvcm5lcmA7XHJcbiAgICBjb25zdCBjZWxsUmVjdCA9IGRhdGEuZ2V0Q2VsbFJlY3RCeVhZKG9mZnNldFgsIG9mZnNldFkpO1xyXG4gICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIH0gPSBjZWxsUmVjdDtcclxuICAgIGxldCB7IHJpLCBjaSB9ID0gY2VsbFJlY3Q7XHJcbiAgICAvLyBzb3J0IG9yIGZpbHRlclxyXG4gICAgY29uc3QgeyBhdXRvRmlsdGVyIH0gPSBkYXRhO1xyXG4gICAgaWYgKGF1dG9GaWx0ZXIuaW5jbHVkZXMocmksIGNpKSkge1xyXG4gICAgICAgIGlmIChsZWZ0ICsgd2lkdGggLSAyMCA8IG9mZnNldFggJiYgdG9wICsgaGVpZ2h0IC0gMjAgPCBvZmZzZXRZKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXV0b0ZpbHRlci5pdGVtcyhjaSwgKHIsIGMpID0+IGRhdGEucm93cy5nZXRDZWxsKHIsIGMpKTtcclxuICAgICAgICAgICAgc29ydEZpbHRlci5oaWRlKCk7XHJcbiAgICAgICAgICAgIHNvcnRGaWx0ZXIuc2V0KGNpLCBpdGVtcywgYXV0b0ZpbHRlci5nZXRGaWx0ZXIoY2kpLCBhdXRvRmlsdGVyLmdldFNvcnQoY2kpKTtcclxuICAgICAgICAgICAgc29ydEZpbHRlci5zZXRPZmZzZXQoeyBsZWZ0LCB0b3A6IHRvcCArIGhlaWdodCArIDIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksICcsIGNpOicsIGNpKTtcclxuICAgIGlmICghZXZ0LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdG9yU2V0U3RhcnQ6OjonKTtcclxuICAgICAgICBpZiAoaXNBdXRvZmlsbEVsKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLnNob3dBdXRvZmlsbChyaSwgY2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZWN0b3JTZXQuY2FsbCh0aGlzLCBmYWxzZSwgcmksIGNpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbW91c2UgbW92ZSB1cFxyXG4gICAgICAgIG1vdXNlTW92ZVVwKHdpbmRvdywgKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNlTW92ZVVwOjo6OicpO1xyXG4gICAgICAgICAgICAoeyByaSwgY2kgfSA9IGRhdGEuZ2V0Q2VsbFJlY3RCeVhZKGUub2Zmc2V0WCwgZS5vZmZzZXRZKSk7XHJcbiAgICAgICAgICAgIGlmIChpc0F1dG9maWxsRWwpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yLnNob3dBdXRvZmlsbChyaSwgY2kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGUuYnV0dG9ucyA9PT0gMSAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3JTZXQuY2FsbCh0aGlzLCB0cnVlLCByaSwgY2ksIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNBdXRvZmlsbEVsICYmIHNlbGVjdG9yLmFyYW5nZSAmJiBkYXRhLnNldHRpbmdzLm1vZGUgIT09ICdyZWFkJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuYXV0b2ZpbGwoc2VsZWN0b3IuYXJhbmdlLCAnYWxsJywgbXNnID0+IHh0b2FzdCgnVGlwJywgbXNnKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3Rvci5oaWRlQXV0b2ZpbGwoKTtcclxuICAgICAgICAgICAgdG9vbGJhckNoYW5nZVBhaW50Zm9ybWF0UGFzdGUuY2FsbCh0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICghaXNBdXRvZmlsbEVsICYmIGV2dC5idXR0b25zID09PSAxKSB7XHJcbiAgICAgICAgaWYgKGV2dC5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2hpZnRLZXk6Ojo6Jyk7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yU2V0LmNhbGwodGhpcywgdHJ1ZSwgcmksIGNpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZWRpdG9yU2V0T2Zmc2V0KCkge1xyXG4gICAgY29uc3QgeyBlZGl0b3IsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBzT2Zmc2V0ID0gZGF0YS5nZXRTZWxlY3RlZFJlY3QoKTtcclxuICAgIGNvbnN0IHRPZmZzZXQgPSB0aGlzLmdldFRhYmxlT2Zmc2V0KCk7XHJcbiAgICBsZXQgc1Bvc2l0aW9uID0gJ3RvcCc7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc09mZnNldDonLCBzT2Zmc2V0LCAnOicsIHRPZmZzZXQpO1xyXG4gICAgaWYgKHNPZmZzZXQudG9wID4gdE9mZnNldC5oZWlnaHQgLyAyKSB7XHJcbiAgICAgICAgc1Bvc2l0aW9uID0gJ2JvdHRvbSc7XHJcbiAgICB9XHJcbiAgICBlZGl0b3Iuc2V0T2Zmc2V0KHNPZmZzZXQsIHNQb3NpdGlvbik7XHJcbn1cclxuZnVuY3Rpb24gZWRpdG9yU2V0KCkge1xyXG4gICAgY29uc3QgeyBlZGl0b3IsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBpZiAoZGF0YS5zZXR0aW5ncy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgZWRpdG9yU2V0T2Zmc2V0LmNhbGwodGhpcyk7XHJcbiAgICBlZGl0b3Iuc2V0Q2VsbChkYXRhLmdldFNlbGVjdGVkQ2VsbCgpLCBkYXRhLmdldFNlbGVjdGVkVmFsaWRhdG9yKCkpO1xyXG4gICAgY2xlYXJDbGlwYm9hcmQuY2FsbCh0aGlzKTtcclxufVxyXG5mdW5jdGlvbiB2ZXJ0aWNhbFNjcm9sbGJhck1vdmUoZGlzdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgdGFibGUsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgZGF0YS5zY3JvbGx5KGRpc3RhbmNlLCAoKSA9PiB7XHJcbiAgICAgICAgc2VsZWN0b3IucmVzZXRCUkxBcmVhT2Zmc2V0KCk7XHJcbiAgICAgICAgZWRpdG9yU2V0T2Zmc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBob3Jpem9udGFsU2Nyb2xsYmFyTW92ZShkaXN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBkYXRhLCB0YWJsZSwgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICBkYXRhLnNjcm9sbHgoZGlzdGFuY2UsICgpID0+IHtcclxuICAgICAgICBzZWxlY3Rvci5yZXNldEJSVEFyZWFPZmZzZXQoKTtcclxuICAgICAgICBlZGl0b3JTZXRPZmZzZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHJvd1Jlc2l6ZXJGaW5pc2hlZChjUmVjdCwgZGlzdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgcmkgfSA9IGNSZWN0O1xyXG4gICAgY29uc3QgeyB0YWJsZSwgc2VsZWN0b3IsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7IHNyaSwgZXJpIH0gPSBzZWxlY3Rvci5yYW5nZTtcclxuICAgIGlmIChyaSA+PSBzcmkgJiYgcmkgPD0gZXJpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcm93ID0gc3JpOyByb3cgPD0gZXJpOyByb3cgKz0gMSkge1xyXG4gICAgICAgICAgICBkYXRhLnJvd3Muc2V0SGVpZ2h0KHJvdywgZGlzdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGRhdGEucm93cy5zZXRIZWlnaHQocmksIGRpc3RhbmNlKTtcclxuICAgIH1cclxuICAgIHRhYmxlLnJlbmRlcigpO1xyXG4gICAgc2VsZWN0b3IucmVzZXRBcmVhT2Zmc2V0KCk7XHJcbiAgICB2ZXJ0aWNhbFNjcm9sbGJhclNldC5jYWxsKHRoaXMpO1xyXG4gICAgZWRpdG9yU2V0T2Zmc2V0LmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gY29sUmVzaXplckZpbmlzaGVkKGNSZWN0LCBkaXN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBjaSB9ID0gY1JlY3Q7XHJcbiAgICBjb25zdCB7IHRhYmxlLCBzZWxlY3RvciwgZGF0YSB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsgc2NpLCBlY2kgfSA9IHNlbGVjdG9yLnJhbmdlO1xyXG4gICAgaWYgKGNpID49IHNjaSAmJiBjaSA8PSBlY2kpIHtcclxuICAgICAgICBmb3IgKGxldCBjb2wgPSBzY2k7IGNvbCA8PSBlY2k7IGNvbCArPSAxKSB7XHJcbiAgICAgICAgICAgIGRhdGEuY29scy5zZXRXaWR0aChjb2wsIGRpc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBkYXRhLmNvbHMuc2V0V2lkdGgoY2ksIGRpc3RhbmNlKTtcclxuICAgIH1cclxuICAgIHRhYmxlLnJlbmRlcigpO1xyXG4gICAgc2VsZWN0b3IucmVzZXRBcmVhT2Zmc2V0KCk7XHJcbiAgICBob3Jpem9udGFsU2Nyb2xsYmFyU2V0LmNhbGwodGhpcyk7XHJcbiAgICBlZGl0b3JTZXRPZmZzZXQuY2FsbCh0aGlzKTtcclxufVxyXG5mdW5jdGlvbiBkYXRhU2V0Q2VsbFRleHQodGV4dCwgc3RhdGUgPSAnZmluaXNoZWQnKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIHRhYmxlIH0gPSB0aGlzO1xyXG4gICAgLy8gY29uc3QgW3JpLCBjaV0gPSBzZWxlY3Rvci5pbmRleGVzO1xyXG4gICAgaWYgKGRhdGEuc2V0dGluZ3MubW9kZSA9PT0gJ3JlYWQnKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGRhdGEuc2V0U2VsZWN0ZWRDZWxsVGV4dCh0ZXh0LCBzdGF0ZSk7XHJcbiAgICBjb25zdCB7IHJpLCBjaSB9ID0gZGF0YS5zZWxlY3RvcjtcclxuICAgIGlmIChzdGF0ZSA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICAgIHRhYmxlLnJlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjZWxsLWVkaXRlZCcsIHRleHQsIHJpLCBjaSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaW5zZXJ0RGVsZXRlUm93Q29sdW1uKHR5cGUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgIGlmIChkYXRhLnNldHRpbmdzLm1vZGUgPT09ICdyZWFkJylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAodHlwZSA9PT0gJ2luc2VydC1yb3cnKSB7XHJcbiAgICAgICAgZGF0YS5pbnNlcnQoJ3JvdycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RlbGV0ZS1yb3cnKSB7XHJcbiAgICAgICAgZGF0YS5kZWxldGUoJ3JvdycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2luc2VydC1jb2x1bW4nKSB7XHJcbiAgICAgICAgZGF0YS5pbnNlcnQoJ2NvbHVtbicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RlbGV0ZS1jb2x1bW4nKSB7XHJcbiAgICAgICAgZGF0YS5kZWxldGUoJ2NvbHVtbicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RlbGV0ZS1jZWxsJykge1xyXG4gICAgICAgIGRhdGEuZGVsZXRlQ2VsbCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RlbGV0ZS1jZWxsLWZvcm1hdCcpIHtcclxuICAgICAgICBkYXRhLmRlbGV0ZUNlbGwoJ2Zvcm1hdCcpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RlbGV0ZS1jZWxsLXRleHQnKSB7XHJcbiAgICAgICAgZGF0YS5kZWxldGVDZWxsKCd0ZXh0Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnY2VsbC1wcmludGFibGUnKSB7XHJcbiAgICAgICAgZGF0YS5zZXRTZWxlY3RlZENlbGxBdHRyKCdwcmludGFibGUnLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjZWxsLW5vbi1wcmludGFibGUnKSB7XHJcbiAgICAgICAgZGF0YS5zZXRTZWxlY3RlZENlbGxBdHRyKCdwcmludGFibGUnLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnY2VsbC1lZGl0YWJsZScpIHtcclxuICAgICAgICBkYXRhLnNldFNlbGVjdGVkQ2VsbEF0dHIoJ2VkaXRhYmxlJywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnY2VsbC1ub24tZWRpdGFibGUnKSB7XHJcbiAgICAgICAgZGF0YS5zZXRTZWxlY3RlZENlbGxBdHRyKCdlZGl0YWJsZScsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGNsZWFyQ2xpcGJvYXJkLmNhbGwodGhpcyk7XHJcbiAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbn1cclxuZnVuY3Rpb24gdG9vbGJhckNoYW5nZSh0eXBlLCB2YWx1ZSkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgaWYgKHR5cGUgPT09ICd1bmRvJykge1xyXG4gICAgICAgIHRoaXMudW5kbygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ3JlZG8nKSB7XHJcbiAgICAgICAgdGhpcy5yZWRvKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAncHJpbnQnKSB7XHJcbiAgICAgICAgdGhpcy5wcmludC5wcmV2aWV3KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAncGFpbnRmb3JtYXQnKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKVxyXG4gICAgICAgICAgICBjb3B5LmNhbGwodGhpcyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjbGVhckNsaXBib2FyZC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NsZWFyZm9ybWF0Jykge1xyXG4gICAgICAgIGluc2VydERlbGV0ZVJvd0NvbHVtbi5jYWxsKHRoaXMsICdkZWxldGUtY2VsbC1mb3JtYXQnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdsaW5rJykge1xyXG4gICAgICAgIC8vIGxpbmtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjaGFydCcpIHtcclxuICAgICAgICAvLyBjaGFydFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2F1dG9maWx0ZXInKSB7XHJcbiAgICAgICAgLy8gZmlsdGVyXHJcbiAgICAgICAgYXV0b2ZpbHRlci5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2ZyZWV6ZScpIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByaSwgY2kgfSA9IGRhdGEuc2VsZWN0b3I7XHJcbiAgICAgICAgICAgIHRoaXMuZnJlZXplKHJpLCBjaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZyZWV6ZSgwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBkYXRhLnNldFNlbGVjdGVkQ2VsbEF0dHIodHlwZSwgdmFsdWUpO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnZm9ybXVsYScgJiYgIWRhdGEuc2VsZWN0b3IubXVsdGlwbGUoKSkge1xyXG4gICAgICAgICAgICBlZGl0b3JTZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNvcnRGaWx0ZXJDaGFuZ2UoY2ksIG9yZGVyLCBvcGVyYXRvciwgdmFsdWUpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdzb3J0OicsIHNvcnREZXNjLCBvcGVyYXRvciwgdmFsdWUpO1xyXG4gICAgdGhpcy5kYXRhLnNldEF1dG9GaWx0ZXIoY2ksIG9yZGVyLCBvcGVyYXRvciwgdmFsdWUpO1xyXG4gICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG59XHJcbmZ1bmN0aW9uIHNoZWV0SW5pdEV2ZW50cygpIHtcclxuICAgIGNvbnN0IHsgc2VsZWN0b3IsIG92ZXJsYXllckVsLCByb3dSZXNpemVyLCBjb2xSZXNpemVyLCB2ZXJ0aWNhbFNjcm9sbGJhciwgaG9yaXpvbnRhbFNjcm9sbGJhciwgZWRpdG9yLCBjb250ZXh0TWVudSwgdG9vbGJhciwgbW9kYWxWYWxpZGF0aW9uLCBzb3J0RmlsdGVyLCB9ID0gdGhpcztcclxuICAgIC8vIG92ZXJsYXllclxyXG4gICAgb3ZlcmxheWVyRWxcclxuICAgICAgICAub24oJ21vdXNlbW92ZScsIChldnQpID0+IHtcclxuICAgICAgICBvdmVybGF5ZXJNb3VzZW1vdmUuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICBlZGl0b3IuY2xlYXIoKTtcclxuICAgICAgICBjb250ZXh0TWVudS5oaWRlKCk7XHJcbiAgICAgICAgLy8gdGhlIGxlZnQgbW91c2UgYnV0dG9uOiBtb3VzZWRvd24g4oaSIG1vdXNldXAg4oaSIGNsaWNrXHJcbiAgICAgICAgLy8gdGhlIHJpZ2h0IG1vdXNlIGJ1dHRvbjogbW91c2Vkb3duIOKGkiBjb250ZW54dG1lbnUg4oaSIG1vdXNldXBcclxuICAgICAgICBpZiAoZXZ0LmJ1dHRvbnMgPT09IDIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS54eUluU2VsZWN0ZWRSZWN0KGV2dC5vZmZzZXRYLCBldnQub2Zmc2V0WSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LnNldFBvc2l0aW9uKGV2dC5vZmZzZXRYLCBldnQub2Zmc2V0WSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5ZXJNb3VzZWRvd24uY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUuc2V0UG9zaXRpb24oZXZ0Lm9mZnNldFgsIGV2dC5vZmZzZXRZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2dC5kZXRhaWwgPT09IDIpIHtcclxuICAgICAgICAgICAgZWRpdG9yU2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdmVybGF5ZXJNb3VzZWRvd24uY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLm9uKCdtb3VzZXdoZWVsLnN0b3AnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgb3ZlcmxheWVyTW91c2VzY3JvbGwuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ21vdXNlb3V0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0WCwgb2Zmc2V0WSB9ID0gZXZ0O1xyXG4gICAgICAgIGlmIChvZmZzZXRZIDw9IDApXHJcbiAgICAgICAgICAgIGNvbFJlc2l6ZXIuaGlkZSgpO1xyXG4gICAgICAgIGlmIChvZmZzZXRYIDw9IDApXHJcbiAgICAgICAgICAgIHJvd1Jlc2l6ZXIuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzZWxlY3Rvci5pbnB1dENoYW5nZSA9ICh2KSA9PiB7XHJcbiAgICAgICAgZGF0YVNldENlbGxUZXh0LmNhbGwodGhpcywgdiwgJ2lucHV0Jyk7XHJcbiAgICAgICAgZWRpdG9yU2V0LmNhbGwodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLy8gc2xpZGUgb24gbW9iaWxlXHJcbiAgICBiaW5kVG91Y2gob3ZlcmxheWVyRWwuZWwsIHtcclxuICAgICAgICBtb3ZlOiAoZGlyZWN0aW9uLCBkKSA9PiB7XHJcbiAgICAgICAgICAgIG92ZXJsYXllclRvdWNoLmNhbGwodGhpcywgZGlyZWN0aW9uLCBkKTtcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICAvLyB0b29sYmFyIGNoYW5nZVxyXG4gICAgdG9vbGJhci5jaGFuZ2UgPSAodHlwZSwgdmFsdWUpID0+IHRvb2xiYXJDaGFuZ2UuY2FsbCh0aGlzLCB0eXBlLCB2YWx1ZSk7XHJcbiAgICAvLyBzb3J0IGZpbHRlciBva1xyXG4gICAgc29ydEZpbHRlci5vayA9IChjaSwgb3JkZXIsIG8sIHYpID0+IHNvcnRGaWx0ZXJDaGFuZ2UuY2FsbCh0aGlzLCBjaSwgb3JkZXIsIG8sIHYpO1xyXG4gICAgLy8gcmVzaXplciBmaW5pc2hlZCBjYWxsYmFja1xyXG4gICAgcm93UmVzaXplci5maW5pc2hlZEZuID0gKGNSZWN0LCBkaXN0YW5jZSkgPT4ge1xyXG4gICAgICAgIHJvd1Jlc2l6ZXJGaW5pc2hlZC5jYWxsKHRoaXMsIGNSZWN0LCBkaXN0YW5jZSk7XHJcbiAgICB9O1xyXG4gICAgY29sUmVzaXplci5maW5pc2hlZEZuID0gKGNSZWN0LCBkaXN0YW5jZSkgPT4ge1xyXG4gICAgICAgIGNvbFJlc2l6ZXJGaW5pc2hlZC5jYWxsKHRoaXMsIGNSZWN0LCBkaXN0YW5jZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gcmVzaXplciB1bmhpZGUgY2FsbGJhY2tcclxuICAgIHJvd1Jlc2l6ZXIudW5oaWRlRm4gPSAoaW5kZXgpID0+IHtcclxuICAgICAgICB1bmhpZGVSb3dzT3JDb2xzLmNhbGwodGhpcywgJ3JvdycsIGluZGV4KTtcclxuICAgIH07XHJcbiAgICBjb2xSZXNpemVyLnVuaGlkZUZuID0gKGluZGV4KSA9PiB7XHJcbiAgICAgICAgdW5oaWRlUm93c09yQ29scy5jYWxsKHRoaXMsICdjb2wnLCBpbmRleCk7XHJcbiAgICB9O1xyXG4gICAgLy8gc2Nyb2xsYmFyIG1vdmUgY2FsbGJhY2tcclxuICAgIHZlcnRpY2FsU2Nyb2xsYmFyLm1vdmVGbiA9IChkaXN0YW5jZSwgZXZ0KSA9PiB7XHJcbiAgICAgICAgdmVydGljYWxTY3JvbGxiYXJNb3ZlLmNhbGwodGhpcywgZGlzdGFuY2UsIGV2dCk7XHJcbiAgICB9O1xyXG4gICAgaG9yaXpvbnRhbFNjcm9sbGJhci5tb3ZlRm4gPSAoZGlzdGFuY2UsIGV2dCkgPT4ge1xyXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxiYXJNb3ZlLmNhbGwodGhpcywgZGlzdGFuY2UsIGV2dCk7XHJcbiAgICB9O1xyXG4gICAgLy8gZWRpdG9yXHJcbiAgICBlZGl0b3IuY2hhbmdlID0gKHN0YXRlLCBpdGV4dCkgPT4ge1xyXG4gICAgICAgIGRhdGFTZXRDZWxsVGV4dC5jYWxsKHRoaXMsIGl0ZXh0LCBzdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gbW9kYWwgdmFsaWRhdGlvblxyXG4gICAgbW9kYWxWYWxpZGF0aW9uLmNoYW5nZSA9IChhY3Rpb24sIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBpZiAoYWN0aW9uID09PSAnc2F2ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLmFkZFZhbGlkYXRpb24oLi4uYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEucmVtb3ZlVmFsaWRhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBjb250ZXh0bWVudVxyXG4gICAgY29udGV4dE1lbnUuaXRlbUNsaWNrID0gKHR5cGUpID0+IHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndHlwZTonLCB0eXBlKTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3ZhbGlkYXRpb24nKSB7XHJcbiAgICAgICAgICAgIG1vZGFsVmFsaWRhdGlvbi5zZXRWYWx1ZSh0aGlzLmRhdGEuZ2V0U2VsZWN0ZWRWYWxpZGF0aW9uKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnY29weScpIHtcclxuICAgICAgICAgICAgY29weS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnY3V0Jykge1xyXG4gICAgICAgICAgICBjdXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3Bhc3RlJykge1xyXG4gICAgICAgICAgICBwYXN0ZS5jYWxsKHRoaXMsICdhbGwnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3Bhc3RlLXZhbHVlJykge1xyXG4gICAgICAgICAgICBwYXN0ZS5jYWxsKHRoaXMsICd0ZXh0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwYXN0ZS1mb3JtYXQnKSB7XHJcbiAgICAgICAgICAgIHBhc3RlLmNhbGwodGhpcywgJ2Zvcm1hdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnaGlkZScpIHtcclxuICAgICAgICAgICAgaGlkZVJvd3NPckNvbHMuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc2VydERlbGV0ZVJvd0NvbHVtbi5jYWxsKHRoaXMsIHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBiaW5kKHdpbmRvdywgJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLnJlbG9hZCgpO1xyXG4gICAgfSk7XHJcbiAgICBiaW5kKHdpbmRvdywgJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZm9jdXNpbmcgPSBvdmVybGF5ZXJFbC5jb250YWlucyhldnQudGFyZ2V0KTtcclxuICAgIH0pO1xyXG4gICAgYmluZCh3aW5kb3csICdwYXN0ZScsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZm9jdXNpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBwYXN0ZS5jYWxsKHRoaXMsICdhbGwnLCBldnQpO1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICBiaW5kKHdpbmRvdywgJ2NvcHknLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZvY3VzaW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29weS5jYWxsKHRoaXMsIGV2dCk7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIC8vIGZvciBzZWxlY3RvclxyXG4gICAgYmluZCh3aW5kb3csICdrZXlkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5mb2N1c2luZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGtleUNvZGUgPSBldnQua2V5Q29kZSB8fCBldnQud2hpY2g7XHJcbiAgICAgICAgY29uc3QgeyBrZXksIGN0cmxLZXksIHNoaWZ0S2V5LCBtZXRhS2V5LCB9ID0gZXZ0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdrZXlkb3duLmV2dDogJywga2V5Q29kZSk7XHJcbiAgICAgICAgaWYgKGN0cmxLZXkgfHwgbWV0YUtleSkge1xyXG4gICAgICAgICAgICAvLyBjb25zdCB7IHNJbmRleGVzLCBlSW5kZXhlcyB9ID0gc2VsZWN0b3I7XHJcbiAgICAgICAgICAgIC8vIGxldCB3aGF0ID0gJ2FsbCc7XHJcbiAgICAgICAgICAgIC8vIGlmIChzaGlmdEtleSkgd2hhdCA9ICd0ZXh0JztcclxuICAgICAgICAgICAgLy8gaWYgKGFsdEtleSkgd2hhdCA9ICdmb3JtYXQnO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgOTA6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5kbzogY3RybCArIHpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgODk6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVkbzogY3RybCArIHlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNjc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3RybCArIGNcclxuICAgICAgICAgICAgICAgICAgICAvLyA9PiBjb3B5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29weS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4ODpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgeFxyXG4gICAgICAgICAgICAgICAgICAgIGN1dC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4NTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgdVxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXIudHJpZ2dlcigndW5kZXJsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg2OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyB2XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gPT4gcGFzdGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3RybCArIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ3Jvdy1maXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgdXBcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ2NvbC1maXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBzaGlmdEtleSwgJ3Jvdy1sYXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdjb2wtbGFzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHJsICsgc3BhY2UsIGFsbCBjZWxscyBpbiBjb2xcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCAtMSwgdGhpcy5kYXRhLnNlbGVjdG9yLmNpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY2OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBCXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhci50cmlnZ2VyKCdib2xkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDczOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0cmwgKyBJXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhci50cmlnZ2VyKCdpdGFsaWMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdldnQua2V5Q29kZTonLCBldnQua2V5Q29kZSk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hpZnQgKyBzcGFjZSwgYWxsIGNlbGxzIGluIHJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCB0aGlzLmRhdGEuc2VsZWN0b3IucmksIC0xLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyNzogLy8gZXNjXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ2xpcGJvYXJkLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OiAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM4OiAvLyB1cFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIHNoaWZ0S2V5LCAndXAnKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzk6IC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JNb3ZlLmNhbGwodGhpcywgc2hpZnRLZXksICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDogLy8gZG93blxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIHNoaWZ0S2V5LCAnZG93bicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA5OiAvLyB0YWJcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaGlmdCArIHRhYiA9PiBtb3ZlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0YWIgPT4gbW92ZSByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yTW92ZS5jYWxsKHRoaXMsIGZhbHNlLCBzaGlmdEtleSA/ICdsZWZ0JyA6ICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMzogLy8gZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaGlmdCArIGVudGVyID0+IG1vdmUgdXBcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbnRlciA9PiBtb3ZlIGRvd25cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvck1vdmUuY2FsbCh0aGlzLCBmYWxzZSwgc2hpZnRLZXkgPyAndXAnIDogJ2Rvd24nKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgODogLy8gYmFja3NwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0RGVsZXRlUm93Q29sdW1uLmNhbGwodGhpcywgJ2RlbGV0ZS1jZWxsLXRleHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ0RlbGV0ZScpIHtcclxuICAgICAgICAgICAgICAgIGluc2VydERlbGV0ZVJvd0NvbHVtbi5jYWxsKHRoaXMsICdkZWxldGUtY2VsbC10ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoa2V5Q29kZSA+PSA2NSAmJiBrZXlDb2RlIDw9IDkwKVxyXG4gICAgICAgICAgICAgICAgfHwgKGtleUNvZGUgPj0gNDggJiYga2V5Q29kZSA8PSA1NylcclxuICAgICAgICAgICAgICAgIHx8IChrZXlDb2RlID49IDk2ICYmIGtleUNvZGUgPD0gMTA1KVxyXG4gICAgICAgICAgICAgICAgfHwgZXZ0LmtleSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0Q2VsbFRleHQuY2FsbCh0aGlzLCBldnQua2V5LCAnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IDExMykge1xyXG4gICAgICAgICAgICAgICAgLy8gRjJcclxuICAgICAgICAgICAgICAgIGVkaXRvclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hlZXQge1xyXG4gICAgZXZlbnRNYXA7XHJcbiAgICBlbDtcclxuICAgIHRvb2xiYXI7XHJcbiAgICBwcmludDtcclxuICAgIGRhdGE7XHJcbiAgICB0YWJsZUVsO1xyXG4gICAgcm93UmVzaXplcjtcclxuICAgIGNvbFJlc2l6ZXI7XHJcbiAgICB2ZXJ0aWNhbFNjcm9sbGJhcjtcclxuICAgIGhvcml6b250YWxTY3JvbGxiYXI7XHJcbiAgICBlZGl0b3I7XHJcbiAgICBtb2RhbFZhbGlkYXRpb247XHJcbiAgICBjb250ZXh0TWVudTtcclxuICAgIHNlbGVjdG9yO1xyXG4gICAgb3ZlcmxheWVyQ0VsO1xyXG4gICAgb3ZlcmxheWVyRWw7XHJcbiAgICBzb3J0RmlsdGVyO1xyXG4gICAgdGFibGU7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXRFbCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYXAgPSBjcmVhdGVFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICBjb25zdCB7IHZpZXcsIHNob3dUb29sYmFyLCBzaG93Q29udGV4dG1lbnUgfSA9IGRhdGEuc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc2hlZXRgKTtcclxuICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcihkYXRhLCB2aWV3LndpZHRoLCAhc2hvd1Rvb2xiYXIpO1xyXG4gICAgICAgIHRoaXMucHJpbnQgPSBuZXcgUHJpbnQoZGF0YSk7XHJcbiAgICAgICAgdGFyZ2V0RWwuY2hpbGRyZW4odGhpcy50b29sYmFyLmVsLCB0aGlzLmVsLCB0aGlzLnByaW50LmVsKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIC8vIHRhYmxlXHJcbiAgICAgICAgdGhpcy50YWJsZUVsID0gaCgnY2FudmFzJywgYCR7Y3NzUHJlZml4fS10YWJsZWApO1xyXG4gICAgICAgIC8vIHJlc2l6ZXJcclxuICAgICAgICB0aGlzLnJvd1Jlc2l6ZXIgPSBuZXcgUmVzaXplcihmYWxzZSwgZGF0YS5yb3dzLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5jb2xSZXNpemVyID0gbmV3IFJlc2l6ZXIodHJ1ZSwgZGF0YS5jb2xzLm1pbldpZHRoKTtcclxuICAgICAgICAvLyBzY3JvbGxiYXJcclxuICAgICAgICB0aGlzLnZlcnRpY2FsU2Nyb2xsYmFyID0gbmV3IFNjcm9sbGJhcih0cnVlKTtcclxuICAgICAgICB0aGlzLmhvcml6b250YWxTY3JvbGxiYXIgPSBuZXcgU2Nyb2xsYmFyKGZhbHNlKTtcclxuICAgICAgICAvLyBlZGl0b3JcclxuICAgICAgICB0aGlzLmVkaXRvciA9IG5ldyBFZGl0b3IoZm9ybXVsYXMsICgpID0+IHRoaXMuZ2V0VGFibGVPZmZzZXQoKSwgZGF0YS5yb3dzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gZGF0YSB2YWxpZGF0aW9uXHJcbiAgICAgICAgdGhpcy5tb2RhbFZhbGlkYXRpb24gPSBuZXcgTW9kYWxWYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgLy8gY29udGV4dE1lbnVcclxuICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gbmV3IENvbnRleHRNZW51KCgpID0+IHRoaXMuZ2V0UmVjdCgpLCAhc2hvd0NvbnRleHRtZW51KTtcclxuICAgICAgICAvLyBzZWxlY3RvclxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBuZXcgU2VsZWN0b3IoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5ZXJDRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LW92ZXJsYXllci1jb250ZW50YClcclxuICAgICAgICAgICAgLmNoaWxkcmVuKHRoaXMuZWRpdG9yLmVsLCB0aGlzLnNlbGVjdG9yLmVsKTtcclxuICAgICAgICB0aGlzLm92ZXJsYXllckVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1vdmVybGF5ZXJgKVxyXG4gICAgICAgICAgICAuY2hpbGQodGhpcy5vdmVybGF5ZXJDRWwpO1xyXG4gICAgICAgIC8vIHNvcnRGaWx0ZXJcclxuICAgICAgICB0aGlzLnNvcnRGaWx0ZXIgPSBuZXcgU29ydEZpbHRlcigpO1xyXG4gICAgICAgIC8vIHJvb3QgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuZWwuY2hpbGRyZW4odGhpcy50YWJsZUVsLCB0aGlzLm92ZXJsYXllckVsLmVsLCB0aGlzLnJvd1Jlc2l6ZXIuZWwsIHRoaXMuY29sUmVzaXplci5lbCwgdGhpcy52ZXJ0aWNhbFNjcm9sbGJhci5lbCwgdGhpcy5ob3Jpem9udGFsU2Nyb2xsYmFyLmVsLCB0aGlzLmNvbnRleHRNZW51LmVsLCB0aGlzLm1vZGFsVmFsaWRhdGlvbi5lbCwgdGhpcy5zb3J0RmlsdGVyLmVsKTtcclxuICAgICAgICAvLyB0YWJsZVxyXG4gICAgICAgIHRoaXMudGFibGUgPSBuZXcgVGFibGUodGhpcy50YWJsZUVsLmVsLCBkYXRhKTtcclxuICAgICAgICBzaGVldEluaXRFdmVudHMuY2FsbCh0aGlzKTtcclxuICAgICAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gaW5pdCBzZWxlY3RvciBbMCwgMF1cclxuICAgICAgICBzZWxlY3RvclNldC5jYWxsKHRoaXMsIGZhbHNlLCAwLCAwKTtcclxuICAgIH1cclxuICAgIG9uKGV2ZW50TmFtZSwgZnVuYykge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYXAub24oZXZlbnROYW1lLCBmdW5jKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHRyaWdnZXIoZXZlbnROYW1lLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3QgeyBldmVudE1hcCB9ID0gdGhpcztcclxuICAgICAgICBldmVudE1hcC5maXJlKGV2ZW50TmFtZSwgYXJncyk7XHJcbiAgICB9XHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIC8vIGJlZm9yZVxyXG4gICAgICAgIHRoaXMuZWRpdG9yLmNsZWFyKCk7XHJcbiAgICAgICAgLy8gYWZ0ZXJcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHZlcnRpY2FsU2Nyb2xsYmFyU2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGJhclNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5yZXNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5wcmludC5yZXNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rvci5yZXNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy50YWJsZS5yZXNldERhdGEoZGF0YSk7XHJcbiAgICB9XHJcbiAgICBsb2FkRGF0YShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLnNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gZnJlZXplIHJvd3Mgb3IgY29sc1xyXG4gICAgZnJlZXplKHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgICAgICBkYXRhLnNldEZyZWV6ZShyaSwgY2kpO1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVuZG8oKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLnVuZG8oKTtcclxuICAgICAgICBzaGVldFJlc2V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcbiAgICByZWRvKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YS5yZWRvKCk7XHJcbiAgICAgICAgc2hlZXRSZXNldC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcmVsb2FkKCkge1xyXG4gICAgICAgIHNoZWV0UmVzZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdldFJlY3QoKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7IHdpZHRoOiBkYXRhLnZpZXdXaWR0aCgpLCBoZWlnaHQ6IGRhdGEudmlld0hlaWdodCgpIH07XHJcbiAgICB9XHJcbiAgICBnZXRUYWJsZU9mZnNldCgpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZ2V0UmVjdCgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCAtIGNvbHMuaW5kZXhXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgLSByb3dzLmhlaWdodCxcclxuICAgICAgICAgICAgbGVmdDogY29scy5pbmRleFdpZHRoLFxyXG4gICAgICAgICAgICB0b3A6IHJvd3MuaGVpZ2h0LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7XHJcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9idXR0b24nO1xyXG5pbXBvcnQgeyBiaW5kQ2xpY2tvdXRzaWRlLCB1bmJpbmRDbGlja291dHNpZGUgfSBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vY29uZmlnJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJy4uL2xvY2FsZS9sb2NhbGUnO1xyXG5mdW5jdGlvbiBidWlsZE1lbnUoY2xzTmFtZSkge1xyXG4gICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbSAke2Nsc05hbWV9YCk7XHJcbn1cclxuZnVuY3Rpb24gYnVpbGRTb3J0SXRlbShpdCkge1xyXG4gICAgcmV0dXJuIGJ1aWxkTWVudSgnc3RhdGUnKS5jaGlsZCh0KGBzb3J0LiR7aXR9YCkpXHJcbiAgICAgICAgLm9uKCdjbGljay5zdG9wJywgKCkgPT4gdGhpcy5pdGVtQ2xpY2soaXQpKTtcclxufVxyXG5mdW5jdGlvbiBidWlsZEZpbHRlckJvZHkoaXRlbXMpIHtcclxuICAgIGNvbnN0IHsgZmlsdGVyYkVsLCBmaWx0ZXJWYWx1ZXMgfSA9IHRoaXM7XHJcbiAgICBmaWx0ZXJiRWwuaHRtbCgnJyk7XHJcbiAgICBjb25zdCBpdGVtS2V5cyA9IE9iamVjdC5rZXlzKGl0ZW1zKTtcclxuICAgIGl0ZW1LZXlzLmZvckVhY2goKGl0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNudCA9IGl0ZW1zW2l0XTtcclxuICAgICAgICBjb25zdCBhY3RpdmUgPSBmaWx0ZXJWYWx1ZXMuaW5jbHVkZXMoaXQpID8gJ2NoZWNrZWQnIDogJyc7XHJcbiAgICAgICAgZmlsdGVyYkVsLmNoaWxkKGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taXRlbSBzdGF0ZSAke2FjdGl2ZX1gKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLmZpbHRlckNsaWNrKGluZGV4LCBpdCkpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbihpdCA9PT0gJycgPyB0KCdmaWx0ZXIuZW1wdHknKSA6IGl0LCBoKCdkaXYnLCAnbGFiZWwnKS5odG1sKGAoJHtjbnR9KWApKSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiByZXNldEZpbHRlckhlYWRlcigpIHtcclxuICAgIGNvbnN0IHsgZmlsdGVyaEVsLCBmaWx0ZXJWYWx1ZXMsIHZhbHVlcyB9ID0gdGhpcztcclxuICAgIGZpbHRlcmhFbC5odG1sKGAke2ZpbHRlclZhbHVlcy5sZW5ndGh9IC8gJHt2YWx1ZXMubGVuZ3RofWApO1xyXG4gICAgZmlsdGVyaEVsLmNoZWNrZWQoZmlsdGVyVmFsdWVzLmxlbmd0aCA9PT0gdmFsdWVzLmxlbmd0aCk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ydEZpbHRlciB7XHJcbiAgICBmaWx0ZXJiRWw7XHJcbiAgICBmaWx0ZXJoRWw7XHJcbiAgICBlbDtcclxuICAgIHNvcnRBc2NFbDtcclxuICAgIHNvcnREZXNjRWw7XHJcbiAgICBjaTtcclxuICAgIHNvcnREZXNjO1xyXG4gICAgdmFsdWVzO1xyXG4gICAgZmlsdGVyVmFsdWVzO1xyXG4gICAgb2s7XHJcbiAgICBzb3J0O1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJiRWwgPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWJvZHlgKTtcclxuICAgICAgICB0aGlzLmZpbHRlcmhFbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0taGVhZGVyIHN0YXRlYCkub24oJ2NsaWNrLnN0b3AnLCAoKSA9PiB0aGlzLmZpbHRlckNsaWNrKDAsICdhbGwnKSk7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tc29ydC1maWx0ZXJgKS5jaGlsZHJlbih0aGlzLnNvcnRBc2NFbCA9IGJ1aWxkU29ydEl0ZW0uY2FsbCh0aGlzLCAnYXNjJyksIHRoaXMuc29ydERlc2NFbCA9IGJ1aWxkU29ydEl0ZW0uY2FsbCh0aGlzLCAnZGVzYycpLCBidWlsZE1lbnUoJ2RpdmlkZXInKSwgaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1maWx0ZXJgKS5jaGlsZHJlbih0aGlzLmZpbHRlcmhFbCwgdGhpcy5maWx0ZXJiRWwpLCBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWJ1dHRvbnNgKS5jaGlsZHJlbihuZXcgQnV0dG9uKCdjYW5jZWwnKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdjYW5jZWwnKSksIG5ldyBCdXR0b24oJ29rJywgJ3ByaW1hcnknKS5vbignY2xpY2snLCAoKSA9PiB0aGlzLmJ0bkNsaWNrKCdvaycpKSkpLmhpZGUoKTtcclxuICAgICAgICAvLyB0aGlzLnNldEZpbHRlcnMoWyd0ZXN0MScsICd0ZXN0MicsICd0ZXh0MyddKTtcclxuICAgICAgICB0aGlzLmNpID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNvcnREZXNjID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZhbHVlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJWYWx1ZXMgPSBbXTtcclxuICAgIH1cclxuICAgIGJ0bkNsaWNrKGl0KSB7XHJcbiAgICAgICAgaWYgKGl0ID09PSAnb2snKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2ksIHNvcnQsIGZpbHRlclZhbHVlcyB9ID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKHRoaXMub2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2soY2ksIHNvcnQsICdpbicsIGZpbHRlclZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBpdGVtQ2xpY2soaXQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnaXQ6JywgaXQpO1xyXG4gICAgICAgIHRoaXMuc29ydCA9IGl0O1xyXG4gICAgICAgIGNvbnN0IHsgc29ydEFzY0VsLCBzb3J0RGVzY0VsIH0gPSB0aGlzO1xyXG4gICAgICAgIHNvcnRBc2NFbC5jaGVja2VkKGl0ID09PSAnYXNjJyk7XHJcbiAgICAgICAgc29ydERlc2NFbC5jaGVja2VkKGl0ID09PSAnZGVzYycpO1xyXG4gICAgfVxyXG4gICAgZmlsdGVyQ2xpY2soaW5kZXgsIGl0KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2luZGV4OicsIGluZGV4LCBpdCk7XHJcbiAgICAgICAgY29uc3QgeyBmaWx0ZXJiRWwsIGZpbHRlclZhbHVlcywgdmFsdWVzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZmlsdGVyYkVsLmNoaWxkcmVuKCk7XHJcbiAgICAgICAgaWYgKGl0ID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSBmaWx0ZXJWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChpID0+IGgoaSkuY2hlY2tlZChmYWxzZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJWYWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGkgPT4gaChpKS5jaGVja2VkKHRydWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGgoY2hpbGRyZW5baW5kZXhdKS50b2dnbGUoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGZpbHRlclZhbHVlcy5wdXNoKGl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZpbHRlclZhbHVlcy5zcGxpY2UoZmlsdGVyVmFsdWVzLmZpbmRJbmRleChpID0+IGkgPT09IGl0KSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzZXRGaWx0ZXJIZWFkZXIuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICAgIC8vIHY6IGF1dG9GaWx0ZXJcclxuICAgIC8vIGl0ZW1zOiB7dmFsdWU6IGNudH1cclxuICAgIC8vIHNvcnQgeyBjaSwgb3JkZXIgfVxyXG4gICAgc2V0KGNpLCBpdGVtcywgZmlsdGVyLCBzb3J0KSB7XHJcbiAgICAgICAgdGhpcy5jaSA9IGNpO1xyXG4gICAgICAgIGNvbnN0IHsgc29ydEFzY0VsLCBzb3J0RGVzY0VsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChzb3J0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydCA9IHNvcnQub3JkZXI7XHJcbiAgICAgICAgICAgIHNvcnRBc2NFbC5jaGVja2VkKHNvcnQuYXNjKCkpO1xyXG4gICAgICAgICAgICBzb3J0RGVzY0VsLmNoZWNrZWQoc29ydC5kZXNjKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0RGVzYyA9IG51bGw7XHJcbiAgICAgICAgICAgIHNvcnRBc2NFbC5jaGVja2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgc29ydERlc2NFbC5jaGVja2VkKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5zZXRGaWx0ZXJzKGl0ZW1zLCBmaWx0ZXIpO1xyXG4gICAgICAgIHRoaXMudmFsdWVzID0gT2JqZWN0LmtleXMoaXRlbXMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyVmFsdWVzID0gZmlsdGVyID8gQXJyYXkuZnJvbShmaWx0ZXIudmFsdWUpIDogT2JqZWN0LmtleXMoaXRlbXMpO1xyXG4gICAgICAgIGJ1aWxkRmlsdGVyQm9keS5jYWxsKHRoaXMsIGl0ZW1zLCBmaWx0ZXIpO1xyXG4gICAgICAgIHJlc2V0RmlsdGVySGVhZGVyLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcbiAgICBzZXRPZmZzZXQodikge1xyXG4gICAgICAgIHRoaXMuZWwub2Zmc2V0KHYpLnNob3coKTtcclxuICAgICAgICBsZXQgdGluZGV4ID0gMTtcclxuICAgICAgICBiaW5kQ2xpY2tvdXRzaWRlKHRoaXMuZWwsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRpbmRleCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aW5kZXggLT0gMTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zaG93KCk7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgICAgIHVuYmluZENsaWNrb3V0c2lkZSh0aGlzLmVsKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9lbGVtZW50JztcclxuaW1wb3J0IHsgYmluZENsaWNrb3V0c2lkZSwgdW5iaW5kQ2xpY2tvdXRzaWRlIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmZ1bmN0aW9uIGlucHV0TW92ZVByZXYoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGNvbnN0IHsgZmlsdGVySXRlbXMgfSA9IHRoaXM7XHJcbiAgICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuaXRlbUluZGV4ID49IDApXHJcbiAgICAgICAgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpO1xyXG4gICAgdGhpcy5pdGVtSW5kZXggLT0gMTtcclxuICAgIGlmICh0aGlzLml0ZW1JbmRleCA8IDApIHtcclxuICAgICAgICB0aGlzLml0ZW1JbmRleCA9IGZpbHRlckl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgICBmaWx0ZXJJdGVtc1t0aGlzLml0ZW1JbmRleF0udG9nZ2xlKCk7XHJcbn1cclxuZnVuY3Rpb24gaW5wdXRNb3ZlTmV4dChldnQpIHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGNvbnN0IHsgZmlsdGVySXRlbXMgfSA9IHRoaXM7XHJcbiAgICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuaXRlbUluZGV4ID49IDApXHJcbiAgICAgICAgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpO1xyXG4gICAgdGhpcy5pdGVtSW5kZXggKz0gMTtcclxuICAgIGlmICh0aGlzLml0ZW1JbmRleCA+IGZpbHRlckl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICB0aGlzLml0ZW1JbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgICBmaWx0ZXJJdGVtc1t0aGlzLml0ZW1JbmRleF0udG9nZ2xlKCk7XHJcbn1cclxuZnVuY3Rpb24gaW5wdXRFbnRlcihldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgeyBmaWx0ZXJJdGVtcyB9ID0gdGhpcztcclxuICAgIGlmIChmaWx0ZXJJdGVtcy5sZW5ndGggPD0gMClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAodGhpcy5pdGVtSW5kZXggPCAwKVxyXG4gICAgICAgIHRoaXMuaXRlbUluZGV4ID0gMDtcclxuICAgIGZpbHRlckl0ZW1zW3RoaXMuaXRlbUluZGV4XS5lbC5jbGljaygpO1xyXG4gICAgdGhpcy5oaWRlKCk7XHJcbn1cclxuZnVuY3Rpb24gaW5wdXRLZXlkb3duSGFuZGxlcihldnQpIHtcclxuICAgIGNvbnN0IHsga2V5Q29kZSB9ID0gZXZ0O1xyXG4gICAgaWYgKGV2dC5jdHJsS2V5KSB7XHJcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChrZXlDb2RlKSB7XHJcbiAgICAgICAgY2FzZSAzNzogLy8gbGVmdFxyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzg6IC8vIHVwXHJcbiAgICAgICAgICAgIGlucHV0TW92ZVByZXYuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM5OiAvLyByaWdodFxyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDA6IC8vIGRvd25cclxuICAgICAgICAgICAgaW5wdXRNb3ZlTmV4dC5jYWxsKHRoaXMsIGV2dCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXHJcbiAgICAgICAgICAgIGlucHV0RW50ZXIuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgIGlucHV0RW50ZXIuY2FsbCh0aGlzLCBldnQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1Z2dlc3Qge1xyXG4gICAgZmlsdGVySXRlbXM7XHJcbiAgICBpdGVtcztcclxuICAgIGVsO1xyXG4gICAgaXRlbUNsaWNrO1xyXG4gICAgaXRlbUluZGV4O1xyXG4gICAgY29uc3RydWN0b3IoaXRlbXMsIGl0ZW1DbGljaywgd2lkdGggPSAnMjAwcHgnKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJJdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLmVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1zdWdnZXN0YCkuY3NzKCd3aWR0aCcsIHdpZHRoKS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5pdGVtQ2xpY2sgPSBpdGVtQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5pdGVtSW5kZXggPSAtMTtcclxuICAgIH1cclxuICAgIHNldE9mZnNldCh2KSB7XHJcbiAgICAgICAgdGhpcy5lbC5jc3NSZW1vdmVLZXlzKCd0b3AnLCAnYm90dG9tJylcclxuICAgICAgICAgICAgLm9mZnNldCh2KTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5pdGVtSW5kZXggPSAtMTtcclxuICAgICAgICBlbC5oaWRlKCk7XHJcbiAgICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKHRoaXMuZWwucGFyZW50KCkpO1xyXG4gICAgfVxyXG4gICAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgLy8gdGhpcy5zZWFyY2goJycpO1xyXG4gICAgfVxyXG4gICAgc2VhcmNoKHdvcmQpIHtcclxuICAgICAgICBsZXQgeyBpdGVtcyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoIS9eXFxzKiQvLnRlc3Qod29yZCkpIHtcclxuICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gKGl0LmtleSB8fCBpdCkuc3RhcnRzV2l0aCh3b3JkLnRvVXBwZXJDYXNlKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbXMgPSBpdGVtcy5tYXAoKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB7IHRpdGxlIH0gPSBpdDtcclxuICAgICAgICAgICAgaWYgKHRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpdGxlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGl0bGUgPSBpdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS1pdGVtYClcclxuICAgICAgICAgICAgICAgIC5jaGlsZCh0aXRsZSlcclxuICAgICAgICAgICAgICAgIC5vbignY2xpY2suc3RvcCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbUNsaWNrKGl0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGl0LmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoaWxkKGgoJ2RpdicsICdsYWJlbCcpLmh0bWwoaXQubGFiZWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcclxuICAgICAgICAvLyBpdGVtc1swXS50b2dnbGUoKTtcclxuICAgICAgICBlbC5odG1sKCcnKS5jaGlsZHJlbiguLi5pdGVtcykuc2hvdygpO1xyXG4gICAgICAgIGJpbmRDbGlja291dHNpZGUoZWwucGFyZW50KCksICgpID0+IHsgdGhpcy5oaWRlKCk7IH0pO1xyXG4gICAgfVxyXG4gICAgYmluZElucHV0RXZlbnRzKGlucHV0KSB7XHJcbiAgICAgICAgaW5wdXQub24oJ2tleWRvd24nLCBldnQgPT4gaW5wdXRLZXlkb3duSGFuZGxlci5jYWxsKHRoaXMsIGV2dCkpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IHN0cmluZ0F0IH0gZnJvbSAnLi4vY29yZS9hbHBoYWJldCc7XHJcbmltcG9ydCB7IGdldEZvbnRTaXplUHhCeVB0IH0gZnJvbSAnLi4vY29yZS9mb250JztcclxuaW1wb3J0IF9jZWxsIGZyb20gJy4uL2NvcmUvY2VsbCc7XHJcbmltcG9ydCB7IGZvcm11bGFtIH0gZnJvbSAnLi4vY29yZS9mb3JtdWxhJztcclxuaW1wb3J0IHsgZm9ybWF0bSB9IGZyb20gJy4uL2NvcmUvZm9ybWF0JztcclxuaW1wb3J0IHsgRHJhdywgRHJhd0JveCwgdGhpbkxpbmVXaWR0aCwgbnB4LCB9IGZyb20gJy4uL2NhbnZhcy9kcmF3JztcclxuLy8gZ29iYWwgdmFyXHJcbmNvbnN0IGNlbGxQYWRkaW5nV2lkdGggPSA1O1xyXG5jb25zdCB0YWJsZUZpeGVkSGVhZGVyQ2xlYW5TdHlsZSA9IHsgZmlsbFN0eWxlOiAnI2Y0ZjVmOCcgfTtcclxuY29uc3QgdGFibGVHcmlkU3R5bGUgPSB7XHJcbiAgICBmaWxsU3R5bGU6ICcjZmZmJyxcclxuICAgIGxpbmVXaWR0aDogdGhpbkxpbmVXaWR0aCxcclxuICAgIHN0cm9rZVN0eWxlOiAnI2U2ZTZlNicsXHJcbn07XHJcbmZ1bmN0aW9uIHRhYmxlRml4ZWRIZWFkZXJTdHlsZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnLFxyXG4gICAgICAgIGZvbnQ6IGA1MDAgJHtucHgoMTIpfXB4IFNvdXJjZSBTYW5zIFByb2AsXHJcbiAgICAgICAgZmlsbFN0eWxlOiAnIzU4NTc1NycsXHJcbiAgICAgICAgbGluZVdpZHRoOiB0aGluTGluZVdpZHRoKCksXHJcbiAgICAgICAgc3Ryb2tlU3R5bGU6ICcjZTZlNmU2JyxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0RHJhd0JveChkYXRhLCByaW5kZXgsIGNpbmRleCwgeW9mZnNldCA9IDApIHtcclxuICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0LCB9ID0gZGF0YS5jZWxsUmVjdChyaW5kZXgsIGNpbmRleCk7XHJcbiAgICByZXR1cm4gbmV3IERyYXdCb3gobGVmdCwgdG9wICsgeW9mZnNldCwgd2lkdGgsIGhlaWdodCwgY2VsbFBhZGRpbmdXaWR0aCk7XHJcbn1cclxuLypcclxuZnVuY3Rpb24gcmVuZGVyQ2VsbEJvcmRlcnMoYmJveGVzLCB0cmFuc2xhdGVGdW5jKSB7XHJcbiAgY29uc3QgeyBkcmF3IH0gPSB0aGlzO1xyXG4gIGlmIChiYm94ZXMpIHtcclxuICAgIGNvbnN0IHJzZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnYmJveGVzOicsIGJib3hlcyk7XHJcbiAgICBiYm94ZXMuZm9yRWFjaCgoeyByaSwgY2ksIGJveCB9KSA9PiB7XHJcbiAgICAgIGlmICghcnNldC5oYXMocmkpKSB7XHJcbiAgICAgICAgcnNldC5hZGQocmkpO1xyXG4gICAgICAgIHRyYW5zbGF0ZUZ1bmMocmkpO1xyXG4gICAgICB9XHJcbiAgICAgIGRyYXcuc3Ryb2tlQm9yZGVycyhib3gpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDZWxsKGRyYXcsIGRhdGEsIHJpbmRleCwgY2luZGV4LCB5b2Zmc2V0ID0gMCkge1xyXG4gICAgY29uc3QgeyBzb3J0ZWRSb3dNYXAsIHJvd3MsIGNvbHMgfSA9IGRhdGE7XHJcbiAgICBpZiAocm93cy5pc0hpZGUocmluZGV4KSB8fCBjb2xzLmlzSGlkZShjaW5kZXgpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGxldCBucmluZGV4ID0gcmluZGV4O1xyXG4gICAgaWYgKHNvcnRlZFJvd01hcC5oYXMocmluZGV4KSkge1xyXG4gICAgICAgIG5yaW5kZXggPSBzb3J0ZWRSb3dNYXAuZ2V0KHJpbmRleCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjZWxsID0gZGF0YS5nZXRDZWxsKG5yaW5kZXgsIGNpbmRleCk7XHJcbiAgICBpZiAoY2VsbCA9PT0gbnVsbClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBsZXQgZnJvemVuID0gZmFsc2U7XHJcbiAgICBpZiAoJ2VkaXRhYmxlJyBpbiBjZWxsICYmIGNlbGwuZWRpdGFibGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgZnJvemVuID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0eWxlID0gZGF0YS5nZXRDZWxsU3R5bGVPckRlZmF1bHQobnJpbmRleCwgY2luZGV4KTtcclxuICAgIGNvbnN0IGRib3ggPSBnZXREcmF3Qm94KGRhdGEsIHJpbmRleCwgY2luZGV4LCB5b2Zmc2V0KTtcclxuICAgIGRib3guYmdjb2xvciA9IHN0eWxlLmJnY29sb3I7XHJcbiAgICBpZiAoc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkYm94LnNldEJvcmRlcnMoc3R5bGUuYm9yZGVyKTtcclxuICAgICAgICAvLyBiYm94ZXMucHVzaCh7IHJpOiByaW5kZXgsIGNpOiBjaW5kZXgsIGJveDogZGJveCB9KTtcclxuICAgICAgICBkcmF3LnN0cm9rZUJvcmRlcnMoZGJveCk7XHJcbiAgICB9XHJcbiAgICBkcmF3LnJlY3QoZGJveCwgKCkgPT4ge1xyXG4gICAgICAgIC8vIHJlbmRlciB0ZXh0XHJcbiAgICAgICAgbGV0IGNlbGxUZXh0ID0gJyc7XHJcbiAgICAgICAgaWYgKCFkYXRhLnNldHRpbmdzLmV2YWxQYXVzZWQpIHtcclxuICAgICAgICAgICAgY2VsbFRleHQgPSBfY2VsbC5yZW5kZXIoY2VsbC50ZXh0IHx8ICcnLCBmb3JtdWxhbSwgKHksIHgpID0+IChkYXRhLmdldENlbGxUZXh0T3JEZWZhdWx0KHgsIHkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjZWxsVGV4dCA9IGNlbGwudGV4dCB8fCAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0eWxlLmZvcm1hdCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmZvcm1hdG0sICc+PicsIGNlbGwuZm9ybWF0KTtcclxuICAgICAgICAgICAgY2VsbFRleHQgPSBmb3JtYXRtW3N0eWxlLmZvcm1hdF0ucmVuZGVyKGNlbGxUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZm9udCA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlLmZvbnQpO1xyXG4gICAgICAgIGZvbnQuc2l6ZSA9IGdldEZvbnRTaXplUHhCeVB0KGZvbnQuc2l6ZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3N0eWxlOicsIHN0eWxlKTtcclxuICAgICAgICBkcmF3LnRleHQoY2VsbFRleHQsIGRib3gsIHtcclxuICAgICAgICAgICAgYWxpZ246IHN0eWxlLmFsaWduLFxyXG4gICAgICAgICAgICB2YWxpZ246IHN0eWxlLnZhbGlnbixcclxuICAgICAgICAgICAgZm9udCxcclxuICAgICAgICAgICAgY29sb3I6IHN0eWxlLmNvbG9yLFxyXG4gICAgICAgICAgICBzdHJpa2U6IHN0eWxlLnN0cmlrZSxcclxuICAgICAgICAgICAgdW5kZXJsaW5lOiBzdHlsZS51bmRlcmxpbmUsXHJcbiAgICAgICAgfSwgc3R5bGUudGV4dHdyYXApO1xyXG4gICAgICAgIC8vIGVycm9yXHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBkYXRhLnZhbGlkYXRpb25zLmdldEVycm9yKHJpbmRleCwgY2luZGV4KTtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Vycm9yOicsIHJpbmRleCwgY2luZGV4LCBlcnJvcik7XHJcbiAgICAgICAgICAgIGRyYXcuZXJyb3IoZGJveCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm96ZW4pIHtcclxuICAgICAgICAgICAgZHJhdy5mcm96ZW4oZGJveCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyQXV0b2ZpbHRlcih2aWV3UmFuZ2UpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZHJhdyB9ID0gdGhpcztcclxuICAgIGlmICh2aWV3UmFuZ2UpIHtcclxuICAgICAgICBjb25zdCB7IGF1dG9GaWx0ZXIgfSA9IGRhdGE7XHJcbiAgICAgICAgaWYgKCFhdXRvRmlsdGVyLmFjdGl2ZSgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYWZSYW5nZSA9IGF1dG9GaWx0ZXIuaHJhbmdlKCk7XHJcbiAgICAgICAgaWYgKHZpZXdSYW5nZS5pbnRlcnNlY3RzKGFmUmFuZ2UpKSB7XHJcbiAgICAgICAgICAgIGFmUmFuZ2UuZWFjaCgocmksIGNpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYm94ID0gZ2V0RHJhd0JveChkYXRhLCByaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgZHJhdy5kcm9wZG93bihkYm94KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNvbnRlbnQodmlld1JhbmdlLCBmdywgZmgsIHR4LCB0eSkge1xyXG4gICAgY29uc3QgeyBkcmF3LCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgZHJhdy5zYXZlKCk7XHJcbiAgICBkcmF3LnRyYW5zbGF0ZShmdywgZmgpXHJcbiAgICAgICAgLnRyYW5zbGF0ZSh0eCwgdHkpO1xyXG4gICAgY29uc3QgeyBleGNlcHRSb3dTZXQgfSA9IGRhdGE7XHJcbiAgICAvLyBjb25zdCBleGNlcHRSb3dzID0gQXJyYXkuZnJvbShleGNlcHRSb3dTZXQpO1xyXG4gICAgY29uc3QgZmlsdGVyZWRUcmFuc2xhdGVGdW5jID0gKHJpKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmV0ID0gZXhjZXB0Um93U2V0LmhhcyhyaSk7XHJcbiAgICAgICAgaWYgKHJldCkge1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhLnJvd3MuZ2V0SGVpZ2h0KHJpKTtcclxuICAgICAgICAgICAgZHJhdy50cmFuc2xhdGUoMCwgLWhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAhcmV0O1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGV4Y2VwdFJvd1RvdGFsSGVpZ2h0ID0gZGF0YS5leGNlcHRSb3dUb3RhbEhlaWdodCh2aWV3UmFuZ2Uuc3JpLCB2aWV3UmFuZ2UuZXJpKTtcclxuICAgIC8vIDEgcmVuZGVyIGNlbGxcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy50cmFuc2xhdGUoMCwgLWV4Y2VwdFJvd1RvdGFsSGVpZ2h0KTtcclxuICAgIHZpZXdSYW5nZS5lYWNoKChyaSwgY2kpID0+IHtcclxuICAgICAgICByZW5kZXJDZWxsKGRyYXcsIGRhdGEsIHJpLCBjaSk7XHJcbiAgICB9LCByaSA9PiBmaWx0ZXJlZFRyYW5zbGF0ZUZ1bmMocmkpKTtcclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgLy8gMiByZW5kZXIgbWVyZ2VDZWxsXHJcbiAgICBjb25zdCByc2V0ID0gbmV3IFNldCgpO1xyXG4gICAgZHJhdy5zYXZlKCk7XHJcbiAgICBkcmF3LnRyYW5zbGF0ZSgwLCAtZXhjZXB0Um93VG90YWxIZWlnaHQpO1xyXG4gICAgZGF0YS5lYWNoTWVyZ2VzSW5WaWV3KHZpZXdSYW5nZSwgKHsgc3JpLCBzY2ksIGVyaSB9KSA9PiB7XHJcbiAgICAgICAgaWYgKCFleGNlcHRSb3dTZXQuaGFzKHNyaSkpIHtcclxuICAgICAgICAgICAgcmVuZGVyQ2VsbChkcmF3LCBkYXRhLCBzcmksIHNjaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFyc2V0LmhhcyhzcmkpKSB7XHJcbiAgICAgICAgICAgIHJzZXQuYWRkKHNyaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGRhdGEucm93cy5zdW1IZWlnaHQoc3JpLCBlcmkgKyAxKTtcclxuICAgICAgICAgICAgZHJhdy50cmFuc2xhdGUoMCwgLWhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxuICAgIC8vIDMgcmVuZGVyIGF1dG9maWx0ZXJcclxuICAgIHJlbmRlckF1dG9maWx0ZXIuY2FsbCh0aGlzLCB2aWV3UmFuZ2UpO1xyXG4gICAgZHJhdy5yZXN0b3JlKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyU2VsZWN0ZWRIZWFkZXJDZWxsKHgsIHksIHcsIGgpIHtcclxuICAgIGNvbnN0IHsgZHJhdyB9ID0gdGhpcztcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy5hdHRyKHsgZmlsbFN0eWxlOiAncmdiYSg3NSwgMTM3LCAyNTUsIDAuMDgpJyB9KVxyXG4gICAgICAgIC5maWxsUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG59XHJcbi8vIHZpZXdSYW5nZVxyXG4vLyB0eXBlOiBhbGwgfCBsZWZ0IHwgdG9wXHJcbi8vIHc6IHRoZSBmaXhlZCB3aWR0aCBvZiBoZWFkZXJcclxuLy8gaDogdGhlIGZpeGVkIGhlaWdodCBvZiBoZWFkZXJcclxuLy8gdHg6IG1vdmluZyBkaXN0YW5jZSBvbiB4LWF4aXNcclxuLy8gdHk6IG1vdmluZyBkaXN0YW5jZSBvbiB5LWF4aXNcclxuZnVuY3Rpb24gcmVuZGVyRml4ZWRIZWFkZXJzKHR5cGUsIHZpZXdSYW5nZSwgdywgaCwgdHgsIHR5KSB7XHJcbiAgICBjb25zdCB7IGRyYXcsIGRhdGEgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBzdW1IZWlnaHQgPSB2aWV3UmFuZ2UuaDsgLy8gcm93cy5zdW1IZWlnaHQodmlld1JhbmdlLnNyaSwgdmlld1JhbmdlLmVyaSArIDEpO1xyXG4gICAgY29uc3Qgc3VtV2lkdGggPSB2aWV3UmFuZ2UudzsgLy8gY29scy5zdW1XaWR0aCh2aWV3UmFuZ2Uuc2NpLCB2aWV3UmFuZ2UuZWNpICsgMSk7XHJcbiAgICBjb25zdCBudHkgPSB0eSArIGg7XHJcbiAgICBjb25zdCBudHggPSB0eCArIHc7XHJcbiAgICBkcmF3LnNhdmUoKTtcclxuICAgIC8vIGRyYXcgcmVjdCBiYWNrZ3JvdW5kXHJcbiAgICBkcmF3LmF0dHIodGFibGVGaXhlZEhlYWRlckNsZWFuU3R5bGUpO1xyXG4gICAgaWYgKHR5cGUgPT09ICdhbGwnIHx8IHR5cGUgPT09ICdsZWZ0JylcclxuICAgICAgICBkcmF3LmZpbGxSZWN0KDAsIG50eSwgdywgc3VtSGVpZ2h0KTtcclxuICAgIGlmICh0eXBlID09PSAnYWxsJyB8fCB0eXBlID09PSAndG9wJylcclxuICAgICAgICBkcmF3LmZpbGxSZWN0KG50eCwgMCwgc3VtV2lkdGgsIGgpO1xyXG4gICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2ksIH0gPSBkYXRhLnNlbGVjdG9yLnJhbmdlO1xyXG4gICAgLy8gY29uc29sZS5sb2coZGF0YS5zZWxlY3RJbmRleGVzKTtcclxuICAgIC8vIGRyYXcgdGV4dFxyXG4gICAgLy8gdGV4dCBmb250LCBhbGlnbi4uLlxyXG4gICAgZHJhdy5hdHRyKHRhYmxlRml4ZWRIZWFkZXJTdHlsZSgpKTtcclxuICAgIC8vIHktaGVhZGVyLXRleHRcclxuICAgIGlmICh0eXBlID09PSAnYWxsJyB8fCB0eXBlID09PSAnbGVmdCcpIHtcclxuICAgICAgICBkYXRhLnJvd0VhY2godmlld1JhbmdlLnNyaSwgdmlld1JhbmdlLmVyaSwgKGksIHkxLCByb3dIZWlnaHQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeSA9IG50eSArIHkxO1xyXG4gICAgICAgICAgICBjb25zdCBpaSA9IGk7XHJcbiAgICAgICAgICAgIGRyYXcubGluZShbMCwgeV0sIFt3LCB5XSk7XHJcbiAgICAgICAgICAgIGlmIChzcmkgPD0gaWkgJiYgaWkgPCBlcmkgKyAxKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJTZWxlY3RlZEhlYWRlckNlbGwuY2FsbCh0aGlzLCAwLCB5LCB3LCByb3dIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyYXcuZmlsbFRleHQoaWkgKyAxLCB3IC8gMiwgeSArIChyb3dIZWlnaHQgLyAyKSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gMCAmJiBkYXRhLnJvd3MuaXNIaWRlKGkgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgZHJhdy5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICBkcmF3LmF0dHIoeyBzdHJva2VTdHlsZTogJyNjNmM2YzYnIH0pO1xyXG4gICAgICAgICAgICAgICAgZHJhdy5saW5lKFs1LCB5ICsgNV0sIFt3IC0gNSwgeSArIDVdKTtcclxuICAgICAgICAgICAgICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJhdy5saW5lKFswLCBzdW1IZWlnaHQgKyBudHldLCBbdywgc3VtSGVpZ2h0ICsgbnR5XSk7XHJcbiAgICAgICAgZHJhdy5saW5lKFt3LCBudHldLCBbdywgc3VtSGVpZ2h0ICsgbnR5XSk7XHJcbiAgICB9XHJcbiAgICAvLyB4LWhlYWRlci10ZXh0XHJcbiAgICBpZiAodHlwZSA9PT0gJ2FsbCcgfHwgdHlwZSA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBkYXRhLmNvbEVhY2godmlld1JhbmdlLnNjaSwgdmlld1JhbmdlLmVjaSwgKGksIHgxLCBjb2xXaWR0aCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gbnR4ICsgeDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGlpID0gaTtcclxuICAgICAgICAgICAgZHJhdy5saW5lKFt4LCAwXSwgW3gsIGhdKTtcclxuICAgICAgICAgICAgaWYgKHNjaSA8PSBpaSAmJiBpaSA8IGVjaSArIDEpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlclNlbGVjdGVkSGVhZGVyQ2VsbC5jYWxsKHRoaXMsIHgsIDAsIGNvbFdpZHRoLCBoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcmF3LmZpbGxUZXh0KHN0cmluZ0F0KGlpKSwgeCArIChjb2xXaWR0aCAvIDIpLCBoIC8gMik7XHJcbiAgICAgICAgICAgIGlmIChpID4gMCAmJiBkYXRhLmNvbHMuaXNIaWRlKGkgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgZHJhdy5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICBkcmF3LmF0dHIoeyBzdHJva2VTdHlsZTogJyNjNmM2YzYnIH0pO1xyXG4gICAgICAgICAgICAgICAgZHJhdy5saW5lKFt4ICsgNSwgNV0sIFt4ICsgNSwgaCAtIDVdKTtcclxuICAgICAgICAgICAgICAgIGRyYXcucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJhdy5saW5lKFtzdW1XaWR0aCArIG50eCwgMF0sIFtzdW1XaWR0aCArIG50eCwgaF0pO1xyXG4gICAgICAgIGRyYXcubGluZShbMCwgaF0sIFtzdW1XaWR0aCArIG50eCwgaF0pO1xyXG4gICAgfVxyXG4gICAgZHJhdy5yZXN0b3JlKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyRml4ZWRMZWZ0VG9wQ2VsbChmdywgZmgpIHtcclxuICAgIGNvbnN0IHsgZHJhdyB9ID0gdGhpcztcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgLy8gbGVmdC10b3AtY2VsbFxyXG4gICAgZHJhdy5hdHRyKHsgZmlsbFN0eWxlOiAnI2Y0ZjVmOCcgfSlcclxuICAgICAgICAuZmlsbFJlY3QoMCwgMCwgZncsIGZoKTtcclxuICAgIGRyYXcucmVzdG9yZSgpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNvbnRlbnRHcmlkKHsgc3JpLCBzY2ksIGVyaSwgZWNpLCB3LCBoLCB9LCBmdywgZmgsIHR4LCB0eSkge1xyXG4gICAgY29uc3QgeyBkcmF3LCBkYXRhIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBzZXR0aW5ncyB9ID0gZGF0YTtcclxuICAgIGRyYXcuc2F2ZSgpO1xyXG4gICAgZHJhdy5hdHRyKHRhYmxlR3JpZFN0eWxlKVxyXG4gICAgICAgIC50cmFuc2xhdGUoZncgKyB0eCwgZmggKyB0eSk7XHJcbiAgICAvLyBjb25zdCBzdW1XaWR0aCA9IGNvbHMuc3VtV2lkdGgoc2NpLCBlY2kgKyAxKTtcclxuICAgIC8vIGNvbnN0IHN1bUhlaWdodCA9IHJvd3Muc3VtSGVpZ2h0KHNyaSwgZXJpICsgMSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc3VtV2lkdGg6Jywgc3VtV2lkdGgpO1xyXG4gICAgLy8gZHJhdy5jbGVhclJlY3QoMCwgMCwgdywgaCk7XHJcbiAgICBpZiAoIXNldHRpbmdzLnNob3dHcmlkKSB7XHJcbiAgICAgICAgZHJhdy5yZXN0b3JlKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ3Jvd1N0YXJ0OicsIHJvd1N0YXJ0LCAnLCByb3dMZW46Jywgcm93TGVuKTtcclxuICAgIGRhdGEucm93RWFjaChzcmksIGVyaSwgKGksIHksIGNoKSA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3k6JywgeSk7XHJcbiAgICAgICAgaWYgKGkgIT09IHNyaSlcclxuICAgICAgICAgICAgZHJhdy5saW5lKFswLCB5XSwgW3csIHldKTtcclxuICAgICAgICBpZiAoaSA9PT0gZXJpKVxyXG4gICAgICAgICAgICBkcmF3LmxpbmUoWzAsIHkgKyBjaF0sIFt3LCB5ICsgY2hdKTtcclxuICAgIH0pO1xyXG4gICAgZGF0YS5jb2xFYWNoKHNjaSwgZWNpLCAoaSwgeCwgY3cpID0+IHtcclxuICAgICAgICBpZiAoaSAhPT0gc2NpKVxyXG4gICAgICAgICAgICBkcmF3LmxpbmUoW3gsIDBdLCBbeCwgaF0pO1xyXG4gICAgICAgIGlmIChpID09PSBlY2kpXHJcbiAgICAgICAgICAgIGRyYXcubGluZShbeCArIGN3LCAwXSwgW3ggKyBjdywgaF0pO1xyXG4gICAgfSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJGcmVlemVIaWdobGlnaHRMaW5lKGZ3LCBmaCwgZnR3LCBmdGgpIHtcclxuICAgIGNvbnN0IHsgZHJhdywgZGF0YSB9ID0gdGhpcztcclxuICAgIGNvbnN0IHR3aWR0aCA9IGRhdGEudmlld1dpZHRoKCkgLSBmdztcclxuICAgIGNvbnN0IHRoZWlnaHQgPSBkYXRhLnZpZXdIZWlnaHQoKSAtIGZoO1xyXG4gICAgZHJhdy5zYXZlKClcclxuICAgICAgICAudHJhbnNsYXRlKGZ3LCBmaClcclxuICAgICAgICAuYXR0cih7IHN0cm9rZVN0eWxlOiAncmdiYSg3NSwgMTM3LCAyNTUsIC42KScgfSk7XHJcbiAgICBkcmF3LmxpbmUoWzAsIGZ0aF0sIFt0d2lkdGgsIGZ0aF0pO1xyXG4gICAgZHJhdy5saW5lKFtmdHcsIDBdLCBbZnR3LCB0aGVpZ2h0XSk7XHJcbiAgICBkcmF3LnJlc3RvcmUoKTtcclxufVxyXG4vKiogZW5kICovXHJcbmNsYXNzIFRhYmxlIHtcclxuICAgIGVsO1xyXG4gICAgZHJhdztcclxuICAgIGRhdGE7XHJcbiAgICBjb25zdHJ1Y3RvcihlbCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgICB0aGlzLmRyYXcgPSBuZXcgRHJhdyhlbCwgZGF0YS52aWV3V2lkdGgoKSwgZGF0YS52aWV3SGVpZ2h0KCkpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAvLyByZXNpemUgY2FudmFzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gZGF0YTtcclxuICAgICAgICAvLyBmaXhlZCB3aWR0aCBvZiBoZWFkZXJcclxuICAgICAgICBjb25zdCBmdyA9IGNvbHMuaW5kZXhXaWR0aDtcclxuICAgICAgICAvLyBmaXhlZCBoZWlnaHQgb2YgaGVhZGVyXHJcbiAgICAgICAgY29uc3QgZmggPSByb3dzLmhlaWdodDtcclxuICAgICAgICB0aGlzLmRyYXcucmVzaXplKGRhdGEudmlld1dpZHRoKCksIGRhdGEudmlld0hlaWdodCgpKTtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgY29uc3Qgdmlld1JhbmdlID0gZGF0YS52aWV3UmFuZ2UoKTtcclxuICAgICAgICAvLyByZW5kZXJBbGwuY2FsbCh0aGlzLCB2aWV3UmFuZ2UsIGRhdGEuc2Nyb2xsKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRhdGEuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IHR5ID0gZGF0YS5mcmVlemVUb3RhbEhlaWdodCgpO1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZGF0YS5zY3JvbGw7XHJcbiAgICAgICAgLy8gMVxyXG4gICAgICAgIHJlbmRlckNvbnRlbnRHcmlkLmNhbGwodGhpcywgdmlld1JhbmdlLCBmdywgZmgsIHR4LCB0eSk7XHJcbiAgICAgICAgcmVuZGVyQ29udGVudC5jYWxsKHRoaXMsIHZpZXdSYW5nZSwgZncsIGZoLCAteCwgLXkpO1xyXG4gICAgICAgIHJlbmRlckZpeGVkSGVhZGVycy5jYWxsKHRoaXMsICdhbGwnLCB2aWV3UmFuZ2UsIGZ3LCBmaCwgdHgsIHR5KTtcclxuICAgICAgICByZW5kZXJGaXhlZExlZnRUb3BDZWxsLmNhbGwodGhpcywgZncsIGZoKTtcclxuICAgICAgICBjb25zdCBbZnJpLCBmY2ldID0gZGF0YS5mcmVlemU7XHJcbiAgICAgICAgaWYgKGZyaSA+IDAgfHwgZmNpID4gMCkge1xyXG4gICAgICAgICAgICAvLyAyXHJcbiAgICAgICAgICAgIGlmIChmcmkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ciA9IHZpZXdSYW5nZS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgdnIuc3JpID0gMDtcclxuICAgICAgICAgICAgICAgIHZyLmVyaSA9IGZyaSAtIDE7XHJcbiAgICAgICAgICAgICAgICB2ci5oID0gdHk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50R3JpZC5jYWxsKHRoaXMsIHZyLCBmdywgZmgsIHR4LCAwKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnQuY2FsbCh0aGlzLCB2ciwgZncsIGZoLCAteCwgMCk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJGaXhlZEhlYWRlcnMuY2FsbCh0aGlzLCAndG9wJywgdnIsIGZ3LCBmaCwgdHgsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIDNcclxuICAgICAgICAgICAgaWYgKGZjaSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZyID0gdmlld1JhbmdlLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICB2ci5zY2kgPSAwO1xyXG4gICAgICAgICAgICAgICAgdnIuZWNpID0gZmNpIC0gMTtcclxuICAgICAgICAgICAgICAgIHZyLncgPSB0eDtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnRHcmlkLmNhbGwodGhpcywgdnIsIGZ3LCBmaCwgMCwgdHkpO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyRml4ZWRIZWFkZXJzLmNhbGwodGhpcywgJ2xlZnQnLCB2ciwgZncsIGZoLCAwLCB0eSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50LmNhbGwodGhpcywgdnIsIGZ3LCBmaCwgMCwgLXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIDRcclxuICAgICAgICAgICAgY29uc3QgZnJlZXplVmlld1JhbmdlID0gZGF0YS5mcmVlemVWaWV3UmFuZ2UoKTtcclxuICAgICAgICAgICAgcmVuZGVyQ29udGVudEdyaWQuY2FsbCh0aGlzLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHJlbmRlckZpeGVkSGVhZGVycy5jYWxsKHRoaXMsICdhbGwnLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHJlbmRlckNvbnRlbnQuY2FsbCh0aGlzLCBmcmVlemVWaWV3UmFuZ2UsIGZ3LCBmaCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vIDVcclxuICAgICAgICAgICAgcmVuZGVyRnJlZXplSGlnaGxpZ2h0TGluZS5jYWxsKHRoaXMsIGZ3LCBmaCwgdHgsIHR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmRyYXcuY2xlYXIoKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBUYWJsZTtcclxuIiwiaW1wb3J0IHsgRHJvcGRvd25JdGVtIH0gZnJvbSAnLi9kcm9wZG93bl9pdGVtJztcclxuaW1wb3J0IERyb3Bkb3duQWxpZ24gZnJvbSAnLi4vZHJvcGRvd25fYWxpZ24nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGlnbiBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgICAgIHN1cGVyKCdhbGlnbicsICcnLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkFsaWduKFsnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGQuY2hhbmdlID0gKGl0KSA9PiB0aGlzLmNoYW5nZSh0aGlzLnRhZywgdGhpcy5nZXRWYWx1ZShpdCkpO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGhpcy5kZCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFRvZ2dsZUl0ZW0gZnJvbSAnLi90b2dnbGVfaXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9maWx0ZXIgZXh0ZW5kcyBUb2dnbGVJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdhdXRvZmlsdGVyJyk7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZSgpIHsgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2xkIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9udC1ib2xkJywgJ0N0cmwrQicpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkJvcmRlciBmcm9tICcuLi9kcm9wZG93bl9ib3JkZXInO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3JkZXIgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2JvcmRlcicpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Cb3JkZXIoKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJY29uSXRlbSBmcm9tICcuL2ljb25faXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsZWFyZm9ybWF0IGV4dGVuZHMgSWNvbkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2NsZWFyZm9ybWF0Jyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuZXhwb3J0IGNsYXNzIERyb3Bkb3duSXRlbSBleHRlbmRzIEl0ZW0ge1xyXG4gICAgZGQ7XHJcbiAgICBnZXRWYWx1ZSh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZSh2KSB7XHJcbiAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy52YWx1ZSA9IHY7XHJcbiAgICAgICAgICAgIHRoaXMuZGQuc2V0VGl0bGUodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkNvbG9yIGZyb20gJy4uL2Ryb3Bkb3duX2NvbG9yJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsbENvbG9yIGV4dGVuZHMgRHJvcGRvd25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbG9yKSB7XHJcbiAgICAgICAgc3VwZXIoJ2JnY29sb3InLCB1bmRlZmluZWQsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkID0gbmV3IERyb3Bkb3duQ29sb3IodGhpcy50YWcsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvbnQgZnJvbSAnLi4vZHJvcGRvd25fZm9udCc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbnQgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2ZvbnQtbmFtZScpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb250KCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LmtleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEcm9wZG93bkl0ZW0gfSBmcm9tICcuL2Ryb3Bkb3duX2l0ZW0nO1xyXG5pbXBvcnQgRHJvcGRvd25Gb250c2l6ZSBmcm9tICcuLi9kcm9wZG93bl9mb250c2l6ZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdCBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9udC1zaXplJyk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkZvbnRzaXplKCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LnB0O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvcm1hdCBmcm9tICcuLi9kcm9wZG93bl9mb3JtYXQnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtYXQgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2Zvcm1hdCcpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb3JtYXQoKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG4gICAgZ2V0VmFsdWUoaXQpIHtcclxuICAgICAgICByZXR1cm4gaXQua2V5O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkZvcm11bGEgZnJvbSAnLi4vZHJvcGRvd25fZm9ybXVsYSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdCBleHRlbmRzIERyb3Bkb3duSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9ybXVsYScpO1xyXG4gICAgICAgIHRoaXMuZGQgPSBuZXcgRHJvcGRvd25Gb3JtdWxhKCk7XHJcbiAgICAgICAgdGhpcy5kZC5jaGFuZ2UgPSAoaXQpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnLCB0aGlzLmdldFZhbHVlKGl0KSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmRkKTtcclxuICAgIH1cclxuICAgIGdldFZhbHVlKGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGl0LmtleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJlZXplIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZnJlZXplJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb25JdGVtIGV4dGVuZHMgSXRlbSB7XHJcbiAgICBlbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5lbGVtZW50KClcclxuICAgICAgICAgICAgLmNoaWxkKG5ldyBJY29uKHRoaXMudGFnKSlcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsICgpID0+IHRoaXMuY2hhbmdlKHRoaXMudGFnKSk7XHJcbiAgICB9XHJcbiAgICBzZXRTdGF0ZShkaXNhYmxlZCkge1xyXG4gICAgICAgIHRoaXMuZWwuZGlzYWJsZWQoZGlzYWJsZWQpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vLi4vY29uZmlnJztcclxuaW1wb3J0IHsgaCB9IGZyb20gJy4uL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kIH0gZnJvbSAnLi4vZXZlbnQnO1xyXG5pbXBvcnQgQWxpZ24gZnJvbSAnLi9hbGlnbic7XHJcbmltcG9ydCBBdXRvZmlsdGVyIGZyb20gJy4vYXV0b2ZpbHRlcic7XHJcbmltcG9ydCBCb2xkIGZyb20gJy4vYm9sZCc7XHJcbmltcG9ydCBCb3JkZXIgZnJvbSAnLi9ib3JkZXInO1xyXG5pbXBvcnQgQ2xlYXJmb3JtYXQgZnJvbSAnLi9jbGVhcmZvcm1hdCc7XHJcbmltcG9ydCBGaWxsQ29sb3IgZnJvbSAnLi9maWxsX2NvbG9yJztcclxuaW1wb3J0IEZvbnQgZnJvbSAnLi9mb250JztcclxuaW1wb3J0IEZvbnRTaXplIGZyb20gJy4vZm9udF9zaXplJztcclxuaW1wb3J0IEZvcm1hdCBmcm9tICcuL2Zvcm1hdCc7XHJcbmltcG9ydCBGb3JtdWxhIGZyb20gJy4vZm9ybXVsYSc7XHJcbmltcG9ydCBGcmVlemUgZnJvbSAnLi9mcmVlemUnO1xyXG5pbXBvcnQgSXRhbGljIGZyb20gJy4vaXRhbGljJztcclxuaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuaW1wb3J0IE1lcmdlIGZyb20gJy4vbWVyZ2UnO1xyXG5pbXBvcnQgTW9yZSBmcm9tICcuL21vcmUnO1xyXG5pbXBvcnQgUGFpbnRmb3JtYXQgZnJvbSAnLi9wYWludGZvcm1hdCc7XHJcbmltcG9ydCBQcmludCBmcm9tICcuL3ByaW50JztcclxuaW1wb3J0IFJlZG8gZnJvbSAnLi9yZWRvJztcclxuaW1wb3J0IFN0cmlrZSBmcm9tICcuL3N0cmlrZSc7XHJcbmltcG9ydCBUZXh0Q29sb3IgZnJvbSAnLi90ZXh0X2NvbG9yJztcclxuaW1wb3J0IFRleHR3cmFwIGZyb20gJy4vdGV4dHdyYXAnO1xyXG5pbXBvcnQgVW5kZXJsaW5lIGZyb20gJy4vdW5kZXJsaW5lJztcclxuaW1wb3J0IFVuZG8gZnJvbSAnLi91bmRvJztcclxuaW1wb3J0IFZhbGlnbiBmcm9tICcuL3ZhbGlnbic7XHJcbmZ1bmN0aW9uIGJ1aWxkRGl2aWRlcigpIHtcclxuICAgIHJldHVybiBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LXRvb2xiYXItZGl2aWRlcmApO1xyXG59XHJcbmZ1bmN0aW9uIGdlbkJ0bihpdCkge1xyXG4gICAgY29uc3QgYnRuID0gbmV3IEl0ZW0oKTtcclxuICAgIGJ0bi5lbC5vbignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGl0Lm9uQ2xpY2spXHJcbiAgICAgICAgICAgIGl0Lm9uQ2xpY2sodGhpcy5kYXRhLmdldERhdGEoKSwgdGhpcy5kYXRhKTtcclxuICAgIH0pO1xyXG4gICAgYnRuLnRpcCA9IGl0LnRpcCB8fCAnJztcclxuICAgIGxldCB7IGVsIH0gPSBpdDtcclxuICAgIGlmIChpdC5pY29uKSB7XHJcbiAgICAgICAgZWwgPSBoKCdpbWcnKS5hdHRyKCdzcmMnLCBpdC5pY29uKTtcclxuICAgIH1cclxuICAgIGlmIChlbCkge1xyXG4gICAgICAgIGNvbnN0IGljb24gPSBoKCdkaXYnLCBgJHtjc3NQcmVmaXh9LWljb25gKTtcclxuICAgICAgICBpY29uLmNoaWxkKGVsKTtcclxuICAgICAgICBidG4uZWwuY2hpbGQoaWNvbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnRuO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvb2xiYXIge1xyXG4gICAgZGF0YTtcclxuICAgIGNoYW5nZTtcclxuICAgIHdpZHRoRm47XHJcbiAgICBpc0hpZGU7XHJcbiAgICBpdGVtcztcclxuICAgIHVuZG9FbDtcclxuICAgIHJlZG9FbDtcclxuICAgIHBhaW50Zm9ybWF0RWw7XHJcbiAgICBjbGVhcmZvcm1hdEVsO1xyXG4gICAgZm9ybWF0RWw7XHJcbiAgICBmb250RWw7XHJcbiAgICBmb250U2l6ZUVsO1xyXG4gICAgYm9sZEVsO1xyXG4gICAgaXRhbGljRWw7XHJcbiAgICB1bmRlcmxpbmVFbDtcclxuICAgIHN0cmlrZUVsO1xyXG4gICAgdGV4dENvbG9yRWw7XHJcbiAgICBmaWxsQ29sb3JFbDtcclxuICAgIGJvcmRlckVsO1xyXG4gICAgbWVyZ2VFbDtcclxuICAgIGFsaWduRWw7XHJcbiAgICB2YWxpZ25FbDtcclxuICAgIHRleHR3cmFwRWw7XHJcbiAgICBmcmVlemVFbDtcclxuICAgIGF1dG9maWx0ZXJFbDtcclxuICAgIGZvcm11bGFFbDtcclxuICAgIG1vcmVFbDtcclxuICAgIGVsO1xyXG4gICAgYnRucztcclxuICAgIGJ0bnMyO1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgd2lkdGhGbiwgaXNIaWRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMud2lkdGhGbiA9IHdpZHRoRm47XHJcbiAgICAgICAgdGhpcy5pc0hpZGUgPSBpc0hpZGU7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkYXRhLmRlZmF1bHRTdHlsZSgpO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICh0aGlzLnVuZG9FbCA9IG5ldyBVbmRvKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMucmVkb0VsID0gbmV3IFJlZG8oKSksXHJcbiAgICAgICAgICAgICAgICBuZXcgUHJpbnQoKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLnBhaW50Zm9ybWF0RWwgPSBuZXcgUGFpbnRmb3JtYXQoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5jbGVhcmZvcm1hdEVsID0gbmV3IENsZWFyZm9ybWF0KCkpLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBidWlsZERpdmlkZXIoKSxcclxuICAgICAgICAgICAgWyh0aGlzLmZvcm1hdEVsID0gbmV3IEZvcm1hdCgpKV0sXHJcbiAgICAgICAgICAgIGJ1aWxkRGl2aWRlcigpLFxyXG4gICAgICAgICAgICBbKHRoaXMuZm9udEVsID0gbmV3IEZvbnQoKSksICh0aGlzLmZvbnRTaXplRWwgPSBuZXcgRm9udFNpemUoKSldLFxyXG4gICAgICAgICAgICBidWlsZERpdmlkZXIoKSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuYm9sZEVsID0gbmV3IEJvbGQoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5pdGFsaWNFbCA9IG5ldyBJdGFsaWMoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy51bmRlcmxpbmVFbCA9IG5ldyBVbmRlcmxpbmUoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5zdHJpa2VFbCA9IG5ldyBTdHJpa2UoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy50ZXh0Q29sb3JFbCA9IG5ldyBUZXh0Q29sb3Ioc3R5bGUuY29sb3IpKSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgYnVpbGREaXZpZGVyKCksXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICh0aGlzLmZpbGxDb2xvckVsID0gbmV3IEZpbGxDb2xvcihzdHlsZS5iZ2NvbG9yKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5ib3JkZXJFbCA9IG5ldyBCb3JkZXIoKSksXHJcbiAgICAgICAgICAgICAgICAodGhpcy5tZXJnZUVsID0gbmV3IE1lcmdlKCkpLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBidWlsZERpdmlkZXIoKSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuYWxpZ25FbCA9IG5ldyBBbGlnbihzdHlsZS5hbGlnbikpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMudmFsaWduRWwgPSBuZXcgVmFsaWduKHN0eWxlLnZhbGlnbikpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMudGV4dHdyYXBFbCA9IG5ldyBUZXh0d3JhcCgpKSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgYnVpbGREaXZpZGVyKCksXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICh0aGlzLmZyZWV6ZUVsID0gbmV3IEZyZWV6ZSgpKSxcclxuICAgICAgICAgICAgICAgICh0aGlzLmF1dG9maWx0ZXJFbCA9IG5ldyBBdXRvZmlsdGVyKCkpLFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuZm9ybXVsYUVsID0gbmV3IEZvcm11bGEoKSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCB7IGV4dGVuZFRvb2xiYXIgPSB7fSB9ID0gZGF0YS5zZXR0aW5ncztcclxuICAgICAgICBpZiAoZXh0ZW5kVG9vbGJhci5sZWZ0ICYmIGV4dGVuZFRvb2xiYXIubGVmdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMudW5zaGlmdChidWlsZERpdmlkZXIoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bnMgPSBleHRlbmRUb29sYmFyLmxlZnQubWFwKGdlbkJ0bi5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy51bnNoaWZ0KGJ0bnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXh0ZW5kVG9vbGJhci5yaWdodCAmJiBleHRlbmRUb29sYmFyLnJpZ2h0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGJ1aWxkRGl2aWRlcigpKTtcclxuICAgICAgICAgICAgY29uc3QgYnRucyA9IGV4dGVuZFRvb2xiYXIucmlnaHQubWFwKGdlbkJ0bi5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGJ0bnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goWyh0aGlzLm1vcmVFbCA9IG5ldyBNb3JlKCkpXSk7XHJcbiAgICAgICAgdGhpcy5lbCA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhcmApO1xyXG4gICAgICAgIHRoaXMuYnRucyA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhci1idG5zYCk7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdCkpIHtcclxuICAgICAgICAgICAgICAgIGl0LmZvckVhY2goKGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ0bnMuY2hpbGQoaS5lbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaS5jaGFuZ2UgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZSguLi5hcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bnMuY2hpbGQoaXQuZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbC5jaGlsZCh0aGlzLmJ0bnMpO1xyXG4gICAgICAgIGlmIChpc0hpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0QnRuczIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9yZVJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgYmluZCh3aW5kb3csICdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vcmVSZXNpemUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW9yZVJlc2l6ZSgpIHtcclxuICAgICAgICBjb25zdCB7IGVsLCBidG5zLCBtb3JlRWwsIGJ0bnMyIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgbW9yZUJ0bnMsIGNvbnRlbnRFbCB9ID0gbW9yZUVsLmRkO1xyXG4gICAgICAgIGVsLmNzcygnd2lkdGgnLCBgJHt0aGlzLndpZHRoRm4oKX1weGApO1xyXG4gICAgICAgIGNvbnN0IGVsQm94ID0gZWwuYm94KCk7XHJcbiAgICAgICAgbGV0IHN1bVdpZHRoID0gMTYwO1xyXG4gICAgICAgIGxldCBzdW1XaWR0aDIgPSAxMjtcclxuICAgICAgICBjb25zdCBsaXN0MSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGxpc3QyID0gW107XHJcbiAgICAgICAgYnRuczIuZm9yRWFjaCgoW2l0LCB3XSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgc3VtV2lkdGggKz0gdztcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSBidG5zMi5sZW5ndGggLSAxIHx8IHN1bVdpZHRoIDwgZWxCb3gud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGxpc3QxLnB1c2goaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3VtV2lkdGgyICs9IHc7XHJcbiAgICAgICAgICAgICAgICBsaXN0Mi5wdXNoKGl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJ0bnMuaHRtbCgnJykuY2hpbGRyZW4oLi4ubGlzdDEpO1xyXG4gICAgICAgIG1vcmVCdG5zLmh0bWwoJycpLmNoaWxkcmVuKC4uLmxpc3QyKTtcclxuICAgICAgICBjb250ZW50RWwuY3NzKCd3aWR0aCcsIGAke3N1bVdpZHRoMn1weGApO1xyXG4gICAgICAgIGlmIChsaXN0Mi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG1vcmVFbC5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtb3JlRWwuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGluaXRCdG5zMigpIHtcclxuICAgICAgICB0aGlzLmJ0bnMyID0gW107XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdCkpIHtcclxuICAgICAgICAgICAgICAgIGl0LmZvckVhY2goKHsgZWwgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbC5ib3goKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1hcmdpbkxlZnQsIG1hcmdpblJpZ2h0IH0gPSBlbC5jb21wdXRlZFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5zMi5wdXNoKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Qud2lkdGggKyBwYXJzZUludChtYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChtYXJnaW5SaWdodCwgMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gaXQuYm94KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1hcmdpbkxlZnQsIG1hcmdpblJpZ2h0IH0gPSBpdC5jb21wdXRlZFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bnMyLnB1c2goW1xyXG4gICAgICAgICAgICAgICAgICAgIGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Qud2lkdGggKyBwYXJzZUludChtYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChtYXJnaW5SaWdodCwgMTApLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHBhaW50Zm9ybWF0QWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhaW50Zm9ybWF0RWwuYWN0aXZlKCk7XHJcbiAgICB9XHJcbiAgICBwYWludGZvcm1hdFRvZ2dsZSgpIHtcclxuICAgICAgICB0aGlzLnBhaW50Zm9ybWF0RWwudG9nZ2xlKCk7XHJcbiAgICB9XHJcbiAgICB0cmlnZ2VyKHR5cGUpIHtcclxuICAgICAgICB0aGlzW2Ake3R5cGV9RWxgXS5jbGljaygpO1xyXG4gICAgfVxyXG4gICAgcmVzZXREYXRhKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSGlkZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRhdGEuZ2V0U2VsZWN0ZWRDZWxsU3R5bGUoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2FuVW5kbzonLCBkYXRhLmNhblVuZG8oKSk7XHJcbiAgICAgICAgdGhpcy51bmRvRWwuc2V0U3RhdGUoIWRhdGEuY2FuVW5kbygpKTtcclxuICAgICAgICB0aGlzLnJlZG9FbC5zZXRTdGF0ZSghZGF0YS5jYW5SZWRvKCkpO1xyXG4gICAgICAgIHRoaXMubWVyZ2VFbC5zZXRTdGF0ZShkYXRhLmNhblVubWVyZ2UoKSwgIWRhdGEuc2VsZWN0b3IubXVsdGlwbGUoKSk7XHJcbiAgICAgICAgLy8gdGhpcy5hdXRvZmlsdGVyRWwuc2V0U3RhdGUoIWRhdGEuY2FuQXV0b2ZpbHRlcigpKTtcclxuICAgICAgICAvLyB0aGlzLm1lcmdlRWwuZGlzYWJsZWQoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0ZWRDZWxsOicsIHN0eWxlLCBjZWxsKTtcclxuICAgICAgICBjb25zdCB7IGZvbnQsIGZvcm1hdCB9ID0gc3R5bGU7XHJcbiAgICAgICAgdGhpcy5mb3JtYXRFbC5zZXRTdGF0ZShmb3JtYXQpO1xyXG4gICAgICAgIHRoaXMuZm9udEVsLnNldFN0YXRlKGZvbnQubmFtZSk7XHJcbiAgICAgICAgdGhpcy5mb250U2l6ZUVsLnNldFN0YXRlKGZvbnQuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5ib2xkRWwuc2V0U3RhdGUoZm9udC5ib2xkKTtcclxuICAgICAgICB0aGlzLml0YWxpY0VsLnNldFN0YXRlKGZvbnQuaXRhbGljKTtcclxuICAgICAgICB0aGlzLnVuZGVybGluZUVsLnNldFN0YXRlKHN0eWxlLnVuZGVybGluZSk7XHJcbiAgICAgICAgdGhpcy5zdHJpa2VFbC5zZXRTdGF0ZShzdHlsZS5zdHJpa2UpO1xyXG4gICAgICAgIHRoaXMudGV4dENvbG9yRWwuc2V0U3RhdGUoc3R5bGUuY29sb3IpO1xyXG4gICAgICAgIHRoaXMuZmlsbENvbG9yRWwuc2V0U3RhdGUoc3R5bGUuYmdjb2xvcik7XHJcbiAgICAgICAgdGhpcy5hbGlnbkVsLnNldFN0YXRlKHN0eWxlLmFsaWduKTtcclxuICAgICAgICB0aGlzLnZhbGlnbkVsLnNldFN0YXRlKHN0eWxlLnZhbGlnbik7XHJcbiAgICAgICAgdGhpcy50ZXh0d3JhcEVsLnNldFN0YXRlKHN0eWxlLnRleHR3cmFwKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZnJlZXplIGlzIEFjdGl2ZTonLCBkYXRhLmZyZWV6ZUlzQWN0aXZlKCkpO1xyXG4gICAgICAgIHRoaXMuZnJlZXplRWwuc2V0U3RhdGUoZGF0YS5mcmVlemVJc0FjdGl2ZSgpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVG9nZ2xlSXRlbSBmcm9tICcuL3RvZ2dsZV9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSXRhbGljIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignZm9udC1pdGFsaWMnLCAnQ3RybCtJJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi4vLi4vY29uZmlnJztcclxuaW1wb3J0IHsgdG9vbHRpcCB9IGZyb20gJy4uL3Rvb2x0aXAnO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi4vZWxlbWVudCc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICcuLi8uLi9sb2NhbGUvbG9jYWxlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSXRlbSB7XHJcbiAgICB0aXA7XHJcbiAgICB0YWc7XHJcbiAgICBzaG9ydGN1dDtcclxuICAgIC8vIHZhbHVlOiBhbnk7XHJcbiAgICBlbDtcclxuICAgIGNoYW5nZTtcclxuICAgIC8vIHRvb2x0aXBcclxuICAgIC8vIHRhZzogdGhlIHN1YmNsYXNzIHR5cGVcclxuICAgIC8vIHNob3J0Y3V0OiBzaG9ydGN1dCBrZXlcclxuICAgIGNvbnN0cnVjdG9yKHRhZywgc2hvcnRjdXQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy50aXAgPSAnJztcclxuICAgICAgICBpZiAodGFnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGlwID0gdChgdG9vbGJhci4ke3RhZy5yZXBsYWNlKC8tW2Etel0vZywgKGMpID0+IGNbMV0udG9VcHBlckNhc2UoKSl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG9ydGN1dCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpcCArPSBgICgke3Nob3J0Y3V0fSlgO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhZyA9IHRhZztcclxuICAgICAgICB0aGlzLnNob3J0Y3V0ID0gc2hvcnRjdXQ7XHJcbiAgICAgICAgLy8gdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLmVsZW1lbnQoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9ICgpID0+IHsgfTtcclxuICAgIH1cclxuICAgIGVsZW1lbnQoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0aXAgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhci1idG5gKVxyXG4gICAgICAgICAgICAub24oJ21vdXNlZW50ZXInLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpcClcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAodGhpcy50aXAsIGV2dC50YXJnZXQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLXRvb2x0aXAnLCB0aXApO1xyXG4gICAgfVxyXG4gICAgc2V0U3RhdGUoLi4uYXJncykgeyB9XHJcbn1cclxuIiwiaW1wb3J0IFRvZ2dsZUl0ZW0gZnJvbSAnLi90b2dnbGVfaXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lcmdlIGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignbWVyZ2UnKTtcclxuICAgIH1cclxuICAgIHNldFN0YXRlKGFjdGl2ZSwgZGlzYWJsZWQpIHtcclxuICAgICAgICB0aGlzLmVsLmFjdGl2ZShhY3RpdmUpLmRpc2FibGVkKGRpc2FibGVkKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRHJvcGRvd24gZnJvbSAnLi4vZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBEcm9wZG93bkl0ZW0gfSBmcm9tICcuL2Ryb3Bkb3duX2l0ZW0nO1xyXG5pbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi8uLi9jb25maWcnO1xyXG5pbXBvcnQgeyBoIH0gZnJvbSAnLi4vZWxlbWVudCc7XHJcbmltcG9ydCBJY29uIGZyb20gJy4uL2ljb24nO1xyXG5jbGFzcyBEcm9wZG93bk1vcmUgZXh0ZW5kcyBEcm9wZG93biB7XHJcbiAgICBtb3JlQnRucztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGNvbnN0IGljb24gPSBuZXcgSWNvbignZWxsaXBzaXMnKTtcclxuICAgICAgICBjb25zdCBtb3JlQnRucyA9IGgoJ2RpdicsIGAke2Nzc1ByZWZpeH0tdG9vbGJhci1tb3JlYCk7XHJcbiAgICAgICAgc3VwZXIoaWNvbiwgJ2F1dG8nLCBmYWxzZSwgJ2JvdHRvbS1yaWdodCcsIG1vcmVCdG5zKTtcclxuICAgICAgICB0aGlzLm1vcmVCdG5zID0gbW9yZUJ0bnM7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3NzKCdtYXgtd2lkdGgnLCAnNDIwcHgnKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3JlIGV4dGVuZHMgRHJvcGRvd25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdtb3JlJyk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bk1vcmUoKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgICAgIHRoaXMuZWwuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmVsLnNob3coKTtcclxuICAgIH1cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbC5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFRvZ2dsZUl0ZW0gZnJvbSAnLi90b2dnbGVfaXRlbSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhaW50Zm9ybWF0IGV4dGVuZHMgVG9nZ2xlSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigncGFpbnRmb3JtYXQnKTtcclxuICAgIH1cclxuICAgIHNldFN0YXRlKCkgeyB9XHJcbn1cclxuIiwiaW1wb3J0IEljb25JdGVtIGZyb20gJy4vaWNvbl9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpbnQgZXh0ZW5kcyBJY29uSXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigncHJpbnQnLCAnQ3RybCtQJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEljb25JdGVtIGZyb20gJy4vaWNvbl9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVkbyBleHRlbmRzIEljb25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdyZWRvJywgJ0N0cmwrWScpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpa2UgZXh0ZW5kcyBUb2dnbGVJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdzdHJpa2UnLCAnQ3RybCtVJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRHJvcGRvd25JdGVtIH0gZnJvbSAnLi9kcm9wZG93bl9pdGVtJztcclxuaW1wb3J0IERyb3Bkb3duQ29sb3IgZnJvbSAnLi4vZHJvcGRvd25fY29sb3InO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0Q29sb3IgZXh0ZW5kcyBEcm9wZG93bkl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoY29sb3IpIHtcclxuICAgICAgICBzdXBlcignY29sb3InLCB1bmRlZmluZWQsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkID0gbmV3IERyb3Bkb3duQ29sb3IodGhpcy50YWcsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmRkLmNoYW5nZSA9IChpdCkgPT4gdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMuZ2V0VmFsdWUoaXQpKTtcclxuICAgICAgICB0aGlzLmVsLmNoaWxkKHRoaXMuZGQpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0d3JhcCBleHRlbmRzIFRvZ2dsZUl0ZW0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ3RleHR3cmFwJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEl0ZW0gZnJvbSAnLi9pdGVtJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZ2dsZUl0ZW0gZXh0ZW5kcyBJdGVtIHtcclxuICAgIGVsZW1lbnQoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWcgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyXHJcbiAgICAgICAgICAgIC5lbGVtZW50KClcclxuICAgICAgICAgICAgLmNoaWxkKG5ldyBJY29uKHRhZykpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB0aGlzLmNsaWNrKCkpO1xyXG4gICAgfVxyXG4gICAgY2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UodGhpcy50YWcsIHRoaXMudG9nZ2xlKCkpO1xyXG4gICAgfVxyXG4gICAgc2V0U3RhdGUoYWN0aXZlLCBkaXNhYmxlZCkge1xyXG4gICAgICAgIHRoaXMuZWwuYWN0aXZlKGFjdGl2ZSk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwudG9nZ2xlKCk7XHJcbiAgICB9XHJcbiAgICBhY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBUb2dnbGVJdGVtIGZyb20gJy4vdG9nZ2xlX2l0ZW0nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVbmRlcmxpbmUgZXh0ZW5kcyBUb2dnbGVJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCd1bmRlcmxpbmUnLCAnQ3RybCtVJyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEljb25JdGVtIGZyb20gJy4vaWNvbl9pdGVtJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5kbyBleHRlbmRzIEljb25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCd1bmRvJywgJ0N0cmwrWicpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyb3Bkb3duSXRlbSB9IGZyb20gJy4vZHJvcGRvd25faXRlbSc7XHJcbmltcG9ydCBEcm9wZG93bkFsaWduIGZyb20gJy4uL2Ryb3Bkb3duX2FsaWduJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWduIGV4dGVuZHMgRHJvcGRvd25JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XHJcbiAgICAgICAgc3VwZXIoJ3ZhbGlnbicsICcnLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5kZCA9IG5ldyBEcm9wZG93bkFsaWduKFsndG9wJywgJ21pZGRsZScsICdib3R0b20nXSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGQuY2hhbmdlID0gKGl0KSA9PiB0aGlzLmNoYW5nZSh0aGlzLnRhZywgdGhpcy5nZXRWYWx1ZShpdCkpO1xyXG4gICAgICAgIHRoaXMuZWwuY2hpbGQodGhpcy5kZCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsIGRvY3VtZW50ICovXHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnO1xyXG5pbXBvcnQgeyBiaW5kIH0gZnJvbSAnLi9ldmVudCc7XHJcbmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmV4cG9ydCBmdW5jdGlvbiB0b29sdGlwKGh0bWwsIHRhcmdldCkge1xyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fS10b29sdGlwYCkuaHRtbChodG1sKS5zaG93KCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsLmVsKTtcclxuICAgIGNvbnN0IGVsQm94ID0gZWwuYm94KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZWxCb3g6JywgZWxCb3gpO1xyXG4gICAgZWwuY3NzKCdsZWZ0JywgYCR7bGVmdCArIHdpZHRoIC8gMiAtIGVsQm94LndpZHRoIC8gMn1weGApLmNzcygndG9wJywgYCR7dG9wICsgaGVpZ2h0ICsgMn1weGApO1xyXG4gICAgYmluZCh0YXJnZXQsICdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGVsLmVsKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsLmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGJpbmQodGFyZ2V0LCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwuZWwpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwuZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cclxuZXhwb3J0IGNvbnN0IGNzc1ByZWZpeCA9ICd4LXNwcmVhZHNoZWV0JztcclxuZXhwb3J0IGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGNzc1ByZWZpeCxcclxuICAgIGRwcixcclxufTtcclxuIiwiY29uc3QgYWxwaGFiZXRzID0gW1xyXG4gICAgJ0EnLFxyXG4gICAgJ0InLFxyXG4gICAgJ0MnLFxyXG4gICAgJ0QnLFxyXG4gICAgJ0UnLFxyXG4gICAgJ0YnLFxyXG4gICAgJ0cnLFxyXG4gICAgJ0gnLFxyXG4gICAgJ0knLFxyXG4gICAgJ0onLFxyXG4gICAgJ0snLFxyXG4gICAgJ0wnLFxyXG4gICAgJ00nLFxyXG4gICAgJ04nLFxyXG4gICAgJ08nLFxyXG4gICAgJ1AnLFxyXG4gICAgJ1EnLFxyXG4gICAgJ1InLFxyXG4gICAgJ1MnLFxyXG4gICAgJ1QnLFxyXG4gICAgJ1UnLFxyXG4gICAgJ1YnLFxyXG4gICAgJ1cnLFxyXG4gICAgJ1gnLFxyXG4gICAgJ1knLFxyXG4gICAgJ1onLFxyXG5dO1xyXG4vKiogaW5kZXggbnVtYmVyIDIgbGV0dGVyc1xyXG4gKiBAZXhhbXBsZSBzdHJpbmdBdCgyNikgPT0+ICdBQSdcclxuICogQGRhdGUgMjAxOS0xMC0xMFxyXG4gKiBAZXhwb3J0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0F0KGluZGV4KSB7XHJcbiAgICBsZXQgc3RyID0gJyc7XHJcbiAgICBsZXQgY2luZGV4ID0gaW5kZXg7XHJcbiAgICB3aGlsZSAoY2luZGV4ID49IGFscGhhYmV0cy5sZW5ndGgpIHtcclxuICAgICAgICBjaW5kZXggLz0gYWxwaGFiZXRzLmxlbmd0aDtcclxuICAgICAgICBjaW5kZXggLT0gMTtcclxuICAgICAgICBzdHIgKz0gYWxwaGFiZXRzW3BhcnNlSW50KGNpbmRleCwgMTApICUgYWxwaGFiZXRzLmxlbmd0aF07XHJcbiAgICB9XHJcbiAgICBjb25zdCBsYXN0ID0gaW5kZXggJSBhbHBoYWJldHMubGVuZ3RoO1xyXG4gICAgc3RyICs9IGFscGhhYmV0c1tsYXN0XTtcclxuICAgIHJldHVybiBzdHI7XHJcbn1cclxuLyoqIHRyYW5zbGF0ZSBsZXR0ZXIgaW4gQTEtdGFnIHRvIG51bWJlclxyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBcIkFBXCIgaW4gQTEtdGFnIFwiQUExXCJcclxuICogQHJldHVybnMge251bWJlcn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmRleEF0KHN0cikge1xyXG4gICAgbGV0IHJldCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc3RyLmxlbmd0aDsgKytpKVxyXG4gICAgICAgIHJldCA9IDI2ICogcmV0ICsgc3RyLmNoYXJDb2RlQXQoaSkgLSA2NDtcclxuICAgIHJldHVybiByZXQgLSAxO1xyXG59XHJcbi8vIEIxMCA9PiB4LHlcclxuLyoqIHRyYW5zbGF0ZSBBMS10YWcgdG8gWFktdGFnXHJcbiAqIEBkYXRlIDIwMTktMTAtMTBcclxuICogQGV4cG9ydFxyXG4gKiBAcGFyYW0ge3RhZ0ExfSBzcmNcclxuICogQHJldHVybnMge3RhZ1hZfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4cHIyeHkoc3JjKSB7XHJcbiAgICBsZXQgeCA9ICcnO1xyXG4gICAgbGV0IHkgPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgaWYgKHNyYy5jaGFyQXQoaSkgPj0gJzAnICYmIHNyYy5jaGFyQXQoaSkgPD0gJzknKSB7XHJcbiAgICAgICAgICAgIHkgKz0gc3JjLmNoYXJBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHggKz0gc3JjLmNoYXJBdChpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2luZGV4QXQoeCksIHBhcnNlSW50KHksIDEwKSAtIDFdO1xyXG59XHJcbi8qKiB0cmFuc2xhdGUgWFktdGFnIHRvIEExLXRhZ1xyXG4gKiBAZXhhbXBsZSB4LHkgPT4gQjEwXHJcbiAqIEBkYXRlIDIwMTktMTAtMTBcclxuICogQGV4cG9ydFxyXG4gKiBAcGFyYW0ge251bWJlcn0geFxyXG4gKiBAcGFyYW0ge251bWJlcn0geVxyXG4gKiBAcmV0dXJucyB7dGFnQTF9XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24geHkyZXhwcih4LCB5KSB7XHJcbiAgICByZXR1cm4gYCR7c3RyaW5nQXQoeCl9JHt5ICsgMX1gO1xyXG59XHJcbi8qKiB0cmFuc2xhdGUgQTEtdGFnIHNyYyBieSAoeG4sIHluKVxyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHt0YWdBMX0gc3JjXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4blxyXG4gKiBAcGFyYW0ge251bWJlcn0geW5cclxuICogQHJldHVybnMge3RhZ0ExfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4cHIyZXhwcihzcmMsIHhuLCB5biwgY29uZGl0aW9uID0gKHgsIHkpID0+IHRydWUpIHtcclxuICAgIGlmICh4biA9PT0gMCAmJiB5biA9PT0gMClcclxuICAgICAgICByZXR1cm4gc3JjO1xyXG4gICAgY29uc3QgW3gsIHldID0gZXhwcjJ4eShzcmMpO1xyXG4gICAgaWYgKCFjb25kaXRpb24oeCwgeSkpXHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIHJldHVybiB4eTJleHByKHggKyB4biwgeSArIHluKTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBzdHJpbmdBdCxcclxuICAgIGluZGV4QXQsXHJcbiAgICBleHByMnh5LFxyXG4gICAgeHkyZXhwcixcclxuICAgIGV4cHIyZXhwcixcclxufTtcclxuIiwiaW1wb3J0IHsgQ2VsbFJhbmdlIH0gZnJvbSAnLi9jZWxsX3JhbmdlJztcclxuLy8gb3BlcmF0b3I6IGFsbHxlcXxuZXF8Z3R8Z3RlfGx0fGx0ZXxpbnxiZVxyXG4vLyB2YWx1ZTpcclxuLy8gICBpbiA9PiBbXVxyXG4vLyAgIGJlID0+IFttaW4sIG1heF1cclxuY2xhc3MgRmlsdGVyIHtcclxuICAgIGNpO1xyXG4gICAgb3BlcmF0b3I7XHJcbiAgICB2YWx1ZTtcclxuICAgIGNvbnN0cnVjdG9yKGNpLCBvcGVyYXRvciwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmNpID0gY2k7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHNldChvcGVyYXRvciwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgaW5jbHVkZXModikge1xyXG4gICAgICAgIGNvbnN0IHsgb3BlcmF0b3IsIHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2FsbCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2luJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuaW5jbHVkZXModik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZsZW5ndGgoKSB7XHJcbiAgICAgICAgY29uc3QgeyBvcGVyYXRvciwgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnaW4nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICBjb25zdCB7IGNpLCBvcGVyYXRvciwgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHsgY2ksIG9wZXJhdG9yLCB2YWx1ZSB9O1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFNvcnQge1xyXG4gICAgY2k7XHJcbiAgICBvcmRlcjtcclxuICAgIGNvbnN0cnVjdG9yKGNpLCBvcmRlcikge1xyXG4gICAgICAgIHRoaXMuY2kgPSBjaTtcclxuICAgICAgICB0aGlzLm9yZGVyID0gb3JkZXI7XHJcbiAgICB9XHJcbiAgICBhc2MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JkZXIgPT09ICdhc2MnO1xyXG4gICAgfVxyXG4gICAgZGVzYygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcmRlciA9PT0gJ2Rlc2MnO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9GaWx0ZXIge1xyXG4gICAgcmVmO1xyXG4gICAgZmlsdGVycztcclxuICAgIHNvcnQ7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlZiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5zb3J0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldERhdGEoeyByZWYsIGZpbHRlcnMsIHNvcnQgfSkge1xyXG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZiA9IHJlZjtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzID0gZmlsdGVycy5tYXAoaXQgPT4gbmV3IEZpbHRlcihpdC5jaSwgaXQub3BlcmF0b3IsIGl0LnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGlmIChzb3J0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnQgPSBuZXcgU29ydChzb3J0LmNpLCBzb3J0Lm9yZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByZWYsIGZpbHRlcnMsIHNvcnQgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHJlZiwgZmlsdGVyczogZmlsdGVycy5tYXAoaXQgPT4gaXQuZ2V0RGF0YSgpKSwgc29ydCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBhZGRGaWx0ZXIoY2ksIG9wZXJhdG9yLCB2YWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuZ2V0RmlsdGVyKGNpKTtcclxuICAgICAgICBpZiAoZmlsdGVyID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnB1c2gobmV3IEZpbHRlcihjaSwgb3BlcmF0b3IsIHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmaWx0ZXIuc2V0KG9wZXJhdG9yLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0U29ydChjaSwgb3JkZXIpIHtcclxuICAgICAgICB0aGlzLnNvcnQgPSBvcmRlciA/IG5ldyBTb3J0KGNpLCBvcmRlcikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgaW5jbHVkZXMocmksIGNpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHJhbmdlKCkuaW5jbHVkZXMocmksIGNpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0U29ydChjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgc29ydCB9ID0gdGhpcztcclxuICAgICAgICBpZiAoc29ydCAmJiBzb3J0LmNpID09PSBjaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc29ydDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRGaWx0ZXIoY2kpIHtcclxuICAgICAgICBjb25zdCB7IGZpbHRlcnMgfSA9IHRoaXM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzW2ldLmNpID09PSBjaSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBmaWx0ZXJlZFJvd3MoZ2V0Q2VsbCkge1xyXG4gICAgICAgIC8vIGNvbnN0IGFyeSA9IFtdO1xyXG4gICAgICAgIC8vIGxldCBsYXN0cmkgPSAwO1xyXG4gICAgICAgIGNvbnN0IHJzZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgY29uc3QgZnNldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUoKSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNyaSwgZXJpIH0gPSB0aGlzLnJhbmdlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZmlsdGVycyB9ID0gdGhpcztcclxuICAgICAgICAgICAgZm9yIChsZXQgcmkgPSBzcmkgKyAxOyByaSA8PSBlcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwocmksIGZpbHRlci5jaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3RleHQgPSBjZWxsID8gY2VsbC50ZXh0IDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIuaW5jbHVkZXMoY3RleHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJzZXQuYWRkKHJpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmc2V0LmFkZChyaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHJzZXQsIGZzZXQgfTtcclxuICAgIH1cclxuICAgIGl0ZW1zKGNpLCBnZXRDZWxsKSB7XHJcbiAgICAgICAgY29uc3QgbSA9IHt9O1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3JpLCBlcmkgfSA9IHRoaXMucmFuZ2UoKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcmkgPSBzcmkgKyAxOyByaSA8PSBlcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCAmJiAhL15cXHMqJC8udGVzdChjZWxsLnRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gY2VsbC50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNudCA9IChtW2tleV0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIG1ba2V5XSA9IGNudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1bJyddID0gKG1bJyddIHx8IDApICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbTtcclxuICAgIH1cclxuICAgIHJhbmdlKCkge1xyXG4gICAgICAgIHJldHVybiBDZWxsUmFuZ2UudmFsdWVPZih0aGlzLnJlZik7XHJcbiAgICB9XHJcbiAgICBocmFuZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgciA9IHRoaXMucmFuZ2UoKTtcclxuICAgICAgICByLmVyaSA9IHIuc3JpO1xyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWYgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc29ydCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmICE9PSBudWxsO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGV4cHIyeHksIHh5MmV4cHIgfSBmcm9tICcuL2FscGhhYmV0JztcclxuaW1wb3J0IHsgbnVtYmVyQ2FsYyB9IGZyb20gJy4vaGVscGVyJztcclxuLy8gQ29udmVydGluZyBpbmZpeCBleHByZXNzaW9uIHRvIGEgc3VmZml4IGV4cHJlc3Npb25cclxuLy8gc3JjOiBBVkVSQUdFKFNVTShBMSxBMiksIEIxKSArIDUwICsgQjIwXHJcbi8vIHJldHVybjogW0ExLCBBMl0sIFNVTVssIEIxXSxBVkVSQUdFLDUwLCssQjIwLCtcclxuY29uc3QgaW5maXhFeHByVG9TdWZmaXhFeHByID0gKHNyYykgPT4ge1xyXG4gICAgY29uc3Qgb3BlcmF0b3JTdGFjayA9IFtdO1xyXG4gICAgY29uc3Qgc3RhY2sgPSBbXTtcclxuICAgIGxldCBzdWJTdHJzID0gW107IC8vIFNVTSwgQTEsIEIyLCA1MCAuLi5cclxuICAgIGxldCBmbkFyZ1R5cGUgPSAwOyAvLyAxID0+ICwgMiA9PiA6XHJcbiAgICBsZXQgZm5BcmdPcGVyYXRvciA9ICcnO1xyXG4gICAgbGV0IGZuQXJnc0xlbiA9IDE7IC8vIEExLEEyLEEzLi4uXHJcbiAgICBsZXQgb2xkYyA9ICcnO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBjb25zdCBjID0gc3JjLmNoYXJBdChpKTtcclxuICAgICAgICBpZiAoYyAhPT0gJyAnKSB7XHJcbiAgICAgICAgICAgIGlmIChjID49ICdhJyAmJiBjIDw9ICd6Jykge1xyXG4gICAgICAgICAgICAgICAgc3ViU3Rycy5wdXNoKGMudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKGMgPj0gJzAnICYmIGMgPD0gJzknKSB8fCAoYyA+PSAnQScgJiYgYyA8PSAnWicpIHx8IGMgPT09ICcuJykge1xyXG4gICAgICAgICAgICAgICAgc3ViU3Rycy5wdXNoKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICdcIicpIHtcclxuICAgICAgICAgICAgICAgIGkgKz0gMTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChzcmMuY2hhckF0KGkpICE9PSAnXCInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViU3Rycy5wdXNoKHNyYy5jaGFyQXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goYFwiJHtzdWJTdHJzLmpvaW4oJycpfWApO1xyXG4gICAgICAgICAgICAgICAgc3ViU3RycyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICctJyAmJiAvWytcXC0qLywoXS8udGVzdChvbGRjKSkge1xyXG4gICAgICAgICAgICAgICAgc3ViU3Rycy5wdXNoKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3N1YlN0cnM6Jywgc3ViU3Rycy5qb2luKCcnKSwgc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgIT09ICcoJyAmJiBzdWJTdHJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHN1YlN0cnMuam9pbignJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGMgPT09ICcpJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjMSA9IG9wZXJhdG9yU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZuQXJnVHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmbiBhcmd1bWVudCByYW5nZSA9PiBBMTpCNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2V4LCBleV0gPSBleHByMnh5KHN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtzeCwgc3ldID0gZXhwcjJ4eShzdGFjay5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnOjonLCBzeCwgc3ksIGV4LCBleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VsZW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IHN4OyB4IDw9IGV4OyB4ICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gc3k7IHkgPD0gZXk7IHkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHh5MmV4cHIoeCwgeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZWxlbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goW2MxLCByYW5nZWxlbl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChmbkFyZ1R5cGUgPT09IDEgfHwgZm5BcmdUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbkFyZ1R5cGUgPT09IDMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGZuQXJnT3BlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmbiBhcmd1bWVudCA9PiBBMSxBMixCNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFtjMSwgZm5BcmdzTGVuXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuQXJnc0xlbiA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYzE6JywgYzEsIGZuQXJnVHlwZSwgc3RhY2ssIG9wZXJhdG9yU3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYzEgIT09ICcoJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChjMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JTdGFjay5sZW5ndGggPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gb3BlcmF0b3JTdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbkFyZ1R5cGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gJz0nIHx8IGMgPT09ICc+JyB8fCBjID09PSAnPCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYyA9IHNyYy5jaGFyQXQoaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZuQXJnT3BlcmF0b3IgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYyA9PT0gJz0nIHx8IG5jID09PSAnLScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm5BcmdPcGVyYXRvciArPSBuYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbkFyZ1R5cGUgPSAzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm5BcmdUeXBlID0gMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICcsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbkFyZ1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChmbkFyZ09wZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm5BcmdUeXBlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmbkFyZ3NMZW4gKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09ICcoJyAmJiBzdWJTdHJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yU3RhY2sucHVzaChzdWJTdHJzLmpvaW4oJycpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByaW9yaXR5OiAqLyA+ICstXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3h4eHg6Jywgb3BlcmF0b3JTdGFjaywgYywgc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvclN0YWNrLmxlbmd0aCA+IDAgJiYgKGMgPT09ICcrJyB8fCBjID09PSAnLScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3AgPSBvcGVyYXRvclN0YWNrW29wZXJhdG9yU3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3AgIT09ICcoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gob3BlcmF0b3JTdGFjay5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPT09ICcqJyB8fCB0b3AgPT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9wZXJhdG9yU3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IG9wZXJhdG9yU3RhY2tbb3BlcmF0b3JTdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9wICE9PSAnKCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gob3BlcmF0b3JTdGFjay5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcGVyYXRvclN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9wID0gb3BlcmF0b3JTdGFja1tvcGVyYXRvclN0YWNrLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9wID09PSAnKicgfHwgdG9wID09PSAnLycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG9wZXJhdG9yU3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRvclN0YWNrLnB1c2goYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdWJTdHJzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2xkYyA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHN1YlN0cnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHN0YWNrLnB1c2goc3ViU3Rycy5qb2luKCcnKSk7XHJcbiAgICB9XHJcbiAgICB3aGlsZSAob3BlcmF0b3JTdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc3RhY2sucHVzaChvcGVyYXRvclN0YWNrLnBvcCgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGFjaztcclxufTtcclxuY29uc3QgZXZhbFN1YkV4cHIgPSAoc3ViRXhwciwgY2VsbFJlbmRlcikgPT4ge1xyXG4gICAgY29uc3QgW2ZsXSA9IHN1YkV4cHI7XHJcbiAgICBsZXQgZXhwciA9IHN1YkV4cHI7XHJcbiAgICBpZiAoZmwgPT09ICdcIicpIHtcclxuICAgICAgICByZXR1cm4gc3ViRXhwci5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbiAgICBsZXQgcmV0ID0gMTtcclxuICAgIGlmIChmbCA9PT0gJy0nKSB7XHJcbiAgICAgICAgZXhwciA9IHN1YkV4cHIuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIHJldCA9IC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKGV4cHJbMF0gPj0gJzAnICYmIGV4cHJbMF0gPD0gJzknKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldCAqIE51bWJlcihleHByKTtcclxuICAgIH1cclxuICAgIGNvbnN0IFt4LCB5XSA9IGV4cHIyeHkoZXhwcik7XHJcbiAgICByZXR1cm4gcmV0ICogY2VsbFJlbmRlcih4LCB5KTtcclxufTtcclxuLy8gZXZhbHVhdGUgdGhlIHN1ZmZpeCBleHByZXNzaW9uXHJcbi8vIHNyY1N0YWNrOiA8PSBpbmZpeEV4cHJUb1N1Zml4RXhwclxyXG4vLyBmb3JtdWxhTWFwOiB7J1NVTSc6IHt9LCAuLi59XHJcbi8vIGNlbGxSZW5kZXI6ICh4LCB5KSA9PiB7fVxyXG5jb25zdCBldmFsU3VmZml4RXhwciA9IChzcmNTdGFjaywgZm9ybXVsYU1hcCwgY2VsbFJlbmRlciwgY2VsbExpc3QpID0+IHtcclxuICAgIGNvbnN0IHN0YWNrID0gW107XHJcbiAgICAvLyBjb25zb2xlLmxvZygnOjo6Ojpmb3JtdWxhTWFwOicsIGZvcm11bGFNYXApO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNTdGFjay5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCc6Ojo+Pj4nLCBzcmNTdGFja1tpXSk7XHJcbiAgICAgICAgY29uc3QgZXhwciA9IHNyY1N0YWNrW2ldO1xyXG4gICAgICAgIGNvbnN0IGZjID0gZXhwclswXTtcclxuICAgICAgICBpZiAoZXhwciA9PT0gJysnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICBzdGFjay5wdXNoKG51bWJlckNhbGMoJysnLCBzdGFjay5wb3AoKSwgdG9wKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICctJykge1xyXG4gICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3AgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobnVtYmVyQ2FsYygnKicsIHRvcCwgLTEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IHN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChudW1iZXJDYWxjKCctJywgc3RhY2sucG9wKCksIHRvcCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICcqJykge1xyXG4gICAgICAgICAgICBzdGFjay5wdXNoKG51bWJlckNhbGMoJyonLCBzdGFjay5wb3AoKSwgc3RhY2sucG9wKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXhwciA9PT0gJy8nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICBzdGFjay5wdXNoKG51bWJlckNhbGMoJy8nLCBzdGFjay5wb3AoKSwgdG9wKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZjID09PSAnPScgfHwgZmMgPT09ICc+JyB8fCBmYyA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgIGxldCB0b3AgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4odG9wKSlcclxuICAgICAgICAgICAgICAgIHRvcCA9IE51bWJlcih0b3ApO1xyXG4gICAgICAgICAgICBsZXQgbGVmdCA9IHN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihsZWZ0KSlcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBOdW1iZXIobGVmdCk7XHJcbiAgICAgICAgICAgIGxldCByZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGZjID09PSAnPScpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IChsZWZ0ID09PSB0b3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICc+Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gKGxlZnQgPiB0b3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cHIgPT09ICc+PScpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IChsZWZ0ID49IHRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwciA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSAobGVmdCA8IHRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwciA9PT0gJzw9Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gKGxlZnQgPD0gdG9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFjay5wdXNoKHJldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXhwcikpIHtcclxuICAgICAgICAgICAgY29uc3QgW2Zvcm11bGEsIGxlbl0gPSBleHByO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGogKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goc3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YWNrLnB1c2goZm9ybXVsYU1hcFtmb3JtdWxhXS5yZW5kZXIocGFyYW1zLnJldmVyc2UoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGNlbGxMaXN0LmluY2x1ZGVzKGV4cHIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKGZjID49ICdhJyAmJiBmYyA8PSAneicpIHx8IChmYyA+PSAnQScgJiYgZmMgPD0gJ1onKSkge1xyXG4gICAgICAgICAgICAgICAgY2VsbExpc3QucHVzaChleHByKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFjay5wdXNoKGV2YWxTdWJFeHByKGV4cHIsIGNlbGxSZW5kZXIpKTtcclxuICAgICAgICAgICAgY2VsbExpc3QucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdGFjazonLCBzdGFjayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhY2tbMF07XHJcbn07XHJcbmNvbnN0IGNlbGxSZW5kZXIgPSAoc3JjLCBmb3JtdWxhTWFwLCBnZXRDZWxsVGV4dCwgY2VsbExpc3QgPSBbXSkgPT4ge1xyXG4gICAgaWYgKHNyY1swXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBpbmZpeEV4cHJUb1N1ZmZpeEV4cHIoc3JjLnN1YnN0cmluZygxKSk7XHJcbiAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gc3JjO1xyXG4gICAgICAgIHJldHVybiBldmFsU3VmZml4RXhwcihzdGFjaywgZm9ybXVsYU1hcCwgKHgsIHkpID0+IGNlbGxSZW5kZXIoZ2V0Q2VsbFRleHQoeCwgeSksIGZvcm11bGFNYXAsIGdldENlbGxUZXh0LCBjZWxsTGlzdCksIGNlbGxMaXN0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzcmM7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHJlbmRlcjogY2VsbFJlbmRlcixcclxufTtcclxuZXhwb3J0IHsgaW5maXhFeHByVG9TdWZmaXhFeHByLCB9O1xyXG4iLCJpbXBvcnQgeyB4eTJleHByLCBleHByMnh5IH0gZnJvbSAnLi9hbHBoYWJldCc7XHJcbmNsYXNzIENlbGxSYW5nZSB7XHJcbiAgICBzcmk7XHJcbiAgICBzY2k7XHJcbiAgICBlcmk7XHJcbiAgICBlY2k7XHJcbiAgICB3O1xyXG4gICAgaDtcclxuICAgIGNvbnN0cnVjdG9yKHNyaSwgc2NpLCBlcmksIGVjaSwgdyA9IDAsIGggPSAwKSB7XHJcbiAgICAgICAgdGhpcy5zcmkgPSBzcmk7XHJcbiAgICAgICAgdGhpcy5zY2kgPSBzY2k7XHJcbiAgICAgICAgdGhpcy5lcmkgPSBlcmk7XHJcbiAgICAgICAgdGhpcy5lY2kgPSBlY2k7XHJcbiAgICAgICAgdGhpcy53ID0gdztcclxuICAgICAgICB0aGlzLmggPSBoO1xyXG4gICAgfVxyXG4gICAgc2V0KHNyaSwgc2NpLCBlcmksIGVjaSkge1xyXG4gICAgICAgIHRoaXMuc3JpID0gc3JpO1xyXG4gICAgICAgIHRoaXMuc2NpID0gc2NpO1xyXG4gICAgICAgIHRoaXMuZXJpID0gZXJpO1xyXG4gICAgICAgIHRoaXMuZWNpID0gZWNpO1xyXG4gICAgfVxyXG4gICAgbXVsdGlwbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJpIC0gdGhpcy5zcmkgPiAwIHx8IHRoaXMuZWNpIC0gdGhpcy5zY2kgPiAwO1xyXG4gICAgfVxyXG4gICAgLy8gY2VsbC1pbmRleDogcmksIGNpXHJcbiAgICAvLyBjZWxsLXJlZjogQTEwXHJcbiAgICBpbmNsdWRlcyguLi5hcmdzKSB7XHJcbiAgICAgICAgbGV0IFtyaSwgY2ldID0gWzAsIDBdO1xyXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBbY2ksIHJpXSA9IGV4cHIyeHkoYXJnc1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIFtyaSwgY2ldID0gYXJncztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHNyaSA8PSByaSAmJiByaSA8PSBlcmkgJiYgc2NpIDw9IGNpICYmIGNpIDw9IGVjaTtcclxuICAgIH1cclxuICAgIGVhY2goY2IsIHJvd0ZpbHRlciA9IChpKSA9PiB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNyaTsgaSA8PSBlcmk7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBpZiAocm93RmlsdGVyKGkpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc2NpOyBqIDw9IGVjaTsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2IoaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb250YWlucyhvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5zcmkgPD0gb3RoZXIuc3JpICYmXHJcbiAgICAgICAgICAgIHRoaXMuc2NpIDw9IG90aGVyLnNjaSAmJlxyXG4gICAgICAgICAgICB0aGlzLmVyaSA+PSBvdGhlci5lcmkgJiZcclxuICAgICAgICAgICAgdGhpcy5lY2kgPj0gb3RoZXIuZWNpKTtcclxuICAgIH1cclxuICAgIC8vIHdpdGhpblxyXG4gICAgd2l0aGluKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNyaSA+PSBvdGhlci5zcmkgJiZcclxuICAgICAgICAgICAgdGhpcy5zY2kgPj0gb3RoZXIuc2NpICYmXHJcbiAgICAgICAgICAgIHRoaXMuZXJpIDw9IG90aGVyLmVyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLmVjaSA8PSBvdGhlci5lY2kpO1xyXG4gICAgfVxyXG4gICAgLy8gZGlzam9pbnRcclxuICAgIGRpc2pvaW50KG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNyaSA+IG90aGVyLmVyaSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNjaSA+IG90aGVyLmVjaSB8fFxyXG4gICAgICAgICAgICBvdGhlci5zcmkgPiB0aGlzLmVyaSB8fFxyXG4gICAgICAgICAgICBvdGhlci5zY2kgPiB0aGlzLmVjaSk7XHJcbiAgICB9XHJcbiAgICAvLyBpbnRlcnNlY3RzXHJcbiAgICBpbnRlcnNlY3RzKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNyaSA8PSBvdGhlci5lcmkgJiZcclxuICAgICAgICAgICAgdGhpcy5zY2kgPD0gb3RoZXIuZWNpICYmXHJcbiAgICAgICAgICAgIG90aGVyLnNyaSA8PSB0aGlzLmVyaSAmJlxyXG4gICAgICAgICAgICBvdGhlci5zY2kgPD0gdGhpcy5lY2kpO1xyXG4gICAgfVxyXG4gICAgLy8gdW5pb25cclxuICAgIHVuaW9uKG90aGVyKSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2Uob3RoZXIuc3JpIDwgc3JpID8gb3RoZXIuc3JpIDogc3JpLCBvdGhlci5zY2kgPCBzY2kgPyBvdGhlci5zY2kgOiBzY2ksIG90aGVyLmVyaSA+IGVyaSA/IG90aGVyLmVyaSA6IGVyaSwgb3RoZXIuZWNpID4gZWNpID8gb3RoZXIuZWNpIDogZWNpKTtcclxuICAgIH1cclxuICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgLy8gaW50ZXJzZWN0aW9uKG90aGVyKSB7fVxyXG4gICAgLy8gUmV0dXJucyBBcnJheTxDZWxsUmFuZ2U+IHRoYXQgcmVwcmVzZW50cyB0aGF0IHBhcnQgb2YgdGhpcyB0aGF0IGRvZXMgbm90IGludGVyc2VjdCB3aXRoIG90aGVyXHJcbiAgICAvLyBkaWZmZXJlbmNlXHJcbiAgICBkaWZmZXJlbmNlKG90aGVyKSB7XHJcbiAgICAgICAgY29uc3QgcmV0ID0gW107XHJcbiAgICAgICAgY29uc3QgYWRkUmV0ID0gKHNyaSwgc2NpLCBlcmksIGVjaSkgPT4ge1xyXG4gICAgICAgICAgICByZXQucHVzaChuZXcgQ2VsbFJhbmdlKHNyaSwgc2NpLCBlcmksIGVjaSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgZHNyID0gb3RoZXIuc3JpIC0gc3JpO1xyXG4gICAgICAgIGNvbnN0IGRzYyA9IG90aGVyLnNjaSAtIHNjaTtcclxuICAgICAgICBjb25zdCBkZXIgPSBlcmkgLSBvdGhlci5lcmk7XHJcbiAgICAgICAgY29uc3QgZGVjID0gZWNpIC0gb3RoZXIuZWNpO1xyXG4gICAgICAgIGlmIChkc3IgPiAwKSB7XHJcbiAgICAgICAgICAgIGFkZFJldChzcmksIHNjaSwgb3RoZXIuc3JpIC0gMSwgZWNpKTtcclxuICAgICAgICAgICAgaWYgKGRlciA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5lcmkgKyAxLCBzY2ksIGVyaSwgZWNpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkc2MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLnNyaSwgc2NpLCBvdGhlci5lcmksIG90aGVyLnNjaSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRlYyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQob3RoZXIuc3JpLCBvdGhlci5lY2kgKyAxLCBvdGhlci5lcmksIGVjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHNjID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5zcmksIHNjaSwgZXJpLCBvdGhlci5zY2kgLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkZWMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUmV0KG90aGVyLnNyaSwgb3RoZXIuZWNpICsgMSwgZXJpLCBlY2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRlciA+IDApIHtcclxuICAgICAgICAgICAgYWRkUmV0KG90aGVyLmVyaSArIDEsIHNjaSwgZXJpLCBlY2kpO1xyXG4gICAgICAgICAgICBpZiAoZHNjID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkUmV0KHNyaSwgc2NpLCBvdGhlci5lcmksIG90aGVyLnNjaSAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkZWMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBvdGhlci5lY2kgKyAxLCBvdGhlci5lcmksIGVjaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRzYyA+IDApIHtcclxuICAgICAgICAgICAgYWRkUmV0KHNyaSwgc2NpLCBlcmksIG90aGVyLnNjaSAtIDEpO1xyXG4gICAgICAgICAgICBpZiAoZGVjID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWRkUmV0KHNyaSwgb3RoZXIuZXJpICsgMSwgZXJpLCBlY2kpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRzciA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBvdGhlci5zY2ksIG90aGVyLnNyaSAtIDEsIG90aGVyLmVjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5zcmkgKyAxLCBvdGhlci5zY2ksIGVyaSwgb3RoZXIuZWNpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkc3IgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUmV0KHNyaSwgb3RoZXIuc2NpLCBvdGhlci5zcmkgLSAxLCBlY2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRlciA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXQob3RoZXIuc3JpICsgMSwgb3RoZXIuc2NpLCBlcmksIGVjaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGVjID4gMCkge1xyXG4gICAgICAgICAgICBhZGRSZXQoZXJpLCBvdGhlci5lY2kgKyAxLCBlcmksIGVjaSk7XHJcbiAgICAgICAgICAgIGlmIChkc3IgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc3JpLCBzY2ksIG90aGVyLnNyaSAtIDEsIG90aGVyLmVjaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRlciA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFkZFJldChvdGhlci5lcmkgKyAxLCBzY2ksIGVyaSwgb3RoZXIuZWNpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuZXJpIC0gdGhpcy5zcmkgKyAxLCB0aGlzLmVjaSAtIHRoaXMuc2NpICsgMV07XHJcbiAgICB9XHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gdGhpcztcclxuICAgICAgICBsZXQgcmVmID0geHkyZXhwcihzY2ksIHNyaSk7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUoKSkge1xyXG4gICAgICAgICAgICByZWYgPSBgJHtyZWZ9OiR7eHkyZXhwcihlY2ksIGVyaSl9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlZjtcclxuICAgIH1cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpLCB3LCBoIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2VsbFJhbmdlKHNyaSwgc2NpLCBlcmksIGVjaSwgdywgaCk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgKi9cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5lcmkgPT09IG90aGVyLmVyaSAmJlxyXG4gICAgICAgICAgICB0aGlzLmVjaSA9PT0gb3RoZXIuZWNpICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3JpID09PSBvdGhlci5zcmkgJiZcclxuICAgICAgICAgICAgdGhpcy5zY2kgPT09IG90aGVyLnNjaSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgdmFsdWVPZihyZWYpIHtcclxuICAgICAgICAvLyBCMTpCOCwgQjEgPT4gMSB4IDEgY2VsbCByYW5nZVxyXG4gICAgICAgIGNvbnN0IHJlZnMgPSByZWYuc3BsaXQoJzonKTtcclxuICAgICAgICBjb25zdCBbc2NpLCBzcmldID0gZXhwcjJ4eShyZWZzWzBdKTtcclxuICAgICAgICBsZXQgW2VyaSwgZWNpXSA9IFtzcmksIHNjaV07XHJcbiAgICAgICAgaWYgKHJlZnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBbZWNpLCBlcmldID0gZXhwcjJ4eShyZWZzWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsUmFuZ2Uoc3JpLCBzY2ksIGVyaSwgZWNpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBDZWxsUmFuZ2U7XHJcbmV4cG9ydCB7IENlbGxSYW5nZSB9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDbGlwYm9hcmQge1xyXG4gICAgcmFuZ2U7XHJcbiAgICBzdGF0ZTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBudWxsOyAvLyBDZWxsUmFuZ2VcclxuICAgICAgICB0aGlzLnN0YXRlID0gJ2NsZWFyJztcclxuICAgIH1cclxuICAgIGNvcHkoY2VsbFJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IGNlbGxSYW5nZTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gJ2NvcHknO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY3V0KGNlbGxSYW5nZSkge1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdjdXQnO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgaXNDb3B5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSAnY29weSc7XHJcbiAgICB9XHJcbiAgICBpc0N1dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gJ2N1dCc7XHJcbiAgICB9XHJcbiAgICBpc0NsZWFyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSAnY2xlYXInO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdjbGVhcic7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IGhlbHBlciBmcm9tICcuL2hlbHBlcic7XHJcbmNsYXNzIENvbHMge1xyXG4gICAgXztcclxuICAgIGxlbjtcclxuICAgIHdpZHRoO1xyXG4gICAgaW5kZXhXaWR0aDtcclxuICAgIG1pbldpZHRoO1xyXG4gICAgY29uc3RydWN0b3IoeyBsZW4sIHdpZHRoLCBpbmRleFdpZHRoLCBtaW5XaWR0aCwgfSkge1xyXG4gICAgICAgIHRoaXMuXyA9IHt9O1xyXG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmluZGV4V2lkdGggPSBpbmRleFdpZHRoO1xyXG4gICAgICAgIHRoaXMubWluV2lkdGggPSBtaW5XaWR0aDtcclxuICAgIH1cclxuICAgIHNldERhdGEoZCkge1xyXG4gICAgICAgIGlmIChkLmxlbikge1xyXG4gICAgICAgICAgICB0aGlzLmxlbiA9IGQubGVuO1xyXG4gICAgICAgICAgICBkZWxldGUgZC5sZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuXyA9IGQ7XHJcbiAgICB9XHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbGVuIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgbGVuIH0sIHRoaXMuXyk7XHJcbiAgICB9XHJcbiAgICBnZXRXaWR0aChpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRlKGkpKVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICBjb25zdCBjb2wgPSB0aGlzLl9baV07XHJcbiAgICAgICAgaWYgKGNvbCAmJiBjb2wud2lkdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbC53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7XHJcbiAgICB9XHJcbiAgICBnZXRPck5ldyhjaSkge1xyXG4gICAgICAgIHRoaXMuX1tjaV0gPSB0aGlzLl9bY2ldIHx8IHt9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9bY2ldO1xyXG4gICAgfVxyXG4gICAgc2V0V2lkdGgoY2ksIHdpZHRoKSB7XHJcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5nZXRPck5ldyhjaSk7XHJcbiAgICAgICAgY29sLndpZHRoID0gd2lkdGg7XHJcbiAgICB9XHJcbiAgICB1bmhpZGUoaWR4KSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gaWR4O1xyXG4gICAgICAgIHdoaWxlIChpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgaW5kZXggLT0gMTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNIaWRlKGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaWRlKGluZGV4LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNIaWRlKGNpKSB7XHJcbiAgICAgICAgY29uc3QgY29sID0gdGhpcy5fW2NpXTtcclxuICAgICAgICByZXR1cm4gY29sICYmIGNvbC5oaWRlO1xyXG4gICAgfVxyXG4gICAgc2V0SGlkZShjaSwgdikge1xyXG4gICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuZ2V0T3JOZXcoY2kpO1xyXG4gICAgICAgIGlmICh2ID09PSB0cnVlKVxyXG4gICAgICAgICAgICBjb2wuaGlkZSA9IHRydWU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBkZWxldGUgY29sLmhpZGU7XHJcbiAgICB9XHJcbiAgICBzZXRTdHlsZShjaSwgc3R5bGUpIHtcclxuICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmdldE9yTmV3KGNpKTtcclxuICAgICAgICBjb2wuc3R5bGUgPSBzdHlsZTtcclxuICAgIH1cclxuICAgIHN1bVdpZHRoKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIGhlbHBlci5yYW5nZVN1bShtaW4sIG1heCwgaSA9PiB0aGlzLmdldFdpZHRoKGkpKTtcclxuICAgIH1cclxuICAgIHRvdGFsV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VtV2lkdGgoMCwgdGhpcy5sZW4pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG5leHBvcnQgeyBDb2xzLCB9O1xyXG4iLCIvKiBnbG9iYWwgZG9jdW1lbnQgKi9cclxuaW1wb3J0IFNlbGVjdG9yIGZyb20gJy4vc2VsZWN0b3InO1xyXG5pbXBvcnQgU2Nyb2xsIGZyb20gJy4vc2Nyb2xsJztcclxuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5JztcclxuaW1wb3J0IENsaXBib2FyZCBmcm9tICcuL2NsaXBib2FyZCc7XHJcbmltcG9ydCBBdXRvRmlsdGVyIGZyb20gJy4vYXV0b19maWx0ZXInO1xyXG5pbXBvcnQgeyBNZXJnZXMgfSBmcm9tICcuL21lcmdlJztcclxuaW1wb3J0IGhlbHBlciBmcm9tICcuL2hlbHBlcic7XHJcbmltcG9ydCB7IFJvd3MgfSBmcm9tICcuL3Jvdyc7XHJcbmltcG9ydCB7IENvbHMgfSBmcm9tICcuL2NvbCc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25zIH0gZnJvbSAnLi92YWxpZGF0aW9uJztcclxuaW1wb3J0IHsgQ2VsbFJhbmdlIH0gZnJvbSAnLi9jZWxsX3JhbmdlJztcclxuaW1wb3J0IHsgZXhwcjJ4eSwgeHkyZXhwciB9IGZyb20gJy4vYWxwaGFiZXQnO1xyXG5pbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbi8vIHByaXZhdGUgbWV0aG9kc1xyXG4vKlxyXG4gKiB7XHJcbiAqICBuYW1lOiAnJ1xyXG4gKiAgZnJlZXplOiBbMCwgMF0sXHJcbiAqICBmb3JtYXRzOiBbXSxcclxuICogIHN0eWxlczogW1xyXG4gKiAgICB7XHJcbiAqICAgICAgYmdjb2xvcjogJycsXHJcbiAqICAgICAgYWxpZ246ICcnLFxyXG4gKiAgICAgIHZhbGlnbjogJycsXHJcbiAqICAgICAgdGV4dHdyYXA6IGZhbHNlLFxyXG4gKiAgICAgIHN0cmlrZTogZmFsc2UsXHJcbiAqICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcclxuICogICAgICBjb2xvcjogJycsXHJcbiAqICAgICAgZm9ybWF0OiAxLFxyXG4gKiAgICAgIGJvcmRlcjoge1xyXG4gKiAgICAgICAgbGVmdDogW3N0eWxlLCBjb2xvcl0sXHJcbiAqICAgICAgICByaWdodDogW3N0eWxlLCBjb2xvcl0sXHJcbiAqICAgICAgICB0b3A6IFtzdHlsZSwgY29sb3JdLFxyXG4gKiAgICAgICAgYm90dG9tOiBbc3R5bGUsIGNvbG9yXSxcclxuICogICAgICB9LFxyXG4gKiAgICAgIGZvbnQ6IHtcclxuICogICAgICAgIG5hbWU6ICdIZWx2ZXRpY2EnLFxyXG4gKiAgICAgICAgc2l6ZTogMTAsXHJcbiAqICAgICAgICBib2xkOiBmYWxzZSxcclxuICogICAgICAgIGl0YWxpYzogZmFsc2UsXHJcbiAqICAgICAgfVxyXG4gKiAgICB9XHJcbiAqICBdLFxyXG4gKiAgbWVyZ2VzOiBbXHJcbiAqICAgICdBMTpGMTEnLFxyXG4gKiAgICAuLi5cclxuICogIF0sXHJcbiAqICByb3dzOiB7XHJcbiAqICAgIDE6IHtcclxuICogICAgICBoZWlnaHQ6IDUwLFxyXG4gKiAgICAgIHN0eWxlOiAxLFxyXG4gKiAgICAgIGNlbGxzOiB7XHJcbiAqICAgICAgICAxOiB7XHJcbiAqICAgICAgICAgIHN0eWxlOiAyLFxyXG4gKiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICogICAgICAgICAgdGV4dDogJycsXHJcbiAqICAgICAgICAgIHZhbHVlOiAnJywgLy8gY2FsIHJlc3VsdFxyXG4gKiAgICAgICAgfVxyXG4gKiAgICAgIH1cclxuICogICAgfSxcclxuICogICAgLi4uXHJcbiAqICB9LFxyXG4gKiAgY29sczoge1xyXG4gKiAgICAyOiB7IHdpZHRoOiAxMDAsIHN0eWxlOiAxIH1cclxuICogIH1cclxuICogfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHtcclxuICAgIG1vZGU6ICdlZGl0JyxcclxuICAgIHZpZXc6IHtcclxuICAgICAgICBoZWlnaHQ6ICgpID0+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgd2lkdGg6ICgpID0+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxcclxuICAgIH0sXHJcbiAgICBzaG93R3JpZDogdHJ1ZSxcclxuICAgIHNob3dUb29sYmFyOiB0cnVlLFxyXG4gICAgc2hvd0NvbnRleHRtZW51OiB0cnVlLFxyXG4gICAgc2hvd0JvdHRvbUJhcjogdHJ1ZSxcclxuICAgIHJvdzoge1xyXG4gICAgICAgIGxlbjogMTAwLFxyXG4gICAgICAgIGhlaWdodDogMjUsXHJcbiAgICB9LFxyXG4gICAgY29sOiB7XHJcbiAgICAgICAgbGVuOiAyNixcclxuICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgIGluZGV4V2lkdGg6IDYwLFxyXG4gICAgICAgIG1pbldpZHRoOiA2MCxcclxuICAgIH0sXHJcbiAgICBzdHlsZToge1xyXG4gICAgICAgIGJnY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICAgIHZhbGlnbjogJ21pZGRsZScsXHJcbiAgICAgICAgdGV4dHdyYXA6IGZhbHNlLFxyXG4gICAgICAgIHN0cmlrZTogZmFsc2UsXHJcbiAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcclxuICAgICAgICBjb2xvcjogJyMwYTBhMGEnLFxyXG4gICAgICAgIGZvbnQ6IHtcclxuICAgICAgICAgICAgbmFtZTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgc2l6ZTogMTAsXHJcbiAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZm9ybWF0OiAnbm9ybWFsJyxcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IHRvb2xiYXJIZWlnaHQgPSA0MTtcclxuY29uc3QgYm90dG9tYmFySGVpZ2h0ID0gNDE7XHJcbi8vIHNyYzogY2VsbFJhbmdlXHJcbi8vIGRzdDogY2VsbFJhbmdlXHJcbmZ1bmN0aW9uIGNhblBhc3RlKHNyYywgZHN0LCBlcnJvciA9IChhcmcpID0+IHsgfSkge1xyXG4gICAgY29uc3QgeyBtZXJnZXMgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBjZWxsUmFuZ2UgPSBkc3QuY2xvbmUoKTtcclxuICAgIGNvbnN0IFtzcm4sIHNjbl0gPSBzcmMuc2l6ZSgpO1xyXG4gICAgY29uc3QgW2RybiwgZGNuXSA9IGRzdC5zaXplKCk7XHJcbiAgICBpZiAoc3JuID4gZHJuKSB7XHJcbiAgICAgICAgY2VsbFJhbmdlLmVyaSA9IGRzdC5zcmkgKyBzcm4gLSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHNjbiA+IGRjbikge1xyXG4gICAgICAgIGNlbGxSYW5nZS5lY2kgPSBkc3Quc2NpICsgc2NuIC0gMTtcclxuICAgIH1cclxuICAgIGlmIChtZXJnZXMuaW50ZXJzZWN0cyhjZWxsUmFuZ2UpKSB7XHJcbiAgICAgICAgZXJyb3IodCgnZXJyb3IucGFzdGVGb3JNZXJnZWRDZWxsJykpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGNvcHlQYXN0ZShzcmNDZWxsUmFuZ2UsIGRzdENlbGxSYW5nZSwgd2hhdCwgYXV0b2ZpbGwgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgeyByb3dzLCBtZXJnZXMgfSA9IHRoaXM7XHJcbiAgICAvLyBkZWxldGUgZGVzdCBtZXJnZVxyXG4gICAgaWYgKHdoYXQgPT09ICdhbGwnIHx8IHdoYXQgPT09ICdmb3JtYXQnKSB7XHJcbiAgICAgICAgcm93cy5kZWxldGVDZWxscyhkc3RDZWxsUmFuZ2UsIHdoYXQpO1xyXG4gICAgICAgIG1lcmdlcy5kZWxldGVXaXRoaW4oZHN0Q2VsbFJhbmdlKTtcclxuICAgIH1cclxuICAgIHJvd3MuY29weVBhc3RlKHNyY0NlbGxSYW5nZSwgZHN0Q2VsbFJhbmdlLCB3aGF0LCBhdXRvZmlsbCwgKHJpLCBjaSwgY2VsbCkgPT4ge1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwubWVyZ2UpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NlbGw6JywgcmksIGNpLCBjZWxsKTtcclxuICAgICAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICBpZiAocm4gPD0gMCAmJiBjbiA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBtZXJnZXMuYWRkKG5ldyBDZWxsUmFuZ2UocmksIGNpLCByaSArIHJuLCBjaSArIGNuKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3V0UGFzdGUoc3JjQ2VsbFJhbmdlLCBkc3RDZWxsUmFuZ2UpIHtcclxuICAgIGNvbnN0IHsgY2xpcGJvYXJkLCByb3dzLCBtZXJnZXMgfSA9IHRoaXM7XHJcbiAgICByb3dzLmN1dFBhc3RlKHNyY0NlbGxSYW5nZSwgZHN0Q2VsbFJhbmdlKTtcclxuICAgIG1lcmdlcy5tb3ZlKHNyY0NlbGxSYW5nZSwgZHN0Q2VsbFJhbmdlLnNyaSAtIHNyY0NlbGxSYW5nZS5zcmksIGRzdENlbGxSYW5nZS5zY2kgLSBzcmNDZWxsUmFuZ2Uuc2NpKTtcclxuICAgIGNsaXBib2FyZC5jbGVhcigpO1xyXG59XHJcbi8vIGJzczogeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfVxyXG5mdW5jdGlvbiBzZXRTdHlsZUJvcmRlcihyaSwgY2ksIGJzcykge1xyXG4gICAgY29uc3QgeyBzdHlsZXMsIHJvd3MgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsT3JOZXcocmksIGNpKTtcclxuICAgIGxldCBjc3R5bGUgPSB7fTtcclxuICAgIGlmIChjZWxsLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjc3R5bGUgPSBoZWxwZXIuY2xvbmVEZWVwKHN0eWxlc1tjZWxsLnN0eWxlXSk7XHJcbiAgICB9XHJcbiAgICBjc3R5bGUgPSBoZWxwZXIubWVyZ2UoY3N0eWxlLCB7IGJvcmRlcjogYnNzIH0pO1xyXG4gICAgY2VsbC5zdHlsZSA9IHRoaXMuYWRkU3R5bGUoY3N0eWxlKTtcclxufVxyXG5mdW5jdGlvbiBzZXRTdHlsZUJvcmRlcnMoeyBtb2RlLCBzdHlsZSwgY29sb3IgfSkge1xyXG4gICAgY29uc3QgeyBzdHlsZXMsIHNlbGVjdG9yLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHNlbGVjdG9yLnJhbmdlO1xyXG4gICAgY29uc3QgbXVsdGlwbGUgPSAhdGhpcy5pc1NpbmdsZVNlbGVjdGVkKCk7XHJcbiAgICBpZiAoIW11bHRpcGxlKSB7XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICdpbnNpZGUnIHx8IG1vZGUgPT09ICdob3Jpem9udGFsJyB8fCBtb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZSA9PT0gJ291dHNpZGUnICYmICFtdWx0aXBsZSkge1xyXG4gICAgICAgIHNldFN0eWxlQm9yZGVyLmNhbGwodGhpcywgc3JpLCBzY2ksIHtcclxuICAgICAgICAgICAgdG9wOiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgYm90dG9tOiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICAgICAgbGVmdDogW3N0eWxlLCBjb2xvcl0sXHJcbiAgICAgICAgICAgIHJpZ2h0OiBbc3R5bGUsIGNvbG9yXSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vZGUgPT09ICdub25lJykge1xyXG4gICAgICAgIHNlbGVjdG9yLnJhbmdlLmVhY2goKHJpLCBjaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbnMgPSBoZWxwZXIuY2xvbmVEZWVwKHN0eWxlc1tjZWxsLnN0eWxlXSk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbnMuYm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgLy8gWydib3R0b20nLCAndG9wJywgJ2xlZnQnLCAncmlnaHQnXS5mb3JFYWNoKChwcm9wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgIGlmIChuc1twcm9wXSkgZGVsZXRlIG5zW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5hZGRTdHlsZShucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vZGUgPT09ICdhbGwnIHx8XHJcbiAgICAgICAgbW9kZSA9PT0gJ2luc2lkZScgfHxcclxuICAgICAgICBtb2RlID09PSAnb3V0c2lkZScgfHxcclxuICAgICAgICBtb2RlID09PSAnaG9yaXpvbnRhbCcgfHxcclxuICAgICAgICBtb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgY29uc3QgbWVyZ2VzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcmkgPSBzcmk7IHJpIDw9IGVyaTsgcmkgKz0gMSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjaSA9IHNjaTsgY2kgPD0gZWNpOyBjaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBqdW1wIG1lcmdlcyAtLSBzdGFydFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VJbmRleGVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbWVyZ2VzLmxlbmd0aDsgaWkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFttcmksIG1jaSwgcm4sIGNuXSA9IG1lcmdlc1tpaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJpID09PSBtcmkgKyBybiArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlSW5kZXhlcy5wdXNoKGlpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXJpIDw9IHJpICYmIHJpIDw9IG1yaSArIHJuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaSA9PT0gbWNpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaSArPSBjbiArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lcmdlSW5kZXhlcy5mb3JFYWNoKChpdCkgPT4gbWVyZ2VzLnNwbGljZShpdCwgMSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNpID4gZWNpKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8ganVtcCBtZXJnZXMgLS0gZW5kXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgW3JuLCBjbl0gPSBbMCwgMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLm1lcmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgW3JuLCBjbl0gPSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlcy5wdXNoKFtyaSwgY2ksIHJuLCBjbl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbXJsID0gcm4gPiAwICYmIHJpICsgcm4gPT09IGVyaTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1jbCA9IGNuID4gMCAmJiBjaSArIGNuID09PSBlY2k7XHJcbiAgICAgICAgICAgICAgICBsZXQgYnNzID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2FsbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBic3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogW3N0eWxlLCBjb2xvcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogW3N0eWxlLCBjb2xvcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IFtzdHlsZSwgY29sb3JdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogW3N0eWxlLCBjb2xvcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdpbnNpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtY2wgJiYgY2kgPCBlY2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5yaWdodCA9IFtzdHlsZSwgY29sb3JdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbXJsICYmIHJpIDwgZXJpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MuYm90dG9tID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1ybCAmJiByaSA8IGVyaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnNzLmJvdHRvbSA9IFtzdHlsZSwgY29sb3JdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWNsICYmIGNpIDwgZWNpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MucmlnaHQgPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdvdXRzaWRlJyAmJiBtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmkgPT09IHJpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MudG9wID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ybCB8fCBlcmkgPT09IHJpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MuYm90dG9tID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjaSA9PT0gY2kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzcy5sZWZ0ID0gW3N0eWxlLCBjb2xvcl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1jbCB8fCBlY2kgPT09IGNpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBic3MucmlnaHQgPSBbc3R5bGUsIGNvbG9yXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhic3MpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZUJvcmRlci5jYWxsKHRoaXMsIHJpLCBjaSwgYnNzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNpICs9IGNuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobW9kZSA9PT0gJ3RvcCcgfHwgbW9kZSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICBmb3IgKGxldCBjaSA9IHNjaTsgY2kgPD0gZWNpOyBjaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAndG9wJykge1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVCb3JkZXIuY2FsbCh0aGlzLCBzcmksIGNpLCB7IHRvcDogW3N0eWxlLCBjb2xvcl0gfSk7XHJcbiAgICAgICAgICAgICAgICBjaSArPSByb3dzLmdldENlbGxNZXJnZShzcmksIGNpKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgIHNldFN0eWxlQm9yZGVyLmNhbGwodGhpcywgZXJpLCBjaSwgeyBib3R0b206IFtzdHlsZSwgY29sb3JdIH0pO1xyXG4gICAgICAgICAgICAgICAgY2kgKz0gcm93cy5nZXRDZWxsTWVyZ2UoZXJpLCBjaSlbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChtb2RlID09PSAnbGVmdCcgfHwgbW9kZSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGZvciAobGV0IHJpID0gc3JpOyByaSA8PSBlcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVCb3JkZXIuY2FsbCh0aGlzLCByaSwgc2NpLCB7IGxlZnQ6IFtzdHlsZSwgY29sb3JdIH0pO1xyXG4gICAgICAgICAgICAgICAgcmkgKz0gcm93cy5nZXRDZWxsTWVyZ2UocmksIHNjaSlbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHNldFN0eWxlQm9yZGVyLmNhbGwodGhpcywgcmksIGVjaSwgeyByaWdodDogW3N0eWxlLCBjb2xvcl0gfSk7XHJcbiAgICAgICAgICAgICAgICByaSArPSByb3dzLmdldENlbGxNZXJnZShyaSwgZWNpKVswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRDZWxsUm93QnlZKHksIHNjcm9sbE9mZnNldHkpIHtcclxuICAgIGNvbnN0IHsgcm93cyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGZzaCA9IHRoaXMuZnJlZXplVG90YWxIZWlnaHQoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCd5OicsIHksICcsIGZzaDonLCBmc2gpO1xyXG4gICAgbGV0IGluaXRzID0gcm93cy5oZWlnaHQ7XHJcbiAgICBpZiAoZnNoICsgcm93cy5oZWlnaHQgPCB5KVxyXG4gICAgICAgIGluaXRzIC09IHNjcm9sbE9mZnNldHk7XHJcbiAgICAvLyBoYW5kbGUgcmkgaW4gYXV0b2ZpbHRlclxyXG4gICAgY29uc3QgZnJzZXQgPSB0aGlzLmV4Y2VwdFJvd1NldDtcclxuICAgIGxldCByaSA9IDA7XHJcbiAgICBsZXQgdG9wID0gaW5pdHM7XHJcbiAgICBsZXQgeyBoZWlnaHQgfSA9IHJvd3M7XHJcbiAgICBmb3IgKDsgcmkgPCByb3dzLmxlbjsgcmkgKz0gMSkge1xyXG4gICAgICAgIGlmICh0b3AgPiB5KVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBpZiAoIWZyc2V0LmhhcyhyaSkpIHtcclxuICAgICAgICAgICAgaGVpZ2h0ID0gcm93cy5nZXRIZWlnaHQocmkpO1xyXG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRvcCAtPSBoZWlnaHQ7XHJcbiAgICAvLyBjb25zb2xlLmxvZygncmk6JywgcmksICcsIHRvcDonLCB0b3AsICcsIGhlaWdodDonLCBoZWlnaHQpO1xyXG4gICAgaWYgKHRvcCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcmk6IC0xLCB0b3A6IDAsIGhlaWdodCB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgcmk6IHJpIC0gMSwgdG9wLCBoZWlnaHQgfTtcclxufVxyXG5mdW5jdGlvbiBnZXRDZWxsQ29sQnlYKHgsIHNjcm9sbE9mZnNldHgpIHtcclxuICAgIGNvbnN0IHsgY29scyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGZzdyA9IHRoaXMuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgbGV0IGluaXRzID0gY29scy5pbmRleFdpZHRoO1xyXG4gICAgaWYgKGZzdyArIGNvbHMuaW5kZXhXaWR0aCA8IHgpXHJcbiAgICAgICAgaW5pdHMgLT0gc2Nyb2xsT2Zmc2V0eDtcclxuICAgIGNvbnN0IFtjaSwgbGVmdCwgd2lkdGhdID0gaGVscGVyLnJhbmdlUmVkdWNlSWYoMCwgY29scy5sZW4sIGluaXRzLCBjb2xzLmluZGV4V2lkdGgsIHgsIChpKSA9PiBjb2xzLmdldFdpZHRoKGkpKTtcclxuICAgIGlmIChsZWZ0IDw9IDApIHtcclxuICAgICAgICByZXR1cm4geyBjaTogLTEsIGxlZnQ6IDAsIHdpZHRoOiBjb2xzLmluZGV4V2lkdGggfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IGNpOiBjaSAtIDEsIGxlZnQsIHdpZHRoIH07XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0YVByb3h5IHtcclxuICAgIHNldHRpbmdzO1xyXG4gICAgbmFtZTtcclxuICAgIGZyZWV6ZTtcclxuICAgIHN0eWxlcztcclxuICAgIG1lcmdlcztcclxuICAgIHJvd3M7XHJcbiAgICBjb2xzO1xyXG4gICAgdmFsaWRhdGlvbnM7XHJcbiAgICBoeXBlcmxpbmtzO1xyXG4gICAgY29tbWVudHM7XHJcbiAgICBzZWxlY3RvcjtcclxuICAgIHNjcm9sbDtcclxuICAgIGhpc3Rvcnk7XHJcbiAgICBjbGlwYm9hcmQ7XHJcbiAgICBhdXRvRmlsdGVyO1xyXG4gICAgY2hhbmdlO1xyXG4gICAgZXhjZXB0Um93U2V0O1xyXG4gICAgc29ydGVkUm93TWFwO1xyXG4gICAgdW5zb3J0ZWRSb3dNYXA7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBzZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBoZWxwZXIubWVyZ2UoZGVmYXVsdFNldHRpbmdzLCBzZXR0aW5ncyB8fCB7fSk7XHJcbiAgICAgICAgLy8gc2F2ZSBkYXRhIGJlZ2luXHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZSB8fCAnc2hlZXQnO1xyXG4gICAgICAgIHRoaXMuZnJlZXplID0gWzAsIDBdO1xyXG4gICAgICAgIHRoaXMuc3R5bGVzID0gW107IC8vIEFycmF5PFN0eWxlPlxyXG4gICAgICAgIHRoaXMubWVyZ2VzID0gbmV3IE1lcmdlcygpOyAvLyBbQ2VsbFJhbmdlLCAuLi5dXHJcbiAgICAgICAgdGhpcy5yb3dzID0gbmV3IFJvd3ModGhpcy5zZXR0aW5ncy5yb3cpO1xyXG4gICAgICAgIHRoaXMuY29scyA9IG5ldyBDb2xzKHRoaXMuc2V0dGluZ3MuY29sKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRpb25zID0gbmV3IFZhbGlkYXRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5oeXBlcmxpbmtzID0ge307XHJcbiAgICAgICAgdGhpcy5jb21tZW50cyA9IHt9O1xyXG4gICAgICAgIC8vIHNhdmUgZGF0YSBlbmRcclxuICAgICAgICAvLyBkb24ndCBzYXZlIG9iamVjdFxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBuZXcgU2VsZWN0b3IoKTtcclxuICAgICAgICB0aGlzLnNjcm9sbCA9IG5ldyBTY3JvbGwoKTtcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSgpO1xyXG4gICAgICAgIHRoaXMuY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0b0ZpbHRlciA9IG5ldyBBdXRvRmlsdGVyKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5leGNlcHRSb3dTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRSb3dNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy51bnNvcnRlZFJvd01hcCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGFkZFZhbGlkYXRpb24obW9kZSwgcmVmLCB2YWxpZGF0b3IpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbW9kZTonLCBtb2RlLCAnLCByZWY6JywgcmVmLCAnLCB2YWxpZGF0b3I6JywgdmFsaWRhdG9yKTtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25zLmFkZChtb2RlLCByZWYsIHZhbGlkYXRvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmFuZ2UgfSA9IHRoaXMuc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9ucy5yZW1vdmUocmFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0U2VsZWN0ZWRWYWxpZGF0b3IoKSB7XHJcbiAgICAgICAgY29uc3QgeyByaSwgY2kgfSA9IHRoaXMuc2VsZWN0b3I7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMudmFsaWRhdGlvbnMuZ2V0KHJpLCBjaSk7XHJcbiAgICAgICAgcmV0dXJuIHYgPyB2LnZhbGlkYXRvciA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRTZWxlY3RlZFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgeyByaSwgY2ksIHJhbmdlIH0gPSB0aGlzLnNlbGVjdG9yO1xyXG4gICAgICAgIGNvbnN0IHYgPSB0aGlzLnZhbGlkYXRpb25zLmdldChyaSwgY2kpO1xyXG4gICAgICAgIGNvbnN0IHJldCA9IHsgcmVmOiByYW5nZS50b1N0cmluZygpIH07XHJcbiAgICAgICAgaWYgKHYgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0Lm1vZGUgPSB2Lm1vZGU7XHJcbiAgICAgICAgICAgIHJldC52YWxpZGF0b3IgPSB2LnZhbGlkYXRvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuICAgIGNhblVuZG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5jYW5VbmRvKCk7XHJcbiAgICB9XHJcbiAgICBjYW5SZWRvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuY2FuUmVkbygpO1xyXG4gICAgfVxyXG4gICAgdW5kbygpIHtcclxuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbyh0aGlzLmdldERhdGEoKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmVkbygpIHtcclxuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbyh0aGlzLmdldERhdGEoKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29weSgpIHtcclxuICAgICAgICB0aGlzLmNsaXBib2FyZC5jb3B5KHRoaXMuc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgfVxyXG4gICAgY29weVRvU3lzdGVtQ2xpcGJvYXJkKGV2dCkge1xyXG4gICAgICAgIGxldCBjb3B5VGV4dCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBlcmksIHNjaSwgZWNpIH0gPSB0aGlzLnNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIGZvciAobGV0IHJpID0gc3JpOyByaSA8PSBlcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNpID0gc2NpOyBjaSA8PSBlY2k7IGNpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKChjZWxsICYmIGNlbGwudGV4dCkgfHwgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvcHlUZXh0LnB1c2gocm93KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkaW5nIFxcbiBhbmQgd2h5IG5vdCBhZGRpbmcgXFxyXFxuIGlzIHRvIHN1cHBvcnQgb25saW5lIG9mZmljZSBhbmQgY2xpZW50IE1TIG9mZmljZSBhbmQgV1BTXHJcbiAgICAgICAgY29weVRleHQgPSBjb3B5VGV4dC5tYXAoKHJvdykgPT4gcm93LmpvaW4oJ1xcdCcpKS5qb2luKCdcXG4nKTtcclxuICAgICAgICAvLyB3aHkgdXNlZCB0aGlzXHJcbiAgICAgICAgLy8gY3V6IGh0dHAgcHJvdG9jb2wgd2lsbCBiZSBibG9ja2VkIHJlcXVlc3QgY2xpcGJvYXJkIGJ5IGJyb3dzZXJcclxuICAgICAgICBpZiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGV2dC5jbGlwYm9hcmREYXRhLmNsZWFyRGF0YSgpO1xyXG4gICAgICAgICAgICBldnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgY29weVRleHQpO1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcyBuZWVkIGh0dHBzIHByb3RvY29sXHJcbiAgICAgICAgLyogZ2xvYmFsIG5hdmlnYXRvciAqL1xyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7XHJcbiAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvcHlUZXh0KS50aGVuKCgpID0+IHsgfSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RleHQgY29weSB0byB0aGUgc3lzdGVtIGNsaXBib2FyZCBlcnJvciAgJywgY29weVRleHQsIGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGN1dCgpIHtcclxuICAgICAgICB0aGlzLmNsaXBib2FyZC5jdXQodGhpcy5zZWxlY3Rvci5yYW5nZSk7XHJcbiAgICB9XHJcbiAgICAvLyB3aGF0OiBhbGwgfCB0ZXh0IHwgZm9ybWF0XHJcbiAgICBwYXN0ZSh3aGF0ID0gJ2FsbCcsIGVycm9yID0gKCkgPT4geyB9KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NJbmRleGVzOicsIHNJbmRleGVzKTtcclxuICAgICAgICBjb25zdCB7IGNsaXBib2FyZCwgc2VsZWN0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNsaXBib2FyZC5pc0NsZWFyKCkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoIWNhblBhc3RlLmNhbGwodGhpcywgY2xpcGJvYXJkLnJhbmdlLCBzZWxlY3Rvci5yYW5nZSwgZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNsaXBib2FyZC5pc0NvcHkoKSkge1xyXG4gICAgICAgICAgICAgICAgY29weVBhc3RlLmNhbGwodGhpcywgY2xpcGJvYXJkLnJhbmdlLCBzZWxlY3Rvci5yYW5nZSwgd2hhdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY2xpcGJvYXJkLmlzQ3V0KCkpIHtcclxuICAgICAgICAgICAgICAgIGN1dFBhc3RlLmNhbGwodGhpcywgY2xpcGJvYXJkLnJhbmdlLCBzZWxlY3Rvci5yYW5nZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHBhc3RlRnJvbVN5c3RlbUNsaXBib2FyZChyZXNldFNoZWV0LCBldmVudFRyaWdnZXIpIHtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKS50aGVuKChjb250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUb1Bhc3RlID0gdGhpcy5wYXJzZUNsaXBib2FyZENvbnRlbnQoY29udGVudCk7XHJcbiAgICAgICAgICAgIGxldCBzdGFydFJvdyA9IHNlbGVjdG9yLnJpO1xyXG4gICAgICAgICAgICBjb250ZW50VG9QYXN0ZS5mb3JFYWNoKChyb3cpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGFydENvbHVtbiA9IHNlbGVjdG9yLmNpO1xyXG4gICAgICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGxDb250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDZWxsVGV4dChzdGFydFJvdywgc3RhcnRDb2x1bW4sIGNlbGxDb250ZW50LCAnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydENvbHVtbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFJvdyArPSAxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVzZXRTaGVldCgpO1xyXG4gICAgICAgICAgICBldmVudFRyaWdnZXIodGhpcy5yb3dzLmdldERhdGEoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwYXJzZUNsaXBib2FyZENvbnRlbnQoY2xpcGJvYXJkQ29udGVudCkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBbXTtcclxuICAgICAgICAvLyBmaXJzdCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaG93IG1hbnkgcm93cyB3ZSBuZWVkIHRvIHBhc3RlXHJcbiAgICAgICAgY29uc3Qgcm93cyA9IGNsaXBib2FyZENvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIC8vIGZvciBlYWNoIHJvdyBwYXJzZSBjZWxsIGRhdGFcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3cpID0+IHtcclxuICAgICAgICAgICAgcGFyc2VkRGF0YVtpXSA9IHJvdy5zcGxpdCgnXFx0Jyk7XHJcbiAgICAgICAgICAgIGkgKz0gMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0YTtcclxuICAgIH1cclxuICAgIHBhc3RlRnJvbVRleHQodHh0KSB7XHJcbiAgICAgICAgbGV0IGxpbmVzID0gW107XHJcbiAgICAgICAgaWYgKC9cXHJcXG4vLnRlc3QodHh0KSlcclxuICAgICAgICAgICAgbGluZXMgPSB0eHQuc3BsaXQoJ1xcclxcbicpLm1hcCgoaXQpID0+IGl0LnJlcGxhY2UoL1wiL2csICcnKS5zcGxpdCgnXFx0JykpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbGluZXMgPSB0eHQuc3BsaXQoJ1xcbicpLm1hcCgoaXQpID0+IGl0LnJlcGxhY2UoL1wiL2csICcnKS5zcGxpdCgnXFx0JykpO1xyXG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByb3dzLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJvd3MucGFzdGUobGluZXMsIHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXV0b2ZpbGwoY2VsbFJhbmdlLCB3aGF0LCBlcnJvciA9ICgpID0+IHsgfSkge1xyXG4gICAgICAgIGNvbnN0IHNyY1JhbmdlID0gdGhpcy5zZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICBpZiAoIWNhblBhc3RlLmNhbGwodGhpcywgc3JjUmFuZ2UsIGNlbGxSYW5nZSwgZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgY29weVBhc3RlLmNhbGwodGhpcywgc3JjUmFuZ2UsIGNlbGxSYW5nZSwgd2hhdCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjbGVhckNsaXBib2FyZCgpIHtcclxuICAgICAgICB0aGlzLmNsaXBib2FyZC5jbGVhcigpO1xyXG4gICAgfVxyXG4gICAgY2FsU2VsZWN0ZWRSYW5nZUJ5RW5kKHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IsIHJvd3MsIGNvbHMsIG1lcmdlcyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIGNvbnN0IGNyaSA9IHNlbGVjdG9yLnJpO1xyXG4gICAgICAgIGNvbnN0IGNjaSA9IHNlbGVjdG9yLmNpO1xyXG4gICAgICAgIGxldCBbbnJpLCBuY2ldID0gW3JpLCBjaV07XHJcbiAgICAgICAgaWYgKHJpIDwgMClcclxuICAgICAgICAgICAgbnJpID0gcm93cy5sZW4gLSAxO1xyXG4gICAgICAgIGlmIChjaSA8IDApXHJcbiAgICAgICAgICAgIG5jaSA9IGNvbHMubGVuIC0gMTtcclxuICAgICAgICBpZiAobnJpID4gY3JpKVxyXG4gICAgICAgICAgICBbc3JpLCBlcmldID0gW2NyaSwgbnJpXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIFtzcmksIGVyaV0gPSBbbnJpLCBjcmldO1xyXG4gICAgICAgIGlmIChuY2kgPiBjY2kpXHJcbiAgICAgICAgICAgIFtzY2ksIGVjaV0gPSBbY2NpLCBuY2ldO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgW3NjaSwgZWNpXSA9IFtuY2ksIGNjaV07XHJcbiAgICAgICAgc2VsZWN0b3IucmFuZ2UgPSBtZXJnZXMudW5pb24obmV3IENlbGxSYW5nZShzcmksIHNjaSwgZXJpLCBlY2kpKTtcclxuICAgICAgICBzZWxlY3Rvci5yYW5nZSA9IG1lcmdlcy51bmlvbihzZWxlY3Rvci5yYW5nZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdG9yLnJhbmdlOicsIHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICB9XHJcbiAgICBjYWxTZWxlY3RlZFJhbmdlQnlTdGFydChyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdG9yLCByb3dzLCBjb2xzLCBtZXJnZXMgfSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGNlbGxSYW5nZSA9IG1lcmdlcy5nZXRGaXJzdEluY2x1ZGVzKHJpLCBjaSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NlbGxSYW5nZTonLCBjZWxsUmFuZ2UsIHJpLCBjaSwgbWVyZ2VzKTtcclxuICAgICAgICBpZiAoY2VsbFJhbmdlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNlbGxSYW5nZSA9IG5ldyBDZWxsUmFuZ2UocmksIGNpLCByaSwgY2kpO1xyXG4gICAgICAgICAgICBpZiAocmkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjZWxsUmFuZ2Uuc3JpID0gMDtcclxuICAgICAgICAgICAgICAgIGNlbGxSYW5nZS5lcmkgPSByb3dzLmxlbiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY2VsbFJhbmdlLnNjaSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjZWxsUmFuZ2UuZWNpID0gY29scy5sZW4gLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGVjdG9yLnJhbmdlID0gY2VsbFJhbmdlO1xyXG4gICAgICAgIHJldHVybiBjZWxsUmFuZ2U7XHJcbiAgICB9XHJcbiAgICBzZXRTZWxlY3RlZENlbGxBdHRyKHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0b3IsIHN0eWxlcywgcm93cyB9ID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnbWVyZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZSgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5tZXJnZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BlcnR5ID09PSAnYm9yZGVyJykge1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVCb3JkZXJzLmNhbGwodGhpcywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BlcnR5ID09PSAnZm9ybXVsYScpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCc+Pj4nLCBzZWxlY3Rvci5tdWx0aXBsZSgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmksIGNpLCByYW5nZSB9ID0gc2VsZWN0b3I7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IubXVsdGlwbGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtybiwgY25dID0gc2VsZWN0b3Iuc2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpIH0gPSByYW5nZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBzY2k7IGkgPD0gZWNpOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhlcmkgKyAxLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGA9JHt2YWx1ZX0oJHt4eTJleHByKGksIHNyaSl9OiR7eHkyZXhwcihpLCBlcmkpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsT3JOZXcocmksIGVjaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnRleHQgPSBgPSR7dmFsdWV9KCR7eHkyZXhwcihzY2ksIHJpKX06JHt4eTJleHByKGVjaSwgcmkpfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGxPck5ldyhyaSwgY2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGA9JHt2YWx1ZX0oKWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rvci5yYW5nZS5lYWNoKChyaSwgY2kpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsT3JOZXcocmksIGNpKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3N0eWxlID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuc3R5bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3R5bGUgPSBoZWxwZXIuY2xvbmVEZWVwKHN0eWxlc1tjZWxsLnN0eWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2Zvcm1hdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3N0eWxlLmZvcm1hdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5hZGRTdHlsZShjc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gJ2ZvbnQtYm9sZCcgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICdmb250LWl0YWxpYycgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICdmb250LW5hbWUnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAnZm9udC1zaXplJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZm9udCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZm9udFtwcm9wZXJ0eS5zcGxpdCgnLScpWzFdXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3R5bGUuZm9udCA9IE9iamVjdC5hc3NpZ24oY3N0eWxlLmZvbnQgfHwge30sIG5mb250KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuYWRkU3R5bGUoY3N0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcGVydHkgPT09ICdzdHJpa2UnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAndGV4dHdyYXAnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID09PSAndW5kZXJsaW5lJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2FsaWduJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ3ZhbGlnbicgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICdjb2xvcicgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09ICdiZ2NvbG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3R5bGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmFkZFN0eWxlKGNzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBzdGF0ZTogaW5wdXQgfCBmaW5pc2hlZFxyXG4gICAgc2V0U2VsZWN0ZWRDZWxsVGV4dCh0ZXh0LCBzdGF0ZSA9ICdpbnB1dCcpIHtcclxuICAgICAgICBjb25zdCB7IGF1dG9GaWx0ZXIsIHNlbGVjdG9yLCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgcmksIGNpIH0gPSBzZWxlY3RvcjtcclxuICAgICAgICBsZXQgbnJpID0gcmk7XHJcbiAgICAgICAgaWYgKHRoaXMudW5zb3J0ZWRSb3dNYXAuaGFzKHJpKSkge1xyXG4gICAgICAgICAgICBucmkgPSB0aGlzLnVuc29ydGVkUm93TWFwLmdldChyaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9sZENlbGwgPSByb3dzLmdldENlbGwobnJpLCBjaSk7XHJcbiAgICAgICAgY29uc3Qgb2xkVGV4dCA9IG9sZENlbGwgPyBvbGRDZWxsLnRleHQgOiAnJztcclxuICAgICAgICB0aGlzLnNldENlbGxUZXh0KG5yaSwgY2ksIHRleHQsIHN0YXRlKTtcclxuICAgICAgICAvLyByZXBsYWNlIGZpbHRlci52YWx1ZVxyXG4gICAgICAgIGlmIChhdXRvRmlsdGVyLmFjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGF1dG9GaWx0ZXIuZ2V0RmlsdGVyKGNpKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdkluZGV4ID0gZmlsdGVyLnZhbHVlLmZpbmRJbmRleCgodikgPT4gdiA9PT0gb2xkVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodkluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudmFsdWUuc3BsaWNlKHZJbmRleCwgMSwgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmlsdGVyOicsIGZpbHRlciwgb2xkQ2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5yZXNldEF1dG9GaWx0ZXIoKTtcclxuICAgIH1cclxuICAgIGdldFNlbGVjdGVkQ2VsbCgpIHtcclxuICAgICAgICBjb25zdCB7IHJpLCBjaSB9ID0gdGhpcy5zZWxlY3RvcjtcclxuICAgICAgICBsZXQgbnJpID0gcmk7XHJcbiAgICAgICAgaWYgKHRoaXMudW5zb3J0ZWRSb3dNYXAuaGFzKHJpKSkge1xyXG4gICAgICAgICAgICBucmkgPSB0aGlzLnVuc29ydGVkUm93TWFwLmdldChyaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJvd3MuZ2V0Q2VsbChucmksIGNpKTtcclxuICAgIH1cclxuICAgIHh5SW5TZWxlY3RlZFJlY3QoeCwgeSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmdldFNlbGVjdGVkUmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHgxID0geCAtIHRoaXMuY29scy5pbmRleFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IHkxID0geSAtIHRoaXMucm93cy5oZWlnaHQ7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3g6JywgeCwgJyx5OicsIHksICdsZWZ0OicsIGxlZnQsICd0b3A6JywgdG9wKTtcclxuICAgICAgICByZXR1cm4geDEgPiBsZWZ0ICYmIHgxIDwgbGVmdCArIHdpZHRoICYmIHkxID4gdG9wICYmIHkxIDwgdG9wICsgaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgZ2V0U2VsZWN0ZWRSZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlY3QodGhpcy5zZWxlY3Rvci5yYW5nZSk7XHJcbiAgICB9XHJcbiAgICBnZXRDbGlwYm9hcmRSZWN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgY2xpcGJvYXJkIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghY2xpcGJvYXJkLmlzQ2xlYXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZWN0KGNsaXBib2FyZC5yYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGxlZnQ6IC0xMDAsIHRvcDogLTEwMCB9O1xyXG4gICAgfVxyXG4gICAgZ2V0UmVjdChjZWxsUmFuZ2UpIHtcclxuICAgICAgICBjb25zdCB7IHNjcm9sbCwgcm93cywgY29scywgZXhjZXB0Um93U2V0IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpIH0gPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NyaTonLCBzcmksICcsc2NpOicsIHNjaSwgJywgZXJpOicsIGVyaSwgJywgZWNpOicsIGVjaSk7XHJcbiAgICAgICAgLy8gbm8gc2VsZWN0b3JcclxuICAgICAgICBpZiAoc3JpIDwgMCAmJiBzY2kgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgbDogMCxcclxuICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIHQ6IDAsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlZnQgPSBjb2xzLnN1bVdpZHRoKDAsIHNjaSk7XHJcbiAgICAgICAgY29uc3QgdG9wID0gcm93cy5zdW1IZWlnaHQoMCwgc3JpLCBleGNlcHRSb3dTZXQpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHJvd3Muc3VtSGVpZ2h0KHNyaSwgZXJpICsgMSwgZXhjZXB0Um93U2V0KTtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IGNvbHMuc3VtV2lkdGgoc2NpLCBlY2kgKyAxKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc3JpOicsIHNyaSwgJywgc2NpOicsIHNjaSwgJywgZXJpOicsIGVyaSwgJywgZWNpOicsIGVjaSk7XHJcbiAgICAgICAgbGV0IGxlZnQwID0gbGVmdCAtIHNjcm9sbC54O1xyXG4gICAgICAgIGxldCB0b3AwID0gdG9wIC0gc2Nyb2xsLnk7XHJcbiAgICAgICAgY29uc3QgZnNoID0gdGhpcy5mcmVlemVUb3RhbEhlaWdodCgpO1xyXG4gICAgICAgIGNvbnN0IGZzdyA9IHRoaXMuZnJlZXplVG90YWxXaWR0aCgpO1xyXG4gICAgICAgIGlmIChmc3cgPiAwICYmIGZzdyA+IGxlZnQpIHtcclxuICAgICAgICAgICAgbGVmdDAgPSBsZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnNoID4gMCAmJiBmc2ggPiB0b3ApIHtcclxuICAgICAgICAgICAgdG9wMCA9IHRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbDogbGVmdCxcclxuICAgICAgICAgICAgdDogdG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBsZWZ0MCxcclxuICAgICAgICAgICAgdG9wOiB0b3AwLFxyXG4gICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBzY3JvbGwsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldENlbGxSZWN0QnlYWSh4LCB5KSB7XHJcbiAgICAgICAgY29uc3QgeyBzY3JvbGwsIG1lcmdlcywgcm93cywgY29scyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgeyByaSwgdG9wLCBoZWlnaHQgfSA9IGdldENlbGxSb3dCeVkuY2FsbCh0aGlzLCB5LCBzY3JvbGwueSk7XHJcbiAgICAgICAgbGV0IHsgY2ksIGxlZnQsIHdpZHRoIH0gPSBnZXRDZWxsQ29sQnlYLmNhbGwodGhpcywgeCwgc2Nyb2xsLngpO1xyXG4gICAgICAgIGlmIChjaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgd2lkdGggPSBjb2xzLnRvdGFsV2lkdGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpID09PSAtMSkge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSByb3dzLnRvdGFsSGVpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyaSA+PSAwIHx8IGNpID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2UgPSBtZXJnZXMuZ2V0Rmlyc3RJbmNsdWRlcyhyaSwgY2kpO1xyXG4gICAgICAgICAgICBpZiAobWVyZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJpID0gbWVyZ2Uuc3JpO1xyXG4gICAgICAgICAgICAgICAgY2kgPSBtZXJnZS5zY2k7XHJcbiAgICAgICAgICAgICAgICAoeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2VsbFJlY3QocmksIGNpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmksXHJcbiAgICAgICAgICAgIGNpLFxyXG4gICAgICAgICAgICBsZWZ0LFxyXG4gICAgICAgICAgICB0b3AsXHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlzU2luZ2xlU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHRoaXMuc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChzcmksIHNjaSk7XHJcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5tZXJnZSkge1xyXG4gICAgICAgICAgICBjb25zdCBbcm4sIGNuXSA9IGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgIGlmIChzcmkgKyBybiA9PT0gZXJpICYmIHNjaSArIGNuID09PSBlY2kpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnNlbGVjdG9yLm11bHRpcGxlKCk7XHJcbiAgICB9XHJcbiAgICBjYW5Vbm1lcmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc3JpLCBzY2ksIGVyaSwgZWNpIH0gPSB0aGlzLnNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmdldENlbGwoc3JpLCBzY2kpO1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwubWVyZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICBpZiAoc3JpICsgcm4gPT09IGVyaSAmJiBzY2kgKyBjbiA9PT0gZWNpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIG1lcmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IsIHJvd3MgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3RlZCgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBzZWxlY3Rvci5zaXplKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21lcmdlOicsIHJuLCBjbik7XHJcbiAgICAgICAgaWYgKHJuID4gMSB8fCBjbiA+IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzcmksIHNjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsT3JOZXcoc3JpLCBzY2kpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5tZXJnZSA9IFtybiAtIDEsIGNuIC0gMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlcy5hZGQoc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIG1lcmdlIGNlbGxzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MuZGVsZXRlQ2VsbHMoc2VsZWN0b3IucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NlbGw6JywgY2VsbCwgdGhpcy5kKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5zZXRDZWxsKHNyaSwgc2NpLCBjZWxsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5tZXJnZSgpIHtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5pc1NpbmdsZVNlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSBzZWxlY3Rvci5yYW5nZTtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvd3MuZGVsZXRlQ2VsbChzcmksIHNjaSwgJ21lcmdlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubWVyZ2VzLmRlbGV0ZVdpdGhpbihzZWxlY3Rvci5yYW5nZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjYW5BdXRvZmlsdGVyKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5hdXRvRmlsdGVyLmFjdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgYXV0b2ZpbHRlcigpIHtcclxuICAgICAgICBjb25zdCB7IGF1dG9GaWx0ZXIsIHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhdXRvRmlsdGVyLmFjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBhdXRvRmlsdGVyLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4Y2VwdFJvd1NldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkUm93TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51bnNvcnRlZFJvd01hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF1dG9GaWx0ZXIucmVmID0gc2VsZWN0b3IucmFuZ2UudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0QXV0b0ZpbHRlcihjaSwgb3JkZXIsIG9wZXJhdG9yLCB2YWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0ZpbHRlciB9ID0gdGhpcztcclxuICAgICAgICBhdXRvRmlsdGVyLmFkZEZpbHRlcihjaSwgb3BlcmF0b3IsIHZhbHVlKTtcclxuICAgICAgICBhdXRvRmlsdGVyLnNldFNvcnQoY2ksIG9yZGVyKTtcclxuICAgICAgICB0aGlzLnJlc2V0QXV0b0ZpbHRlcigpO1xyXG4gICAgfVxyXG4gICAgcmVzZXRBdXRvRmlsdGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHsgYXV0b0ZpbHRlciwgcm93cyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoIWF1dG9GaWx0ZXIuYWN0aXZlKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHNvcnQgfSA9IGF1dG9GaWx0ZXI7XHJcbiAgICAgICAgY29uc3QgeyByc2V0LCBmc2V0IH0gPSBhdXRvRmlsdGVyLmZpbHRlcmVkUm93cygociwgYykgPT4gcm93cy5nZXRDZWxsKHIsIGMpKTtcclxuICAgICAgICBjb25zdCBmYXJ5ID0gQXJyYXkuZnJvbShmc2V0KTtcclxuICAgICAgICBjb25zdCBvbGRBcnkgPSBBcnJheS5mcm9tKGZzZXQpO1xyXG4gICAgICAgIGlmIChzb3J0KSB7XHJcbiAgICAgICAgICAgIGZhcnkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvcnQub3JkZXIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvcnQub3JkZXIgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiIC0gYTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leGNlcHRSb3dTZXQgPSByc2V0O1xyXG4gICAgICAgIHRoaXMuc29ydGVkUm93TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMudW5zb3J0ZWRSb3dNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZmFyeS5mb3JFYWNoKChpdCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0ZWRSb3dNYXAuc2V0KG9sZEFyeVtpbmRleF0sIGl0KTtcclxuICAgICAgICAgICAgdGhpcy51bnNvcnRlZFJvd01hcC5zZXQoaXQsIG9sZEFyeVtpbmRleF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlQ2VsbCh3aGF0ID0gJ2FsbCcpIHtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucm93cy5kZWxldGVDZWxscyhzZWxlY3Rvci5yYW5nZSwgd2hhdCk7XHJcbiAgICAgICAgICAgIGlmICh3aGF0ID09PSAnYWxsJyB8fCB3aGF0ID09PSAnZm9ybWF0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXJnZXMuZGVsZXRlV2l0aGluKHNlbGVjdG9yLnJhbmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gdHlwZTogcm93IHwgY29sdW1uXHJcbiAgICBpbnNlcnQodHlwZSwgbiA9IDEpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNyaSwgc2NpIH0gPSB0aGlzLnNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgICAgICBjb25zdCB7IHJvd3MsIG1lcmdlcywgY29scyB9ID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IHNpID0gc3JpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3JvdycpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MuaW5zZXJ0KHNyaSwgbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NvbHVtbicpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MuaW5zZXJ0Q29sdW1uKHNjaSwgbik7XHJcbiAgICAgICAgICAgICAgICBzaSA9IHNjaTtcclxuICAgICAgICAgICAgICAgIGNvbHMubGVuICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVyZ2VzLnNoaWZ0KHR5cGUsIHNpLCBuLCAocmksIGNpLCBybiwgY24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgICAgIGNlbGwubWVyZ2VbMF0gKz0gcm47XHJcbiAgICAgICAgICAgICAgICBjZWxsLm1lcmdlWzFdICs9IGNuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIHR5cGU6IHJvdyB8IGNvbHVtblxyXG4gICAgZGVsZXRlKHR5cGUpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHJvd3MsIG1lcmdlcywgc2VsZWN0b3IsIGNvbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZ2UgfSA9IHNlbGVjdG9yO1xyXG4gICAgICAgICAgICBjb25zdCB7IHNyaSwgc2NpLCBlcmksIGVjaSB9ID0gc2VsZWN0b3IucmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFtyc2l6ZSwgY3NpemVdID0gc2VsZWN0b3IucmFuZ2Uuc2l6ZSgpO1xyXG4gICAgICAgICAgICBsZXQgc2kgPSBzcmk7XHJcbiAgICAgICAgICAgIGxldCBzaXplID0gcnNpemU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICAgICAgcm93cy5kZWxldGUoc3JpLCBlcmkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjb2x1bW4nKSB7XHJcbiAgICAgICAgICAgICAgICByb3dzLmRlbGV0ZUNvbHVtbihzY2ksIGVjaSk7XHJcbiAgICAgICAgICAgICAgICBzaSA9IHJhbmdlLnNjaTtcclxuICAgICAgICAgICAgICAgIHNpemUgPSBjc2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbHMubGVuIC09IGVjaSAtIHNjaSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3R5cGU6JywgdHlwZSwgJywgc2k6Jywgc2ksICcsIHNpemU6Jywgc2l6ZSk7XHJcbiAgICAgICAgICAgIG1lcmdlcy5zaGlmdCh0eXBlLCBzaSwgLXNpemUsIChyaSwgY2ksIHJuLCBjbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JpOicsIHJpLCAnLCBjaTonLCBjaSwgJywgcm46Jywgcm4sICcsIGNuOicsIGNuKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSByb3dzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgICAgIGNlbGwubWVyZ2VbMF0gKz0gcm47XHJcbiAgICAgICAgICAgICAgICBjZWxsLm1lcmdlWzFdICs9IGNuO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwubWVyZ2VbMF0gPT09IDAgJiYgY2VsbC5tZXJnZVsxXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNjcm9sbHgoeCwgY2IpIHtcclxuICAgICAgICBjb25zdCB7IHNjcm9sbCwgZnJlZXplLCBjb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IFssIGZjaV0gPSBmcmVlemU7XHJcbiAgICAgICAgY29uc3QgW2NpLCBsZWZ0LCB3aWR0aF0gPSBoZWxwZXIucmFuZ2VSZWR1Y2VJZihmY2ksIGNvbHMubGVuLCAwLCAwLCB4LCAoaSkgPT4gY29scy5nZXRXaWR0aChpKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZjaTonLCBmY2ksICcsIGNpOicsIGNpKTtcclxuICAgICAgICBsZXQgeDEgPSBsZWZ0O1xyXG4gICAgICAgIGlmICh4ID4gMClcclxuICAgICAgICAgICAgeDEgKz0gd2lkdGg7XHJcbiAgICAgICAgaWYgKHNjcm9sbC54ICE9PSB4MSkge1xyXG4gICAgICAgICAgICBzY3JvbGwuY2kgPSB4ID4gMCA/IGNpIDogMDtcclxuICAgICAgICAgICAgc2Nyb2xsLnggPSB4MTtcclxuICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzY3JvbGx5KHksIGNiKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY3JvbGwsIGZyZWV6ZSwgcm93cyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBbZnJpXSA9IGZyZWV6ZTtcclxuICAgICAgICBjb25zdCBbcmksIHRvcCwgaGVpZ2h0XSA9IGhlbHBlci5yYW5nZVJlZHVjZUlmKGZyaSwgcm93cy5sZW4sIDAsIDAsIHksIChpKSA9PiByb3dzLmdldEhlaWdodChpKSk7XHJcbiAgICAgICAgbGV0IHkxID0gdG9wO1xyXG4gICAgICAgIGlmICh5ID4gMClcclxuICAgICAgICAgICAgeTEgKz0gaGVpZ2h0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyaTonLCByaSwgJyAseTonLCB5MSk7XHJcbiAgICAgICAgaWYgKHNjcm9sbC55ICE9PSB5MSkge1xyXG4gICAgICAgICAgICBzY3JvbGwucmkgPSB5ID4gMCA/IHJpIDogMDtcclxuICAgICAgICAgICAgc2Nyb2xsLnkgPSB5MTtcclxuICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjZWxsUmVjdChyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IGNvbHMuc3VtV2lkdGgoMCwgY2kpO1xyXG4gICAgICAgIGNvbnN0IHRvcCA9IHJvd3Muc3VtSGVpZ2h0KDAsIHJpKTtcclxuICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gY29scy5nZXRXaWR0aChjaSk7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHJvd3MuZ2V0SGVpZ2h0KHJpKTtcclxuICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoY2VsbC5tZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBjZWxsLm1lcmdlO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NlbGwubWVyZ2U6JywgY2VsbC5tZXJnZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcm47IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gcm93cy5nZXRIZWlnaHQocmkgKyBpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gY247IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBjb2xzLmdldFdpZHRoKGNpICsgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhOicsIHRoaXMuZCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVmdCxcclxuICAgICAgICAgICAgdG9wLFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICBjZWxsLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsKHJpLCBjaSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvd3MuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbFRleHRPckRlZmF1bHQocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgIHJldHVybiBjZWxsICYmIGNlbGwudGV4dCA/IGNlbGwudGV4dCA6ICcnO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbFN0eWxlKHJpLCBjaSkge1xyXG4gICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzW2NlbGwuc3R5bGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldENlbGxTdHlsZU9yRGVmYXVsdChyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCB7IHN0eWxlcywgcm93cyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBjZWxsID0gcm93cy5nZXRDZWxsKHJpLCBjaSk7XHJcbiAgICAgICAgY29uc3QgY2VsbFN0eWxlID0gY2VsbCAmJiBjZWxsLnN0eWxlICE9PSB1bmRlZmluZWQgPyBzdHlsZXNbY2VsbC5zdHlsZV0gOiB7fTtcclxuICAgICAgICByZXR1cm4gaGVscGVyLm1lcmdlKHRoaXMuZGVmYXVsdFN0eWxlKCksIGNlbGxTdHlsZSk7XHJcbiAgICB9XHJcbiAgICBnZXRTZWxlY3RlZENlbGxTdHlsZSgpIHtcclxuICAgICAgICBjb25zdCB7IHJpLCBjaSB9ID0gdGhpcy5zZWxlY3RvcjtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDZWxsU3R5bGVPckRlZmF1bHQocmksIGNpKTtcclxuICAgIH1cclxuICAgIC8vIHN0YXRlOiBpbnB1dCB8IGZpbmlzaGVkXHJcbiAgICBzZXRDZWxsVGV4dChyaSwgY2ksIHRleHQsIHN0YXRlKSB7XHJcbiAgICAgICAgY29uc3QgeyByb3dzLCBoaXN0b3J5LCB2YWxpZGF0aW9ucyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoc3RhdGUgPT09ICdmaW5pc2hlZCcpIHtcclxuICAgICAgICAgICAgcm93cy5zZXRDZWxsVGV4dChyaSwgY2ksICcnKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5hZGQodGhpcy5nZXREYXRhKCkpO1xyXG4gICAgICAgICAgICByb3dzLnNldENlbGxUZXh0KHJpLCBjaSwgdGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByb3dzLnNldENlbGxUZXh0KHJpLCBjaSwgdGV4dCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKHRoaXMuZ2V0RGF0YSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdmFsaWRhdG9yXHJcbiAgICAgICAgdmFsaWRhdGlvbnMudmFsaWRhdGUocmksIGNpLCB0ZXh0KTtcclxuICAgIH1cclxuICAgIGZyZWV6ZUlzQWN0aXZlKCkge1xyXG4gICAgICAgIGNvbnN0IFtyaSwgY2ldID0gdGhpcy5mcmVlemU7XHJcbiAgICAgICAgcmV0dXJuIHJpID4gMCB8fCBjaSA+IDA7XHJcbiAgICB9XHJcbiAgICBzZXRGcmVlemUocmksIGNpKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mcmVlemUgPSBbcmksIGNpXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZyZWV6ZVRvdGFsV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29scy5zdW1XaWR0aCgwLCB0aGlzLmZyZWV6ZVsxXSk7XHJcbiAgICB9XHJcbiAgICBmcmVlemVUb3RhbEhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb3dzLnN1bUhlaWdodCgwLCB0aGlzLmZyZWV6ZVswXSk7XHJcbiAgICB9XHJcbiAgICBzZXRSb3dIZWlnaHQocmksIGhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGF0YSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucm93cy5zZXRIZWlnaHQocmksIGhlaWdodCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRDb2xXaWR0aChjaSwgd2lkdGgpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZURhdGEoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHMuc2V0V2lkdGgoY2ksIHdpZHRoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHZpZXdIZWlnaHQoKSB7XHJcbiAgICAgICAgY29uc3QgeyB2aWV3LCBzaG93VG9vbGJhciwgc2hvd0JvdHRvbUJhciB9ID0gdGhpcy5zZXR0aW5ncztcclxuICAgICAgICBsZXQgaCA9IHZpZXcuaGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKHNob3dCb3R0b21CYXIpIHtcclxuICAgICAgICAgICAgaCAtPSBib3R0b21iYXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93VG9vbGJhcikge1xyXG4gICAgICAgICAgICBoIC09IHRvb2xiYXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoO1xyXG4gICAgfVxyXG4gICAgdmlld1dpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnZpZXcud2lkdGgoKTtcclxuICAgIH1cclxuICAgIGZyZWV6ZVZpZXdSYW5nZSgpIHtcclxuICAgICAgICBjb25zdCBbcmksIGNpXSA9IHRoaXMuZnJlZXplO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2VsbFJhbmdlKDAsIDAsIHJpIC0gMSwgY2kgLSAxLCB0aGlzLmZyZWV6ZVRvdGFsV2lkdGgoKSwgdGhpcy5mcmVlemVUb3RhbEhlaWdodCgpKTtcclxuICAgIH1cclxuICAgIGNvbnRlbnRSYW5nZSgpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgW3JpLCBjaV0gPSByb3dzLm1heENlbGwoKTtcclxuICAgICAgICBjb25zdCBoID0gcm93cy5zdW1IZWlnaHQoMCwgcmkgKyAxKTtcclxuICAgICAgICBjb25zdCB3ID0gY29scy5zdW1XaWR0aCgwLCBjaSArIDEpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2VsbFJhbmdlKDAsIDAsIHJpLCBjaSwgdywgaCk7XHJcbiAgICB9XHJcbiAgICBleGNlcHRSb3dUb3RhbEhlaWdodChzcmksIGVyaSkge1xyXG4gICAgICAgIGNvbnN0IHsgZXhjZXB0Um93U2V0LCByb3dzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGV4Y2VwdFJvd3MgPSBBcnJheS5mcm9tKGV4Y2VwdFJvd1NldCk7XHJcbiAgICAgICAgbGV0IGV4Y2VwdFJvd1RIID0gMDtcclxuICAgICAgICBleGNlcHRSb3dzLmZvckVhY2goKHJpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyaSA8IHNyaSB8fCByaSA+IGVyaSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gcm93cy5nZXRIZWlnaHQocmkpO1xyXG4gICAgICAgICAgICAgICAgZXhjZXB0Um93VEggKz0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGV4Y2VwdFJvd1RIO1xyXG4gICAgfVxyXG4gICAgdmlld1JhbmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsLCByb3dzLCBjb2xzLCBmcmVlemUsIGV4Y2VwdFJvd1NldCB9ID0gdGhpcztcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2Nyb2xsOicsIHNjcm9sbCwgJywgZnJlZXplOicsIGZyZWV6ZSlcclxuICAgICAgICBsZXQgeyByaSwgY2kgfSA9IHNjcm9sbDtcclxuICAgICAgICBpZiAocmkgPD0gMClcclxuICAgICAgICAgICAgW3JpXSA9IGZyZWV6ZTtcclxuICAgICAgICBpZiAoY2kgPD0gMClcclxuICAgICAgICAgICAgWywgY2ldID0gZnJlZXplO1xyXG4gICAgICAgIGxldCBbeCwgeV0gPSBbMCwgMF07XHJcbiAgICAgICAgbGV0IFtlcmksIGVjaV0gPSBbcm93cy5sZW4sIGNvbHMubGVuXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gcmk7IGkgPCByb3dzLmxlbjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmICghZXhjZXB0Um93U2V0LmhhcyhpKSkge1xyXG4gICAgICAgICAgICAgICAgeSArPSByb3dzLmdldEhlaWdodChpKTtcclxuICAgICAgICAgICAgICAgIGVyaSA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHkgPiB0aGlzLnZpZXdIZWlnaHQoKSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBqID0gY2k7IGogPCBjb2xzLmxlbjsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgIHggKz0gY29scy5nZXRXaWR0aChqKTtcclxuICAgICAgICAgICAgZWNpID0gajtcclxuICAgICAgICAgICAgaWYgKHggPiB0aGlzLnZpZXdXaWR0aCgpKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJpLCBjaSwgZXJpLCBlY2ksIHgsIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2VsbFJhbmdlKHJpLCBjaSwgZXJpLCBlY2ksIHgsIHkpO1xyXG4gICAgfVxyXG4gICAgZWFjaE1lcmdlc0luVmlldyh2aWV3UmFuZ2UsIGNiKSB7XHJcbiAgICAgICAgdGhpcy5tZXJnZXMuZmlsdGVySW50ZXJzZWN0cyh2aWV3UmFuZ2UpLmZvckVhY2goKGl0KSA9PiBjYihpdCkpO1xyXG4gICAgfVxyXG4gICAgaGlkZVJvd3NPckNvbHMoKSB7XHJcbiAgICAgICAgY29uc3QgeyByb3dzLCBjb2xzLCBzZWxlY3RvciB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBbcmxlbiwgY2xlbl0gPSBzZWxlY3Rvci5zaXplKCk7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2kgfSA9IHNlbGVjdG9yLnJhbmdlO1xyXG4gICAgICAgIGlmIChybGVuID09PSByb3dzLmxlbikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjaSA9IHNjaTsgY2kgPD0gZWNpOyBjaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xzLnNldEhpZGUoY2ksIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsZW4gPT09IGNvbHMubGVuKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHJpID0gc3JpOyByaSA8PSBlcmk7IHJpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHJvd3Muc2V0SGlkZShyaSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0eXBlOiByb3cgfCBjb2xcclxuICAgIC8vIGluZGV4IHJvdy1pbmRleCB8IGNvbC1pbmRleFxyXG4gICAgdW5oaWRlUm93c09yQ29scyh0eXBlLCBpbmRleCkge1xyXG4gICAgICAgIHRoaXNbYCR7dHlwZX1zYF0udW5oaWRlKGluZGV4KTtcclxuICAgIH1cclxuICAgIHJvd0VhY2gobWluLCBtYXgsIGNiKSB7XHJcbiAgICAgICAgbGV0IHkgPSAwO1xyXG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBmcnNldCA9IHRoaXMuZXhjZXB0Um93U2V0O1xyXG4gICAgICAgIGNvbnN0IGZyYXJ5ID0gWy4uLmZyc2V0XTtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYXJ5Lmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChmcmFyeVtpXSA8IG1pbikge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21pbjonLCBtaW4sICcsIG1heDonLCBtYXgsICcsIHNjcm9sbDonLCBzY3JvbGwpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBtaW4gKyBvZmZzZXQ7IGkgPD0gbWF4ICsgb2Zmc2V0OyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGZyc2V0LmhhcyhpKSkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dIZWlnaHQgPSByb3dzLmdldEhlaWdodChpKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dIZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2IoaSwgeSwgcm93SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IHJvd0hlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IHRoaXMudmlld0hlaWdodCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbEVhY2gobWluLCBtYXgsIGNiKSB7XHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGNvbnN0IHsgY29scyB9ID0gdGhpcztcclxuICAgICAgICBmb3IgKGxldCBpID0gbWluOyBpIDw9IG1heDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbFdpZHRoID0gY29scy5nZXRXaWR0aChpKTtcclxuICAgICAgICAgICAgaWYgKGNvbFdpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY2IoaSwgeCwgY29sV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgeCArPSBjb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgIGlmICh4ID4gdGhpcy52aWV3V2lkdGgoKSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlZmF1bHRTdHlsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5zdHlsZTtcclxuICAgIH1cclxuICAgIGFkZFN0eWxlKG5zdHlsZSkge1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGVzIH0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvbGQuc3R5bGVzOicsIHN0eWxlcywgbnN0eWxlKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IHN0eWxlc1tpXTtcclxuICAgICAgICAgICAgaWYgKGhlbHBlci5lcXVhbHMoc3R5bGUsIG5zdHlsZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3R5bGVzLnB1c2gobnN0eWxlKTtcclxuICAgICAgICByZXR1cm4gc3R5bGVzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VEYXRhKGNiKSB7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5LmFkZCh0aGlzLmdldERhdGEoKSk7XHJcbiAgICAgICAgY2IoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSh0aGlzLmdldERhdGEoKSk7XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKGQpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhkKS5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09ICdtZXJnZXMnIHx8XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ3Jvd3MnIHx8XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ2NvbHMnIHx8XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ3ZhbGlkYXRpb25zJykge1xyXG4gICAgICAgICAgICAgICAgdGhpc1twcm9wZXJ0eV0uc2V0RGF0YShkW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocHJvcGVydHkgPT09ICdmcmVlemUnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbeCwgeV0gPSBleHByMnh5KGRbcHJvcGVydHldKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJlZXplID0gW3ksIHhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BlcnR5ID09PSAnYXV0b2ZpbHRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0b0ZpbHRlci5zZXREYXRhKGRbcHJvcGVydHldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzW3Byb3BlcnR5XSA9IGRbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgZnJlZXplLCBzdHlsZXMsIG1lcmdlcywgcm93cywgY29scywgdmFsaWRhdGlvbnMsIGF1dG9GaWx0ZXIsIH0gPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGZyZWV6ZTogeHkyZXhwcihmcmVlemVbMV0sIGZyZWV6ZVswXSksXHJcbiAgICAgICAgICAgIHN0eWxlcyxcclxuICAgICAgICAgICAgbWVyZ2VzOiBtZXJnZXMuZ2V0RGF0YSgpLFxyXG4gICAgICAgICAgICByb3dzOiByb3dzLmdldERhdGEoKSxcclxuICAgICAgICAgICAgY29sczogY29scy5nZXREYXRhKCksXHJcbiAgICAgICAgICAgIHZhbGlkYXRpb25zOiB2YWxpZGF0aW9ucy5nZXREYXRhKCksXHJcbiAgICAgICAgICAgIGF1dG9maWx0ZXI6IGF1dG9GaWx0ZXIuZ2V0RGF0YSgpLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gZG9jc1xyXG4vKiogZGVmYXVsdCBmb250IGxpc3RcclxuICogQHR5cGUge0Jhc2VGb250W119XHJcbiAqL1xyXG5jb25zdCBiYXNlRm9udHMgPSBbXHJcbiAgICB7IGtleTogJ0FyaWFsJywgdGl0bGU6ICdBcmlhbCcgfSxcclxuICAgIHsga2V5OiAnSGVsdmV0aWNhJywgdGl0bGU6ICdIZWx2ZXRpY2EnIH0sXHJcbiAgICB7IGtleTogJ1NvdXJjZSBTYW5zIFBybycsIHRpdGxlOiAnU291cmNlIFNhbnMgUHJvJyB9LFxyXG4gICAgeyBrZXk6ICdDb21pYyBTYW5zIE1TJywgdGl0bGU6ICdDb21pYyBTYW5zIE1TJyB9LFxyXG4gICAgeyBrZXk6ICdDb3VyaWVyIE5ldycsIHRpdGxlOiAnQ291cmllciBOZXcnIH0sXHJcbiAgICB7IGtleTogJ1ZlcmRhbmEnLCB0aXRsZTogJ1ZlcmRhbmEnIH0sXHJcbiAgICB7IGtleTogJ0xhdG8nLCB0aXRsZTogJ0xhdG8nIH0sXHJcbl07XHJcbi8qKiBkZWZhdWx0IGZvbnRTaXplIGxpc3RcclxuICogQHR5cGUge0ZvbnRTaXplW119XHJcbiAqL1xyXG5jb25zdCBmb250U2l6ZXMgPSBbXHJcbiAgICB7IHB0OiA3LjUsIHB4OiAxMCB9LFxyXG4gICAgeyBwdDogOCwgcHg6IDExIH0sXHJcbiAgICB7IHB0OiA5LCBweDogMTIgfSxcclxuICAgIHsgcHQ6IDEwLCBweDogMTMgfSxcclxuICAgIHsgcHQ6IDEwLjUsIHB4OiAxNCB9LFxyXG4gICAgeyBwdDogMTEsIHB4OiAxNSB9LFxyXG4gICAgeyBwdDogMTIsIHB4OiAxNiB9LFxyXG4gICAgeyBwdDogMTQsIHB4OiAxOC43IH0sXHJcbiAgICB7IHB0OiAxNSwgcHg6IDIwIH0sXHJcbiAgICB7IHB0OiAxNiwgcHg6IDIxLjMgfSxcclxuICAgIHsgcHQ6IDE4LCBweDogMjQgfSxcclxuICAgIHsgcHQ6IDIyLCBweDogMjkuMyB9LFxyXG4gICAgeyBwdDogMjQsIHB4OiAzMiB9LFxyXG4gICAgeyBwdDogMjYsIHB4OiAzNC43IH0sXHJcbiAgICB7IHB0OiAzNiwgcHg6IDQ4IH0sXHJcbiAgICB7IHB0OiA0MiwgcHg6IDU2IH0sXHJcbiAgICAvLyB7IHB0OiA1NCwgcHg6IDcxLjcgfSxcclxuICAgIC8vIHsgcHQ6IDYzLCBweDogODMuNyB9LFxyXG4gICAgLy8geyBwdDogNzIsIHB4OiA5NS42IH0sXHJcbl07XHJcbi8qKiBtYXAgcHQgdG8gcHhcclxuICogQGRhdGUgMjAxOS0xMC0xMFxyXG4gKiBAcGFyYW0ge2ZvbnRzaXplUFR9IHB0XHJcbiAqIEByZXR1cm5zIHtmb250c2l6ZVBYfVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Rm9udFNpemVQeEJ5UHQocHQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9udFNpemVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSBmb250U2l6ZXNbaV07XHJcbiAgICAgICAgaWYgKGZvbnRTaXplLnB0ID09PSBwdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9udFNpemUucHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHB0O1xyXG59XHJcbi8qKiB0cmFuc2Zvcm0gYmFzZUZvbnRzIHRvIG1hcFxyXG4gKiBAZGF0ZSAyMDE5LTEwLTEwXHJcbiAqIEBwYXJhbSB7QmFzZUZvbnRbXX0gW2FyeT1bXV1cclxuICogQHJldHVybnMge29iamVjdH1cclxuICovXHJcbmZ1bmN0aW9uIGZvbnRzKGFyeSA9IFtdKSB7XHJcbiAgICBjb25zdCBtYXAgPSB7fTtcclxuICAgIGJhc2VGb250cy5jb25jYXQoYXJ5KS5mb3JFYWNoKChmKSA9PiB7XHJcbiAgICAgICAgbWFwW2Yua2V5XSA9IGY7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBtYXA7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbmV4cG9ydCB7IGZvbnRTaXplcywgZm9udHMsIGJhc2VGb250cywgZ2V0Rm9udFNpemVQeEJ5UHQgfTtcclxuIiwiaW1wb3J0IHsgdGYgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuY29uc3QgZm9ybWF0U3RyaW5nUmVuZGVyID0gdiA9PiB2O1xyXG5jb25zdCBmb3JtYXROdW1iZXJSZW5kZXIgPSAodikgPT4ge1xyXG4gICAgLy8gbWF0Y2ggXCItMTIuMVwiIG9yIFwiMTJcIiBvciBcIjEyLjFcIlxyXG4gICAgaWYgKC9eKC0/XFxkKi4/XFxkKikkLy50ZXN0KHYpKSB7XHJcbiAgICAgICAgY29uc3QgdjEgPSBOdW1iZXIodikudG9GaXhlZCgyKS50b1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IFtmaXJzdCwgLi4ucGFydHNdID0gdjEuc3BsaXQoJ1xcXFwuJyk7XHJcbiAgICAgICAgcmV0dXJuIFtmaXJzdC5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pKyg/IVxcZCkpL2csICckMSwnKSwgLi4ucGFydHNdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHY7XHJcbn07XHJcbmNvbnN0IGJhc2VGb3JtYXRzID0gW1xyXG4gICAge1xyXG4gICAgICAgIGtleTogJ25vcm1hbCcsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQubm9ybWFsJyksXHJcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ3RleHQnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0LnRleHQnKSxcclxuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICByZW5kZXI6IGZvcm1hdFN0cmluZ1JlbmRlcixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnbnVtYmVyJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5udW1iZXInKSxcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICBsYWJlbDogJzEsMDAwLjEyJyxcclxuICAgICAgICByZW5kZXI6IGZvcm1hdE51bWJlclJlbmRlcixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAncGVyY2VudCcsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQucGVyY2VudCcpLFxyXG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgIGxhYmVsOiAnMTAuMTIlJyxcclxuICAgICAgICByZW5kZXI6IHYgPT4gYCR7dn0lYCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAncm1iJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5ybWInKSxcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICBsYWJlbDogJ++/pTEwLjAwJyxcclxuICAgICAgICByZW5kZXI6IHYgPT4gYO+/pSR7Zm9ybWF0TnVtYmVyUmVuZGVyKHYpfWAsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ3VzZCcsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQudXNkJyksXHJcbiAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgbGFiZWw6ICckMTAuMDAnLFxyXG4gICAgICAgIHJlbmRlcjogdiA9PiBgJCR7Zm9ybWF0TnVtYmVyUmVuZGVyKHYpfWAsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ2V1cicsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQuZXVyJyksXHJcbiAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgbGFiZWw6ICfigqwxMC4wMCcsXHJcbiAgICAgICAgcmVuZGVyOiB2ID0+IGDigqwke2Zvcm1hdE51bWJlclJlbmRlcih2KX1gLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdkYXRlJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5kYXRlJyksXHJcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxyXG4gICAgICAgIGxhYmVsOiAnMjYvMDkvMjAwOCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ3RpbWUnLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybWF0LnRpbWUnKSxcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgbGFiZWw6ICcxNTo1OTowMCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ2RhdGV0aW1lJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm1hdC5kYXRldGltZScpLFxyXG4gICAgICAgIHR5cGU6ICdkYXRlJyxcclxuICAgICAgICBsYWJlbDogJzI2LzA5LzIwMDggMTU6NTk6MDAnLFxyXG4gICAgICAgIHJlbmRlcjogZm9ybWF0U3RyaW5nUmVuZGVyLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdkdXJhdGlvbicsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtYXQuZHVyYXRpb24nKSxcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgbGFiZWw6ICcyNDowMTowMCcsXHJcbiAgICAgICAgcmVuZGVyOiBmb3JtYXRTdHJpbmdSZW5kZXIsXHJcbiAgICB9LFxyXG5dO1xyXG4vLyBjb25zdCBmb3JtYXRzID0gKGFyeSA9IFtdKSA9PiB7XHJcbi8vICAgY29uc3QgbWFwID0ge307XHJcbi8vICAgYmFzZUZvcm1hdHMuY29uY2F0KGFyeSkuZm9yRWFjaCgoZikgPT4ge1xyXG4vLyAgICAgbWFwW2Yua2V5XSA9IGY7XHJcbi8vICAgfSk7XHJcbi8vICAgcmV0dXJuIG1hcDtcclxuLy8gfTtcclxuY29uc3QgZm9ybWF0bSA9IHt9O1xyXG5iYXNlRm9ybWF0cy5mb3JFYWNoKChmKSA9PiB7XHJcbiAgICBmb3JtYXRtW2Yua2V5XSA9IGY7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgZm9ybWF0bSwgYmFzZUZvcm1hdHMsIH07XHJcbiIsIi8qKlxyXG4gIGZvcm11bGE6XHJcbiAgICBrZXlcclxuICAgIHRpdGxlXHJcbiAgICByZW5kZXJcclxuKi9cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEZvcm11bGFcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleVxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSB0aXRsZVxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSByZW5kZXJcclxuICovXHJcbmltcG9ydCB7IHRmIH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7XHJcbmltcG9ydCB7IG51bWJlckNhbGMgfSBmcm9tICcuL2hlbHBlcic7XHJcbi8qKiBAdHlwZSB7Rm9ybXVsYVtdfSAqL1xyXG5jb25zdCBiYXNlRm9ybXVsYXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnU1VNJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEuc3VtJyksXHJcbiAgICAgICAgcmVuZGVyOiBhcnkgPT4gYXJ5LnJlZHVjZSgoYSwgYikgPT4gbnVtYmVyQ2FsYygnKycsIGEsIGIpLCAwKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnQVZFUkFHRScsXHJcbiAgICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLmF2ZXJhZ2UnKSxcclxuICAgICAgICByZW5kZXI6IGFyeSA9PiBhcnkucmVkdWNlKChhLCBiKSA9PiBOdW1iZXIoYSkgKyBOdW1iZXIoYiksIDApIC8gYXJ5Lmxlbmd0aCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnTUFYJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEubWF4JyksXHJcbiAgICAgICAgcmVuZGVyOiBhcnkgPT4gTWF0aC5tYXgoLi4uYXJ5Lm1hcCh2ID0+IE51bWJlcih2KSkpLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBrZXk6ICdNSU4nLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5taW4nKSxcclxuICAgICAgICByZW5kZXI6IGFyeSA9PiBNYXRoLm1pbiguLi5hcnkubWFwKHYgPT4gTnVtYmVyKHYpKSksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGtleTogJ0lGJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEuX2lmJyksXHJcbiAgICAgICAgcmVuZGVyOiAoW2IsIHQsIGZdKSA9PiAoYiA/IHQgOiBmKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnQU5EJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEuYW5kJyksXHJcbiAgICAgICAgcmVuZGVyOiBhcnkgPT4gYXJ5LmV2ZXJ5KGl0ID0+IGl0KSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnT1InLFxyXG4gICAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5vcicpLFxyXG4gICAgICAgIHJlbmRlcjogYXJ5ID0+IGFyeS5zb21lKGl0ID0+IGl0KSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAga2V5OiAnQ09OQ0FUJyxcclxuICAgICAgICB0aXRsZTogdGYoJ2Zvcm11bGEuY29uY2F0JyksXHJcbiAgICAgICAgcmVuZGVyOiBhcnkgPT4gYXJ5LmpvaW4oJycpLFxyXG4gICAgfSxcclxuICAgIC8qIHN1cHBvcnQ6ICAxICsgQTEgKyBCMiAqIDNcclxuICAgIHtcclxuICAgICAga2V5OiAnRElWSURFJyxcclxuICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLmRpdmlkZScpLFxyXG4gICAgICByZW5kZXI6IGFyeSA9PiBhcnkucmVkdWNlKChhLCBiKSA9PiBOdW1iZXIoYSkgLyBOdW1iZXIoYikpLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAga2V5OiAnUFJPRFVDVCcsXHJcbiAgICAgIHRpdGxlOiB0ZignZm9ybXVsYS5wcm9kdWN0JyksXHJcbiAgICAgIHJlbmRlcjogYXJ5ID0+IGFyeS5yZWR1Y2UoKGEsIGIpID0+IE51bWJlcihhKSAqIE51bWJlcihiKSwxKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGtleTogJ1NVQlRSQUNUJyxcclxuICAgICAgdGl0bGU6IHRmKCdmb3JtdWxhLnN1YnRyYWN0JyksXHJcbiAgICAgIHJlbmRlcjogYXJ5ID0+IGFyeS5yZWR1Y2UoKGEsIGIpID0+IE51bWJlcihhKSAtIE51bWJlcihiKSksXHJcbiAgICB9LFxyXG4gICAgKi9cclxuXTtcclxuY29uc3QgZm9ybXVsYXMgPSBiYXNlRm9ybXVsYXM7XHJcbi8vIGNvbnN0IGZvcm11bGFzID0gKGZvcm11bGFBcnkgPSBbXSkgPT4ge1xyXG4vLyAgIGNvbnN0IGZvcm11bGFNYXAgPSB7fTtcclxuLy8gICBiYXNlRm9ybXVsYXMuY29uY2F0KGZvcm11bGFBcnkpLmZvckVhY2goKGYpID0+IHtcclxuLy8gICAgIGZvcm11bGFNYXBbZi5rZXldID0gZjtcclxuLy8gICB9KTtcclxuLy8gICByZXR1cm4gZm9ybXVsYU1hcDtcclxuLy8gfTtcclxuY29uc3QgZm9ybXVsYW0gPSB7fTtcclxuYmFzZUZvcm11bGFzLmZvckVhY2goKGYpID0+IHtcclxuICAgIGZvcm11bGFtW2Yua2V5XSA9IGY7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgZm9ybXVsYW0sIGZvcm11bGFzLCBiYXNlRm9ybXVsYXMsIH07XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbmZ1bmN0aW9uIGNsb25lRGVlcChvYmopIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG59XHJcbmNvbnN0IG1lcmdlRGVlcCA9IChvYmplY3QgPSB7fSwgLi4uc291cmNlcykgPT4ge1xyXG4gICAgc291cmNlcy5mb3JFYWNoKChzb3VyY2UpID0+IHtcclxuICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gc291cmNlW2tleV07XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdrOicsIGtleSwgJywgdjonLCBzb3VyY2Vba2V5XSwgdHlwZW9mIHYsIHYgaW5zdGFuY2VvZiBPYmplY3QpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgdiA9PT0gJ251bWJlcicgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdiAhPT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkodikgJiZcclxuICAgICAgICAgICAgICAgIHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gb2JqZWN0W2tleV0gfHwge307XHJcbiAgICAgICAgICAgICAgICBtZXJnZURlZXAob2JqZWN0W2tleV0sIHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCc6OicsIG9iamVjdCk7XHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG59O1xyXG5mdW5jdGlvbiBlcXVhbHMob2JqMSwgb2JqMikge1xyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iajEpO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhvYmoyKS5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3QgayA9IGtleXNbaV07XHJcbiAgICAgICAgY29uc3QgdjEgPSBvYmoxW2tdO1xyXG4gICAgICAgIGNvbnN0IHYyID0gb2JqMltrXTtcclxuICAgICAgICBpZiAodjIgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdjEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIHR5cGVvZiB2MSA9PT0gJ251bWJlcicgfHxcclxuICAgICAgICAgICAgdHlwZW9mIHYxID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgaWYgKHYxICE9PSB2MilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2MSkpIHtcclxuICAgICAgICAgICAgaWYgKHYxLmxlbmd0aCAhPT0gdjIubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBhaSA9IDA7IGFpIDwgdjEubGVuZ3RoOyBhaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVxdWFscyh2MVthaV0sIHYyW2FpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2MSAhPT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh2MSkgJiZcclxuICAgICAgICAgICAgdjEgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKCFlcXVhbHModjEsIHYyKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKlxyXG4gIG9iak9yQXJ5OiBvYmVqY3Qgb3IgQXJyYXlcclxuICBjYjogKHZhbHVlLCBpbmRleCB8IGtleSkgPT4geyByZXR1cm4gdmFsdWUgfVxyXG4qL1xyXG5jb25zdCBzdW0gPSAob2JqT3JBcnksIGNiID0gKHZhbHVlLCBrKSA9PiB2YWx1ZSkgPT4ge1xyXG4gICAgbGV0IHRvdGFsID0gMDtcclxuICAgIGxldCBzaXplID0gMDtcclxuICAgIE9iamVjdC5rZXlzKG9iak9yQXJ5KS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICB0b3RhbCArPSBjYihvYmpPckFyeVtrZXldLCBrZXkpO1xyXG4gICAgICAgIHNpemUgKz0gMTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFt0b3RhbCwgc2l6ZV07XHJcbn07XHJcbmZ1bmN0aW9uIGRlbGV0ZVByb3BlcnR5KG9iaiwgcHJvcGVydHkpIHtcclxuICAgIGNvbnN0IG9sZHYgPSBvYmpbYCR7cHJvcGVydHl9YF07XHJcbiAgICBkZWxldGUgb2JqW2Ake3Byb3BlcnR5fWBdO1xyXG4gICAgcmV0dXJuIG9sZHY7XHJcbn1cclxuZnVuY3Rpb24gcmFuZ2VSZWR1Y2VJZihtaW4sIG1heCwgaW5pdHMsIGluaXR2LCBpZnYsIGdldHYpIHtcclxuICAgIGxldCBzID0gaW5pdHM7XHJcbiAgICBsZXQgdiA9IGluaXR2O1xyXG4gICAgbGV0IGkgPSBtaW47XHJcbiAgICBmb3IgKDsgaSA8IG1heDsgaSArPSAxKSB7XHJcbiAgICAgICAgaWYgKHMgPiBpZnYpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIHYgPSBnZXR2KGkpO1xyXG4gICAgICAgIHMgKz0gdjtcclxuICAgIH1cclxuICAgIHJldHVybiBbaSwgcyAtIHYsIHZdO1xyXG59XHJcbmZ1bmN0aW9uIHJhbmdlU3VtKG1pbiwgbWF4LCBnZXR2KSB7XHJcbiAgICBsZXQgcyA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gbWluOyBpIDwgbWF4OyBpICs9IDEpIHtcclxuICAgICAgICBzICs9IGdldHYoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcztcclxufVxyXG5mdW5jdGlvbiByYW5nZUVhY2gobWluLCBtYXgsIGNiKSB7XHJcbiAgICBmb3IgKGxldCBpID0gbWluOyBpIDwgbWF4OyBpICs9IDEpIHtcclxuICAgICAgICBjYihpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBhcnJheUVxdWFscyhhMSwgYTIpIHtcclxuICAgIGlmIChhMS5sZW5ndGggPT09IGEyLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgaWYgKGExW2ldICE9PSBhMltpXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gZGlnaXRzKGEpIHtcclxuICAgIGNvbnN0IHYgPSBgJHthfWA7XHJcbiAgICBsZXQgcmV0ID0gMDtcclxuICAgIGxldCBmbGFnID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoZmxhZyA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcmV0ICs9IDE7XHJcbiAgICAgICAgaWYgKHYuY2hhckF0KGkpID09PSAnLicpXHJcbiAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gbnVtYmVyQ2FsYyh0eXBlLCBhMSwgYTIpIHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4oYTEpIHx8IE51bWJlci5pc05hTihhMikpIHtcclxuICAgICAgICByZXR1cm4gYTEgKyB0eXBlICsgYTI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbDEgPSBkaWdpdHMoYTEpO1xyXG4gICAgY29uc3QgYWwyID0gZGlnaXRzKGEyKTtcclxuICAgIGNvbnN0IG51bTEgPSBOdW1iZXIoYTEpO1xyXG4gICAgY29uc3QgbnVtMiA9IE51bWJlcihhMik7XHJcbiAgICBsZXQgcmV0ID0gMDtcclxuICAgIGlmICh0eXBlID09PSAnLScpIHtcclxuICAgICAgICByZXQgPSBudW0xIC0gbnVtMjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICcrJykge1xyXG4gICAgICAgIHJldCA9IG51bTEgKyBudW0yO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJyonKSB7XHJcbiAgICAgICAgcmV0ID0gbnVtMSAqIG51bTI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnLycpIHtcclxuICAgICAgICByZXQgPSBudW0xIC8gbnVtMjtcclxuICAgICAgICBpZiAoZGlnaXRzKHJldCkgPiA1KVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0LnRvRml4ZWQoMik7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXQudG9GaXhlZChNYXRoLm1heChhbDEsIGFsMikpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGNsb25lRGVlcCxcclxuICAgIG1lcmdlOiAoLi4uc291cmNlcykgPT4gbWVyZ2VEZWVwKHt9LCAuLi5zb3VyY2VzKSxcclxuICAgIGVxdWFscyxcclxuICAgIGFycmF5RXF1YWxzLFxyXG4gICAgc3VtLFxyXG4gICAgcmFuZ2VFYWNoLFxyXG4gICAgcmFuZ2VTdW0sXHJcbiAgICByYW5nZVJlZHVjZUlmLFxyXG4gICAgZGVsZXRlUHJvcGVydHksXHJcbiAgICBudW1iZXJDYWxjLFxyXG59O1xyXG4iLCIvLyBpbXBvcnQgaGVscGVyIGZyb20gJy4uL2hlbHBlcic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpc3Rvcnkge1xyXG4gICAgdW5kb0l0ZW1zO1xyXG4gICAgcmVkb0l0ZW1zO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy51bmRvSXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlZG9JdGVtcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgYWRkKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnVuZG9JdGVtcy5wdXNoKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICB0aGlzLnJlZG9JdGVtcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgY2FuVW5kbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmRvSXRlbXMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuICAgIGNhblJlZG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVkb0l0ZW1zLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICB1bmRvKGN1cnJlbnRkLCBjYikge1xyXG4gICAgICAgIGNvbnN0IHsgdW5kb0l0ZW1zLCByZWRvSXRlbXMgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuVW5kbygpKSB7XHJcbiAgICAgICAgICAgIHJlZG9JdGVtcy5wdXNoKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRkKSk7XHJcbiAgICAgICAgICAgIGNiKEpTT04ucGFyc2UodW5kb0l0ZW1zLnBvcCgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVkbyhjdXJyZW50ZCwgY2IpIHtcclxuICAgICAgICBjb25zdCB7IHVuZG9JdGVtcywgcmVkb0l0ZW1zIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhblJlZG8oKSkge1xyXG4gICAgICAgICAgICB1bmRvSXRlbXMucHVzaChKU09OLnN0cmluZ2lmeShjdXJyZW50ZCkpO1xyXG4gICAgICAgICAgICBjYihKU09OLnBhcnNlKHJlZG9JdGVtcy5wb3AoKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDZWxsUmFuZ2UgfSBmcm9tICcuL2NlbGxfcmFuZ2UnO1xyXG5jbGFzcyBNZXJnZXMge1xyXG4gICAgXztcclxuICAgIGNvbnN0cnVjdG9yKGQgPSBbXSkge1xyXG4gICAgICAgIHRoaXMuXyA9IGQ7XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoKGNiKSB7XHJcbiAgICAgICAgdGhpcy5fLmZvckVhY2goY2IpO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlV2l0aGluKGNyKSB7XHJcbiAgICAgICAgdGhpcy5fID0gdGhpcy5fLmZpbHRlcihpdCA9PiAhaXQud2l0aGluKGNyKSk7XHJcbiAgICB9XHJcbiAgICBnZXRGaXJzdEluY2x1ZGVzKHJpLCBjaSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ID0gdGhpcy5fW2ldO1xyXG4gICAgICAgICAgICBpZiAoaXQuaW5jbHVkZXMocmksIGNpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZmlsdGVySW50ZXJzZWN0cyhjZWxsUmFuZ2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1lcmdlcyh0aGlzLl8uZmlsdGVyKGl0ID0+IGl0LmludGVyc2VjdHMoY2VsbFJhbmdlKSkpO1xyXG4gICAgfVxyXG4gICAgaW50ZXJzZWN0cyhjZWxsUmFuZ2UpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuXy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpdCA9IHRoaXMuX1tpXTtcclxuICAgICAgICAgICAgaWYgKGl0LmludGVyc2VjdHMoY2VsbFJhbmdlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ludGVyc2VjdHMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHVuaW9uKGNlbGxSYW5nZSkge1xyXG4gICAgICAgIGxldCBjciA9IGNlbGxSYW5nZTtcclxuICAgICAgICB0aGlzLl8uZm9yRWFjaCgoaXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0LmludGVyc2VjdHMoY3IpKSB7XHJcbiAgICAgICAgICAgICAgICBjciA9IGl0LnVuaW9uKGNyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcjtcclxuICAgIH1cclxuICAgIGFkZChjcikge1xyXG4gICAgICAgIHRoaXMuZGVsZXRlV2l0aGluKGNyKTtcclxuICAgICAgICB0aGlzLl8ucHVzaChjcik7XHJcbiAgICB9XHJcbiAgICAvLyB0eXBlOiByb3cgfCBjb2x1bW5cclxuICAgIHNoaWZ0KHR5cGUsIGluZGV4LCBuLCBjYldpdGhpbikge1xyXG4gICAgICAgIHRoaXMuXy5mb3JFYWNoKChjZWxsUmFuZ2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2ksIH0gPSBjZWxsUmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gY2VsbFJhbmdlO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3JvdycpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcmkgPj0gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZS5zcmkgKz0gbjtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZS5lcmkgKz0gbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNyaSA8IGluZGV4ICYmIGluZGV4IDw9IGVyaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLmVyaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGNiV2l0aGluKHNyaSwgc2NpLCBuLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnY29sdW1uJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjaSA+PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNjaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLmVjaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2NpIDwgaW5kZXggJiYgaW5kZXggPD0gZWNpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UuZWNpICs9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgY2JXaXRoaW4oc3JpLCBzY2ksIDAsIG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBtb3ZlKGNlbGxSYW5nZSwgcm4sIGNuKSB7XHJcbiAgICAgICAgdGhpcy5fLmZvckVhY2goKGl0MSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpdCA9IGl0MTtcclxuICAgICAgICAgICAgaWYgKGl0LndpdGhpbihjZWxsUmFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICBpdC5lcmkgKz0gcm47XHJcbiAgICAgICAgICAgICAgICBpdC5zcmkgKz0gcm47XHJcbiAgICAgICAgICAgICAgICBpdC5zY2kgKz0gY247XHJcbiAgICAgICAgICAgICAgICBpdC5lY2kgKz0gY247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNldERhdGEobWVyZ2VzKSB7XHJcbiAgICAgICAgdGhpcy5fID0gbWVyZ2VzLm1hcChtZXJnZSA9PiBDZWxsUmFuZ2UudmFsdWVPZihtZXJnZSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fLm1hcChtZXJnZSA9PiBtZXJnZS50b1N0cmluZygpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgTWVyZ2VzLCB9O1xyXG4iLCJpbXBvcnQgaGVscGVyIGZyb20gJy4vaGVscGVyJztcclxuaW1wb3J0IHsgZXhwcjJleHByIH0gZnJvbSAnLi9hbHBoYWJldCc7XHJcbmNsYXNzIFJvd3Mge1xyXG4gICAgXztcclxuICAgIGxlbjtcclxuICAgIGhlaWdodDtcclxuICAgIGNvbnN0cnVjdG9yKHsgbGVuLCBoZWlnaHQgfSkge1xyXG4gICAgICAgIHRoaXMuXyA9IHt9O1xyXG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xyXG4gICAgICAgIC8vIGRlZmF1bHQgcm93IGhlaWdodFxyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgZ2V0SGVpZ2h0KHJpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRlKHJpKSlcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXQocmkpO1xyXG4gICAgICAgIGlmIChyb3cgJiYgcm93LmhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcm93LmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgc2V0SGVpZ2h0KHJpLCB2KSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRPck5ldyhyaSk7XHJcbiAgICAgICAgcm93LmhlaWdodCA9IHY7XHJcbiAgICB9XHJcbiAgICB1bmhpZGUoaWR4KSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gaWR4O1xyXG4gICAgICAgIHdoaWxlIChpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgaW5kZXggLT0gMTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNIaWRlKGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaWRlKGluZGV4LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNIaWRlKHJpKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXQocmkpO1xyXG4gICAgICAgIHJldHVybiByb3cgJiYgcm93LmhpZGU7XHJcbiAgICB9XHJcbiAgICBzZXRIaWRlKHJpLCB2KSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRPck5ldyhyaSk7XHJcbiAgICAgICAgaWYgKHYgPT09IHRydWUpXHJcbiAgICAgICAgICAgIHJvdy5oaWRlID0gdHJ1ZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGRlbGV0ZSByb3cuaGlkZTtcclxuICAgIH1cclxuICAgIHNldFN0eWxlKHJpLCBzdHlsZSkge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0T3JOZXcocmkpO1xyXG4gICAgICAgIHJvdy5zdHlsZSA9IHN0eWxlO1xyXG4gICAgfVxyXG4gICAgc3VtSGVpZ2h0KG1pbiwgbWF4LCBleGNlcHRTZXQpIHtcclxuICAgICAgICByZXR1cm4gaGVscGVyLnJhbmdlU3VtKG1pbiwgbWF4LCAoaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXhjZXB0U2V0ICYmIGV4Y2VwdFNldC5oYXMoaSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVpZ2h0KGkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdG90YWxIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VtSGVpZ2h0KDAsIHRoaXMubGVuKTtcclxuICAgIH1cclxuICAgIGdldChyaSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9bcmldO1xyXG4gICAgfVxyXG4gICAgZ2V0T3JOZXcocmkpIHtcclxuICAgICAgICB0aGlzLl9bcmldID0gdGhpcy5fW3JpXSB8fCB7IGNlbGxzOiB7fSB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9bcmldO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbChyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldChyaSk7XHJcbiAgICAgICAgaWYgKHJvdyAhPT0gdW5kZWZpbmVkICYmIHJvdy5jZWxscyAhPT0gdW5kZWZpbmVkICYmIHJvdy5jZWxsc1tjaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcm93LmNlbGxzW2NpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsTWVyZ2UocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwubWVyZ2UpXHJcbiAgICAgICAgICAgIHJldHVybiBjZWxsLm1lcmdlO1xyXG4gICAgICAgIHJldHVybiBbMCwgMF07XHJcbiAgICB9XHJcbiAgICBnZXRDZWxsT3JOZXcocmksIGNpKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRPck5ldyhyaSk7XHJcbiAgICAgICAgcm93LmNlbGxzW2NpXSA9IHJvdy5jZWxsc1tjaV0gfHwge307XHJcbiAgICAgICAgcmV0dXJuIHJvdy5jZWxsc1tjaV07XHJcbiAgICB9XHJcbiAgICAvLyB3aGF0OiBhbGwgfCB0ZXh0IHwgZm9ybWF0XHJcbiAgICBzZXRDZWxsKHJpLCBjaSwgY2VsbCwgd2hhdCA9ICdhbGwnKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRPck5ldyhyaSk7XHJcbiAgICAgICAgaWYgKHdoYXQgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgIHJvdy5jZWxsc1tjaV0gPSBjZWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh3aGF0ID09PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXSA9IHJvdy5jZWxsc1tjaV0gfHwge307XHJcbiAgICAgICAgICAgIHJvdy5jZWxsc1tjaV0udGV4dCA9IGNlbGwudGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2hhdCA9PT0gJ2Zvcm1hdCcpIHtcclxuICAgICAgICAgICAgcm93LmNlbGxzW2NpXSA9IHJvdy5jZWxsc1tjaV0gfHwge307XHJcbiAgICAgICAgICAgIHJvdy5jZWxsc1tjaV0uc3R5bGUgPSBjZWxsLnN0eWxlO1xyXG4gICAgICAgICAgICBpZiAoY2VsbC5tZXJnZSlcclxuICAgICAgICAgICAgICAgIHJvdy5jZWxsc1tjaV0ubWVyZ2UgPSBjZWxsLm1lcmdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldENlbGxUZXh0KHJpLCBjaSwgdGV4dCkge1xyXG4gICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmdldENlbGxPck5ldyhyaSwgY2kpO1xyXG4gICAgICAgIGlmIChjZWxsLmVkaXRhYmxlICE9PSBmYWxzZSlcclxuICAgICAgICAgICAgY2VsbC50ZXh0ID0gdGV4dDtcclxuICAgIH1cclxuICAgIC8vIHdoYXQ6IGFsbCB8IGZvcm1hdCB8IHRleHRcclxuICAgIGNvcHlQYXN0ZShzcmNDZWxsUmFuZ2UsIGRzdENlbGxSYW5nZSwgd2hhdCwgYXV0b2ZpbGwgPSBmYWxzZSwgY2IgPSAoLi4uYXJncykgPT4geyB9KSB7XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSwgZXJpLCBlY2ksIH0gPSBzcmNDZWxsUmFuZ2U7XHJcbiAgICAgICAgY29uc3QgZHNyaSA9IGRzdENlbGxSYW5nZS5zcmk7XHJcbiAgICAgICAgY29uc3QgZHNjaSA9IGRzdENlbGxSYW5nZS5zY2k7XHJcbiAgICAgICAgY29uc3QgZGVyaSA9IGRzdENlbGxSYW5nZS5lcmk7XHJcbiAgICAgICAgY29uc3QgZGVjaSA9IGRzdENlbGxSYW5nZS5lY2k7XHJcbiAgICAgICAgY29uc3QgW3JuLCBjbl0gPSBzcmNDZWxsUmFuZ2Uuc2l6ZSgpO1xyXG4gICAgICAgIGNvbnN0IFtkcm4sIGRjbl0gPSBkc3RDZWxsUmFuZ2Uuc2l6ZSgpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNyY0luZGV4ZXMsIGRzdEluZGV4ZXMpO1xyXG4gICAgICAgIGxldCBpc0FkZCA9IHRydWU7XHJcbiAgICAgICAgbGV0IGRuID0gMDtcclxuICAgICAgICBpZiAoZGVyaSA8IHNyaSB8fCBkZWNpIDwgc2NpKSB7XHJcbiAgICAgICAgICAgIGlzQWRkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChkZXJpIDwgc3JpKVxyXG4gICAgICAgICAgICAgICAgZG4gPSBkcm47XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRuID0gZGNuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gc3JpOyBpIDw9IGVyaTsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9baV0pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBzY2k7IGogPD0gZWNpOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fW2ldLmNlbGxzICYmIHRoaXMuX1tpXS5jZWxsc1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpaSA9IGRzcmk7IGlpIDw9IGRlcmk7IGlpICs9IHJuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqaiA9IGRzY2k7IGpqIDw9IGRlY2k7IGpqICs9IGNuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnJpID0gaWkgKyAoaSAtIHNyaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmNpID0gamogKyAoaiAtIHNjaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmNlbGwgPSBoZWxwZXIuY2xvbmVEZWVwKHRoaXMuX1tpXS5jZWxsc1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmNlbGwudGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRvZmlsbCAmJiBuY2VsbCAmJiBuY2VsbC50ZXh0ICYmIG5jZWxsLnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRleHQgfSA9IG5jZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IChqaiAtIGRzY2kpICsgKGlpIC0gZHNyaSkgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuIC09IGRuICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dFswXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuY2VsbC50ZXh0ID0gdGV4dC5yZXBsYWNlKC9bYS16QS1aXXsxLDN9XFxkKy9nLCAod29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBbeG4sIHluXSA9IFswLCAwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JpID09PSBkc3JpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhuID0gbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChpc0FkZCkgeG4gLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHluID0gbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXlxcZCskLy50ZXN0KHdvcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29yZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwcjJleHByKHdvcmQsIHhuLCB5bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocm4gPD0gMSAmJiBjbiA+IDEgJiYgKGRzcmkgPiBlcmkgfHwgZGVyaSA8IHNyaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoY24gPD0gMSAmJiBybiA+IDEgJiYgKGRzY2kgPiBlY2kgfHwgZGVjaSA8IHNjaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAocm4gPD0gMSAmJiBjbiA8PSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gL1tcXFxcLlxcZF0rJC8uZXhlYyh0ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXN1bHQ6JywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihyZXN1bHRbMF0pICsgbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmNlbGwudGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIHJlc3VsdC5pbmRleCkgKyBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGwobnJpLCBuY2ksIG5jZWxsLCB3aGF0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihucmksIG5jaSwgbmNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3V0UGFzdGUoc3JjQ2VsbFJhbmdlLCBkc3RDZWxsUmFuZ2UpIHtcclxuICAgICAgICBjb25zdCBuY2VsbG1tID0ge307XHJcbiAgICAgICAgdGhpcy5lYWNoKChyaSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVhY2hDZWxscyhyaSwgKGNpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbnJpID0gcGFyc2VJbnQocmksIDEwKTtcclxuICAgICAgICAgICAgICAgIGxldCBuY2kgPSBwYXJzZUludChjaSwgMTApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNyY0NlbGxSYW5nZS5pbmNsdWRlcyhyaSwgY2kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnJpID0gZHN0Q2VsbFJhbmdlLnNyaSArIChucmkgLSBzcmNDZWxsUmFuZ2Uuc3JpKTtcclxuICAgICAgICAgICAgICAgICAgICBuY2kgPSBkc3RDZWxsUmFuZ2Uuc2NpICsgKG5jaSAtIHNyY0NlbGxSYW5nZS5zY2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmNlbGxtbVtucmldID0gbmNlbGxtbVtucmldIHx8IHsgY2VsbHM6IHt9IH07XHJcbiAgICAgICAgICAgICAgICBuY2VsbG1tW25yaV0uY2VsbHNbbmNpXSA9IHRoaXMuX1tyaV0uY2VsbHNbY2ldO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8gPSBuY2VsbG1tO1xyXG4gICAgfVxyXG4gICAgLy8gc3JjOiBBcnJheTxBcnJheTxTdHJpbmc+PlxyXG4gICAgcGFzdGUoc3JjLCBkc3RDZWxsUmFuZ2UpIHtcclxuICAgICAgICBpZiAoc3JjLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeyBzcmksIHNjaSB9ID0gZHN0Q2VsbFJhbmdlO1xyXG4gICAgICAgIHNyYy5mb3JFYWNoKChyb3csIGkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmkgPSBzcmkgKyBpO1xyXG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY2VsbCwgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2kgPSBzY2kgKyBqO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDZWxsVGV4dChyaSwgY2ksIGNlbGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGluc2VydChzcmksIG4gPSAxKSB7XHJcbiAgICAgICAgY29uc3QgbmRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmVhY2goKHJpLCByb3cpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5yaSA9IHBhcnNlSW50KHJpLCAxMCk7XHJcbiAgICAgICAgICAgIGlmIChucmkgPj0gc3JpKSB7XHJcbiAgICAgICAgICAgICAgICBucmkgKz0gbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWFjaENlbGxzKHJpLCAoY2ksIGNlbGwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC50ZXh0ICYmIGNlbGwudGV4dFswXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGNlbGwudGV4dC5yZXBsYWNlKC9bYS16QS1aXXsxLDN9XFxkKy9nLCB3b3JkID0+IGV4cHIyZXhwcih3b3JkLCAwLCBuLCAoeCwgeSkgPT4geSA+PSBzcmkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZGF0YVtucmldID0gcm93O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyA9IG5kYXRhO1xyXG4gICAgICAgIHRoaXMubGVuICs9IG47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoc3JpLCBlcmkpIHtcclxuICAgICAgICBjb25zdCBuID0gZXJpIC0gc3JpICsgMTtcclxuICAgICAgICBjb25zdCBuZGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuZWFjaCgocmksIHJvdykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBucmkgPSBwYXJzZUludChyaSwgMTApO1xyXG4gICAgICAgICAgICBpZiAobnJpIDwgc3JpKSB7XHJcbiAgICAgICAgICAgICAgICBuZGF0YVtucmldID0gcm93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJpID4gZXJpKSB7XHJcbiAgICAgICAgICAgICAgICBuZGF0YVtucmkgLSBuXSA9IHJvdztcclxuICAgICAgICAgICAgICAgIHRoaXMuZWFjaENlbGxzKHJpLCAoY2ksIGNlbGwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC50ZXh0ICYmIGNlbGwudGV4dFswXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGNlbGwudGV4dC5yZXBsYWNlKC9bYS16QS1aXXsxLDN9XFxkKy9nLCB3b3JkID0+IGV4cHIyZXhwcih3b3JkLCAwLCAtbiwgKHgsIHkpID0+IHkgPiBlcmkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyA9IG5kYXRhO1xyXG4gICAgICAgIHRoaXMubGVuIC09IG47XHJcbiAgICB9XHJcbiAgICBpbnNlcnRDb2x1bW4oc2NpLCBuID0gMSkge1xyXG4gICAgICAgIHRoaXMuZWFjaCgocmksIHJvdykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBybmRhdGEgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5lYWNoQ2VsbHMocmksIChjaSwgY2VsbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5jaSA9IHBhcnNlSW50KGNpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmNpID49IHNjaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5jaSArPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnRleHQgJiYgY2VsbC50ZXh0WzBdID09PSAnPScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC50ZXh0ID0gY2VsbC50ZXh0LnJlcGxhY2UoL1thLXpBLVpdezEsM31cXGQrL2csIHdvcmQgPT4gZXhwcjJleHByKHdvcmQsIG4sIDAsIHggPT4geCA+PSBzY2kpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBybmRhdGFbbmNpXSA9IGNlbGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByb3cuY2VsbHMgPSBybmRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBkZWxldGVDb2x1bW4oc2NpLCBlY2kpIHtcclxuICAgICAgICBjb25zdCBuID0gZWNpIC0gc2NpICsgMTtcclxuICAgICAgICB0aGlzLmVhY2goKHJpLCByb3cpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm5kYXRhID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuZWFjaENlbGxzKHJpLCAoY2ksIGNlbGwpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5jaSA9IHBhcnNlSW50KGNpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmNpIDwgc2NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm5kYXRhW25jaV0gPSBjZWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobmNpID4gZWNpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm5kYXRhW25jaSAtIG5dID0gY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC50ZXh0ICYmIGNlbGwudGV4dFswXSA9PT0gJz0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudGV4dCA9IGNlbGwudGV4dC5yZXBsYWNlKC9bYS16QS1aXXsxLDN9XFxkKy9nLCB3b3JkID0+IGV4cHIyZXhwcih3b3JkLCAtbiwgMCwgeCA9PiB4ID4gZWNpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcm93LmNlbGxzID0gcm5kYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gd2hhdDogYWxsIHwgdGV4dCB8IGZvcm1hdCB8IG1lcmdlXHJcbiAgICBkZWxldGVDZWxscyhjZWxsUmFuZ2UsIHdoYXQgPSAnYWxsJykge1xyXG4gICAgICAgIGNlbGxSYW5nZS5lYWNoKChpLCBqKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlQ2VsbChpLCBqLCB3aGF0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIHdoYXQ6IGFsbCB8IHRleHQgfCBmb3JtYXQgfCBtZXJnZVxyXG4gICAgZGVsZXRlQ2VsbChyaSwgY2ksIHdoYXQgPSAnYWxsJykge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0KHJpKTtcclxuICAgICAgICBpZiAocm93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmdldENlbGwocmksIGNpKTtcclxuICAgICAgICAgICAgaWYgKGNlbGwgIT09IG51bGwgJiYgY2VsbC5lZGl0YWJsZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh3aGF0ID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3cuY2VsbHNbY2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2hhdCA9PT0gJ3RleHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNlbGwudGV4dDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNlbGwudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh3aGF0ID09PSAnZm9ybWF0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnN0eWxlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjZWxsLnN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLm1lcmdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2VsbC5tZXJnZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdoYXQgPT09ICdtZXJnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5tZXJnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNlbGwubWVyZ2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBtYXhDZWxsKCkge1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl8pO1xyXG4gICAgICAgIGNvbnN0IHJpID0ga2V5c1trZXlzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuX1tyaV07XHJcbiAgICAgICAgaWYgKGNvbCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGNlbGxzIH0gPSBjb2w7XHJcbiAgICAgICAgICAgIGNvbnN0IGtzID0gT2JqZWN0LmtleXMoY2VsbHMpO1xyXG4gICAgICAgICAgICBjb25zdCBjaSA9IGtzW2tzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICByZXR1cm4gW3BhcnNlSW50KHJpLCAxMCksIHBhcnNlSW50KGNpLCAxMCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWzAsIDBdO1xyXG4gICAgfVxyXG4gICAgZWFjaChjYikge1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuXykuZm9yRWFjaCgoW3JpLCByb3ddKSA9PiB7XHJcbiAgICAgICAgICAgIGNiKHJpLCByb3cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWFjaENlbGxzKHJpLCBjYikge1xyXG4gICAgICAgIGlmICh0aGlzLl9bcmldICYmIHRoaXMuX1tyaV0uY2VsbHMpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5fW3JpXS5jZWxscykuZm9yRWFjaCgoW2NpLCBjZWxsXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2IoY2ksIGNlbGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKGQpIHtcclxuICAgICAgICBpZiAoZC5sZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5sZW4gPSBkLmxlbjtcclxuICAgICAgICAgICAgZGVsZXRlIGQubGVuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8gPSBkO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICBjb25zdCB7IGxlbiB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IGxlbiB9LCB0aGlzLl8pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG5leHBvcnQgeyBSb3dzLCB9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTY3JvbGwge1xyXG4gICAgeDtcclxuICAgIHk7XHJcbiAgICByaTtcclxuICAgIGNpO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy54ID0gMDsgLy8gbGVmdFxyXG4gICAgICAgIHRoaXMueSA9IDA7IC8vIHRvcFxyXG4gICAgICAgIHRoaXMucmkgPSAwOyAvLyBjZWxsIHJvdy1pbmRleFxyXG4gICAgICAgIHRoaXMuY2kgPSAwOyAvLyBjZWxsIGNvbC1pbmRleFxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENlbGxSYW5nZSB9IGZyb20gJy4vY2VsbF9yYW5nZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdG9yIHtcclxuICAgIHJhbmdlO1xyXG4gICAgcmk7XHJcbiAgICBjaTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSBuZXcgQ2VsbFJhbmdlKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMucmkgPSAwO1xyXG4gICAgICAgIHRoaXMuY2kgPSAwO1xyXG4gICAgfVxyXG4gICAgbXVsdGlwbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2UubXVsdGlwbGUoKTtcclxuICAgIH1cclxuICAgIHNldEluZGV4ZXMocmksIGNpKSB7XHJcbiAgICAgICAgdGhpcy5yaSA9IHJpO1xyXG4gICAgICAgIHRoaXMuY2kgPSBjaTtcclxuICAgIH1cclxuICAgIHNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2Uuc2l6ZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSAnLi92YWxpZGF0b3InO1xyXG5pbXBvcnQgeyBDZWxsUmFuZ2UgfSBmcm9tICcuL2NlbGxfcmFuZ2UnO1xyXG5jbGFzcyBWYWxpZGF0aW9uIHtcclxuICAgIHJlZnM7XHJcbiAgICBtb2RlO1xyXG4gICAgdmFsaWRhdG9yO1xyXG4gICAgY29uc3RydWN0b3IobW9kZSwgcmVmcywgdmFsaWRhdG9yKSB7XHJcbiAgICAgICAgdGhpcy5yZWZzID0gcmVmcztcclxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlOyAvLyBjZWxsXHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3IgPSB2YWxpZGF0b3I7XHJcbiAgICB9XHJcbiAgICBpbmNsdWRlcyhyaSwgY2kpIHtcclxuICAgICAgICBjb25zdCB7IHJlZnMgfSA9IHRoaXM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWZzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyID0gQ2VsbFJhbmdlLnZhbHVlT2YocmVmc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChjci5pbmNsdWRlcyhyaSwgY2kpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFkZFJlZihyZWYpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZShDZWxsUmFuZ2UudmFsdWVPZihyZWYpKTtcclxuICAgICAgICB0aGlzLnJlZnMucHVzaChyZWYpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKGNlbGxSYW5nZSkge1xyXG4gICAgICAgIGNvbnN0IG5yZWZzID0gW107XHJcbiAgICAgICAgdGhpcy5yZWZzLmZvckVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyID0gQ2VsbFJhbmdlLnZhbHVlT2YoaXQpO1xyXG4gICAgICAgICAgICBpZiAoY3IuaW50ZXJzZWN0cyhjZWxsUmFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcnMgPSBjci5kaWZmZXJlbmNlKGNlbGxSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICBjcnMuZm9yRWFjaChpdDEgPT4gbnJlZnMucHVzaChpdDEudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnJlZnMucHVzaChpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlZnMgPSBucmVmcztcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZzLCBtb2RlLCB2YWxpZGF0b3IgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCByZXF1aXJlZCwgb3BlcmF0b3IsIHZhbHVlLCB9ID0gdmFsaWRhdG9yO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlZnMsIG1vZGUsIHR5cGUsIHJlcXVpcmVkLCBvcGVyYXRvciwgdmFsdWUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB2YWx1ZU9mKHsgcmVmcywgbW9kZSwgdHlwZSwgcmVxdWlyZWQsIG9wZXJhdG9yLCB2YWx1ZSwgfSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvbihtb2RlLCByZWZzLCBuZXcgVmFsaWRhdG9yKHR5cGUsIHJlcXVpcmVkLCB2YWx1ZSwgb3BlcmF0b3IpKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBWYWxpZGF0aW9ucyB7XHJcbiAgICBfO1xyXG4gICAgZXJyb3JzO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fID0gW107XHJcbiAgICAgICAgLy8gcmlfY2k6IGVyck1lc3NhZ2VcclxuICAgICAgICB0aGlzLmVycm9ycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGdldEVycm9yKHJpLCBjaSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVycm9ycy5nZXQoYCR7cml9XyR7Y2l9YCk7XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZShyaSwgY2ksIHRleHQpIHtcclxuICAgICAgICBjb25zdCB2ID0gdGhpcy5nZXQocmksIGNpKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBgJHtyaX1fJHtjaX1gO1xyXG4gICAgICAgIGNvbnN0IHsgZXJyb3JzIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh2ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtmbGFnLCBtZXNzYWdlXSA9IHYudmFsaWRhdG9yLnZhbGlkYXRlKHRleHQpO1xyXG4gICAgICAgICAgICBpZiAoIWZsYWcpIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5zZXQoa2V5LCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3JzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIHR5cGU6IGRhdGV8bnVtYmVyfHBob25lfGVtYWlsfGxpc3RcclxuICAgIC8vIHZhbGlkYXRvcjogeyByZXF1aXJlZCwgdmFsdWUsIG9wZXJhdG9yIH1cclxuICAgIGFkZChtb2RlLCByZWYsIHsgdHlwZSwgcmVxdWlyZWQsIHZhbHVlLCBvcGVyYXRvciwgfSkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3IodHlwZSwgcmVxdWlyZWQsIHZhbHVlLCBvcGVyYXRvcik7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0QnlWYWxpZGF0b3IodmFsaWRhdG9yKTtcclxuICAgICAgICBpZiAodiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2LmFkZFJlZihyZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fLnB1c2gobmV3IFZhbGlkYXRpb24obW9kZSwgW3JlZl0sIHZhbGlkYXRvcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEJ5VmFsaWRhdG9yKHZhbGlkYXRvcikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLl9baV07XHJcbiAgICAgICAgICAgIGlmICh2LnZhbGlkYXRvci5lcXVhbHModmFsaWRhdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQocmksIGNpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl8ubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuX1tpXTtcclxuICAgICAgICAgICAgaWYgKHYuaW5jbHVkZXMocmksIGNpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZShjZWxsUmFuZ2UpIHtcclxuICAgICAgICB0aGlzLmVhY2goKGl0KSA9PiB7XHJcbiAgICAgICAgICAgIGl0LnJlbW92ZShjZWxsUmFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWFjaChjYikge1xyXG4gICAgICAgIHRoaXMuXy5mb3JFYWNoKGl0ID0+IGNiKGl0KSk7XHJcbiAgICB9XHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl8uZmlsdGVyKGl0ID0+IGl0LnJlZnMubGVuZ3RoID4gMCkubWFwKGl0ID0+IGl0LmdldERhdGEoKSk7XHJcbiAgICB9XHJcbiAgICBzZXREYXRhKGQpIHtcclxuICAgICAgICB0aGlzLl8gPSBkLm1hcChpdCA9PiBWYWxpZGF0aW9uLnZhbHVlT2YoaXQpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuZXhwb3J0IHsgVmFsaWRhdGlvbnMsIH07XHJcbiIsImltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJztcclxuaW1wb3J0IGhlbHBlciBmcm9tICcuL2hlbHBlcic7XHJcbmNvbnN0IHJ1bGVzID0ge1xyXG4gICAgcGhvbmU6IC9eWzEtOV1cXGR7MTB9JC8sXHJcbiAgICBlbWFpbDogL3crKFstKy5ddyspKkB3KyhbLS5ddyspKi53KyhbLS5ddyspKi8sXHJcbn07XHJcbmZ1bmN0aW9uIHJldHVybk1lc3NhZ2UoZmxhZywga2V5LCAuLi5hcmcpIHtcclxuICAgIGxldCBtZXNzYWdlID0gJyc7XHJcbiAgICBpZiAoIWZsYWcpIHtcclxuICAgICAgICBtZXNzYWdlID0gdChgdmFsaWRhdGlvbi4ke2tleX1gLCAuLi5hcmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtmbGFnLCBtZXNzYWdlXTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYWxpZGF0b3Ige1xyXG4gICAgcmVxdWlyZWQ7XHJcbiAgICB2YWx1ZTtcclxuICAgIHR5cGU7XHJcbiAgICBvcGVyYXRvcjtcclxuICAgIG1lc3NhZ2U7XHJcbiAgICAvLyBvcGVyYXRvcjogYnxuYnxlcXxuZXF8bHR8bHRlfGd0fGd0ZVxyXG4gICAgLy8gdHlwZTogZGF0ZXxudW1iZXJ8bGlzdHxwaG9uZXxlbWFpbFxyXG4gICAgY29uc3RydWN0b3IodHlwZSwgcmVxdWlyZWQsIHZhbHVlLCBvcGVyYXRvcikge1xyXG4gICAgICAgIHRoaXMucmVxdWlyZWQgPSByZXF1aXJlZDtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJyc7XHJcbiAgICB9XHJcbiAgICBwYXJzZVZhbHVlKHYpIHtcclxuICAgICAgICBjb25zdCB7IHR5cGUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdkYXRlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH1cclxuICAgIGVxdWFscyhvdGhlcikge1xyXG4gICAgICAgIGxldCBmbGFnID0gdGhpcy50eXBlID09PSBvdGhlci50eXBlXHJcbiAgICAgICAgICAgICYmIHRoaXMucmVxdWlyZWQgPT09IG90aGVyLnJlcXVpcmVkXHJcbiAgICAgICAgICAgICYmIHRoaXMub3BlcmF0b3IgPT09IG90aGVyLm9wZXJhdG9yO1xyXG4gICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gaGVscGVyLmFycmF5RXF1YWxzKHRoaXMudmFsdWUsIG90aGVyLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmxhZztcclxuICAgIH1cclxuICAgIHZhbHVlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGxpdCgnLCcpO1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGUodikge1xyXG4gICAgICAgIGNvbnN0IHsgcmVxdWlyZWQsIG9wZXJhdG9yLCB2YWx1ZSwgdHlwZSwgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHJlcXVpcmVkICYmIC9eXFxzKiQvLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UoZmFsc2UsICdyZXF1aXJlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoL15cXHMqJC8udGVzdCh2KSlcclxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlXTtcclxuICAgICAgICBpZiAocnVsZXNbdHlwZV0gJiYgIXJ1bGVzW3R5cGVdLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UoZmFsc2UsICdub3RNYXRjaCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHRoaXMudmFsdWVzKCkuaW5jbHVkZXModiksICdub3RJbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgY29uc3QgdjEgPSB0aGlzLnBhcnNlVmFsdWUodik7XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2JlJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVybk1lc3NhZ2UodjEgPj0gdGhpcy5wYXJzZVZhbHVlKG1pbikgJiYgdjEgPD0gdGhpcy5wYXJzZVZhbHVlKG1heCksICdiZXR3ZWVuJywgbWluLCBtYXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ25iZScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxIDwgdGhpcy5wYXJzZVZhbHVlKG1pbikgfHwgdjEgPiB0aGlzLnBhcnNlVmFsdWUobWF4KSwgJ25vdEJldHdlZW4nLCBtaW4sIG1heCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnZXEnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA9PT0gdGhpcy5wYXJzZVZhbHVlKHZhbHVlKSwgJ2VxdWFsJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ25lcScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxICE9PSB0aGlzLnBhcnNlVmFsdWUodmFsdWUpLCAnbm90RXF1YWwnLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnbHQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA8IHRoaXMucGFyc2VWYWx1ZSh2YWx1ZSksICdsZXNzVGhhbicsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdsdGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZSh2MSA8PSB0aGlzLnBhcnNlVmFsdWUodmFsdWUpLCAnbGVzc1RoYW5FcXVhbCcsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdndCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxID4gdGhpcy5wYXJzZVZhbHVlKHZhbHVlKSwgJ2dyZWF0ZXJUaGFuJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2d0ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5NZXNzYWdlKHYxID49IHRoaXMucGFyc2VWYWx1ZSh2YWx1ZSksICdncmVhdGVyVGhhbkVxdWFsJywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbdHJ1ZV07XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgdG9vbGJhcjoge1xyXG4gICAgICAgIHVuZG86ICdVbmRvJyxcclxuICAgICAgICByZWRvOiAnUmVkbycsXHJcbiAgICAgICAgcHJpbnQ6ICdQcmludCcsXHJcbiAgICAgICAgcGFpbnRmb3JtYXQ6ICdQYWludCBmb3JtYXQnLFxyXG4gICAgICAgIGNsZWFyZm9ybWF0OiAnQ2xlYXIgZm9ybWF0JyxcclxuICAgICAgICBmb3JtYXQ6ICdGb3JtYXQnLFxyXG4gICAgICAgIGZvbnROYW1lOiAnRm9udCcsXHJcbiAgICAgICAgZm9udFNpemU6ICdGb250IHNpemUnLFxyXG4gICAgICAgIGZvbnRCb2xkOiAnRm9udCBib2xkJyxcclxuICAgICAgICBmb250SXRhbGljOiAnRm9udCBpdGFsaWMnLFxyXG4gICAgICAgIHVuZGVybGluZTogJ1VuZGVybGluZScsXHJcbiAgICAgICAgc3RyaWtlOiAnU3RyaWtlJyxcclxuICAgICAgICBjb2xvcjogJ1RleHQgY29sb3InLFxyXG4gICAgICAgIGJnY29sb3I6ICdGaWxsIGNvbG9yJyxcclxuICAgICAgICBib3JkZXI6ICdCb3JkZXJzJyxcclxuICAgICAgICBtZXJnZTogJ01lcmdlIGNlbGxzJyxcclxuICAgICAgICBhbGlnbjogJ0hvcml6b250YWwgYWxpZ24nLFxyXG4gICAgICAgIHZhbGlnbjogJ1ZlcnRpY2FsIGFsaWduJyxcclxuICAgICAgICB0ZXh0d3JhcDogJ1RleHQgd3JhcHBpbmcnLFxyXG4gICAgICAgIGZyZWV6ZTogJ0ZyZWV6ZSBjZWxsJyxcclxuICAgICAgICBhdXRvZmlsdGVyOiAnRmlsdGVyJyxcclxuICAgICAgICBmb3JtdWxhOiAnRnVuY3Rpb25zJyxcclxuICAgICAgICBtb3JlOiAnTW9yZScsXHJcbiAgICB9LFxyXG4gICAgY29udGV4dG1lbnU6IHtcclxuICAgICAgICBjb3B5OiAnQ29weScsXHJcbiAgICAgICAgY3V0OiAnQ3V0JyxcclxuICAgICAgICBwYXN0ZTogJ1Bhc3RlJyxcclxuICAgICAgICBwYXN0ZVZhbHVlOiAnUGFzdGUgdmFsdWVzIG9ubHknLFxyXG4gICAgICAgIHBhc3RlRm9ybWF0OiAnUGFzdGUgZm9ybWF0IG9ubHknLFxyXG4gICAgICAgIGhpZGU6ICdIaWRlJyxcclxuICAgICAgICBpbnNlcnRSb3c6ICdJbnNlcnQgcm93JyxcclxuICAgICAgICBpbnNlcnRDb2x1bW46ICdJbnNlcnQgY29sdW1uJyxcclxuICAgICAgICBkZWxldGVTaGVldDogJ0RlbGV0ZScsXHJcbiAgICAgICAgZGVsZXRlUm93OiAnRGVsZXRlIHJvdycsXHJcbiAgICAgICAgZGVsZXRlQ29sdW1uOiAnRGVsZXRlIGNvbHVtbicsXHJcbiAgICAgICAgZGVsZXRlQ2VsbDogJ0RlbGV0ZSBjZWxsJyxcclxuICAgICAgICBkZWxldGVDZWxsVGV4dDogJ0RlbGV0ZSBjZWxsIHRleHQnLFxyXG4gICAgICAgIHZhbGlkYXRpb246ICdEYXRhIHZhbGlkYXRpb25zJyxcclxuICAgICAgICBjZWxscHJpbnRhYmxlOiAnRW5hYmxlIGV4cG9ydCcsXHJcbiAgICAgICAgY2VsbG5vbnByaW50YWJsZTogJ0Rpc2FibGUgZXhwb3J0JyxcclxuICAgICAgICBjZWxsZWRpdGFibGU6ICdFbmFibGUgZWRpdGluZycsXHJcbiAgICAgICAgY2VsbG5vbmVkaXRhYmxlOiAnRGlzYWJsZSBlZGl0aW5nJyxcclxuICAgIH0sXHJcbiAgICBwcmludDoge1xyXG4gICAgICAgIHNpemU6ICdQYXBlciBzaXplJyxcclxuICAgICAgICBvcmllbnRhdGlvbjogJ1BhZ2Ugb3JpZW50YXRpb24nLFxyXG4gICAgICAgIG9yaWVudGF0aW9uczogWydMYW5kc2NhcGUnLCAnUG9ydHJhaXQnXSxcclxuICAgIH0sXHJcbiAgICBmb3JtYXQ6IHtcclxuICAgICAgICBub3JtYWw6ICdOb3JtYWwnLFxyXG4gICAgICAgIHRleHQ6ICdQbGFpbiBUZXh0JyxcclxuICAgICAgICBudW1iZXI6ICdOdW1iZXInLFxyXG4gICAgICAgIHBlcmNlbnQ6ICdQZXJjZW50JyxcclxuICAgICAgICBybWI6ICdSTUInLFxyXG4gICAgICAgIHVzZDogJ1VTRCcsXHJcbiAgICAgICAgZXVyOiAnRVVSJyxcclxuICAgICAgICBkYXRlOiAnRGF0ZScsXHJcbiAgICAgICAgdGltZTogJ1RpbWUnLFxyXG4gICAgICAgIGRhdGV0aW1lOiAnRGF0ZSB0aW1lJyxcclxuICAgICAgICBkdXJhdGlvbjogJ0R1cmF0aW9uJyxcclxuICAgIH0sXHJcbiAgICBmb3JtdWxhOiB7XHJcbiAgICAgICAgc3VtOiAnU3VtJyxcclxuICAgICAgICBhdmVyYWdlOiAnQXZlcmFnZScsXHJcbiAgICAgICAgbWF4OiAnTWF4JyxcclxuICAgICAgICBtaW46ICdNaW4nLFxyXG4gICAgICAgIF9pZjogJ0lGJyxcclxuICAgICAgICBhbmQ6ICdBTkQnLFxyXG4gICAgICAgIG9yOiAnT1InLFxyXG4gICAgICAgIGNvbmNhdDogJ0NvbmNhdCcsXHJcbiAgICB9LFxyXG4gICAgdmFsaWRhdGlvbjoge1xyXG4gICAgICAgIHJlcXVpcmVkOiAnaXQgbXVzdCBiZSByZXF1aXJlZCcsXHJcbiAgICAgICAgbm90TWF0Y2g6ICdpdCBub3QgbWF0Y2ggaXRzIHZhbGlkYXRpb24gcnVsZScsXHJcbiAgICAgICAgYmV0d2VlbjogJ2l0IGlzIGJldHdlZW4ge30gYW5kIHt9JyxcclxuICAgICAgICBub3RCZXR3ZWVuOiAnaXQgaXMgbm90IGJldHdlZW4ge30gYW5kIHt9JyxcclxuICAgICAgICBub3RJbjogJ2l0IGlzIG5vdCBpbiBsaXN0JyxcclxuICAgICAgICBlcXVhbDogJ2l0IGVxdWFsIHRvIHt9JyxcclxuICAgICAgICBub3RFcXVhbDogJ2l0IG5vdCBlcXVhbCB0byB7fScsXHJcbiAgICAgICAgbGVzc1RoYW46ICdpdCBsZXNzIHRoYW4ge30nLFxyXG4gICAgICAgIGxlc3NUaGFuRXF1YWw6ICdpdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8ge30nLFxyXG4gICAgICAgIGdyZWF0ZXJUaGFuOiAnaXQgZ3JlYXRlciB0aGFuIHt9JyxcclxuICAgICAgICBncmVhdGVyVGhhbkVxdWFsOiAnaXQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHt9JyxcclxuICAgIH0sXHJcbiAgICBlcnJvcjoge1xyXG4gICAgICAgIHBhc3RlRm9yTWVyZ2VkQ2VsbDogJ1VuYWJsZSB0byBkbyB0aGlzIGZvciBtZXJnZWQgY2VsbHMnLFxyXG4gICAgfSxcclxuICAgIGNhbGVuZGFyOiB7XHJcbiAgICAgICAgd2Vla3M6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sXHJcbiAgICAgICAgbW9udGhzOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcclxuICAgIH0sXHJcbiAgICBidXR0b246IHtcclxuICAgICAgICBuZXh0OiAnTmV4dCcsXHJcbiAgICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcclxuICAgICAgICByZW1vdmU6ICdSZW1vdmUnLFxyXG4gICAgICAgIHNhdmU6ICdTYXZlJyxcclxuICAgICAgICBvazogJ09LJyxcclxuICAgIH0sXHJcbiAgICBzb3J0OiB7XHJcbiAgICAgICAgZGVzYzogJ1NvcnQgWiAtPiBBJyxcclxuICAgICAgICBhc2M6ICdTb3J0IEEgLT4gWicsXHJcbiAgICB9LFxyXG4gICAgZmlsdGVyOiB7XHJcbiAgICAgICAgZW1wdHk6ICdlbXB0eScsXHJcbiAgICB9LFxyXG4gICAgZGF0YVZhbGlkYXRpb246IHtcclxuICAgICAgICBtb2RlOiAnTW9kZScsXHJcbiAgICAgICAgcmFuZ2U6ICdDZWxsIFJhbmdlJyxcclxuICAgICAgICBjcml0ZXJpYTogJ0NyaXRlcmlhJyxcclxuICAgICAgICBtb2RlVHlwZToge1xyXG4gICAgICAgICAgICBjZWxsOiAnQ2VsbCcsXHJcbiAgICAgICAgICAgIGNvbHVtbjogJ0NvbHVuJyxcclxuICAgICAgICAgICAgcm93OiAnUm93JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHR5cGU6IHtcclxuICAgICAgICAgICAgbGlzdDogJ0xpc3QnLFxyXG4gICAgICAgICAgICBudW1iZXI6ICdOdW1iZXInLFxyXG4gICAgICAgICAgICBkYXRlOiAnRGF0ZScsXHJcbiAgICAgICAgICAgIHBob25lOiAnUGhvbmUnLFxyXG4gICAgICAgICAgICBlbWFpbDogJ0VtYWlsJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZXJhdG9yOiB7XHJcbiAgICAgICAgICAgIGJlOiAnYmV0d2VlbicsXHJcbiAgICAgICAgICAgIG5iZTogJ25vdCBiZXR3d2VuJyxcclxuICAgICAgICAgICAgbHQ6ICdsZXNzIHRoYW4nLFxyXG4gICAgICAgICAgICBsdGU6ICdsZXNzIHRoYW4gb3IgZXF1YWwgdG8nLFxyXG4gICAgICAgICAgICBndDogJ2dyZWF0ZXIgdGhhbicsXHJcbiAgICAgICAgICAgIGd0ZTogJ2dyZWF0ZXIgdGhhbiBvciBlcXVhbCB0bycsXHJcbiAgICAgICAgICAgIGVxOiAnZXF1YWwgdG8nLFxyXG4gICAgICAgICAgICBuZXE6ICdub3QgZXF1YWwgdG8nLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG4iLCIvKiBnbG9iYWwgd2luZG93ICovXHJcbmltcG9ydCBlbiBmcm9tICcuL2VuJztcclxuLy8gRGVmaW5lcyB0aGUgZmFsbGJhY2sgbGFuZ3VhZ2UgYXMgRW5nbGlzaFxyXG5sZXQgJGxhbmd1YWdlcyA9IFsnZW4nXTtcclxuY29uc3QgJG1lc3NhZ2VzID0ge1xyXG4gICAgZW4sXHJcbn07XHJcbmZ1bmN0aW9uIHRyYW5zbGF0ZShrZXksIG1lc3NhZ2VzKSB7XHJcbiAgICBpZiAobWVzc2FnZXMpIHtcclxuICAgICAgICAvLyBSZXR1cm4gdGhlIHRyYW5zbGF0aW9uIGZyb20gdGhlIGZpcnN0IGxhbmd1YWdlIGluIHRoZSBsYW5ndWFnZXMgYXJyYXlcclxuICAgICAgICAvLyB0aGF0IGhhcyBhIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQga2V5LlxyXG4gICAgICAgIGZvciAoY29uc3QgbGFuZyBvZiAkbGFuZ3VhZ2VzKSB7XHJcbiAgICAgICAgICAgIGlmICghbWVzc2FnZXNbbGFuZ10pXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBtZXNzYWdlc1tsYW5nXTtcclxuICAgICAgICAgICAgLy8gU3BsaXRzIHRoZSBrZXkgYXQgJy4nIGV4Y2VwdCB3aGVyZSBlc2NhcGVkIGFzICdcXC4nXHJcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBrZXkubWF0Y2goLyg/OlxcXFwufFteLl0pKy9nKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG1lc3NhZ2VbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdmFsdWUgZG9lc24ndCBleGlzdCwgdHJ5IG5leHQgbGFuZ3VhZ2VcclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0ga2V5cy5sZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIE1vdmUgZG93biB0byB0aGUgbmV4dCBsZXZlbCBvZiB0aGUgbWVzc2FnZXMgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcbmZ1bmN0aW9uIHQoa2V5LCAuLi5hcmdzKSB7XHJcbiAgICBsZXQgdiA9IHRyYW5zbGF0ZShrZXksICRtZXNzYWdlcyk7XHJcbiAgICBpZiAoIXYgJiYgd2luZG93ICYmIHdpbmRvdy54X3NwcmVhZHNoZWV0ICYmIHdpbmRvdy54X3NwcmVhZHNoZWV0LiRtZXNzYWdlcykge1xyXG4gICAgICAgIHYgPSB0cmFuc2xhdGUoa2V5LCB3aW5kb3cueF9zcHJlYWRzaGVldC4kbWVzc2FnZXMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHYgfHwgJyc7XHJcbn1cclxuZnVuY3Rpb24gdGYoa2V5KSB7XHJcbiAgICByZXR1cm4gKCkgPT4gdChrZXkpO1xyXG59XHJcbi8vIElmIGNsZWFyTGFuZ0xpc3QgaXMgc2V0IHRvIGZhbHNlLCBsYW5nIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGZyb250IG9mIHRoZVxyXG4vLyBsYW5ndWFnZXMgYXJyYXkuIFRoZSBsYW5ndWFnZXMgaW4gdGhlIGxhbmd1YWdlIGFycmF5IGFyZSBzZWFyY2hlZCBpbiBvcmRlclxyXG4vLyB0byBmaW5kIGEgdHJhbnNsYXRpb24uIFRoaXMgYWxsb3dzIHRoZSB1c2Ugb2Ygb3RoZXIgbGFuZ3VhZ2VzIGFzIGEgZmFsbGJhY2tcclxuLy8gaWYgbGFuZyBpcyBtaXNzaW5nIHNvbWUga2V5cy4gVGhlIGxhbmd1YWdlIGFycmF5IGlzIHByZWxvYWRlZCB3aXRoIEVuZ2xpc2guXHJcbi8vIFRvIHNldCB0aGUgbGFuZ3VhZ2VzIGFycmF5IHRvIG9ubHkgaW5jbHVkZSBsYW5nLCBzZXQgY2xlYXJMYW5nTGlzdCB0byB0cnVlLlxyXG5mdW5jdGlvbiBsb2NhbGUobGFuZywgbWVzc2FnZSwgY2xlYXJMYW5nTGlzdCA9IGZhbHNlKSB7XHJcbiAgICBpZiAoY2xlYXJMYW5nTGlzdCkge1xyXG4gICAgICAgICRsYW5ndWFnZXMgPSBbbGFuZ107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBBcHBlbmQgdG8gZnJvbnQgb2YgYXJyYXkuXHJcbiAgICAgICAgLy8gVHJhbnNsYXRpb24gbWV0aG9kIHdpbGwgdXNlIHRoZSBmaXJzdCBsYW5ndWFnZSBpbiB0aGUgbGlzdCB0aGF0IGhhcyBhXHJcbiAgICAgICAgLy8gbWF0Y2hpbmcga2V5LlxyXG4gICAgICAgICRsYW5ndWFnZXMudW5zaGlmdChsYW5nKTtcclxuICAgIH1cclxuICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgJG1lc3NhZ2VzW2xhbmddID0gbWVzc2FnZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICB0LFxyXG59O1xyXG5leHBvcnQgeyBsb2NhbGUsIHQsIHRmLCB9O1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcInhzcHJlYWRzaGVldFwiOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCIvKiBnbG9iYWwgd2luZG93LCBkb2N1bWVudCAqL1xyXG5pbXBvcnQgQm90dG9tYmFyIGZyb20gJy4vY29tcG9uZW50L2JvdHRvbWJhcic7XHJcbmltcG9ydCB7IGggfSBmcm9tICcuL2NvbXBvbmVudC9lbGVtZW50JztcclxuaW1wb3J0IFNoZWV0IGZyb20gJy4vY29tcG9uZW50L3NoZWV0JztcclxuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgRGF0YVByb3h5IGZyb20gJy4vY29yZS9kYXRhX3Byb3h5JztcclxuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xyXG5pbXBvcnQgeyBsb2NhbGUgfSBmcm9tICcuL2xvY2FsZS9sb2NhbGUnO1xyXG5leHBvcnQgY2xhc3MgU3ByZWFkc2hlZXQge1xyXG4gICAgb3B0aW9ucztcclxuICAgIHNoZWV0SW5kZXg7XHJcbiAgICBkYXRhcztcclxuICAgIGJvdHRvbWJhcjtcclxuICAgIHNoZWV0O1xyXG4gICAgZGF0YTtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHRhcmdldEVsID0gc2VsZWN0b3JzO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgc2hvd0JvdHRvbUJhcjogdHJ1ZSwgLi4ub3B0aW9ucyB9O1xyXG4gICAgICAgIHRoaXMuc2hlZXRJbmRleCA9IDE7XHJcbiAgICAgICAgdGhpcy5kYXRhcyA9IFtdO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3JzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0YXJnZXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ib3R0b21iYXIgPSB0aGlzLm9wdGlvbnMuc2hvd0JvdHRvbUJhclxyXG4gICAgICAgICAgICA/IG5ldyBCb3R0b21iYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tb2RlID09PSAncmVhZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMuYWRkU2hlZXQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXQucmVzZXREYXRhKGQpO1xyXG4gICAgICAgICAgICB9LCAoaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmRhdGFzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXQucmVzZXREYXRhKGQpO1xyXG4gICAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVNoZWV0KCk7XHJcbiAgICAgICAgICAgIH0sIChpbmRleCwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YXNbaW5kZXhdLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXQudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmFkZFNoZWV0KCk7XHJcbiAgICAgICAgY29uc3Qgcm9vdEVsID0gaCgnZGl2JywgYCR7Y3NzUHJlZml4fWApLm9uKCdjb250ZXh0bWVudScsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgICAgICAvLyBjcmVhdGUgY2FudmFzIGVsZW1lbnRcclxuICAgICAgICB0YXJnZXRFbC5hcHBlbmRDaGlsZChyb290RWwuZWwpO1xyXG4gICAgICAgIHRoaXMuc2hlZXQgPSBuZXcgU2hlZXQocm9vdEVsLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIGlmICh0aGlzLmJvdHRvbWJhciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByb290RWwuY2hpbGQodGhpcy5ib3R0b21iYXIuZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZFNoZWV0KG5hbWUsIGFjdGl2ZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBuID0gbmFtZSB8fCBgc2hlZXQke3RoaXMuc2hlZXRJbmRleH1gO1xyXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0YVByb3h5KG4sIHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgZC5jaGFuZ2UgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0LnRyaWdnZXIoJ2NoYW5nZScsIC4uLmFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kYXRhcy5wdXNoKGQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkOicsIG4sIGQsIHRoaXMuZGF0YXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmJvdHRvbWJhciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvdHRvbWJhci5hZGRJdGVtKG4sIGFjdGl2ZSwgdGhpcy5vcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldEluZGV4ICs9IDE7XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9XHJcbiAgICBkZWxldGVTaGVldCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ib3R0b21iYXIgPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBbb2xkSW5kZXgsIG5pbmRleF0gPSB0aGlzLmJvdHRvbWJhci5kZWxldGVJdGVtKCk7XHJcbiAgICAgICAgaWYgKG9sZEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhcy5zcGxpY2Uob2xkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICBpZiAobmluZGV4ID49IDApXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnJlc2V0RGF0YSh0aGlzLmRhdGFzW25pbmRleF0pO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxvYWREYXRhKGRhdGEpIHtcclxuICAgICAgICBjb25zdCBkcyA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xyXG4gICAgICAgIGlmICh0aGlzLmJvdHRvbWJhciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvdHRvbWJhci5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFzID0gW107XHJcbiAgICAgICAgaWYgKGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXQgPSBkc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5kID0gdGhpcy5hZGRTaGVldChpdC5uYW1lLCBpID09PSAwKTtcclxuICAgICAgICAgICAgICAgIG5kLnNldERhdGEoaXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0LnJlc2V0RGF0YShuZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFzLm1hcCgoaXQpID0+IGl0LmdldERhdGEoKSk7XHJcbiAgICB9XHJcbiAgICBjZWxsVGV4dChyaSwgY2ksIHRleHQsIHNoZWV0SW5kZXggPSAwKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhc1tzaGVldEluZGV4XS5zZXRDZWxsVGV4dChyaSwgY2ksIHRleHQsICdmaW5pc2hlZCcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY2VsbChyaSwgY2ksIHNoZWV0SW5kZXggPSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YXNbc2hlZXRJbmRleF0uZ2V0Q2VsbChyaSwgY2kpO1xyXG4gICAgfVxyXG4gICAgY2VsbFN0eWxlKHJpLCBjaSwgc2hlZXRJbmRleCA9IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhc1tzaGVldEluZGV4XS5nZXRDZWxsU3R5bGUocmksIGNpKTtcclxuICAgIH1cclxuICAgIHJlUmVuZGVyKCkge1xyXG4gICAgICAgIHRoaXMuc2hlZXQudGFibGUucmVuZGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBvbihldmVudE5hbWUsIGZ1bmMpIHtcclxuICAgICAgICB0aGlzLnNoZWV0Lm9uKGV2ZW50TmFtZSwgZnVuYyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZSgpIHtcclxuICAgICAgICBjb25zdCB7IHZhbGlkYXRpb25zIH0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25zLmVycm9ycy5zaXplIDw9IDA7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2UoY2IpIHtcclxuICAgICAgICB0aGlzLnNoZWV0Lm9uKCdjaGFuZ2UnLCBjYik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbG9jYWxlKGxhbmcsIG1lc3NhZ2UpIHtcclxuICAgICAgICBsb2NhbGUobGFuZywgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuY29uc3Qgc3ByZWFkc2hlZXQgPSAoZWwsIG9wdGlvbnMgPSB7fSkgPT4gbmV3IFNwcmVhZHNoZWV0KGVsLCBvcHRpb25zKTtcclxuaWYgKHdpbmRvdykge1xyXG4gICAgd2luZG93Lnhfc3ByZWFkc2hlZXQgPSBzcHJlYWRzaGVldDtcclxuICAgIHdpbmRvdy54X3NwcmVhZHNoZWV0LmxvY2FsZSA9IChsYW5nLCBtZXNzYWdlKSA9PiBsb2NhbGUobGFuZywgbWVzc2FnZSk7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgU3ByZWFkc2hlZXQ7XHJcbmV4cG9ydCB7IHNwcmVhZHNoZWV0IH07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==